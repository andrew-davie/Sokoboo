------- FILE ./sokoboo.asm LEVEL 1 PASS 3
      1  10000 ????						;    Sokoboo - a Sokoban implementation
      2  10000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  10000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  10000 ????						;
      5  10000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  10000 ????						;
      7  10000 ????						;    Code related to the generic tile-based display engine was developed by
      8  10000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  10000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  10000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  10000 ????						;
     12  10000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  10000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  10000 ????						;    directory for Apache licensing details.
     15  10000 ????						;
     16  10000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  10000 ????						;    See the copyright notices in the License directory for a list of level
     18  10000 ????						;    contributors.
     19  10000 ????						;
     20  10000 ????						;    Except where otherwise indicated, this software is released under the
     21  10000 ????						;    following licensing arrangement...
     22  10000 ????						;
     23  10000 ????						;    This program is free software: you can redistribute it and/or modify
     24  10000 ????						;    it under the terms of the GNU General Public License as published by
     25  10000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  10000 ????						;    (at your option) any later version.
     27  10000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  10000 ????
     29  10000 ????						;    This program is distributed in the hope that it will be useful,
     30  10000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  10000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  10000 ????						;    GNU General Public License for more details.
     33  10000 ????
     34  10000 ????
     35  10000 ????
     36  10000 ????		00 40	    TIA_BASE_ADDRESS =	$40
     37  10000 ????
     38  10000 ????				       processor	6502
------- FILE vcs.h LEVEL 2 PASS 3
      0  10000 ????				       include	"vcs.h"
      1  10000 ????						; VCS.H
      2  10000 ????						; Version 1.05, 13/November/2003
      3  10000 ????
      4  10000 ????		00 69	    VERSION_VCS =	105
      5  10000 ????
      6  10000 ????						; This file defines hardware registers and memory mapping for the
      7  10000 ????						; Atari 2600. It is distributed as a companion machine-specific support package
      8  10000 ????						; for the DASM compiler. Updates to this file, DASM, and associated tools are
      9  10000 ????						; available at at http://www.atari2600.org/dasm
     10  10000 ????						;
     11  10000 ????						; Many thanks to the original author(s) of this file, and to everyone who has
     12  10000 ????						; contributed to understanding the Atari 2600.  If you take issue with the
     13  10000 ????						; contents, or naming of registers, please write to me (atari2600@taswegian.com)
     14  10000 ????						; with your views.  Please contribute, if you think you can improve this
     15  10000 ????						; file!
     16  10000 ????						;
     17  10000 ????						; Latest Revisions...
     18  10000 ????						; 1.05  13/NOV/2003	  - Correction to 1.04 - now functions as requested by MR.
     19  10000 ????						;			  - Added VERSION_VCS equate (which will reflect 100x version #)
     20  10000 ????						;			    This will allow conditional code to verify VCS.H being
     21  10000 ????						;			    used for code assembly.
     22  10000 ????						; 1.04  12/NOV/2003	 Added TIA_BASE_WRITE_ADDRESS and TIA_BASE_READ_ADDRESS for
     23  10000 ????						;			 convenient disassembly/reassembly compatibility for hardware
     24  10000 ????						;			 mirrored reading/writing differences.	This is more a
     25  10000 ????						;			 readability issue, and binary compatibility with disassembled
     26  10000 ????						;			 and reassembled sources.  Per Manuel Rotschkar's suggestion.
     27  10000 ????						; 1.03  12/MAY/2003	 Added SEG segment at end of file to fix old-code compatibility
     28  10000 ????						;			 which was broken by the use of segments in this file, as
     29  10000 ????						;			 reported by Manuel Polik on [stella] 11/MAY/2003
     30  10000 ????						; 1.02  22/MAR/2003	 Added TIMINT($285)
     31  10000 ????						; 1.01				Constant offset added to allow use for 3F-style bankswitching
     32  10000 ????						;						 - define TIA_BASE_ADDRESS as $40 for Tigervision carts, otherwise
     33  10000 ????						;						   it is safe to leave it undefined, and the base address will
     34  10000 ????						;						   be set to 0.  Thanks to Eckhard Stolberg for the suggestion.
     35  10000 ????						;			    Note, may use -DLABEL=EXPRESSION to define TIA_BASE_ADDRESS
     36  10000 ????						;			  - register definitions are now generated through assignment
     37  10000 ????						;			    in uninitialised segments.	This allows a changeable base
     38  10000 ????						;			    address architecture.
     39  10000 ????						; 1.0	22/MAR/2003		Initial release
     40  10000 ????
     41  10000 ????
     42  10000 ????						;-------------------------------------------------------------------------------
     43  10000 ????
     44  10000 ????						; TIA_BASE_ADDRESS
     45  10000 ????						; The TIA_BASE_ADDRESS defines the base address of access to TIA registers.
     46  10000 ????						; Normally 0, the base address should (externally, before including this file)
     47  10000 ????						; be set to $40 when creating 3F-bankswitched (and other?) cartridges.
     48  10000 ????						; The reason is that this bankswitching scheme treats any access to locations
     49  10000 ????						; < $40 as a bankswitch.
     50  10000 ????
     51  10000 ????			   -	       IFNCONST	TIA_BASE_ADDRESS
     52  10000 ????			   -TIA_BASE_ADDRESS =	0
     53  10000 ????				       ENDIF
     54  10000 ????
     55  10000 ????						; Note: The address may be defined on the command-line using the -D switch, eg:
     56  10000 ????						; dasm.exe code.asm -DTIA_BASE_ADDRESS=$40 -f3 -v5 -ocode.bin
     57  10000 ????						; *OR* by declaring the label before including this file, eg:
     58  10000 ????						; TIA_BASE_ADDRESS = $40
     59  10000 ????						;   include "vcs.h"
     60  10000 ????
     61  10000 ????						; Alternate read/write address capability - allows for some disassembly compatibility
     62  10000 ????						; usage ; to allow reassembly to binary perfect copies).  This is essentially catering
     63  10000 ????						; for the mirrored ROM hardware registers.
     64  10000 ????
     65  10000 ????						; Usage: As per above, define the TIA_BASE_READ_ADDRESS and/or TIA_BASE_WRITE_ADDRESS
     66  10000 ????						; using the -D command-line switch, as required.  If the addresses are not defined,
     67  10000 ????						; they defaut to the TIA_BASE_ADDRESS.
     68  10000 ????
     69  10000 ????			   -	       IFNCONST	TIA_BASE_READ_ADDRESS
     70  10000 ????			   -TIA_BASE_READ_ADDRESS =	TIA_BASE_ADDRESS
     71  10000 ????				       ENDIF
     72  10000 ????
     73  10000 ????			   -	       IFNCONST	TIA_BASE_WRITE_ADDRESS
     74  10000 ????			   -TIA_BASE_WRITE_ADDRESS =	TIA_BASE_ADDRESS
     75  10000 ????				       ENDIF
     76  10000 ????
     77  10000 ????						;-------------------------------------------------------------------------------
     78  10000 ????
     79 U006d ????				      SEG.U	TIA_REGISTERS_WRITE
     80 U0040					      ORG	TIA_BASE_WRITE_ADDRESS
     81 U0040
     82 U0040							; DO NOT CHANGE THE RELATIVE ORDERING OF REGISTERS!
     83 U0040
     84 U0040		       00	   VSYNC      ds	1	; $00	 0000 00x0   Vertical Sync Set-Clear
     85 U0041		       00	   VBLANK     ds	1	; $01	 xx00 00x0   Vertical Blank Set-Clear
     86 U0042		       00	   WSYNC      ds	1	; $02	 ---- ----   Wait for Horizontal Blank
     87 U0043		       00	   RSYNC      ds	1	; $03	 ---- ----   Reset Horizontal Sync Counter
     88 U0044		       00	   NUSIZ0     ds	1	; $04	 00xx 0xxx   Number-Size player/missle 0
     89 U0045		       00	   NUSIZ1     ds	1	; $05	 00xx 0xxx   Number-Size player/missle 1
     90 U0046		       00	   COLUP0     ds	1	; $06	 xxxx xxx0   Color-Luminance Player 0
     91 U0047		       00	   COLUP1     ds	1	; $07	 xxxx xxx0   Color-Luminance Player 1
     92 U0048		       00	   COLUPF     ds	1	; $08	 xxxx xxx0   Color-Luminance Playfield
     93 U0049		       00	   COLUBK     ds	1	; $09	 xxxx xxx0   Color-Luminance Background
     94 U004a		       00	   CTRLPF     ds	1	; $0A	 00xx 0xxx   Control Playfield, Ball, Collisions
     95 U004b		       00	   REFP0      ds	1	; $0B	 0000 x000   Reflection Player 0
     96 U004c		       00	   REFP1      ds	1	; $0C	 0000 x000   Reflection Player 1
     97 U004d		       00	   PF0	      ds	1	; $0D	 xxxx 0000   Playfield Register Byte 0
     98 U004e		       00	   PF1	      ds	1	; $0E	 xxxx xxxx   Playfield Register Byte 1
     99 U004f		       00	   PF2	      ds	1	; $0F	 xxxx xxxx   Playfield Register Byte 2
    100 U0050		       00	   RESP0      ds	1	; $10	 ---- ----   Reset Player 0
    101 U0051		       00	   RESP1      ds	1	; $11	 ---- ----   Reset Player 1
    102 U0052		       00	   RESM0      ds	1	; $12	 ---- ----   Reset Missle 0
    103 U0053		       00	   RESM1      ds	1	; $13	 ---- ----   Reset Missle 1
    104 U0054		       00	   RESBL      ds	1	; $14	 ---- ----   Reset Ball
    105 U0055		       00	   AUDC0      ds	1	; $15	 0000 xxxx   Audio Control 0
    106 U0056		       00	   AUDC1      ds	1	; $16	 0000 xxxx   Audio Control 1
    107 U0057		       00	   AUDF0      ds	1	; $17	 000x xxxx   Audio Frequency 0
    108 U0058		       00	   AUDF1      ds	1	; $18	 000x xxxx   Audio Frequency 1
    109 U0059		       00	   AUDV0      ds	1	; $19	 0000 xxxx   Audio Volume 0
    110 U005a		       00	   AUDV1      ds	1	; $1A	 0000 xxxx   Audio Volume 1
    111 U005b		       00	   GRP0       ds	1	; $1B	 xxxx xxxx   Graphics Register Player 0
    112 U005c		       00	   GRP1       ds	1	; $1C	 xxxx xxxx   Graphics Register Player 1
    113 U005d		       00	   ENAM0      ds	1	; $1D	 0000 00x0   Graphics Enable Missle 0
    114 U005e		       00	   ENAM1      ds	1	; $1E	 0000 00x0   Graphics Enable Missle 1
    115 U005f		       00	   ENABL      ds	1	; $1F	 0000 00x0   Graphics Enable Ball
    116 U0060		       00	   HMP0       ds	1	; $20	 xxxx 0000   Horizontal Motion Player 0
    117 U0061		       00	   HMP1       ds	1	; $21	 xxxx 0000   Horizontal Motion Player 1
    118 U0062		       00	   HMM0       ds	1	; $22	 xxxx 0000   Horizontal Motion Missle 0
    119 U0063		       00	   HMM1       ds	1	; $23	 xxxx 0000   Horizontal Motion Missle 1
    120 U0064		       00	   HMBL       ds	1	; $24	 xxxx 0000   Horizontal Motion Ball
    121 U0065		       00	   VDELP0     ds	1	; $25	 0000 000x   Vertical Delay Player 0
    122 U0066		       00	   VDELP1     ds	1	; $26	 0000 000x   Vertical Delay Player 1
    123 U0067		       00	   VDELBL     ds	1	; $27	 0000 000x   Vertical Delay Ball
    124 U0068		       00	   RESMP0     ds	1	; $28	 0000 00x0   Reset Missle 0 to Player 0
    125 U0069		       00	   RESMP1     ds	1	; $29	 0000 00x0   Reset Missle 1 to Player 1
    126 U006a		       00	   HMOVE      ds	1	; $2A	 ---- ----   Apply Horizontal Motion
    127 U006b		       00	   HMCLR      ds	1	; $2B	 ---- ----   Clear Horizontal Move Registers
    128 U006c		       00	   CXCLR      ds	1	; $2C	 ---- ----   Clear Collision Latches
    129 U006d
    130 U006d							;-------------------------------------------------------------------------------
    131 U006d
    132 U004e ????				      SEG.U	TIA_REGISTERS_READ
    133 U0040					      ORG	TIA_BASE_READ_ADDRESS
    134 U0040
    135 U0040							;											bit 7	 bit 6
    136 U0040		       00	   CXM0P      ds	1	; $00	     xx00 0000	     Read Collision  M0-P1   M0-P0
    137 U0041		       00	   CXM1P      ds	1	; $01	     xx00 0000			     M1-P0   M1-P1
    138 U0042		       00	   CXP0FB     ds	1	; $02	     xx00 0000			     P0-PF   P0-BL
    139 U0043		       00	   CXP1FB     ds	1	; $03	     xx00 0000			     P1-PF   P1-BL
    140 U0044		       00	   CXM0FB     ds	1	; $04	     xx00 0000			     M0-PF   M0-BL
    141 U0045		       00	   CXM1FB     ds	1	; $05	     xx00 0000			     M1-PF   M1-BL
    142 U0046		       00	   CXBLPF     ds	1	; $06	     x000 0000			     BL-PF   -----
    143 U0047		       00	   CXPPMM     ds	1	; $07	     xx00 0000			     P0-P1   M0-M1
    144 U0048		       00	   INPT0      ds	1	; $08	     x000 0000	     Read Pot Port 0
    145 U0049		       00	   INPT1      ds	1	; $09	     x000 0000	     Read Pot Port 1
    146 U004a		       00	   INPT2      ds	1	; $0A	     x000 0000	     Read Pot Port 2
    147 U004b		       00	   INPT3      ds	1	; $0B	     x000 0000	     Read Pot Port 3
    148 U004c		       00	   INPT4      ds	1	; $0C		x000 0000	 Read Input (Trigger) 0
    149 U004d		       00	   INPT5      ds	1	; $0D		x000 0000	 Read Input (Trigger) 1
    150 U004e
    151 U004e							;-------------------------------------------------------------------------------
    152 U004e
    153 U0298 ????				      SEG.U	RIOT
    154 U0280					      ORG	$280
    155 U0280
    156 U0280							; RIOT MEMORY MAP
    157 U0280
    158 U0280		       00	   SWCHA      ds	1	; $280      Port A data register for joysticks:
    159 U0281							;			Bits 4-7 for player 1.  Bits 0-3 for player 2.
    160 U0281
    161 U0281		       00	   SWACNT     ds	1	; $281      Port A data direction register (DDR)
    162 U0282		       00	   SWCHB      ds	1	; $282		Port B data (console switches)
    163 U0283		       00	   SWBCNT     ds	1	; $283      Port B DDR
    164 U0284		       00	   INTIM      ds	1	; $284		Timer output
    165 U0285
    166 U0285		       00	   TIMINT     ds	1	; $285
    167 U0286
    168 U0286							; Unused/undefined registers ($285-$294)
    169 U0286
    170 U0286		       00		      ds	1	; $286
    171 U0287		       00		      ds	1	; $287
    172 U0288		       00		      ds	1	; $288
    173 U0289		       00		      ds	1	; $289
    174 U028a		       00		      ds	1	; $28A
    175 U028b		       00		      ds	1	; $28B
    176 U028c		       00		      ds	1	; $28C
    177 U028d		       00		      ds	1	; $28D
    178 U028e		       00		      ds	1	; $28E
    179 U028f		       00		      ds	1	; $28F
    180 U0290		       00		      ds	1	; $290
    181 U0291		       00		      ds	1	; $291
    182 U0292		       00		      ds	1	; $292
    183 U0293		       00		      ds	1	; $293
    184 U0294
    185 U0294		       00	   TIM1T      ds	1	; $294		set 1 clock interval
    186 U0295		       00	   TIM8T      ds	1	; $295      set 8 clock interval
    187 U0296		       00	   TIM64T     ds	1	; $296      set 64 clock interval
    188 U0297		       00	   T1024T     ds	1	; $297      set 1024 clock interval
    189 U0298
    190 U0298							;-------------------------------------------------------------------------------
    191 U0298							; The following required for back-compatibility with code which does not use
    192 U0298							; segments.
    193 U0298
    194  0000 ????				      SEG
    195  0000 ????
    196  0000 ????						; EOF
------- FILE ./sokoboo.asm
------- FILE macro.h LEVEL 2 PASS 3
      0  0000 ????				      include	"macro.h"
      1  0000 ????
      2  0000 ????						; MACRO.H
      3  0000 ????						; Version 1.06, 3/SEPTEMBER/2004
      4  0000 ????
      5  0000 ????	       00 6a	   VERSION_MACRO =	106
      6  0000 ????
      7  0000 ????						;
      8  0000 ????						; THIS FILE IS EXPLICITLY SUPPORTED AS A DASM-PREFERRED COMPANION FILE
      9  0000 ????						; PLEASE DO *NOT* REDISTRIBUTE MODIFIED VERSIONS OF THIS FILE!
     10  0000 ????						;
     11  0000 ????						; This file defines DASM macros useful for development for the Atari 2600.
     12  0000 ????						; It is distributed as a companion machine-specific support package
     13  0000 ????						; for the DASM compiler. Updates to this file, DASM, and associated tools are
     14  0000 ????						; available at at http://www.atari2600.org/dasm
     15  0000 ????						;
     16  0000 ????						; Many thanks to the people who have contributed.  If you take issue with the
     17  0000 ????						; contents, or would like to add something, please write to me
     18  0000 ????						; (atari2600@taswegian.com) with your contribution.
     19  0000 ????						;
     20  0000 ????						; Latest Revisions...
     21  0000 ????						;
     22  0000 ????						; 1.06  03/SEP/2004	 - nice revision of VERTICAL_BLANK (Edwin Blink)
     23  0000 ????						; 1.05  14/NOV/2003	 - Added VERSION_MACRO equate (which will reflect 100x version #)
     24  0000 ????						;			   This will allow conditional code to verify MACRO.H being
     25  0000 ????						;			   used for code assembly.
     26  0000 ????						; 1.04  13/NOV/2003	 - SET_POINTER macro added (16-bit address load)
     27  0000 ????						;
     28  0000 ????						; 1.03  23/JUN/2003	 - CLEAN_START macro added - clears TIA, RAM, registers
     29  0000 ????						;
     30  0000 ????						; 1.02  14/JUN/2003	 - VERTICAL_SYNC macro added
     31  0000 ????						;			   (standardised macro for vertical synch code)
     32  0000 ????						; 1.01  22/MAR/2003	 - SLEEP macro added.
     33  0000 ????						;			 - NO_ILLEGAL_OPCODES switch implemented
     34  0000 ????						; 1.0	22/MAR/2003		Initial release
     35  0000 ????
     36  0000 ????						; Note: These macros use illegal opcodes.  To disable illegal opcode usage,
     37  0000 ????						;   define the symbol NO_ILLEGAL_OPCODES (-DNO_ILLEGAL_OPCODES=1 on command-line).
     38  0000 ????						;   If you do not allow illegal opcode usage, you must include this file
     39  0000 ????						;   *after* including VCS.H (as the non-illegal opcodes access hardware
     40  0000 ????						;   registers and require them to be defined first).
     41  0000 ????
     42  0000 ????						; Available macros...
     43  0000 ????						;   SLEEP n		 - sleep for n cycles
     44  0000 ????						;   VERTICAL_SYNC	 - correct 3 scanline vertical synch code
     45  0000 ????						;   CLEAN_START	 - set machine to known state on startup
     46  0000 ????						;   SET_POINTER	 - load a 16-bit absolute to a 16-bit variable
     47  0000 ????
     48  0000 ????						;-------------------------------------------------------------------------------
     49  0000 ????						; SLEEP duration
     50  0000 ????						; Original author: Thomas Jentzsch
     51  0000 ????						; Inserts code which takes the specified number of cycles to execute.	This is
     52  0000 ????						; useful for code where precise timing is required.
     53  0000 ????						; ILLEGAL-OPCODE VERSION DOES NOT AFFECT FLAGS OR REGISTERS.
     54  0000 ????						; LEGAL OPCODE VERSION MAY AFFECT FLAGS
     55  0000 ????						; Uses illegal opcode (DASM 2.20.01 onwards).
     56  0000 ????
     57  0000 ????				      MAC	sleep
     58  0000 ????			   .CYCLES    SET	{1}
     59  0000 ????
     60  0000 ????				      IF	.CYCLES < 2
     61  0000 ????				      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
     62  0000 ????				      ERR
     63  0000 ????				      ENDIF
     64  0000 ????
     65  0000 ????				      IF	.CYCLES & 1
     66  0000 ????				      IFNCONST	NO_ILLEGAL_OPCODES
     67  0000 ????				      nop	0
     68  0000 ????				      ELSE
     69  0000 ????				      bit	VSYNC
     70  0000 ????				      ENDIF
     71  0000 ????			   .CYCLES    SET	.CYCLES - 3
     72  0000 ????				      ENDIF
     73  0000 ????
     74  0000 ????				      REPEAT	.CYCLES / 2
     75  0000 ????				      nop
     76  0000 ????				      REPEND
     77  0000 ????				      ENDM		;usage: SLEEP n (n>1)
     78  0000 ????
     79  0000 ????						;-------------------------------------------------------------------------------
     80  0000 ????						; VERTICAL_SYNC
     81  0000 ????						; revised version by Edwin Blink -- saves bytes!
     82  0000 ????						; Inserts the code required for a proper 3 scanline vertical sync sequence
     83  0000 ????						; Note: Alters the accumulator
     84  0000 ????
     85  0000 ????						; OUT: A = 0
     86  0000 ????
     87  0000 ????				      MAC	vertical_sync
     88  0000 ????				      lda	#%1110	; each '1' bits generate a VSYNC ON line (bits 1..3)
     89  0000 ????			   .VSLP1     sta	WSYNC	; 1st '0' bit resets Vsync, 2nd '0' bit exit loop
     90  0000 ????				      sta	VSYNC
     91  0000 ????				      lsr
     92  0000 ????				      bne	.VSLP1	; branch until VYSNC has been reset
     93  0000 ????				      ENDM
     94  0000 ????
     95  0000 ????						;-------------------------------------------------------------------------------
     96  0000 ????						; CLEAN_START
     97  0000 ????						; Original author: Andrew Davie
     98  0000 ????						; Standardised start-up code, clears stack, all TIA registers and RAM to 0
     99  0000 ????						; Sets stack pointer to $FF, and all registers to 0
    100  0000 ????						; Sets decimal mode off, sets interrupt flag (kind of un-necessary)
    101  0000 ????						; Use as very first section of code on boot (ie: at reset)
    102  0000 ????						; Code written to minimise total ROM usage - uses weird 6502 knowledge :)
    103  0000 ????
    104  0000 ????				      MAC	clean_start
    105  0000 ????				      sei
    106  0000 ????				      cld
    107  0000 ????
    108  0000 ????				      ldx	#0
    109  0000 ????				      txa
    110  0000 ????				      tay
    111  0000 ????			   .CLEAR_STACK dex
    112  0000 ????				      txs
    113  0000 ????				      pha
    114  0000 ????				      bne	.CLEAR_STACK	; SP=$FF, X = A = Y = 0
    115  0000 ????
    116  0000 ????				      ENDM
    117  0000 ????
    118  0000 ????						;-------------------------------------------------------
    119  0000 ????						; SET_POINTER
    120  0000 ????						; Original author: Manuel Rotschkar
    121  0000 ????						;
    122  0000 ????						; Sets a 2 byte RAM pointer to an absolute address.
    123  0000 ????						;
    124  0000 ????						; Usage: SET_POINTER pointer, address
    125  0000 ????						; Example: SET_POINTER SpritePTR, SpriteData
    126  0000 ????						;
    127  0000 ????						; Note: Alters the accumulator, NZ flags
    128  0000 ????						; IN 1: 2 byte RAM location reserved for pointer
    129  0000 ????						; IN 2: absolute address
    130  0000 ????
    131  0000 ????				      MAC	set_pointer
    132  0000 ????			   .POINTER   SET	{1}
    133  0000 ????			   .ADDRESS   SET	{2}
    134  0000 ????
    135  0000 ????				      LDA	#<.ADDRESS	; Get Lowbyte of Address
    136  0000 ????				      STA	.POINTER	; Store in pointer
    137  0000 ????				      LDA	#>.ADDRESS	; Get Hibyte of Address
    138  0000 ????				      STA	.POINTER+1	; Store in pointer+1
    139  0000 ????
    140  0000 ????				      ENDM
    141  0000 ????
    142  0000 ????						;-------------------------------------------------------
    143  0000 ????						; BOUNDARY byte#
    144  0000 ????						; Original author: Denis Debro (borrowed from Bob Smith / Thomas)
    145  0000 ????						;
    146  0000 ????						; Push data to a certain position inside a page and keep count of how
    147  0000 ????						; many free bytes the programmer will have.
    148  0000 ????						;
    149  0000 ????						; eg: BOUNDARY 5    ; position at byte #5 in page
    150  0000 ????
    151  0000 ????			   __DASM__TOTAL_FREE_MEMORY SET	0
    152  0000 ????			   .FREE_BYTES SET	0
    153  0000 ????				      MAC	boundary
    154  0000 ????				      REPEAT	256
    155  0000 ????				      IF	<. % {1} = 0
    156  0000 ????				      MEXIT
    157  0000 ????				      ELSE
    158  0000 ????			   .FREE_BYTES SET	.FREE_BYTES + 1
    159  0000 ????				      .byte	$00
    160  0000 ????				      ENDIF
    161  0000 ????				      REPEND
    162  0000 ????			   __DASM__TOTAL_FREE_MEMORY SET	__DASM__TOTAL_FREE_MEMORY + .FREE_BYTES
    163  0000 ????				      ENDM
    164  0000 ????
    165  0000 ????
    166  0000 ????						; EOF
------- FILE ./sokoboo.asm
     41  0000 ????
     42  0000 ????			   ORIGIN     SET	0
     43  0000 ????			   ORIGIN_RAM SET	0
     44  0000 ????
------- FILE segtime.asm LEVEL 2 PASS 3
      0  0000 ????				      include	"segtime.asm"
      1  0000 ????						;    Sokoboo - a Sokoban implementation
      2  0000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  0000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0000 ????						;
      5  0000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0000 ????						;
      7  0000 ????						;    Code related to the generic tile-based display engine was developed by
      8  0000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0000 ????						;
     12  0000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  0000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0000 ????						;    directory for Apache licensing details.
     15  0000 ????						;
     16  0000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0000 ????						;    See the copyright notices in the License directory for a list of level
     18  0000 ????						;    contributors.
     19  0000 ????						;
     20  0000 ????						;    Except where otherwise indicated, this software is released under the
     21  0000 ????						;    following licensing arrangement...
     22  0000 ????						;
     23  0000 ????						;    This program is free software: you can redistribute it and/or modify
     24  0000 ????						;    it under the terms of the GNU General Public License as published by
     25  0000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  0000 ????						;    (at your option) any later version.
     27  0000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0000 ????
     29  0000 ????						;    This program is distributed in the hope that it will be useful,
     30  0000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0000 ????						;    GNU General Public License for more details.
     33  0000 ????
     34  0000 ????						; segtime optimization (averages):
     35  0000 ????						;   lost time = segtime/2 * 64
     36  0000 ????						;   num-segments = (vblank + overscan time) (NTSC 276=62+51=113) / 2 / segtime
     37  0000 ????						;   overhead: num-segments * 8 (assuming minimal INTIM check only)
     38  0000 ????						;
     39  0000 ????						; segtime = 2:
     40  0000 ????						;   lost time = 64
     41  0000 ????						;   num-segments = 28
     42  0000 ????						;   overhead = 224!
     43  0000 ????						; segtime = 3:
     44  0000 ????						;   lost time = 96
     45  0000 ????						;   num-segments = 18
     46  0000 ????						;   overhead = 144!
     47  0000 ????						; segtime = 4: 	     <--!!!
     48  0000 ????						;   lost time = 128!
     49  0000 ????						;   num-segments = 28
     50  0000 ????						;   overhead = 112
     51  0000 ????						; segtime = 5:
     52  0000 ????						;   lost time = 160!
     53  0000 ????						;   num-segments = 11
     54  0000 ????						;   overhead = 88
     55  0000 ????						; segtime = 6:
     56  0000 ????						;   lost time = 192!
     57  0000 ????						;   num-segments = 9
     58  0000 ????						;   overhead = 72
     59  0000 ????						; segtime = 7:
     60  0000 ????						;   lost time = 224!
     61  0000 ????						;   num-segments = 8
     62  0000 ????						;   overhead = 64
     63  0000 ????						; segtime = 10:
     64  0000 ????						;   lost time = 320!
     65  0000 ????						;   num-segments = 5
     66  0000 ????						;   overhead = 40
     67  0000 ????						; segtime = 20:
     68  0000 ????						;   lost time = 640!
     69  0000 ????						;   num-segments = 2
     70  0000 ????						;   overhead = 16
     71  0000 ????						; segtime = 40:
     72  0000 ????						;   lost time = 1280!
     73  0000 ????						;   num-segments = 1
     74  0000 ????						;   overhead = 8
     75  0000 ????
     76  0000 ????						; optimal INTIM segtime is 4 + 1 = 5,
     77  0000 ????						; below wasted time increases rapidly, above only moderately
     78  0000 ????						; if the overhead becomes larger, optimal segtimes will increase too
     79  0000 ????						; also the lost time will become smaller, if smaller segments can be used instead,
     80  0000 ????						;  so larger segtimes are not that bad then
     81  0000 ????
     82  0000 ????
     83  0000 ????				      MAC	segtime
     84  0000 ????			   {1}	      SET	{2}
     85  0000 ????			   TEST_{1}   =	0
     86  0000 ????				      ENDM
     87  0000 ????
     88  0000 ????				      MAC	segtime_c
     89  0000 ????			   {1}	      SET	({2}+32)/64 + 2
     90  0000 ????			   TEST_{1}   =	0
     91  0000 ????				      ENDM
     92  0000 ????
     93  0000 ????
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_DIRECT, 361 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019
      1  0000 ????			   SEGTIME_SCD_DIRECT SET	(361 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_DIRECT =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_QUICK, 344 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019
      1  0000 ????			   SEGTIME_SCD_QUICK SET	(344 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_QUICK =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_SLOW, 676 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019
      1  0000 ????			   SEGTIME_SCD_SLOW SET	(676 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_SLOW =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_PF0, 88 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019 ??
      1  0000 ????			   SEGTIME_SCD_PF0 SET	(88 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_PF0 =	0
     98  0000 ????
     99  0000 ????						;---------------------------------------------------------------------------------------------------
    100  0000 ????						; Pathways
    101  0000 ????						; StealPart3, not enough time for SCD_SLOW --> 79✅
    102  0000 ????						; if QuickDraw does immediate exit, 58✅
    103  0000 ????
    104  0000 ????
    105  0000 ????	       00 04	   SEGTIME_SCD_MIN =	SEGTIME_SCD_PF0
    106  0000 ????
    107  0000 ????						;    SEGTIME_C SEGTIME_SCD_MIN, SEGTIME_SCD_PF0
    108  0000 ????						;---------------------------------------------------------------------------------------------------
    109  0000 ????
      0  0000 ????				      SEGTIME_C	SEGTIME_BDF, 2512	;✅
      1  0000 ????			   SEGTIME_BDF SET	(2512+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_BDF =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_BDS, 68	;✅
      1  0000 ????			   SEGTIME_BDS SET	(68+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_BDS =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_DSL, 127	;✅
      1  0000 ????			   SEGTIME_DSL SET	(127+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_DSL =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SWITCHOBJECTS,46	;✅
      1  0000 ????			   SEGTIME_SWITCHOBJECTS SET	(46+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SWITCHOBJECTS =	0
    114  0000 ????
      0  0000 ????				      SEGTIME_C	MINIMUM_SEGTIME, 95	;✅ processing slice minimum requirement
      1  0000 ????			   MINIMUM_SEGTIME SET	(95+32)/64 + 2
      2  0000 ????	       00 00	   TEST_MINIMUM_SEGTIME =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_MINIMUM_TIMESLICE, 54	;✅ abort time maximum requirement for timeslice
      1  0000 ????			   SEGTIME_MINIMUM_TIMESLICE SET	(54+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_MINIMUM_TIMESLICE =	0
    117  0000 ????
    118  0000 ????						; Note: we add 1 to the minimum because there's a bit of overhead at the start of the timeslice code which vectors
    119  0000 ????						; to the appropriate timeslice.  That timeslice then checks the segtime again -- and in the case of the minimum we
    120  0000 ????						; will already have used 55 cycles of the available timeslice to get to the segtime check. Given that there are only
    121  0000 ????						; 9 spare cycles in the 'unit' left, it's probably more efficient to abort earlier and save those 55 cycles for other
    122  0000 ????						; uses ...
    123  0000 ????
    124  0000 ????
    125  0000 ????						; The following timings have been physicaly timed via code/debugger... the comment shows the worst observed time.
    126  0000 ????						; Generally the allocated segtime should be a bit bigger than the worst observed, to cater for the minor code
    127  0000 ????						; outside the creature itself which might otherwise cause screen time over-run.
    128  0000 ????
    129  0000 ????						; The following are NOT object-related and timing is a bit of manual guesswork/calculation
    130  0000 ????						; Comment may indicate at what value a glitch was DEFINITELY seen. These timings may not be optimal.
    131  0000 ????
      0  0000 ????				      SEGTIME	SEGTIME_MAN,22	;18 ;12	  ;NFI
      1  0000 ????			   SEGTIME_MAN SET	22
      2  0000 ????	       00 00	   TEST_SEGTIME_MAN =	0
------- FILE ./sokoboo.asm
     46  0000 ????
     47  0000 ????						;FIXED_BANK		 = 3 * 2048	      ;-->  8K ROM tested OK
     48  0000 ????						;FIXED_BANK		  = 7 * 2048	      ;-->  16K ROM tested OK
     49  0000 ????						;FIXED_BANK		 = 15 * 2048	       ; ->> 32K
     50  0000 ????	       f8 00	   FIXED_BANK =	31 * 2048	; ->> 32K
     51  0000 ????						;FIXED_BANK		 = 239 * 2048	      ;--> 480K ROM tested OK (KK/CC2 compatibility)
     52  0000 ????						;FIXED_BANK		 = 127 * 2048	      ;--> 256K ROM tested OK
     53  0000 ????						;FIXED_BANK		 = 255 * 2048	      ;--> 512K ROM tested OK (CC2 can't handle this)
     54  0000 ????
     55  0000 ????	       00 01	   YES	      =	1
     56  0000 ????	       00 00	   NO	      =	0
     57  0000 ????
     58  0000 ????						;===================================
     59  0000 ????	       00 00	   FINAL_VERSION =	NO	; this OVERRIDES any selections below and sets everything correct for a final release
     60  0000 ????						;===================================
     61  0000 ????
     62  0000 ????						;-------------------------------------------------------------------------------
     63  0000 ????						; The following are optional YES/NO depending on phase of the moon
     64  0000 ????			   L276       SET	YES	; use 276 line display for NTSC
     65  0000 ????						;-------------------------------------------------------------------------------
     66  0000 ????						; DO NOT MODIFY THE BELOW SETTINGS -- USE THE ONES ABOVE!
     67  0000 ????						; Here we make sure everyting is OK based on the single switch -- less chance for accidents
     68  0000 ????			  -	      IF	FINAL_VERSION = YES
     69  0000 ????			  -L276       SET	YES	; use 276 line display for NTSC
     70  0000 ????				      ENDIF
     71  0000 ????
     72  0000 ????						;-------------------------------------------------------------------------------
     73  0000 ????
     74  0000 ????	       00 01	   COMPILE_ILLEGALOPCODES =	1
     75  0000 ????	       00 0c	   RESERVED_FOR_STACK =	12	; bytes guaranteed not overwritten by variable use
     76  0000 ????
     77  0000 ????	       00 00	   PALETTE_INTENSITY_ADJUST =	0
     78  0000 ????	       00 06	   PUSH_LIMIT =	6	; slowdown when pushing on a BOX
     79  0000 ????
     80  0000 ????						; time bonus countdown constants:
     81  0000 ????	       00 ff	   EXTRA_LIFE_TIMER =	255	; Cosmic Ark star effect on extra life. Should be 5 seconds like in original
     82  0000 ????	       00 3c	   SCORING_TIMER =	60	; ~1.0 second
     83  0000 ????	       00 96	   SCORING_TIMER_FIRST =	150	; begin level timer is long to show level/lives clearly
     84  0000 ????
     85  0000 ????	       00 07	   DIRECTION_BITS =	%111	; for ManLastDirection
     86  0000 ????
     87  0000 ????	       00 a0	   MAX_THROTTLE =	160	; must be small enough to allow ~2 * max add value overflow (<256 - 2*max throttle value!)
     88  0000 ????
     89  0000 ????						;scoring flags contants:
     90  0000 ????	       00 03	   DISPLAY_FLAGS =	%11
     91  0000 ????	       00 00	   DISPLAY_TIME =	%00
     92  0000 ????	       00 01	   DISPLAY_SCORE =	%01
     93  0000 ????	       00 02	   DISPLAY_LIVES =	%10
     94  0000 ????	       00 03	   DISPLAY_HIGH =	%11
     95  0000 ????
     96  0000 ????						;------------------------------------------------------------------------------
     97  0000 ????
     98  0000 ????	       00 00	   DIGITS     =	NO
     99  0000 ????	       00 01	   WAIT_FOR_INITIAL_DRAW =	YES	; blank until all initial tiles drawn
    100  0000 ????
    101  0000 ????						;------------------------------------------------------------------------------
    102  0000 ????
    103  0000 ????	       00 0a	   SCREEN_WIDTH =	10	; board characters per line (DIFFICULT TO CHANGE)
    104  0000 ????
    105  0000 ????	       00 08	   SCREEN_LINES =	8	; number of scanlines in screen buffer
    106  0000 ????	       00 18	   LINES_PER_CHAR =	24	; MULTIPLE OF 3 SO RGB INTERFACES CHARS OK
    107  0000 ????
    108  0000 ????	       00 50	   SCREEN_ARRAY_SIZE =	SCREEN_WIDTH * SCREEN_LINES
    109  0000 ????
    110  0000 ????
    111  0000 ????	       00 3f	   SET_BANK   =	$3F	; write address to switch ROM banks
    112  0000 ????	       00 3e	   SET_BANK_RAM =	$3E	; write address to switch RAM banks
    113  0000 ????
    114  0000 ????
    115  0000 ????						; color constants:
    116  0000 ????	       00 0e	   WHITE      =	$0e	; bright white, for NTSC and PAL
    117  0000 ????
    118  0000 ????	       10 00	   RAM_3E     =	$1000
    119  0000 ????	       04 00	   RAM_SIZE   =	$400
    120  0000 ????	       04 00	   RAM_WRITE  =	$400	; add this to RAM address when doing writes
    121  0000 ????
    122  0000 ????	       00 b4	   RND_EOR_VAL =	$b4
    123  0000 ????
    124  0000 ????
    125  0000 ????						; Platform constants:
    126  0000 ????	       00 02	   PAL	      =	%10
    127  0000 ????	       00 02	   PAL_50     =	PAL|0
    128  0000 ????	       00 03	   PAL_60     =	PAL|1
    129  0000 ????
    130  0000 ????
    131  0000 ????				      IF	L276
    132  0000 ????	       00 30	   VBLANK_TIM_NTSC =	48	; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
    133  0000 ????			  -	      ELSE
    134  0000 ????			  -VBLANK_TIM_NTSC =	50	; NTSC 262
    135  0000 ????				      ENDIF
    136  0000 ????	       00 55	   VBLANK_TIM_PAL =	85	;85			    ; PAL 312 (we could increase this too, if we want to, but I suppose the used vertical screen size would become very small then)
    137  0000 ????
    138  0000 ????				      IF	L276
    139  0000 ????	       00 23	   OVERSCAN_TIM_NTSC =	35	;24 ;51			; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
    140  0000 ????			  -	      ELSE
    141  0000 ????			  -OVERSCAN_TIM_NTSC =	8	;51			    ; NTSC 262
    142  0000 ????				      ENDIF
    143  0000 ????	       00 29	   OVERSCAN_TIM_PAL =	41	; PAL 312 (we could increase this too, if we want to, but I suppose the used vertical screen size would become very small then)
    144  0000 ????
    145  0000 ????				      IF	L276
    146  0000 ????	       01 14	   SCANLINES_NTSC =	276	; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
    147  0000 ????			  -	      ELSE
    148  0000 ????			  -SCANLINES_NTSC =	262	; NTSC 262
    149  0000 ????				      ENDIF
    150  0000 ????	       01 38	   SCANLINES_PAL =	312
    151  0000 ????
    152  0000 ????
    153  0000 ????						;------------------------------------------------------------------------------
    154  0000 ????						; MACRO definitions
    155  0000 ????
------- FILE macro2.h LEVEL 2 PASS 3
      0  0000 ????				      include	"macro2.h"
      1  0000 ????						; macros
      2  0000 ????
      3  0000 ????				      MAC	ntsc_to_pal
      4  0000 ????				      IF	{1} = 0
      5  0000 ????				      .byte	{1}+{2}
      6  0000 ????				      ENDIF
      7  0000 ????				      IF	{1} = $10
      8  0000 ????				      .byte	$20+{2}
      9  0000 ????				      ENDIF
     10  0000 ????				      IF	{1} = $20
     11  0000 ????				      .byte	$40+{2}
     12  0000 ????				      ENDIF
     13  0000 ????				      IF	{1} = $30
     14  0000 ????				      .byte	$40+{2}
     15  0000 ????				      ENDIF
     16  0000 ????				      IF	{1} = $40
     17  0000 ????				      .byte	$60+{2}
     18  0000 ????				      ENDIF
     19  0000 ????				      IF	{1} = $50
     20  0000 ????				      .byte	$80+{2}
     21  0000 ????				      ENDIF
     22  0000 ????				      IF	{1} = $60
     23  0000 ????				      .byte	$C0+{2}
     24  0000 ????				      ENDIF
     25  0000 ????				      IF	{1} = $70
     26  0000 ????				      .byte	$D0+{2}
     27  0000 ????				      ENDIF
     28  0000 ????				      IF	{1} = $80
     29  0000 ????				      .byte	$B0+{2}
     30  0000 ????				      ENDIF
     31  0000 ????				      IF	{1} = $90
     32  0000 ????				      .byte	$90+{2}
     33  0000 ????				      ENDIF
     34  0000 ????				      IF	{1} = $A0
     35  0000 ????				      .byte	$70+{2}
     36  0000 ????				      ENDIF
     37  0000 ????				      IF	{1} = $B0
     38  0000 ????				      .byte	$50+{2}
     39  0000 ????				      ENDIF
     40  0000 ????				      IF	{1} = $C0
     41  0000 ????				      .byte	$30+{2}
     42  0000 ????				      ENDIF
     43  0000 ????				      IF	{1} = $D0
     44  0000 ????				      .byte	$30+{2}
     45  0000 ????				      ENDIF
     46  0000 ????				      IF	{1} = $E0
     47  0000 ????				      .byte	$20+{2}
     48  0000 ????				      ENDIF
     49  0000 ????				      IF	{1} = $F0
     50  0000 ????				      .byte	$40+{2}
     51  0000 ????				      ENDIF
     52  0000 ????				      ENDM		; {col} {intensity}
------- FILE ./sokoboo.asm
    157  0000 ????
    158  0000 ????	       08 00	   ROM_BANK_SIZE =	$800
    159  0000 ????
    160  0000 ????				      MAC	newbank
    161  0000 ????				      SEG	{1}
    162  0000 ????				      ORG	ORIGIN
    163  0000 ????				      RORG	$F000
    164  0000 ????			   BANK_START SET	*
    165  0000 ????			   {1}	      SET	ORIGIN / 2048
    166  0000 ????			   ORIGIN     SET	ORIGIN + 2048
    167  0000 ????			   _CURRENT_BANK SET	{1}
    168  0000 ????				      ENDM		; bank name
    169  0000 ????
    170  0000 ????				      MAC	define_1k_segment
    171  0000 ????				      ALIGN	$400
    172  0000 ????			   SEGMENT_{1} SET	*
    173  0000 ????			   BANK_{1}   SET	_CURRENT_BANK
    174  0000 ????				      ENDM		; {seg name}
    175  0000 ????
    176  0000 ????				      MAC	check_bank_size
    177  0000 ????			   .TEMP      =	* - BANK_START
    178  0000 ????				      ECHO	{1}, "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
    179  0000 ????				      if	( .TEMP ) > ROM_BANK_SIZE
    180  0000 ????				      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
    181  0000 ????				      ERR
    182  0000 ????				      endif
    183  0000 ????				      ENDM		; name
    184  0000 ????
    185  0000 ????
    186  0000 ????				      MAC	check_half_bank_size
    187  0000 ????						; This macro is for checking the first 1K of ROM bank data that is to be copied to RAM.
    188  0000 ????						; Note that these ROM banks can contain 2K, so this macro will generally go 'halfway'
    189  0000 ????			   .TEMP      =	* - BANK_START
    190  0000 ????				      ECHO	{1}, "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
    191  0000 ????				      if	( .TEMP ) > ROM_BANK_SIZE/2
    192  0000 ????				      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
    193  0000 ????				      ERR
    194  0000 ????				      endif
    195  0000 ????				      ENDM		; name
    196  0000 ????
    197  0000 ????
    198  0000 ????				      MAC	overlay
    199  0000 ????				      SEG.U	OVERLAY_{1}
    200  0000 ????				      org	Overlay
    201  0000 ????				      ENDM		; {name}
    202  0000 ????
    203  0000 ????						;--------------------------------------------------------------------------
    204  0000 ????
    205  0000 ????				      MAC	validate_overlay
    206  0000 ????				      LIST	OFF
    207  0000 ????				      if	* - Overlay > OVERLAY_SIZE
    208  0000 ????				      ECHO	"Overlay ", {1}, "too big"
    209  0000 ????				      ERR
    210  0000 ????				      endif
    211  0000 ????				      LIST	ON
    212  0000 ????				      ENDM
    213  0000 ????
    214  0000 ????						;--------------------------------------------------------------------------
    215  0000 ????						; Macro inserts a page break if the object would overlap a page
    216  0000 ????
    217  0000 ????				      MAC	optional_pagebreak
    218  0000 ????				      LIST	OFF
    219  0000 ????				      IF	(>( * + {2} -1 )) > ( >* )
    220  0000 ????			   EARLY_LOCATION SET	*
    221  0000 ????				      ALIGN	256
    222  0000 ????				      ECHO	"PAGE BREAK INSERTED FOR ", {1}
    223  0000 ????				      ECHO	"REQUESTED SIZE = ", {2}
    224  0000 ????				      ECHO	"WASTED SPACE = ", *-EARLY_LOCATION
    225  0000 ????				      ECHO	"PAGEBREAK LOCATION = ", *
    226  0000 ????				      ENDIF
    227  0000 ????				      LIST	ON
    228  0000 ????				      ENDM		; { string, size }
    229  0000 ????
    230  0000 ????
    231  0000 ????				      MAC	check_page_crossing
    232  0000 ????				      LIST	OFF
    233  0000 ????				      if	( >BLOCK_END != >BLOCK_START )
    234  0000 ????				      ECHO	"PAGE CROSSING @ ", BLOCK_START
    235  0000 ????				      endif
    236  0000 ????				      LIST	ON
    237  0000 ????				      ENDM
    238  0000 ????
    239  0000 ????				      MAC	checkpage
    240  0000 ????				      LIST	OFF
    241  0000 ????				      IF	>. != >{1}
    242  0000 ????				      ECHO	""
    243  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    244  0000 ????				      ECHO	""
    245  0000 ????				      ERR
    246  0000 ????				      ENDIF
    247  0000 ????				      LIST	ON
    248  0000 ????				      ENDM
    249  0000 ????
    250  0000 ????				      MAC	checkpagex
    251  0000 ????				      LIST	OFF
    252  0000 ????				      IF	>. != >{1}
    253  0000 ????				      ECHO	""
    254  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ") @ {0}"
    255  0000 ????				      ECHO	{2}
    256  0000 ????				      ECHO	""
    257  0000 ????				      ERR
    258  0000 ????				      ENDIF
    259  0000 ????				      LIST	ON
    260  0000 ????				      ENDM
    261  0000 ????
    262  0000 ????
    263  0000 ????				      MAC	checkpage_bne
    264  0000 ????				      LIST	OFF
    265  0000 ????				      IF	0	;>(. + 2) != >{1}
    266  0000 ????				      ECHO	""
    267  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    268  0000 ????				      ECHO	""
    269  0000 ????				      ERR
    270  0000 ????				      ENDIF
    271  0000 ????				      LIST	ON
    272  0000 ????				      bne	{1}
    273  0000 ????				      ENDM
    274  0000 ????
    275  0000 ????				      MAC	checkpage_bpl
    276  0000 ????				      LIST	OFF
    277  0000 ????				      IF	(>(.+2 )) != >{1}
    278  0000 ????				      ECHO	""
    279  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    280  0000 ????				      ECHO	""
    281  0000 ????				      ERR
    282  0000 ????				      ENDIF
    283  0000 ????				      LIST	ON
    284  0000 ????				      bpl	{1}
    285  0000 ????				      ENDM
    286  0000 ????
    287  0000 ????				      MAC	align_free
    288  0000 ????			   FREE       SET	FREE - .
    289  0000 ????				      align	{1}
    290  0000 ????			   FREE       SET	FREE + .
    291  0000 ????				      echo	"@", ., ":", FREE
    292  0000 ????				      ENDM
    293  0000 ????
    294  0000 ????						;--------------------------------------------------------------------------
    295  0000 ????
    296  0000 ????				      MAC	vector
    297  0000 ????				      .word	{1}
    298  0000 ????				      ENDM		; just a word pointer to code
    299  0000 ????
    300  0000 ????
    301  0000 ????				      MAC	define_subroutine
    302  0000 ????			   BANK_{1}   =	_CURRENT_BANK	; bank in which this subroutine resides
    303  0000 ????				      SUBROUTINE		; keep everything local
    304  0000 ????			   {1}			; entry point
    305  0000 ????				      ENDM		; name of subroutine
    306  0000 ????
    307  0000 ????
    308  0000 ????
    309  0000 ????						;--------------------------------------------------------------------------
    310  0000 ????
    311  0000 ????				      MAC	newrambank
    312  0000 ????				      SEG.U	{1}
    313  0000 ????				      ORG	ORIGIN_RAM
    314  0000 ????				      RORG	RAM_3E
    315  0000 ????			   BANK_START SET	*
    316  0000 ????			   {1}	      SET	ORIGIN_RAM / RAM_SIZE
    317  0000 ????			   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    318  0000 ????				      ENDM		; bank name
    319  0000 ????
    320  0000 ????				      MAC	validate_ram_size
    321  0000 ????				      if	* - RAM_3E > RAM_SIZE
    322  0000 ????				      ERR
    323  0000 ????				      endif
    324  0000 ????				      ENDM
    325  0000 ????
    326  0000 ????				      MAC	next_random
    327  0000 ????						; update random value:
    328  0000 ????				      lda	rnd	; 3
    329  0000 ????				      lsr		; 2
    330  0000 ????				      IFCONST	rndHi
    331  0000 ????				      ror	rndHi	; 5	 16 bit LFSR
    332  0000 ????				      ENDIF
    333  0000 ????				      bcc	.skipEOR	; 2/3
    334  0000 ????				      eor	#RND_EOR_VAL	; 2
    335  0000 ????			   .skipEOR
    336  0000 ????				      sta	rnd	; 3 = 14/19
    337  0000 ????				      ENDM
    338  0000 ????
    339  0000 ????				      MAC	resync
    340  0000 ????						; resync screen, X and Y == 0 afterwards
    341  0000 ????				      lda	#%10	; make sure VBLANK is ON
    342  0000 ????				      sta	VBLANK
    343  0000 ????
    344  0000 ????				      ldx	#8	; 5 or more RESYNC_FRAMES
    345  0000 ????			   .loopResync
    346  0000 ????				      VERTICAL_SYNC
    347  0000 ????
    348  0000 ????				      ldy	#SCANLINES_NTSC/2 - 2
    349  0000 ????				      lda	Platform
    350  0000 ????				      eor	#PAL_50	; PAL-50?
    351  0000 ????				      bne	.ntsc
    352  0000 ????				      ldy	#SCANLINES_PAL/2 - 2
    353  0000 ????			   .ntsc
    354  0000 ????			   .loopWait
    355  0000 ????				      sta	WSYNC
    356  0000 ????				      sta	WSYNC
    357  0000 ????				      dey
    358  0000 ????				      bne	.loopWait
    359  0000 ????				      dex
    360  0000 ????				      bne	.loopResync
    361  0000 ????				      ENDM
    362  0000 ????
    363  0000 ????				      MAC	set_platform
    364  0000 ????						; 00 = NTSC
    365  0000 ????						; 01 = NTSC
    366  0000 ????						; 10 = PAL-50
    367  0000 ????						; 11 = PAL-60
    368  0000 ????				      lda	SWCHB
    369  0000 ????				      rol
    370  0000 ????				      rol
    371  0000 ????				      rol
    372  0000 ????				      and	#%11
    373  0000 ????				      eor	#PAL
    374  0000 ????				      sta	Platform	; P1 difficulty --> TV system (0=NTSC, 1=PAL)
    375  0000 ????				      ENDM
    376  0000 ????
    377  0000 ????				      MAC	load_animation
    378  0000 ????				      lda	#<Animation_{1}
    379  0000 ????				      sta	animation
    380  0000 ????				      lda	#>Animation_{1}
    381  0000 ????				      sta	animation+1
    382  0000 ????				      lda	#0
    383  0000 ????				      sta	animation_delay
    384  0000 ????				      lda	#ANIMATION_{1}_ID
    385  0000 ????				      sta	ManAnimationID
    386  0000 ????				      ENDM
    387  0000 ????
    388  0000 ????
    389  0000 ????						;------------------------------------------------------------------------------
    390  0000 ????
    391  0000 ????
------- FILE zeropage.asm LEVEL 2 PASS 3
      0  0000 ????				      include	"zeropage.asm"
      1  0000 ????						;    Sokoboo - a Sokoban implementation
      2  0000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  0000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0000 ????						;
      5  0000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0000 ????						;
      7  0000 ????						;    Code related to the generic tile-based display engine was developed by
      8  0000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0000 ????						;
     12  0000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  0000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0000 ????						;    directory for Apache licensing details.
     15  0000 ????						;
     16  0000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0000 ????						;    See the copyright notices in the License directory for a list of level
     18  0000 ????						;    contributors.
     19  0000 ????						;
     20  0000 ????						;    Except where otherwise indicated, this software is released under the
     21  0000 ????						;    following licensing arrangement...
     22  0000 ????						;
     23  0000 ????						;    This program is free software: you can redistribute it and/or modify
     24  0000 ????						;    it under the terms of the GNU General Public License as published by
     25  0000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  0000 ????						;    (at your option) any later version.
     27  0000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0000 ????
     29  0000 ????						;    This program is distributed in the hope that it will be useful,
     30  0000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0000 ????						;    GNU General Public License for more details.
     33  0000 ????
     34 U00fe ????				      SEG.U	variables
     35 U0080					      ORG	$80
     36 U0080
     37 U0080
     38 U0080		       00	   Platform   ds	1	; TV system (%0x=NTSC, %10=PAL-50, %11=PAL-60)
     39 U0081
     40 U0081		       00	   DrawStackPointer ds	1	; points to start entry of drawing stack (-1 = nothing to draw)
     41 U0082		       00	   ObjStackNum ds	1	; which stack in use
     42 U0083		       00 00	   ObjStackPtr ds	2	; index to objects on object stack (0 = empty)
     43 U0085		       00	   BlankStackPtr ds	1	; index to blank object stack (0=empty)
     44 U0086		       00	   ScreenDrawPhase ds	1	; phase of screen drawing
     45 U0087
     46 U0087		       00	   POS_X      ds	1
     47 U0088		       00	   POS_Y      ds	1
     48 U0089		       00	   POS_X_NEW  ds	1
     49 U008a		       00	   POS_Y_NEW  ds	1
     50 U008b		       00	   POS_Type   ds	1
     51 U008c		       00	   POS_VAR    ds	1
     52 U008d
     53 U008d		       00	   TB_X       ds	1
     54 U008e		       00	   TB_Y       ds	1
     55 U008f		       00	   TB_PUSHX   ds	1
     56 U0090		       00	   TB_PUSHY   ds	1
     57 U0091		       00	   TB_CHAR    ds	1
     58 U0092
     59 U0092		       00	   BufferedJoystick ds	1	; player joystick input
     60 U0093		       00	   PreviousJoystick ds	1
     61 U0094
     62 U0094							; Scrolling is limited to only show board within the following area...
     63 U0094		       00	   BoardLimit_Width ds	1	; width of current playfield (only used in UnpackLevel)
     64 U0095		       00	   BoardLimit_Height ds	1	; height of current playfield (only used in UnpackLevel)
     65 U0096		       00	   BoardScrollY ds	1	; scroll position in board (Y)
     66 U0097		       00	   BoardScrollX ds	1	; scroll position in board (X)
     67 U0097		       00 94	   BoardEdge_Right =	BoardLimit_Width	; absolute rightmost scroll value
     68 U0097		       00 95	   BoardEdge_Bottom =	BoardLimit_Height	; absolute bottommost scroll value
     69 U0098		       00	   scrollBits ds	1
     70 U0099
     71 U0099		       00	   animation_index ds	1	; new
     72 U009a		       00 00	   animation  ds	2
     73 U009c		       00	   animation_delay ds	1
     74 U009d		       00	   ManX       ds	1
     75 U009e		       00	   ManY       ds	1
     76 U009f		       00	   ManDrawX   ds	1
     77 U00a0		       00	   ManDrawY   ds	1
     78 U00a1		       00	   ManMode    ds	1
     79 U00a2		       00	   ManLastDirection ds	1	; so we don't overwrite animations in-progress
     80 U00a3		       00	   ManTurnStart ds	1
     81 U00a4		       00	   ManPushCounter ds	1
     82 U00a5		       00	   LookingAround ds	1
     83 U00a6		       00	   ManAnimationID ds	1
     84 U00a7		       00	   ManNextAnimationID ds	1	; -1 for nothing
     85 U00a8		       00	   idleCount  ds	1
     86 U00a9
     87 U00a9		       00	   DelayEndOfLevel ds	1
     88 U00aa		       00	   jtoggle    ds	1	; 0/1 toggles joystick on player swapping
     89 U00ab
     90 U00ab		       00	   LEVEL_bank ds	1
     91 U00ac		       00 00	   levelPtr   ds	2
     92 U00ae
     93 U00ae					      IF	WAIT_FOR_INITIAL_DRAW
     94 U00ae		       00	   blankState ds	1
     95 U00af					      ENDIF
     96 U00af
     97 U00af							;---------------------------------------------------------------------------
     98 U00af							; 2 (shared) demo mode variables:
     99 U00af							;demoMode			  = jtoggle	  ; bit 7==1 => demo mode
    100 U00af							;moveLen			  = jtoggle	  ; bits 0..6
    101 U00af							;moveIdx			 ds 1
    102 U00af
    103 U00af		       00	   LastSpriteY ds	1
    104 U00b0
    105 U00b0		       00	   timer      ds	1
    106 U00b1
    107 U00b1		       00	   BGColour   ds	1
    108 U00b2
    109 U00b2							; levelx and level have to be consecutive variables!
    110 U00b2		       00	   levelX     ds	1	; current player's level (other in scoring bank)
    111 U00b3		       00	   level      ds	1	; current player's level (other in scoring bank)
    112 U00b4							;levelDisplay			   ds 1 	   ; what to display as the level ID
    113 U00b4		       00	   Throttle   ds	1	; frame throttle to prevent super-speeds
    114 U00b5							;ThrottleSpeed 		  ds 1		  ; system-dependant throttle speed
    115 U00b5
    116 U00b5		       00	   BCD_targetsRequired ds	1	; number of un-targeted left to go
    117 U00b6		       00	   BCD_moveCounter ds	1	; BCD seconds for level
    118 U00b7		       00	   BCD_moveCounterHi ds	1
    119 U00b8
    120 U00b8		       00	   takebackIndex ds	1
    121 U00b9		       00	   takebackBaseIndex ds	1
    122 U00ba		       00	   TakebackInhibit ds	1
    123 U00bb
    124 U00bb		       00 00	   Board_AddressR ds	2
    125 U00bd		       00 00	   Board_AddressW ds	2
    126 U00bf		       00	   ROM_Bank   ds	1	; last switched ROM bank (not accessible if RAM subsequently switched)
    127 U00c0		       00	   RAM_Bank   ds	1
    128 U00c1
    129 U00c1		       00	   ColourTimer ds	1	; colour of BG in scoring area to show level flash/complete
    130 U00c2							;ColourFlash			  ds 1		   ; colour of flash
    131 U00c2							;extraLifeTimer		  ds 1		  ; should be 5 seconds!
    132 U00c2
    133 U00c2							; extraLifeTimer:
    134 U00c2							;   When non-zero causes Cosmic Ark star effect in background. Used to indicate extra life.
    135 U00c2
    136 U00c2							;scoringTimer			  ds 1		  ; times the various score displays
    137 U00c2							;scoringFlags			  ds 1		  ; scoring flags are stored here
    138 U00c2
    139 U00c2							; scoringFlags:
    140 U00c2							; D7		 Extra TARGETs in effect (TARGETs collected over requirement score more) ASSUMED BPL/BMI usage
    141 U00c2							; D6		 unused
    142 U00c2							; D5		 unused
    143 U00c2							; D4		 unused
    144 U00c2							; D3		 unused
    145 U00c2							; D2		 unused
    146 U00c2							; D1	 D1-D0	 Which display kernel to use for scoring
    147 U00c2							; D0		 0 = 2x4     used for TARGETs/time
    148 U00c2							;		 1 = 1x6     used for score
    149 U00c2							;		 2 = 3x2     used for level/lives/player
    150 U00c2
    151 U00c2		       00	   NextLevelTrigger ds	1	; d7 -- next level.  d6 -- loss of life
    152 U00c2		       00 80	   BIT_NEXTLEVEL =	128
    153 U00c2		       00 40	   BIT_NEXTLIFE =	64
    154 U00c3
    155 U00c3							;------------------------------------------------------------------------------
    156 U00c3
    157 U00c3		       00	   ObjIterator ds	1	; count UP iterator over objects
    158 U00c4		       00	   DSL	      ds	1	; stack line counter
    159 U00c5
    160 U00c5		       00	   ethnic     ds	1
    161 U00c6		       00	   animate_char_index ds	1
    162 U00c7
    163 U00c7		       00	   rndHi      ds	1
    164 U00c8		       00	   rnd	      ds	1
    165 U00c9		       00 00 00    icc_colour ds	3
    166 U00cc		       00	   FadeComplete ds	1
    167 U00cd		       00	   FadeOutComplete ds	1
    168 U00ce		       00	   fadeslow   ds	1
    169 U00cf
------- FILE sound/intro1_variables.asm LEVEL 3 PASS 3
      0 U00cf					      include	"sound/intro1_variables.asm"
      1 U00cf							; TIATracker music player
      2 U00cf							; Copyright 2016 Andre "Kylearan" Wichmann
      3 U00cf							; Website: https://bitbucket.org/kylearan/tiatracker
      4 U00cf							; Email: andre.wichmann@gmx.de
      5 U00cf							;
      6 U00cf							; Licensed under the Apache License, Version 2.0 (the "License");
      7 U00cf							; you may not use this file except in compliance with the License.
      8 U00cf							; You may obtain a copy of the License at
      9 U00cf							;
     10 U00cf							;   http://www.apache.org/licenses/LICENSE-2.0
     11 U00cf							;
     12 U00cf							; Unless required by applicable law or agreed to in writing, software
     13 U00cf							; distributed under the License is distributed on an "AS IS" BASIS,
     14 U00cf							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15 U00cf							; See the License for the specific language governing permissions and
     16 U00cf							; limitations under the License.
     17 U00cf
     18 U00cf							; Song author: 
     19 U00cf							; Song name: 
     20 U00cf
     21 U00cf							; @com.wudsn.ide.asm.hardware=ATARI2600
     22 U00cf
     23 U00cf							; =====================================================================
     24 U00cf							; Flags
     25 U00cf							; =====================================================================
     26 U00cf
     27 U00cf							; 1: Global song speed, 0: Each pattern has individual speed
     28 U00cf		       00 01	   TT_GLOBAL_SPEED =	1
     29 U00cf							; duration (number of TV frames) of a note
     30 U00cf		       00 05	   TT_SPEED   =	5
     31 U00cf							; duration of odd frames (needs TT_USE_FUNKTEMPO)
     32 U00cf		       00 04	   TT_ODD_SPEED =	4
     33 U00cf
     34 U00cf							; 1: Overlay percussion, +40 bytes
     35 U00cf		       00 01	   TT_USE_OVERLAY =	1
     36 U00cf							; 1: Melodic instrument slide, +9 bytes
     37 U00cf		       00 00	   TT_USE_SLIDE =	0
     38 U00cf							; 1: Goto pattern, +8 bytes
     39 U00cf		       00 01	   TT_USE_GOTO =	1
     40 U00cf							; 1: Odd/even rows have different SPEED values, +7 bytes
     41 U00cf		       00 01	   TT_USE_FUNKTEMPO =	1
     42 U00cf							; If the very first notes played on each channel are not PAUSE, HOLD or
     43 U00cf							; SLIDE, i.e. if they start with an instrument or percussion, then set
     44 U00cf							; this flag to 0 to save 2 bytes.
     45 U00cf							; 0: +2 bytes
     46 U00cf		       00 01	   TT_STARTS_WITH_NOTES =	1
     47 U00cf
     48 U00cf
     49 U00cf							; =====================================================================
     50 U00cf							; Permanent variables. These are states needed by the player.
     51 U00cf							; =====================================================================
     52 U00cf		       00	   tt_timer   ds	1	; current music timer value
     53 U00d0		       00	   tt_cur_pat_index_c0 ds	1	; current pattern index into tt_SequenceTable
     54 U00d1		       00	   tt_cur_pat_index_c1 ds	1
     55 U00d2		       00	   tt_cur_note_index_c0 ds	1	; note index into current pattern
     56 U00d3		       00	   tt_cur_note_index_c1 ds	1
     57 U00d4		       00	   tt_envelope_index_c0 ds	1	; index into ADSR envelope
     58 U00d5		       00	   tt_envelope_index_c1 ds	1
     59 U00d6		       00	   tt_cur_ins_c0 ds	1	; current instrument
     60 U00d7		       00	   tt_cur_ins_c1 ds	1
     61 U00d8
     62 U00d8
     63 U00d8							; =====================================================================
     64 U00d8							; Temporary variables. These will be overwritten during a call to the
     65 U00d8							; player routine, but can be used between calls for other things.
     66 U00d8							; =====================================================================
     67 U00d8		       00 00	   tt_ptr     ds	2
------- FILE zeropage.asm
    171 U00da
    172 U00da
    173 U00da
    174 U00da				   OVERLAY_SIZE SET	24
    175 U00da
    176 U00da
    177 U00da
    178 U00da							; This overlay variable is used for the overlay variables.  That's OK.
    179 U00da							; However, it is positioned at the END of the variables so, if on the off chance we're overlapping
    180 U00da							; stack space and variable, it is LIKELY that that won't be a problem, as the temp variables
    181 U00da							; (especially the latter ones) are only used in rare occasions.
    182 U00da
    183 U00da							; FOR SAFETY, DO NOT USE THIS AREA DIRECTLY (ie: NEVER reference 'Overlay' in the code)
    184 U00da							; ADD AN OVERLAY FOR EACH ROUTINE'S USE, SO CLASHES CAN BE EASILY CHECKED
    185 U00da
    186 U00da		       00 00 00 00*Overlay    ds	OVERLAY_SIZE	;--> overlay (share) variables
      0 U00f2					      VALIDATE_OVERLAY	"DEFINITION"
      6 U00f2					      LIST	ON
    188 U00f2
    189 U00f2
    190 U00f2		       00 00 00 00*	      ds	RESERVED_FOR_STACK
    191 U00fe
 FREE BYTES IN ZERO PAGE =  $1
    192 U00fe					      ECHO	"FREE BYTES IN ZERO PAGE = ", $FF - *
    193 U00fe				  -	      IF	* > $FF
    194 U00fe				  -	      ERR
    195 U00fe					      ENDIF
------- FILE ./sokoboo.asm
    393 U00fe
    394 U00fe
    395 U00fe							;------------------------------------------------------------------------------
    396 U00fe							; OVERLAYS!
    397 U00fe							; These variables are overlays, and should be managed with care
    398 U00fe							; That is, variables are ALREADY DEFINED, and we're reusing RAM for other purposes
    399 U00fe
    400 U00fe							; EACH OF THESE ARE VARIABLES (TEMPORARY) USED BY ONE ROUTINE (AND IT'S SUBROUTINES)
    401 U00fe							; THAT IS, LOCAL VARIABLES.  USE 'EM FREELY, THEY COST NOTHING
    402 U00fe
    403 U00fe							; TOTAL SPACE USED BY ANY OVERLAY GROUP SHOULD BE <= SIZE OF 'Overlay'
    404 U00fe
    405 U00fe
    406 U00fe
    407 U00fe							;------------------------------------------------------------------------------
      0 U00fe					      OVERLAY	BuildDrawFlags
      1 U00e5 ????				      SEG.U	OVERLAY_BuildDrawFlags
      2 U00da					      org	Overlay
    409 U00da
    410 U00da		       00 00	   BDF_DrawFlagAddress ds	2	; destination address of draw flag (mirrors ScreenBuffer)
    411 U00dc		       00 00	   BDF_DrawFlagAddress2 ds	2	; dito + SCREEN_WIDTH/2
    412 U00de		       00 00	   BDF_BoardAddress ds	2	; source address from Board
    413 U00e0		       00 00	   BDF_BoardAddress2 ds	2	; dito + SCREEN_WIDTH/2
    414 U00e2							;  IF MULTI_BANK_BOARD = YES		      ; commented, else DASM freaks out because MULTI_BANK_BOARD is calculated below
    415 U00e2		       00	   BDF_BoardBank ds	1	; holds bank of current line
    416 U00e3							;  ENDIF
    417 U00e3		       00	   DHS_Line   ds	1
    418 U00e4		       00	   DHS_Stack  ds	1	; for restoring SP
    419 U00e5							;ECHO "FREE BYTES IN OVERLAY_BuildDrawFlags = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00e5					      VALIDATE_OVERLAY	"BuildDrawFlags"
      6 U00e5					      LIST	ON
    421 U00e5
    422 U00e5							;------------------------------------------------------------------------------
    423 U00e5
      0 U00e5					      OVERLAY	ColourFixer
      1 U00dc ????				      SEG.U	OVERLAY_ColourFixer
      2 U00da					      org	Overlay
    425 U00da
    426 U00da		       00	   PlatformBase ds	1
    427 U00db		       00	   BandOffsetTemp ds	1
    428 U00dc
      0 U00dc					      VALIDATE_OVERLAY	"ColourFixer"
      6 U00dc					      LIST	ON
    430 U00dc
      0 U00dc					      OVERLAY	LevelLookup
      1 U00dc ????				      SEG.U	OVERLAY_LevelLookup
      2 U00da					      org	Overlay
    432 U00da		       00 00	   levelTable ds	2
      0 U00dc					      VALIDATE_OVERLAY	"LevelLookup"
      6 U00dc					      LIST	ON
    434 U00dc
    435 U00dc							;------------------------------------------------------------------------------
    436 U00dc
      0 U00dc					      OVERLAY	Animator
      1 U00e0 ????				      SEG.U	OVERLAY_Animator
      2 U00da					      org	Overlay
    438 U00da		       00 00	   frame_ptr  ds	2
    439 U00dc		       00 00	   colour_ptr ds	2
    440 U00de		       00	   bank       ds	1
    441 U00df		       00	   ethnicity  ds	1
      0 U00e0					      VALIDATE_OVERLAY	"Animator"
      6 U00e0					      LIST	ON
    443 U00e0
    444 U00e0
      0 U00e0					      OVERLAY	Process
      1 U00dd ????				      SEG.U	OVERLAY_Process
      2 U00da					      org	Overlay
    446 U00da
    447 U00da		       00	   BOXLeft    ds	1
    448 U00db		       00	   BOXRight   ds	1
    449 U00dc		       00	   restorationCharacter ds	1
    450 U00dd
      0 U00dd					      VALIDATE_OVERLAY	"Process"
      6 U00dd					      LIST	ON
    452 U00dd
    453 U00dd							;------------------------------------------------------------------------------
    454 U00dd
    455 U00dd
      0 U00dd					      OVERLAY	Animate
      1 U00db ????				      SEG.U	OVERLAY_Animate
      2 U00da					      org	Overlay
    457 U00da		       00	   halftimer  ds	1
      0 U00db					      VALIDATE_OVERLAY	"Animate"
      6 U00db					      LIST	ON
    459 U00db
    460 U00db							;------------------------------------------------------------------------------
    461 U00db
      0 U00db					      OVERLAY	TitleScreen
      1 U00f2 ????				      SEG.U	OVERLAY_TitleScreen
      2 U00da					      org	Overlay
    463 U00da		       00 00	   colour_table ds	2
    464 U00dc		       00 00	   digit1     ds	2
    465 U00de		       00 00	   digit2     ds	2
    466 U00e0		       00 00	   digitstar  ds	2
    467 U00e2		       00 00 00    digit      ds	3
    468 U00e5		       00	   digitick   ds	1
    469 U00e6		       00 00 00    targetDigit ds	3
    470 U00e9		       00	   endwait    ds	1
    471 U00ea							;colourindex		  ds 1
    472 U00ea		       00 00	   digitHundreds ds	2
    473 U00ec		       00	   selector   ds	1
    474 U00ed		       00	   walkSpeed  ds	1
    475 U00ee		       00 00	   manc       ds	2
    476 U00f0		       00	   wallColour ds	1
    477 U00f1		       00	   adjustColour ds	1
      0 U00f2					      VALIDATE_OVERLAY	"TitleScreen"
      6 U00f2					      LIST	ON
    479 U00f2
    480 U00f2							;------------------------------------------------------------------------------
    481 U00f2
      0 U00f2					      OVERLAY	TimeSlice
      1 U00dc ????				      SEG.U	OVERLAY_TimeSlice
      2 U00da					      org	Overlay
    483 U00da
    484 U00da		       00 00	   TS_Vector  ds	2	; vector to correct processing code
    485 U00dc							;ECHO "FREE BYTES IN OVERLAY_TimeSlice = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dc					      VALIDATE_OVERLAY	"TimeSlice"
      6 U00dc					      LIST	ON
    487 U00dc
    488 U00dc							;------------------------------------------------------------------------------
    489 U00dc
      0 U00dc					      OVERLAY	CopyROMShadowToRAM
      1 U00dd ????				      SEG.U	OVERLAY_CopyROMShadowToRAM
      2 U00da					      org	Overlay
    491 U00da
    492 U00da		       00	   O_CopyCount ds	1
    493 U00db		       00	   O_ROM_Source_Bank ds	1
    494 U00dc		       00	   O_Index    ds	1
    495 U00dd							;ECHO "FREE BYTES IN OVERLAY_CopyROMShadowToRAM = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dd					      VALIDATE_OVERLAY	"CopyROMShadowToRAM"
      6 U00dd					      LIST	ON
    497 U00dd
    498 U00dd							;------------------------------------------------------------------------------
    499 U00dd
      0 U00dd					      OVERLAY	Scoring
      1 U00db ????				      SEG.U	OVERLAY_Scoring
      2 U00da					      org	Overlay
    501 U00da		       00	   tmpStack   ds	1
    502 U00da		       00 da	   newDisplay =	tmpStack
    503 U00db							; also for UpdateTimer
    504 U00db		       00 da	   tmpSound   =	tmpStack
      0 U00db					      VALIDATE_OVERLAY	"Scoring"
      6 U00db					      LIST	ON
    506 U00db
    507 U00db
    508 U00db							;------------------------------------------------------------------------------
    509 U00db
      0 U00db					      OVERLAY	SaveKey
      1 U00e3 ????				      SEG.U	OVERLAY_SaveKey
      2 U00da					      org	Overlay
    511 U00da
    512 U00da		       00 00 00    dummySK    ds	3	; avoid getting overwritten by CopyROMShadowToRAM
    513 U00dd		       00 00 00    highScoreSK ds	3
    514 U00e0		       00	   startingLevel ds	1	; levelx * 5
    515 U00e1		       00	   startLevel ds	1
    516 U00e2		       00	   offsetSK   ds	1	; for calculating the SK slot address
    517 U00e3
      0 U00e3					      VALIDATE_OVERLAY	"SaveKey"
      6 U00e3					      LIST	ON
    519 U00e3
    520 U00e3							;------------------------------------------------------------------------------
    521 U00e3
      0 U00e3					      OVERLAY	DrawMan
      1 U00dc ????				      SEG.U	OVERLAY_DrawMan
      2 U00da					      org	Overlay
    523 U00da
    524 U00da		       00 00	   MAN_Move   ds	2
    525 U00dc
    526 U00dc							;ECHO "FREE BYTES IN OVERLAY_DrawMan = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dc					      VALIDATE_OVERLAY	"DrawMan"
      6 U00dc					      LIST	ON
    528 U00dc
    529 U00dc							;------------------------------------------------------------------------------
    530 U00dc
      0 U00dc					      OVERLAY	ProcessObjStack
      1 U00dc ????				      SEG.U	OVERLAY_ProcessObjStack
      2 U00da					      org	Overlay
    532 U00da
    533 U00da		       00 00	   POS_Vector ds	2
    534 U00dc
    535 U00dc							;ECHO "FREE BYTES IN OVERLAY_ProcessObjStack = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dc					      VALIDATE_OVERLAY	"ProcessObjStack"
      6 U00dc					      LIST	ON
    537 U00dc
    538 U00dc							;------------------------------------------------------------------------------
    539 U00dc
      0 U00dc					      OVERLAY	ScoreLineOverlay
      1 U00e9 ????				      SEG.U	OVERLAY_ScoreLineOverlay
      2 U00da					      org	Overlay
    541 U00da
    542 U00da		       00 00	   S0	      ds	2	; used for addressing digits of score
    543 U00dc		       00 00	   S1	      ds	2
    544 U00de		       00 00	   S2	      ds	2
    545 U00e0		       00 00	   S3	      ds	2
    546 U00e2		       00 00	   S4	      ds	2
    547 U00e4		       00 00	   S5	      ds	2
    548 U00e6
    549 U00e6		       00	   stkp       ds	1
    550 U00e7		       00	   sreg       ds	1
    551 U00e8		       00	   loop       ds	1
    552 U00e9
    553 U00e9							;ECHO "FREE BYTES IN ScoreLineOverlay = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00e9					      VALIDATE_OVERLAY	"ScoreLineOverlay"
      6 U00e9					      LIST	ON
    555 U00e9
    556 U00e9							;------------------------------------------------------------------------------
    557 U00e9
    558 U00e9
      0 U00e9					      OVERLAY	UnpackLevelOverlay
      1 U00df ????				      SEG.U	OVERLAY_UnpackLevelOverlay
      2 U00da					      org	Overlay
    560 U00da
    561 U00da		       00	   base_x     ds	1
    562 U00db		       00	   base_y     ds	1
    563 U00dc		       00	   upk_length ds	1
    564 U00dd		       00	   upk_column ds	1
    565 U00de		       00	   upk_temp   ds	1
    566 U00df							;icc_colour		  ds 3
    567 U00df
    568 U00df							;ECHO "FREE BYTES IN UnpackLevelOverlay = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00df					      VALIDATE_OVERLAY	"UnpackLevelOverlay"
      6 U00df					      LIST	ON
    570 U00df
    571 U00df							;------------------------------------------------------------------------------
    572 U00df
      0 U00df					      OVERLAY	ManProcessing
      1 U00dc ????				      SEG.U	OVERLAY_ManProcessing
      2 U00da					      org	Overlay
    574 U00da		       00 00	   actionVector ds	2
      0 U00dc					      VALIDATE_OVERLAY	"ManProcessing"
      6 U00dc					      LIST	ON
    576 U00dc
      0 U00dc					      OVERLAY	DrawIntoStack
      1 U00db ????				      SEG.U	OVERLAY_DrawIntoStack
      2 U00da					      org	Overlay
    578 U00da		       00	   save_SP    ds	1
      0 U00db					      VALIDATE_OVERLAY	"DrawIntoStack"
      6 U00db					      LIST	ON
    580 U00db
    581 U00db							;------------------------------------------------------------------------------
    582 U00db							;##############################################################################
    583 U00db							;------------------------------------------------------------------------------
    584 U00db
    585 U00db							; NOW THE VERY INTERESTING '3E' RAM BANKS
    586 U00db							; EACH BANK HAS A READ-ADDRESS AND A WRITE-ADDRESS, WITH 2k TOTAL
    587 U00db
      0 U00db					      NEWRAMBANK	BANK_SCREENMARKII1
      1 U0000 ????				      SEG.U	BANK_SCREENMARKII1
      2 U0000					      ORG	ORIGIN_RAM
      3 U0000					      RORG	RAM_3E
      4 U0000				   BANK_START SET	*
      5 U0000				   BANK_SCREENMARKII1 SET	ORIGIN_RAM / RAM_SIZE
      6 U0000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    589 U0000
    590 U0000							; NOTE: THIS BANK JUST *LOOKS* EMPTY.
    591 U0000							; It actually contains everything copied from the ROM copy of the ROW RAM banks.
    592 U0000							; The variable definitions are also in that ROM bank (even though they're RAM :)
    593 U0000
    594 U0000		       00 60	   SCREEN_BITMAP_SIZE =	4 * LINES_PER_CHAR
    595 U0000
    596 U0000							; These banks (there are #SCREEN_LINES of them) hold a RAM copy of the screen draw
    597 U0000							; code.  This code is self-modifying, in that the colour values for each scanline
    598 U0000							; are set to NTSC or PAL values on startup -- thus, the single binary can run
    599 U0000							; on either format system.  The main purpose for copying the draw code to RAM,
    600 U0000							; though, is to free up space in the fixed bank (which is incredibly valuable).
    601 U0000
    602 U0000							; A neat feature of having multiple copies of the same code in different RAM banks
    603 U0000							; is that we can use that code to switch between banks, and the system will happily
    604 U0000							; execute the next instruction from the newly switched-in bank without a problem.
    605 U0000
    606 U0000							; Now we have the actual graphics data for each of the rows.  This consists of an
    607 U0000							; actual bitmap (in exact PF-style format, 6 bytes per line) into which the
    608 U0000							; character shapes are masked/copied. The depth of the character shapes may be
    609 U0000							; changed by changing the #LINES_PER_CHAR value.  Note that this depth should be
    610 U0000							; a multiple of 3, so that the RGB scanlines match at character joins.
    611 U0000
    612 U0000							; The next part of the graphics data is a bitmap sprite buffer -- space for two
    613 U0000							; sprites' graphics shape and colour data.  The shape and colour may be set as
    614 U0000							; part of the draw routine *every* scanline (though the system currently uses
    615 U0000							; one colour shared between both players).
    616 U0000
      0 U0000					      VALIDATE_RAM_SIZE
      1 U0000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0000				  -	      ERR
      3 U0000					      endif
    618 U0000
    619 U0000							; We have one bank for each screen row.  These banks are duplicates of the above,
    620 U0000							; accessed via the above labels but with the appropriate bank switched in.
    621 U0000
    622 U0000							;------------------------------------------------------------------------------
    623 U0000
    624 U0000					      REPEAT	SCREEN_LINES - 1
      0 U0000					      NEWRAMBANK	.DUMMY
      1 U1c00 ????				      SEG.U	.DUMMY
      2 U0400					      ORG	ORIGIN_RAM
      3 U0400					      RORG	RAM_3E
      4 U0400				   BANK_START SET	*
      5 U0400				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U0400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0400					      VALIDATE_RAM_SIZE
      1 U0400				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0400				  -	      ERR
      3 U0400					      endif
    624 U0400					      REPEND
      0 U0400					      NEWRAMBANK	.DUMMY
      1 U0400					      SEG.U	.DUMMY
      2 U0800					      ORG	ORIGIN_RAM
      3 U0800					      RORG	RAM_3E
      4 U0800				   BANK_START SET	*
      5 U0800				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U0800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0800					      VALIDATE_RAM_SIZE
      1 U0800				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0800				  -	      ERR
      3 U0800					      endif
    624 U0800					      REPEND
      0 U0800					      NEWRAMBANK	.DUMMY
      1 U0800					      SEG.U	.DUMMY
      2 U0c00					      ORG	ORIGIN_RAM
      3 U0c00					      RORG	RAM_3E
      4 U0c00				   BANK_START SET	*
      5 U0c00				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U0c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0c00					      VALIDATE_RAM_SIZE
      1 U0c00				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0c00				  -	      ERR
      3 U0c00					      endif
    624 U0c00					      REPEND
      0 U0c00					      NEWRAMBANK	.DUMMY
      1 U0c00					      SEG.U	.DUMMY
      2 U1000					      ORG	ORIGIN_RAM
      3 U1000					      RORG	RAM_3E
      4 U1000				   BANK_START SET	*
      5 U1000				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1000					      VALIDATE_RAM_SIZE
      1 U1000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1000				  -	      ERR
      3 U1000					      endif
    624 U1000					      REPEND
      0 U1000					      NEWRAMBANK	.DUMMY
      1 U1000					      SEG.U	.DUMMY
      2 U1400					      ORG	ORIGIN_RAM
      3 U1400					      RORG	RAM_3E
      4 U1400				   BANK_START SET	*
      5 U1400				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1400					      VALIDATE_RAM_SIZE
      1 U1400				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1400				  -	      ERR
      3 U1400					      endif
    624 U1400					      REPEND
      0 U1400					      NEWRAMBANK	.DUMMY
      1 U1400					      SEG.U	.DUMMY
      2 U1800					      ORG	ORIGIN_RAM
      3 U1800					      RORG	RAM_3E
      4 U1800				   BANK_START SET	*
      5 U1800				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1800					      VALIDATE_RAM_SIZE
      1 U1800				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1800				  -	      ERR
      3 U1800					      endif
    624 U1800					      REPEND
      0 U1800					      NEWRAMBANK	.DUMMY
      1 U1800					      SEG.U	.DUMMY
      2 U1c00					      ORG	ORIGIN_RAM
      3 U1c00					      RORG	RAM_3E
      4 U1c00				   BANK_START SET	*
      5 U1c00				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1c00					      VALIDATE_RAM_SIZE
      1 U1c00				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1c00				  -	      ERR
      3 U1c00					      endif
    627 U1c00					      REPEND
    628 U1c00
    629 U1c00							;------------------------------------------------------------------------------
    630 U1c00							;##############################################################################
    631 U1c00							;------------------------------------------------------------------------------
    632 U1c00
      0 U1c00					      NEWRAMBANK	BANK_DRAW_BUFFERS
      1 U2000 ????				      SEG.U	BANK_DRAW_BUFFERS
      2 U2000					      ORG	ORIGIN_RAM
      3 U2000					      RORG	RAM_3E
      4 U2000				   BANK_START SET	*
      5 U2000				   BANK_DRAW_BUFFERS SET	ORIGIN_RAM / RAM_SIZE
      6 U2000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    634 U2000							; VARS DEFINED IN ROM_SHADOW_OF_BANK_DRAW_BUFFERS
    635 U2000							; SELF-MODIFYING SUBROUTINES MAY BE PRESENT IN THIS BANK TOO!
      0 U2000					      VALIDATE_RAM_SIZE
      1 U2000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2000				  -	      ERR
      3 U2000					      endif
    637 U2000
    638 U2000							;------------------------------------------------------------------------------
    639 U2000							;##############################################################################
    640 U2000							;------------------------------------------------------------------------------
    641 U2000
      0 U2000					      NEWRAMBANK	BANK_SCORING
      1 U2400 ????				      SEG.U	BANK_SCORING
      2 U2400					      ORG	ORIGIN_RAM
      3 U2400					      RORG	RAM_3E
      4 U2400				   BANK_START SET	*
      5 U2400				   BANK_SCORING SET	ORIGIN_RAM / RAM_SIZE
      6 U2400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    643 U2400							; VARS DEFINED IN ROM_SHADOW_OF_BANK_SCORING
    644 U2400							; SELF-MODIFYING SUBROUTINES MAY BE PRESENT IN THIS BANK TOO!
      0 U2400					      VALIDATE_RAM_SIZE
      1 U2400				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2400				  -	      ERR
      3 U2400					      endif
    646 U2400
    647 U2400							;------------------------------------------------------------------------------
    648 U2400							;##############################################################################
    649 U2400							;------------------------------------------------------------------------------
    650 U2400
      0 U2400					      NEWRAMBANK	BANK_DECODE_LEVEL
      1 U2800 ????				      SEG.U	BANK_DECODE_LEVEL
      2 U2800					      ORG	ORIGIN_RAM
      3 U2800					      RORG	RAM_3E
      4 U2800				   BANK_START SET	*
      5 U2800				   BANK_DECODE_LEVEL SET	ORIGIN_RAM / RAM_SIZE
      6 U2800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    652 U2800							; VARS DEFINED IN BANK_DECODE_LEVEL_SHADOW
    653 U2800							; SELF-MODIFYING SUBROUTINES MAY BE PRESENT IN THIS BANK TOO!
      0 U2800					      VALIDATE_RAM_SIZE
      1 U2800				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2800				  -	      ERR
      3 U2800					      endif
    655 U2800
    656 U2800							;------------------------------------------------------------------------------
    657 U2800							;##############################################################################
    658 U2800							;------------------------------------------------------------------------------
    659 U2800
      0 U2800					      NEWRAMBANK	BANK_OBJSTACK
      1 U2e80 ????				      SEG.U	BANK_OBJSTACK
      2 U2c00					      ORG	ORIGIN_RAM
      3 U2c00					      RORG	RAM_3E
      4 U2c00				   BANK_START SET	*
      5 U2c00				   BANK_OBJSTACK SET	ORIGIN_RAM / RAM_SIZE
      6 U2c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    661 U2c00
    662 U2c00							; The objects are a list of X,Y positions into the BOARD.  Each of these is a board
    663 U2c00							; position of something that needs to be processed.  These things include anything
    664 U2c00							; that animates.  Objects which no longer need processing do not re-add themselves
    665 U2c00							; to the object stack.  There are two stacks -- the one being processed, and the
    666 U2c00							; one for the next processing iteration.
    667 U2c00
    668 U2c00							; Note: These are referenced by ObjStackNum, as is the BLANK_STACK paired bank set.
    669 U2c00
    670 U2c00		       00 80	   OBJ_STACK_SIZE =	128
    671 U2c00
    672 U2c00							; WARNING: THESE MUST NOT CROSS PAGE BOUNDARIES!!!
    673 U2c00
    674 U2c00		       00 00 00 00*ObjStackX  ds	OBJ_STACK_SIZE
    675 U2c80		       00 00 00 00*ObjStackY  ds	OBJ_STACK_SIZE
    676 U2d00		       00 00 00 00*ObjStackVar ds	OBJ_STACK_SIZE	; for general use
    677 U2d80
    678 U2d80							; SortedObjPtr is now in the middle of a page, thus allowing to address with -1
    679 U2d80		       00 00 00 00*SortedObjPtr ds	OBJ_STACK_SIZE	; list of indexes of objects (sorted)
    680 U2e00
    681 U2e00		       00 00 00 00*ObjStackType ds	OBJ_STACK_SIZE	; type of object
    682 U2e80
 FREE RAM IN BANK_OBJSTACK =  $180
    683 U2e80					      ECHO	"FREE RAM IN BANK_OBJSTACK = ", RAM_SIZE - ( * - BANK_START )
    684 U2e80
      0 U2e80					      VALIDATE_RAM_SIZE
      1 U2e80				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2e80				  -	      ERR
      3 U2e80					      endif
    686 U2e80
    687 U2e80							;------------------------------------------------------------------------------
    688 U2e80
      0 U2e80					      NEWRAMBANK	BANK_OBJSTACK2
      1 U3000 ????				      SEG.U	BANK_OBJSTACK2
      2 U3000					      ORG	ORIGIN_RAM
      3 U3000					      RORG	RAM_3E
      4 U3000				   BANK_START SET	*
      5 U3000				   BANK_OBJSTACK2 SET	ORIGIN_RAM / RAM_SIZE
      6 U3000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    690 U3000							; THIS IS A MIRROR OF BANK_OBJSTACK -- DO NOT MODIFY OR USE!!
      0 U3000					      VALIDATE_RAM_SIZE
      1 U3000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U3000				  -	      ERR
      3 U3000					      endif
    692 U3000
    693 U3000							;------------------------------------------------------------------------------
    694 U3000							;##############################################################################
    695 U3000							;------------------------------------------------------------------------------
    696 U3000
      0 U3000					      NEWRAMBANK	BANK_BOARD
      1 U37a0 ????				      SEG.U	BANK_BOARD
      2 U3400					      ORG	ORIGIN_RAM
      3 U3400					      RORG	RAM_3E
      4 U3400				   BANK_START SET	*
      5 U3400				   BANK_BOARD SET	ORIGIN_RAM / RAM_SIZE
      6 U3400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    698 U3400
    699 U3400							; Now the interesting 'BOARD' -- which in reality is a free-form system of M*N
    700 U3400							; rows and columns.  We need to reserve enough RAM for the board's entirety, but
    701 U3400							; don't really care much how it overlaps the 1K bank limit.  The code accessing
    702 U3400							; the board *MUST* calculate and take account of the correct RAM bank to switch
    703 U3400							; when accessing.
    704 U3400
    705 U3400							; The system is fairly free-form, in that it rearranges the memory and tables
    706 U3400							; automatically based on the sizes set in these constants. The board may overlay
    707 U3400							; MULTIPLE banks -- just as long as any particular LINE does not cross a bank
    708 U3400							; we're doing OK.
    709 U3400
    710 U3400							; NOTE: Assumption is that board lines CANNOT CROSS page boundaries.
    711 U3400
    712 U3400							; now fits into one single bank (if we don't reserve too much space for code)
    713 U3400
    714 U3400		       00 28	   SIZE_BOARD_X =	40	;
    715 U3400		       00 16	   SIZE_BOARD_Y =	22
    716 U3400
    717 U3400
    718 U3400				  -	      IF	SIZE_BOARD > RAM_SIZE
    719 U3400				  -MULTI_BANK_BOARD =	YES
    720 U3400					      ELSE
    721 U3400		       00 00	   MULTI_BANK_BOARD =	NO	; timings: [-..]
    722 U3400					      ENDIF
    723 U3400
    724 U3400		       00 00 00 00*Board      ds	SIZE_BOARD	; Note, we can only access this in
    725 U37a0							; 1024 byte chunks, switching RAM
    726 U37a0							; banks as we go.  In other words,
    727 U37a0							; this overlaps multiple banks!
    728 U37a0
      0 U37a0					      NEWRAMBANK	BANK_TAKEBACK
      1 U3940 ????				      SEG.U	BANK_TAKEBACK
      2 U3800					      ORG	ORIGIN_RAM
      3 U3800					      RORG	RAM_3E
      4 U3800				   BANK_START SET	*
      5 U3800				   BANK_TAKEBACK SET	ORIGIN_RAM / RAM_SIZE
      6 U3800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    730 U3800
    731 U3800		       00 3f	   TAKEBACK_MASK =	$3F
    732 U3800
    733 U3800		       00 00 00 00*TakeBackPreviousX ds	$40
    734 U3840		       00 00 00 00*TakeBackPreviousY ds	$40
    735 U3880		       00 00 00 00*TakeBackPushX ds	$40
    736 U38c0		       00 00 00 00*TakeBackPushY ds	$40
    737 U3900		       00 00 00 00*TakeBackPushChar ds	$40
    738 U3940
    739 U3940							; reverting...
    740 U3940							; A prevoius position
    741 U3940							;	     POS_VAR = board
    742 U3940							;	     board = MANOCCUPIED
    743 U3940							;	     manx,y = x,y
    744 U3940							; B current position (MANX,Y)
    745 U3940							;	     board = POS_VAR
    746 U3940							; C push position
    747 U3940							;	     BOARD = PREV_BOARD
    748 U3940							; TAKEBACK_PREV_X, TAKEBACK_PREV_Y, TAKEBACK_PUSH_X,PUSH_Y,TAKEBACK_PUSH_PREV
    749 U3940							;
    750 U3940
    751 U3940
    752 U3940							; free space here (but hard to use)
    753 U3940							; So we need to calculate where the next free bank is!
    754 U3940							; TODO: This looks dodgy.  Check..
    755 U3940
    756 U3940							;ORIGIN	  SET ( * + RAM_SIZE - 1 ) / RAM_SIZE
    757 U3940							;ORIGIN	  SET ORIGIN * RAM_SIZE
    758 U3940
    759 U3940
    760 U3940
    761 U3940							;------------------------------------------------------------------------------
    762 U3940							;##############################################################################
    763 U3940							;------------------------------------------------------------------------------
    764 U3940
    765 U3940							;------------------------------------------------------------------------------
    766 U3940
    767 U3940							;    IFNCONST MAX_LEVEL_SIZE
    768 U3940				   MAX_LEVEL_SIZE SET	0
    769 U3940							;    ENDIF
    770 U3940
    771 U3940
    772 U3940				   MAX_LEVEL_NUMBER SET	0
    773 U3940					      MAC	start_level
    774 U3940				   LEVEL_START SET	*
    775 U3940				   BANK_LEVEL_{1} =	_CURRENT_BANK
    776 U3940				   LEVEL_{1}  SUBROUTINE
    777 U3940				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
    778 U3940							; ECHO "current MAX_LEVEL_NUMBER = ", MAX_LEVEL_NUMBER
    779 U3940					      ENDM		; {name}
    780 U3940
    781 U3940
    782 U3940					      MAC	end_level
    783 U3940				   LEVEL_SIZE_{1} =	* - LEVEL_START
    784 U3940					      IF	LEVEL_SIZE_{1} > MAX_LEVEL_SIZE
    785 U3940				   MAX_LEVEL_SIZE SET	LEVEL_SIZE_{1}
    786 U3940					      ENDIF
    787 U3940					      ENDM		; {name}
    788 U3940
    789 U3940
    790 U3940					      MAC	defl
    791 U3940					      START_LEVEL	{1}
    792 U3940					      .byte	{2},0
    793 U3940					      END_LEVEL	{1}
    794 U3940					      ENDM
    795 U3940
    796 U3940							;--------------------------------------------------------------------------------
    797 U3940
    798 U3940							;ORIGIN      SET 0
    799 U3940
------- FILE BANK_ROM_SHADOW_RAMBANK.asm LEVEL 2 PASS 3
      0 U3940					      include	"BANK_ROM_SHADOW_RAMBANK.asm"
      1 U3940							;    Sokoboo - a Sokoban implementation
      2 U3940							;    using a generic tile-based display engine for the Atari 2600
      3 U3940							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4 U3940							;
      5 U3940							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6 U3940							;
      7 U3940							;    Code related to the generic tile-based display engine was developed by
      8 U3940							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9 U3940							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10 U3940							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11 U3940							;
     12 U3940							;    Code related to music and sound effects uses the TIATracker music player
     13 U3940							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14 U3940							;    directory for Apache licensing details.
     15 U3940							;
     16 U3940							;    Some level data incorporated in this program were created by Lee J Haywood.
     17 U3940							;    See the copyright notices in the License directory for a list of level
     18 U3940							;    contributors.
     19 U3940							;
     20 U3940							;    Except where otherwise indicated, this software is released under the
     21 U3940							;    following licensing arrangement...
     22 U3940							;
     23 U3940							;    This program is free software: you can redistribute it and/or modify
     24 U3940							;    it under the terms of the GNU General Public License as published by
     25 U3940							;    the Free Software Foundation, either version 3 of the License, or
     26 U3940							;    (at your option) any later version.
     27 U3940							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28 U3940
     29 U3940							;    This program is distributed in the hope that it will be useful,
     30 U3940							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31 U3940							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32 U3940							;    GNU General Public License for more details.
     33 U3940
     34 U3940							;------------------------------------------------------------------------------
     35 U3940							;##############################################################################
     36 U3940							;------------------------------------------------------------------------------
      0 U3940					      NEWBANK	ROM_SHADOW_OF_RAMBANK_CODE
      1  03e8 ????				      SEG	ROM_SHADOW_OF_RAMBANK_CODE
      2  0000					      ORG	ORIGIN
      3  0000					      RORG	$F000
      4  0000				   BANK_START SET	*
      5  0000				   ROM_SHADOW_OF_RAMBANK_CODE SET	ORIGIN / 2048
      6  0000				   ORIGIN     SET	ORIGIN + 2048
      7  0000				   _CURRENT_BANK SET	ROM_SHADOW_OF_RAMBANK_CODE
     38  0000
     39  0000							; This is essentially a ROM mirror of a RAM bank.
     40  0000							; The contents of this bank are copied to each of the ROW banks on startup, and
     41  0000							; this gives a 1:1 correspondence between the data/addresses defined here, and
     42  0000							; the addresses in the switched-in RAM bank.
     43  0000
     44  0000							; Note: Bankswitching code between any of these banks guarantees the code can
     45  0000							; continue to run -- because, of course, the same code is still at the same
     46  0000							; memory address.
     47  0000
      0  0000					      DEFINE_SUBROUTINE	DrawTheScreen
      1  0000		       00 00	   BANK_DrawTheScreen =	_CURRENT_BANK
      2  0000					      SUBROUTINE
      3  0000				   DrawTheScreen
     49  0000
     50  0000							; Thomas Jentzsch strikes again.  And Andrew Davie too ;)
     51  0000							; A refactor of the kernel to improve the timing.
     52  0000							; Experimental refactor to remove the blank line...
     53  0000
     54  0000							; adjust here so that the first line of the kernel starts exactly at cycle 67
     55  0000							; (since TJ said it could start up to 5 cycles earlier than #67).
     56  0000
     57  0000							; TODO: remove GRP1 and COLUP1 access (or use higher resolution player)
     58  0000							;	     @57
      0  0000					      SLEEP	6	; 3
      1  0000				   .CYCLES    SET	6
      2  0000
      3  0000				  -	      IF	.CYCLES < 2
      4  0000				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0000				  -	      ERR
      6  0000					      ENDIF
      7  0000
      8  0000				  -	      IF	.CYCLES & 1
      9  0000				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  0000				  -	      nop	0
     11  0000				  -	      ELSE
     12  0000				  -	      bit	VSYNC
     13  0000				  -	      ENDIF
     14  0000				  -.CYCLES    SET	.CYCLES - 3
     15  0000					      ENDIF
     16  0000
     17  0000					      REPEAT	.CYCLES / 2
     18  0000		       ea		      nop
     17  0000					      REPEND
     18  0001		       ea		      nop
     17  0001					      REPEND
     18  0002		       ea		      nop
     19  0003					      REPEND
     60  0003
     61  0003		       a2 00		      ldx	#<(BANK_SCREENMARKII1)	; 2		     == 0!!!
     62  0005		       10 3d		      bpl	NextALineStart	; 3 =	8    @65     unconditional
     63  0007
     64  0007				   Proc2		; 5
      0  0007					      SLEEP	3	; 3	     @64
      1  0007				   .CYCLES    SET	3
      2  0007
      3  0007				  -	      IF	.CYCLES < 2
      4  0007				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0007				  -	      ERR
      6  0007					      ENDIF
      7  0007
      8  0007					      IF	.CYCLES & 1
      9  0007					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0007		       04 00		      nop	0
     11  0009				  -	      ELSE
     12  0009				  -	      bit	VSYNC
     13  0009					      ENDIF
     14  0009				   .CYCLES    SET	.CYCLES - 3
     15  0009					      ENDIF
     16  0009
     17  0009				  -	      REPEAT	.CYCLES / 2
     18  0009				  -	      nop
     19  0009					      REPEND
     66  0009		       10 3b		      bpl	ScanBLUEBD	; 3 = 11    @67     unconditional
     67  000b
      0  000b					      DEFINE_SUBROUTINE	ScanRED	;	     @60
      1  000b		       00 00	   BANK_ScanRED =	_CURRENT_BANK
      2  000b					      SUBROUTINE
      3  000b				   ScanRED
     69  000b		       b9 1d f3    SM_PF0_REDl lda	CHARACTERSHAPE_BLANK,y	; 4
     70  000e		       85 4d		      sta	PF0	; 3	     @67
     71  0010		       b9 14 f2 	      lda	ScreenBitmapRED+0*LINES_PER_CHAR,y	; 4
     72  0013		       85 4e		      sta	PF1	; 3 = 14    @74
     73  0015							;SELFMOD_PLAYERCOL_RED
     74  0015		       b9 4d f3 	      lda	PLAYER0_COLOUR,y	; 4
     75  0018							;lda #$66
     76  0018							;nop
     77  0018		       85 46		      sta	COLUP0	; 3	     @05
      0  001a					      SLEEP	3
      1  001a				   .CYCLES    SET	3
      2  001a
      3  001a				  -	      IF	.CYCLES < 2
      4  001a				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  001a				  -	      ERR
      6  001a					      ENDIF
      7  001a
      8  001a					      IF	.CYCLES & 1
      9  001a					      IFNCONST	NO_ILLEGAL_OPCODES
     10  001a		       04 00		      nop	0
     11  001c				  -	      ELSE
     12  001c				  -	      bit	VSYNC
     13  001c					      ENDIF
     14  001c				   .CYCLES    SET	.CYCLES - 3
     15  001c					      ENDIF
     16  001c
     17  001c				  -	      REPEAT	.CYCLES / 2
     18  001c				  -	      nop
     19  001c					      REPEND
     79  001c							;sta COLUP1				      ; 3 = 10	  @08
     80  001c
     81  001c							; TIMING COUNTS ARE WRONG FROM HERE, DUE TO ABOVE CYCLE LOSS
     82  001c
     83  001c		       f0 1d	   Colour_A_Actual =	* + 1
     84  001c				   SELFMOD_RED
     85  001c		       a9 00		      lda	#0	; 2
     86  001e		       85 48		      sta	COLUPF	; 3 =	5    @13
     87  0020
     88  0020				   SELFMOD_PLAYER0_RED
     89  0020		       b9 35 f3 	      lda	ShapePlayerRED,y	; 4
     90  0023		       85 5b		      sta	GRP0	; 3 =	7    @20
     91  0025
     92  0025		       b9 2c f2 	      lda	ScreenBitmapRED+1*LINES_PER_CHAR,y	; 4
     93  0028		       85 4f		      sta	PF2	; 3 =	7    @27
     94  002a
     95  002a		       b9 1d f3    SM_PF0_REDr lda	#CHARACTERSHAPE_BLANK,y	; 4
     96  002d		       85 4d		      sta	PF0	; 3	     @34
     97  002f		       b9 44 f2 	      lda	ScreenBitmapRED+2*LINES_PER_CHAR,y	; 4
     98  0032		       85 4e		      sta	PF1	; 3	     @41
     99  0034		       b9 5c f2 	      lda	ScreenBitmapRED+3*LINES_PER_CHAR,y	; 4
    100  0037		       85 4f		      sta	PF2	; 3 = 21    @48     must be >=48! :-)
    101  0039
    102  0039				   SELFMOD_PLAYER1_RED
    103  0039		       b9 35 f3 	      lda	ShapePlayerRED,y	; 4
    104  003c							;sta.w GRP1				      ; 4 =  8	  @56	VDELed!
      0  003c					      SLEEP	4
      1  003c				   .CYCLES    SET	4
      2  003c
      3  003c				  -	      IF	.CYCLES < 2
      4  003c				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  003c				  -	      ERR
      6  003c					      ENDIF
      7  003c
      8  003c				  -	      IF	.CYCLES & 1
      9  003c				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  003c				  -	      nop	0
     11  003c				  -	      ELSE
     12  003c				  -	      bit	VSYNC
     13  003c				  -	      ENDIF
     14  003c				  -.CYCLES    SET	.CYCLES - 3
     15  003c					      ENDIF
     16  003c
     17  003c					      REPEAT	.CYCLES / 2
     18  003c		       ea		      nop
     17  003c					      REPEND
     18  003d		       ea		      nop
     19  003e					      REPEND
    106  003e
    107  003e		       88		      dey		; 2
    108  003f		       10 c6		      bpl	Proc2	; 2(3)      --> 61 if taken
    109  0041
    110  0041		       e8	   SELFMOD_X  inx		; 2
    111  0042		       86 3e		      stx	SET_BANK_RAM	; 3	     SWITCH TO CORRECT ROW BANK (OR EXIT BANK)
    112  0044							;EXIT_RETURN_HERE
    113  0044				   NextALineStart
    114  0044		       a0 07		      ldy	#LINES_PER_CHAR/3-1	; 2 = 11    @67
    115  0046				   ScanBLUEBD		;	     @67     let's start as late as possible
    116  0046
    117  0046							;------------------------------------------------------------------------------
    118  0046
    119  0046		       b9 1d f3    SM_PF0_BLUEl lda	CHARACTERSHAPE_BLANK,y	; 4
    120  0049		       85 4d		      sta	PF0	; 3 =	7    @74
    121  004b							;SELFMOD_PLAYERCOL_BLUE
    122  004b		       b9 5d f3 	      lda	PLAYER0_COLOUR+2*LINES_PER_CHAR/3,y	; 4
    123  004e							;lda #$66
    124  004e							;nop
    125  004e							;sta COLUP1				      ; 3	  @05
      0  004e					      SLEEP	3
      1  004e				   .CYCLES    SET	3
      2  004e
      3  004e				  -	      IF	.CYCLES < 2
      4  004e				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  004e				  -	      ERR
      6  004e					      ENDIF
      7  004e
      8  004e					      IF	.CYCLES & 1
      9  004e					      IFNCONST	NO_ILLEGAL_OPCODES
     10  004e		       04 00		      nop	0
     11  0050				  -	      ELSE
     12  0050				  -	      bit	VSYNC
     13  0050					      ENDIF
     14  0050				   .CYCLES    SET	.CYCLES - 3
     15  0050					      ENDIF
     16  0050
     17  0050				  -	      REPEAT	.CYCLES / 2
     18  0050				  -	      nop
     19  0050					      REPEND
    127  0050		       85 46		      sta	COLUP0	; 3 = 10    @08
    128  0052
    129  0052		       f0 53	   Colour_C_Actual =	* + 1
    130  0052				   SELFMOD_BLUE
    131  0052		       a9 00		      lda	#0	; 2
    132  0054		       85 48		      sta	COLUPF	; 3 =	5    @13
    133  0056
    134  0056				   SELFMOD_PLAYER0_BLUE
    135  0056		       b9 35 f3 	      lda	ShapePlayerBLUE,y	; 4
    136  0059		       85 5b		      sta	GRP0	; 3 =	7    @20
    137  005b
    138  005b		       b9 24 f2 	      lda	ScreenBitmapBLUE+0*LINES_PER_CHAR,y	; 4
    139  005e		       85 4e		      sta	PF1	; 3	     @27     <=27! :-)
    140  0060		       b9 3c f2 	      lda	ScreenBitmapBLUE+1*LINES_PER_CHAR,y	; 4
    141  0063		       85 4f		      sta	PF2	; 3 = 14    @34
    142  0065
    143  0065		       b9 1d f3    SM_PF0_BLUEr lda	CHARACTERSHAPE_BLANK,y	; 4
    144  0068		       85 4d		      sta	PF0	; 3	     @41
    145  006a		       b9 54 f2 	      lda	ScreenBitmapBLUE+2*LINES_PER_CHAR,y	; 4
    146  006d		       85 4e		      sta	PF1	; 3	     @48
    147  006f		       b9 6c f2 	      lda	ScreenBitmapBLUE+3*LINES_PER_CHAR,y	; 4
    148  0072		       85 4f		      sta	PF2	; 3 = 21    @55
    149  0074
    150  0074				   SELFMOD_PLAYER1_BLUE
    151  0074		       b9 35 f3 	      lda	ShapePlayerBLUE,y	; 4
    152  0077							;sta GRP1				      ; 3 =  7	  VDELed! @62
      0  0077					      SLEEP	3
      1  0077				   .CYCLES    SET	3
      2  0077
      3  0077				  -	      IF	.CYCLES < 2
      4  0077				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0077				  -	      ERR
      6  0077					      ENDIF
      7  0077
      8  0077					      IF	.CYCLES & 1
      9  0077					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0077		       04 00		      nop	0
     11  0079				  -	      ELSE
     12  0079				  -	      bit	VSYNC
     13  0079					      ENDIF
     14  0079				   .CYCLES    SET	.CYCLES - 3
     15  0079					      ENDIF
     16  0079
     17  0079				  -	      REPEAT	.CYCLES / 2
     18  0079				  -	      nop
     19  0079					      REPEND
    154  0079
    155  0079							;------------------------------------------------------------------------------
    156  0079
    157  0079				   ScanGREEN		;	     @62
    158  0079		       b9 1d f3    SM_PF0_GREENl lda	CHARACTERSHAPE_BLANK,y	; 4
    159  007c		       85 4d		      sta	PF0	; 3 =	7    @69
    160  007e							;SELFMOD_PLAYERCOL_GREEN
    161  007e		       b9 55 f3 	      lda	PLAYER0_COLOUR+LINES_PER_CHAR/3,y	; 4
    162  0081							;lda #$66
    163  0081							;nop
    164  0081							;sta COLUP1				      ; 3	  @00
      0  0081					      SLEEP	3
      1  0081				   .CYCLES    SET	3
      2  0081
      3  0081				  -	      IF	.CYCLES < 2
      4  0081				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0081				  -	      ERR
      6  0081					      ENDIF
      7  0081
      8  0081					      IF	.CYCLES & 1
      9  0081					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0081		       04 00		      nop	0
     11  0083				  -	      ELSE
     12  0083				  -	      bit	VSYNC
     13  0083					      ENDIF
     14  0083				   .CYCLES    SET	.CYCLES - 3
     15  0083					      ENDIF
     16  0083
     17  0083				  -	      REPEAT	.CYCLES / 2
     18  0083				  -	      nop
     19  0083					      REPEND
    166  0083		       85 46		      sta	COLUP0	; 3 = 10    @03
    167  0085
    168  0085		       f0 86	   Colour_B_Actual =	* + 1
    169  0085				   SELFMOD_GREEN
    170  0085		       a9 00		      lda	#0	; 2
    171  0087		       85 48		      sta	COLUPF	; 3 =	5    @08
    172  0089
    173  0089				   SELFMOD_PLAYER0_GREEN
    174  0089		       b9 35 f3 	      lda	ShapePlayerGREEN,y	; 4
    175  008c		       85 5b		      sta	GRP0	; 3 =	7    @15
    176  008e
    177  008e		       b9 1c f2 	      lda	ScreenBitmapGREEN+0*LINES_PER_CHAR,y	; 4
    178  0091		       85 4e		      sta	PF1	; 3	     @22
    179  0093		       b9 34 f2 	      lda	ScreenBitmapGREEN+1*LINES_PER_CHAR,y	; 4
    180  0096		       85 4f		      sta	PF2	; 3 = 14    @29
    181  0098
    182  0098		       b9 1d f3    SM_PF0_GREENr lda	CHARACTERSHAPE_BLANK,y	; 4
    183  009b		       85 4d		      sta	PF0	; 3	     @36
    184  009d		       b9 4c f2 	      lda	ScreenBitmapGREEN+2*LINES_PER_CHAR,y	; 4
    185  00a0		       85 4e		      sta	PF1	; 3	     @43
    186  00a2		       b9 64 f2 	      lda	ScreenBitmapGREEN+3*LINES_PER_CHAR,y	; 4
    187  00a5		       85 4f		      sta	PF2	; 3 = 21    @50
    188  00a7
    189  00a7				   SELFMOD_PLAYER1_GREEN
    190  00a7		       b9 35 f3 	      lda	ShapePlayerGREEN,y	; 4
    191  00aa							;sta GRP1				      ; 3 =  7	  @57	  VDELed!
      0  00aa					      SLEEP	3
      1  00aa				   .CYCLES    SET	3
      2  00aa
      3  00aa				  -	      IF	.CYCLES < 2
      4  00aa				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  00aa				  -	      ERR
      6  00aa					      ENDIF
      7  00aa
      8  00aa					      IF	.CYCLES & 1
      9  00aa					      IFNCONST	NO_ILLEGAL_OPCODES
     10  00aa		       04 00		      nop	0
     11  00ac				  -	      ELSE
     12  00ac				  -	      bit	VSYNC
     13  00ac					      ENDIF
     14  00ac				   .CYCLES    SET	.CYCLES - 3
     15  00ac					      ENDIF
     16  00ac
     17  00ac				  -	      REPEAT	.CYCLES / 2
     18  00ac				  -	      nop
     19  00ac					      REPEND
    193  00ac
    194  00ac		       4c 0b f0 	      jmp	ScanRED	; 3	     @60
    195  00af
    196  00af							;------------------------------------------------------------------------------
    197  00af
    198  00af							;------------------------------------------------------------------------------
    199  00af
    200  00af							;*** Ideas: ***
    201  00af							; - separate data for left and right nibble (saves 88 cycles, 63 cycles or
    202  00af							;   13.5% on average), also unrolling would be more effective than now
    203  00af							; - use CharacterDataVecHI for mirrored/unmirrored (saves cycles and bytes,
    204  00af							;   see EXPERIMENTAL)
    205  00af							; - special QuickDraw routine for PF0 (~165 cycles, but only ~2% usage)
    206  00af							; - stack AI (reordering for less setup code and cycle usage, maybe better use
    207  00af							;   bidirectional linked list instead)
    208  00af							; - calculate mirrored gfx data into RAM (saves ROM)
    209  00af
    210  00af							;*** average cycle calculation (10% blanks, all columns equally frequent): ***
    211  00af							;currently:
    212  00af							; 72%*539 (!unrolled)
    213  00af							;+ 8%*304 (unrolled)
    214  00af							;+20%*269 (unrolled)
    215  00af							;--------
    216  00af							;=   ~466.2 cycles on average
    217  00af
    218  00af							;alternative #1:
    219  00af							; 72%*522 (unrolled)
    220  00af							;+ 8%*352 (!unrolled)
    221  00af							;+20%*307 (!unrolled)
    222  00af							;--------
    223  00af							;=   ~465.4 cycles on average
    224  00af
    225  00af
    226  00af		       00 01	   MIRROR     =	1
    227  00af		       00 80	   DIRECT     =	$80
    228  00af
    229  00af							;------------------------------------------------------------------------------
    230  00af							; Here we don't draw into a buffer, but directly patch the kernel
    231  00af							; VERY fast!
    232  00af							;
    233  00af							; TODO: check if DirectDraw for PF1/2 can be handle efficiently like this too
    234  00af							; Problem: SlowDraw cannot assume that the other nibble is set correctly anymore
    235  00af
    236  00af				   PF0Draw		; 25✅ cycles until here
    237  00af
    238  00af		       ae 84 02 	      ldx	INTIM	; 4
    239  00b2		       e0 04		      cpx	#SEGTIME_SCD_PF0	; 2
    240  00b4		       90 72		      bcc	ExitDraw	; 2(3)=8✅
    241  00b6
    242  00b6		       29 7f		      and	#<(~DIRECT)	; 2
    243  00b8		       aa		      tax		; 2 =	4✅
    244  00b9
    245  00b9		       98		      tya		; 2
    246  00ba		       0a		      asl		; 2	     no mirrored chars in PF0
    247  00bb		       a8		      tay		; 2 =	6✅
    248  00bc							;		  clc				  ; 2
    249  00bc
    250  00bc		       b9 01 f3 	      lda	CharacterDataVecHI,y	; 4
    251  00bf		       9d 0d f4 	      sta	SM_PF0_REDl +RAM_WRITE+2,x	; 5
    252  00c2		       9d 7b f4 	      sta	SM_PF0_GREENl+RAM_WRITE+2,x	; 5
    253  00c5		       9d 48 f4 	      sta	SM_PF0_BLUEl +RAM_WRITE+2,x	; 5 = 19✅
    254  00c8
    255  00c8		       b9 e5 f2 	      lda	CharacterDataVecLO,y	; 4
    256  00cb		       9d 0c f4 	      sta	SM_PF0_REDl +RAM_WRITE+1,x	; 5
    257  00ce		       69 07		      adc	#LINES_PER_CHAR/3-1	; 2	     CF is set!
    258  00d0		       9d 7a f4 	      sta	SM_PF0_GREENl+RAM_WRITE+1,x	; 5
    259  00d3		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    260  00d5		       9d 47 f4 	      sta	SM_PF0_BLUEl +RAM_WRITE+1,x	; 5 = 23✅
    261  00d8
    262  00d8		       4c cb fa 	      jmp	DrawAnother	; 3 =	[25]+8+4+6+19+24+3 = 88✅ entering DrawAnother
    263  00db
    264  00db							; Timing for PF0Draw
    265  00db							; 88
    266  00db							; total: 37+70+6 = 113 => 113/64 + 1.4 = 3.17 = 4 (or 3?)
    267  00db
    268  00db
    269  00db							;------------------------------------------------------------------------------
    270  00db							; Direct draw draws to PF0, which only has one active member of the character
    271  00db							; pair -- so it can be a direct copy.	Quicker still!
    272  00db
    273  00db				   DirectDraw		; 37✅ cycles until here
    274  00db
    275  00db		       ad 84 02 	      lda	INTIM	; 4
    276  00de		       c9 08		      cmp	#SEGTIME_SCD_DIRECT	; 2
    277  00e0		       90 46		      bcc	ExitDraw	; 2(3)=8
    278  00e2							; => [37]+(9)+6rts = 51 cycles if draw exits
    279  00e2
    280  00e2							; @ [37]+8 =45✅
    281  00e2
    282  00e2		       b9 01 f3 	      lda	CharacterDataVecHI,y	; 4
    283  00e5		       8d 12 f5 	      sta	SM3LOAD+RAM_WRITE+2	; 4
    284  00e8		       8d 18 f5 	      sta	SM3LOADb+RAM_WRITE+2	; 4
    285  00eb		       8d 1e f5 	      sta	SM3LOADc+RAM_WRITE+2	; 4 = 16
    286  00ee
    287  00ee		       b9 e5 f2 	      lda	CharacterDataVecLO,y	; 4
    288  00f1		       8d 11 f5 	      sta	SM3LOAD+RAM_WRITE+1	; 4
    289  00f4		       69 07		      adc	#LINES_PER_CHAR/3 - 1	; 2	     CF is set!
    290  00f6		       8d 17 f5 	      sta	SM3LOADb+RAM_WRITE+1	; 4
    291  00f9		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    292  00fb		       8d 1d f5 	      sta	SM3LOADc+RAM_WRITE+1	; 4 = 20
    293  00fe
    294  00fe		       bd b2 f1 	      lda	CharAddressLO,x	; 4	     ScreenBitmap(COL) LO byte
    295  0101		       8d 14 f5 	      sta	SM3STORE+RAM_WRITE+1	; 4
    296  0104		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    297  0106		       8d 1a f5 	      sta	SM3STOREb+RAM_WRITE+1	; 4
    298  0109		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    299  010b		       8d 20 f5 	      sta	SM3STOREc+RAM_WRITE+1	; 4 = 20
    300  010e
    301  010e		       a0 07		      ldy	#LINES_PER_CHAR/3 - 1	; 2 =	2
    302  0110
    303  0110							; @45+16+20+20+2 = @103
    304  0110				   TSFill3		; 8*{...
    305  0110		       b9 00 f0    SM3LOAD    lda	$F000,y	; 4+
    306  0113		       99 14 f6    SM3STORE   sta	ScreenBitmap+RAM_WRITE,y	; 5
    307  0116		       b9 00 f0    SM3LOADb   lda	$F000,y	; 4+
    308  0119		       99 14 f6    SM3STOREb  sta	ScreenBitmap+RAM_WRITE,y	; 5
    309  011c		       b9 00 f0    SM3LOADc   lda	$F000,y	; 4+
    310  011f		       99 14 f6    SM3STOREc  sta	ScreenBitmap+RAM_WRITE,y	; 5 = 27
    311  0122
    312  0122		       88		      dey		; 2
      0  0123					      CHECKPAGE_BPL	TSFill3	; 3(2)=5 ...32✅} = 8*32-1 = 255
      8  0123					      LIST	ON
      9  0123		       10 eb		      bpl	TSFill3
    314  0125
    315  0125		       4c cb fa 	      jmp	DrawAnother	; 3
    316  0128							; => @103+255+3 = 361✅ entering DrawAnother
    317  0128
    318  0128		       60	   ExitDraw   rts		; 6
    319  0129
    320  0129							;------------------------------------------------------------------------------
    321  0129
      0  0129					      DEFINE_SUBROUTINE	StealPart3	; [18]✅ CYCLES TO HERE
      1  0129		       00 00	   BANK_StealPart3 =	_CURRENT_BANK
      2  0129					      SUBROUTINE
      3  0129				   StealPart3
    323  0129
    324  0129		       bd c4 f1 	      lda	MOD10,x	; 4
    325  012c		       30 81		      bmi	PF0Draw	; 2/3 --> 25 cycles entering PF0Draw
    326  012e
    327  012e		       4a		      lsr		; 2
    328  012f		       aa		      tax		; 2
    329  0130		       98		      tya		; 2
    330  0131		       2a		      rol		; 2	       allows for mirrored char = * | 1
    331  0132		       a8		      tay		; 2
    332  0133		       b0 a6		      bcs	DirectDraw	; 2(3) = 18✅ when draw stack was built, bit 7 flags direct-drawn character
    333  0135							; ==> [18]+{19) = 37 @ start of DirectDraw
    334  0135
    335  0135		       b9 01 f3 	      lda	CharacterDataVecHI,y	; 4
    336  0138		       10 38		      bpl	QuickDraw	; 2(3) = 6(7)	 special-case blank characters for extra speed
    337  013a							; => [18]+18+(7) = 43✅ starting QuickDraw
    338  013a							; +15 => 58✅ if QuickDraw exits
    339  013a
    340  013a							; @ 24
    341  013a
    342  013a		       8d 63 f5 	      sta	SMEOR1+RAM_WRITE+2	; 4
    343  013d
    344  013d		       ad 84 02 	      lda	INTIM	; 4
    345  0140		       c9 0d		      cmp	#SEGTIME_SCD_SLOW	; 2
    346  0142		       90 e4		      bcc	ExitDraw	; 2(3) = 8
    347  0144							; => [18]+55+6rts=79✅ cycles if we decline
    348  0144
    349  0144							; @36
    350  0144							; [18]+36 = @54
    351  0144
    352  0144		       b9 e5 f2 	      lda	CharacterDataVecLO,y	; 4
    353  0147		       8d 62 f5 	      sta	SMEOR1+RAM_WRITE+1	; 4 =	8
    354  014a
    355  014a		       bd b2 f1 	      lda	CharAddressLO,x	; 4	     ScreenBitmap(COL) LO byte
    356  014d		       8d 5f f5 	      sta	SMLOAD+RAM_WRITE+1	; 4
    357  0150		       8d 67 f5 	      sta	SMEOR2+RAM_WRITE+1	; 4
    358  0153		       8d 6a f5 	      sta	SMSTORE+RAM_WRITE+1	; 4 = 16
    359  0156
    360  0156		       bd bc f1 	      lda	CharMaskNeg,x	; 4	     masks out left or right
    361  0159		       8d 65 f5 	      sta	SMMASK+RAM_WRITE+1	; 4 =	8
    362  015c
    363  015c		       a0 17	   SlowDraw   ldy	#LINES_PER_CHAR - 1	; 2 =	2 => @88+
    364  015e
    365  015e							; A very nice bit of Thomas Jentzsch replacement magic giving 77 cycle savings.
    366  015e							; Rewrite for self-modification by Andrew Davie giving another 90 cycles :)
    367  015e
    368  015e				   TSFill		; 24*{...✅
    369  015e
    370  015e		       b9 14 f2    SMLOAD     lda	ScreenBitmap,y	; 4
    371  0161		       59 00 f0    SMEOR1     eor	$F000,y	; 4
    372  0164		       29 00	   SMMASK     and	#0	; 2
    373  0166		       59 14 f2    SMEOR2     eor	ScreenBitmap,y	; 4	     using ScreenBitmap here avoids setting high-pointer
    374  0169		       99 14 f6    SMSTORE    sta	ScreenBitmap+RAM_WRITE,y	; 5 = 19
    375  016c
    376  016c		       88		      dey		; 2
      0  016d					      CHECKPAGE_BPL	TSFill	; 3(2)=5  ...24}-1 = 575✅
      8  016d					      LIST	ON
      9  016d		       10 ef		      bpl	TSFill
    378  016f
    379  016f		       4c cb fa 	      jmp	DrawAnother	; 3 = @88+575+3 = @676✅
    380  0172
    381  0172
    382  0172							;------------------------------------------------------------------------------
    383  0172							; QuickDraw is for drawing BLANK characters.  It just has to mask out the
    384  0172							; existing character data, so can be special-cased from the normal character
    385  0172							; draw, saving roughly 230 cycles.
    386  0172
    387  0172				   QuickDraw		; [43]✅ cycles until here
    388  0172
    389  0172		       ad 84 02 	      lda	INTIM	; 4
    390  0175		       c9 08		      cmp	#SEGTIME_SCD_QUICK	; 2
    391  0177		       90 af		      bcc	ExitDraw	; 2(3)=8(9)
    392  0179							; =>[43]+(9)+6rts =58✅ if exit
    393  0179							;@[43]+8=51✅
    394  0179
    395  0179		       bd b2 f1 	      lda	CharAddressLO,x	; 4	     ScreenBitmap(COL) LO byte
    396  017c		       8d 99 f5 	      sta	SM2LOAD+RAM_WRITE+1	; 4
    397  017f		       8d 9c f5 	      sta	SM2STORE+RAM_WRITE+1	; 4
    398  0182		       69 07		      adc	#LINES_PER_CHAR/3 - 1	; 2	     CF is set!
    399  0184		       8d a0 f5 	      sta	SM2LOADb+RAM_WRITE+1	; 4
    400  0187		       8d a3 f5 	      sta	SM2STOREb+RAM_WRITE+1	; 4
    401  018a		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    402  018c		       8d a7 f5 	      sta	SM2LOADc+RAM_WRITE+1	; 4
    403  018f		       8d aa f5 	      sta	SM2STOREc+RAM_WRITE+1	; 4 = 32✅
    404  0192
    405  0192		       bc ba f1 	      ldy	CharMask,x	; 4	     masks out left or right
    406  0195
    407  0195		       a2 07		      ldx	#LINES_PER_CHAR/3 - 1	; 2	     =32+4+2+8*{...✅
    408  0197				   TSFill2
    409  0197		       98		      tya		; 2
    410  0198		       3d 14 f2    SM2LOAD    and	ScreenBitmap,x	; 4+
    411  019b		       9d 14 f6    SM2STORE   sta	ScreenBitmap+RAM_WRITE,x	; 5
    412  019e		       98		      tya		; 2
    413  019f		       3d 14 f2    SM2LOADb   and	ScreenBitmap,x	; 4+
    414  01a2		       9d 14 f6    SM2STOREb  sta	ScreenBitmap+RAM_WRITE,x	; 5
    415  01a5		       98		      tya		; 2
    416  01a6		       3d 14 f2    SM2LOADc   and	ScreenBitmap,x	; 4+
    417  01a9		       9d 14 f6    SM2STOREc  sta	ScreenBitmap+RAM_WRITE,x	; 5 = 33✅
    418  01ac
    419  01ac		       ca		      dex		; 2
      0  01ad					      CHECKPAGE_BPL	TSFill2	; 3(2) = 5  ...} = 32+4+2+8*38-1
      8  01ad					      LIST	ON
      9  01ad		       10 e8		      bpl	TSFill2
    421  01af							;		  => 341✅
    422  01af
    423  01af		       4c cb fa 	      jmp	DrawAnother	; 3 = 344
    424  01b2
    425  01b2							;------------------------------------------------------------------------------
    426  01b2
    427  01b2
    428  01b2				   CharAddressLO		;[abs char location % 10]
    429  01b2
    430  01b2							; Gives the absolute screen buffer address of the first line of the given character
    431  01b2							; Where character number is 0-9
    432  01b2
    433  01b2		       14		      .byte.b	< ( ScreenBitmap + ( 0 * LINES_PER_CHAR ))	; 1
    434  01b3		       14		      .byte.b	< ( ScreenBitmap + ( 0 * LINES_PER_CHAR ))	; 2
    435  01b4		       2c		      .byte.b	< ( ScreenBitmap + ( 1 * LINES_PER_CHAR ))	; 3
    436  01b5		       2c		      .byte.b	< ( ScreenBitmap + ( 1 * LINES_PER_CHAR ))	; 4
    437  01b6		       44		      .byte.b	< ( ScreenBitmap + ( 2 * LINES_PER_CHAR ))	; 6
    438  01b7		       44		      .byte.b	< ( ScreenBitmap + ( 2 * LINES_PER_CHAR ))	; 7
    439  01b8		       5c		      .byte.b	< ( ScreenBitmap + ( 3 * LINES_PER_CHAR ))	; 8
    440  01b9		       5c		      .byte.b	< ( ScreenBitmap + ( 3 * LINES_PER_CHAR ))	; 9
    441  01ba							;	      .byte < ( ScreenBitmap + ( 0 * LINES_PER_CHAR ))	; 0 PF0
    442  01ba							;	      .byte < ( ScreenBitmap + ( 3 * LINES_PER_CHAR ))	; 5 PF0
    443  01ba
    444  01ba				   CharMask		; [abs char location % 10]
    445  01ba
    446  01ba							; Gives the mask for any char of the screen (per row)
    447  01ba							; Note, this is hardwired to the screen format of 6 bytes/line
    448  01ba
    449  01ba		       0f		      .byte.b	$0F	; 1
    450  01bb		       f0		      .byte.b	$F0	; 2
    451  01bc				   CharMaskNeg
    452  01bc		       f0		      .byte.b	$F0	; 3/1
    453  01bd		       0f		      .byte.b	$0F	; 4/2
    454  01be		       0f		      .byte.b	$0F	; 6/3
    455  01bf		       f0		      .byte.b	$F0	; 7/4
    456  01c0		       f0		      .byte.b	$F0	; 8/6
    457  01c1		       0f		      .byte.b	$0F	; 9/7
    458  01c2		       0f		      .byte.b	$0F	; -/8
    459  01c3		       f0		      .byte.b	$F0	; -/9
    460  01c4				   MOD10
    461  01c4					      REPEAT	SCREEN_LINES
    462  01c4							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  01c4							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  01c4		       80		      .byte.b	DIRECT
    465  01c5		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  01c9		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  01ca		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  01ca					      REPEND
    462  01ce							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  01ce							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  01ce		       80		      .byte.b	DIRECT
    465  01cf		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  01d3		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  01d4		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  01d4					      REPEND
    462  01d8							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  01d8							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  01d8		       80		      .byte.b	DIRECT
    465  01d9		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  01dd		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  01de		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  01de					      REPEND
    462  01e2							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  01e2							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  01e2		       80		      .byte.b	DIRECT
    465  01e3		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  01e7		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  01e8		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  01e8					      REPEND
    462  01ec							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  01ec							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  01ec		       80		      .byte.b	DIRECT
    465  01ed		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  01f1		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  01f2		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  01f2					      REPEND
    462  01f6							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  01f6							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  01f6		       80		      .byte.b	DIRECT
    465  01f7		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  01fb		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  01fc		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  01fc					      REPEND
    462  0200							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  0200							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  0200		       80		      .byte.b	DIRECT
    465  0201		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  0205		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  0206		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    461  0206					      REPEND
    462  020a							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    463  020a							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    464  020a		       80		      .byte.b	DIRECT
    465  020b		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    466  020f		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    467  0210		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  0214					      REPEND
    469  0214
    470  0214							;------------------------------------------------------------------------------
    471  0214
      0  0214					      OPTIONAL_PAGEBREAK	"SCREEN_BITMAP", SCREEN_BITMAP_SIZE
     10  0214					      LIST	ON
    473  0214
    474  0214		       00 00 00 00*ScreenBitmap ds	SCREEN_BITMAP_SIZE,0	; character bitmap row (10 chars wide)
    475  0214		       f2 14	   ScreenBitmapRED =	ScreenBitmap + LINES_PER_CHAR/3*0
    476  0214		       f2 1c	   ScreenBitmapGREEN =	ScreenBitmap + LINES_PER_CHAR/3*1
    477  0214		       f2 24	   ScreenBitmapBLUE =	ScreenBitmap + LINES_PER_CHAR/3*2
    478  0274
      0  0274					      CHECKPAGEX	ScreenBitmap, "ScreenBitmap"
      9  0274					      LIST	ON
    480  0274
    481  0274
    482  0274							;--------------------------------------------------------------------------
    483  0274
      0  0274					      DEFINE_SUBROUTINE	SelfModDrawPlayers	; copied to ROW RAM BANKS
      1  0274		       00 00	   BANK_SelfModDrawPlayers =	_CURRENT_BANK
      2  0274					      SUBROUTINE
      3  0274				   SelfModDrawPlayers
    485  0274
    486  0274							; Update the appropriate shape pointers in the draw code.
    487  0274							; First, set the shape to a blank player -- effectively erasing
    488  0274
    489  0274		       a6 af		      ldx	LastSpriteY
    490  0276		       30 15		      bmi	erased	; offscreen
    491  0278		       e4 a0		      cpx	ManDrawY
    492  027a		       f0 28		      beq	NoMod	; same line, so all should be OK already
    493  027c
    494  027c		       86 3e		      stx	SET_BANK_RAM	; switch old bank in (this code too!!!!)
    495  027e
    496  027e		       a9 1d		      lda	#<PLAYER_BLANK	; "erase"
    497  0280		       8d 21 f4 	      sta	SELFMOD_PLAYER0_RED+RAM_WRITE+1
    498  0283		       a9 25		      lda	#<PLAYER_BLANK + LINES_PER_CHAR/3
    499  0285		       8d 8a f4 	      sta	SELFMOD_PLAYER0_GREEN+RAM_WRITE+1
    500  0288		       a9 2d		      lda	#<PLAYER_BLANK + 2*LINES_PER_CHAR/3
    501  028a		       8d 57 f4 	      sta	SELFMOD_PLAYER0_BLUE+RAM_WRITE+1
    502  028d
    503  028d							; Now we've erased, we write the new shape
    504  028d
    505  028d		       a6 a0	   erased     ldx	ManDrawY
    506  028f		       86 af		      stx	LastSpriteY
    507  0291		       30 11		      bmi	NoMod
    508  0293
    509  0293		       86 3e		      stx	SET_BANK_RAM	; switch new bank in (this code too!!!!)
    510  0295
    511  0295		       a9 35		      lda	#<PLAYER0_SHAPE	; draw buffer holding the new frame shape
    512  0297		       8d 21 f4 	      sta	SELFMOD_PLAYER0_RED+RAM_WRITE+1
    513  029a		       a9 3d		      lda	#<PLAYER0_SHAPE + LINES_PER_CHAR/3
    514  029c		       8d 8a f4 	      sta	SELFMOD_PLAYER0_GREEN+RAM_WRITE+1
    515  029f		       a9 45		      lda	#<PLAYER0_SHAPE + 2*LINES_PER_CHAR/3
    516  02a1		       8d 57 f4 	      sta	SELFMOD_PLAYER0_BLUE+RAM_WRITE+1
    517  02a4
    518  02a4		       60	   NoMod      rts
    519  02a5
    520  02a5
    521  02a5							;------------------------------------------------------------------------------
    522  02a5
    523  02a5							; The acutal colour palette to use for the player. The player may be any "ethnicity" which refers
    524  02a5							; to the colours for a frame. The skin could be asian/black/caucasian, the cloting could be anything.
    525  02a5							; Each ethnicity is defined as first 8 bytes for NTSC and then 8 bytes for PAL. The 8 bytes refer
    526  02a5							; to the "CL#" index values defined in the player COLOUR frames. So, an index is grabbed from the
    527  02a5							; player frame, it is adjusted to add the base ethnicity and the NTSC/PAL, and that gives the base
    528  02a5							; for reading 8 successive bytes for CL0..CL7 from the frame definitions.
    529  02a5
    530  02a5				   EthnicityColourPalette
    531  02a5
    532  02a5							; CL0	   = BLACK
    533  02a5							; CL1	   = HAT
    534  02a5							; CL2	   = SKIN
    535  02a5							; CL3	   = CUFFS/TRIM
    536  02a5							; CL4	   = JUMPER
    537  02a5							; CL5	   = PANTS
    538  02a5							; CL6	   = SHOES
    539  02a5							; CL7	   = UNUSED
    540  02a5
    541  02a5							; CL7 = NOT USABLE
    542  02a5
    543  02a5							; (*) = unchecked/converted
    544  02a5
    545  02a5					      MAC	colour_group
    546  02a5							; NTSC...
    547  02a5					      .byte	0
    548  02a5					      .byte	{1}+{2}-2+PALETTE_INTENSITY_ADJUST
    549  02a5					      .byte	{3}+{4}-2+PALETTE_INTENSITY_ADJUST
    550  02a5					      .byte	{5}+{6}-2+PALETTE_INTENSITY_ADJUST
    551  02a5					      .byte	{7}+{8}-2+PALETTE_INTENSITY_ADJUST
    552  02a5					      .byte	{9}+{10}-2+PALETTE_INTENSITY_ADJUST
    553  02a5					      .byte	{11}+{12}-2+PALETTE_INTENSITY_ADJUST
    554  02a5					      .byte	0
    555  02a5
    556  02a5							; PAL...
    557  02a5					      .byte	0
    558  02a5					      NTSC_TO_PAL	{1}, {2}-2+PALETTE_INTENSITY_ADJUST
    559  02a5					      NTSC_TO_PAL	{3}, {4}-2+PALETTE_INTENSITY_ADJUST
    560  02a5					      NTSC_TO_PAL	{5}, {6}-2+PALETTE_INTENSITY_ADJUST
    561  02a5					      NTSC_TO_PAL	{7}, {8}-2+PALETTE_INTENSITY_ADJUST
    562  02a5					      NTSC_TO_PAL	{9}, {10}-2+PALETTE_INTENSITY_ADJUST
    563  02a5					      NTSC_TO_PAL	{11}, {12}-2+PALETTE_INTENSITY_ADJUST
    564  02a5					      .byte	0
    565  02a5					      ENDM
    566  02a5
    567  02a5							; USE NTSC COLOUR+INTENSITY. WILL AUTO-ADD PAL EQUIVALENT...
    568  02a5							;		 HAT	 FACE	 TRIM	 JUMPER  PANTS	SHOES
      0  02a5					      COLOUR_GROUP	$10,$A, $40,$8, $00,$A, $80,$8, $90,6, $10,6	; 0
      1  02a5
      2  02a5		       00		      .byte.b	0
      3  02a6		       18		      .byte.b	$10+$A-2+PALETTE_INTENSITY_ADJUST
      4  02a7		       46		      .byte.b	$40+$8-2+PALETTE_INTENSITY_ADJUST
      5  02a8		       08		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      6  02a9		       86		      .byte.b	$80+$8-2+PALETTE_INTENSITY_ADJUST
      7  02aa		       94		      .byte.b	$90+6-2+PALETTE_INTENSITY_ADJUST
      8  02ab		       14		      .byte.b	$10+6-2+PALETTE_INTENSITY_ADJUST
      9  02ac		       00		      .byte.b	0
     10  02ad
     11  02ad
     12  02ad		       00		      .byte.b	0
      0  02ae					      NTSC_TO_PAL	$10, $A-2+PALETTE_INTENSITY_ADJUST
      1  02ae				  -	      IF	$10 = 0
      2  02ae				  -	      .byte	$10+$A-2+PALETTE_INTENSITY_ADJUST
      3  02ae					      ENDIF
      4  02ae					      IF	$10 = $10
      5  02ae		       28		      .byte.b	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02af					      ENDIF
      7  02af				  -	      IF	$10 = $20
      8  02af				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02af					      ENDIF
     10  02af				  -	      IF	$10 = $30
     11  02af				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02af					      ENDIF
     13  02af				  -	      IF	$10 = $40
     14  02af				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02af					      ENDIF
     16  02af				  -	      IF	$10 = $50
     17  02af				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02af					      ENDIF
     19  02af				  -	      IF	$10 = $60
     20  02af				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02af					      ENDIF
     22  02af				  -	      IF	$10 = $70
     23  02af				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02af					      ENDIF
     25  02af				  -	      IF	$10 = $80
     26  02af				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02af					      ENDIF
     28  02af				  -	      IF	$10 = $90
     29  02af				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02af					      ENDIF
     31  02af				  -	      IF	$10 = $A0
     32  02af				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02af					      ENDIF
     34  02af				  -	      IF	$10 = $B0
     35  02af				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02af					      ENDIF
     37  02af				  -	      IF	$10 = $C0
     38  02af				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02af					      ENDIF
     40  02af				  -	      IF	$10 = $D0
     41  02af				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02af					      ENDIF
     43  02af				  -	      IF	$10 = $E0
     44  02af				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02af					      ENDIF
     46  02af				  -	      IF	$10 = $F0
     47  02af				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02af					      ENDIF
      0  02af					      NTSC_TO_PAL	$40, $8-2+PALETTE_INTENSITY_ADJUST
      1  02af				  -	      IF	$40 = 0
      2  02af				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      3  02af					      ENDIF
      4  02af				  -	      IF	$40 = $10
      5  02af				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  02af					      ENDIF
      7  02af				  -	      IF	$40 = $20
      8  02af				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  02af					      ENDIF
     10  02af				  -	      IF	$40 = $30
     11  02af				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  02af					      ENDIF
     13  02af					      IF	$40 = $40
     14  02af		       66		      .byte.b	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  02b0					      ENDIF
     16  02b0				  -	      IF	$40 = $50
     17  02b0				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  02b0					      ENDIF
     19  02b0				  -	      IF	$40 = $60
     20  02b0				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  02b0					      ENDIF
     22  02b0				  -	      IF	$40 = $70
     23  02b0				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  02b0					      ENDIF
     25  02b0				  -	      IF	$40 = $80
     26  02b0				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  02b0					      ENDIF
     28  02b0				  -	      IF	$40 = $90
     29  02b0				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  02b0					      ENDIF
     31  02b0				  -	      IF	$40 = $A0
     32  02b0				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  02b0					      ENDIF
     34  02b0				  -	      IF	$40 = $B0
     35  02b0				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  02b0					      ENDIF
     37  02b0				  -	      IF	$40 = $C0
     38  02b0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  02b0					      ENDIF
     40  02b0				  -	      IF	$40 = $D0
     41  02b0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  02b0					      ENDIF
     43  02b0				  -	      IF	$40 = $E0
     44  02b0				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  02b0					      ENDIF
     46  02b0				  -	      IF	$40 = $F0
     47  02b0				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  02b0					      ENDIF
      0  02b0					      NTSC_TO_PAL	$00, $A-2+PALETTE_INTENSITY_ADJUST
      1  02b0					      IF	$00 = 0
      2  02b0		       08		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      3  02b1					      ENDIF
      4  02b1				  -	      IF	$00 = $10
      5  02b1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02b1					      ENDIF
      7  02b1				  -	      IF	$00 = $20
      8  02b1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02b1					      ENDIF
     10  02b1				  -	      IF	$00 = $30
     11  02b1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02b1					      ENDIF
     13  02b1				  -	      IF	$00 = $40
     14  02b1				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02b1					      ENDIF
     16  02b1				  -	      IF	$00 = $50
     17  02b1				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02b1					      ENDIF
     19  02b1				  -	      IF	$00 = $60
     20  02b1				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02b1					      ENDIF
     22  02b1				  -	      IF	$00 = $70
     23  02b1				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02b1					      ENDIF
     25  02b1				  -	      IF	$00 = $80
     26  02b1				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02b1					      ENDIF
     28  02b1				  -	      IF	$00 = $90
     29  02b1				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02b1					      ENDIF
     31  02b1				  -	      IF	$00 = $A0
     32  02b1				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02b1					      ENDIF
     34  02b1				  -	      IF	$00 = $B0
     35  02b1				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02b1					      ENDIF
     37  02b1				  -	      IF	$00 = $C0
     38  02b1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02b1					      ENDIF
     40  02b1				  -	      IF	$00 = $D0
     41  02b1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02b1					      ENDIF
     43  02b1				  -	      IF	$00 = $E0
     44  02b1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02b1					      ENDIF
     46  02b1				  -	      IF	$00 = $F0
     47  02b1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02b1					      ENDIF
      0  02b1					      NTSC_TO_PAL	$80, $8-2+PALETTE_INTENSITY_ADJUST
      1  02b1				  -	      IF	$80 = 0
      2  02b1				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
      3  02b1					      ENDIF
      4  02b1				  -	      IF	$80 = $10
      5  02b1				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  02b1					      ENDIF
      7  02b1				  -	      IF	$80 = $20
      8  02b1				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  02b1					      ENDIF
     10  02b1				  -	      IF	$80 = $30
     11  02b1				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  02b1					      ENDIF
     13  02b1				  -	      IF	$80 = $40
     14  02b1				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  02b1					      ENDIF
     16  02b1				  -	      IF	$80 = $50
     17  02b1				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  02b1					      ENDIF
     19  02b1				  -	      IF	$80 = $60
     20  02b1				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  02b1					      ENDIF
     22  02b1				  -	      IF	$80 = $70
     23  02b1				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  02b1					      ENDIF
     25  02b1					      IF	$80 = $80
     26  02b1		       b6		      .byte.b	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  02b2					      ENDIF
     28  02b2				  -	      IF	$80 = $90
     29  02b2				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  02b2					      ENDIF
     31  02b2				  -	      IF	$80 = $A0
     32  02b2				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  02b2					      ENDIF
     34  02b2				  -	      IF	$80 = $B0
     35  02b2				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  02b2					      ENDIF
     37  02b2				  -	      IF	$80 = $C0
     38  02b2				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  02b2					      ENDIF
     40  02b2				  -	      IF	$80 = $D0
     41  02b2				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  02b2					      ENDIF
     43  02b2				  -	      IF	$80 = $E0
     44  02b2				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  02b2					      ENDIF
     46  02b2				  -	      IF	$80 = $F0
     47  02b2				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  02b2					      ENDIF
      0  02b2					      NTSC_TO_PAL	$90, 6-2+PALETTE_INTENSITY_ADJUST
      1  02b2				  -	      IF	$90 = 0
      2  02b2				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
      3  02b2					      ENDIF
      4  02b2				  -	      IF	$90 = $10
      5  02b2				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02b2					      ENDIF
      7  02b2				  -	      IF	$90 = $20
      8  02b2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02b2					      ENDIF
     10  02b2				  -	      IF	$90 = $30
     11  02b2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02b2					      ENDIF
     13  02b2				  -	      IF	$90 = $40
     14  02b2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02b2					      ENDIF
     16  02b2				  -	      IF	$90 = $50
     17  02b2				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02b2					      ENDIF
     19  02b2				  -	      IF	$90 = $60
     20  02b2				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02b2					      ENDIF
     22  02b2				  -	      IF	$90 = $70
     23  02b2				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02b2					      ENDIF
     25  02b2				  -	      IF	$90 = $80
     26  02b2				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02b2					      ENDIF
     28  02b2					      IF	$90 = $90
     29  02b2		       94		      .byte.b	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02b3					      ENDIF
     31  02b3				  -	      IF	$90 = $A0
     32  02b3				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02b3					      ENDIF
     34  02b3				  -	      IF	$90 = $B0
     35  02b3				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02b3					      ENDIF
     37  02b3				  -	      IF	$90 = $C0
     38  02b3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02b3					      ENDIF
     40  02b3				  -	      IF	$90 = $D0
     41  02b3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02b3					      ENDIF
     43  02b3				  -	      IF	$90 = $E0
     44  02b3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02b3					      ENDIF
     46  02b3				  -	      IF	$90 = $F0
     47  02b3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02b3					      ENDIF
      0  02b3					      NTSC_TO_PAL	$10, 6-2+PALETTE_INTENSITY_ADJUST
      1  02b3				  -	      IF	$10 = 0
      2  02b3				  -	      .byte	$10+6-2+PALETTE_INTENSITY_ADJUST
      3  02b3					      ENDIF
      4  02b3					      IF	$10 = $10
      5  02b3		       24		      .byte.b	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02b4					      ENDIF
      7  02b4				  -	      IF	$10 = $20
      8  02b4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02b4					      ENDIF
     10  02b4				  -	      IF	$10 = $30
     11  02b4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02b4					      ENDIF
     13  02b4				  -	      IF	$10 = $40
     14  02b4				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02b4					      ENDIF
     16  02b4				  -	      IF	$10 = $50
     17  02b4				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02b4					      ENDIF
     19  02b4				  -	      IF	$10 = $60
     20  02b4				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02b4					      ENDIF
     22  02b4				  -	      IF	$10 = $70
     23  02b4				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02b4					      ENDIF
     25  02b4				  -	      IF	$10 = $80
     26  02b4				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02b4					      ENDIF
     28  02b4				  -	      IF	$10 = $90
     29  02b4				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02b4					      ENDIF
     31  02b4				  -	      IF	$10 = $A0
     32  02b4				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02b4					      ENDIF
     34  02b4				  -	      IF	$10 = $B0
     35  02b4				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02b4					      ENDIF
     37  02b4				  -	      IF	$10 = $C0
     38  02b4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02b4					      ENDIF
     40  02b4				  -	      IF	$10 = $D0
     41  02b4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02b4					      ENDIF
     43  02b4				  -	      IF	$10 = $E0
     44  02b4				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02b4					      ENDIF
     46  02b4				  -	      IF	$10 = $F0
     47  02b4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02b4					      ENDIF
     19  02b4		       00		      .byte.b	0
      0  02b5					      COLOUR_GROUP	$10,$A, $F0,$8, $60,$A, $50,$4, $70,6, $40,6	; 1
      1  02b5
      2  02b5		       00		      .byte.b	0
      3  02b6		       18		      .byte.b	$10+$A-2+PALETTE_INTENSITY_ADJUST
      4  02b7		       f6		      .byte.b	$F0+$8-2+PALETTE_INTENSITY_ADJUST
      5  02b8		       68		      .byte.b	$60+$A-2+PALETTE_INTENSITY_ADJUST
      6  02b9		       52		      .byte.b	$50+$4-2+PALETTE_INTENSITY_ADJUST
      7  02ba		       74		      .byte.b	$70+6-2+PALETTE_INTENSITY_ADJUST
      8  02bb		       44		      .byte.b	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02bc		       00		      .byte.b	0
     10  02bd
     11  02bd
     12  02bd		       00		      .byte.b	0
      0  02be					      NTSC_TO_PAL	$10, $A-2+PALETTE_INTENSITY_ADJUST
      1  02be				  -	      IF	$10 = 0
      2  02be				  -	      .byte	$10+$A-2+PALETTE_INTENSITY_ADJUST
      3  02be					      ENDIF
      4  02be					      IF	$10 = $10
      5  02be		       28		      .byte.b	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02bf					      ENDIF
      7  02bf				  -	      IF	$10 = $20
      8  02bf				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02bf					      ENDIF
     10  02bf				  -	      IF	$10 = $30
     11  02bf				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02bf					      ENDIF
     13  02bf				  -	      IF	$10 = $40
     14  02bf				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02bf					      ENDIF
     16  02bf				  -	      IF	$10 = $50
     17  02bf				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02bf					      ENDIF
     19  02bf				  -	      IF	$10 = $60
     20  02bf				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02bf					      ENDIF
     22  02bf				  -	      IF	$10 = $70
     23  02bf				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02bf					      ENDIF
     25  02bf				  -	      IF	$10 = $80
     26  02bf				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02bf					      ENDIF
     28  02bf				  -	      IF	$10 = $90
     29  02bf				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02bf					      ENDIF
     31  02bf				  -	      IF	$10 = $A0
     32  02bf				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02bf					      ENDIF
     34  02bf				  -	      IF	$10 = $B0
     35  02bf				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02bf					      ENDIF
     37  02bf				  -	      IF	$10 = $C0
     38  02bf				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02bf					      ENDIF
     40  02bf				  -	      IF	$10 = $D0
     41  02bf				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02bf					      ENDIF
     43  02bf				  -	      IF	$10 = $E0
     44  02bf				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02bf					      ENDIF
     46  02bf				  -	      IF	$10 = $F0
     47  02bf				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02bf					      ENDIF
      0  02bf					      NTSC_TO_PAL	$F0, $8-2+PALETTE_INTENSITY_ADJUST
      1  02bf				  -	      IF	$F0 = 0
      2  02bf				  -	      .byte	$F0+$8-2+PALETTE_INTENSITY_ADJUST
      3  02bf					      ENDIF
      4  02bf				  -	      IF	$F0 = $10
      5  02bf				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  02bf					      ENDIF
      7  02bf				  -	      IF	$F0 = $20
      8  02bf				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  02bf					      ENDIF
     10  02bf				  -	      IF	$F0 = $30
     11  02bf				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  02bf					      ENDIF
     13  02bf				  -	      IF	$F0 = $40
     14  02bf				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  02bf					      ENDIF
     16  02bf				  -	      IF	$F0 = $50
     17  02bf				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  02bf					      ENDIF
     19  02bf				  -	      IF	$F0 = $60
     20  02bf				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  02bf					      ENDIF
     22  02bf				  -	      IF	$F0 = $70
     23  02bf				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  02bf					      ENDIF
     25  02bf				  -	      IF	$F0 = $80
     26  02bf				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  02bf					      ENDIF
     28  02bf				  -	      IF	$F0 = $90
     29  02bf				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  02bf					      ENDIF
     31  02bf				  -	      IF	$F0 = $A0
     32  02bf				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  02bf					      ENDIF
     34  02bf				  -	      IF	$F0 = $B0
     35  02bf				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  02bf					      ENDIF
     37  02bf				  -	      IF	$F0 = $C0
     38  02bf				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  02bf					      ENDIF
     40  02bf				  -	      IF	$F0 = $D0
     41  02bf				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  02bf					      ENDIF
     43  02bf				  -	      IF	$F0 = $E0
     44  02bf				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  02bf					      ENDIF
     46  02bf					      IF	$F0 = $F0
     47  02bf		       46		      .byte.b	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  02c0					      ENDIF
      0  02c0					      NTSC_TO_PAL	$60, $A-2+PALETTE_INTENSITY_ADJUST
      1  02c0				  -	      IF	$60 = 0
      2  02c0				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
      3  02c0					      ENDIF
      4  02c0				  -	      IF	$60 = $10
      5  02c0				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02c0					      ENDIF
      7  02c0				  -	      IF	$60 = $20
      8  02c0				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02c0					      ENDIF
     10  02c0				  -	      IF	$60 = $30
     11  02c0				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02c0					      ENDIF
     13  02c0				  -	      IF	$60 = $40
     14  02c0				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02c0					      ENDIF
     16  02c0				  -	      IF	$60 = $50
     17  02c0				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02c0					      ENDIF
     19  02c0					      IF	$60 = $60
     20  02c0		       c8		      .byte.b	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02c1					      ENDIF
     22  02c1				  -	      IF	$60 = $70
     23  02c1				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02c1					      ENDIF
     25  02c1				  -	      IF	$60 = $80
     26  02c1				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02c1					      ENDIF
     28  02c1				  -	      IF	$60 = $90
     29  02c1				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02c1					      ENDIF
     31  02c1				  -	      IF	$60 = $A0
     32  02c1				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02c1					      ENDIF
     34  02c1				  -	      IF	$60 = $B0
     35  02c1				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02c1					      ENDIF
     37  02c1				  -	      IF	$60 = $C0
     38  02c1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02c1					      ENDIF
     40  02c1				  -	      IF	$60 = $D0
     41  02c1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02c1					      ENDIF
     43  02c1				  -	      IF	$60 = $E0
     44  02c1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02c1					      ENDIF
     46  02c1				  -	      IF	$60 = $F0
     47  02c1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02c1					      ENDIF
      0  02c1					      NTSC_TO_PAL	$50, $4-2+PALETTE_INTENSITY_ADJUST
      1  02c1				  -	      IF	$50 = 0
      2  02c1				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
      3  02c1					      ENDIF
      4  02c1				  -	      IF	$50 = $10
      5  02c1				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
      6  02c1					      ENDIF
      7  02c1				  -	      IF	$50 = $20
      8  02c1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      9  02c1					      ENDIF
     10  02c1				  -	      IF	$50 = $30
     11  02c1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     12  02c1					      ENDIF
     13  02c1				  -	      IF	$50 = $40
     14  02c1				  -	      .byte	$60+$4-2+PALETTE_INTENSITY_ADJUST
     15  02c1					      ENDIF
     16  02c1					      IF	$50 = $50
     17  02c1		       82		      .byte.b	$80+$4-2+PALETTE_INTENSITY_ADJUST
     18  02c2					      ENDIF
     19  02c2				  -	      IF	$50 = $60
     20  02c2				  -	      .byte	$C0+$4-2+PALETTE_INTENSITY_ADJUST
     21  02c2					      ENDIF
     22  02c2				  -	      IF	$50 = $70
     23  02c2				  -	      .byte	$D0+$4-2+PALETTE_INTENSITY_ADJUST
     24  02c2					      ENDIF
     25  02c2				  -	      IF	$50 = $80
     26  02c2				  -	      .byte	$B0+$4-2+PALETTE_INTENSITY_ADJUST
     27  02c2					      ENDIF
     28  02c2				  -	      IF	$50 = $90
     29  02c2				  -	      .byte	$90+$4-2+PALETTE_INTENSITY_ADJUST
     30  02c2					      ENDIF
     31  02c2				  -	      IF	$50 = $A0
     32  02c2				  -	      .byte	$70+$4-2+PALETTE_INTENSITY_ADJUST
     33  02c2					      ENDIF
     34  02c2				  -	      IF	$50 = $B0
     35  02c2				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
     36  02c2					      ENDIF
     37  02c2				  -	      IF	$50 = $C0
     38  02c2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     39  02c2					      ENDIF
     40  02c2				  -	      IF	$50 = $D0
     41  02c2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     42  02c2					      ENDIF
     43  02c2				  -	      IF	$50 = $E0
     44  02c2				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
     45  02c2					      ENDIF
     46  02c2				  -	      IF	$50 = $F0
     47  02c2				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     48  02c2					      ENDIF
      0  02c2					      NTSC_TO_PAL	$70, 6-2+PALETTE_INTENSITY_ADJUST
      1  02c2				  -	      IF	$70 = 0
      2  02c2				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
      3  02c2					      ENDIF
      4  02c2				  -	      IF	$70 = $10
      5  02c2				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02c2					      ENDIF
      7  02c2				  -	      IF	$70 = $20
      8  02c2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02c2					      ENDIF
     10  02c2				  -	      IF	$70 = $30
     11  02c2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02c2					      ENDIF
     13  02c2				  -	      IF	$70 = $40
     14  02c2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02c2					      ENDIF
     16  02c2				  -	      IF	$70 = $50
     17  02c2				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02c2					      ENDIF
     19  02c2				  -	      IF	$70 = $60
     20  02c2				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02c2					      ENDIF
     22  02c2					      IF	$70 = $70
     23  02c2		       d4		      .byte.b	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02c3					      ENDIF
     25  02c3				  -	      IF	$70 = $80
     26  02c3				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02c3					      ENDIF
     28  02c3				  -	      IF	$70 = $90
     29  02c3				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02c3					      ENDIF
     31  02c3				  -	      IF	$70 = $A0
     32  02c3				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02c3					      ENDIF
     34  02c3				  -	      IF	$70 = $B0
     35  02c3				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02c3					      ENDIF
     37  02c3				  -	      IF	$70 = $C0
     38  02c3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02c3					      ENDIF
     40  02c3				  -	      IF	$70 = $D0
     41  02c3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02c3					      ENDIF
     43  02c3				  -	      IF	$70 = $E0
     44  02c3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02c3					      ENDIF
     46  02c3				  -	      IF	$70 = $F0
     47  02c3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02c3					      ENDIF
      0  02c3					      NTSC_TO_PAL	$40, 6-2+PALETTE_INTENSITY_ADJUST
      1  02c3				  -	      IF	$40 = 0
      2  02c3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      3  02c3					      ENDIF
      4  02c3				  -	      IF	$40 = $10
      5  02c3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02c3					      ENDIF
      7  02c3				  -	      IF	$40 = $20
      8  02c3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02c3					      ENDIF
     10  02c3				  -	      IF	$40 = $30
     11  02c3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02c3					      ENDIF
     13  02c3					      IF	$40 = $40
     14  02c3		       64		      .byte.b	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02c4					      ENDIF
     16  02c4				  -	      IF	$40 = $50
     17  02c4				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02c4					      ENDIF
     19  02c4				  -	      IF	$40 = $60
     20  02c4				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02c4					      ENDIF
     22  02c4				  -	      IF	$40 = $70
     23  02c4				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02c4					      ENDIF
     25  02c4				  -	      IF	$40 = $80
     26  02c4				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02c4					      ENDIF
     28  02c4				  -	      IF	$40 = $90
     29  02c4				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02c4					      ENDIF
     31  02c4				  -	      IF	$40 = $A0
     32  02c4				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02c4					      ENDIF
     34  02c4				  -	      IF	$40 = $B0
     35  02c4				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02c4					      ENDIF
     37  02c4				  -	      IF	$40 = $C0
     38  02c4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02c4					      ENDIF
     40  02c4				  -	      IF	$40 = $D0
     41  02c4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02c4					      ENDIF
     43  02c4				  -	      IF	$40 = $E0
     44  02c4				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02c4					      ENDIF
     46  02c4				  -	      IF	$40 = $F0
     47  02c4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02c4					      ENDIF
     19  02c4		       00		      .byte.b	0
      0  02c5					      COLOUR_GROUP	$40,$6, $30,$8, $00,$A, $90,$4, $A0,6, $20,6	; 2
      1  02c5
      2  02c5		       00		      .byte.b	0
      3  02c6		       44		      .byte.b	$40+$6-2+PALETTE_INTENSITY_ADJUST
      4  02c7		       36		      .byte.b	$30+$8-2+PALETTE_INTENSITY_ADJUST
      5  02c8		       08		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      6  02c9		       92		      .byte.b	$90+$4-2+PALETTE_INTENSITY_ADJUST
      7  02ca		       a4		      .byte.b	$A0+6-2+PALETTE_INTENSITY_ADJUST
      8  02cb		       24		      .byte.b	$20+6-2+PALETTE_INTENSITY_ADJUST
      9  02cc		       00		      .byte.b	0
     10  02cd
     11  02cd
     12  02cd		       00		      .byte.b	0
      0  02ce					      NTSC_TO_PAL	$40, $6-2+PALETTE_INTENSITY_ADJUST
      1  02ce				  -	      IF	$40 = 0
      2  02ce				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
      3  02ce					      ENDIF
      4  02ce				  -	      IF	$40 = $10
      5  02ce				  -	      .byte	$20+$6-2+PALETTE_INTENSITY_ADJUST
      6  02ce					      ENDIF
      7  02ce				  -	      IF	$40 = $20
      8  02ce				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
      9  02ce					      ENDIF
     10  02ce				  -	      IF	$40 = $30
     11  02ce				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
     12  02ce					      ENDIF
     13  02ce					      IF	$40 = $40
     14  02ce		       64		      .byte.b	$60+$6-2+PALETTE_INTENSITY_ADJUST
     15  02cf					      ENDIF
     16  02cf				  -	      IF	$40 = $50
     17  02cf				  -	      .byte	$80+$6-2+PALETTE_INTENSITY_ADJUST
     18  02cf					      ENDIF
     19  02cf				  -	      IF	$40 = $60
     20  02cf				  -	      .byte	$C0+$6-2+PALETTE_INTENSITY_ADJUST
     21  02cf					      ENDIF
     22  02cf				  -	      IF	$40 = $70
     23  02cf				  -	      .byte	$D0+$6-2+PALETTE_INTENSITY_ADJUST
     24  02cf					      ENDIF
     25  02cf				  -	      IF	$40 = $80
     26  02cf				  -	      .byte	$B0+$6-2+PALETTE_INTENSITY_ADJUST
     27  02cf					      ENDIF
     28  02cf				  -	      IF	$40 = $90
     29  02cf				  -	      .byte	$90+$6-2+PALETTE_INTENSITY_ADJUST
     30  02cf					      ENDIF
     31  02cf				  -	      IF	$40 = $A0
     32  02cf				  -	      .byte	$70+$6-2+PALETTE_INTENSITY_ADJUST
     33  02cf					      ENDIF
     34  02cf				  -	      IF	$40 = $B0
     35  02cf				  -	      .byte	$50+$6-2+PALETTE_INTENSITY_ADJUST
     36  02cf					      ENDIF
     37  02cf				  -	      IF	$40 = $C0
     38  02cf				  -	      .byte	$30+$6-2+PALETTE_INTENSITY_ADJUST
     39  02cf					      ENDIF
     40  02cf				  -	      IF	$40 = $D0
     41  02cf				  -	      .byte	$30+$6-2+PALETTE_INTENSITY_ADJUST
     42  02cf					      ENDIF
     43  02cf				  -	      IF	$40 = $E0
     44  02cf				  -	      .byte	$20+$6-2+PALETTE_INTENSITY_ADJUST
     45  02cf					      ENDIF
     46  02cf				  -	      IF	$40 = $F0
     47  02cf				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
     48  02cf					      ENDIF
      0  02cf					      NTSC_TO_PAL	$30, $8-2+PALETTE_INTENSITY_ADJUST
      1  02cf				  -	      IF	$30 = 0
      2  02cf				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
      3  02cf					      ENDIF
      4  02cf				  -	      IF	$30 = $10
      5  02cf				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  02cf					      ENDIF
      7  02cf				  -	      IF	$30 = $20
      8  02cf				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  02cf					      ENDIF
     10  02cf					      IF	$30 = $30
     11  02cf		       46		      .byte.b	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  02d0					      ENDIF
     13  02d0				  -	      IF	$30 = $40
     14  02d0				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  02d0					      ENDIF
     16  02d0				  -	      IF	$30 = $50
     17  02d0				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  02d0					      ENDIF
     19  02d0				  -	      IF	$30 = $60
     20  02d0				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  02d0					      ENDIF
     22  02d0				  -	      IF	$30 = $70
     23  02d0				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  02d0					      ENDIF
     25  02d0				  -	      IF	$30 = $80
     26  02d0				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  02d0					      ENDIF
     28  02d0				  -	      IF	$30 = $90
     29  02d0				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  02d0					      ENDIF
     31  02d0				  -	      IF	$30 = $A0
     32  02d0				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  02d0					      ENDIF
     34  02d0				  -	      IF	$30 = $B0
     35  02d0				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  02d0					      ENDIF
     37  02d0				  -	      IF	$30 = $C0
     38  02d0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  02d0					      ENDIF
     40  02d0				  -	      IF	$30 = $D0
     41  02d0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  02d0					      ENDIF
     43  02d0				  -	      IF	$30 = $E0
     44  02d0				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  02d0					      ENDIF
     46  02d0				  -	      IF	$30 = $F0
     47  02d0				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  02d0					      ENDIF
      0  02d0					      NTSC_TO_PAL	$00, $A-2+PALETTE_INTENSITY_ADJUST
      1  02d0					      IF	$00 = 0
      2  02d0		       08		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      3  02d1					      ENDIF
      4  02d1				  -	      IF	$00 = $10
      5  02d1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02d1					      ENDIF
      7  02d1				  -	      IF	$00 = $20
      8  02d1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02d1					      ENDIF
     10  02d1				  -	      IF	$00 = $30
     11  02d1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02d1					      ENDIF
     13  02d1				  -	      IF	$00 = $40
     14  02d1				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02d1					      ENDIF
     16  02d1				  -	      IF	$00 = $50
     17  02d1				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02d1					      ENDIF
     19  02d1				  -	      IF	$00 = $60
     20  02d1				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02d1					      ENDIF
     22  02d1				  -	      IF	$00 = $70
     23  02d1				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02d1					      ENDIF
     25  02d1				  -	      IF	$00 = $80
     26  02d1				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02d1					      ENDIF
     28  02d1				  -	      IF	$00 = $90
     29  02d1				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02d1					      ENDIF
     31  02d1				  -	      IF	$00 = $A0
     32  02d1				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02d1					      ENDIF
     34  02d1				  -	      IF	$00 = $B0
     35  02d1				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02d1					      ENDIF
     37  02d1				  -	      IF	$00 = $C0
     38  02d1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02d1					      ENDIF
     40  02d1				  -	      IF	$00 = $D0
     41  02d1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02d1					      ENDIF
     43  02d1				  -	      IF	$00 = $E0
     44  02d1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02d1					      ENDIF
     46  02d1				  -	      IF	$00 = $F0
     47  02d1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02d1					      ENDIF
      0  02d1					      NTSC_TO_PAL	$90, $4-2+PALETTE_INTENSITY_ADJUST
      1  02d1				  -	      IF	$90 = 0
      2  02d1				  -	      .byte	$90+$4-2+PALETTE_INTENSITY_ADJUST
      3  02d1					      ENDIF
      4  02d1				  -	      IF	$90 = $10
      5  02d1				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
      6  02d1					      ENDIF
      7  02d1				  -	      IF	$90 = $20
      8  02d1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      9  02d1					      ENDIF
     10  02d1				  -	      IF	$90 = $30
     11  02d1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     12  02d1					      ENDIF
     13  02d1				  -	      IF	$90 = $40
     14  02d1				  -	      .byte	$60+$4-2+PALETTE_INTENSITY_ADJUST
     15  02d1					      ENDIF
     16  02d1				  -	      IF	$90 = $50
     17  02d1				  -	      .byte	$80+$4-2+PALETTE_INTENSITY_ADJUST
     18  02d1					      ENDIF
     19  02d1				  -	      IF	$90 = $60
     20  02d1				  -	      .byte	$C0+$4-2+PALETTE_INTENSITY_ADJUST
     21  02d1					      ENDIF
     22  02d1				  -	      IF	$90 = $70
     23  02d1				  -	      .byte	$D0+$4-2+PALETTE_INTENSITY_ADJUST
     24  02d1					      ENDIF
     25  02d1				  -	      IF	$90 = $80
     26  02d1				  -	      .byte	$B0+$4-2+PALETTE_INTENSITY_ADJUST
     27  02d1					      ENDIF
     28  02d1					      IF	$90 = $90
     29  02d1		       92		      .byte.b	$90+$4-2+PALETTE_INTENSITY_ADJUST
     30  02d2					      ENDIF
     31  02d2				  -	      IF	$90 = $A0
     32  02d2				  -	      .byte	$70+$4-2+PALETTE_INTENSITY_ADJUST
     33  02d2					      ENDIF
     34  02d2				  -	      IF	$90 = $B0
     35  02d2				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
     36  02d2					      ENDIF
     37  02d2				  -	      IF	$90 = $C0
     38  02d2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     39  02d2					      ENDIF
     40  02d2				  -	      IF	$90 = $D0
     41  02d2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     42  02d2					      ENDIF
     43  02d2				  -	      IF	$90 = $E0
     44  02d2				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
     45  02d2					      ENDIF
     46  02d2				  -	      IF	$90 = $F0
     47  02d2				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     48  02d2					      ENDIF
      0  02d2					      NTSC_TO_PAL	$A0, 6-2+PALETTE_INTENSITY_ADJUST
      1  02d2				  -	      IF	$A0 = 0
      2  02d2				  -	      .byte	$A0+6-2+PALETTE_INTENSITY_ADJUST
      3  02d2					      ENDIF
      4  02d2				  -	      IF	$A0 = $10
      5  02d2				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02d2					      ENDIF
      7  02d2				  -	      IF	$A0 = $20
      8  02d2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02d2					      ENDIF
     10  02d2				  -	      IF	$A0 = $30
     11  02d2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02d2					      ENDIF
     13  02d2				  -	      IF	$A0 = $40
     14  02d2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02d2					      ENDIF
     16  02d2				  -	      IF	$A0 = $50
     17  02d2				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02d2					      ENDIF
     19  02d2				  -	      IF	$A0 = $60
     20  02d2				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02d2					      ENDIF
     22  02d2				  -	      IF	$A0 = $70
     23  02d2				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02d2					      ENDIF
     25  02d2				  -	      IF	$A0 = $80
     26  02d2				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02d2					      ENDIF
     28  02d2				  -	      IF	$A0 = $90
     29  02d2				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02d2					      ENDIF
     31  02d2					      IF	$A0 = $A0
     32  02d2		       74		      .byte.b	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02d3					      ENDIF
     34  02d3				  -	      IF	$A0 = $B0
     35  02d3				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02d3					      ENDIF
     37  02d3				  -	      IF	$A0 = $C0
     38  02d3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02d3					      ENDIF
     40  02d3				  -	      IF	$A0 = $D0
     41  02d3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02d3					      ENDIF
     43  02d3				  -	      IF	$A0 = $E0
     44  02d3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02d3					      ENDIF
     46  02d3				  -	      IF	$A0 = $F0
     47  02d3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02d3					      ENDIF
      0  02d3					      NTSC_TO_PAL	$20, 6-2+PALETTE_INTENSITY_ADJUST
      1  02d3				  -	      IF	$20 = 0
      2  02d3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      3  02d3					      ENDIF
      4  02d3				  -	      IF	$20 = $10
      5  02d3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02d3					      ENDIF
      7  02d3					      IF	$20 = $20
      8  02d3		       44		      .byte.b	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02d4					      ENDIF
     10  02d4				  -	      IF	$20 = $30
     11  02d4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02d4					      ENDIF
     13  02d4				  -	      IF	$20 = $40
     14  02d4				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02d4					      ENDIF
     16  02d4				  -	      IF	$20 = $50
     17  02d4				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02d4					      ENDIF
     19  02d4				  -	      IF	$20 = $60
     20  02d4				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02d4					      ENDIF
     22  02d4				  -	      IF	$20 = $70
     23  02d4				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02d4					      ENDIF
     25  02d4				  -	      IF	$20 = $80
     26  02d4				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02d4					      ENDIF
     28  02d4				  -	      IF	$20 = $90
     29  02d4				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02d4					      ENDIF
     31  02d4				  -	      IF	$20 = $A0
     32  02d4				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02d4					      ENDIF
     34  02d4				  -	      IF	$20 = $B0
     35  02d4				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02d4					      ENDIF
     37  02d4				  -	      IF	$20 = $C0
     38  02d4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02d4					      ENDIF
     40  02d4				  -	      IF	$20 = $D0
     41  02d4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02d4					      ENDIF
     43  02d4				  -	      IF	$20 = $E0
     44  02d4				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02d4					      ENDIF
     46  02d4				  -	      IF	$20 = $F0
     47  02d4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02d4					      ENDIF
     19  02d4		       00		      .byte.b	0
      0  02d5					      COLOUR_GROUP	$30,$A, $50,$8, $00,$A, $40,$4, $60,6, $E0,8	; 3
      1  02d5
      2  02d5		       00		      .byte.b	0
      3  02d6		       38		      .byte.b	$30+$A-2+PALETTE_INTENSITY_ADJUST
      4  02d7		       56		      .byte.b	$50+$8-2+PALETTE_INTENSITY_ADJUST
      5  02d8		       08		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      6  02d9		       42		      .byte.b	$40+$4-2+PALETTE_INTENSITY_ADJUST
      7  02da		       64		      .byte.b	$60+6-2+PALETTE_INTENSITY_ADJUST
      8  02db		       e6		      .byte.b	$E0+8-2+PALETTE_INTENSITY_ADJUST
      9  02dc		       00		      .byte.b	0
     10  02dd
     11  02dd
     12  02dd		       00		      .byte.b	0
      0  02de					      NTSC_TO_PAL	$30, $A-2+PALETTE_INTENSITY_ADJUST
      1  02de				  -	      IF	$30 = 0
      2  02de				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
      3  02de					      ENDIF
      4  02de				  -	      IF	$30 = $10
      5  02de				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02de					      ENDIF
      7  02de				  -	      IF	$30 = $20
      8  02de				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02de					      ENDIF
     10  02de					      IF	$30 = $30
     11  02de		       48		      .byte.b	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02df					      ENDIF
     13  02df				  -	      IF	$30 = $40
     14  02df				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02df					      ENDIF
     16  02df				  -	      IF	$30 = $50
     17  02df				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02df					      ENDIF
     19  02df				  -	      IF	$30 = $60
     20  02df				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02df					      ENDIF
     22  02df				  -	      IF	$30 = $70
     23  02df				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02df					      ENDIF
     25  02df				  -	      IF	$30 = $80
     26  02df				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02df					      ENDIF
     28  02df				  -	      IF	$30 = $90
     29  02df				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02df					      ENDIF
     31  02df				  -	      IF	$30 = $A0
     32  02df				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02df					      ENDIF
     34  02df				  -	      IF	$30 = $B0
     35  02df				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02df					      ENDIF
     37  02df				  -	      IF	$30 = $C0
     38  02df				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02df					      ENDIF
     40  02df				  -	      IF	$30 = $D0
     41  02df				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02df					      ENDIF
     43  02df				  -	      IF	$30 = $E0
     44  02df				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02df					      ENDIF
     46  02df				  -	      IF	$30 = $F0
     47  02df				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02df					      ENDIF
      0  02df					      NTSC_TO_PAL	$50, $8-2+PALETTE_INTENSITY_ADJUST
      1  02df				  -	      IF	$50 = 0
      2  02df				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
      3  02df					      ENDIF
      4  02df				  -	      IF	$50 = $10
      5  02df				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  02df					      ENDIF
      7  02df				  -	      IF	$50 = $20
      8  02df				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  02df					      ENDIF
     10  02df				  -	      IF	$50 = $30
     11  02df				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  02df					      ENDIF
     13  02df				  -	      IF	$50 = $40
     14  02df				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  02df					      ENDIF
     16  02df					      IF	$50 = $50
     17  02df		       86		      .byte.b	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  02e0					      ENDIF
     19  02e0				  -	      IF	$50 = $60
     20  02e0				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  02e0					      ENDIF
     22  02e0				  -	      IF	$50 = $70
     23  02e0				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  02e0					      ENDIF
     25  02e0				  -	      IF	$50 = $80
     26  02e0				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  02e0					      ENDIF
     28  02e0				  -	      IF	$50 = $90
     29  02e0				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  02e0					      ENDIF
     31  02e0				  -	      IF	$50 = $A0
     32  02e0				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  02e0					      ENDIF
     34  02e0				  -	      IF	$50 = $B0
     35  02e0				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  02e0					      ENDIF
     37  02e0				  -	      IF	$50 = $C0
     38  02e0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  02e0					      ENDIF
     40  02e0				  -	      IF	$50 = $D0
     41  02e0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  02e0					      ENDIF
     43  02e0				  -	      IF	$50 = $E0
     44  02e0				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  02e0					      ENDIF
     46  02e0				  -	      IF	$50 = $F0
     47  02e0				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  02e0					      ENDIF
      0  02e0					      NTSC_TO_PAL	$00, $A-2+PALETTE_INTENSITY_ADJUST
      1  02e0					      IF	$00 = 0
      2  02e0		       08		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      3  02e1					      ENDIF
      4  02e1				  -	      IF	$00 = $10
      5  02e1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  02e1					      ENDIF
      7  02e1				  -	      IF	$00 = $20
      8  02e1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  02e1					      ENDIF
     10  02e1				  -	      IF	$00 = $30
     11  02e1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  02e1					      ENDIF
     13  02e1				  -	      IF	$00 = $40
     14  02e1				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  02e1					      ENDIF
     16  02e1				  -	      IF	$00 = $50
     17  02e1				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  02e1					      ENDIF
     19  02e1				  -	      IF	$00 = $60
     20  02e1				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  02e1					      ENDIF
     22  02e1				  -	      IF	$00 = $70
     23  02e1				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  02e1					      ENDIF
     25  02e1				  -	      IF	$00 = $80
     26  02e1				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  02e1					      ENDIF
     28  02e1				  -	      IF	$00 = $90
     29  02e1				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  02e1					      ENDIF
     31  02e1				  -	      IF	$00 = $A0
     32  02e1				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  02e1					      ENDIF
     34  02e1				  -	      IF	$00 = $B0
     35  02e1				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  02e1					      ENDIF
     37  02e1				  -	      IF	$00 = $C0
     38  02e1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  02e1					      ENDIF
     40  02e1				  -	      IF	$00 = $D0
     41  02e1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  02e1					      ENDIF
     43  02e1				  -	      IF	$00 = $E0
     44  02e1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  02e1					      ENDIF
     46  02e1				  -	      IF	$00 = $F0
     47  02e1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  02e1					      ENDIF
      0  02e1					      NTSC_TO_PAL	$40, $4-2+PALETTE_INTENSITY_ADJUST
      1  02e1				  -	      IF	$40 = 0
      2  02e1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      3  02e1					      ENDIF
      4  02e1				  -	      IF	$40 = $10
      5  02e1				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
      6  02e1					      ENDIF
      7  02e1				  -	      IF	$40 = $20
      8  02e1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      9  02e1					      ENDIF
     10  02e1				  -	      IF	$40 = $30
     11  02e1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     12  02e1					      ENDIF
     13  02e1					      IF	$40 = $40
     14  02e1		       62		      .byte.b	$60+$4-2+PALETTE_INTENSITY_ADJUST
     15  02e2					      ENDIF
     16  02e2				  -	      IF	$40 = $50
     17  02e2				  -	      .byte	$80+$4-2+PALETTE_INTENSITY_ADJUST
     18  02e2					      ENDIF
     19  02e2				  -	      IF	$40 = $60
     20  02e2				  -	      .byte	$C0+$4-2+PALETTE_INTENSITY_ADJUST
     21  02e2					      ENDIF
     22  02e2				  -	      IF	$40 = $70
     23  02e2				  -	      .byte	$D0+$4-2+PALETTE_INTENSITY_ADJUST
     24  02e2					      ENDIF
     25  02e2				  -	      IF	$40 = $80
     26  02e2				  -	      .byte	$B0+$4-2+PALETTE_INTENSITY_ADJUST
     27  02e2					      ENDIF
     28  02e2				  -	      IF	$40 = $90
     29  02e2				  -	      .byte	$90+$4-2+PALETTE_INTENSITY_ADJUST
     30  02e2					      ENDIF
     31  02e2				  -	      IF	$40 = $A0
     32  02e2				  -	      .byte	$70+$4-2+PALETTE_INTENSITY_ADJUST
     33  02e2					      ENDIF
     34  02e2				  -	      IF	$40 = $B0
     35  02e2				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
     36  02e2					      ENDIF
     37  02e2				  -	      IF	$40 = $C0
     38  02e2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     39  02e2					      ENDIF
     40  02e2				  -	      IF	$40 = $D0
     41  02e2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     42  02e2					      ENDIF
     43  02e2				  -	      IF	$40 = $E0
     44  02e2				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
     45  02e2					      ENDIF
     46  02e2				  -	      IF	$40 = $F0
     47  02e2				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     48  02e2					      ENDIF
      0  02e2					      NTSC_TO_PAL	$60, 6-2+PALETTE_INTENSITY_ADJUST
      1  02e2				  -	      IF	$60 = 0
      2  02e2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
      3  02e2					      ENDIF
      4  02e2				  -	      IF	$60 = $10
      5  02e2				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  02e2					      ENDIF
      7  02e2				  -	      IF	$60 = $20
      8  02e2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  02e2					      ENDIF
     10  02e2				  -	      IF	$60 = $30
     11  02e2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  02e2					      ENDIF
     13  02e2				  -	      IF	$60 = $40
     14  02e2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  02e2					      ENDIF
     16  02e2				  -	      IF	$60 = $50
     17  02e2				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  02e2					      ENDIF
     19  02e2					      IF	$60 = $60
     20  02e2		       c4		      .byte.b	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  02e3					      ENDIF
     22  02e3				  -	      IF	$60 = $70
     23  02e3				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  02e3					      ENDIF
     25  02e3				  -	      IF	$60 = $80
     26  02e3				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  02e3					      ENDIF
     28  02e3				  -	      IF	$60 = $90
     29  02e3				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  02e3					      ENDIF
     31  02e3				  -	      IF	$60 = $A0
     32  02e3				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  02e3					      ENDIF
     34  02e3				  -	      IF	$60 = $B0
     35  02e3				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  02e3					      ENDIF
     37  02e3				  -	      IF	$60 = $C0
     38  02e3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  02e3					      ENDIF
     40  02e3				  -	      IF	$60 = $D0
     41  02e3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  02e3					      ENDIF
     43  02e3				  -	      IF	$60 = $E0
     44  02e3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  02e3					      ENDIF
     46  02e3				  -	      IF	$60 = $F0
     47  02e3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  02e3					      ENDIF
      0  02e3					      NTSC_TO_PAL	$E0, 8-2+PALETTE_INTENSITY_ADJUST
      1  02e3				  -	      IF	$E0 = 0
      2  02e3				  -	      .byte	$E0+8-2+PALETTE_INTENSITY_ADJUST
      3  02e3					      ENDIF
      4  02e3				  -	      IF	$E0 = $10
      5  02e3				  -	      .byte	$20+8-2+PALETTE_INTENSITY_ADJUST
      6  02e3					      ENDIF
      7  02e3				  -	      IF	$E0 = $20
      8  02e3				  -	      .byte	$40+8-2+PALETTE_INTENSITY_ADJUST
      9  02e3					      ENDIF
     10  02e3				  -	      IF	$E0 = $30
     11  02e3				  -	      .byte	$40+8-2+PALETTE_INTENSITY_ADJUST
     12  02e3					      ENDIF
     13  02e3				  -	      IF	$E0 = $40
     14  02e3				  -	      .byte	$60+8-2+PALETTE_INTENSITY_ADJUST
     15  02e3					      ENDIF
     16  02e3				  -	      IF	$E0 = $50
     17  02e3				  -	      .byte	$80+8-2+PALETTE_INTENSITY_ADJUST
     18  02e3					      ENDIF
     19  02e3				  -	      IF	$E0 = $60
     20  02e3				  -	      .byte	$C0+8-2+PALETTE_INTENSITY_ADJUST
     21  02e3					      ENDIF
     22  02e3				  -	      IF	$E0 = $70
     23  02e3				  -	      .byte	$D0+8-2+PALETTE_INTENSITY_ADJUST
     24  02e3					      ENDIF
     25  02e3				  -	      IF	$E0 = $80
     26  02e3				  -	      .byte	$B0+8-2+PALETTE_INTENSITY_ADJUST
     27  02e3					      ENDIF
     28  02e3				  -	      IF	$E0 = $90
     29  02e3				  -	      .byte	$90+8-2+PALETTE_INTENSITY_ADJUST
     30  02e3					      ENDIF
     31  02e3				  -	      IF	$E0 = $A0
     32  02e3				  -	      .byte	$70+8-2+PALETTE_INTENSITY_ADJUST
     33  02e3					      ENDIF
     34  02e3				  -	      IF	$E0 = $B0
     35  02e3				  -	      .byte	$50+8-2+PALETTE_INTENSITY_ADJUST
     36  02e3					      ENDIF
     37  02e3				  -	      IF	$E0 = $C0
     38  02e3				  -	      .byte	$30+8-2+PALETTE_INTENSITY_ADJUST
     39  02e3					      ENDIF
     40  02e3				  -	      IF	$E0 = $D0
     41  02e3				  -	      .byte	$30+8-2+PALETTE_INTENSITY_ADJUST
     42  02e3					      ENDIF
     43  02e3					      IF	$E0 = $E0
     44  02e3		       26		      .byte.b	$20+8-2+PALETTE_INTENSITY_ADJUST
     45  02e4					      ENDIF
     46  02e4				  -	      IF	$E0 = $F0
     47  02e4				  -	      .byte	$40+8-2+PALETTE_INTENSITY_ADJUST
     48  02e4					      ENDIF
     19  02e4		       00		      .byte.b	0
    573  02e5
    574  02e5							;------------------------------------------------------------------------------
    575  02e5
    576  02e5							;ECHO "TOTAL ROW-BANK CODE REQUIREMENT = ", * - BANK_START
    577  02e5
    578  02e5							;------------------------------------------------------------------------------
    579  02e5
    580  02e5
    581  02e5
    582  02e5
    583  02e5				   OBJTYPE    SET	0
    584  02e5					      MAC	define_character
    585  02e5				   CHARACTER_{1} =	OBJTYPE
    586  02e5				   OBJTYPE    .SET	OBJTYPE + 1
    587  02e5					      ENDM
    588  02e5
    589  02e5							; Modifications to character #/order must also ensure the following are correct...
    590  02e5							;   CharacterDataVecLO/HI	   in this file
    591  02e5							;   MoveVecLO/HI		   in BANK_INITBANK
    592  02e5							;   CharReplacement		   in BANK_ROM_SHADOW_DRAWBUFFERS
    593  02e5
      0  02e5					      DEFINE_CHARACTER	BLANK
      1  02e5		       00 00	   CHARACTER_BLANK =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	SOIL
      1  02e5		       00 01	   CHARACTER_SOIL =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	BOX
      1  02e5		       00 02	   CHARACTER_BOX =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	TARGET
      1  02e5		       00 03	   CHARACTER_TARGET =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	TARGET2
      1  02e5		       00 04	   CHARACTER_TARGET2 =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	MANOCCUPIED
      1  02e5		       00 05	   CHARACTER_MANOCCUPIED =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	STEEL
      1  02e5		       00 06	   CHARACTER_STEEL =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	WALL
      1  02e5		       00 07	   CHARACTER_WALL =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	BOX_ON_TARGET
      1  02e5		       00 08	   CHARACTER_BOX_ON_TARGET =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
    603  02e5							;DEFINE_CHARACTER BOX_ON_TARGET2
      0  02e5					      DEFINE_CHARACTER	NOGO
      1  02e5		       00 09	   CHARACTER_NOGO =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	TARGET1
      1  02e5		       00 0a	   CHARACTER_TARGET1 =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	TARGET3
      1  02e5		       00 0b	   CHARACTER_TARGET3 =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	TARGET5
      1  02e5		       00 0c	   CHARACTER_TARGET5 =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
      0  02e5					      DEFINE_CHARACTER	TARGET7
      1  02e5		       00 0d	   CHARACTER_TARGET7 =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
    609  02e5
    610  02e5				  -	      if	DIGITS
    611  02e5				  -	      DEFINE_CHARACTER	0
    612  02e5				  -	      DEFINE_CHARACTER	1
    613  02e5				  -	      DEFINE_CHARACTER	2
    614  02e5				  -	      DEFINE_CHARACTER	3
    615  02e5				  -	      DEFINE_CHARACTER	4
    616  02e5				  -	      DEFINE_CHARACTER	5
    617  02e5				  -	      DEFINE_CHARACTER	6
    618  02e5				  -	      DEFINE_CHARACTER	7
    619  02e5				  -	      DEFINE_CHARACTER	8
    620  02e5				  -	      DEFINE_CHARACTER	9
    621  02e5					      endif
    622  02e5
      0  02e5					      DEFINE_CHARACTER	MAXIMUM
      1  02e5		       00 0e	   CHARACTER_MAXIMUM =	OBJTYPE
      2  02e5				   OBJTYPE    .SET	OBJTYPE + 1
    624  02e5
    625  02e5
    626  02e5				   CharacterDataVecLO
    627  02e5
    628  02e5							; Two entries per character.  2nd is ptr to mirrored character
    629  02e5							; Characters don't have to be mirrored, obviously -- use the same pointer for both!
    630  02e5
    631  02e5		       1d		      .byte.b	<CHARACTERSHAPE_BLANK
    632  02e6		       1d		      .byte.b	<CHARACTERSHAPE_BLANK
    633  02e7		       30		      .byte.b	<CHARACTERSHAPE_SOIL
    634  02e8		       30		      .byte.b	<CHARACTERSHAPE_SOIL_MIRRORED
    635  02e9		       48		      .byte.b	<CHARACTERSHAPE_BOX
    636  02ea		       60		      .byte.b	<CHARACTERSHAPE_BOX_MIRRORED
    637  02eb		       00		      .byte.b	<CHARACTERSHAPE_TARGET
    638  02ec		       18		      .byte.b	<CHARACTERSHAPE_TARGET_MIRRORED
    639  02ed		       1d		      .byte.b	<CHARACTERSHAPE_BLANK
    640  02ee		       1d		      .byte.b	<CHARACTERSHAPE_BLANK
    641  02ef		       1d		      .byte.b	<CHARACTERSHAPE_BLANK	; man occupied
    642  02f0		       1d		      .byte.b	<CHARACTERSHAPE_BLANK
    643  02f1		       00		      .byte.b	<CHARACTERSHAPE_STEEL
    644  02f2		       18		      .byte.b	<CHARACTERSHAPE_STEEL_MIRRORED
    645  02f3		       a8		      .byte.b	<CHARACTERSHAPE_WALL
    646  02f4		       c0		      .byte.b	<CHARACTERSHAPE_WALL_MIRRORED
    647  02f5		       78		      .byte.b	<CHARACTERSHAPE_BOX_ON_TARGET
    648  02f6		       90		      .byte.b	<CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED
    649  02f7							;  .byte <CHARACTERSHAPE_BOX_ON_TARGET2
    650  02f7							;  .byte <CHARACTERSHAPE_BOX_ON_TARGET2_MIRRORED
    651  02f7		       1d		      .byte.b	<CHARACTERSHAPE_BLANK	; unkillable man
    652  02f8		       1d		      .byte.b	<CHARACTERSHAPE_BLANK	; unkillable man
    653  02f9		       30		      .byte.b	<CHARACTERSHAPE_TARGET1
    654  02fa		       48		      .byte.b	<CHARACTERSHAPE_TARGET1_MIRRORED
    655  02fb		       60		      .byte.b	<CHARACTERSHAPE_TARGET3
    656  02fc		       78		      .byte.b	<CHARACTERSHAPE_TARGET3_MIRRORED
    657  02fd		       90		      .byte.b	<CHARACTERSHAPE_TARGET5
    658  02fe		       a8		      .byte.b	<CHARACTERSHAPE_TARGET5_MIRRORED
    659  02ff		       c0		      .byte.b	<CHARACTERSHAPE_TARGET7
    660  0300		       d8		      .byte.b	<CHARACTERSHAPE_TARGET7_MIRRORED
    661  0301
    662  0301				  -	      if	DIGITS
    663  0301				  -	      .byte	<CHARACTERSHAPE_0, <CHARACTERSHAPE_0_MIRRORED
    664  0301				  -	      .byte	<CHARACTERSHAPE_1, <CHARACTERSHAPE_1_MIRRORED
    665  0301				  -	      .byte	<CHARACTERSHAPE_2, <CHARACTERSHAPE_2_MIRRORED
    666  0301				  -	      .byte	<CHARACTERSHAPE_3, <CHARACTERSHAPE_3_MIRRORED
    667  0301				  -	      .byte	<CHARACTERSHAPE_4, <CHARACTERSHAPE_4_MIRRORED
    668  0301				  -	      .byte	<CHARACTERSHAPE_5, <CHARACTERSHAPE_5_MIRRORED
    669  0301				  -	      .byte	<CHARACTERSHAPE_6, <CHARACTERSHAPE_6_MIRRORED
    670  0301				  -	      .byte	<CHARACTERSHAPE_7, <CHARACTERSHAPE_7_MIRRORED
    671  0301				  -	      .byte	<CHARACTERSHAPE_8, <CHARACTERSHAPE_8_MIRRORED
    672  0301				  -	      .byte	<CHARACTERSHAPE_9, <CHARACTERSHAPE_9_MIRRORED
    673  0301					      endif
    674  0301
    675  0301
    676  0301				  -	      IF	* - CharacterDataVecLO != CHARACTER_MAXIMUM*2
    677  0301				  -	      ECHO	"ERROR: Incorrect CharacterDataVecLO table!"
    678  0301				  -	      ERR
    679  0301					      ENDIF
    680  0301
    681  0301
    682  0301							;ds 20,0
    683  0301
    684  0301							;---------------------------------------------------------------------------
    685  0301
    686  0301				   CharacterDataVecHI
    687  0301
    688  0301		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    689  0302		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    690  0303		       ff		      .byte.b	>CHARACTERSHAPE_SOIL
    691  0304		       ff		      .byte.b	>CHARACTERSHAPE_SOIL_MIRRORED
    692  0305		       ff		      .byte.b	>CHARACTERSHAPE_BOX
    693  0306		       ff		      .byte.b	>CHARACTERSHAPE_BOX_MIRRORED
    694  0307		       fe		      .byte.b	>CHARACTERSHAPE_TARGET
    695  0308		       fe		      .byte.b	>CHARACTERSHAPE_TARGET_MIRRORED
    696  0309		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    697  030a		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    698  030b		       f3		      .byte.b	>CHARACTERSHAPE_BLANK	; man occupied
    699  030c		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    700  030d		       ff		      .byte.b	>CHARACTERSHAPE_STEEL
    701  030e		       ff		      .byte.b	>CHARACTERSHAPE_STEEL_MIRRORED
    702  030f		       ff		      .byte.b	>CHARACTERSHAPE_WALL
    703  0310		       ff		      .byte.b	>CHARACTERSHAPE_WALL_MIRRORED
    704  0311		       ff		      .byte.b	>CHARACTERSHAPE_BOX_ON_TARGET
    705  0312		       ff		      .byte.b	>CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED
    706  0313							;    .byte >CHARACTERSHAPE_BOX_ON_TARGET2
    707  0313							;    .byte >CHARACTERSHAPE_BOX_ON_TARGET2_MIRRORED
    708  0313		       f3		      .byte.b	>CHARACTERSHAPE_BLANK	; unkillable man
    709  0314		       f3		      .byte.b	>CHARACTERSHAPE_BLANK	; unkillable man
    710  0315		       fe		      .byte.b	>CHARACTERSHAPE_TARGET1
    711  0316		       fe		      .byte.b	>CHARACTERSHAPE_TARGET1_MIRRORED
    712  0317		       fe		      .byte.b	>CHARACTERSHAPE_TARGET3
    713  0318		       fe		      .byte.b	>CHARACTERSHAPE_TARGET3_MIRRORED
    714  0319		       fe		      .byte.b	>CHARACTERSHAPE_TARGET5
    715  031a		       fe		      .byte.b	>CHARACTERSHAPE_TARGET5_MIRRORED
    716  031b		       fe		      .byte.b	>CHARACTERSHAPE_TARGET7
    717  031c		       fe		      .byte.b	>CHARACTERSHAPE_TARGET7_MIRRORED
    718  031d
    719  031d				  -	      if	DIGITS
    720  031d				  -	      .byte	>CHARACTERSHAPE_0, >CHARACTERSHAPE_0_MIRRORED
    721  031d				  -	      .byte	>CHARACTERSHAPE_1, >CHARACTERSHAPE_1_MIRRORED
    722  031d				  -	      .byte	>CHARACTERSHAPE_2, >CHARACTERSHAPE_2_MIRRORED
    723  031d				  -	      .byte	>CHARACTERSHAPE_3, >CHARACTERSHAPE_3_MIRRORED
    724  031d				  -	      .byte	>CHARACTERSHAPE_4, >CHARACTERSHAPE_4_MIRRORED
    725  031d				  -	      .byte	>CHARACTERSHAPE_5, >CHARACTERSHAPE_5_MIRRORED
    726  031d				  -	      .byte	>CHARACTERSHAPE_6, >CHARACTERSHAPE_6_MIRRORED
    727  031d				  -	      .byte	>CHARACTERSHAPE_7, >CHARACTERSHAPE_7_MIRRORED
    728  031d				  -	      .byte	>CHARACTERSHAPE_8, >CHARACTERSHAPE_8_MIRRORED
    729  031d				  -	      .byte	>CHARACTERSHAPE_9, >CHARACTERSHAPE_9_MIRRORED
    730  031d					      endif
    731  031d
    732  031d
    733  031d				  -	      IF	* - CharacterDataVecHI != CHARACTER_MAXIMUM*2
    734  031d				  -	      ECHO	"ERROR: Incorrect CharacterDataVecHI table!"
    735  031d				  -	      ERR
    736  031d					      ENDIF
    737  031d
    738  031d
    739  031d							;     OPTIONAL_PAGEBREAK "PLAYER BLANK SHAPE", LINES_PER_CHAR
    740  031d
    741  031d		       f3 35	   ShapePlayer =	PLAYER0_SHAPE	;BLANK
    742  031d		       f3 35	   ShapePlayerBLUE =	ShapePlayer	; low adresses patched
    743  031d		       f3 35	   ShapePlayerGREEN =	ShapePlayer	; low adresses patched
    744  031d		       f3 35	   ShapePlayerRED =	ShapePlayer	; low adresses patched
    745  031d
    746  031d		       f3 1d	   CHARACTERSHAPE_MANOCCUPIED =	PLAYER_BLANK
    747  031d		       f3 1d	   CHARACTERSHAPE_BLANK =	PLAYER_BLANK
    748  031d
    749  031d
    750  031d							; The following are the RAM buffers into which the player shape and colour data are copied
    751  031d							; The self-mod draw vectors point to this OR to a **blank** shape.
    752  031d
      0  031d					      OPTIONAL_PAGEBREAK	"PLAYER_BLANK", LINES_PER_CHAR
     10  031d					      LIST	ON
    754  031d				   PLAYER_BLANK
    755  031d		       00 00 00 00*	      ds	LINES_PER_CHAR, 0	; P1
      0  0335					      CHECKPAGEX	PLAYER_BLANK, "PLAYER_BLANK in BANK_ROM_SHADOW_RAMBANK.asm"
      9  0335					      LIST	ON
    757  0335
      0  0335					      OPTIONAL_PAGEBREAK	"PLAYER0_SHAPE", LINES_PER_CHAR
     10  0335					      LIST	ON
    759  0335				   PLAYER0_SHAPE
    760  0335		       00 00 00 00*	      ds	LINES_PER_CHAR,0
      0  034d					      CHECKPAGEX	PLAYER0_SHAPE, "PLAYER0_SHAPE in BANK_ROM_SHADOW_RAMBANK.asm"
      9  034d					      LIST	ON
    762  034d
      0  034d					      OPTIONAL_PAGEBREAK	"PLAYER0_COLOUR", LINES_PER_CHAR	; BOTH on same page
     10  034d					      LIST	ON
    764  034d				   PLAYER0_COLOUR
    765  034d		       00 00 00 00*	      ds	LINES_PER_CHAR,0
      0  0365					      CHECKPAGEX	PLAYER0_COLOUR, "PLAYER0_COLOUR in BANK_ROM_SHADOW_RAMBANK.asm"
      9  0365					      LIST	ON
    767  0365
    768  0365		       ff	   ExistingFrame .byte.b	-1
    769  0366		       ff	   LastYScroll .byte.b	-1
    770  0367		       14	   BandOffset .byte.b	20
    771  0368
    772  0368		       00	   Colour_A   .byte.b	0
    773  0369		       00	   Colour_B   .byte.b	0
    774  036a		       00	   Colour_C   .byte.b	0
    775  036b
    776  036b
    777  036b
    778  036b
    779  036b
    780  036b				   ColourBandsGreen
    781  036b
    782  036b							; NTSC...
    783  036b
    784  036b		       12 12		      ds	2,$16-4+PALETTE_INTENSITY_ADJUST
    785  036d		       f4 f4		      ds	2,$F8-4+PALETTE_INTENSITY_ADJUST
    786  036f		       24 24		      ds	2,$28-4+PALETTE_INTENSITY_ADJUST	; brown
    787  0371		       34 34		      ds	2,$38-4+PALETTE_INTENSITY_ADJUST
    788  0373		       44 44		      ds	2,$48-4+PALETTE_INTENSITY_ADJUST
    789  0375		       54 54		      ds	2,$58-4+PALETTE_INTENSITY_ADJUST
    790  0377		       66 66 66 	      ds	3,$6A-4+PALETTE_INTENSITY_ADJUST
    791  037a		       76 76		      ds	2,$7A-4+PALETTE_INTENSITY_ADJUST
    792  037c		       86 86		      ds	2,$8A-4+PALETTE_INTENSITY_ADJUST	; deep blue
    793  037e		       94 94 94 	      ds	3,$98-4+PALETTE_INTENSITY_ADJUST
    794  0381		       a4 a4		      ds	2,$A8-4+PALETTE_INTENSITY_ADJUST
    795  0383		       b4 b4		      ds	2,$B8-4+PALETTE_INTENSITY_ADJUST
    796  0385		       c4 c4		      ds	2,$C8-4+PALETTE_INTENSITY_ADJUST
    797  0387		       d4 d4		      ds	2,$D8-4+PALETTE_INTENSITY_ADJUST
    798  0389		       e4 e4		      ds	2,$E8-4+PALETTE_INTENSITY_ADJUST
    799  038b
    800  038b							; PAL...
    801  038b
    802  038b		       24 24 24 	      ds	3,$28-4+PALETTE_INTENSITY_ADJUST
    803  038e		       44 44		      ds	2,$48-4+PALETTE_INTENSITY_ADJUST
    804  0390		       64 64 64 	      ds	3,$68-4+PALETTE_INTENSITY_ADJUST
    805  0393		       84 84		      ds	2,$88-4+PALETTE_INTENSITY_ADJUST
    806  0395		       a4 a4		      ds	2,$A8-4+PALETTE_INTENSITY_ADJUST
    807  0397		       c4 c4 c4 	      ds	3,$C8-4+PALETTE_INTENSITY_ADJUST
    808  039a		       d4 d4 d4 	      ds	3,$D8-4+PALETTE_INTENSITY_ADJUST
    809  039d		       b4 b4 b4 	      ds	3,$B8-4+PALETTE_INTENSITY_ADJUST
    810  03a0		       94 94 94 	      ds	3,$98-4+PALETTE_INTENSITY_ADJUST
    811  03a3		       74 74		      ds	2,$78-4+PALETTE_INTENSITY_ADJUST
    812  03a5		       54 54 54 	      ds	3,$58-4+PALETTE_INTENSITY_ADJUST
    813  03a8		       34 34 34 	      ds	3,$38-4+PALETTE_INTENSITY_ADJUST
    814  03ab
    815  03ab
    816  03ab
      0  03ab					      DEFINE_SUBROUTINE	FixColours
      1  03ab		       00 00	   BANK_FixColours =	_CURRENT_BANK
      2  03ab					      SUBROUTINE
      3  03ab				   FixColours
    818  03ab							; USES OVERLAY "ColourFixer"
    819  03ab
    820  03ab		       a4 96		      ldy	BoardScrollY
    821  03ad		       cc 66 f3 	      cpy	LastYScroll
    822  03b0		       f0 35		      beq	BandsNotChanged
    823  03b2		       8c 66 f7 	      sty	LastYScroll+RAM_WRITE
    824  03b5
    825  03b5		       a5 80		      lda	Platform
    826  03b7		       29 02		      and	#%10
    827  03b9		       0a		      asl
    828  03ba		       0a		      asl
    829  03bb		       0a		      asl
    830  03bc		       0a		      asl
    831  03bd		       85 da		      sta	PlatformBase
    832  03bf
    833  03bf		       ad 67 f3 	      lda	BandOffset
    834  03c2		       65 96		      adc	BoardScrollY
    835  03c4		       85 db		      sta	BandOffsetTemp
    836  03c6
    837  03c6		       a2 00		      ldx	#0
    838  03c8		       86 3e	   LoopBankLines stx	SET_BANK_RAM
    839  03ca
    840  03ca		       8a		      txa
    841  03cb		       18		      clc
    842  03cc		       65 db		      adc	BandOffsetTemp
    843  03ce		       29 1f		      and	#31
    844  03d0		       65 da		      adc	PlatformBase
    845  03d2		       a8		      tay
    846  03d3
    847  03d3		       b9 6b f3 	      lda	ColourBandsGreen,y
    848  03d6		       8d 69 f7 	      sta	Colour_B + RAM_WRITE
    849  03d9
    850  03d9		       a4 cc		      ldy	FadeComplete
    851  03db		       f0 02		      beq	writeActualCol
    852  03dd		       a9 00		      lda	#0
    853  03df		       8d 86 f4    writeActualCol sta	SELFMOD_GREEN+RAM_WRITE+1
    854  03e2
    855  03e2		       e8		      inx
    856  03e3		       e0 08		      cpx	#SCREEN_LINES
    857  03e5		       90 e1		      bcc	LoopBankLines
    858  03e7
    859  03e7		       60	   BandsNotChanged rts
    860  03e8
    861  03e8
    862  03e8
      0  03e8					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_OF_RAMBANK_CODE -- 1K"
      1  03e8
      2  03e8
      3  03e8		       03 e8	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_RAMBANK_CODE -- 1K (1K) SIZE =  $3e8 , FREE= $18
      4  03e8					      ECHO	"ROM_SHADOW_OF_RAMBANK_CODE -- 1K", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  03e8				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  03e8				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  03e8				  -	      ERR
      8  03e8					      endif
    864  03e8
    865  03e8							; Here there's another 1K of usable ROM....
    866  03e8							; Anything here is ONLY accessible if the bank is switched in as a ROM bank
    867  03e8							; WE CAN'T HAVE ANYTHING REQUIRED IN THE ROM_SHADOW (IN RAM) IN THIS HALF
    868  03e8
      0  03e8					      CHECK_BANK_SIZE	"ROM_SHADOW_OF_RAMBANK_CODE -- full 2K"
      1  03e8		       03 e8	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_RAMBANK_CODE -- full 2K (2K) SIZE =  $3e8 , FREE= $418
      2  03e8					      ECHO	"ROM_SHADOW_OF_RAMBANK_CODE -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  03e8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  03e8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  03e8				  -	      ERR
      6  03e8					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_ROM_SHADOW_DRAWBUFFERS.asm LEVEL 2 PASS 3
      0  03e8					      include	"BANK_ROM_SHADOW_DRAWBUFFERS.asm"
      1  03e8							;    Sokoboo - a Sokoban implementation
      2  03e8							;    using a generic tile-based display engine for the Atari 2600
      3  03e8							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  03e8							;
      5  03e8							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  03e8							;
      7  03e8							;    Code related to the generic tile-based display engine was developed by
      8  03e8							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  03e8							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  03e8							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  03e8							;
     12  03e8							;    Code related to music and sound effects uses the TIATracker music player
     13  03e8							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  03e8							;    directory for Apache licensing details.
     15  03e8							;
     16  03e8							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  03e8							;    See the copyright notices in the License directory for a list of level
     18  03e8							;    contributors.
     19  03e8							;
     20  03e8							;    Except where otherwise indicated, this software is released under the
     21  03e8							;    following licensing arrangement...
     22  03e8							;
     23  03e8							;    This program is free software: you can redistribute it and/or modify
     24  03e8							;    it under the terms of the GNU General Public License as published by
     25  03e8							;    the Free Software Foundation, either version 3 of the License, or
     26  03e8							;    (at your option) any later version.
     27  03e8							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  03e8
     29  03e8							;    This program is distributed in the hope that it will be useful,
     30  03e8							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  03e8							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  03e8							;    GNU General Public License for more details.
     33  03e8
     34  03e8							;------------------------------------------------------------------------------
     35  03e8							;##############################################################################
     36  03e8							;------------------------------------------------------------------------------
     37  03e8
      0  03e8					      NEWBANK	ROM_SHADOW_OF_BANK_DRAW_BUFFERS
      1  0a50 ????				      SEG	ROM_SHADOW_OF_BANK_DRAW_BUFFERS
      2  0800					      ORG	ORIGIN
      3  0800					      RORG	$F000
      4  0800				   BANK_START SET	*
      5  0800				   ROM_SHADOW_OF_BANK_DRAW_BUFFERS SET	ORIGIN / 2048
      6  0800				   ORIGIN     SET	ORIGIN + 2048
      7  0800				   _CURRENT_BANK SET	ROM_SHADOW_OF_BANK_DRAW_BUFFERS
     39  0800
     40  0800							; NOTE: Access to these buffers must NOT overlap pages...
     41  0800							; NOTE: We get auto-initialisation of these variables from the ROM values by
     42  0800							; copying the whole bank into the RAM bank.  Neato.
     43  0800
     44  0800		       00 50	   DRAW_STACK_SIZE =	SCREEN_ARRAY_SIZE	; <-- TJ TRY CHANGING THIS TO (SAY) 15  (!!)
     45  0800
     46  0800
     47  0800
     48  0800		       00 00 00 00*DrawStack  ds	DRAW_STACK_SIZE,0	; a stack of character #'s to draw
     49  0850		       00 00 00 00*DrawFlag   ds	SCREEN_ARRAY_SIZE,0	; holds new character to draw at position
     50  08a0
      0  08a0					      OPTIONAL_PAGEBREAK	"ScreenBuffer", SCREEN_ARRAY_SIZE
     10  08a0					      LIST	ON
     52  08a0
     53  08a0							; D7 of ScreenBuffer indicates if a DirectDraw is to be used to draw this character
     54  08a0							; Note: this may actually cause two characters to be drawn -- for the price of one.  This is *exactly*
     55  08a0							; what we want to happen!
     56  08a0
     57  08a0		       00 00 00 00*ScreenBuffer ds	SCREEN_ARRAY_SIZE,0	; the char buffer for delta-drawing
      0  08f0					      CHECKPAGEX	ScreenBuffer, "ScreenBuffer"
      9  08f0					      LIST	ON
     59  08f0
     60  08f0							;------------------------------------------------------------------------------
     61  08f0							; RAM-BASED SUBROUTINES...
     62  08f0							; NOTE: When calling these routines, remember you are actually calling the ROM routine
     63  08f0							; as it is the ROM bank that is switched in.  The first thing to do to access the RAM
     64  08f0							; is to switch the appropriate RAM bank in.  It would be nicer to be able to direct-call
     65  08f0							; the RAM-based routine.
     66  08f0
     67  08f0
     68  08f0
     69  08f0							;------------------------------------------------------------------------------
     70  08f0
     71  08f0
     72  08f0		       60	   waitForDraw rts		; 6
     73  08f1
     74  08f1							;------------------------------------------------------------------------------
     75  08f1
      0  08f1					      DEFINE_SUBROUTINE	DrawStackUpdate	; @39✅
      1  08f1		       00 01	   BANK_DrawStackUpdate =	_CURRENT_BANK
      2  08f1					      SUBROUTINE
      3  08f1				   DrawStackUpdate
     77  08f1
     78  08f1							; Parse the DrawFlags buffer and create a draw stack
     79  08f1							; so that the actual draw doesn't need to scan for characters to draw.
     80  08f1
     81  08f1
     82  08f1							;@TJ -- let's see if we see any bad lag/shear in screen drawing without this wait in.
     83  08f1							; symptoms would be missing parts of screen when scrolling.
     84  08f1							; Gameplay (not visual) lag noticed - re-enabled 11/8/11
     85  08f1							; disabled for sokoban 27/7/2019
     86  08f1
     87  08f1							;lda DrawStackPointer
     88  08f1							;bpl waitForDraw		  ; Wait for previously not-drawn characters to be drawn
     89  08f1
     90  08f1		       ad 84 02 	      lda	INTIM	;4
     91  08f4		       c9 03		      cmp	#SEGTIME_BDS	;2
     92  08f6		       90 f8		      bcc	waitForDraw	;2/3
     93  08f8							; =>[39]+(9)+6rts = 54✅ when exit
     94  08f8
     95  08f8							; Now that all characters are drawn, recalculate/move sprite. Doing this here prevents the player
     96  08f8							; moving into the middle of dirt, or BOXs when pushing, or TARGETs when grabbing.
     97  08f8
     98  08f8							;		  sec		 already set
     99  08f8		       a5 9e		      lda	ManY	;3
    100  08fa		       e5 96		      sbc	BoardScrollY	;3
    101  08fc		       c9 08		      cmp	#SCREEN_LINES
    102  08fe		       b0 0b		      bcs	offy
    103  0900		       85 a0		      sta	ManDrawY	;3 = 9✅
    104  0902
    105  0902		       38		      sec		;2
    106  0903		       a5 9d		      lda	ManX	;3
    107  0905		       e5 97		      sbc	BoardScrollX	;3
    108  0907		       c9 0a		      cmp	#SCREEN_WIDTH	;2
    109  0909		       90 06		      bcc	onsc	;2/3 = 12(13)✅
    110  090b
    111  090b							; if the man is offscreen, we have a timing issue between the horizontal positioning code and the player
    112  090b							; draw code.  The following gets around this by setting the Y offscreen (causing the player draw code to
    113  090b							; blank the graphic) and leaving the X alone (so we don't see a brief flash in left of screen).
    114  090b
    115  090b		       a9 ff	   offy       lda	#-1	;SCREEN_LINES		     ;2
    116  090d		       85 a0		      sta	ManDrawY	;3
    117  090f		       d0 02		      bne	offsc
    118  0911
    119  0911		       85 9f	   onsc       sta	ManDrawX	;3
    120  0913				   offsc
    121  0913
    122  0913							;32✅ worst
    123  0913
      0  0913					      DEFINE_SUBROUTINE	AnimateCharReplacements2	; =38
      1  0913		       00 01	   BANK_AnimateCharReplacements2 =	_CURRENT_BANK
      2  0913					      SUBROUTINE
      3  0913				   AnimateCharReplacements2
    125  0913
    126  0913							; This manages character animation on a per-object basis.  Morph/animate these characters
    127  0913							; individually or as required.  Change will affect all characters of the same type in the
    128  0913							; visible display.
    129  0913
    130  0913		       e6 c6		      inc	animate_char_index	; 5
    131  0915		       a5 c6		      lda	animate_char_index	; 3
    132  0917		       4a		      lsr		; 2
    133  0918		       4a		      lsr
    134  0919		       29 03		      and	#3	; 2
    135  091b		       aa		      tax		; 2 = 14
    136  091c
    137  091c		       bd ea f1 	      lda	targetReplaceChar,x	; 4
    138  091f		       8d df f5 	      sta	ANIM_TARGET + RAM_WRITE	; 4 = 8
    139  0922							;lda targetReplaceChar2,x	      ; 4
    140  0922							;sta ANIM_TARGET2 + RAM_WRITE	      ; 4
    141  0922
    142  0922							;@54 worst
    143  0922
    144  0922		       a9 4f		      lda	#SCREEN_ARRAY_SIZE-1	;2
    145  0924		       85 c4		      sta	DSL	;3
    146  0926
    147  0926		       e6 86		      inc	ScreenDrawPhase	;5
    148  0928		       60		      rts		; 6 TEST allows segtime test to be smaller on next part
    149  0929							; ==> @70 worst
    150  0929
    151  0929							;---------------------------------------------------------------------------
    152  0929
      0  0929					      DEFINE_SUBROUTINE	DrawIntoStack	; @39✅
      1  0929		       00 01	   BANK_DrawIntoStack =	_CURRENT_BANK
      2  0929					      SUBROUTINE
      3  0929				   DrawIntoStack
    154  0929
    155  0929		       ba		      tsx		; 2
    156  092a		       86 da		      stx	save_SP	; 3
    157  092c		       a6 81		      ldx	DrawStackPointer	; 3
    158  092e		       9a		      txs		; 2 = 10
    159  092f
    160  092f		       a4 c4		      ldy	DSL	; 3
    161  0931
    162  0931							; @ 52✅
    163  0931
    164  0931							; worst-case DrawStackOne loop = 61 cycles per character (+11 for first one)
    165  0931							; + exit cost which is +10 cycles
    166  0931							; TJ: I count 63
    167  0931							;   + 14 for the wtf2 exit
    168  0931							;   + 22 for the end of loop exit
    169  0931
    170  0931							; This loops 80 times/frame and is called 1-2 times/frame, so any saving inside the loop will make up for a lot of overhead outside
    171  0931							; For 80 iterations that is 640 cycles, just for checking INTIM
    172  0931							; Worst case we would have ~5000. Though that will most likely never happen, we have to optimize for it, since
    173  0931							; it also will require a lot of CPU time for updating the screen data.
    174  0931
    175  0931							; TODO: optimize!
    176  0931							;
    177  0931							; idea #4: the mixed draw idea (two different characters have to be redrawn),
    178  0931							; first do a QuickDraw and then a SlowDraw, faster than two SlowDraws
    179  0931							; costs some detection time here, but saves ~240 cylces for drawing the two
    180  0931
    181  0931				   .loopDrawStack		; @100✅ from bottom of loop
    182  0931
    183  0931		       ad 84 02 	      lda	INTIM	; 4
    184  0934		       c9 04		      cmp	#SEGTIME_DSL	; 2
    185  0936		       90 4b		      bcc	.exitDrawStack	; 2(3)  + [costs 18 more to exit fully at .exit..]
    186  0938							; => full exit on 1st pass = 78✅ cycles
    187  0938							; => full exit on a single loop = 127✅ cycles
    188  0938
    189  0938							; @0✅
    190  0938
    191  0938		       b9 50 f0 	      lda	DrawFlag,y	; 4
    192  093b		       d9 a0 f0 	      cmp	ScreenBuffer,y	; 4		  Is the character already there the same as the new one?
    193  093e		       f0 16		      beq	.next0	; 2/3=10/11	  yes, so we don't draw anything
    194  0940							; @10✅
    195  0940
    196  0940							; Character is NOT the same. Figure out how it should be drawn.
    197  0940							; If it is in column 0 or 5 then it can be DirectDrawn (indirectly found by a A:A compare)
    198  0940							; If it is the same as its paired character (sharing same PF byte) then it can be DirectDrawn
    199  0940							; The top bit of the ScreenBuffer character indicates the DirectDrawn hint
    200  0940
    201  0940		       be 8c f1 	      ldx	PairedCharacter,y	; 4		  the "paired" character for this one
    202  0943		       dd 50 f0 	      cmp	DrawFlag,x	; 4		  same as partner character in new drawn screen?
    203  0946		       d0 05		      bne	.notPaired0	; 2(3)
    204  0948							; @20✅
    205  0948
    206  0948							; Consider two 'paired' characters. Either A:A or A:B
    207  0948							; When we're scanning, and we check the first, if they are NOT paired, then the second character
    208  0948							; can be considered in isolation -- its check comes later, will determine itself if the pair can be written
    209  0948							; If, however, the first character IS paired, then the write below will cause the second check to FAIL
    210  0948							; on the comparison, so the character will not be added to the draw stack. So our first character will
    211  0948							; do the job of drawing BOTH characters to the screen.
    212  0948
    213  0948		       9d a0 f4 	      sta	ScreenBuffer+RAM_WRITE,x	; 5		  mark paired character as drawn already (!!)
    214  094b		       09 80		      ora	#$80	; 2 =	7	  DirectDraw this character 'pair'
    215  094d							; @27✅
    216  094d							; In the case of columns 0 and 5, the X and Y registers will be the same -- no problemo, because
    217  094d							; the last write(below) marks the character as to be direct-drawn.
    218  094d
    219  094d				   .notPaired0		; @27✅ worst
    220  094d
    221  094d		       99 a0 f4 	      sta	ScreenBuffer+RAM_WRITE,y	; 5		  NEW character to draw + DirectDraw flag (128)
    222  0950
    223  0950							; The following 'pla' really just increments the draw-stack pointer.  Value is unimportant. Unusual!
    224  0950
    225  0950		       68		      pla		; 4		  ASSUMPTION IS WE DON'T OvERFLOW DRAW STACK
    226  0951		       98		      tya		; 2
    227  0952		       ba		      tsx		; 2		  << now X holds drawstackpointer
    228  0953		       9d 00 f4 	      sta	DrawStack+RAM_WRITE,x	; 5 = 18	  index of character to draw
    229  0956
    230  0956		       88	   .next0     dey		; 2
    231  0957		       30 21		      bmi	.finishedDrawStack	; 2(3)= 4/5
    232  0959							; @50✅
    233  0959							; unrolled 2nd loop:
    234  0959		       b9 50 f0 	      lda	DrawFlag,y	; 4
    235  095c		       d9 a0 f0 	      cmp	ScreenBuffer,y	; 4		  Is the character already there the same as the new one?
    236  095f		       f0 16		      beq	.next1	; 2(3) 	  yes, so we don't draw anything
    237  0961
    238  0961		       be 8c f1 	      ldx	PairedCharacter,y	; 4		  the "paired" character for this one
    239  0964		       dd 50 f0 	      cmp	DrawFlag,x	; 4		  same as partner character in new drawn screen?
    240  0967		       d0 05		      bne	.notPaired1	; 2(3)
    241  0969
    242  0969		       9d a0 f4 	      sta	ScreenBuffer+RAM_WRITE,x	; 5		  mark paired character as drawn already (!!)
    243  096c		       09 80		      ora	#$80	; 2 =	7	  DirectDraw this character 'pair'
    244  096e
    245  096e				   .notPaired1		; @77✅ worst
    246  096e
    247  096e		       99 a0 f4 	      sta	ScreenBuffer+RAM_WRITE,y	; 5		  NEW character to draw + DirectDraw flag (128)
    248  0971
    249  0971		       68		      pla		; 4		  ASSUMPTION IS WE DON'T OvERFLOW DRAW STACK
    250  0972		       98		      tya		; 2
    251  0973		       ba		      tsx		; 2
    252  0974		       9d 00 f4 	      sta	DrawStack+RAM_WRITE,x	; 5 = 18	  index of character to draw
    253  0977							; @95✅
    254  0977
    255  0977		       88	   .next1     dey		; 2
    256  0978		       10 b7		      bpl	.loopDrawStack	; 2(3)
    257  097a							; @100✅ --> @.loopDrawStack
    258  097a
    259  097a							;worst case: 111-4
    260  097a							;40 loops(-4), max. 2 calls(+20) -> -160+40=-120, +8 bytes
    261  097a
    262  097a							; THE FOLLOWING OPTIMISATION IS STUFFED IF PROCESSOBJSTACK is not first in the vector processor!
    263  097a
    264  097a				   .finishedDrawStack
    265  097a		       e6 86		      inc	ScreenDrawPhase	;5 =  5
    266  097c		       ba		      tsx		;2
    267  097d		       86 81		      stx	DrawStackPointer	;3
    268  097f
    269  097f		       a6 da		      ldx	save_SP	;3
    270  0981		       9a		      txs		;2 = 10
    271  0982		       60		      rts		;6 =  6
    272  0983
    273  0983				   .exitDrawStack
    274  0983		       84 c4		      sty	DSL	;3 =  3
    275  0985		       ba		      tsx		;2
    276  0986		       86 81		      stx	DrawStackPointer	;3
    277  0988		       a6 da		      ldx	save_SP	;3
    278  098a		       9a		      txs		;2 = 10
    279  098b		       60		      rts		;6 =  6
    280  098c
    281  098c				   PairedCharacter
    282  098c
    283  098c				   SOFF       SET	0
    284  098c					      REPEAT	SCREEN_LINES
    285  098c		       00 02 01 04*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  098c				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  098c					      REPEND
    285  0996		       0a 0c 0b 0e*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  0996				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  0996					      REPEND
    285  09a0		       14 16 15 18*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  09a0				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  09a0					      REPEND
    285  09aa		       1e 20 1f 22*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  09aa				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  09aa					      REPEND
    285  09b4		       28 2a 29 2c*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  09b4				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  09b4					      REPEND
    285  09be		       32 34 33 36*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  09be				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  09be					      REPEND
    285  09c8		       3c 3e 3d 40*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  09c8				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  09c8					      REPEND
    285  09d2		       46 48 47 4a*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  09d2				   SOFF       SET	SOFF + SCREEN_WIDTH
    287  09dc					      REPEND
    288  09dc
    289  09dc							;------------------------------------------------------------------------------
    290  09dc							; Gives character replacements used during screen drawing.
    291  09dc							; The character from the board is morphed via this array into an actual character
    292  09dc							; to draw.  This allows global animation and replacment of characters without
    293  09dc							; individual objects needing to do this.  Note, the draw-time replacement happens,
    294  09dc							; not board-time.
    295  09dc
    296  09dc				   CharReplacement		; in RAM -- BANK_DRAW_BUFFERS
    297  09dc
    298  09dc							; Converts a character # to an animated creature type
    299  09dc							; The array is indexed by CHARACTER_...
    300  09dc
    301  09dc		       00		      .byte.b	CHARACTER_BLANK	;  0
    302  09dd		       01		      .byte.b	CHARACTER_SOIL	;  1
    303  09de		       02		      .byte.b	CHARACTER_BOX	;  2
    304  09df		       03	   ANIM_TARGET .byte.b	CHARACTER_TARGET	;  3  XOR'd to give flashing target squares
    305  09e0		       04		      .byte.b	CHARACTER_TARGET2	;  4
    306  09e1		       05		      .byte.b	CHARACTER_MANOCCUPIED	;  5
    307  09e2		       06		      .byte.b	CHARACTER_STEEL	;  6
    308  09e3		       07		      .byte.b	CHARACTER_WALL	;  7
    309  09e4		       08	   ANIM_TARGET2 .byte.b	CHARACTER_BOX_ON_TARGET	;  8	 box on target
    310  09e5							;		  .byte CHARACTER_BOX_ON_TARGET2
    311  09e5		       00		      .byte.b	CHARACTER_BLANK	;  9
    312  09e6		       0a		      .byte.b	CHARACTER_TARGET1
    313  09e7		       0b		      .byte.b	CHARACTER_TARGET3
    314  09e8		       0c		      .byte.b	CHARACTER_TARGET5
    315  09e9		       0d		      .byte.b	CHARACTER_TARGET7
    316  09ea
    317  09ea				  -	      if	DIGITS
    318  09ea				  -	      .byte	CHARACTER_0
    319  09ea				  -	      .byte	CHARACTER_1
    320  09ea				  -	      .byte	CHARACTER_2
    321  09ea				  -	      .byte	CHARACTER_3
    322  09ea				  -	      .byte	CHARACTER_4
    323  09ea				  -	      .byte	CHARACTER_5
    324  09ea				  -	      .byte	CHARACTER_6
    325  09ea				  -	      .byte	CHARACTER_7
    326  09ea				  -	      .byte	CHARACTER_8
    327  09ea				  -	      .byte	CHARACTER_9
    328  09ea					      endif
    329  09ea
    330  09ea				  -	      IF	(* - CharReplacement != CHARACTER_MAXIMUM)
    331  09ea				  -	      ECHO	"ERROR: Incorrect CharReplacement table!"
    332  09ea				  -	      ERR
    333  09ea					      ENDIF
      0  09ea					      CHECKPAGEX	CharReplacement, "CharReplacement in BANK_ROM_SHADOW_DRAWBUFFERS"
      9  09ea					      LIST	ON
    335  09ea
    336  09ea
    337  09ea
    338  09ea				   targetReplaceChar
    339  09ea		       0a		      .byte.b	CHARACTER_TARGET1
    340  09eb		       0b		      .byte.b	CHARACTER_TARGET3
    341  09ec		       0c		      .byte.b	CHARACTER_TARGET5
    342  09ed		       0d		      .byte.b	CHARACTER_TARGET7
    343  09ee
    344  09ee							;targetReplaceChar2
    345  09ee							;    .byte CHARACTER_BOX
    346  09ee							;    .byte CHARACTER_BOX
    347  09ee							;    .byte CHARACTER_BOX_ON_TARGET
    348  09ee							;    .byte CHARACTER_BOX_ON_TARGET
    349  09ee
    350  09ee							;------------------------------------------------------------------------------
    351  09ee
    352  09ee
      0  09ee					      OPTIONAL_PAGEBREAK	"ROW_BankChar", SCREEN_LINES * SCREEN_WIDTH
 PAGE BREAK INSERTED FOR  ROW_BankChar
 REQUESTED SIZE =  $50
 WASTED SPACE =  $12
 PAGEBREAK LOCATION =  $f200
     10  0a00					      LIST	ON
      0  0a00					      DEFINE_SUBROUTINE	ROW_BankChar
      1  0a00		       00 01	   BANK_ROW_BankChar =	_CURRENT_BANK
      2  0a00					      SUBROUTINE
      3  0a00				   ROW_BankChar
    355  0a00
    356  0a00				   .BANK      SET	BANK_SCREENMARKII1
    357  0a00					      REPEAT	SCREEN_LINES
    358  0a00					      REPEAT	SCREEN_WIDTH
    359  0a00		       00		      .byte.b	.BANK
    358  0a00					      REPEND
    359  0a01		       00		      .byte.b	.BANK
    358  0a01					      REPEND
    359  0a02		       00		      .byte.b	.BANK
    358  0a02					      REPEND
    359  0a03		       00		      .byte.b	.BANK
    358  0a03					      REPEND
    359  0a04		       00		      .byte.b	.BANK
    358  0a04					      REPEND
    359  0a05		       00		      .byte.b	.BANK
    358  0a05					      REPEND
    359  0a06		       00		      .byte.b	.BANK
    358  0a06					      REPEND
    359  0a07		       00		      .byte.b	.BANK
    358  0a07					      REPEND
    359  0a08		       00		      .byte.b	.BANK
    358  0a08					      REPEND
    359  0a09		       00		      .byte.b	.BANK
    360  0a0a					      REPEND
    361  0a0a				   .BANK      SET	.BANK + 1
    357  0a0a					      REPEND
    358  0a0a					      REPEAT	SCREEN_WIDTH
    359  0a0a		       01		      .byte.b	.BANK
    358  0a0a					      REPEND
    359  0a0b		       01		      .byte.b	.BANK
    358  0a0b					      REPEND
    359  0a0c		       01		      .byte.b	.BANK
    358  0a0c					      REPEND
    359  0a0d		       01		      .byte.b	.BANK
    358  0a0d					      REPEND
    359  0a0e		       01		      .byte.b	.BANK
    358  0a0e					      REPEND
    359  0a0f		       01		      .byte.b	.BANK
    358  0a0f					      REPEND
    359  0a10		       01		      .byte.b	.BANK
    358  0a10					      REPEND
    359  0a11		       01		      .byte.b	.BANK
    358  0a11					      REPEND
    359  0a12		       01		      .byte.b	.BANK
    358  0a12					      REPEND
    359  0a13		       01		      .byte.b	.BANK
    360  0a14					      REPEND
    361  0a14				   .BANK      SET	.BANK + 1
    357  0a14					      REPEND
    358  0a14					      REPEAT	SCREEN_WIDTH
    359  0a14		       02		      .byte.b	.BANK
    358  0a14					      REPEND
    359  0a15		       02		      .byte.b	.BANK
    358  0a15					      REPEND
    359  0a16		       02		      .byte.b	.BANK
    358  0a16					      REPEND
    359  0a17		       02		      .byte.b	.BANK
    358  0a17					      REPEND
    359  0a18		       02		      .byte.b	.BANK
    358  0a18					      REPEND
    359  0a19		       02		      .byte.b	.BANK
    358  0a19					      REPEND
    359  0a1a		       02		      .byte.b	.BANK
    358  0a1a					      REPEND
    359  0a1b		       02		      .byte.b	.BANK
    358  0a1b					      REPEND
    359  0a1c		       02		      .byte.b	.BANK
    358  0a1c					      REPEND
    359  0a1d		       02		      .byte.b	.BANK
    360  0a1e					      REPEND
    361  0a1e				   .BANK      SET	.BANK + 1
    357  0a1e					      REPEND
    358  0a1e					      REPEAT	SCREEN_WIDTH
    359  0a1e		       03		      .byte.b	.BANK
    358  0a1e					      REPEND
    359  0a1f		       03		      .byte.b	.BANK
    358  0a1f					      REPEND
    359  0a20		       03		      .byte.b	.BANK
    358  0a20					      REPEND
    359  0a21		       03		      .byte.b	.BANK
    358  0a21					      REPEND
    359  0a22		       03		      .byte.b	.BANK
    358  0a22					      REPEND
    359  0a23		       03		      .byte.b	.BANK
    358  0a23					      REPEND
    359  0a24		       03		      .byte.b	.BANK
    358  0a24					      REPEND
    359  0a25		       03		      .byte.b	.BANK
    358  0a25					      REPEND
    359  0a26		       03		      .byte.b	.BANK
    358  0a26					      REPEND
    359  0a27		       03		      .byte.b	.BANK
    360  0a28					      REPEND
    361  0a28				   .BANK      SET	.BANK + 1
    357  0a28					      REPEND
    358  0a28					      REPEAT	SCREEN_WIDTH
    359  0a28		       04		      .byte.b	.BANK
    358  0a28					      REPEND
    359  0a29		       04		      .byte.b	.BANK
    358  0a29					      REPEND
    359  0a2a		       04		      .byte.b	.BANK
    358  0a2a					      REPEND
    359  0a2b		       04		      .byte.b	.BANK
    358  0a2b					      REPEND
    359  0a2c		       04		      .byte.b	.BANK
    358  0a2c					      REPEND
    359  0a2d		       04		      .byte.b	.BANK
    358  0a2d					      REPEND
    359  0a2e		       04		      .byte.b	.BANK
    358  0a2e					      REPEND
    359  0a2f		       04		      .byte.b	.BANK
    358  0a2f					      REPEND
    359  0a30		       04		      .byte.b	.BANK
    358  0a30					      REPEND
    359  0a31		       04		      .byte.b	.BANK
    360  0a32					      REPEND
    361  0a32				   .BANK      SET	.BANK + 1
    357  0a32					      REPEND
    358  0a32					      REPEAT	SCREEN_WIDTH
    359  0a32		       05		      .byte.b	.BANK
    358  0a32					      REPEND
    359  0a33		       05		      .byte.b	.BANK
    358  0a33					      REPEND
    359  0a34		       05		      .byte.b	.BANK
    358  0a34					      REPEND
    359  0a35		       05		      .byte.b	.BANK
    358  0a35					      REPEND
    359  0a36		       05		      .byte.b	.BANK
    358  0a36					      REPEND
    359  0a37		       05		      .byte.b	.BANK
    358  0a37					      REPEND
    359  0a38		       05		      .byte.b	.BANK
    358  0a38					      REPEND
    359  0a39		       05		      .byte.b	.BANK
    358  0a39					      REPEND
    359  0a3a		       05		      .byte.b	.BANK
    358  0a3a					      REPEND
    359  0a3b		       05		      .byte.b	.BANK
    360  0a3c					      REPEND
    361  0a3c				   .BANK      SET	.BANK + 1
    357  0a3c					      REPEND
    358  0a3c					      REPEAT	SCREEN_WIDTH
    359  0a3c		       06		      .byte.b	.BANK
    358  0a3c					      REPEND
    359  0a3d		       06		      .byte.b	.BANK
    358  0a3d					      REPEND
    359  0a3e		       06		      .byte.b	.BANK
    358  0a3e					      REPEND
    359  0a3f		       06		      .byte.b	.BANK
    358  0a3f					      REPEND
    359  0a40		       06		      .byte.b	.BANK
    358  0a40					      REPEND
    359  0a41		       06		      .byte.b	.BANK
    358  0a41					      REPEND
    359  0a42		       06		      .byte.b	.BANK
    358  0a42					      REPEND
    359  0a43		       06		      .byte.b	.BANK
    358  0a43					      REPEND
    359  0a44		       06		      .byte.b	.BANK
    358  0a44					      REPEND
    359  0a45		       06		      .byte.b	.BANK
    360  0a46					      REPEND
    361  0a46				   .BANK      SET	.BANK + 1
    357  0a46					      REPEND
    358  0a46					      REPEAT	SCREEN_WIDTH
    359  0a46		       07		      .byte.b	.BANK
    358  0a46					      REPEND
    359  0a47		       07		      .byte.b	.BANK
    358  0a47					      REPEND
    359  0a48		       07		      .byte.b	.BANK
    358  0a48					      REPEND
    359  0a49		       07		      .byte.b	.BANK
    358  0a49					      REPEND
    359  0a4a		       07		      .byte.b	.BANK
    358  0a4a					      REPEND
    359  0a4b		       07		      .byte.b	.BANK
    358  0a4b					      REPEND
    359  0a4c		       07		      .byte.b	.BANK
    358  0a4c					      REPEND
    359  0a4d		       07		      .byte.b	.BANK
    358  0a4d					      REPEND
    359  0a4e		       07		      .byte.b	.BANK
    358  0a4e					      REPEND
    359  0a4f		       07		      .byte.b	.BANK
    360  0a50					      REPEND
    361  0a50				   .BANK      SET	.BANK + 1
    362  0a50					      REPEND
    363  0a50
      0  0a50					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS"
      1  0a50
      2  0a50
      3  0a50		       02 50	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_DRAW_BUFFERS (1K) SIZE =  $250 , FREE= $1b0
      4  0a50					      ECHO	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  0a50				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  0a50				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  0a50				  -	      ERR
      8  0a50					      endif
    365  0a50
    366  0a50
      0  0a50					      CHECK_BANK_SIZE	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS -- full 2K"
      1  0a50		       02 50	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_DRAW_BUFFERS -- full 2K (2K) SIZE =  $250 , FREE= $5b0
      2  0a50					      ECHO	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  0a50				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  0a50				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  0a50				  -	      ERR
      6  0a50					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_ROM_SHADOW_SCORING.asm LEVEL 2 PASS 3
      0  0a50					      include	"BANK_ROM_SHADOW_SCORING.asm"
      1  0a50							;    Sokoboo - a Sokoban implementation
      2  0a50							;    using a generic tile-based display engine for the Atari 2600
      3  0a50							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0a50							;
      5  0a50							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0a50							;
      7  0a50							;    Code related to the generic tile-based display engine was developed by
      8  0a50							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0a50							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0a50							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0a50							;
     12  0a50							;    Code related to music and sound effects uses the TIATracker music player
     13  0a50							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0a50							;    directory for Apache licensing details.
     15  0a50							;
     16  0a50							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0a50							;    See the copyright notices in the License directory for a list of level
     18  0a50							;    contributors.
     19  0a50							;
     20  0a50							;    Except where otherwise indicated, this software is released under the
     21  0a50							;    following licensing arrangement...
     22  0a50							;
     23  0a50							;    This program is free software: you can redistribute it and/or modify
     24  0a50							;    it under the terms of the GNU General Public License as published by
     25  0a50							;    the Free Software Foundation, either version 3 of the License, or
     26  0a50							;    (at your option) any later version.
     27  0a50							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0a50
     29  0a50							;    This program is distributed in the hope that it will be useful,
     30  0a50							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0a50							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0a50							;    GNU General Public License for more details.
     33  0a50
     34  0a50							;------------------------------------------------------------------------------
     35  0a50							;##############################################################################
     36  0a50							;------------------------------------------------------------------------------
      0  0a50					      NEWBANK	ROM_SHADOW_OF_BANK_SCORING
      1  139d ????				      SEG	ROM_SHADOW_OF_BANK_SCORING
      2  1000					      ORG	ORIGIN
      3  1000					      RORG	$F000
      4  1000				   BANK_START SET	*
      5  1000				   ROM_SHADOW_OF_BANK_SCORING SET	ORIGIN / 2048
      6  1000				   ORIGIN     SET	ORIGIN + 2048
      7  1000				   _CURRENT_BANK SET	ROM_SHADOW_OF_BANK_SCORING
     38  1000
     39  1000
     40  1000		       00 9a	   SCORE_COL  =	$9a	;WHITE ;-2
     41  1000		       00 44	   SCORE_COL_HIGH_NTSC =	$44	; works for SECAM and NTSC
     42  1000		       00 66	   SCORE_COL_HIGH_PAL =	$66
     43  1000
     44  1000
     45  1000				   DigitVectorLOr
     46  1000		       31 3f 4d 38*	      .byte.b	<ZeroR-1, <OneR-1, <TwoR-1, <ThreeR-1, <FourR-1, <FiveR-1, <SixR-1, <SevenR-1, <EightR-1, <NineR-1
     47  100a		       00 07 0e 15	      .byte.b	<BLANKR-1, <DequalsR-1, <DplusR-1, <ClockR-1
     48  100e				   DigitVectorLO
     49  100e		       53 61 6e 5a*	      .byte.b	<ZeroL-1, <OneL-1, <TwoL-1, <ThreeL-1, <FourL-1, <FiveL-1, <SixL-1, <SevenL-1, <EightL-1, <NineL-1
     50  1018		       37		      .byte.b	<BLANKL-1
     51  1019
     52  1019
     53  1019		       00 0a	   ID_BLANK   =	10	; DO NOT MAKE 0
     54  1019		       00 0b	   ID_TARGET  =	11
     55  1019		       00 0c	   ID_EXTRA   =	12
     56  1019		       00 0d	   ID_CLOCK   =	13
     57  1019		       00 1b	   ID_HEAD    =	ID_BLANK+16+1
     58  1019
     59  1019							; score patch adresses:
     60  1019				   SMTblLSB
     61  1019				   SMTblTargets
     62  1019		       52 48		      .byte.b	SM_TARGET0+1-SM_BASE, SM_TARGET2+1-SM_BASE
     63  101b				   SMTblTime
     64  101b		       6e 60		      .byte.b	SM_Time0+1-SM_BASE, SM_Time2+1-SM_BASE
     65  101d				   SMTblScore
     66  101d		       1c 20 12 	      .byte.b	SMDIGIT5+1-SM_BASE, SMDIGIT3+1-SM_BASE, SMDIGIT1+1-SM_BASE
     67  1020				   SMTblMSB
     68  1020		       4d 43		      .byte.b	SM_TARGET1+1-SM_BASE, SM_TARGET3+1-SM_BASE
     69  1022		       65 59		      .byte.b	SM_Time1+1-SM_BASE, SM_Time3+1-SM_BASE
     70  1024		       23 17 07 	      .byte.b	SMDIGIT4+1-SM_BASE, SMDIGIT2+1-SM_BASE, SMDIGIT0+1-SM_BASE
     71  1027
     72  1027		       00 00	   SM_OFS_TARGETS =	SMTblTargets - SMTblLSB
     73  1027		       00 02	   SM_OFS_TIME =	SMTblTime - SMTblLSB
     74  1027		       00 04	   SM_OFS_SCORE =	SMTblScore - SMTblLSB
     75  1027
     76  1027				   CharVectorLO
     77  1027		       37		      .byte.b	<BLANKL-1
     78  1028		       ad ad ad ad	      .byte.b	<CharA-1, <CharB-1, <CharC-1, <CharD-1
     79  102c		       ad ad ad ad	      .byte.b	<CharE-1, <CharF-1, <CharG-1, <CharH-1
     80  1030		       ad ad ad ad	      .byte.b	<CharI-1, <CharJ-1, <CharK-1, <CharL-1
     81  1034		       ad ad ad ad	      .byte.b	<CharM-1, <CharN-1, <CharO-1, <CharP-1
     82  1038							;    .byte   <OneL-1,	<TwoL-1,  <ThreeL-1,<FourL-1
     83  1038
     84  1038							; Digit shape definitions are at start of bank so that we don't have page boundary
     85  1038							; crossing issues.
     86  1038
     87  1038							;	  .byte 0	      ; required!
     88  1038
     89  1038		       00 07	   DIGIT_H    =	7	; height of a score digit
     90  1038
     91  1038		       00 00 00 00*BLANKL     ds	7,0
     92  103f
     93  103f
     94  103f
     95  103f				   NineL
     96  103f		       1e		      .byte.b	%00011110
     97  1040		       02		      .byte.b	%00000010
     98  1041		       02		      .byte.b	%00000010
     99  1042		       fe		      .byte.b	%11111110
    100  1043		       82		      .byte.b	%10000010
    101  1044		       82		      .byte.b	%10000010
    102  1045		       fe		      .byte.b	%11111110
    103  1046
    104  1046				   SixL
    105  1046		       fe		      .byte.b	%11111110
    106  1047		       82		      .byte.b	%10000010
    107  1048		       82		      .byte.b	%10000010
    108  1049		       fe		      .byte.b	%11111110
    109  104a		       80		      .byte.b	%10000000
    110  104b		       80		      .byte.b	%10000000
    111  104c		       f0		      .byte.b	%11110000
    112  104d
    113  104d							;    .byte %01111100
    114  104d							;    .byte %11000010
    115  104d							;    .byte %11000010
    116  104d							;    .byte %11111100
    117  104d							;    .byte %11000000
    118  104d							;    .byte %01100000
    119  104d							;    .byte %00111000
    120  104d				   EightL
    121  104d
    122  104d
    123  104d		       fe		      .byte.b	%11111110
    124  104e		       82		      .byte.b	%10000010
    125  104f		       82		      .byte.b	%10000010
    126  1050		       fe		      .byte.b	%11111110
    127  1051		       82		      .byte.b	%10000010
    128  1052		       82		      .byte.b	%10000010
    129  1053		       fe		      .byte.b	%11111110
    130  1054
    131  1054							;  .byte %01111100
    132  1054							;  .byte %10000110
    133  1054							;  .byte %10000110
    134  1054							;  .byte %01111100
    135  1054							;  .byte %01000110
    136  1054							;  .byte %01000110
    137  1054							;  .byte %00111100
    138  1054				   ZeroL
    139  1054							;  .byte %01111100
    140  1054							;  .byte %10000110
    141  1054							;  .byte %10000110
    142  1054							;  .byte %10000110
    143  1054							;  .byte %10000110
    144  1054							;  .byte %01000110
    145  1054							;  .byte %00111100
    146  1054
    147  1054		       fe		      .byte.b	%11111110
    148  1055		       82		      .byte.b	%10000010
    149  1056		       82		      .byte.b	%10000010
    150  1057		       82		      .byte.b	%10000010
    151  1058		       82		      .byte.b	%10000010
    152  1059		       82		      .byte.b	%10000010
    153  105a		       fe		      .byte.b	%11111110
    154  105b
    155  105b				   ThreeL
    156  105b		       fe		      .byte.b	%11111110
    157  105c		       02		      .byte.b	%00000010
    158  105d		       02		      .byte.b	%00000010
    159  105e		       1e		      .byte.b	%00011110
    160  105f		       02		      .byte.b	%00000010
    161  1060		       02		      .byte.b	%00000010
    162  1061		       fe		      .byte.b	%11111110
    163  1062				   OneL
    164  1062		       10		      .byte.b	%00010000
    165  1063		       10		      .byte.b	%00010000
    166  1064		       10		      .byte.b	%00010000
    167  1065		       10		      .byte.b	%00010000
    168  1066		       10		      .byte.b	%00010000
    169  1067		       10		      .byte.b	%00010000
    170  1068		       10		      .byte.b	%00010000
    171  1069
    172  1069				   SevenL
    173  1069
    174  1069		       10		      .byte.b	%00010000
    175  106a		       10		      .byte.b	%00010000
    176  106b		       10		      .byte.b	%00010000
    177  106c		       1e		      .byte.b	%00011110
    178  106d		       02		      .byte.b	%00000010
    179  106e		       02		      .byte.b	%00000010
    180  106f							;  .byte %11111110
    181  106f
    182  106f							;    .byte %00010000
    183  106f							;    .byte %00010000
    184  106f							;    .byte %00010000
    185  106f							;    .byte %00011000
    186  106f							;    .byte %00001100
    187  106f							;    .byte %10000110
    188  106f							;    ;.byte %11111110
    189  106f				   TwoL
    190  106f		       fe		      .byte.b	%11111110
    191  1070		       80		      .byte.b	%10000000
    192  1071		       80		      .byte.b	%10000000
    193  1072		       fe		      .byte.b	%11111110
    194  1073		       02		      .byte.b	%00000010
    195  1074		       02		      .byte.b	%00000010
    196  1075		       fe		      .byte.b	%11111110
    197  1076
    198  1076				   FiveL
    199  1076		       fe		      .byte.b	%11111110
    200  1077		       02		      .byte.b	%00000010
    201  1078		       02		      .byte.b	%00000010
    202  1079		       fe		      .byte.b	%11111110
    203  107a		       80		      .byte.b	%10000000
    204  107b		       80		      .byte.b	%10000000
    205  107c		       f0		      .byte.b	%11110000
    206  107d
    207  107d				   FourL
    208  107d		       10		      .byte.b	%00010000
    209  107e		       10		      .byte.b	%00010000
    210  107f		       10		      .byte.b	%00010000
    211  1080		       fe		      .byte.b	%11111110
    212  1081		       90		      .byte.b	%10010000
    213  1082		       90		      .byte.b	%10010000
    214  1083		       90		      .byte.b	%10010000
    215  1084
    216  1084
    217  1084				   ZL
    218  1084		       7f		      .byte.b	%01111111
    219  1085		       40		      .byte.b	%01000000
    220  1086		       40		      .byte.b	%01000000
    221  1087		       7f		      .byte.b	%01111111
    222  1088		       01		      .byte.b	%00000001
    223  1089		       01		      .byte.b	%00000001
    224  108a		       0f		      .byte.b	%00001111
    225  108b
    226  108b				   EL
    227  108b		       7f		      .byte.b	%01111111
    228  108c		       40		      .byte.b	%01000000
    229  108d		       40		      .byte.b	%01000000
    230  108e		       78		      .byte.b	%01111000
    231  108f		       40		      .byte.b	%01000000
    232  1090		       40		      .byte.b	%01000000
    233  1091		       7f		      .byte.b	%01111111
    234  1092
    235  1092				   RL
    236  1092		       48		      .byte.b	%01001000
    237  1093		       48		      .byte.b	%01001000
    238  1094		       48		      .byte.b	%01001000
    239  1095		       7f		      .byte.b	%01111111
    240  1096		       41		      .byte.b	%01000001
    241  1097		       41		      .byte.b	%01000001
    242  1098		       7f		      .byte.b	%01111111
    243  1099
    244  1099				   PL
    245  1099		       40		      .byte.b	%01000000
    246  109a		       40		      .byte.b	%01000000
    247  109b		       40		      .byte.b	%01000000
    248  109c		       7f		      .byte.b	%01111111
    249  109d		       41		      .byte.b	%01000001
    250  109e		       41		      .byte.b	%01000001
    251  109f		       7f		      .byte.b	%01111111
    252  10a0
    253  10a0				   AL
    254  10a0		       41		      .byte.b	%01000001
    255  10a1		       41		      .byte.b	%01000001
    256  10a2		       41		      .byte.b	%01000001
    257  10a3		       7f		      .byte.b	%01111111
    258  10a4		       41		      .byte.b	%01000001
    259  10a5		       41		      .byte.b	%01000001
    260  10a6		       7f		      .byte.b	%01111111
    261  10a7
    262  10a7				   GL
    263  10a7		       7f		      .byte.b	%01111111
    264  10a8		       41		      .byte.b	%01000001
    265  10a9		       41		      .byte.b	%01000001
    266  10aa		       4f		      .byte.b	%01001111
    267  10ab		       40		      .byte.b	%01000000
    268  10ac		       40		      .byte.b	%01000000
    269  10ad		       7f		      .byte.b	%01111111
    270  10ae
    271  10ae
    272  10ae							; level "name" characters (left only!):
    273  10ae
    274  10ae				   CharN
    275  10ae				   CharK
    276  10ae				   CharH
    277  10ae				   CharA
    278  10ae				   CharJ
    279  10ae				   CharP
    280  10ae				   CharB
    281  10ae				   CharO
    282  10ae				   CharC
    283  10ae				   CharI
    284  10ae				   CharD
    285  10ae				   CharG
    286  10ae				   CharE
    287  10ae				   CharL
    288  10ae				   CharF
    289  10ae				   CharM
    290  10ae		       00 00 00 00*	      ds	7,0
    291  10b5
    292  10b5				   charPlace
    293  10b5		       0c		      .byte.b	%00001100
    294  10b6		       0c		      .byte.b	%00001100
    295  10b7		       0c		      .byte.b	%00001100
    296  10b8		       0c		      .byte.b	%00001100
    297  10b9		       0c		      .byte.b	%00001100
    298  10ba		       00		      .byte.b	%00000000
    299  10bb		       0c		      .byte.b	%00001100
    300  10bc
    301  10bc							;-------------------------------------------------------------------------------------
    302  10bc				   PosTbl
    303  10bc		       40		      .byte.b	$40
    304  10bd		       31 22 13 04*	      .byte.b	$31, $22, $13, $04, $f5, $e6, $d7, $c8
    305  10c5		       b9		      .byte.b	$b9
    306  10c6
    307  10c6
    308  10c6							;------------------------------------------------------------------------------
    309  10c6							; RAM-BASED SUBROUTINES...
    310  10c6							; NOTE: When calling these routines, remember you are actually calling the ROM routine
    311  10c6							; as it is the ROM bank that is switched in.  The first thing to do to access the RAM
    312  10c6							; is to switch the appropriate RAM bank in.  It would be nicer to be able to direct-call
    313  10c6							; the RAM-based routine.
    314  10c6
    315  1100		       00 00 00 00*	      ALIGN	256	; so SM code needs no HI table
    316  1100
    317  1100		       f1 00	   SM_BASE    =	.
    318  1100
    319  1100							;#IF 0 ;{
    320  1100							;    DEFINE_SUBROUTINE Score3x3
    321  1100							;
    322  1100							;	  sta	  RESP0
    323  1100							;	   sta	   RESP1
    324  1100							;	   lda	   #$$000
    325  1100							;	    sta     GRP0
    326  1100							;	    lda     #$$009
    327  1100							;	    sta     GRP1
    328  1100							;	    lda     #$$202
    329  1100							;	    sta     ENABL
    330  1100							;	    nop
    331  1100							;	    nop
    332  1100							;	    nop
    333  1100							;	    lda     #$$016
    334  1100							;	    ldy     #$$100
    335  1100							;	    ldx     #$$109
    336  1100							;	    sta     GRP0    ; Critical time is right here
    337  1100							;	    stx     GRP1
    338  1100							;	    sty     GRP0
    339  1100							;	    sta     RESP0
    340  1100							;	    sta     RESP1
    341  1100							;	    ldx     #$$116
    342  1100							;	    lda     #$$209
    343  1100							;	    stx     GRP0
    344  1100							;	    sta     GRP1
    345  1100							;	    lda     #$$200
    346  1100							;	    sta     GRP0
    347  1100							;	    sta     RESP0
    348  1100							;	    sta     RESP1
    349  1100							;	    lda     #$$216
    350  1100							;	    nop
    351  1100							;	    sta     GRP0
    352  1100							;
    353  1100							;	      rts
    354  1100							;#ENDIF ;}
    355  1100
    356  1100
    357  1100							;------------------------------------------------------------------------------
    358  1100				   Score1x6Fix SUBROUTINE
      0  1100					      DEFINE_SUBROUTINE	DrawDigits1x6
      1  1100		       00 02	   BANK_DrawDigits1x6 =	_CURRENT_BANK
      2  1100					      SUBROUTINE
      3  1100				   DrawDigits1x6
    360  1100							;					     @07
    361  1100		       ba		      tsx		; 2
    362  1101
    363  1101		       20 02 f2 	      jsr	PrepareDrawDigits	;56 = 58    @65
    364  1104
    365  1104		       86 da		      stx	tmpStack	; 3 =	3
    366  1106
    367  1106				   LoopDraw1x6		;
    368  1106				   SMDIGIT0
    369  1106		       b9 31 f3 	      lda	ZeroR-1,y	; 4
    370  1109		       85 42		      sta	WSYNC	; 3
    371  110b							;---------------------------------------------------------------
    372  110b		       85 6a		      sta	HMOVE	; 3
      0  110d					      SLEEP	3	; 3 =	6
      1  110d				   .CYCLES    SET	3
      2  110d
      3  110d				  -	      IF	.CYCLES < 2
      4  110d				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  110d				  -	      ERR
      6  110d					      ENDIF
      7  110d
      8  110d					      IF	.CYCLES & 1
      9  110d					      IFNCONST	NO_ILLEGAL_OPCODES
     10  110d		       04 00		      nop	0
     11  110f				  -	      ELSE
     12  110f				  -	      bit	VSYNC
     13  110f					      ENDIF
     14  110f				   .CYCLES    SET	.CYCLES - 3
     15  110f					      ENDIF
     16  110f
     17  110f				  -	      REPEAT	.CYCLES / 2
     18  110f				  -	      nop
     19  110f					      REPEND
    374  110f		       85 5b		      sta	GRP0	; 3
    375  1111				   SMDIGIT1
    376  1111		       b9 53 f0 	      lda	ZeroL-1,y	; 4
    377  1114		       85 5c		      sta	GRP1	; 3
    378  1116				   SMDIGIT2
    379  1116		       b9 31 f3 	      lda	ZeroR-1,y	; 4
    380  1119		       85 5b		      sta	GRP0	; 3 = 17
    381  111b				   SMDIGIT5
    382  111b		       be 53 f0 	      ldx	ZeroL-1,y	; 4
    383  111e		       9a		      txs		; 2
    384  111f				   SMDIGIT3
    385  111f		       be 53 f0 	      ldx	ZeroL-1,y	; 4
    386  1122				   SMDIGIT4
    387  1122		       b9 31 f3 	      lda	ZeroR-1,y	; 4
    388  1125		       85 6b		      sta	HMCLR	; 3
    389  1127		       86 5c		      stx	GRP1	; 3
    390  1129		       85 5b		      sta	GRP0	; 3 = 23
    391  112b
    392  112b		       ba		      tsx		; 2
    393  112c		       86 5c		      stx	GRP1	; 3
    394  112e		       85 5b		      sta	GRP0	; 3 =	8
    395  1130
    396  1130		       88		      dey		; 2
      0  1131					      CHECKPAGE_BNE	LoopDraw1x6	;2/3= 5    @58/59
      8  1131					      LIST	ON
      9  1131		       d0 d3		      bne	LoopDraw1x6
    398  1133
    399  1133		       a6 da		      ldx	tmpStack	; 3
    400  1135		       9a		      txs		; 2
    401  1136				   ExitDigitKernel6
      0  1136					      SLEEP	3	; 3
      1  1136				   .CYCLES    SET	3
      2  1136
      3  1136				  -	      IF	.CYCLES < 2
      4  1136				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  1136				  -	      ERR
      6  1136					      ENDIF
      7  1136
      8  1136					      IF	.CYCLES & 1
      9  1136					      IFNCONST	NO_ILLEGAL_OPCODES
     10  1136		       04 00		      nop	0
     11  1138				  -	      ELSE
     12  1138				  -	      bit	VSYNC
     13  1138					      ENDIF
     14  1138				   .CYCLES    SET	.CYCLES - 3
     15  1138					      ENDIF
     16  1138
     17  1138				  -	      REPEAT	.CYCLES / 2
     18  1138				  -	      nop
     19  1138					      REPEND
    403  1138		       4c 77 f1 	      jmp	ExitDigitKernel	; 3 = 11    @69
    404  113b
    405  113b
    406  113b							;------------------------------------------------------------------------------
    407  113b				   Score2x4Fix SUBROUTINE
      0  113b					      DEFINE_SUBROUTINE	DrawDigits2x4
      1  113b		       00 02	   BANK_DrawDigits2x4 =	_CURRENT_BANK
      2  113b					      SUBROUTINE
      3  113b				   DrawDigits2x4
    409  113b
    410  113b
    411  113b							; Subroutine by Thomas Jentzsch.  Magic!
    412  113b							; This subroutine draws two 4-digit scores on the screen, side-by-side. Amazing!
    413  113b
    414  113b							;sta COLUBK
    415  113b
    416  113b		       20 02 f2 	      jsr	PrepareDrawDigits	;56 = 56    @63
    417  113e
    418  113e		       85 6a		      sta	HMOVE	; 3
      0  1140					      SLEEP	4	; 4  =  7
      1  1140				   .CYCLES    SET	4
      2  1140
      3  1140				  -	      IF	.CYCLES < 2
      4  1140				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  1140				  -	      ERR
      6  1140					      ENDIF
      7  1140
      8  1140				  -	      IF	.CYCLES & 1
      9  1140				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  1140				  -	      nop	0
     11  1140				  -	      ELSE
     12  1140				  -	      bit	VSYNC
     13  1140				  -	      ENDIF
     14  1140				  -.CYCLES    SET	.CYCLES - 3
     15  1140					      ENDIF
     16  1140
     17  1140					      REPEAT	.CYCLES / 2
     18  1140		       ea		      nop
     17  1140					      REPEND
     18  1141		       ea		      nop
     19  1142					      REPEND
    420  1142
    421  1142				   LoopDraw2x4		;	     @70
    422  1142				   SM_TARGET3
    423  1142		       b9 07 f3 	      lda	DequalsR-1,y	; 4		     G
    424  1145							;---------------------------------------------------------------
    425  1145		       85 5b		      sta	GRP0	; 3
    426  1147				   SM_TARGET2
    427  1147		       b9 53 f0 	      lda	ZeroL-1,y	; 4		     A
    428  114a		       85 5c		      sta	GRP1	; 3
    429  114c				   SM_TARGET1
    430  114c		       b9 31 f3 	      lda	ZeroR-1,y	; 4		     M
    431  114f		       85 5b		      sta	GRP0	; 3
    432  1151				   SM_TARGET0
    433  1151		       be 53 f0 	      ldx	ZeroL-1,y	; 4		     E
    434  1154		       85 50		      sta	RESP0	; 3 = 28    @22
    435  1156		       85 51		      sta	RESP1	; 3 =	3    @25
    436  1158				   SM_Time3
    437  1158		       b9 15 f3 	      lda	ClockR-1,y	; 4		     O
    438  115b		       86 5c		      stx	GRP1	; 3
    439  115d		       85 5b		      sta	GRP0	; 3
    440  115f				   SM_Time2
    441  115f		       b9 53 f0 	      lda	ZeroL-1,y	; 4		     V
    442  1162		       85 5c		      sta	GRP1	; 3
    443  1164				   SM_Time1
    444  1164		       b9 31 f3 	      lda	ZeroR-1,y	; 4		     E
    445  1167		       85 5b		      sta	GRP0	; 3
    446  1169		       85 50		      sta	RESP0	; 3 = 27    @52 (was 54)
    447  116b		       85 51		      sta	RESP1	; 3 =	3    @55
    448  116d				   SM_Time0
    449  116d		       b9 53 f0 	      lda	ZeroL-1,y	; 4		     R
    450  1170		       85 5c		      sta	GRP1	; 3
    451  1172		       85 5b		      sta	GRP0	; 3
    452  1174		       88		      dey		; 2
      0  1175					      CHECKPAGE_BNE	LoopDraw2x4	;2/3=15    @70
      8  1175					      LIST	ON
      9  1175		       d0 cb		      bne	LoopDraw2x4
    454  1177
    455  1177				   ExitDigitKernel		;	     @69
    456  1177		       84 5b		      sty	GRP0	; 3
    457  1179		       84 5c		      sty	GRP1	; 3
    458  117b							;---------------------------------------------------------------
    459  117b		       84 5b		      sty	GRP0	; 3	     @02
    460  117d
    461  117d							; Contribution by Thomas Jentzsch
    462  117d							; Rewrite/Optimised for single sprite AD
    463  117d
    464  117d		       a6 9f		      ldx	ManDrawX	; 3
    465  117f		       bd bc f0 	      lda	PosTbl,x	; 4
    466  1182		       85 60		      sta	HMP0	; 3
    467  1184		       29 0f		      and	#$0f	; 2
    468  1186		       f0 04		      beq	.zeroPos	; 2/3=15
    469  1188		       aa		      tax		; 2
    470  1189				   .loopWait
    471  1189		       ca		      dex		; 2
    472  118a		       d0 fd		      bne	.loopWait	; 2/3= 6
    473  118c				   .zeroPos
    474  118c		       a2 70		      ldx	#$70	; 2	     magic value #1 for Cosmic Ark stars
    475  118e		       85 50		      sta	RESP0	; 3 =	5    @22..67 (@look around!)
    476  1190
    477  1190		       85 42		      sta	WSYNC
    478  1192		       85 6a		      sta	HMOVE	; 3
    479  1194
    480  1194		       a5 b1		      lda	BGColour	; 3
    481  1196		       85 49		      sta	COLUBK	;3
    482  1198
    483  1198		       86 62		      stx	HMM0	; 3	     for extra life stars!
    484  119a
    485  119a		       a9 15		      lda	#%00010101	; 2	 double width missile, double width player
    486  119c		       85 44		      sta	NUSIZ0	; 3
    487  119e		       85 45		      sta	NUSIZ1
    488  11a0		       84 65		      sty	VDELP0	; 3	 y = 0!
    489  11a2
      0  11a2					      SLEEP	5
      1  11a2				   .CYCLES    SET	5
      2  11a2
      3  11a2				  -	      IF	.CYCLES < 2
      4  11a2				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  11a2				  -	      ERR
      6  11a2					      ENDIF
      7  11a2
      8  11a2					      IF	.CYCLES & 1
      9  11a2					      IFNCONST	NO_ILLEGAL_OPCODES
     10  11a2		       04 00		      nop	0
     11  11a4				  -	      ELSE
     12  11a4				  -	      bit	VSYNC
     13  11a4					      ENDIF
     14  11a4				   .CYCLES    SET	.CYCLES - 3
     15  11a4					      ENDIF
     16  11a4
     17  11a4					      REPEAT	.CYCLES / 2
     18  11a4		       ea		      nop
     19  11a5					      REPEND
    491  11a5
    492  11a5		       a5 a2		      lda	ManLastDirection	; 3
    493  11a7		       85 4b		      sta	REFP0	; 3
    494  11a9
    495  11a9							;sta WSYNC		  ; 3
    496  11a9		       60		      rts		; 6	     @21
    497  11aa
    498  11aa							;------------------------------------------------------------------------------
    499  11aa				   Score3x2Fix SUBROUTINE
      0  11aa					      DEFINE_SUBROUTINE	DrawDigits3x2
      1  11aa		       00 02	   BANK_DrawDigits3x2 =	_CURRENT_BANK
      2  11aa					      SUBROUTINE
      3  11aa				   DrawDigits3x2
    501  11aa							;					     @07
    502  11aa		       a9 16		      lda	#%010110	; 2
    503  11ac		       a0 ef		      ldy	#$f0-1	; 2		     moved slightly out of center to match 1x6 display position
    504  11ae		       20 08 f2 	      jsr	PrepareDrawDigits2	;49 = 53    @60
    505  11b1
    506  11b1		       a9 00		      lda	#0
    507  11b3		       85 66		      sta	VDELP1
    508  11b5				   LoopDraw3x2		;
    509  11b5		       85 42		      sta	WSYNC	; 3
    510  11b7							;---------------------------------------------------------------
    511  11b7		       85 6a		      sta	HMOVE	; 3 =	3
    512  11b9		       b9 ad f0 	      lda	CharP-1,y	; 4
    513  11bc		       85 5b		      sta	GRP0	; 3
    514  11be				   SMPLAYER
    515  11be		       b9 3f f3 	      lda	OneR-1,y	; 4
    516  11c1		       85 5c		      sta	GRP1	; 3 = 14    @17
    517  11c3		       b9 b4 f0 	      lda	charPlace-1,y	; 4
    518  11c6				   SMMEN
    519  11c6		       be 38 f3 	      ldx	ThreeR-1,y	; 4 =	8
      0  11c9					      SLEEP	5	;   =	5
      1  11c9				   .CYCLES    SET	5
      2  11c9
      3  11c9				  -	      IF	.CYCLES < 2
      4  11c9				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  11c9				  -	      ERR
      6  11c9					      ENDIF
      7  11c9
      8  11c9					      IF	.CYCLES & 1
      9  11c9					      IFNCONST	NO_ILLEGAL_OPCODES
     10  11c9		       04 00		      nop	0
     11  11cb				  -	      ELSE
     12  11cb				  -	      bit	VSYNC
     13  11cb					      ENDIF
     14  11cb				   .CYCLES    SET	.CYCLES - 3
     15  11cb					      ENDIF
     16  11cb
     17  11cb					      REPEAT	.CYCLES / 2
     18  11cb		       ea		      nop
     19  11cc					      REPEND
    521  11cc		       85 5b		      sta	GRP0	; 3
    522  11ce				   SMLEVELX
    523  11ce		       b9 ad f0 	      lda	CharA-1,y	; 4
    524  11d1		       85 6b		      sta	HMCLR	; 3 = 10    @40
    525  11d3		       86 5c		      stx	GRP1	; 3 =	3    @43
    526  11d5		       85 5b		      sta	GRP0	; 3
    527  11d7				   SMLEVEL
    528  11d7		       b9 3f f3 	      lda	OneR-1,y	; 4
    529  11da		       85 5c		      sta	GRP1	; 3 = 10    @53
    530  11dc
    531  11dc		       88		      dey		; 2
      0  11dd					      CHECKPAGE_BNE	LoopDraw3x2	;2/3= 5    @58
      8  11dd					      LIST	ON
      9  11dd		       d0 d6		      bne	LoopDraw3x2
    533  11df							;					     @57
      0  11df					      SLEEP	3	; 3
      1  11df				   .CYCLES    SET	3
      2  11df
      3  11df				  -	      IF	.CYCLES < 2
      4  11df				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  11df				  -	      ERR
      6  11df					      ENDIF
      7  11df
      8  11df					      IF	.CYCLES & 1
      9  11df					      IFNCONST	NO_ILLEGAL_OPCODES
     10  11df		       04 00		      nop	0
     11  11e1				  -	      ELSE
     12  11e1				  -	      bit	VSYNC
     13  11e1					      ENDIF
     14  11e1				   .CYCLES    SET	.CYCLES - 3
     15  11e1					      ENDIF
     16  11e1
     17  11e1				  -	      REPEAT	.CYCLES / 2
     18  11e1				  -	      nop
     19  11e1					      REPEND
    535  11e1		       4c 36 f1 	      jmp	ExitDigitKernel6	; 9 = 12    @69  'BEQ' WAS A DANGEROUS ASSUMPTION OF STATUS FLAG!!
    536  11e4
    537  11e4
    538  11e4							;------------------------------------------------------------------------------
    539  11e4
    540  11e4				   ScoreKernelLo
    541  11e4		       3b		      .byte.b	<Score2x4Fix	; TARGETs, time
    542  11e5		       00		      .byte.b	<Score1x6Fix	; score
    543  11e6		       aa		      .byte.b	<Score3x2Fix	; player, lives, level
    544  11e7		       00		      .byte.b	<Score1x6Fix	; high score
    545  11e8
      0  11e8					      CHECKPAGE	DrawDigits1x6	; AD: the jump requires all in the same page, so let's enforce that
      8  11e8					      LIST	ON
    547  11e8
    548  11e8							;------------------------------------------------------------------------------
    549  11e8
      0  11e8					      DEFINE_SUBROUTINE	DrawDigits
      1  11e8		       00 02	   BANK_DrawDigits =	_CURRENT_BANK
      2  11e8					      SUBROUTINE
      3  11e8				   DrawDigits
    551  11e8
    552  11e8				   VblankLoopGame
    553  11e8		       ac 84 02 	      ldy	INTIM
    554  11eb		       d0 fb		      bne	VblankLoopGame
    555  11ed
    556  11ed					      IF	WAIT_FOR_INITIAL_DRAW
    557  11ed		       a4 ae		      ldy	blankState
    558  11ef		       f0 02		      beq	state0
    559  11f1		       a0 02		      ldy	#2
    560  11f3				   state0
    561  11f3					      ENDIF
    562  11f3		       84 41		      sty	VBLANK	; 3	     <-- 0
    563  11f5							;lda scoringFlags	  ; 3
    564  11f5							;and #DISPLAY_FLAGS		    ; 2
    565  11f5							;tax			  ; 2
    566  11f5
    567  11f5		       a2 00		      ldx	#0
    568  11f7
    569  11f7							;    DEFINE_SUBROUTINE DrawDigit2
    570  11f7							;
    571  11f7							;    ; Generic interface to scoring routine
    572  11f7
    573  11f7		       bd e4 f1 	      lda	ScoreKernelLo,x	; 4
    574  11fa
    575  11fa		       85 42		      sta	WSYNC	; 3
    576  11fc		       8d 00 f6 	      sta	SMJUMP+1+RAM_WRITE	; 4
    577  11ff				   SMJUMP
    578  11ff		       4c 00 f1 	      jmp	DrawDigits1x6	; 3 =	7    @07
    579  1202
    580  1202							;---------------------------------------------------------------
    581  1202
      0  1202					      DEFINE_SUBROUTINE	PrepareDrawDigits
      1  1202		       00 02	   BANK_PrepareDrawDigits =	_CURRENT_BANK
      2  1202					      SUBROUTINE
      3  1202				   PrepareDrawDigits
    583  1202							;					     @13
    584  1202		       a0 d1		      ldy	#$d1	; 2
    585  1204		       a9 13		      lda	#%010011	; 2
    586  1206		       85 66		      sta	VDELP1	; 3 =	7
    587  1208				   PrepareDrawDigits2		;	    @17/20
    588  1208		       84 65		      sty	VDELP0	; 3 =	3
    589  120a
    590  120a		       85 45		      sta	NUSIZ1	; 3
    591  120c		       85 44		      sta	NUSIZ0	; 3 =	6
    592  120e
    593  120e		       8d 4b 00 	      sta.w	REFP0	; 4		     bit 3 is always clear
    594  1211		       85 50		      sta	RESP0	; 3	     @33/36
    595  1213		       85 51		      sta	RESP1	; 3 = 10    @36/39
    596  1215
    597  1215		       84 60		      sty	HMP0	; 3
    598  1217		       c8		      iny		; 2
    599  1218		       84 61		      sty	HMP1	; 3 =	8
    600  121a				   SMCOLOR
    601  121a		       a0 9a		      ldy	#SCORE_COL	; 2
    602  121c		       84 46		      sty	COLUP0	; 3
    603  121e		       84 47		      sty	COLUP1	; 3 =	8
    604  1220
    605  1220		       a0 07		      ldy	#DIGIT_H	; 2
    606  1222		       60		      rts		; 6 =	8
    607  1223							; total: 27
    608  1223
    609  1223
    610  1223							;------------------------------------------------------------------------------
      0  1223					      DEFINE_SUBROUTINE	UpdateScore
      1  1223		       00 02	   BANK_UpdateScore =	_CURRENT_BANK
      2  1223					      SUBROUTINE
      3  1223				   UpdateScore
    612  1223							; a = added score value
    613  1223
    614  1223							; initially switch to score:
    615  1223		       a0 01		      ldy	#DISPLAY_SCORE
    616  1225		       84 da		      sty	newDisplay
    617  1227
    618  1227		       18		      clc
    619  1228		       f8		      sed
    620  1229		       a0 04		      ldy	#SM_OFS_SCORE
    621  122b				   .loopScore
    622  122b		       79 8a f3 	      adc	ScoreCurrent-SM_OFS_SCORE,y
    623  122e		       99 8a f7 	      sta	ScoreCurrent-SM_OFS_SCORE+RAM_WRITE,y
    624  1231		       08		      php
    625  1232							; *** bonus life every 500 points: ***
    626  1232							;	  cpy #SM_OFS_SCORE+1
    627  1232							;	  bne .skipBonusLife
    628  1232							;	  tax
    629  1232
    630  1232							;	  and #$0f
    631  1232							;	  beq .bonusLife		      ; 000?
    632  1232							;	  cmp #$05
    633  1232							;	  bne .noBonusLife		      ; 500?
    634  1232							;.bonusLife:
    635  1232							; add extra life, limited to 9
    636  1232
    637  1232							;	  lda ManCount
    638  1232							;	  and #$0f
    639  1232							;	  cmp #9
    640  1232							;	  bcs .noBonusLife
    641  1232							;	  inc ManCount
    642  1232
    643  1232							; bonus life has priority over score:
    644  1232							;	  lda #DISPLAY_LIVES
    645  1232							;	  sta newDisplay
    646  1232							;lda #EXTRA_LIFE_TIMER
    647  1232							;sta extraLifeTimer
    648  1232
    649  1232				   .noBonusLife
    650  1232		       8a		      txa
    651  1233				   .skipBonusLife
    652  1233		       20 ae f2 	      jsr	SetupBCDPtr
    653  1236		       28		      plp
    654  1237		       a9 00		      lda	#0
    655  1239		       b0 f0		      bcs	.loopScore
    656  123b		       d8		      cld
    657  123c
    658  123c							; switch display
    659  123c							;lda scoringFlags
    660  123c							;and #DISPLAY_FLAGS
    661  123c							;cmp newDisplay		      ; lower priority than current?
    662  123c							;beq .restartTime
    663  123c							;bcs .skipNew
    664  123c							;eor scoringFlags		      ; remove existing score mode
    665  123c							;ora newDisplay		      ; switch to new score mode
    666  123c							;sta scoringFlags
    667  123c				   .restartTime
    668  123c							;lda #SCORING_TIMER		      ; maybe always restart timer?
    669  123c							;sta scoringTimer
    670  123c				   .skipNew
    671  123c
    672  123c		       60		      rts
    673  123d
    674  123d							;---------------------------------------------------------------------------
    675  123d
      0  123d					      DEFINE_SUBROUTINE	SwapPlayers
      1  123d		       00 02	   BANK_SwapPlayers =	_CURRENT_BANK
      2  123d					      SUBROUTINE
      3  123d				   SwapPlayers
    677  123d
    678  123d							; assume no new high score:
    679  123d		       a0 ff		      ldy	#-1
    680  123f		       84 dd		      sty	highScoreSK
    681  1241
    682  1241							; update highscore after last live:
    683  1241							;lda ManCount
    684  1241							;and #$0f			      ; player has lives left?
    685  1241							;bne .playerAlive		      ; YES, so we don't check high score
    686  1241
    687  1241							; check for a new high score:
    688  1241							;	  ldy #-1
    689  1241		       18		      clc		; score has to be at least 1 bigger!
    690  1242				   .loopCheckHighScore
    691  1242		       c8		      iny
    692  1243		       b9 8e f3 	      lda	ScoreCurrent,y
    693  1246		       f9 98 f3 	      sbc	HighScore,y
    694  1249		       98		      tya
    695  124a		       49 02		      eor	#2
    696  124c		       d0 f4		      bne	.loopCheckHighScore
    697  124e		       90 0d		      bcc	.noHighScore
    698  1250
    699  1250							; new high score, update:
    700  1250		       a2 04		      ldx	#5-1
    701  1252				   .loopSetHighScore
    702  1252		       bd 8e f3 	      lda	ScoreCurrent,x
    703  1255		       9d 98 f7 	      sta	HighScore+RAM_WRITE,x
    704  1258		       95 dd		      sta	highScoreSK,x
    705  125a		       ca		      dex
    706  125b		       10 f5		      bpl	.loopSetHighScore
    707  125d				   .noHighScore
    708  125d
    709  125d				   .playerAlive
    710  125d							;lda ManCount
    711  125d							;and #$f0			      ; other player has lives left?
    712  125d							;beq .otherPlayerDead		      ; NO, so we don't swap scores
    713  125d
    714  125d							; save the current player variables to the player's backup:
    715  125d		       a0 02		      ldy	#3-1
    716  125f				   .swapScore
    717  125f		       be 93 f3 	      ldx	PlayerScores,y
    718  1262		       b9 8e f3 	      lda	ScoreCurrent,y
    719  1265		       99 93 f7 	      sta	PlayerScores+RAM_WRITE,y
    720  1268		       8a		      txa
    721  1269		       99 8e f7 	      sta	ScoreCurrent+RAM_WRITE,y
    722  126c		       88		      dey
    723  126d		       10 f0		      bpl	.swapScore
    724  126f
    725  126f							; swap levelx and level:
    726  126f		       a2 01		      ldx	#1
    727  1271				   .loopLevelXLevel
    728  1271		       bc 96 f3 	      ldy	PlayerLevelX,x
    729  1274		       b5 b2		      lda	levelX,x
    730  1276		       9d 96 f7 	      sta	PlayerLevelX+RAM_WRITE,x
    731  1279		       94 b2		      sty	levelX,x
    732  127b		       ca		      dex
    733  127c		       10 f3		      bpl	.loopLevelXLevel
    734  127e
    735  127e				   .otherPlayerDead
    736  127e		       60		      rts
    737  127f
    738  127f							;---------------------------------------------------------------------------
    739  127f
    740  127f				   HighScoreColTbl
    741  127f		       44 44		      .byte.b	SCORE_COL_HIGH_NTSC, SCORE_COL_HIGH_NTSC
    742  1281		       66 66		      .byte.b	SCORE_COL_HIGH_PAL, SCORE_COL_HIGH_PAL
    743  1283
      0  1283					      DEFINE_SUBROUTINE	GeneralScoringSetups
      1  1283		       00 02	   BANK_GeneralScoringSetups =	_CURRENT_BANK
      2  1283					      SUBROUTINE
      3  1283				   GeneralScoringSetups
    745  1283
    746  1283		       a0 04		      ldy	#SM_OFS_SCORE
    747  1285				   .loopScore2
    748  1285							;lda scoringFlags
    749  1285							;and #DISPLAY_FLAGS
    750  1285							;cmp #DISPLAY_HIGH
    751  1285							;ldx Platform
    752  1285							;lda HighScoreColTbl,x
    753  1285							;tax
    754  1285							;lda HighScore-SM_OFS_SCORE,y
    755  1285							;bcs .showHighScore
    756  1285		       a2 9a		      ldx	#SCORE_COL
    757  1287		       b9 8a f3 	      lda	ScoreCurrent-SM_OFS_SCORE,y
    758  128a				   .showHighScore
    759  128a		       8e 1b f6 	      stx	SMCOLOR+1+RAM_WRITE
    760  128d		       20 ae f2 	      jsr	SetupBCDPtr
    761  1290		       c0 07		      cpy	#SM_OFS_SCORE+3
    762  1292		       90 f1		      bcc	.loopScore2
    763  1294
    764  1294							; display number of lives in leftmost digit of middle score XX nX XX
    765  1294
    766  1294							;lda ManCount
    767  1294							;and #$0f
    768  1294							;tay
    769  1294							;lda DigitVectorLOr,y
    770  1294							;sta SMMEN+1+RAM_WRITE
    771  1294
    772  1294							; modify player number pointer (Xp XX XX)
    773  1294
    774  1294							;ldy whichPlayer
    775  1294							;lda DigitVectorLOr+1,y
    776  1294							;sta SMPLAYER+1+RAM_WRITE
    777  1294
    778  1294							; fall through
    779  1294
    780  1294							;    ;---------------------------------------------------------------------------
    781  1294
    782  1294							; modify levelx character pointer (XX XX cX)
    783  1294
    784  1294							;ldx #<charPlace-1
    785  1294							;lda levelDisplay
    786  1294							;cmp #$80
    787  1294							;and #$1f
    788  1294							;tay
    789  1294							;bcs .intermission
    790  1294							;ldx CharVectorLO,y
    791  1294							;ldy level
    792  1294							;.intermission
    793  1294							;stx SMLEVELX+1+RAM_WRITE
    794  1294
    795  1294							; modify level number pointer (XX XX Xl)
    796  1294
    797  1294							;lda DigitVectorLOr+1,y
    798  1294							;sta SMLEVEL+1+RAM_WRITE
    799  1294
    800  1294							;---------------------------------------------------------------------------
    801  1294
    802  1294		       4c a5 f2 	      jmp	SetupTimePtr	; modify time pointers
    803  1297
    804  1297							;------------------------------------------------------------------------------
    805  1297							;    DEFINE_SUBROUTINE SetupGameOverPtr
    806  1297
    807  1297							;		  ldy #8-1
    808  1297							;.loopGameOver:
    809  1297							;		  ldx SMGameOverOfs,y
    810  1297							;		  lda SMGameOverPtr,y
    811  1297							;		  sta SM_BASE+1+RAM_WRITE,x
    812  1297							;		  dey
    813  1297							;		  bpl .loopGameOver
    814  1297
    815  1297							;		  rts
    816  1297
    817  1297							;SMGameOverOfs:
    818  1297							;		  .byte <SM_TARGET3-SM_BASE, <SM_TARGET2-SM_BASE
    819  1297							;		  .byte <SM_TARGET1-SM_BASE, <SM_TARGET0-SM_BASE
    820  1297							;		  .byte <SM_Time3-SM_BASE, <SM_Time2-SM_BASE
    821  1297							;		  .byte <SM_Time1-SM_BASE, <SM_Time0-SM_BASE
    822  1297							;SMGameOverPtr:
    823  1297							;		  .byte <CharG-1, <CharAL-1, <CharM-1, <CharEL-1
    824  1297							;		  .byte <CharO-1, <CharVL-1, <CharE-1, <CharRL-1
    825  1297
    826  1297							;------------------------------------------------------------------------------
    827  1297
      0  1297					      DEFINE_SUBROUTINE	DrawBCD_targetsRequired
      1  1297		       00 02	   BANK_DrawBCD_targetsRequired =	_CURRENT_BANK
      2  1297					      SUBROUTINE
      3  1297				   DrawBCD_targetsRequired
    829  1297							; Show current TARGET counter in the top left
    830  1297
    831  1297		       a0 00		      ldy	#SM_OFS_TARGETS
    832  1299		       a5 b5		      lda	BCD_targetsRequired
    833  129b		       20 ae f2 	      jsr	SetupBCDPtr
    834  129e
    835  129e		       a9 b0		      lda	#ID_TARGET<<4	; if no extra targets, display the normal icon
    836  12a0							;bit scoringFlags		      ;
    837  12a0		       4c ae f2 	      jmp	SetupBCDPtr
    838  12a3							;lda #ID_EXTRA<<4		      ; otherwise, display the extra icon
    839  12a3							;bvc SetupBCDPtr
    840  12a3							;ora #1			      ; display 1xx targets
    841  12a3							;bne SetupBCDPtr		      ; unconditional
    842  12a3
    843  12a3							;------------------------------------------------------------------------------
      0  12a3					      DEFINE_SUBROUTINE	DrawTime
      1  12a3		       00 02	   BANK_DrawTime =	_CURRENT_BANK
      2  12a3					      SUBROUTINE
      3  12a3				   DrawTime
    845  12a3
    846  12a3							; mid-digit-change, but we may be required to flash/display
    847  12a3		       a0 02		      ldy	#SM_OFS_TIME
    848  12a5							;------------------------------------------------------------------------------
      0  12a5					      DEFINE_SUBROUTINE	SetupTimePtr
      1  12a5		       00 02	   BANK_SetupTimePtr =	_CURRENT_BANK
      2  12a5					      SUBROUTINE
      3  12a5				   SetupTimePtr
    850  12a5
    851  12a5		       a5 b6		      lda	BCD_moveCounter
    852  12a7		       20 ae f2 	      jsr	SetupBCDPtr
    853  12aa		       a5 b7		      lda	BCD_moveCounter+1
    854  12ac		       09 d0		      ora	#ID_CLOCK<<4
    855  12ae
    856  12ae							; fall through
    857  12ae
    858  12ae							;------------------------------------------------------------------------------
      0  12ae					      DEFINE_SUBROUTINE	SetupBCDPtr
      1  12ae		       00 02	   BANK_SetupBCDPtr =	_CURRENT_BANK
      2  12ae					      SUBROUTINE
      3  12ae				   SetupBCDPtr
    860  12ae
    861  12ae							; a = BCD value
    862  12ae							; y = SM table offset
    863  12ae
    864  12ae		       48		      pha
    865  12af		       29 0f		      and	#$0f
    866  12b1		       aa		      tax
    867  12b2		       bd 0e f0 	      lda	DigitVectorLO,x	; low nibble: left aligned chars
    868  12b5		       be 19 f0 	      ldx	SMTblLSB,y
    869  12b8		       9d 00 f5 	      sta	SM_BASE+RAM_WRITE,x
    870  12bb		       68		      pla
    871  12bc		       4a		      lsr
    872  12bd		       4a		      lsr
    873  12be		       4a		      lsr
    874  12bf		       4a		      lsr
    875  12c0		       aa		      tax
    876  12c1		       bd 00 f0 	      lda	DigitVectorLOr,x	; high nibble: right aligned chars
    877  12c4		       be 20 f0 	      ldx	SMTblMSB,y
    878  12c7		       9d 00 f5 	      sta	SM_BASE+RAM_WRITE,x
    879  12ca
    880  12ca		       c8		      iny
    881  12cb
    882  12cb		       a5 bf		      lda	ROM_Bank
    883  12cd				   RTS
    884  12cd		       60		      rts
    885  12ce
      0  12ce					      OPTIONAL_PAGEBREAK	"LeftDigits", (DIGIT_H*13)	; cannot index across page!
 PAGE BREAK INSERTED FOR  LeftDigits
 REQUESTED SIZE =  $5b
 WASTED SPACE =  $32
 PAGEBREAK LOCATION =  $f300
     10  1300					      LIST	ON
    887  1300
    888  1300					      IF	<. = 0
    889  1300		       00		      .byte.b	0	; required!
    890  1301					      ENDIF
    891  1301
    892  1301				   BLANKR
    893  1301		       00 00 00 00*	      .ds	DIGIT_H, 0
    894  1308
    895  1308				   DequalsR
    896  1308		       00		      .byte.b	%00000000
    897  1309		       00		      .byte.b	%00000000
    898  130a		       f0		      .byte.b	%11110000
    899  130b		       00		      .byte.b	%00000000
    900  130c		       f0		      .byte.b	%11110000
    901  130d		       00		      .byte.b	%00000000
    902  130e		       f0		      .byte.b	%11110000
    903  130f				   DplusR
    904  130f		       10		      .byte.b	%00010000
    905  1310		       28		      .byte.b	%00101000
    906  1311		       6c		      .byte.b	%01101100
    907  1312		       c6		      .byte.b	%11000110
    908  1313		       6c		      .byte.b	%01101100
    909  1314		       28		      .byte.b	%00101000
    910  1315		       10		      .byte.b	%00010000
    911  1316
    912  1316				   ClockR
    913  1316		       00		      .byte.b	%00000000
    914  1317		       48		      .byte.b	%01001000
    915  1318		       fc		      .byte.b	%11111100
    916  1319		       48		      .byte.b	%01001000
    917  131a		       48		      .byte.b	%01001000
    918  131b		       fc		      .byte.b	%11111100
    919  131c		       48		      .byte.b	%01001000
    920  131d				   NineR
    921  131d		       0f		      .byte.b	%00001111
    922  131e		       01		      .byte.b	%00000001
    923  131f		       01		      .byte.b	%00000001
    924  1320		       7f		      .byte.b	%01111111
    925  1321		       41		      .byte.b	%01000001
    926  1322		       41		      .byte.b	%01000001
    927  1323		       7f		      .byte.b	%01111111
    928  1324				   SixR
    929  1324		       7f		      .byte.b	%01111111
    930  1325		       41		      .byte.b	%01000001
    931  1326		       41		      .byte.b	%01000001
    932  1327		       7f		      .byte.b	%01111111
    933  1328		       40		      .byte.b	%01000000
    934  1329		       40		      .byte.b	%01000000
    935  132a		       78		      .byte.b	%01111000
    936  132b				   EightR
    937  132b							;  .byte %00111110
    938  132b							;  .byte %01000011
    939  132b							;  .byte %01000011
    940  132b							;  .byte %00111110
    941  132b							;  .byte %00100011
    942  132b							;  .byte %00100011
    943  132b							;  .byte %00011110
    944  132b
    945  132b
    946  132b		       7f		      .byte.b	%01111111
    947  132c		       41		      .byte.b	%01000001
    948  132d		       41		      .byte.b	%01000001
    949  132e		       7f		      .byte.b	%01111111
    950  132f		       41		      .byte.b	%01000001
    951  1330		       41		      .byte.b	%01000001
    952  1331		       7f		      .byte.b	%01111111
    953  1332
    954  1332				   ZeroR
    955  1332		       7f		      .byte.b	%01111111
    956  1333		       41		      .byte.b	%01000001
    957  1334		       41		      .byte.b	%01000001
    958  1335		       41		      .byte.b	%01000001
    959  1336		       41		      .byte.b	%01000001
    960  1337		       41		      .byte.b	%01000001
    961  1338		       7f		      .byte.b	%01111111
    962  1339
    963  1339							;	  .byte %00111110
    964  1339							;	  .byte %01000011
    965  1339							;	  .byte %01000011
    966  1339							;	  .byte %01000011
    967  1339							;	  .byte %01000011
    968  1339							;	  .byte %00100011
    969  1339							;	  .byte %00011110
    970  1339				   ThreeR
    971  1339		       7f		      .byte.b	%01111111
    972  133a		       01		      .byte.b	%00000001
    973  133b		       01		      .byte.b	%00000001
    974  133c		       0f		      .byte.b	%00001111
    975  133d		       01		      .byte.b	%00000001
    976  133e		       01		      .byte.b	%00000001
    977  133f		       7f		      .byte.b	%01111111
    978  1340				   OneR
    979  1340		       08		      .byte.b	%00001000
    980  1341		       08		      .byte.b	%00001000
    981  1342		       08		      .byte.b	%00001000
    982  1343		       08		      .byte.b	%00001000
    983  1344		       08		      .byte.b	%00001000
    984  1345		       08		      .byte.b	%00001000
    985  1346		       08		      .byte.b	%00001000
    986  1347
    987  1347				   SevenR
    988  1347		       08		      .byte.b	%00001000
    989  1348		       08		      .byte.b	%00001000
    990  1349		       08		      .byte.b	%00001000
    991  134a		       0f		      .byte.b	%00001111
    992  134b		       01		      .byte.b	%00000001
    993  134c		       01		      .byte.b	%00000001
    994  134d		       7f		      .byte.b	%01111111
    995  134e
    996  134e				   TwoR
    997  134e		       7f		      .byte.b	%01111111
    998  134f		       40		      .byte.b	%01000000
    999  1350		       40		      .byte.b	%01000000
   1000  1351		       7f		      .byte.b	%01111111
   1001  1352		       01		      .byte.b	%00000001
   1002  1353		       01		      .byte.b	%00000001
   1003  1354		       7f		      .byte.b	%01111111
   1004  1355				   FiveR
   1005  1355		       7f		      .byte.b	%01111111
   1006  1356		       01		      .byte.b	%00000001
   1007  1357		       01		      .byte.b	%00000001
   1008  1358		       7f		      .byte.b	%01111111
   1009  1359		       40		      .byte.b	%01000000
   1010  135a		       40		      .byte.b	%01000000
   1011  135b		       78		      .byte.b	%01111000
   1012  135c				   FourR
   1013  135c		       08		      .byte.b	%00001000
   1014  135d		       08		      .byte.b	%00001000
   1015  135e		       08		      .byte.b	%00001000
   1016  135f		       7f		      .byte.b	%01111111
   1017  1360		       48		      .byte.b	%01001000
   1018  1361		       48		      .byte.b	%01001000
   1019  1362		       48		      .byte.b	%01001000
   1020  1363
   1021  1363							;CharAL:
   1022  1363							;    .byte %11100110
   1023  1363							;    .byte %11100110
   1024  1363							;    .byte %11111110
   1025  1363							;    .byte %11100110
   1026  1363							;    .byte %11100110
   1027  1363							;    .byte %01111100
   1028  1363							;    .byte %00111000
   1029  1363							;CharEL:
   1030  1363							;    .byte %11111110
   1031  1363							;    .byte %11111110
   1032  1363							;    .byte %11100000
   1033  1363							;    .byte %11100000
   1034  1363							;    .byte %11111100
   1035  1363							;    .byte %11100000
   1036  1363							;    .byte %11111110
   1037  1363							;CharRL:
   1038  1363							;    .byte %11100110
   1039  1363							;    .byte %11100110
   1040  1363							;    .byte %11111100
   1041  1363							;    .byte %11111100
   1042  1363							;    .byte %11100110
   1043  1363							;    .byte %11100110
   1044  1363							;    .byte %11111100
   1045  1363							;CharVL:
   1046  1363							;    .byte %00111000
   1047  1363							;    .byte %01111100
   1048  1363							;    .byte %11100110
   1049  1363							;    .byte %11100110
   1050  1363							;    .byte %11100110
   1051  1363							;    .byte %11100110
   1052  1363							;    .byte %11100110
   1053  1363
      0  1363					      CHECKPAGE	BLANKR
      8  1363					      LIST	ON
   1055  1363
   1056  1363							;---------------------------------------------------------------------------
   1057  1363
      0  1363					      DEFINE_SUBROUTINE	GameInitialise
      1  1363		       00 02	   BANK_GameInitialise =	_CURRENT_BANK
      2  1363					      SUBROUTINE
      3  1363				   GameInitialise
   1059  1363
   1060  1363							; copy loaded SK high score into scoring RAM:
   1061  1363		       a2 02		      ldx	#3-1
   1062  1365				   .loopCopyHighScore
   1063  1365		       b5 dd		      lda	highScoreSK,x
   1064  1367		       c9 ff		      cmp	#$ff
   1065  1369		       f0 06		      beq	.noSaveKey
   1066  136b		       9d 98 f7 	      sta	HighScore+RAM_WRITE,x
   1067  136e		       ca		      dex
   1068  136f		       10 f4		      bpl	.loopCopyHighScore
   1069  1371				   .noSaveKey
   1070  1371
   1071  1371							; clear both players scores
   1072  1371		       a0 05		      ldy	#2*3-1
   1073  1373		       a9 00		      lda	#0
   1074  1375				   .loopClearScore
   1075  1375		       99 8e f7 	      sta	ScoreCurrent+RAM_WRITE,y
   1076  1378		       88		      dey
   1077  1379		       10 fa		      bpl	.loopClearScore
   1078  137b
   1079  137b							; copy levelX and level for other player and SaveKey:
   1080  137b		       a5 b2		      lda	levelX
   1081  137d		       8d 96 f7 	      sta	PlayerLevelX+RAM_WRITE
   1082  1380		       a5 e0		      lda	startingLevel
   1083  1382		       8d 91 f7 	      sta	StartLevelX+RAM_WRITE
   1084  1385		       a5 b3		      lda	level
   1085  1387		       8d 97 f7 	      sta	PlayerLevel+RAM_WRITE
   1086  138a		       8d 92 f7 	      sta	StartLevel+RAM_WRITE
   1087  138d		       60		      rts
   1088  138e
   1089  138e							;---------------------------------------------------------------------------
   1090  138e
   1091  138e		       00 00 00    ScoreCurrent ds	3, 0
   1092  1391							; start levelx and level have to be after ScoreCurrent!
   1093  1391		       00	   StartLevelX .byte.b	0
   1094  1392		       00	   StartLevel .byte.b	0
   1095  1393		       00 00 00    PlayerScores ds	3, 0
   1096  1396							; levelx and level have to be consecutive variables!
   1097  1396		       00	   PlayerLevelX .byte.b	0
   1098  1397		       00	   PlayerLevel .byte.b	0
   1099  1398		       00 00 00 00*HighScore  ds	3+2, 0	; two extra bytes to save code
   1100  139d
   1101  139d
   1102  139d
   1103  139d							;------------------------------------------------------------------------------
   1104  139d
      0  139d					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_OF_BANK_SCORING"
      1  139d
      2  139d
      3  139d		       03 9d	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_SCORING (1K) SIZE =  $39d , FREE= $63
      4  139d					      ECHO	"ROM_SHADOW_OF_BANK_SCORING", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  139d				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  139d				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  139d				  -	      ERR
      8  139d					      endif
   1106  139d
   1107  139d							;------------------------------------------------------------------------------
   1108  139d
   1109  139d							; LEVEL DATA banks can go anywhere - *EXCEPT* for the same bank as the level
   1110  139d							; decoder.  Ironic, isn't it?	They calculate a constant -- MAX_LEVEL_SIZE
   1111  139d							; which is used as a buffer size inside UnpackLevel.  It's not important if
   1112  139d							; this is defined before or after, as once the levels have processed it will be
   1113  139d							; correct. Note, that levels should all be defined BEFORE *OR* AFTER the
   1114  139d							; UnpackLevel code -- but that they should not be both, nor in the same bank.
   1115  139d							; TODO: verify above is still valid
   1116  139d
   1117  139d
      0  139d					      CHECK_BANK_SIZE	"ROM_SHADOW_OF_BANK_SCORING -- full 2K"
      1  139d		       03 9d	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_SCORING -- full 2K (2K) SIZE =  $39d , FREE= $463
      2  139d					      ECHO	"ROM_SHADOW_OF_BANK_SCORING -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  139d				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  139d				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  139d				  -	      ERR
      6  139d					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_GENERIC.asm LEVEL 2 PASS 3
      0  139d					      include	"BANK_GENERIC.asm"
      1  139d							;    Sokoboo - a Sokoban implementation
      2  139d							;    using a generic tile-based display engine for the Atari 2600
      3  139d							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  139d							;
      5  139d							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  139d							;
      7  139d							;    Code related to the generic tile-based display engine was developed by
      8  139d							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  139d							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  139d							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  139d							;
     12  139d							;    Code related to music and sound effects uses the TIATracker music player
     13  139d							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  139d							;    directory for Apache licensing details.
     15  139d							;
     16  139d							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  139d							;    See the copyright notices in the License directory for a list of level
     18  139d							;    contributors.
     19  139d							;
     20  139d							;    Except where otherwise indicated, this software is released under the
     21  139d							;    following licensing arrangement...
     22  139d							;
     23  139d							;    This program is free software: you can redistribute it and/or modify
     24  139d							;    it under the terms of the GNU General Public License as published by
     25  139d							;    the Free Software Foundation, either version 3 of the License, or
     26  139d							;    (at your option) any later version.
     27  139d							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  139d
     29  139d							;    This program is distributed in the hope that it will be useful,
     30  139d							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  139d							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  139d							;    GNU General Public License for more details.
     33  139d
     34  139d							;------------------------------------------------------------------------------
     35  139d							;##############################################################################
     36  139d							;------------------------------------------------------------------------------
     37  139d
      0  139d					      NEWBANK	GENERIC_BANK_1
      1  1c39 ????				      SEG	GENERIC_BANK_1
      2  1800					      ORG	ORIGIN
      3  1800					      RORG	$F000
      4  1800				   BANK_START SET	*
      5  1800				   GENERIC_BANK_1 SET	ORIGIN / 2048
      6  1800				   ORIGIN     SET	ORIGIN + 2048
      7  1800				   _CURRENT_BANK SET	GENERIC_BANK_1
     39  1800
     40  1800
     41  1800
      0  1800					      DEFINE_1K_SEGMENT	DECODE_LEVEL_SHADOW
      1  1800					      ALIGN	$400
      2  1800				   SEGMENT_DECODE_LEVEL_SHADOW SET	*
      3  1800				   BANK_DECODE_LEVEL_SHADOW SET	_CURRENT_BANK
------- FILE DecodeLevel.asm LEVEL 3 PASS 3
      0  1800					      include	"DecodeLevel.asm"
      1  1800							;    Sokoboo - a Sokoban implementation
      2  1800							;    using a generic tile-based display engine for the Atari 2600
      3  1800							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  1800							;
      5  1800							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  1800							;
      7  1800							;    Code related to the generic tile-based display engine was developed by
      8  1800							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  1800							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  1800							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  1800							;
     12  1800							;    Code related to music and sound effects uses the TIATracker music player
     13  1800							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  1800							;    directory for Apache licensing details.
     15  1800							;
     16  1800							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  1800							;    See the copyright notices in the License directory for a list of level
     18  1800							;    contributors.
     19  1800							;
     20  1800							;    Except where otherwise indicated, this software is released under the
     21  1800							;    following licensing arrangement...
     22  1800							;
     23  1800							;    This program is free software: you can redistribute it and/or modify
     24  1800							;    it under the terms of the GNU General Public License as published by
     25  1800							;    the Free Software Foundation, either version 3 of the License, or
     26  1800							;    (at your option) any later version.
     27  1800							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  1800
     29  1800							;    This program is distributed in the hope that it will be useful,
     30  1800							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  1800							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  1800							;    GNU General Public License for more details.
     33  1800
     34  1800
     35  1800
     36  1800				   finX
     37  1800							; now put the soil in - fill from the outsides
     38  1800
     39  1800		       a9 01		      lda	#CHARACTER_SOIL
     40  1802		       85 8b		      sta	POS_Type
     41  1804
     42  1804		       a9 15		      lda	#SIZE_BOARD_Y-1
     43  1806		       85 88		      sta	POS_Y
     44  1808
     45  1808		       a9 27	   xlin       lda	#SIZE_BOARD_X-1
     46  180a		       85 87		      sta	POS_X
     47  180c		       20 26 f8    zap1       jsr	GetBoardCharacter__CALL_FROM_RAM__
     48  180f		       c9 01		      cmp	#CHARACTER_SOIL
     49  1811		       f0 07		      beq	kg2a
     50  1813		       c9 00		      cmp	#0
     51  1815		       d0 07		      bne	endzap1
     52  1817		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     53  181a		       c6 87	   kg2a       dec	POS_X
     54  181c		       10 ee		      bpl	zap1
     55  181e
     56  181e		       a9 00	   endzap1    lda	#0
     57  1820		       85 87		      sta	POS_X
     58  1822		       20 26 f8    zap2       jsr	GetBoardCharacter__CALL_FROM_RAM__
     59  1825		       c9 01		      cmp	#CHARACTER_SOIL
     60  1827		       f0 07		      beq	kg2
     61  1829		       c9 00		      cmp	#0
     62  182b		       d0 0b		      bne	endzap2
     63  182d		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     64  1830		       e6 87	   kg2	      inc	POS_X
     65  1832		       a5 87		      lda	POS_X
     66  1834		       c9 28		      cmp	#SIZE_BOARD_X
     67  1836		       d0 ea		      bne	zap2
     68  1838
     69  1838		       c6 88	   endzap2    dec	POS_Y
     70  183a		       10 cc		      bpl	xlin
     71  183c
     72  183c
     73  183c		       a9 27		      lda	#SIZE_BOARD_X-1
     74  183e		       85 87		      sta	POS_X
     75  1840
     76  1840		       a9 15	   ylin       lda	#SIZE_BOARD_Y-1
     77  1842		       85 88		      sta	POS_Y
     78  1844		       20 26 f8    zapy1      jsr	GetBoardCharacter__CALL_FROM_RAM__
     79  1847		       c9 01		      cmp	#CHARACTER_SOIL
     80  1849		       f0 07		      beq	kg3
     81  184b		       c9 00		      cmp	#0
     82  184d		       d0 07		      bne	endzapy1
     83  184f		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     84  1852		       c6 88	   kg3	      dec	POS_Y
     85  1854		       10 ee		      bpl	zapy1
     86  1856
     87  1856		       a9 00	   endzapy1   lda	#0
     88  1858		       85 88		      sta	POS_Y
     89  185a		       20 26 f8    zapy2      jsr	GetBoardCharacter__CALL_FROM_RAM__
     90  185d		       c9 01		      cmp	#CHARACTER_SOIL
     91  185f		       f0 07		      beq	kg3b
     92  1861		       c9 00		      cmp	#0
     93  1863		       d0 0b		      bne	endzapy2
     94  1865		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     95  1868		       e6 88	   kg3b       inc	POS_Y
     96  186a		       a5 88		      lda	POS_Y
     97  186c		       c9 16		      cmp	#SIZE_BOARD_Y
     98  186e		       d0 ea		      bne	zapy2
     99  1870
    100  1870		       c6 87	   endzapy2   dec	POS_X
    101  1872		       10 cc		      bpl	ylin
    102  1874		       60		      rts
    103  1875
    104  1875							;A	 steel wall
    105  1875							;B	 soil (surround)
    106  1875							;C	 box
    107  1875
    108  1875					      MAC	ntscpal
    109  1875					      .byte	{1}+{2}
    110  1875					      NTSC_TO_PAL	{1},{2}
    111  1875					      ENDM		; {col} {intensity}
    112  1875
    113  1875
    114  1875
    115  1875				   t16
    116  1875		       00		      .byte.b	$00
    117  1876		       20		      .byte.b	$20	; don't use "10"!
    118  1877		       20		      .byte.b	$20
    119  1878		       30		      .byte.b	$30
    120  1879		       40		      .byte.b	$40
    121  187a		       50		      .byte.b	$50
    122  187b		       60		      .byte.b	$60
    123  187c		       70		      .byte.b	$70
    124  187d		       80		      .byte.b	$80
    125  187e		       90		      .byte.b	$90
    126  187f		       a0		      .byte.b	$A0
    127  1880		       b0		      .byte.b	$B0
    128  1881		       c0		      .byte.b	$C0
    129  1882		       d0		      .byte.b	$D0
    130  1883		       e0		      .byte.b	$E0
    131  1884		       f0		      .byte.b	$F0
    132  1885
    133  1885				   inten
    134  1885		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    135  1886		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    136  1887		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    137  1888		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    138  1889		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    139  188a		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    140  188b		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    141  188c		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    142  188d		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST	; deep blue
    143  188e		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    144  188f		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    145  1890		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    146  1891		       08		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    147  1892		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    148  1893		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    149  1894		       0a		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    150  1895
    151  1895
    152  1895
      0  1895					      DEFINE_SUBROUTINE	UnpackLevel
      1  1895		       00 03	   BANK_UnpackLevel =	_CURRENT_BANK
      2  1895					      SUBROUTINE
      3  1895				   UnpackLevel
    154  1895
    155  1895		       85 c0		      sta	RAM_Bank
    156  1897
    157  1897							; has to be done before decoding the level to have the platform right:
    158  1897							;	    SET_PLATFORM
    159  1897
    160  1897		       a9 03		      lda	#BANK_UnpackLevel	; the *ROM* bank of this routine (NOT RAM)
    161  1899		       85 bf		      sta	ROM_Bank	; GetROMByte returns to this bank
    162  189b
    163  189b
    164  189b
    165  189b		       a9 01		      lda	#CHARACTER_SOIL
    166  189d		       85 8b		      sta	POS_Type
    167  189f
    168  189f		       a9 15		      lda	#SIZE_BOARD_Y-1
    169  18a1		       85 88		      sta	POS_Y
    170  18a3		       a9 27	   xyLine     lda	#SIZE_BOARD_X-1
    171  18a5		       85 87		      sta	POS_X
    172  18a7		       20 3a f8    xyClear    jsr	PutBoardCharacterFromRAM
    173  18aa		       c6 87		      dec	POS_X
    174  18ac		       10 f9		      bpl	xyClear
    175  18ae		       c6 88		      dec	POS_Y
    176  18b0		       10 f1		      bpl	xyLine
    177  18b2
    178  18b2		       a9 0c		      lda	#12	;todo - crashes @12 ... why?
    179  18b4		       85 da		      sta	base_x
    180  18b6		       a9 06		      lda	#6
    181  18b8		       85 db		      sta	base_y
    182  18ba
    183  18ba		       a5 c2		      lda	NextLevelTrigger
    184  18bc		       09 80		      ora	#BIT_NEXTLEVEL
    185  18be		       85 c2		      sta	NextLevelTrigger
    186  18c0
    187  18c0
    188  18c0		       20 4b fd 	      jsr	Random
    189  18c3		       29 0f		      and	#$F
    190  18c5		       aa		      tax
    191  18c6		       bd 75 f0 	      lda	t16,x
    192  18c9		       1d 85 f0 	      ora	inten,x
    193  18cc		       85 c9		      sta	icc_colour
    194  18ce
    195  18ce		       20 4b fd    ranother   jsr	Random
    196  18d1		       29 0f		      and	#$F
    197  18d3		       aa		      tax
    198  18d4		       bd 75 f0 	      lda	t16,x
    199  18d7		       1d 85 f0 	      ora	inten,x
    200  18da		       38		      sec
    201  18db		       e9 02		      sbc	#2
    202  18dd		       85 cb		      sta	icc_colour+2	; mortar, lid
    203  18df
    204  18df							;sec
    205  18df		       e5 c9		      sbc	icc_colour
    206  18e1		       b0 04		      bcs	posicc
    207  18e3		       49 ff		      eor	#$FF
    208  18e5		       69 01		      adc	#1
    209  18e7		       c9 31	   posicc     cmp	#$31
    210  18e9		       90 e3		      bcc	ranother	; don't allow similar colours
    211  18eb
    212  18eb
    213  18eb
    214  18eb							; Update the level colours (self-modifying) in each of the character line banks
    215  18eb
    216  18eb		       20 dd fd 	      jsr	CopyColoursToScreenLines
    217  18ee
    218  18ee		       a9 00		      lda	#$00
    219  18f0		       85 b6		      sta	BCD_moveCounter
    220  18f2		       85 b7		      sta	BCD_moveCounterHi
    221  18f4		       85 b8		      sta	takebackIndex
    222  18f6		       85 b9		      sta	takebackBaseIndex
    223  18f8		       85 b5		      sta	BCD_targetsRequired	; # of targets that do NOT have boxes on them
    224  18fa
    225  18fa							;		ldx Platform
    226  18fa							;		lda theThrottler,x
    227  18fa							;		sta ThrottleSpeed
    228  18fa
    229  18fa							; first fill bg with character_soil
    230  18fa							; then rle unpack level
    231  18fa							; change level colours
    232  18fa
    233  18fa		       a9 00		      lda	#0
    234  18fc		       85 87		      sta	POS_X
    235  18fe		       85 88		      sta	POS_Y
    236  1900		       85 94		      sta	BoardLimit_Width
    237  1902		       85 95		      sta	BoardLimit_Height
    238  1904
    239  1904				   GetNextItem
    240  1904
    241  1904		       a9 01		      lda	#1
    242  1906		       85 dc		      sta	upk_length
    243  1908		       a9 00		      lda	#0
    244  190a		       85 dd		      sta	upk_column	; reuse var - this flags a digit already
    245  190c
    246  190c		       e6 bb	   Get2       inc	Board_AddressR
    247  190e		       d0 02		      bne	addrOK
    248  1910		       e6 bc		      inc	Board_AddressR+1
    249  1912				   addrOK
    250  1912
    251  1912		       a5 ab		      lda	LEVEL_bank
    252  1914		       a0 00		      ldy	#0
    253  1916		       20 0f f8 	      jsr	GetROMByte
    254  1919		       85 de		      sta	upk_temp	;scratch
    255  191b
    256  191b		       c9 00		      cmp	#0
    257  191d		       d0 03		      bne	parse
    258  191f		       4c 00 f0 	      jmp	finX
    259  1922				   parse
    260  1922		       c9 3a		      cmp	#"9"+1
    261  1924		       b0 1e		      bcs	notDigit
    262  1926		       c9 30		      cmp	#"0"
    263  1928		       90 1a		      bcc	notDigit
    264  192a
    265  192a		       a5 dd		      lda	upk_column
    266  192c		       f0 09		      beq	firstDig
    267  192e
    268  192e		       a5 dc		      lda	upk_length
    269  1930		       0a		      asl
    270  1931		       0a		      asl
    271  1932		       0a		      asl
    272  1933		       65 dc		      adc	upk_length
    273  1935		       65 dc		      adc	upk_length
    274  1937
    275  1937		       18	   firstDig   clc
    276  1938		       65 de		      adc	upk_temp
    277  193a		       38		      sec
    278  193b		       e9 30		      sbc	#"0"
    279  193d		       85 dc		      sta	upk_length
    280  193f		       e6 dd		      inc	upk_column	; flag we have seen a digit
    281  1941		       4c 0c f1 	      jmp	Get2
    282  1944
    283  1944		       c9 7c	   notDigit   cmp	#"|"	; newline
    284  1946		       d0 11		      bne	checkWall
    285  1948
    286  1948							; Handle new-line
    287  1948		       a9 00		      lda	#0
    288  194a		       85 87		      sta	POS_X
    289  194c		       e6 88		      inc	POS_Y
    290  194e
    291  194e
    292  194e		       a5 88		      lda	POS_Y
    293  1950		       c5 95		      cmp	BoardLimit_Height
    294  1952		       90 02		      bcc	wOK2
    295  1954		       85 95		      sta	BoardLimit_Height	;???^^^
    296  1956				   wOK2
    297  1956
    298  1956		       4c 04 f1 	      jmp	GetNextItem
    299  1959
    300  1959		       c9 23	   checkWall  cmp	#"#"	; wall
    301  195b		       d0 09		      bne	checkForGap
    302  195d							;		  NEXT_RANDOM
    303  195d		       a5 c8		      lda	rnd
    304  195f		       29 01		      and	#1
    305  1961		       18		      clc
    306  1962		       69 06		      adc	#CHARACTER_STEEL
    307  1964		       d0 62		      bne	WriteChars
    308  1966
    309  1966		       c9 20	   checkForGap cmp	#32
    310  1968		       f0 08		      beq	writeGap
    311  196a		       c9 2d		      cmp	#"-"
    312  196c		       f0 04		      beq	writeGap
    313  196e		       c9 5f		      cmp	#"_"
    314  1970		       d0 05		      bne	checkForMan
    315  1972
    316  1972		       a9 00	   writeGap   lda	#CHARACTER_BLANK
    317  1974		       4c c8 f1 	      jmp	WriteChars
    318  1977
    319  1977				   checkForMan
    320  1977		       c9 2b		      cmp	#"+"	; player on goal square
    321  1979		       d0 07		      bne	notPlayerGoal
    322  197b
    323  197b		       20 37 fd 	      jsr	RegisterTarget
    324  197e
    325  197e							; put goal square, init player with POS_VAR = CHARACTER_TARGET
    326  197e
    327  197e		       a9 03		      lda	#CHARACTER_TARGET
    328  1980		       d0 06		      bne	genPlayer
    329  1982
    330  1982				   notPlayerGoal
    331  1982		       c9 40		      cmp	#"@"	; player on normal square
    332  1984		       d0 29		      bne	checkBox
    333  1986
    334  1986		       a9 00		      lda	#CHARACTER_BLANK
    335  1988
    336  1988				   genPlayer
    337  1988
    338  1988		       85 8c		      sta	POS_VAR	; character man is on
    339  198a
    340  198a		       18		      clc
    341  198b		       a5 87		      lda	POS_X
    342  198d		       48		      pha
    343  198e		       65 da		      adc	base_x
    344  1990		       85 87		      sta	POS_X
    345  1992		       85 9d		      sta	ManX
    346  1994
    347  1994		       a5 88		      lda	POS_Y
    348  1996		       48		      pha
    349  1997		       65 db		      adc	base_y
    350  1999		       85 88		      sta	POS_Y
    351  199b		       85 9e		      sta	ManY
    352  199d
    353  199d							; POS_X     x position
    354  199d							; POS_Y     y position
    355  199d							; POS_VAR   CHARACTER UNDER MAN TO RESTORE
    356  199d							; POS_Type  type of object
    357  199d
    358  199d		       a9 00		      lda	#TYPE_MAN
    359  199f		       85 8b		      sta	POS_Type	;	 creature TYPE
    360  19a1		       20 ff f8 	      jsr	InsertObjectStackFromRAM	;6+94(B)
    361  19a4
    362  19a4		       68		      pla
    363  19a5		       85 88		      sta	POS_Y
    364  19a7		       68		      pla
    365  19a8		       85 87		      sta	POS_X
    366  19aa
    367  19aa		       a9 05		      lda	#CHARACTER_MANOCCUPIED
    368  19ac		       4c c8 f1 	      jmp	WriteChars
    369  19af
    370  19af		       c9 24	   checkBox   cmp	#"$"
    371  19b1		       d0 04		      bne	checkBoxTarget
    372  19b3
    373  19b3		       a9 02		      lda	#CHARACTER_BOX
    374  19b5		       d0 11		      bne	WriteChars
    375  19b7
    376  19b7		       c9 2a	   checkBoxTarget cmp	#"*"
    377  19b9		       d0 04		      bne	checkTarget
    378  19bb
    379  19bb		       a9 08		      lda	#CHARACTER_BOX_ON_TARGET
    380  19bd		       d0 09		      bne	WriteChars
    381  19bf
    382  19bf		       c9 2e	   checkTarget cmp	#"."
    383  19c1		       f0 03		      beq	targ
    384  19c3		       4c 04 f1 	      jmp	GetNextItem
    385  19c6				   targ
    386  19c6
    387  19c6		       a9 03		      lda	#CHARACTER_TARGET
    388  19c8
    389  19c8		       85 8b	   WriteChars sta	POS_Type
    390  19ca
    391  19ca		       18	   Wc2x       clc
    392  19cb		       a5 87		      lda	POS_X
    393  19cd		       48		      pha
    394  19ce		       65 da		      adc	base_x
    395  19d0		       85 87		      sta	POS_X
    396  19d2
    397  19d2		       a5 88		      lda	POS_Y
    398  19d4		       48		      pha
    399  19d5		       65 db		      adc	base_y
    400  19d7		       85 88		      sta	POS_Y
    401  19d9
    402  19d9		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
    403  19dc
    404  19dc		       a5 8b		      lda	POS_Type
    405  19de		       c9 03		      cmp	#CHARACTER_TARGET
    406  19e0		       d0 03		      bne	notargdet
    407  19e2		       20 37 fd 	      jsr	RegisterTarget
    408  19e5				   notargdet
    409  19e5
    410  19e5		       68		      pla
    411  19e6		       85 88		      sta	POS_Y
    412  19e8		       68		      pla
    413  19e9		       85 87		      sta	POS_X
    414  19eb
    415  19eb		       18		      clc
    416  19ec		       69 01		      adc	#1
    417  19ee		       85 87		      sta	POS_X
    418  19f0
    419  19f0		       c5 94		      cmp	BoardLimit_Width
    420  19f2		       90 02		      bcc	wOK
    421  19f4		       85 94		      sta	BoardLimit_Width
    422  19f6				   wOK
    423  19f6
    424  19f6		       c6 dc		      dec	upk_length
    425  19f8		       d0 d0		      bne	Wc2x
    426  19fa		       4c 04 f1 	      jmp	GetNextItem
    427  19fd
    428  19fd				   finishedUnpack
    429  19fd
    430  19fd		       60		      rts
    431  19fd					      endif
------- FILE BANK_GENERIC.asm
     44  19fe
      0  19fe					      CHECK_HALF_BANK_SIZE	"GENERIC_BANK_1 (DECODE_LEVEL)"
      1  19fe
      2  19fe
      3  19fe		       01 fe	   .TEMP      =	* - BANK_START
 GENERIC_BANK_1 (DECODE_LEVEL) (1K) SIZE =  $1fe , FREE= $202
      4  19fe					      ECHO	"GENERIC_BANK_1 (DECODE_LEVEL)", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  19fe				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  19fe				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  19fe				  -	      ERR
      8  19fe					      endif
     46  19fe
     47  19fe							;------------------------------------------------------------------------------
     48  19fe							; ... the above is a RAM-copied section -- the following is ROM-only.	Note that
     49  19fe							; we do not configure a 1K boundary, as we con't really care when the above 'RAM'
     50  19fe							; bank finishes.  Just continue on from where it left off...
     51  19fe							;------------------------------------------------------------------------------
     52  19fe
      0  19fe					      DEFINE_SUBROUTINE	Cart_Init	; in GENERIC_BANK_1
      1  19fe		       00 03	   BANK_Cart_Init =	_CURRENT_BANK
      2  19fe					      SUBROUTINE
      3  19fe				   Cart_Init
     54  19fe
     55  19fe							; Note the variables from the title selection are incredibly transient an can be stomped
     56  19fe							; at any time.  So they need to be used immediately.
     57  19fe
     58  19fe
     59  19fe							; odd usage below is to prevent any possibility of variable stomping/assumptions
     60  19fe
     61  19fe		       a9 01		      lda	#1
     62  1a00		       a2 00		      ldx	#0	;sLevel				      ; level # from title select
     63  1a02		       a0 00		      ldy	#0	;sJoysticks
     64  1a04		       84 aa		      sty	jtoggle
     65  1a06		       86 b3		      stx	level
     66  1a08		       a9 00		      lda	#0
     67  1a0a							;sta levelX					    ; make an immediate copy to safe variables!
     68  1a0a		       85 e0		      sta	startingLevel
     69  1a0c
     70  1a0c							; multiply with LEVEL_DEFINITION_SIZE (5):
     71  1a0c		       0a		      asl
     72  1a0d		       0a		      asl
     73  1a0e		       85 b2		      sta	levelX
     74  1a10
      0  1a10					      LOAD_ANIMATION	IDLE
      1  1a10		       a9 44		      lda	#<Animation_IDLE
      2  1a12		       85 9a		      sta	animation
      3  1a14		       a9 f0		      lda	#>Animation_IDLE
      4  1a16		       85 9b		      sta	animation+1
      5  1a18		       a9 00		      lda	#0
      6  1a1a		       85 9c		      sta	animation_delay
      7  1a1c		       a9 02		      lda	#ANIMATION_IDLE_ID
      8  1a1e		       85 a6		      sta	ManAnimationID
     76  1a20
     77  1a20		       a9 00		      lda	#0
     78  1a22		       8d 83 02 	      sta	SWBCNT	; console I/O always set to INPUT
     79  1a25		       8d 81 02 	      sta	SWACNT	; set controller I/O to INPUT
     80  1a28		       85 6b		      sta	HMCLR
     81  1a2a
     82  1a2a							; cleanup remains of title screen
     83  1a2a		       85 5b		      sta	GRP0
     84  1a2c		       85 5c		      sta	GRP1
     85  1a2e							;?		   sta GRP0
     86  1a2e
     87  1a2e		       a9 10		      lda	#%00010000	; 2	 double width missile, double width player
     88  1a30		       85 44		      sta	NUSIZ0	; 3
     89  1a32		       85 45		      sta	NUSIZ1
     90  1a34
     91  1a34		       85 86		      sta	ScreenDrawPhase	; sequences the sections of gameplay/screen drawing
     92  1a36		       85 c5		      sta	ethnic
     93  1a38
     94  1a38		       a9 04		      lda	#%100	; players/missiles BEHIND BG
     95  1a3a		       85 4a		      sta	CTRLPF
     96  1a3c
     97  1a3c		       a9 ff		      lda	#$FF
     98  1a3e		       85 81		      sta	DrawStackPointer
     99  1a40		       85 92		      sta	BufferedJoystick
    100  1a42
    101  1a42							;lda #DIRECTION_BITS		  ;???
    102  1a42							;sta ManLastDirection
    103  1a42
    104  1a42							;lda #0
    105  1a42							;		  sta ObjStackPtr		  ; object stack index of last entry
    106  1a42							;		  sta ObjStackPtr+1
    107  1a42							;		  sta ObjStackNum
    108  1a42							;		  sta ObjIterator
    109  1a42
    110  1a42							;sta sortPtr
    111  1a42							;lda #<(-1)
    112  1a42							;sta sortRequired
    113  1a42
    114  1a42							; read high score from SaveKey and store in highScoreSK,
    115  1a42							; which is transferred to high score variable in RAM by GeneralScoringSetups
    116  1a42
    117  1a42		       4c d9 f3 	      jmp	ReadSaveKey
    118  1a45
    119  1a45							;------------------------------------------------------------------------------
    120  1a45
      0  1a45					      DEFINE_SUBROUTINE	SwapPlayersGeneric
      1  1a45		       00 03	   BANK_SwapPlayersGeneric =	_CURRENT_BANK
      2  1a45					      SUBROUTINE
      3  1a45				   SwapPlayersGeneric
    122  1a45
    123  1a45							; at the start of a level (or player, doesn't matter) we grab the current state of the colour/B&W switch
    124  1a45							; into the gameMode variable.
    125  1a45
    126  1a45							;		  lda gameMode
    127  1a45							;		  and #~(BW_SWITCH|GAMEMODE_PAUSED)
    128  1a45							;		  sta gameMode
    129  1a45							;		  lda SWCHB
    130  1a45							;		  and #BW_SWITCH
    131  1a45							;		  ora gameMode			  ; COLOR/B&W @start of level stored in gameMode -- so now we just detect a CHANGE is pause
    132  1a45							;		  sta gameMode			  ; also, BIT7=0 -- system is NOT paused
    133  1a45
    134  1a45
    135  1a45							; restart level
    136  1a45		       a5 c2		      lda	NextLevelTrigger
    137  1a47		       29 bf		      and	#<(~BIT_NEXTLIFE)
    138  1a49		       85 c2		      sta	NextLevelTrigger
    139  1a4b
    140  1a4b							; if new high score was set by SwapPlayers, update it:
    141  1a4b
    142  1a4b		       4c ff f3 	      jmp	WriteSaveKey
    143  1a4e
    144  1a4e
    145  1a4e							;------------------------------------------------------------------------------
    146  1a4e
      0  1a4e					      DEFINE_SUBROUTINE	CreateCreatures
      1  1a4e		       00 03	   BANK_CreateCreatures =	_CURRENT_BANK
      2  1a4e					      SUBROUTINE
      3  1a4e				   CreateCreatures
    148  1a4e
    149  1a4e							; Calculate rightmost value for scrolling edge.  .
    150  1a4e
    151  1a4e		       85 bf		      sta	ROM_Bank
    152  1a50
    153  1a50		       38		      sec
    154  1a51		       a5 94		      lda	BoardLimit_Width
    155  1a53		       e9 09		      sbc	#SCREEN_WIDTH-1
    156  1a55		       85 94		      sta	BoardEdge_Right	; absolute rightmost scroll value
    157  1a57
    158  1a57							;		  sec			     already set
    159  1a57		       a5 95		      lda	BoardLimit_Height
    160  1a59		       e9 07		      sbc	#SCREEN_LINES-1
    161  1a5b		       85 95		      sta	BoardEdge_Bottom	; absolute bottommost scroll value
    162  1a5d
    163  1a5d							; kludge position scroll roughly at player
    164  1a5d
    165  1a5d							;		  sec			 already set
    166  1a5d		       a5 9d		      lda	ManX
    167  1a5f		       e9 05		      sbc	#5
    168  1a61		       b0 02		      bcs	notL0
    169  1a63		       a9 00		      lda	#0
    170  1a65		       85 97	   notL0      sta	BoardScrollX
    171  1a67
    172  1a67		       38		      sec
    173  1a68		       a5 9e		      lda	ManY
    174  1a6a		       e9 04		      sbc	#4
    175  1a6c		       b0 02		      bcs	notU0
    176  1a6e		       a9 00		      lda	#0
    177  1a70		       85 96	   notU0      sta	BoardScrollY
    178  1a72
    179  1a72		       a9 00		      lda	#0
    180  1a74		       85 a1		      sta	ManMode
    181  1a76							;sta ManDelayCount
    182  1a76		       85 ba		      sta	TakebackInhibit
    183  1a78		       85 da		      sta	base_x
    184  1a7a		       85 db		      sta	base_y
    185  1a7c		       85 a4		      sta	ManPushCounter
    186  1a7e
    187  1a7e
    188  1a7e		       a9 ff		      lda	#$FF
    189  1a80		       85 af		      sta	LastSpriteY
    190  1a82		       85 a6		      sta	ManAnimationID
    191  1a84		       85 cc		      sta	FadeComplete	; start fading
    192  1a86		       85 cd		      sta	FadeOutComplete	; flags "not fading out"
    193  1a88
    194  1a88		       a9 14		      lda	#20
    195  1a8a		       85 ce		      sta	fadeslow
    196  1a8c
    197  1a8c							;lda #DIRECTION_BITS		  ;????
    198  1a8c							;sta ManLastDirection		  ; duplicate?
    199  1a8c
    200  1a8c		       60		      rts
    201  1a8d
    202  1a8d							;-------------------------------------------------------------------------------------
    203  1a8d
      0  1a8d					      DEFINE_SUBROUTINE	LevelInit	; in GENERIC_BANK_1
      1  1a8d		       00 03	   BANK_LevelInit =	_CURRENT_BANK
      2  1a8d					      SUBROUTINE
      3  1a8d				   LevelInit
    205  1a8d
    206  1a8d		       a9 00		      lda	#0
    207  1a8f		       85 83		      sta	ObjStackPtr
    208  1a91		       85 84		      sta	ObjStackPtr+1	; kill all creatures
    209  1a93		       85 82		      sta	ObjStackNum
    210  1a95		       85 c3		      sta	ObjIterator
    211  1a97
    212  1a97		       85 98		      sta	scrollBits
    213  1a99		       85 86		      sta	ScreenDrawPhase
    214  1a9b
    215  1a9b		       85 b1		      sta	BGColour
    216  1a9d		       85 c1		      sta	ColourTimer
    217  1a9f		       85 a5		      sta	LookingAround
    218  1aa1
    219  1aa1		       a9 ff		      lda	#255
    220  1aa3		       85 b4		      sta	Throttle
    221  1aa5		       85 92		      sta	BufferedJoystick
    222  1aa7
    223  1aa7		       a9 00		      lda	#0
    224  1aa9		       85 59		      sta	AUDV0
    225  1aab		       85 5a		      sta	AUDV1	; turn off music while levels init
    226  1aad							;		  sta AUDC0
    227  1aad
    228  1aad							;		  sta VBLANK
    229  1aad
    230  1aad
    231  1aad		       85 81		      sta	DrawStackPointer
    232  1aaf
    233  1aaf							;lda #DISPLAY_TIME ;DISPLAY_SCORE
    234  1aaf							;sta scoringFlags
    235  1aaf							;lda #0 ;SCORING_TIMER_FIRST		      ; We want the first timer display to be long, to show level and lives
    236  1aaf							;sta scoringTimer
    237  1aaf
    238  1aaf		       18		      clc
    239  1ab0		       a5 c5		      lda	ethnic
    240  1ab2		       69 10		      adc	#16
    241  1ab4		       c9 40		      cmp	#4*16
    242  1ab6		       90 02		      bcc	ethOK
    243  1ab8		       a9 00		      lda	#0
    244  1aba		       85 c5	   ethOK      sta	ethnic
    245  1abc
    246  1abc		       60		      rts
    247  1abd
    248  1abd							;-------------------------------------------------------------------------------------
    249  1abd
      0  1abd					      DEFINE_SUBROUTINE	Resync
      1  1abd		       00 03	   BANK_Resync =	_CURRENT_BANK
      2  1abd					      SUBROUTINE
      3  1abd				   Resync
      0  1abd					      RESYNC
      1  1abd
      2  1abd		       a9 02		      lda	#%10
      3  1abf		       85 41		      sta	VBLANK
      4  1ac1
      5  1ac1		       a2 08		      ldx	#8
      6  1ac3				   .loopResync
      0  1ac3					      VERTICAL_SYNC
      1  1ac3		       a9 0e		      lda	#%1110
      2  1ac5		       85 42	   .VSLP1     sta	WSYNC
      3  1ac7		       85 40		      sta	VSYNC
      4  1ac9		       4a		      lsr
      5  1aca		       d0 f9		      bne	.VSLP1
      8  1acc
      9  1acc		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  1ace		       a5 80		      lda	Platform
     11  1ad0		       49 02		      eor	#PAL_50
     12  1ad2		       d0 02		      bne	.ntsc
     13  1ad4		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  1ad6				   .ntsc
     15  1ad6				   .loopWait
     16  1ad6		       85 42		      sta	WSYNC
     17  1ad8		       85 42		      sta	WSYNC
     18  1ada		       88		      dey
     19  1adb		       d0 f9		      bne	.loopWait
     20  1add		       ca		      dex
     21  1ade		       d0 e3		      bne	.loopResync
    252  1ae0		       60	   Ret	      rts
    253  1ae1
    254  1ae1							;---------------------------------------------------------------------------
    255  1ae1
      0  1ae1					      DEFINE_SUBROUTINE	TrackPlayer	; =76
      1  1ae1		       00 03	   BANK_TrackPlayer =	_CURRENT_BANK
      2  1ae1					      SUBROUTINE
      3  1ae1				   TrackPlayer
    257  1ae1
    258  1ae1		       a5 a5		      lda	LookingAround	; 3
    259  1ae3		       d0 36		      bne	EarlyAbortx	; 2/3	     don't track when looking around
    260  1ae5
    261  1ae5		       00 02	   .SCRL_START_LEFT =	2
    262  1ae5		       00 08	   .SCRL_START_RIGHT =	SCREEN_WIDTH-.SCRL_START_LEFT
    263  1ae5		       00 02	   .SCRL_START_UP =	2
    264  1ae5		       00 06	   .SCRL_START_DOWN =	SCREEN_LINES-.SCRL_START_UP
    265  1ae5
    266  1ae5		       a5 9d		      lda	ManX	; 3
    267  1ae7		       38		      sec		; 2
    268  1ae8		       e5 97		      sbc	BoardScrollX	; 3
    269  1aea		       a8		      tay		; 2 = 10	  for later use
    270  1aeb
    271  1aeb		       a9 ff		      lda	#-1	; 2
    272  1aed		       c0 02		      cpy	#.SCRL_START_LEFT	; 2
    273  1aef		       30 06		      bmi	.startXScroll	; 2/3
    274  1af1		       c0 08		      cpy	#.SCRL_START_RIGHT	; 2
    275  1af3		       30 0b		      bmi	.skipXScroll	; 2/3
    276  1af5		       a9 01		      lda	#1	; 2 = 12
    277  1af7
    278  1af7		       18	   .startXScroll clc		; 2
    279  1af8		       65 97		      adc	BoardScrollX	; 3
    280  1afa		       c5 94		      cmp	BoardEdge_Right	; 3
    281  1afc		       b0 02		      bcs	.skipXScroll	; 2/3
    282  1afe		       85 97		      sta	BoardScrollX	; 3 = 13
    283  1b00
    284  1b00				   .skipXScroll
    285  1b00
    286  1b00							; = 35 worst
    287  1b00
    288  1b00		       a5 9e		      lda	ManY	; 3
    289  1b02		       38		      sec		; 2
    290  1b03		       e5 96		      sbc	BoardScrollY	; 3
    291  1b05		       a8		      tay		; 2 = 10	  for later use
    292  1b06
    293  1b06		       a9 ff		      lda	#-1	; 2
    294  1b08		       c0 02		      cpy	#.SCRL_START_UP	; 2
    295  1b0a		       30 06		      bmi	.startYScroll	; 2/3
    296  1b0c		       c0 06		      cpy	#.SCRL_START_DOWN	; 2
    297  1b0e		       30 0b		      bmi	.skipYScroll	; 2/3
    298  1b10		       a9 01		      lda	#1	; 2 = 12
    299  1b12
    300  1b12		       18	   .startYScroll clc		; 2
    301  1b13		       65 96		      adc	BoardScrollY	; 3
    302  1b15		       c5 95		      cmp	BoardEdge_Bottom	; 3
    303  1b17		       b0 02		      bcs	.skipYScroll	; 2/3
    304  1b19		       85 96		      sta	BoardScrollY	; 3 = 13
    305  1b1b
    306  1b1b				   .skipYScroll
    307  1b1b
    308  1b1b							; = 35 worst
    309  1b1b
    310  1b1b		       60	   EarlyAbortx rts		; 6 =	6
    311  1b1c
    312  1b1c
    313  1b1c							;------------------------------------------------------------------------------
    314  1b1c
    315  1b1c							; This is a GOOD home for these tables.
    316  1b1c
      0  1b1c					      DEFINE_SUBROUTINE	TS_PhaseVectorLO
      1  1b1c		       00 03	   BANK_TS_PhaseVectorLO =	_CURRENT_BANK
      2  1b1c					      SUBROUTINE
      3  1b1c				   TS_PhaseVectorLO
    318  1b1c
    319  1b1c							; Gives LO byte of addresses of subroutines for timeslice processing
    320  1b1c							; note +31✅ cycles at start of the function called
    321  1b1c
    322  1b1c		       58		      .byte.b	<ProcessObjStack	; abort = 46✅
    323  1b1d		       00		      .byte.b	<DrawFullScreen	; abort = 46✅
    324  1b1e		       b4		      .byte.b	<BuildDrawStack	; abort = 54✅
    325  1b1f		       bb		      .byte.b	<DrawAIntoStack	; abort = 54✅
    326  1b20		       91		      .byte.b	<SwitchObjects	; abort = 46✅
    327  1b21
    328  1b21				   TS_PhaseVectorHI
    329  1b21
    330  1b21							; Gives HI byte of addresses of subroutines for timeslice processing
    331  1b21
    332  1b21		       f8		      .byte.b	>ProcessObjStack
    333  1b22		       f3		      .byte.b	>DrawFullScreen
    334  1b23		       fb		      .byte.b	>BuildDrawStack
    335  1b24		       fb		      .byte.b	>DrawAIntoStack
    336  1b25		       f8		      .byte.b	>SwitchObjects
    337  1b26
    338  1b26				   TS_PhaseBank
    339  1b26
    340  1b26							; Gives bank of subroutines for timeslice processing
    341  1b26
    342  1b26		       1f		      .byte.b	BANK_ProcessObjStack
    343  1b27		       11		      .byte.b	BANK_DrawFullScreen
    344  1b28		       08		      .byte.b	BANK_DRAW_BUFFERS	;BANK_BuildDrawStack
    345  1b29		       08		      .byte.b	BANK_DRAW_BUFFERS	;BANK_BuildDrawStack2
    346  1b2a		       1f		      .byte.b	BANK_SwitchObjects
    347  1b2b
    348  1b2b							;------------------------------------------------------------------------------
    349  1b2b
    350  1b2b				   OverscanTime
    351  1b2b		       23 23		      .byte.b	OVERSCAN_TIM_NTSC, OVERSCAN_TIM_NTSC
    352  1b2d		       29 23		      .byte.b	OVERSCAN_TIM_PAL, OVERSCAN_TIM_NTSC
    353  1b2f
    354  1b2f
    355  1b2f		       00 12	   THROT_BASE =	18
    356  1b2f				   theThrottler
    357  1b2f		       12 12 15 12	      .byte.b	THROT_BASE, THROT_BASE, THROT_BASE*60/50, THROT_BASE
    358  1b33
      0  1b33					      DEFINE_SUBROUTINE	PostScreenCleanup
      1  1b33		       00 03	   BANK_PostScreenCleanup =	_CURRENT_BANK
      2  1b33					      SUBROUTINE
      3  1b33				   PostScreenCleanup
    360  1b33
    361  1b33		       c8		      iny		; --> 0
    362  1b34
    363  1b34		       84 49		      sty	COLUBK	; starts colour change bottom score area, wraps to top score area
    364  1b36							; + moved here so we don't see a minor colour artefact bottom of screen when look-arounding
    365  1b36
    366  1b36		       84 4d		      sty	PF0	; why wasn't this here?  I saw colour glitching in score area!
    367  1b38							; TJ: no idea why, but you had removed it in revision 758 ;)
    368  1b38							; completely accidental -- one of our cats may have deleted it.
    369  1b38		       84 4e		      sty	PF1
    370  1b3a		       84 4f		      sty	PF2
    371  1b3c		       84 5d		      sty	ENAM0
    372  1b3e		       84 5b		      sty	GRP0	; when look-scrolling, we can see feet at the top if these aren't here
    373  1b40		       84 5c		      sty	GRP1	; 30/12/2011 -- fix dots @ top!
    374  1b42
    375  1b42							; D1 VBLANK turns off beam
    376  1b42
    377  1b42		       a9 42		      lda	#%01000010	; bit6 is not required
    378  1b44		       85 41		      sta	VBLANK	; end of screen - enter blanking
    379  1b46
    380  1b46							;------------------------------------------------------------------------------
    381  1b46							; This is where the PAL system has a bit of extra time on a per-frame basis.
    382  1b46
    383  1b46		       a6 80		      ldx	Platform
    384  1b48		       bd 2b f3 	      lda	OverscanTime,x
    385  1b4b		       8d 96 02 	      sta	TIM64T
    386  1b4e
    387  1b4e							; Background colour priorities. Increasing order of priority...
    388  1b4e							;	black -- nothing happening
    389  1b4e							;	looking around			     lookingAround<0		     BLUE
    390  1b4e							;	when paused			     gameMode... BIT7		     RED
    391  1b4e							;	when the door opens (flash)	     ColourTimer>0		     WHITE
    392  1b4e
    393  1b4e		       a6 80		      ldx	Platform
    394  1b50		       bd 2f f3 	      lda	theThrottler,x
    395  1b53		       18		      clc
    396  1b54		       65 b4		      adc	Throttle
    397  1b56		       b0 02		      bcs	noVerflo
    398  1b58		       85 b4		      sta	Throttle
    399  1b5a				   noVerflo
    400  1b5a
    401  1b5a							;----------------------------------------------------------------------------------------------
    402  1b5a
    403  1b5a							; has to be done AFTER screen display, because it disables the effect!
    404  1b5a							;SLEEP 6
    405  1b5a							;lda rnd		      ; 3     randomly reposition the Cosmic Ark missile
    406  1b5a							;sta HMM0		      ; 3     this assumes that HMOVE is called at least once/frame
    407  1b5a
    408  1b5a							; "Flash" has highest BG colour priority
    409  1b5a
    410  1b5a		       a5 c1		      lda	ColourTimer
    411  1b5c		       f0 08		      beq	noFlashBG
    412  1b5e		       c6 c1		      dec	ColourTimer
    413  1b60		       d0 04		      bne	noFlashBG
    414  1b62		       a9 00		      lda	#0
    415  1b64		       85 b1		      sta	BGColour
    416  1b66							;lda ColourFlash
    417  1b66							;lda FlashColour,x
    418  1b66				   noFlashBG
    419  1b66							;	 sta BGColour
    420  1b66
    421  1b66							; Create a 'standardised' joystick with D4-D7 having bits CLEAR if the appropriate direction is chosen.
    422  1b66
    423  1b66		       ad 80 02 	      lda	SWCHA
    424  1b69		       25 92		      and	BufferedJoystick
    425  1b6b		       85 92		      sta	BufferedJoystick
    426  1b6d
    427  1b6d		       60		      rts
    428  1b6e
    429  1b6e							;------------------------------------------------------------------------------
    430  1b6e
------- FILE i2c_v2.2.inc LEVEL 3 PASS 3
      0  1b6e					      include	"i2c_v2.2.inc"
      1  1b6e							;
      2  1b6e							; i2c_v2.2.inc
      3  1b6e							;
      4  1b6e							;
      5  1b6e							; AtariVox EEPROM Driver
      6  1b6e							;
      7  1b6e							; By Alex Herbert, 2004
      8  1b6e							;
      9  1b6e							; Optimisations by Thomas Jentzsch, 2006/2008
     10  1b6e							;
     11  1b6e
     12  1b6e
     13  1b6e							; I/O Constants
     14  1b6e
     15  1b6e		       00 04	   I2C_SDA_MASK equ	$04
     16  1b6e		       00 08	   I2C_SCL_MASK equ	$08
     17  1b6e
     18  1b6e
     19  1b6e							; Signalling Macros
     20  1b6e
     21  1b6e							;  MAC     I2C_SCL_0
     22  1b6e							;    lda     #$00
     23  1b6e							;    sta     SWCHA
     24  1b6e							;  ENDM
     25  1b6e
     26  1b6e							;  MAC     I2C_SCL_1
     27  1b6e							;    lda     #I2C_SCL_MASK
     28  1b6e							;    sta     SWCHA
     29  1b6e							;  ENDM
     30  1b6e
     31  1b6e							;  MAC     I2C_SDA_IN
     32  1b6e							;    lda     #I2C_SCL_MASK
     33  1b6e							;    sta     SWACNT
     34  1b6e							;  ENDM
     35  1b6e
     36  1b6e							;  MAC     I2C_SDA_OUT
     37  1b6e							;    lda     #I2C_SCL_MASK|I2C_SDA_MASK
     38  1b6e							;    sta     SWACNT
     39  1b6e							;  ENDM
     40  1b6e
     41  1b6e
     42  1b6e					      MAC	i2c_start
     43  1b6e							; I2C_SCL_1
     44  1b6e					      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)*2	; 2	     I2C_SCL_MASK
     45  1b6e					      sta	SWCHA	; 4
     46  1b6e							; I2C_SDA_OUT
     47  1b6e					      lsr		; 2	     I2C_SCL_MASK|I2C_SDA_MASK
     48  1b6e					      sta	SWACNT	; 4
     49  1b6e							; total: 12 cycles
     50  1b6e					      ENDM
     51  1b6e
     52  1b6e
     53  1b6e					      MAC	i2c_txbit
     54  1b6e							; I2C_SCL_0
     55  1b6e					      lda	#%0011	; 2
     56  1b6e					      sta	SWCHA	; 4
     57  1b6e							; set bit
     58  1b6e					      adc	#%1000	; 2
     59  1b6e					      sta	SWACNT	; 4	     SDA = !C (a = %1000 / %1100)
     60  1b6e							; I2C_SCL_1
     61  1b6e					      lda	#I2C_SCL_MASK	; 2
     62  1b6e					      sta	SWCHA	; 4
     63  1b6e							; total: 18 cycles
     64  1b6e					      ENDM
     65  1b6e
     66  1b6e
     67  1b6e					      MAC	i2c_txnack
     68  1b6e							; I2C_SCL_0
     69  1b6e					      lda	#I2C_SCL_MASK*2	; 2	     $00
     70  1b6e					      sta	SWCHA	; 4
     71  1b6e							; I2C_SDA_IN
     72  1b6e					      lsr		; 2	     I2C_SCL_MASK
     73  1b6e					      sta	SWACNT	; 4
     74  1b6e							; I2C_SCL_1
     75  1b6e					      nop		; 2	     required for timing!
     76  1b6e					      sta	SWCHA	; 4	     I2C_SCL_MASK
     77  1b6e							; total: 18 cycles
     78  1b6e					      ENDM
     79  1b6e
     80  1b6e
     81  1b6e							; Subroutine Macros
     82  1b6e
     83  1b6e					      MAC	i2c_subs
     84  1b6e
     85  1b6e				   i2c_startread
     86  1b6e							; use V to flag if previous byte needs ACK
     87  1b6e					      ldy	#%10100001	; 2	     eeprom read command
     88  1b6e					      .byte	$2c	; 2
     89  1b6e				   i2c_startwrite
     90  1b6e					      ldy	#%10100000	; 2	     eeprom write command
     91  1b6e					      I2C_START		;12	     start signal (clears V flag)
     92  1b6e					      tya		; 2 = 16
     93  1b6e				   i2c_txbyte
     94  1b6e					      eor	#$ff	; 2	     invert data byte
     95  1b6e					      sec		; 2
     96  1b6e					      rol		; 2 =	6    shift loop bit into a
     97  1b6e				   i2c_txbyteloop
     98  1b6e					      tay		; 2
     99  1b6e					      I2C_TXBIT		;18	     transmit
    100  1b6e					      tya		; 2
    101  1b6e					      asl		; 2	     shift next bit into C
    102  1b6e					      bne	i2c_txbyteloop	; 2= 26/27
    103  1b6e
    104  1b6e							; receive acknowledge bit
    105  1b6e
    106  1b6e					      beq	i2c_rxbit	;43 = 43
    107  1b6e							; i2c_txbyte: 264 cycles
    108  1b6e							;-------------------------------------------------------------------------------
    109  1b6e
    110  1b6e				   i2c_rxbyte
    111  1b6e					      bvc	i2c_rxskipack	; 2	     previous byte needs acknowledge?
    112  1b6e					      jsr	i2c_txack	;24	     transmit acknowledge bit
    113  1b6e
    114  1b6e				   i2c_rxskipack
    115  1b6e					      bit	i2c_rxbyte	; 4	     set V - next byte(s) require acknowledge
    116  1b6e
    117  1b6e					      lda	#1	; 2
    118  1b6e				   i2c_rxbyteloop
    119  1b6e					      tay		; 2 =	2
    120  1b6e				   i2c_rxbit		;	     receive bit in C
    121  1b6e					      I2C_TXNACK		;18 = 18
    122  1b6e
    123  1b6e					      lda	SWCHA	; 4
    124  1b6e					      lsr		; 2
    125  1b6e					      lsr		; 2
    126  1b6e					      lsr		; 2 = 10    C = SDA
    127  1b6e
    128  1b6e					      tya		; 2
    129  1b6e					      rol		; 2	     rotate into Y
    130  1b6e					      bcc	i2c_rxbyteloop	; 2=	6/7
    131  1b6e
    132  1b6e							; received byte in A
    133  1b6e					      rts		; 6 =	6
    134  1b6e							; i2c_rxbit:  40 cycles
    135  1b6e							; i2c_rxbyte: 310/333 cycles
    136  1b6e							;-------------------------------------------------------------------------------
    137  1b6e
    138  1b6e				   i2c_stopread
    139  1b6e					      bvc	i2c_stopwrite	; 2
    140  1b6e					      ldy	#$80	; 2
    141  1b6e					      jsr	i2c_rxbit	;46	     transmit no-acknowledge
    142  1b6e
    143  1b6e				   i2c_stopwrite
    144  1b6e					      jsr	i2c_txack	;30
    145  1b6e
    146  1b6e							; return port to input mode
    147  1b6e					      lda	#0	; 2	     0
    148  1b6e					      sta	SWACNT	; 4
    149  1b6e					      rts		; 6 = 12
    150  1b6e							; i2c_stopread:  45/92
    151  1b6e							; i2c_stopwrite: 42
    152  1b6e							;-------------------------------------------------------------------------------
    153  1b6e
    154  1b6e				   i2c_txack
    155  1b6e							; I2C_SCL_0
    156  1b6e					      lda	#0	; 2	     $00
    157  1b6e					      sta	SWCHA	; 4
    158  1b6e							; I2C_SDA_OUT
    159  1b6e					      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)	; 2	     I2C_SCL_MASK|I2C_SDA_MASK
    160  1b6e					      sta	SWACNT	; 4
    161  1b6e							; I2C_SCL_1
    162  1b6e					      asl		; 2	     I2C_SCL_MASK
    163  1b6e					      sta	SWCHA	; 4
    164  1b6e
    165  1b6e					      rts		; 6
    166  1b6e							; total: 24 cycles
    167  1b6e							;-------------------------------------------------------------------------------
    168  1b6e
    169  1b6e					      ENDM
    170  1b6e
    171  1b6e
    172  1b6e
------- FILE BANK_GENERIC.asm
    432  1b6e
      0  1b6e					      i2c_subs
      1  1b6e
      2  1b6e				   i2c_startread
      3  1b6e
      4  1b6e		       a0 a1		      ldy	#%10100001
      5  1b70		       2c		      .byte.b	$2c
      6  1b71				   i2c_startwrite
      7  1b71		       a0 a0		      ldy	#%10100000
      0  1b73					      I2C_START
      1  1b73
      2  1b73		       a9 18		      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)*2
      3  1b75		       8d 80 02 	      sta	SWCHA
      4  1b78
      5  1b78		       4a		      lsr
      6  1b79		       8d 81 02 	      sta	SWACNT
      7  1b7c
      9  1b7c		       98		      tya
     10  1b7d				   i2c_txbyte
     11  1b7d		       49 ff		      eor	#$ff
     12  1b7f		       38		      sec
     13  1b80		       2a		      rol
     14  1b81				   i2c_txbyteloop
     15  1b81		       a8		      tay
      0  1b82					      I2C_TXBIT
      1  1b82
      2  1b82		       a9 03		      lda	#%0011
      3  1b84		       8d 80 02 	      sta	SWCHA
      4  1b87
      5  1b87		       69 08		      adc	#%1000
      6  1b89		       8d 81 02 	      sta	SWACNT
      7  1b8c
      8  1b8c		       a9 08		      lda	#I2C_SCL_MASK
      9  1b8e		       8d 80 02 	      sta	SWCHA
     10  1b91
     17  1b91		       98		      tya
     18  1b92		       0a		      asl
     19  1b93		       d0 ec		      bne	i2c_txbyteloop
     20  1b95
     21  1b95
     22  1b95
     23  1b95		       f0 0b		      beq	i2c_rxbit
     24  1b97
     25  1b97
     26  1b97
     27  1b97				   i2c_rxbyte
     28  1b97		       50 03		      bvc	i2c_rxskipack
     29  1b99		       20 ca f3 	      jsr	i2c_txack
     30  1b9c
     31  1b9c				   i2c_rxskipack
     32  1b9c		       2c 97 f3 	      bit	i2c_rxbyte
     33  1b9f
     34  1b9f		       a9 01		      lda	#1
     35  1ba1				   i2c_rxbyteloop
     36  1ba1		       a8		      tay
     37  1ba2				   i2c_rxbit
      0  1ba2					      I2C_TXNACK
      1  1ba2
      2  1ba2		       a9 10		      lda	#I2C_SCL_MASK*2
      3  1ba4		       8d 80 02 	      sta	SWCHA
      4  1ba7
      5  1ba7		       4a		      lsr
      6  1ba8		       8d 81 02 	      sta	SWACNT
      7  1bab
      8  1bab		       ea		      nop
      9  1bac		       8d 80 02 	      sta	SWCHA
     10  1baf
     39  1baf
     40  1baf		       ad 80 02 	      lda	SWCHA
     41  1bb2		       4a		      lsr
     42  1bb3		       4a		      lsr
     43  1bb4		       4a		      lsr
     44  1bb5
     45  1bb5		       98		      tya
     46  1bb6		       2a		      rol
     47  1bb7		       90 e8		      bcc	i2c_rxbyteloop
     48  1bb9
     49  1bb9
     50  1bb9		       60		      rts
     51  1bba
     52  1bba
     53  1bba
     54  1bba
     55  1bba				   i2c_stopread
     56  1bba		       50 05		      bvc	i2c_stopwrite
     57  1bbc		       a0 80		      ldy	#$80
     58  1bbe		       20 a2 f3 	      jsr	i2c_rxbit
     59  1bc1
     60  1bc1				   i2c_stopwrite
     61  1bc1		       20 ca f3 	      jsr	i2c_txack
     62  1bc4
     63  1bc4
     64  1bc4		       a9 00		      lda	#0
     65  1bc6		       8d 81 02 	      sta	SWACNT
     66  1bc9		       60		      rts
     67  1bca
     68  1bca
     69  1bca
     70  1bca
     71  1bca				   i2c_txack
     72  1bca
     73  1bca		       a9 00		      lda	#0
     74  1bcc		       8d 80 02 	      sta	SWCHA
     75  1bcf
     76  1bcf		       a9 0c		      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)
     77  1bd1		       8d 81 02 	      sta	SWACNT
     78  1bd4
     79  1bd4		       0a		      asl
     80  1bd5		       8d 80 02 	      sta	SWCHA
     81  1bd8
     82  1bd8		       60		      rts
     83  1bd9
     84  1bd9
     85  1bd9
    434  1bd9
    435  1bd9				   HandleSaveKey SUBROUTINE
    436  1bd9
    437  1bd9		       2f 00	   SAVEKEY_ADR =	$2F00	;	     tentative address for Sokoban (64 bytes)
    438  1bd9
    439  1bd9							;------------------------------------------------------------------------------
      0  1bd9					      DEFINE_SUBROUTINE	ReadSaveKey	; = 2371
      1  1bd9		       00 03	   BANK_ReadSaveKey =	_CURRENT_BANK
      2  1bd9					      SUBROUTINE
      3  1bd9				   ReadSaveKey
    441  1bd9
    442  1bd9							; assume no SaveKey found:
    443  1bd9		       a9 ff		      lda	#$ff	; 2	     return $ff if no SaveKey found
    444  1bdb		       85 df		      sta	highScoreSK+2	; 3
    445  1bdd
    446  1bdd							; setup SaveKey:
    447  1bdd		       a5 e0		      lda	startingLevel	; 3	     load start levelX*5 and level
    448  1bdf		       a6 b3		      ldx	level	; 3
    449  1be1		       20 1a f4 	      jsr	SetupSaveKey	;6+853
    450  1be4		       90 52		      bcc	NoSKfound	; 2/3
    451  1be6
    452  1be6							;    lda     #$34
    453  1be6							;    sta     COLUBK
    454  1be6
    455  1be6							; start read
    456  1be6		       20 c1 f3 	      jsr	i2c_stopwrite	;6+42	     end of "fake" write
    457  1be9		       20 6e f3 	      jsr	i2c_startread	;6+284      Start signal and $a1 command byte
    458  1bec
    459  1bec							; read high score:
    460  1bec		       a2 02		      ldx	#3-1	; 2 = 1187
    461  1bee				   .loopRead
    462  1bee		       20 97 f3 	      jsr	i2c_rxbyte	;6+333      read byte from EEPROM
    463  1bf1		       c9 ff		      cmp	#$ff	; 2	     EEPROM slot empty?
    464  1bf3		       d0 02		      bne	.skipEmpty	; 2/3	      no, skip clear
    465  1bf5		       a9 00		      lda	#0	; 2	     clear EEPROM slot
    466  1bf7				   .skipEmpty
    467  1bf7		       95 dd		      sta	highScoreSK,x	; 4
    468  1bf9		       ca		      dex		; 2
    469  1bfa		       10 f2		      bpl	.loopRead	; 2/3= 354
    470  1bfc
    471  1bfc							; stop read:
    472  1bfc		       4c ba f3 	      jmp	i2c_stopread	;3+92=95    terminate read
    473  1bff
    474  1bff							;------------------------------------------------------------------------------
      0  1bff					      DEFINE_SUBROUTINE	WriteSaveKey	; = 1751
      1  1bff		       00 03	   BANK_WriteSaveKey =	_CURRENT_BANK
      2  1bff					      SUBROUTINE
      3  1bff				   WriteSaveKey
    476  1bff
    477  1bff							; check if new high score:
    478  1bff		       a6 dd		      ldx	highScoreSK	; 3
    479  1c01		       e8		      inx		; 2
    480  1c02		       f0 34		      beq	NoSKfound	; 2/3	     no new high score, abort
    481  1c04
    482  1c04							; setup SaveKey:
    483  1c04		       a5 e0		      lda	startingLevel	; 3	     load start levelX*5 and level
    484  1c06		       a6 e1		      ldx	startLevel	; 3
    485  1c08		       20 1a f4 	      jsr	SetupSaveKey	; 6+853
    486  1c0b		       90 2b		      bcc	NoSKfound	; 2/3
    487  1c0d
    488  1c0d							;    lda     #$64
    489  1c0d							;    sta     COLUBK
    490  1c0d
    491  1c0d							; write high score:
    492  1c0d		       a2 02		      ldx	#3-1	; 2 = 841
    493  1c0f				   .loopWrite
    494  1c0f		       b5 dd		      lda	highScoreSK,x	; 4
    495  1c11		       20 7d f3 	      jsr	i2c_txbyte	;6+264      transmit to EEPROM
    496  1c14		       ca		      dex		; 2
    497  1c15		       10 f8		      bpl	.loopWrite	; 2/3= 837
    498  1c17
    499  1c17							; stop write:
    500  1c17		       4c c1 f3 	      jmp	i2c_stopwrite	; 3+42= 45  terminate write and commit to memory
    501  1c1a
    502  1c1a
    503  1c1a							;------------------------------------------------------------------------------
    504  1c1a
      0  1c1a					      DEFINE_SUBROUTINE	SetupSaveKey	; = 853
      1  1c1a		       00 03	   BANK_SetupSaveKey =	_CURRENT_BANK
      2  1c1a					      SUBROUTINE
      3  1c1a				   SetupSaveKey
    506  1c1a
    507  1c1a							; calculate slot;
    508  1c1a							; a = levelX
    509  1c1a							; x = level (0..4)
    510  1c1a		       85 e2		      sta	offsetSK	; 3
    511  1c1c		       8a		      txa		; 2
    512  1c1d		       18		      clc		; 2
    513  1c1e		       65 e2		      adc	offsetSK	; 3
    514  1c20		       85 e2		      sta	offsetSK	; 3
    515  1c22		       0a		      asl		; 2	     multiply by 3
    516  1c23		       65 e2		      adc	offsetSK	; 3
    517  1c25		       69 00		      adc	#<SAVEKEY_ADR	; 2
    518  1c27		       aa		      tax		; 2 = 22
    519  1c28							; detect SaveKey:
    520  1c28		       20 71 f3 	      jsr	i2c_startwrite	;6+280
    521  1c2b		       d0 0a		      bne	.exitSK	; 2/3
    522  1c2d
    523  1c2d							; setup address:
    524  1c2d		       b8		      clv		; 2
    525  1c2e		       a9 2f		      lda	#>SAVEKEY_ADR	; 2	     upper byte of address
    526  1c30		       20 7d f3 	      jsr	i2c_txbyte	;6+264
    527  1c33		       8a		      txa		; 2	     x = lower byte offset
    528  1c34		       4c 7d f3 	      jmp	i2c_txbyte	;3+264      returns C==1
    529  1c37
    530  1c37				   .exitSK
    531  1c37		       18		      clc
    532  1c38				   NoSKfound
    533  1c38		       60		      rts
    534  1c38					      ENDIF
    535  1c39
    536  1c39
      0  1c39					      CHECK_BANK_SIZE	"GENERIC_BANK_1 -- full 2K"
      1  1c39		       04 39	   .TEMP      =	* - BANK_START
 GENERIC_BANK_1 -- full 2K (2K) SIZE =  $439 , FREE= $3c7
      2  1c39					      ECHO	"GENERIC_BANK_1 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  1c39				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  1c39				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  1c39				  -	      ERR
      6  1c39					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS_TABLES.asm LEVEL 2 PASS 3
      0  1c39					      include	"BANK_LEVELS_TABLES.asm"
      1  1c39							;    Sokoboo - a Sokoban implementation
      2  1c39							;    using a generic tile-based display engine for the Atari 2600
      3  1c39							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  1c39							;
      5  1c39							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  1c39							;
      7  1c39							;    Code related to the generic tile-based display engine was developed by
      8  1c39							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  1c39							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  1c39							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  1c39							;
     12  1c39							;    Code related to music and sound effects uses the TIATracker music player
     13  1c39							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  1c39							;    directory for Apache licensing details.
     15  1c39							;
     16  1c39							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  1c39							;    See the copyright notices in the License directory for a list of level
     18  1c39							;    contributors.
     19  1c39							;
     20  1c39							;    Except where otherwise indicated, this software is released under the
     21  1c39							;    following licensing arrangement...
     22  1c39							;
     23  1c39							;    This program is free software: you can redistribute it and/or modify
     24  1c39							;    it under the terms of the GNU General Public License as published by
     25  1c39							;    the Free Software Foundation, either version 3 of the License, or
     26  1c39							;    (at your option) any later version.
     27  1c39							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  1c39
     29  1c39							;    This program is distributed in the hope that it will be useful,
     30  1c39							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  1c39							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  1c39							;    GNU General Public License for more details.
     33  1c39
     34  1c39							; level definitions
     35  1c39							; Sample level definitions.
     36  1c39							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  1c39							; have as many banks as you like.
     38  1c39
      0  1c39					      NEWBANK	LEVELS_TABLES
      1  22ee ????				      SEG	LEVELS_TABLES
      2  2000					      ORG	ORIGIN
      3  2000					      RORG	$F000
      4  2000				   BANK_START SET	*
      5  2000				   LEVELS_TABLES SET	ORIGIN / 2048
      6  2000				   ORIGIN     SET	ORIGIN + 2048
      7  2000				   _CURRENT_BANK SET	LEVELS_TABLES
     40  2000
     41  2000
     42  2000							; The ordering here corresponds to the ordering when playing...
     43  2000
      0  2000					      DEFINE_SUBROUTINE	LevelInfoLO
      1  2000		       00 04	   BANK_LevelInfoLO =	_CURRENT_BANK
      2  2000					      SUBROUTINE
      3  2000				   LevelInfoLO
     45  2000		       ff		      .byte.b	<(LEVEL__001_L-1)
     46  2001		       11		      .byte.b	<(LEVEL__001_R-1)
     47  2002		       1d		      .byte.b	<(LEVEL__002_L-1)
     48  2003		       36		      .byte.b	<(LEVEL__002_R-1)
     49  2004		       5e		      .byte.b	<(LEVEL__003_L-1)
     50  2005		       8a		      .byte.b	<(LEVEL__003_R-1)
     51  2006		       b4		      .byte.b	<(LEVEL__004_L-1)
     52  2007		       d7		      .byte.b	<(LEVEL__004_R-1)
     53  2008		       f3		      .byte.b	<(LEVEL__005_L-1)
     54  2009		       25		      .byte.b	<(LEVEL__005_R-1)
     55  200a		       64		      .byte.b	<(LEVEL__006_L-1)
     56  200b		       9f		      .byte.b	<(LEVEL__006_R-1)
     57  200c		       dd		      .byte.b	<(LEVEL__007_L-1)
     58  200d		       0a		      .byte.b	<(LEVEL__007_R-1)
     59  200e		       3d		      .byte.b	<(LEVEL__008_L-1)
     60  200f		       73		      .byte.b	<(LEVEL__008_R-1)
     61  2010		       a4		      .byte.b	<(LEVEL__009_L-1)
     62  2011		       d6		      .byte.b	<(LEVEL__009_R-1)
     63  2012		       06		      .byte.b	<(LEVEL__010_L-1)
     64  2013		       40		      .byte.b	<(LEVEL__010_R-1)
     65  2014		       73		      .byte.b	<(LEVEL__011_L-1)
     66  2015		       a6		      .byte.b	<(LEVEL__011_R-1)
     67  2016		       e0		      .byte.b	<(LEVEL__012_L-1)
     68  2017		       10		      .byte.b	<(LEVEL__012_R-1)
     69  2018		       4c		      .byte.b	<(LEVEL__013_L-1)
     70  2019		       8b		      .byte.b	<(LEVEL__013_R-1)
     71  201a		       be		      .byte.b	<(LEVEL__014_L-1)
     72  201b		       01		      .byte.b	<(LEVEL__014_R-1)
     73  201c		       44		      .byte.b	<(LEVEL__015_L-1)
     74  201d		       79		      .byte.b	<(LEVEL__015_R-1)
     75  201e		       be		      .byte.b	<(LEVEL__016_L-1)
     76  201f		       f5		      .byte.b	<(LEVEL__016_R-1)
     77  2020		       28		      .byte.b	<(LEVEL__017_L-1)
     78  2021		       72		      .byte.b	<(LEVEL__017_R-1)
     79  2022		       b5		      .byte.b	<(LEVEL__018_L-1)
     80  2023		       e9		      .byte.b	<(LEVEL__018_R-1)
     81  2024		       25		      .byte.b	<(LEVEL__019_L-1)
     82  2025		       60		      .byte.b	<(LEVEL__019_R-1)
     83  2026		       ff		      .byte.b	<(LEVEL__020_L-1)
     84  2027		       3e		      .byte.b	<(LEVEL__020_R-1)
     85  2028		       7e		      .byte.b	<(LEVEL__021_L-1)
     86  2029		       d4		      .byte.b	<(LEVEL__021_R-1)
     87  202a		       08		      .byte.b	<(LEVEL__022_L-1)
     88  202b		       4e		      .byte.b	<(LEVEL__022_R-1)
     89  202c		       8a		      .byte.b	<(LEVEL__023_L-1)
     90  202d		       cb		      .byte.b	<(LEVEL__023_R-1)
     91  202e		       0d		      .byte.b	<(LEVEL__024_L-1)
     92  202f		       5d		      .byte.b	<(LEVEL__024_R-1)
     93  2030		       a5		      .byte.b	<(LEVEL__025_L-1)
     94  2031		       e8		      .byte.b	<(LEVEL__025_R-1)
     95  2032		       27		      .byte.b	<(LEVEL__026_L-1)
     96  2033		       60		      .byte.b	<(LEVEL__026_R-1)
     97  2034		       a1		      .byte.b	<(LEVEL__027_L-1)
     98  2035		       df		      .byte.b	<(LEVEL__027_R-1)
     99  2036		       1d		      .byte.b	<(LEVEL__028_L-1)
    100  2037		       69		      .byte.b	<(LEVEL__028_R-1)
    101  2038		       b7		      .byte.b	<(LEVEL__029_L-1)
    102  2039		       fc		      .byte.b	<(LEVEL__029_R-1)
    103  203a		       40		      .byte.b	<(LEVEL__030_L-1)
    104  203b		       90		      .byte.b	<(LEVEL__030_R-1)
    105  203c		       e3		      .byte.b	<(LEVEL__031_L-1)
    106  203d		       29		      .byte.b	<(LEVEL__031_R-1)
    107  203e		       68		      .byte.b	<(LEVEL__032_L-1)
    108  203f		       a0		      .byte.b	<(LEVEL__032_R-1)
    109  2040		       e4		      .byte.b	<(LEVEL__033_L-1)
    110  2041		       2e		      .byte.b	<(LEVEL__033_R-1)
    111  2042		       6e		      .byte.b	<(LEVEL__034_L-1)
    112  2043		       ff		      .byte.b	<(LEVEL__034_R-1)
    113  2044		       48		      .byte.b	<(LEVEL__035_L-1)
    114  2045		       8d		      .byte.b	<(LEVEL__035_R-1)
    115  2046		       cd		      .byte.b	<(LEVEL__036_L-1)
    116  2047		       03		      .byte.b	<(LEVEL__036_R-1)
    117  2048		       49		      .byte.b	<(LEVEL__037_L-1)
    118  2049		       86		      .byte.b	<(LEVEL__037_R-1)
    119  204a		       cf		      .byte.b	<(LEVEL__038_L-1)
    120  204b		       17		      .byte.b	<(LEVEL__038_R-1)
    121  204c		       66		      .byte.b	<(LEVEL__039_L-1)
    122  204d		       b5		      .byte.b	<(LEVEL__039_R-1)
    123  204e		       0f		      .byte.b	<(LEVEL__040_L-1)
    124  204f		       56		      .byte.b	<(LEVEL__040_R-1)
    125  2050
    126  2050		       9d		      .byte.b	<(LEVEL__041_L-1)
    127  2051		       e7		      .byte.b	<(LEVEL__041_R-1)
    128  2052		       2e		      .byte.b	<(LEVEL__042_L-1)
    129  2053		       7c		      .byte.b	<(LEVEL__042_R-1)
    130  2054		       d4		      .byte.b	<(LEVEL__043_L-1)
    131  2055		       21		      .byte.b	<(LEVEL__043_R-1)
    132  2056		       6d		      .byte.b	<(LEVEL__044_L-1)
    133  2057		       a5		      .byte.b	<(LEVEL__044_R-1)
    134  2058		       f5		      .byte.b	<(LEVEL__045_L-1)
    135  2059		       43		      .byte.b	<(LEVEL__045_R-1)
    136  205a		       8d		      .byte.b	<(LEVEL__046_L-1)
    137  205b		       da		      .byte.b	<(LEVEL__046_R-1)
    138  205c		       1f		      .byte.b	<(LEVEL__047_L-1)
    139  205d		       75		      .byte.b	<(LEVEL__047_R-1)
    140  205e		       ff		      .byte.b	<(LEVEL__048_L-1)
    141  205f		       4b		      .byte.b	<(LEVEL__048_R-1)
    142  2060		       96		      .byte.b	<(LEVEL__049_L-1)
    143  2061		       e8		      .byte.b	<(LEVEL__049_R-1)
    144  2062
    145  2062		       2b		      .byte.b	<(LEVEL__050_L-1)
    146  2063		       78		      .byte.b	<(LEVEL__050_R-1)
    147  2064		       b1		      .byte.b	<(LEVEL__051_L-1)
    148  2065		       04		      .byte.b	<(LEVEL__051_R-1)
    149  2066		       55		      .byte.b	<(LEVEL__052_L-1)
    150  2067		       8f		      .byte.b	<(LEVEL__052_R-1)
    151  2068		       d7		      .byte.b	<(LEVEL__053_L-1)
    152  2069		       2c		      .byte.b	<(LEVEL__053_R-1)
    153  206a		       79		      .byte.b	<(LEVEL__054_L-1)
    154  206b		       c5		      .byte.b	<(LEVEL__054_R-1)
    155  206c		       0e		      .byte.b	<(LEVEL__055_L-1)
    156  206d		       68		      .byte.b	<(LEVEL__055_R-1)
    157  206e		       bd		      .byte.b	<(LEVEL__056_L-1)
    158  206f		       17		      .byte.b	<(LEVEL__056_R-1)
    159  2070		       72		      .byte.b	<(LEVEL__057_L-1)
    160  2071		       c8		      .byte.b	<(LEVEL__057_R-1)
    161  2072		       11		      .byte.b	<(LEVEL__058_L-1)
    162  2073		       56		      .byte.b	<(LEVEL__058_R-1)
    163  2074		       a6		      .byte.b	<(LEVEL__059_L-1)
    164  2075		       f8		      .byte.b	<(LEVEL__059_R-1)
    165  2076
    166  2076		       ff		      .byte.b	<(LEVEL__060_R-1)
    167  2077		       9b		      .byte.b	<(LEVEL__061_R-1)
    168  2078		       47		      .byte.b	<(LEVEL__061_L-1)
    169  2079		       e4		      .byte.b	<(LEVEL__062_L-1)
    170  207a		       3b		      .byte.b	<(LEVEL__062_R-1)
    171  207b		       87		      .byte.b	<(LEVEL__063_L-1)
    172  207c		       d7		      .byte.b	<(LEVEL__063_R-1)
    173  207d		       84		      .byte.b	<(LEVEL__064_R-1)
    174  207e		       29		      .byte.b	<(LEVEL__064_L-1)
    175  207f		       28		      .byte.b	<(LEVEL__065_R-1)
    176  2080		       d0		      .byte.b	<(LEVEL__065_L-1)
    177  2081		       ca		      .byte.b	<(LEVEL__066_R-1)
    178  2082		       70		      .byte.b	<(LEVEL__066_L-1)
    179  2083		       6d		      .byte.b	<(LEVEL__067_R-1)
    180  2084		       20		      .byte.b	<(LEVEL__067_L-1)
    181  2085		       26		      .byte.b	<(LEVEL__068_R-1)
    182  2086		       d2		      .byte.b	<(LEVEL__068_L-1)
    183  2087		       ca		      .byte.b	<(LEVEL__069_R-1)
    184  2088		       7c		      .byte.b	<(LEVEL__069_L-1)
    185  2089
    186  2089					      if	1
    187  2089		       e8		      .byte.b	<(LEVEL__103_Arielle-1)
    188  208a		       a1		      .byte.b	<(LEVEL__103_Ajalae-1)
    189  208b		       56		      .byte.b	<(LEVEL__103_Adin-1)
    190  208c		       e8		      .byte.b	<(LEVEL__102_Raven-1)
    191  208d		       a4		      .byte.b	<(LEVEL__102_Oralia-1)
    192  208e		       ff		      .byte.b	<(LEVEL__102_Natalie-1)
    193  208f		       45		      .byte.b	<(LEVEL__102_Mirabel-1)
    194  2090		       38		      .byte.b	<(LEVEL__1XJH_Tara_Gelson-1)
    195  2091		       72		      .byte.b	<(LEVEL__1R7X_Alison-1)
    196  2092		       9f		      .byte.b	<(LEVEL__1KWD_Cecile_Clayworth-1)
    197  2093		       d3		      .byte.b	<(LEVEL__1EKT_Samantha_Gelson-1)
    198  2094		       0c		      .byte.b	<(LEVEL__0VM5_Andrea_Wadd-1)
    199  2095		       39		      .byte.b	<(LEVEL__0PAL_Jill_Leatherby-1)
    200  2096		       63		      .byte.b	<(LEVEL__0IZ1_Sophia-1)
    201  2097		       8e		      .byte.b	<(LEVEL__0CNH_Alice-1)
    202  2098		       18		      .byte.b	<(LEVEL__122_Maya-1)
    203  2099					      endif
    204  2099
    205  2099		       ba		      .byte.b	<(LEVEL_Thomas_Reinke16-1)
    206  209a
    207  209a		       ff		      .byte.b	<(LEVEL__Hof_0-1)
    208  209b		       67		      .byte.b	<(LEVEL__Hof_1-1)
    209  209c		       d3		      .byte.b	<(LEVEL__Hof_2-1)
    210  209d		       49		      .byte.b	<(LEVEL__Hof_3-1)
    211  209e		       7c		      .byte.b	<(LEVEL__Hof_4-1)
    212  209f		       a3		      .byte.b	<(LEVEL__Hof_5-1)
    213  20a0		       e2		      .byte.b	<(LEVEL__Hof_6-1)
    214  20a1		       1b		      .byte.b	<(LEVEL__Hof_7-1)
    215  20a2		       88		      .byte.b	<(LEVEL__Hof_8-1)
    216  20a3		       ce		      .byte.b	<(LEVEL__Hof_9-1)
    217  20a4
    218  20a4		       1c		      .byte.b	<(LEVEL_Zone_26_0-1)
    219  20a5		       5c		      .byte.b	<(LEVEL_Zone_26_1-1)
    220  20a6		       9e		      .byte.b	<(LEVEL_Zone_26_2-1)
    221  20a7		       ff		      .byte.b	<(LEVEL_Zone_26_3-1)
    222  20a8		       44		      .byte.b	<(LEVEL_Zone_26_4-1)
    223  20a9		       83		      .byte.b	<(LEVEL_Zone_26_5-1)
    224  20aa		       c6		      .byte.b	<(LEVEL_Zone_26_6-1)
    225  20ab		       08		      .byte.b	<(LEVEL_Zone_26_7-1)
    226  20ac		       4a		      .byte.b	<(LEVEL_Zone_26_8-1)
    227  20ad		       84		      .byte.b	<(LEVEL_Zone_26_9-1)
    228  20ae
    229  20ae		       c1		      .byte.b	<(LEVEL_Zone_26_10-1)
    230  20af		       fc		      .byte.b	<(LEVEL_Zone_26_11-1)
    231  20b0		       35		      .byte.b	<(LEVEL_Zone_26_12-1)
    232  20b1		       71		      .byte.b	<(LEVEL_Zone_26_13-1)
    233  20b2		       a4		      .byte.b	<(LEVEL_Zone_26_14-1)
    234  20b3		       e5		      .byte.b	<(LEVEL_Zone_26_15-1)
    235  20b4		       21		      .byte.b	<(LEVEL_Zone_26_16-1)
    236  20b5		       5c		      .byte.b	<(LEVEL_Zone_26_17-1)
    237  20b6		       9e		      .byte.b	<(LEVEL_Zone_26_18-1)
    238  20b7		       d6		      .byte.b	<(LEVEL_Zone_26_19-1)
    239  20b8
    240  20b8		       11		      .byte.b	<(LEVEL_Zone_26_20-1)
    241  20b9		       45		      .byte.b	<(LEVEL_Zone_26_21-1)
    242  20ba		       7f		      .byte.b	<(LEVEL_Zone_26_22-1)
    243  20bb		       b9		      .byte.b	<(LEVEL_Zone_26_23-1)
    244  20bc		       f7		      .byte.b	<(LEVEL_Zone_26_24-1)
    245  20bd		       39		      .byte.b	<(LEVEL_Zone_26_25-1)
    246  20be		       77		      .byte.b	<(LEVEL_Zone_26_26-1)
    247  20bf		       b8		      .byte.b	<(LEVEL_Zone_26_27-1)
    248  20c0		       ed		      .byte.b	<(LEVEL_Zone_26_28-1)
    249  20c1		       2f		      .byte.b	<(LEVEL_Zone_26_29-1)
    250  20c2
    251  20c2		       71		      .byte.b	<(LEVEL_Zone_26_30-1)
    252  20c3		       b4		      .byte.b	<(LEVEL_Zone_26_31-1)
    253  20c4		       f9		      .byte.b	<(LEVEL_Zone_26_32-1)
    254  20c5		       37		      .byte.b	<(LEVEL_Zone_26_33-1)
    255  20c6		       76		      .byte.b	<(LEVEL_Zone_26_34-1)
    256  20c7		       b4		      .byte.b	<(LEVEL_Zone_26_35-1)
    257  20c8		       ff		      .byte.b	<(LEVEL_Zone_26_36-1)
    258  20c9		       40		      .byte.b	<(LEVEL_Zone_26_37-1)
    259  20ca		       7f		      .byte.b	<(LEVEL_Zone_26_38-1)
    260  20cb		       b5		      .byte.b	<(LEVEL_Zone_26_39-1)
    261  20cc
    262  20cc		       f5		      .byte.b	<(LEVEL_Zone_26_40-1)
    263  20cd		       31		      .byte.b	<(LEVEL_Zone_26_41-1)
    264  20ce		       66		      .byte.b	<(LEVEL_Zone_26_42-1)
    265  20cf		       a9		      .byte.b	<(LEVEL_Zone_26_43-1)
    266  20d0		       ee		      .byte.b	<(LEVEL_Zone_26_44-1)
    267  20d1		       28		      .byte.b	<(LEVEL_Zone_26_45-1)
    268  20d2		       6a		      .byte.b	<(LEVEL_Zone_26_46-1)
    269  20d3		       ae		      .byte.b	<(LEVEL_Zone_26_47-1)
    270  20d4		       ef		      .byte.b	<(LEVEL_Zone_26_48-1)
    271  20d5		       31		      .byte.b	<(LEVEL_Zone_26_49-1)
    272  20d6
    273  20d6		       73		      .byte.b	<(LEVEL_Zone_26_50-1)
    274  20d7		       b5		      .byte.b	<(LEVEL_Zone_26_51-1)
    275  20d8		       f7		      .byte.b	<(LEVEL_Zone_26_52-1)
    276  20d9		       36		      .byte.b	<(LEVEL_Zone_26_53-1)
    277  20da		       7b		      .byte.b	<(LEVEL_Zone_26_54-1)
    278  20db		       c0		      .byte.b	<(LEVEL_Zone_26_55-1)
    279  20dc		       fd		      .byte.b	<(LEVEL_Zone_26_56-1)
    280  20dd		       3e		      .byte.b	<(LEVEL_Zone_26_57-1)
    281  20de		       7f		      .byte.b	<(LEVEL_Zone_26_58-1)
    282  20df		       c0		      .byte.b	<(LEVEL_Zone_26_59-1)
    283  20e0
    284  20e0		       fd		      .byte.b	<(LEVEL_Zone_26_60-1)
    285  20e1		       40		      .byte.b	<(LEVEL_Zone_26_61-1)
    286  20e2		       7e		      .byte.b	<(LEVEL_Zone_26_62-1)
    287  20e3		       bc		      .byte.b	<(LEVEL_Zone_26_63-1)
    288  20e4		       f4		      .byte.b	<(LEVEL_Zone_26_64-1)
    289  20e5		       2e		      .byte.b	<(LEVEL_Zone_26_65-1)
    290  20e6		       62		      .byte.b	<(LEVEL_Zone_26_66-1)
    291  20e7		       9f		      .byte.b	<(LEVEL_Zone_26_67-1)
    292  20e8		       ff		      .byte.b	<(LEVEL_Zone_26_68-1)
    293  20e9		       3a		      .byte.b	<(LEVEL_Zone_26_69-1)
    294  20ea
    295  20ea		       71		      .byte.b	<(LEVEL_Zone_26_70-1)
    296  20eb		       b2		      .byte.b	<(LEVEL_Zone_26_71-1)
    297  20ec		       f4		      .byte.b	<(LEVEL_Zone_26_72-1)
    298  20ed		       2e		      .byte.b	<(LEVEL_Zone_26_73-1)
    299  20ee		       6a		      .byte.b	<(LEVEL_Zone_26_74-1)
    300  20ef		       a6		      .byte.b	<(LEVEL_Zone_26_75-1)
    301  20f0		       e3		      .byte.b	<(LEVEL_Zone_26_76-1)
    302  20f1		       1c		      .byte.b	<(LEVEL_Zone_26_77-1)
    303  20f2		       5b		      .byte.b	<(LEVEL_Zone_26_78-1)
    304  20f3		       96		      .byte.b	<(LEVEL_Zone_26_79-1)
    305  20f4
    306  20f4		       d3		      .byte.b	<(LEVEL_Zone_26_80-1)
    307  20f5		       0d		      .byte.b	<(LEVEL_Zone_26_81-1)
    308  20f6		       49		      .byte.b	<(LEVEL_Zone_26_82-1)
    309  20f7		       81		      .byte.b	<(LEVEL_Zone_26_83-1)
    310  20f8		       bd		      .byte.b	<(LEVEL_Zone_26_84-1)
    311  20f9		       f6		      .byte.b	<(LEVEL_Zone_26_85-1)
    312  20fa
    313  20fa
    314  20fa		       00 fa	   MAX_LEVEL  =	* - LevelInfoLO
 $fa LEVELS INSTALLED
    315  20fa					      ECHO	MAX_LEVEL, "LEVELS INSTALLED"
    316  20fa				   LevelInfoHI
    317  20fa
    318  20fa		       ef		      .byte.b	>(LEVEL__001_L-1)
    319  20fb		       f0		      .byte.b	>(LEVEL__001_R-1)
    320  20fc		       f0		      .byte.b	>(LEVEL__002_L-1)
    321  20fd		       f0		      .byte.b	>(LEVEL__002_R-1)
    322  20fe		       f0		      .byte.b	>(LEVEL__003_L-1)
    323  20ff		       f0		      .byte.b	>(LEVEL__003_R-1)
    324  2100		       f0		      .byte.b	>(LEVEL__004_L-1)
    325  2101		       f0		      .byte.b	>(LEVEL__004_R-1)
    326  2102		       f0		      .byte.b	>(LEVEL__005_L-1)
    327  2103		       f1		      .byte.b	>(LEVEL__005_R-1)
    328  2104		       f1		      .byte.b	>(LEVEL__006_L-1)
    329  2105		       f1		      .byte.b	>(LEVEL__006_R-1)
    330  2106		       f1		      .byte.b	>(LEVEL__007_L-1)
    331  2107		       f2		      .byte.b	>(LEVEL__007_R-1)
    332  2108		       f2		      .byte.b	>(LEVEL__008_L-1)
    333  2109		       f2		      .byte.b	>(LEVEL__008_R-1)
    334  210a		       f2		      .byte.b	>(LEVEL__009_L-1)
    335  210b		       f2		      .byte.b	>(LEVEL__009_R-1)
    336  210c		       f3		      .byte.b	>(LEVEL__010_L-1)
    337  210d		       f3		      .byte.b	>(LEVEL__010_R-1)
    338  210e		       f3		      .byte.b	>(LEVEL__011_L-1)
    339  210f		       f3		      .byte.b	>(LEVEL__011_R-1)
    340  2110		       f3		      .byte.b	>(LEVEL__012_L-1)
    341  2111		       f4		      .byte.b	>(LEVEL__012_R-1)
    342  2112		       f4		      .byte.b	>(LEVEL__013_L-1)
    343  2113		       f4		      .byte.b	>(LEVEL__013_R-1)
    344  2114		       f4		      .byte.b	>(LEVEL__014_L-1)
    345  2115		       f5		      .byte.b	>(LEVEL__014_R-1)
    346  2116		       f5		      .byte.b	>(LEVEL__015_L-1)
    347  2117		       f5		      .byte.b	>(LEVEL__015_R-1)
    348  2118		       f5		      .byte.b	>(LEVEL__016_L-1)
    349  2119		       f5		      .byte.b	>(LEVEL__016_R-1)
    350  211a		       f6		      .byte.b	>(LEVEL__017_L-1)
    351  211b		       f6		      .byte.b	>(LEVEL__017_R-1)
    352  211c		       f6		      .byte.b	>(LEVEL__018_L-1)
    353  211d		       f6		      .byte.b	>(LEVEL__018_R-1)
    354  211e		       f7		      .byte.b	>(LEVEL__019_L-1)
    355  211f		       f7		      .byte.b	>(LEVEL__019_R-1)
    356  2120		       ef		      .byte.b	>(LEVEL__020_L-1)
    357  2121		       f0		      .byte.b	>(LEVEL__020_R-1)
    358  2122		       f0		      .byte.b	>(LEVEL__021_L-1)
    359  2123		       f0		      .byte.b	>(LEVEL__021_R-1)
    360  2124		       f1		      .byte.b	>(LEVEL__022_L-1)
    361  2125		       f1		      .byte.b	>(LEVEL__022_R-1)
    362  2126		       f1		      .byte.b	>(LEVEL__023_L-1)
    363  2127		       f1		      .byte.b	>(LEVEL__023_R-1)
    364  2128		       f2		      .byte.b	>(LEVEL__024_L-1)
    365  2129		       f2		      .byte.b	>(LEVEL__024_R-1)
    366  212a		       f2		      .byte.b	>(LEVEL__025_L-1)
    367  212b		       f2		      .byte.b	>(LEVEL__025_R-1)
    368  212c		       f3		      .byte.b	>(LEVEL__026_L-1)
    369  212d		       f3		      .byte.b	>(LEVEL__026_R-1)
    370  212e		       f3		      .byte.b	>(LEVEL__027_L-1)
    371  212f		       f3		      .byte.b	>(LEVEL__027_R-1)
    372  2130		       f4		      .byte.b	>(LEVEL__028_L-1)
    373  2131		       f4		      .byte.b	>(LEVEL__028_R-1)
    374  2132		       f4		      .byte.b	>(LEVEL__029_L-1)
    375  2133		       f4		      .byte.b	>(LEVEL__029_R-1)
    376  2134		       f5		      .byte.b	>(LEVEL__030_L-1)
    377  2135		       f5		      .byte.b	>(LEVEL__030_R-1)
    378  2136		       f5		      .byte.b	>(LEVEL__031_L-1)
    379  2137		       f6		      .byte.b	>(LEVEL__031_R-1)
    380  2138		       f6		      .byte.b	>(LEVEL__032_L-1)
    381  2139		       f6		      .byte.b	>(LEVEL__032_R-1)
    382  213a		       f6		      .byte.b	>(LEVEL__033_L-1)
    383  213b		       f7		      .byte.b	>(LEVEL__033_R-1)
    384  213c		       f7		      .byte.b	>(LEVEL__034_L-1)
    385  213d		       ef		      .byte.b	>(LEVEL__034_R-1)
    386  213e		       f0		      .byte.b	>(LEVEL__035_L-1)
    387  213f		       f0		      .byte.b	>(LEVEL__035_R-1)
    388  2140		       f0		      .byte.b	>(LEVEL__036_L-1)
    389  2141		       f1		      .byte.b	>(LEVEL__036_R-1)
    390  2142		       f1		      .byte.b	>(LEVEL__037_L-1)
    391  2143		       f1		      .byte.b	>(LEVEL__037_R-1)
    392  2144		       f1		      .byte.b	>(LEVEL__038_L-1)
    393  2145		       f2		      .byte.b	>(LEVEL__038_R-1)
    394  2146		       f2		      .byte.b	>(LEVEL__039_L-1)
    395  2147		       f2		      .byte.b	>(LEVEL__039_R-1)
    396  2148		       f3		      .byte.b	>(LEVEL__040_L-1)
    397  2149		       f3		      .byte.b	>(LEVEL__040_R-1)
    398  214a
    399  214a		       f3		      .byte.b	>(LEVEL__041_L-1)
    400  214b		       f3		      .byte.b	>(LEVEL__041_R-1)
    401  214c		       f4		      .byte.b	>(LEVEL__042_L-1)
    402  214d		       f4		      .byte.b	>(LEVEL__042_R-1)
    403  214e		       f4		      .byte.b	>(LEVEL__043_L-1)
    404  214f		       f5		      .byte.b	>(LEVEL__043_R-1)
    405  2150		       f5		      .byte.b	>(LEVEL__044_L-1)
    406  2151		       f5		      .byte.b	>(LEVEL__044_R-1)
    407  2152		       f5		      .byte.b	>(LEVEL__045_L-1)
    408  2153		       f6		      .byte.b	>(LEVEL__045_R-1)
    409  2154		       f6		      .byte.b	>(LEVEL__046_L-1)
    410  2155		       f6		      .byte.b	>(LEVEL__046_R-1)
    411  2156		       f7		      .byte.b	>(LEVEL__047_L-1)
    412  2157		       f7		      .byte.b	>(LEVEL__047_R-1)
    413  2158		       ef		      .byte.b	>(LEVEL__048_L-1)
    414  2159		       f0		      .byte.b	>(LEVEL__048_R-1)
    415  215a		       f0		      .byte.b	>(LEVEL__049_L-1)
    416  215b		       f0		      .byte.b	>(LEVEL__049_R-1)
    417  215c
    418  215c		       f1		      .byte.b	>(LEVEL__050_L-1)
    419  215d		       f1		      .byte.b	>(LEVEL__050_R-1)
    420  215e		       f1		      .byte.b	>(LEVEL__051_L-1)
    421  215f		       f2		      .byte.b	>(LEVEL__051_R-1)
    422  2160		       f2		      .byte.b	>(LEVEL__052_L-1)
    423  2161		       f2		      .byte.b	>(LEVEL__052_R-1)
    424  2162		       f2		      .byte.b	>(LEVEL__053_L-1)
    425  2163		       f3		      .byte.b	>(LEVEL__053_R-1)
    426  2164		       f3		      .byte.b	>(LEVEL__054_L-1)
    427  2165		       f3		      .byte.b	>(LEVEL__054_R-1)
    428  2166		       f4		      .byte.b	>(LEVEL__055_L-1)
    429  2167		       f4		      .byte.b	>(LEVEL__055_R-1)
    430  2168		       f4		      .byte.b	>(LEVEL__056_L-1)
    431  2169		       f5		      .byte.b	>(LEVEL__056_R-1)
    432  216a		       f5		      .byte.b	>(LEVEL__057_L-1)
    433  216b		       f5		      .byte.b	>(LEVEL__057_R-1)
    434  216c		       f6		      .byte.b	>(LEVEL__058_L-1)
    435  216d		       f6		      .byte.b	>(LEVEL__058_R-1)
    436  216e		       f6		      .byte.b	>(LEVEL__059_L-1)
    437  216f		       f6		      .byte.b	>(LEVEL__059_R-1)
    438  2170
    439  2170		       ef		      .byte.b	>(LEVEL__060_R-1)
    440  2171		       f0		      .byte.b	>(LEVEL__061_R-1)
    441  2172		       f0		      .byte.b	>(LEVEL__061_L-1)
    442  2173		       f0		      .byte.b	>(LEVEL__062_L-1)
    443  2174		       f1		      .byte.b	>(LEVEL__062_R-1)
    444  2175		       f1		      .byte.b	>(LEVEL__063_L-1)
    445  2176		       f1		      .byte.b	>(LEVEL__063_R-1)
    446  2177		       f2		      .byte.b	>(LEVEL__064_R-1)
    447  2178		       f2		      .byte.b	>(LEVEL__064_L-1)
    448  2179		       f3		      .byte.b	>(LEVEL__065_R-1)
    449  217a		       f2		      .byte.b	>(LEVEL__065_L-1)
    450  217b		       f3		      .byte.b	>(LEVEL__066_R-1)
    451  217c		       f3		      .byte.b	>(LEVEL__066_L-1)
    452  217d		       f4		      .byte.b	>(LEVEL__067_R-1)
    453  217e		       f4		      .byte.b	>(LEVEL__067_L-1)
    454  217f		       f5		      .byte.b	>(LEVEL__068_R-1)
    455  2180		       f4		      .byte.b	>(LEVEL__068_L-1)
    456  2181		       f5		      .byte.b	>(LEVEL__069_R-1)
    457  2182		       f5		      .byte.b	>(LEVEL__069_L-1)
    458  2183
    459  2183		       f1		      .byte.b	>(LEVEL__103_Arielle-1)
    460  2184		       f1		      .byte.b	>(LEVEL__103_Ajalae-1)
    461  2185		       f1		      .byte.b	>(LEVEL__103_Adin-1)
    462  2186		       f0		      .byte.b	>(LEVEL__102_Raven-1)
    463  2187		       f0		      .byte.b	>(LEVEL__102_Oralia-1)
    464  2188		       ef		      .byte.b	>(LEVEL__102_Natalie-1)
    465  2189		       f0		      .byte.b	>(LEVEL__102_Mirabel-1)
    466  218a		       f2		      .byte.b	>(LEVEL__1XJH_Tara_Gelson-1)
    467  218b		       f2		      .byte.b	>(LEVEL__1R7X_Alison-1)
    468  218c		       f2		      .byte.b	>(LEVEL__1KWD_Cecile_Clayworth-1)
    469  218d		       f2		      .byte.b	>(LEVEL__1EKT_Samantha_Gelson-1)
    470  218e		       f3		      .byte.b	>(LEVEL__0VM5_Andrea_Wadd-1)
    471  218f		       f3		      .byte.b	>(LEVEL__0PAL_Jill_Leatherby-1)
    472  2190		       f3		      .byte.b	>(LEVEL__0IZ1_Sophia-1)
    473  2191		       f3		      .byte.b	>(LEVEL__0CNH_Alice-1)
    474  2192		       f6		      .byte.b	>(LEVEL__122_Maya-1)
    475  2193
    476  2193		       f3		      .byte.b	>(LEVEL_Thomas_Reinke16-1)
    477  2194
    478  2194		       f3		      .byte.b	>(LEVEL__Hof_0-1)
    479  2195		       f4		      .byte.b	>(LEVEL__Hof_1-1)
    480  2196		       f4		      .byte.b	>(LEVEL__Hof_2-1)
    481  2197		       f5		      .byte.b	>(LEVEL__Hof_3-1)
    482  2198		       f5		      .byte.b	>(LEVEL__Hof_4-1)
    483  2199		       f5		      .byte.b	>(LEVEL__Hof_5-1)
    484  219a		       f5		      .byte.b	>(LEVEL__Hof_6-1)
    485  219b		       f6		      .byte.b	>(LEVEL__Hof_7-1)
    486  219c		       f6		      .byte.b	>(LEVEL__Hof_8-1)
    487  219d		       f6		      .byte.b	>(LEVEL__Hof_9-1)
    488  219e
    489  219e		       f7		      .byte.b	>(LEVEL_Zone_26_0-1)
    490  219f		       f7		      .byte.b	>(LEVEL_Zone_26_1-1)
    491  21a0		       f7		      .byte.b	>(LEVEL_Zone_26_2-1)
    492  21a1		       ef		      .byte.b	>(LEVEL_Zone_26_3-1)
    493  21a2		       f0		      .byte.b	>(LEVEL_Zone_26_4-1)
    494  21a3		       f0		      .byte.b	>(LEVEL_Zone_26_5-1)
    495  21a4		       f0		      .byte.b	>(LEVEL_Zone_26_6-1)
    496  21a5		       f1		      .byte.b	>(LEVEL_Zone_26_7-1)
    497  21a6		       f1		      .byte.b	>(LEVEL_Zone_26_8-1)
    498  21a7		       f1		      .byte.b	>(LEVEL_Zone_26_9-1)
    499  21a8
    500  21a8		       f1		      .byte.b	>(LEVEL_Zone_26_10-1)
    501  21a9		       f1		      .byte.b	>(LEVEL_Zone_26_11-1)
    502  21aa		       f2		      .byte.b	>(LEVEL_Zone_26_12-1)
    503  21ab		       f2		      .byte.b	>(LEVEL_Zone_26_13-1)
    504  21ac		       f2		      .byte.b	>(LEVEL_Zone_26_14-1)
    505  21ad		       f2		      .byte.b	>(LEVEL_Zone_26_15-1)
    506  21ae		       f3		      .byte.b	>(LEVEL_Zone_26_16-1)
    507  21af		       f3		      .byte.b	>(LEVEL_Zone_26_17-1)
    508  21b0		       f3		      .byte.b	>(LEVEL_Zone_26_18-1)
    509  21b1		       f3		      .byte.b	>(LEVEL_Zone_26_19-1)
    510  21b2
    511  21b2		       f4		      .byte.b	>(LEVEL_Zone_26_20-1)
    512  21b3		       f4		      .byte.b	>(LEVEL_Zone_26_21-1)
    513  21b4		       f4		      .byte.b	>(LEVEL_Zone_26_22-1)
    514  21b5		       f4		      .byte.b	>(LEVEL_Zone_26_23-1)
    515  21b6		       f4		      .byte.b	>(LEVEL_Zone_26_24-1)
    516  21b7		       f5		      .byte.b	>(LEVEL_Zone_26_25-1)
    517  21b8		       f5		      .byte.b	>(LEVEL_Zone_26_26-1)
    518  21b9		       f5		      .byte.b	>(LEVEL_Zone_26_27-1)
    519  21ba		       f5		      .byte.b	>(LEVEL_Zone_26_28-1)
    520  21bb		       f6		      .byte.b	>(LEVEL_Zone_26_29-1)
    521  21bc
    522  21bc		       f6		      .byte.b	>(LEVEL_Zone_26_30-1)
    523  21bd		       f6		      .byte.b	>(LEVEL_Zone_26_31-1)
    524  21be		       f6		      .byte.b	>(LEVEL_Zone_26_32-1)
    525  21bf		       f7		      .byte.b	>(LEVEL_Zone_26_33-1)
    526  21c0		       f7		      .byte.b	>(LEVEL_Zone_26_34-1)
    527  21c1		       f7		      .byte.b	>(LEVEL_Zone_26_35-1)
    528  21c2		       ef		      .byte.b	>(LEVEL_Zone_26_36-1)
    529  21c3		       f0		      .byte.b	>(LEVEL_Zone_26_37-1)
    530  21c4		       f0		      .byte.b	>(LEVEL_Zone_26_38-1)
    531  21c5		       f0		      .byte.b	>(LEVEL_Zone_26_39-1)
    532  21c6
    533  21c6		       f0		      .byte.b	>(LEVEL_Zone_26_40-1)
    534  21c7		       f1		      .byte.b	>(LEVEL_Zone_26_41-1)
    535  21c8		       f1		      .byte.b	>(LEVEL_Zone_26_42-1)
    536  21c9		       f1		      .byte.b	>(LEVEL_Zone_26_43-1)
    537  21ca		       f1		      .byte.b	>(LEVEL_Zone_26_44-1)
    538  21cb		       f2		      .byte.b	>(LEVEL_Zone_26_45-1)
    539  21cc		       f2		      .byte.b	>(LEVEL_Zone_26_46-1)
    540  21cd		       f2		      .byte.b	>(LEVEL_Zone_26_47-1)
    541  21ce		       f2		      .byte.b	>(LEVEL_Zone_26_48-1)
    542  21cf		       f3		      .byte.b	>(LEVEL_Zone_26_49-1)
    543  21d0
    544  21d0		       f3		      .byte.b	>(LEVEL_Zone_26_50-1)
    545  21d1		       f3		      .byte.b	>(LEVEL_Zone_26_51-1)
    546  21d2		       f3		      .byte.b	>(LEVEL_Zone_26_52-1)
    547  21d3		       f4		      .byte.b	>(LEVEL_Zone_26_53-1)
    548  21d4		       f4		      .byte.b	>(LEVEL_Zone_26_54-1)
    549  21d5		       f4		      .byte.b	>(LEVEL_Zone_26_55-1)
    550  21d6		       f4		      .byte.b	>(LEVEL_Zone_26_56-1)
    551  21d7		       f5		      .byte.b	>(LEVEL_Zone_26_57-1)
    552  21d8		       f5		      .byte.b	>(LEVEL_Zone_26_58-1)
    553  21d9		       f5		      .byte.b	>(LEVEL_Zone_26_59-1)
    554  21da
    555  21da		       f5		      .byte.b	>(LEVEL_Zone_26_60-1)
    556  21db		       f6		      .byte.b	>(LEVEL_Zone_26_61-1)
    557  21dc		       f6		      .byte.b	>(LEVEL_Zone_26_62-1)
    558  21dd		       f6		      .byte.b	>(LEVEL_Zone_26_63-1)
    559  21de		       f6		      .byte.b	>(LEVEL_Zone_26_64-1)
    560  21df		       f7		      .byte.b	>(LEVEL_Zone_26_65-1)
    561  21e0		       f7		      .byte.b	>(LEVEL_Zone_26_66-1)
    562  21e1		       f7		      .byte.b	>(LEVEL_Zone_26_67-1)
    563  21e2		       ef		      .byte.b	>(LEVEL_Zone_26_68-1)
    564  21e3		       f0		      .byte.b	>(LEVEL_Zone_26_69-1)
    565  21e4
    566  21e4		       f0		      .byte.b	>(LEVEL_Zone_26_70-1)
    567  21e5		       f0		      .byte.b	>(LEVEL_Zone_26_71-1)
    568  21e6		       f0		      .byte.b	>(LEVEL_Zone_26_72-1)
    569  21e7		       f1		      .byte.b	>(LEVEL_Zone_26_73-1)
    570  21e8		       f1		      .byte.b	>(LEVEL_Zone_26_74-1)
    571  21e9		       f1		      .byte.b	>(LEVEL_Zone_26_75-1)
    572  21ea		       f1		      .byte.b	>(LEVEL_Zone_26_76-1)
    573  21eb		       f2		      .byte.b	>(LEVEL_Zone_26_77-1)
    574  21ec		       f2		      .byte.b	>(LEVEL_Zone_26_78-1)
    575  21ed		       f2		      .byte.b	>(LEVEL_Zone_26_79-1)
    576  21ee
    577  21ee		       f2		      .byte.b	>(LEVEL_Zone_26_80-1)
    578  21ef		       f3		      .byte.b	>(LEVEL_Zone_26_81-1)
    579  21f0		       f3		      .byte.b	>(LEVEL_Zone_26_82-1)
    580  21f1		       f3		      .byte.b	>(LEVEL_Zone_26_83-1)
    581  21f2		       f3		      .byte.b	>(LEVEL_Zone_26_84-1)
    582  21f3		       f3		      .byte.b	>(LEVEL_Zone_26_85-1)
    583  21f4
    584  21f4				  -	      IF	(* - LevelInfoHI != MAX_LEVEL)
    585  21f4				  -	      ECHO	"ERROR: Incorrect LevelInfoHI table!"
    586  21f4				  -	      ERR
    587  21f4					      ENDIF
    588  21f4
    589  21f4				   LevelInfoBANK
    590  21f4
    591  21f4		       05		      .byte.b	BANK_LEVEL__001_L
    592  21f5		       05		      .byte.b	BANK_LEVEL__001_R
    593  21f6		       05		      .byte.b	BANK_LEVEL__002_L
    594  21f7		       05		      .byte.b	BANK_LEVEL__002_R
    595  21f8		       05		      .byte.b	BANK_LEVEL__003_L
    596  21f9		       05		      .byte.b	BANK_LEVEL__003_R
    597  21fa		       05		      .byte.b	BANK_LEVEL__004_L
    598  21fb		       05		      .byte.b	BANK_LEVEL__004_R
    599  21fc		       05		      .byte.b	BANK_LEVEL__005_L
    600  21fd		       05		      .byte.b	BANK_LEVEL__005_R
    601  21fe		       05		      .byte.b	BANK_LEVEL__006_L
    602  21ff		       05		      .byte.b	BANK_LEVEL__006_R
    603  2200		       05		      .byte.b	BANK_LEVEL__007_L
    604  2201		       05		      .byte.b	BANK_LEVEL__007_R
    605  2202		       05		      .byte.b	BANK_LEVEL__008_L
    606  2203		       05		      .byte.b	BANK_LEVEL__008_R
    607  2204		       05		      .byte.b	BANK_LEVEL__009_L
    608  2205		       05		      .byte.b	BANK_LEVEL__009_R
    609  2206		       05		      .byte.b	BANK_LEVEL__010_L
    610  2207		       05		      .byte.b	BANK_LEVEL__010_R
    611  2208		       05		      .byte.b	BANK_LEVEL__011_L
    612  2209		       05		      .byte.b	BANK_LEVEL__011_R
    613  220a		       05		      .byte.b	BANK_LEVEL__012_L
    614  220b		       05		      .byte.b	BANK_LEVEL__012_R
    615  220c		       05		      .byte.b	BANK_LEVEL__013_L
    616  220d		       05		      .byte.b	BANK_LEVEL__013_R
    617  220e		       05		      .byte.b	BANK_LEVEL__014_L
    618  220f		       05		      .byte.b	BANK_LEVEL__014_R
    619  2210		       05		      .byte.b	BANK_LEVEL__015_L
    620  2211		       05		      .byte.b	BANK_LEVEL__015_R
    621  2212		       05		      .byte.b	BANK_LEVEL__016_L
    622  2213		       05		      .byte.b	BANK_LEVEL__016_R
    623  2214		       05		      .byte.b	BANK_LEVEL__017_L
    624  2215		       05		      .byte.b	BANK_LEVEL__017_R
    625  2216		       05		      .byte.b	BANK_LEVEL__018_L
    626  2217		       05		      .byte.b	BANK_LEVEL__018_R
    627  2218		       05		      .byte.b	BANK_LEVEL__019_L
    628  2219		       05		      .byte.b	BANK_LEVEL__019_R
    629  221a		       06		      .byte.b	BANK_LEVEL__020_L
    630  221b		       06		      .byte.b	BANK_LEVEL__020_R
    631  221c		       06		      .byte.b	BANK_LEVEL__021_L
    632  221d		       06		      .byte.b	BANK_LEVEL__021_R
    633  221e		       06		      .byte.b	BANK_LEVEL__022_L
    634  221f		       06		      .byte.b	BANK_LEVEL__022_R
    635  2220		       06		      .byte.b	BANK_LEVEL__023_L
    636  2221		       06		      .byte.b	BANK_LEVEL__023_R
    637  2222		       06		      .byte.b	BANK_LEVEL__024_L
    638  2223		       06		      .byte.b	BANK_LEVEL__024_R
    639  2224		       06		      .byte.b	BANK_LEVEL__025_L
    640  2225		       06		      .byte.b	BANK_LEVEL__025_R
    641  2226		       06		      .byte.b	BANK_LEVEL__026_L
    642  2227		       06		      .byte.b	BANK_LEVEL__026_R
    643  2228		       06		      .byte.b	BANK_LEVEL__027_L
    644  2229		       06		      .byte.b	BANK_LEVEL__027_R
    645  222a		       06		      .byte.b	BANK_LEVEL__028_L
    646  222b		       06		      .byte.b	BANK_LEVEL__028_R
    647  222c		       06		      .byte.b	BANK_LEVEL__029_L
    648  222d		       06		      .byte.b	BANK_LEVEL__029_R
    649  222e		       06		      .byte.b	BANK_LEVEL__030_L
    650  222f		       06		      .byte.b	BANK_LEVEL__030_R
    651  2230		       06		      .byte.b	BANK_LEVEL__031_L
    652  2231		       06		      .byte.b	BANK_LEVEL__031_R
    653  2232		       06		      .byte.b	BANK_LEVEL__032_L
    654  2233		       06		      .byte.b	BANK_LEVEL__032_R
    655  2234		       06		      .byte.b	BANK_LEVEL__033_L
    656  2235		       06		      .byte.b	BANK_LEVEL__033_R
    657  2236		       06		      .byte.b	BANK_LEVEL__034_L
    658  2237		       07		      .byte.b	BANK_LEVEL__034_R
    659  2238		       07		      .byte.b	BANK_LEVEL__035_L
    660  2239		       07		      .byte.b	BANK_LEVEL__035_R
    661  223a		       07		      .byte.b	BANK_LEVEL__036_L
    662  223b		       07		      .byte.b	BANK_LEVEL__036_R
    663  223c		       07		      .byte.b	BANK_LEVEL__037_L
    664  223d		       07		      .byte.b	BANK_LEVEL__037_R
    665  223e		       07		      .byte.b	BANK_LEVEL__038_L
    666  223f		       07		      .byte.b	BANK_LEVEL__038_R
    667  2240		       07		      .byte.b	BANK_LEVEL__039_L
    668  2241		       07		      .byte.b	BANK_LEVEL__039_R
    669  2242		       07		      .byte.b	BANK_LEVEL__040_L
    670  2243		       07		      .byte.b	BANK_LEVEL__040_R
    671  2244
    672  2244		       07		      .byte.b	BANK_LEVEL__041_L
    673  2245		       07		      .byte.b	BANK_LEVEL__041_R
    674  2246		       07		      .byte.b	BANK_LEVEL__042_L
    675  2247		       07		      .byte.b	BANK_LEVEL__042_R
    676  2248		       07		      .byte.b	BANK_LEVEL__043_L
    677  2249		       07		      .byte.b	BANK_LEVEL__043_R
    678  224a		       07		      .byte.b	BANK_LEVEL__044_L
    679  224b		       07		      .byte.b	BANK_LEVEL__044_R
    680  224c		       07		      .byte.b	BANK_LEVEL__045_L
    681  224d		       07		      .byte.b	BANK_LEVEL__045_R
    682  224e		       07		      .byte.b	BANK_LEVEL__046_L
    683  224f		       07		      .byte.b	BANK_LEVEL__046_R
    684  2250		       07		      .byte.b	BANK_LEVEL__047_L
    685  2251		       07		      .byte.b	BANK_LEVEL__047_R
    686  2252		       08		      .byte.b	BANK_LEVEL__048_L
    687  2253		       08		      .byte.b	BANK_LEVEL__048_R
    688  2254		       08		      .byte.b	BANK_LEVEL__049_L
    689  2255		       08		      .byte.b	BANK_LEVEL__049_R
    690  2256
    691  2256		       08		      .byte.b	BANK_LEVEL__050_L
    692  2257		       08		      .byte.b	BANK_LEVEL__050_R
    693  2258		       08		      .byte.b	BANK_LEVEL__051_L
    694  2259		       08		      .byte.b	BANK_LEVEL__051_R
    695  225a		       08		      .byte.b	BANK_LEVEL__052_L
    696  225b		       08		      .byte.b	BANK_LEVEL__052_R
    697  225c		       08		      .byte.b	BANK_LEVEL__053_L
    698  225d		       08		      .byte.b	BANK_LEVEL__053_R
    699  225e		       08		      .byte.b	BANK_LEVEL__054_L
    700  225f		       08		      .byte.b	BANK_LEVEL__054_R
    701  2260		       08		      .byte.b	BANK_LEVEL__055_L
    702  2261		       08		      .byte.b	BANK_LEVEL__055_R
    703  2262		       08		      .byte.b	BANK_LEVEL__056_L
    704  2263		       08		      .byte.b	BANK_LEVEL__056_R
    705  2264		       08		      .byte.b	BANK_LEVEL__057_L
    706  2265		       08		      .byte.b	BANK_LEVEL__057_R
    707  2266		       08		      .byte.b	BANK_LEVEL__058_L
    708  2267		       08		      .byte.b	BANK_LEVEL__058_R
    709  2268		       08		      .byte.b	BANK_LEVEL__059_L
    710  2269		       08		      .byte.b	BANK_LEVEL__059_R
    711  226a
    712  226a		       09		      .byte.b	BANK_LEVEL__060_R
    713  226b		       09		      .byte.b	BANK_LEVEL__061_R
    714  226c		       09		      .byte.b	BANK_LEVEL__061_L
    715  226d		       09		      .byte.b	BANK_LEVEL__062_L
    716  226e		       09		      .byte.b	BANK_LEVEL__062_R
    717  226f		       09		      .byte.b	BANK_LEVEL__063_L
    718  2270		       09		      .byte.b	BANK_LEVEL__063_R
    719  2271		       09		      .byte.b	BANK_LEVEL__064_R
    720  2272		       09		      .byte.b	BANK_LEVEL__064_L
    721  2273		       09		      .byte.b	BANK_LEVEL__065_R
    722  2274		       09		      .byte.b	BANK_LEVEL__065_L
    723  2275		       09		      .byte.b	BANK_LEVEL__066_R
    724  2276		       09		      .byte.b	BANK_LEVEL__066_L
    725  2277		       09		      .byte.b	BANK_LEVEL__067_R
    726  2278		       09		      .byte.b	BANK_LEVEL__067_L
    727  2279		       09		      .byte.b	BANK_LEVEL__068_R
    728  227a		       09		      .byte.b	BANK_LEVEL__068_L
    729  227b		       09		      .byte.b	BANK_LEVEL__069_R
    730  227c		       09		      .byte.b	BANK_LEVEL__069_L
    731  227d
    732  227d		       0a		      .byte.b	BANK_LEVEL__103_Arielle
    733  227e		       0a		      .byte.b	BANK_LEVEL__103_Ajalae
    734  227f		       0a		      .byte.b	BANK_LEVEL__103_Adin
    735  2280		       0a		      .byte.b	BANK_LEVEL__102_Raven
    736  2281		       0a		      .byte.b	BANK_LEVEL__102_Oralia
    737  2282		       0a		      .byte.b	BANK_LEVEL__102_Natalie
    738  2283		       0a		      .byte.b	BANK_LEVEL__102_Mirabel
    739  2284		       0a		      .byte.b	BANK_LEVEL__1XJH_Tara_Gelson
    740  2285		       0a		      .byte.b	BANK_LEVEL__1R7X_Alison
    741  2286		       0a		      .byte.b	BANK_LEVEL__1KWD_Cecile_Clayworth
    742  2287		       0a		      .byte.b	BANK_LEVEL__1EKT_Samantha_Gelson
    743  2288		       0a		      .byte.b	BANK_LEVEL__0VM5_Andrea_Wadd
    744  2289		       0a		      .byte.b	BANK_LEVEL__0PAL_Jill_Leatherby
    745  228a		       0a		      .byte.b	BANK_LEVEL__0IZ1_Sophia
    746  228b		       0a		      .byte.b	BANK_LEVEL__0CNH_Alice
    747  228c
    748  228c		       09		      .byte.b	BANK_LEVEL__122_Maya
    749  228d
    750  228d		       0a		      .byte.b	BANK_LEVEL_Thomas_Reinke16
    751  228e
    752  228e		       0a		      .byte.b	BANK_LEVEL__Hof_0
    753  228f		       0a		      .byte.b	BANK_LEVEL__Hof_1
    754  2290		       0a		      .byte.b	BANK_LEVEL__Hof_2
    755  2291		       0a		      .byte.b	BANK_LEVEL__Hof_3
    756  2292		       0a		      .byte.b	BANK_LEVEL__Hof_4
    757  2293		       0a		      .byte.b	BANK_LEVEL__Hof_5
    758  2294		       0a		      .byte.b	BANK_LEVEL__Hof_6
    759  2295		       0a		      .byte.b	BANK_LEVEL__Hof_7
    760  2296		       0a		      .byte.b	BANK_LEVEL__Hof_8
    761  2297		       0a		      .byte.b	BANK_LEVEL__Hof_9
    762  2298
    763  2298		       0a		      .byte.b	BANK_LEVEL_Zone_26_0
    764  2299		       0a		      .byte.b	BANK_LEVEL_Zone_26_1
    765  229a		       0a		      .byte.b	BANK_LEVEL_Zone_26_2
    766  229b		       0b		      .byte.b	BANK_LEVEL_Zone_26_3
    767  229c		       0b		      .byte.b	BANK_LEVEL_Zone_26_4
    768  229d		       0b		      .byte.b	BANK_LEVEL_Zone_26_5
    769  229e		       0b		      .byte.b	BANK_LEVEL_Zone_26_6
    770  229f		       0b		      .byte.b	BANK_LEVEL_Zone_26_7
    771  22a0		       0b		      .byte.b	BANK_LEVEL_Zone_26_8
    772  22a1		       0b		      .byte.b	BANK_LEVEL_Zone_26_9
    773  22a2
    774  22a2		       0b		      .byte.b	BANK_LEVEL_Zone_26_10
    775  22a3		       0b		      .byte.b	BANK_LEVEL_Zone_26_11
    776  22a4		       0b		      .byte.b	BANK_LEVEL_Zone_26_12
    777  22a5		       0b		      .byte.b	BANK_LEVEL_Zone_26_13
    778  22a6		       0b		      .byte.b	BANK_LEVEL_Zone_26_14
    779  22a7		       0b		      .byte.b	BANK_LEVEL_Zone_26_15
    780  22a8		       0b		      .byte.b	BANK_LEVEL_Zone_26_16
    781  22a9		       0b		      .byte.b	BANK_LEVEL_Zone_26_17
    782  22aa		       0b		      .byte.b	BANK_LEVEL_Zone_26_18
    783  22ab		       0b		      .byte.b	BANK_LEVEL_Zone_26_19
    784  22ac
    785  22ac		       0b		      .byte.b	BANK_LEVEL_Zone_26_20
    786  22ad		       0b		      .byte.b	BANK_LEVEL_Zone_26_21
    787  22ae		       0b		      .byte.b	BANK_LEVEL_Zone_26_22
    788  22af		       0b		      .byte.b	BANK_LEVEL_Zone_26_23
    789  22b0		       0b		      .byte.b	BANK_LEVEL_Zone_26_24
    790  22b1		       0b		      .byte.b	BANK_LEVEL_Zone_26_25
    791  22b2		       0b		      .byte.b	BANK_LEVEL_Zone_26_26
    792  22b3		       0b		      .byte.b	BANK_LEVEL_Zone_26_27
    793  22b4		       0b		      .byte.b	BANK_LEVEL_Zone_26_28
    794  22b5		       0b		      .byte.b	BANK_LEVEL_Zone_26_29
    795  22b6
    796  22b6		       0b		      .byte.b	BANK_LEVEL_Zone_26_30
    797  22b7		       0b		      .byte.b	BANK_LEVEL_Zone_26_31
    798  22b8		       0b		      .byte.b	BANK_LEVEL_Zone_26_32
    799  22b9		       0b		      .byte.b	BANK_LEVEL_Zone_26_33
    800  22ba		       0b		      .byte.b	BANK_LEVEL_Zone_26_34
    801  22bb		       0b		      .byte.b	BANK_LEVEL_Zone_26_35
    802  22bc		       0c		      .byte.b	BANK_LEVEL_Zone_26_36
    803  22bd		       0c		      .byte.b	BANK_LEVEL_Zone_26_37
    804  22be		       0c		      .byte.b	BANK_LEVEL_Zone_26_38
    805  22bf		       0c		      .byte.b	BANK_LEVEL_Zone_26_39
    806  22c0
    807  22c0		       0c		      .byte.b	BANK_LEVEL_Zone_26_40
    808  22c1		       0c		      .byte.b	BANK_LEVEL_Zone_26_41
    809  22c2		       0c		      .byte.b	BANK_LEVEL_Zone_26_42
    810  22c3		       0c		      .byte.b	BANK_LEVEL_Zone_26_43
    811  22c4		       0c		      .byte.b	BANK_LEVEL_Zone_26_44
    812  22c5		       0c		      .byte.b	BANK_LEVEL_Zone_26_45
    813  22c6		       0c		      .byte.b	BANK_LEVEL_Zone_26_46
    814  22c7		       0c		      .byte.b	BANK_LEVEL_Zone_26_47
    815  22c8		       0c		      .byte.b	BANK_LEVEL_Zone_26_48
    816  22c9		       0c		      .byte.b	BANK_LEVEL_Zone_26_49
    817  22ca
    818  22ca		       0c		      .byte.b	BANK_LEVEL_Zone_26_50
    819  22cb		       0c		      .byte.b	BANK_LEVEL_Zone_26_51
    820  22cc		       0c		      .byte.b	BANK_LEVEL_Zone_26_52
    821  22cd		       0c		      .byte.b	BANK_LEVEL_Zone_26_53
    822  22ce		       0c		      .byte.b	BANK_LEVEL_Zone_26_54
    823  22cf		       0c		      .byte.b	BANK_LEVEL_Zone_26_55
    824  22d0		       0c		      .byte.b	BANK_LEVEL_Zone_26_56
    825  22d1		       0c		      .byte.b	BANK_LEVEL_Zone_26_57
    826  22d2		       0c		      .byte.b	BANK_LEVEL_Zone_26_58
    827  22d3		       0c		      .byte.b	BANK_LEVEL_Zone_26_59
    828  22d4
    829  22d4		       0c		      .byte.b	BANK_LEVEL_Zone_26_60
    830  22d5		       0c		      .byte.b	BANK_LEVEL_Zone_26_61
    831  22d6		       0c		      .byte.b	BANK_LEVEL_Zone_26_62
    832  22d7		       0c		      .byte.b	BANK_LEVEL_Zone_26_63
    833  22d8		       0c		      .byte.b	BANK_LEVEL_Zone_26_64
    834  22d9		       0c		      .byte.b	BANK_LEVEL_Zone_26_65
    835  22da		       0c		      .byte.b	BANK_LEVEL_Zone_26_66
    836  22db		       0c		      .byte.b	BANK_LEVEL_Zone_26_67
    837  22dc		       0d		      .byte.b	BANK_LEVEL_Zone_26_68
    838  22dd		       0d		      .byte.b	BANK_LEVEL_Zone_26_69
    839  22de
    840  22de		       0d		      .byte.b	BANK_LEVEL_Zone_26_70
    841  22df		       0d		      .byte.b	BANK_LEVEL_Zone_26_71
    842  22e0		       0d		      .byte.b	BANK_LEVEL_Zone_26_72
    843  22e1		       0d		      .byte.b	BANK_LEVEL_Zone_26_73
    844  22e2		       0d		      .byte.b	BANK_LEVEL_Zone_26_74
    845  22e3		       0d		      .byte.b	BANK_LEVEL_Zone_26_75
    846  22e4		       0d		      .byte.b	BANK_LEVEL_Zone_26_76
    847  22e5		       0d		      .byte.b	BANK_LEVEL_Zone_26_77
    848  22e6		       0d		      .byte.b	BANK_LEVEL_Zone_26_78
    849  22e7		       0d		      .byte.b	BANK_LEVEL_Zone_26_79
    850  22e8
    851  22e8		       0d		      .byte.b	BANK_LEVEL_Zone_26_80
    852  22e9		       0d		      .byte.b	BANK_LEVEL_Zone_26_81
    853  22ea		       0d		      .byte.b	BANK_LEVEL_Zone_26_82
    854  22eb		       0d		      .byte.b	BANK_LEVEL_Zone_26_83
    855  22ec		       0d		      .byte.b	BANK_LEVEL_Zone_26_84
    856  22ed		       0d		      .byte.b	BANK_LEVEL_Zone_26_85
    857  22ee
    858  22ee				  -	      IF	(* - LevelInfoBANK != MAX_LEVEL)
    859  22ee				  -	      ECHO	"ERROR: Incorrect LevelInfoBANK table!"
    860  22ee				  -	      ERR
    861  22ee					      ENDIF
    862  22ee
    863  22ee
      0  22ee					      CHECK_BANK_SIZE	"LEVELS_TABLES -- full 2K"
      1  22ee		       02 ee	   .TEMP      =	* - BANK_START
 LEVELS_TABLES -- full 2K (2K) SIZE =  $2ee , FREE= $512
      2  22ee					      ECHO	"LEVELS_TABLES -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  22ee				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  22ee				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  22ee				  -	      ERR
      6  22ee					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS1.asm LEVEL 2 PASS 3
      0  22ee					      include	"BANK_LEVELS1.asm"
      1  22ee							;    Sokoboo - a Sokoban implementation
      2  22ee							;    using a generic tile-based display engine for the Atari 2600
      3  22ee							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  22ee							;
      5  22ee							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  22ee							;
      7  22ee							;    Code related to the generic tile-based display engine was developed by
      8  22ee							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  22ee							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  22ee							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  22ee							;
     12  22ee							;    Code related to music and sound effects uses the TIATracker music player
     13  22ee							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  22ee							;    directory for Apache licensing details.
     15  22ee							;
     16  22ee							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  22ee							;    See the copyright notices in the License directory for a list of level
     18  22ee							;    contributors.
     19  22ee							;
     20  22ee							;    Except where otherwise indicated, this software is released under the
     21  22ee							;    following licensing arrangement...
     22  22ee							;
     23  22ee							;    This program is free software: you can redistribute it and/or modify
     24  22ee							;    it under the terms of the GNU General Public License as published by
     25  22ee							;    the Free Software Foundation, either version 3 of the License, or
     26  22ee							;    (at your option) any later version.
     27  22ee							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  22ee
     29  22ee							;    This program is distributed in the hope that it will be useful,
     30  22ee							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  22ee							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  22ee							;    GNU General Public License for more details.
     33  22ee
      0  22ee					      NEWBANK	LEVELS1
      1  2fb5 ????				      SEG	LEVELS1
      2  2800					      ORG	ORIGIN
      3  2800					      RORG	$F000
      4  2800				   BANK_START SET	*
      5  2800				   LEVELS1    SET	ORIGIN / 2048
      6  2800				   ORIGIN     SET	ORIGIN + 2048
      7  2800				   _CURRENT_BANK SET	LEVELS1
     35  2800
     36  2800
     37  2800							;  DEFL _000_SELECT, "12#|#@3-5$.#|10-|10-|12#"
     38  2800
     39  2800							; "SOKWHOLE" collection...
     40  2800
     41  2800
      0  2800					      DEFL	_001_L, "3#|#@#|#$#|#.#|3#"
      0  2800					      START_LEVEL	_001_L
      1  2800				   LEVEL_START SET	*
      2  2800		       00 05	   BANK_LEVEL__001_L =	_CURRENT_BANK
      3  2800				   LEVEL__001_L SUBROUTINE
      4  2800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2800
      2  2800		       33 23 7c 23*	      .byte.b	"3#|#@#|#$#|#.#|3#",0
      0  2812					      END_LEVEL	_001_L
      1  2812		       00 12	   LEVEL_SIZE__001_L =	* - LEVEL_START
      2  2812					      IF	LEVEL_SIZE__001_L > MAX_LEVEL_SIZE
      3  2812				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__001_L
      4  2812					      ENDIF
      0  2812					      DEFL	_001_R, "5#|#.$@#|5#"
      0  2812					      START_LEVEL	_001_R
      1  2812				   LEVEL_START SET	*
      2  2812		       00 05	   BANK_LEVEL__001_R =	_CURRENT_BANK
      3  2812				   LEVEL__001_R SUBROUTINE
      4  2812				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2812
      2  2812		       35 23 7c 23*	      .byte.b	"5#|#.$@#|5#",0
      0  281e					      END_LEVEL	_001_R
      1  281e		       00 0c	   LEVEL_SIZE__001_R =	* - LEVEL_START
      2  281e				  -	      IF	LEVEL_SIZE__001_R > MAX_LEVEL_SIZE
      3  281e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__001_R
      4  281e					      ENDIF
      0  281e					      DEFL	_002_L, "3#2-|#.3#|#*$-#|#2-@#|5#"
      0  281e					      START_LEVEL	_002_L
      1  281e				   LEVEL_START SET	*
      2  281e		       00 05	   BANK_LEVEL__002_L =	_CURRENT_BANK
      3  281e				   LEVEL__002_L SUBROUTINE
      4  281e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  281e
      2  281e		       33 23 32 2d*	      .byte.b	"3#2-|#.3#|#*$-#|#2-@#|5#",0
      0  2837					      END_LEVEL	_002_L
      1  2837		       00 19	   LEVEL_SIZE__002_L =	* - LEVEL_START
      2  2837					      IF	LEVEL_SIZE__002_L > MAX_LEVEL_SIZE
      3  2837				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__002_L
      4  2837					      ENDIF
      0  2837					      DEFL	_002_R, "2-5#-|3#3-2#|#.*-#@-#|2#$3#-#|-#5-#|-7#"
      0  2837					      START_LEVEL	_002_R
      1  2837				   LEVEL_START SET	*
      2  2837		       00 05	   BANK_LEVEL__002_R =	_CURRENT_BANK
      3  2837				   LEVEL__002_R SUBROUTINE
      4  2837				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2837
      2  2837		       32 2d 35 23*	      .byte.b	"2-5#-|3#3-2#|#.*-#@-#|2#$3#-#|-#5-#|-7#",0
      0  285f					      END_LEVEL	_002_R
      1  285f		       00 28	   LEVEL_SIZE__002_R =	* - LEVEL_START
      2  285f					      IF	LEVEL_SIZE__002_R > MAX_LEVEL_SIZE
      3  285f				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__002_R
      4  285f					      ENDIF
      0  285f					      DEFL	_003_L, "4-5#|2-3#3-#|3#.*-#-#|#@$.$#2-#|2#5-2#|-7#-"
      0  285f					      START_LEVEL	_003_L
      1  285f				   LEVEL_START SET	*
      2  285f		       00 05	   BANK_LEVEL__003_L =	_CURRENT_BANK
      3  285f				   LEVEL__003_L SUBROUTINE
      4  285f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  285f
      2  285f		       34 2d 35 23*	      .byte.b	"4-5#|2-3#3-#|3#.*-#-#|#@$.$#2-#|2#5-2#|-7#-",0
      0  288b					      END_LEVEL	_003_L
      1  288b		       00 2c	   LEVEL_SIZE__003_L =	* - LEVEL_START
      2  288b					      IF	LEVEL_SIZE__003_L > MAX_LEVEL_SIZE
      3  288b				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__003_L
      4  288b					      ENDIF
      0  288b					      DEFL	_003_R, "9#|#7-#|#-*2.2#-#|2#$#$#2-#|-#-@3-2#|-7#-"
      0  288b					      START_LEVEL	_003_R
      1  288b				   LEVEL_START SET	*
      2  288b		       00 05	   BANK_LEVEL__003_R =	_CURRENT_BANK
      3  288b				   LEVEL__003_R SUBROUTINE
      4  288b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  288b
      2  288b		       39 23 7c 23*	      .byte.b	"9#|#7-#|#-*2.2#-#|2#$#$#2-#|-#-@3-2#|-7#-",0
      0  28b5					      END_LEVEL	_003_R
      1  28b5		       00 2a	   LEVEL_SIZE__003_R =	* - LEVEL_START
      2  28b5				  -	      IF	LEVEL_SIZE__003_R > MAX_LEVEL_SIZE
      3  28b5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__003_R
      4  28b5					      ENDIF
      0  28b5					      DEFL	_004_L, "5#-|#3-2#|#-.*-#|#2-$@#|#2-3#|4#2-"
      0  28b5					      START_LEVEL	_004_L
      1  28b5				   LEVEL_START SET	*
      2  28b5		       00 05	   BANK_LEVEL__004_L =	_CURRENT_BANK
      3  28b5				   LEVEL__004_L SUBROUTINE
      4  28b5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  28b5
      2  28b5		       35 23 2d 7c*	      .byte.b	"5#-|#3-2#|#-.*-#|#2-$@#|#2-3#|4#2-",0
      0  28d8					      END_LEVEL	_004_L
      1  28d8		       00 23	   LEVEL_SIZE__004_L =	* - LEVEL_START
      2  28d8				  -	      IF	LEVEL_SIZE__004_L > MAX_LEVEL_SIZE
      3  28d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__004_L
      4  28d8					      ENDIF
      0  28d8					      DEFL	_004_R, "-6#|-#4-#|2#-$*$#|#@$3.#|7#"
      0  28d8					      START_LEVEL	_004_R
      1  28d8				   LEVEL_START SET	*
      2  28d8		       00 05	   BANK_LEVEL__004_R =	_CURRENT_BANK
      3  28d8				   LEVEL__004_R SUBROUTINE
      4  28d8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  28d8
      2  28d8		       2d 36 23 7c*	      .byte.b	"-6#|-#4-#|2#-$*$#|#@$3.#|7#",0
      0  28f4					      END_LEVEL	_004_R
      1  28f4		       00 1c	   LEVEL_SIZE__004_R =	* - LEVEL_START
      2  28f4				  -	      IF	LEVEL_SIZE__004_R > MAX_LEVEL_SIZE
      3  28f4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__004_R
      4  28f4					      ENDIF
      0  28f4					      DEFL	_005_L, "3-5#|3-#.$-#|3-#.$-#|4#.#-#|#@$-*2-#|2#3-3#|-5#2-"
      0  28f4					      START_LEVEL	_005_L
      1  28f4				   LEVEL_START SET	*
      2  28f4		       00 05	   BANK_LEVEL__005_L =	_CURRENT_BANK
      3  28f4				   LEVEL__005_L SUBROUTINE
      4  28f4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  28f4
      2  28f4		       33 2d 35 23*	      .byte.b	"3-5#|3-#.$-#|3-#.$-#|4#.#-#|#@$-*2-#|2#3-3#|-5#2-",0
      0  2926					      END_LEVEL	_005_L
      1  2926		       00 32	   LEVEL_SIZE__005_L =	* - LEVEL_START
      2  2926					      IF	LEVEL_SIZE__005_L > MAX_LEVEL_SIZE
      3  2926				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__005_L
      4  2926					      ENDIF
      0  2926					      DEFL	_005_R, "6#2-|#2-@-2#-|#-2#$-2#|#-2#.$-#|#-$3.-#|2#2-#$2#|-2#3-#-|2-5#-"
      0  2926					      START_LEVEL	_005_R
      1  2926				   LEVEL_START SET	*
      2  2926		       00 05	   BANK_LEVEL__005_R =	_CURRENT_BANK
      3  2926				   LEVEL__005_R SUBROUTINE
      4  2926				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2926
      2  2926		       36 23 32 2d*	      .byte.b	"6#2-|#2-@-2#-|#-2#$-2#|#-2#.$-#|#-$3.-#|2#2-#$2#|-2#3-#-|2-5#-",0
      0  2965					      END_LEVEL	_005_R
      1  2965		       00 3f	   LEVEL_SIZE__005_R =	* - LEVEL_START
      2  2965					      IF	LEVEL_SIZE__005_R > MAX_LEVEL_SIZE
      3  2965				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__005_R
      4  2965					      ENDIF
      0  2965					      DEFL	_006_L, "5#3-|#3-3#-|#-#-$.#-|#-#-$.#-|#-#-.*2#|#2-#-$@#|#4-3#|6#2-"
      0  2965					      START_LEVEL	_006_L
      1  2965				   LEVEL_START SET	*
      2  2965		       00 05	   BANK_LEVEL__006_L =	_CURRENT_BANK
      3  2965				   LEVEL__006_L SUBROUTINE
      4  2965				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2965
      2  2965		       35 23 33 2d*	      .byte.b	"5#3-|#3-3#-|#-#-$.#-|#-#-$.#-|#-#-.*2#|#2-#-$@#|#4-3#|6#2-",0
      0  29a0					      END_LEVEL	_006_L
      1  29a0		       00 3b	   LEVEL_SIZE__006_L =	* - LEVEL_START
      2  29a0				  -	      IF	LEVEL_SIZE__006_L > MAX_LEVEL_SIZE
      3  29a0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__006_L
      4  29a0					      ENDIF
      0  29a0					      DEFL	_006_R, "3#4-|#@5#|#$4-#|#2.$#-#|2#*.$-#|-#-.-2#|-2#$-#-|2-#2-#-|2-4#-"
      0  29a0					      START_LEVEL	_006_R
      1  29a0				   LEVEL_START SET	*
      2  29a0		       00 05	   BANK_LEVEL__006_R =	_CURRENT_BANK
      3  29a0				   LEVEL__006_R SUBROUTINE
      4  29a0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  29a0
      2  29a0		       33 23 34 2d*	      .byte.b	"3#4-|#@5#|#$4-#|#2.$#-#|2#*.$-#|-#-.-2#|-2#$-#-|2-#2-#-|2-4#-",0
      0  29de					      END_LEVEL	_006_R
      1  29de		       00 3e	   LEVEL_SIZE__006_R =	* - LEVEL_START
      2  29de				  -	      IF	LEVEL_SIZE__006_R > MAX_LEVEL_SIZE
      3  29de				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__006_R
      4  29de					      ENDIF
      0  29de					      DEFL	_007_L, "6#-|#4-#-|#@-*-#-|#-*.3#|2#-$2-#|-2#3-#|2-5#"
      0  29de					      START_LEVEL	_007_L
      1  29de				   LEVEL_START SET	*
      2  29de		       00 05	   BANK_LEVEL__007_L =	_CURRENT_BANK
      3  29de				   LEVEL__007_L SUBROUTINE
      4  29de				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  29de
      2  29de		       36 23 2d 7c*	      .byte.b	"6#-|#4-#-|#@-*-#-|#-*.3#|2#-$2-#|-2#3-#|2-5#",0
      0  2a0b					      END_LEVEL	_007_L
      1  2a0b		       00 2d	   LEVEL_SIZE__007_L =	* - LEVEL_START
      2  2a0b				  -	      IF	LEVEL_SIZE__007_L > MAX_LEVEL_SIZE
      3  2a0b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__007_L
      4  2a0b					      ENDIF
      0  2a0b					      DEFL	_007_R, "4#4-|#2-2#3-|#-$.2#2-|#2-*.3#|#2-2*$-#|3#3-@#|2-6#"
      0  2a0b					      START_LEVEL	_007_R
      1  2a0b				   LEVEL_START SET	*
      2  2a0b		       00 05	   BANK_LEVEL__007_R =	_CURRENT_BANK
      3  2a0b				   LEVEL__007_R SUBROUTINE
      4  2a0b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2a0b
      2  2a0b		       34 23 34 2d*	      .byte.b	"4#4-|#2-2#3-|#-$.2#2-|#2-*.3#|#2-2*$-#|3#3-@#|2-6#",0
      0  2a3e					      END_LEVEL	_007_R
      1  2a3e		       00 33	   LEVEL_SIZE__007_R =	* - LEVEL_START
      2  2a3e				  -	      IF	LEVEL_SIZE__007_R > MAX_LEVEL_SIZE
      3  2a3e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__007_R
      4  2a3e					      ENDIF
      0  2a3e					      DEFL	_008_L, "2-5#|2-#3-#|-2#.*-#|2#@$.2#|#-$2-#-|#-2#-#-|#4-#-|6#-"
      0  2a3e					      START_LEVEL	_008_L
      1  2a3e				   LEVEL_START SET	*
      2  2a3e		       00 05	   BANK_LEVEL__008_L =	_CURRENT_BANK
      3  2a3e				   LEVEL__008_L SUBROUTINE
      4  2a3e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2a3e
      2  2a3e		       32 2d 35 23*	      .byte.b	"2-5#|2-#3-#|-2#.*-#|2#@$.2#|#-$2-#-|#-2#-#-|#4-#-|6#-",0
      0  2a74					      END_LEVEL	_008_L
      1  2a74		       00 36	   LEVEL_SIZE__008_L =	* - LEVEL_START
      2  2a74				  -	      IF	LEVEL_SIZE__008_L > MAX_LEVEL_SIZE
      3  2a74				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__008_L
      4  2a74					      ENDIF
      0  2a74					      DEFL	_008_R, "-5#3-|2#3-2#2-|#-$-*-2#-|#2-*.$-2#|3#2.-$@#|2-7#"
      0  2a74					      START_LEVEL	_008_R
      1  2a74				   LEVEL_START SET	*
      2  2a74		       00 05	   BANK_LEVEL__008_R =	_CURRENT_BANK
      3  2a74				   LEVEL__008_R SUBROUTINE
      4  2a74				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2a74
      2  2a74		       2d 35 23 33*	      .byte.b	"-5#3-|2#3-2#2-|#-$-*-2#-|#2-*.$-2#|3#2.-$@#|2-7#",0
      0  2aa5					      END_LEVEL	_008_R
      1  2aa5		       00 31	   LEVEL_SIZE__008_R =	* - LEVEL_START
      2  2aa5				  -	      IF	LEVEL_SIZE__008_R > MAX_LEVEL_SIZE
      3  2aa5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__008_R
      4  2aa5					      ENDIF
      0  2aa5					      DEFL	_009_L, "-5#-|2#-$.2#|#@$-.-#|2#-$.$#|-#-$2.#|-2#-$.#|2-5#"
      0  2aa5					      START_LEVEL	_009_L
      1  2aa5				   LEVEL_START SET	*
      2  2aa5		       00 05	   BANK_LEVEL__009_L =	_CURRENT_BANK
      3  2aa5				   LEVEL__009_L SUBROUTINE
      4  2aa5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2aa5
      2  2aa5		       2d 35 23 2d*	      .byte.b	"-5#-|2#-$.2#|#@$-.-#|2#-$.$#|-#-$2.#|-2#-$.#|2-5#",0
      0  2ad7					      END_LEVEL	_009_L
      1  2ad7		       00 32	   LEVEL_SIZE__009_L =	* - LEVEL_START
      2  2ad7				  -	      IF	LEVEL_SIZE__009_L > MAX_LEVEL_SIZE
      3  2ad7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__009_L
      4  2ad7					      ENDIF
      0  2ad7					      DEFL	_009_R, "-3#3-|2#@4#|#-$3-#|#2-$2*#|2#2-*.#|-2#2-.#|2-5#"
      0  2ad7					      START_LEVEL	_009_R
      1  2ad7				   LEVEL_START SET	*
      2  2ad7		       00 05	   BANK_LEVEL__009_R =	_CURRENT_BANK
      3  2ad7				   LEVEL__009_R SUBROUTINE
      4  2ad7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2ad7
      2  2ad7		       2d 33 23 33*	      .byte.b	"-3#3-|2#@4#|#-$3-#|#2-$2*#|2#2-*.#|-2#2-.#|2-5#",0
      0  2b07					      END_LEVEL	_009_R
      1  2b07		       00 30	   LEVEL_SIZE__009_R =	* - LEVEL_START
      2  2b07				  -	      IF	LEVEL_SIZE__009_R > MAX_LEVEL_SIZE
      3  2b07				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__009_R
      4  2b07					      ENDIF
      0  2b07					      DEFL	_010_L, "2-3#-|2-#@#-|3#$#-|#2-.2#|#-$2.#|#-$.$#|#-$.-#|#-$.2#|5#-"
      0  2b07					      START_LEVEL	_010_L
      1  2b07				   LEVEL_START SET	*
      2  2b07		       00 05	   BANK_LEVEL__010_L =	_CURRENT_BANK
      3  2b07				   LEVEL__010_L SUBROUTINE
      4  2b07				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2b07
      2  2b07		       32 2d 33 23*	      .byte.b	"2-3#-|2-#@#-|3#$#-|#2-.2#|#-$2.#|#-$.$#|#-$.-#|#-$.2#|5#-",0
      0  2b41					      END_LEVEL	_010_L
      1  2b41		       00 3a	   LEVEL_SIZE__010_L =	* - LEVEL_START
      2  2b41				  -	      IF	LEVEL_SIZE__010_L > MAX_LEVEL_SIZE
      3  2b41				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__010_L
      4  2b41					      ENDIF
      0  2b41					      DEFL	_010_R, "4#2-|#2-#2-|#-$3#|#-$2.#|#2-*-#|#-$*-#|2#-+2#|-4#-"
      0  2b41					      START_LEVEL	_010_R
      1  2b41				   LEVEL_START SET	*
      2  2b41		       00 05	   BANK_LEVEL__010_R =	_CURRENT_BANK
      3  2b41				   LEVEL__010_R SUBROUTINE
      4  2b41				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2b41
      2  2b41		       34 23 32 2d*	      .byte.b	"4#2-|#2-#2-|#-$3#|#-$2.#|#2-*-#|#-$*-#|2#-+2#|-4#-",0
      0  2b74					      END_LEVEL	_010_R
      1  2b74		       00 33	   LEVEL_SIZE__010_R =	* - LEVEL_START
      2  2b74				  -	      IF	LEVEL_SIZE__010_R > MAX_LEVEL_SIZE
      3  2b74				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__010_R
      4  2b74					      ENDIF
      0  2b74					      DEFL	_011_L, "-4#2-|-#2.3#|2#$*2.#|#@$-$-#|2#-$2-#|-2#2-2#|2-4#-"
      0  2b74					      START_LEVEL	_011_L
      1  2b74				   LEVEL_START SET	*
      2  2b74		       00 05	   BANK_LEVEL__011_L =	_CURRENT_BANK
      3  2b74				   LEVEL__011_L SUBROUTINE
      4  2b74				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2b74
      2  2b74		       2d 34 23 32*	      .byte.b	"-4#2-|-#2.3#|2#$*2.#|#@$-$-#|2#-$2-#|-2#2-2#|2-4#-",0
      0  2ba7					      END_LEVEL	_011_L
      1  2ba7		       00 33	   LEVEL_SIZE__011_L =	* - LEVEL_START
      2  2ba7				  -	      IF	LEVEL_SIZE__011_L > MAX_LEVEL_SIZE
      3  2ba7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__011_L
      4  2ba7					      ENDIF
      0  2ba7					      DEFL	_011_R, "2-3#-|-2#@#-|2#-$#-|#-$-2#|#-.*.#|#-*2.#|#-$-$#|2#3-#|-5#"
      0  2ba7					      START_LEVEL	_011_R
      1  2ba7				   LEVEL_START SET	*
      2  2ba7		       00 05	   BANK_LEVEL__011_R =	_CURRENT_BANK
      3  2ba7				   LEVEL__011_R SUBROUTINE
      4  2ba7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2ba7
      2  2ba7		       32 2d 33 23*	      .byte.b	"2-3#-|-2#@#-|2#-$#-|#-$-2#|#-.*.#|#-*2.#|#-$-$#|2#3-#|-5#",0
      0  2be1					      END_LEVEL	_011_R
      1  2be1		       00 3a	   LEVEL_SIZE__011_R =	* - LEVEL_START
      2  2be1				  -	      IF	LEVEL_SIZE__011_R > MAX_LEVEL_SIZE
      3  2be1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__011_R
      4  2be1					      ENDIF
      0  2be1					      DEFL	_012_L, "7#3-|#5-2#2-|#-3$2.#2-|2#2-.*$3#|-3#2.-$@#|3-7#"
      0  2be1					      START_LEVEL	_012_L
      1  2be1				   LEVEL_START SET	*
      2  2be1		       00 05	   BANK_LEVEL__012_L =	_CURRENT_BANK
      3  2be1				   LEVEL__012_L SUBROUTINE
      4  2be1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2be1
      2  2be1		       37 23 33 2d*	      .byte.b	"7#3-|#5-2#2-|#-3$2.#2-|2#2-.*$3#|-3#2.-$@#|3-7#",0
      0  2c11					      END_LEVEL	_012_L
      1  2c11		       00 30	   LEVEL_SIZE__012_L =	* - LEVEL_START
      2  2c11				  -	      IF	LEVEL_SIZE__012_L > MAX_LEVEL_SIZE
      3  2c11				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__012_L
      4  2c11					      ENDIF
      0  2c11					      DEFL	_012_R, "-6#2-|2#2-.-2#-|#@$-*$-2#|2#-$.$2-#|-3#.*2-#|3-#.2-2#|3-5#-"
      0  2c11					      START_LEVEL	_012_R
      1  2c11				   LEVEL_START SET	*
      2  2c11		       00 05	   BANK_LEVEL__012_R =	_CURRENT_BANK
      3  2c11				   LEVEL__012_R SUBROUTINE
      4  2c11				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2c11
      2  2c11		       2d 36 23 32*	      .byte.b	"-6#2-|2#2-.-2#-|#@$-*$-2#|2#-$.$2-#|-3#.*2-#|3-#.2-2#|3-5#-",0
      0  2c4d					      END_LEVEL	_012_R
      1  2c4d		       00 3c	   LEVEL_SIZE__012_R =	* - LEVEL_START
      2  2c4d				  -	      IF	LEVEL_SIZE__012_R > MAX_LEVEL_SIZE
      3  2c4d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__012_R
      4  2c4d					      ENDIF
      0  2c4d					      DEFL	_013_L, "2-5#-|2-#3-2#|2-#-.2-#|3#2*2.#|#@$2-$-#|3#-$2-#|2-2#2-2#|3-4#-"
      0  2c4d					      START_LEVEL	_013_L
      1  2c4d				   LEVEL_START SET	*
      2  2c4d		       00 05	   BANK_LEVEL__013_L =	_CURRENT_BANK
      3  2c4d				   LEVEL__013_L SUBROUTINE
      4  2c4d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2c4d
      2  2c4d		       32 2d 35 23*	      .byte.b	"2-5#-|2-#3-2#|2-#-.2-#|3#2*2.#|#@$2-$-#|3#-$2-#|2-2#2-2#|3-4#-",0
      0  2c8c					      END_LEVEL	_013_L
      1  2c8c		       00 3f	   LEVEL_SIZE__013_L =	* - LEVEL_START
      2  2c8c				  -	      IF	LEVEL_SIZE__013_L > MAX_LEVEL_SIZE
      3  2c8c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__013_L
      4  2c8c					      ENDIF
      0  2c8c					      DEFL	_013_R, "-5#2-|2#3-2#-|#-$3-2#|#-.2*.-#|#3-$*-#|5#@2#|4-3#-"
      0  2c8c					      START_LEVEL	_013_R
      1  2c8c				   LEVEL_START SET	*
      2  2c8c		       00 05	   BANK_LEVEL__013_R =	_CURRENT_BANK
      3  2c8c				   LEVEL__013_R SUBROUTINE
      4  2c8c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2c8c
      2  2c8c		       2d 35 23 32*	      .byte.b	"-5#2-|2#3-2#-|#-$3-2#|#-.2*.-#|#3-$*-#|5#@2#|4-3#-",0
      0  2cbf					      END_LEVEL	_013_R
      1  2cbf		       00 33	   LEVEL_SIZE__013_R =	* - LEVEL_START
      2  2cbf				  -	      IF	LEVEL_SIZE__013_R > MAX_LEVEL_SIZE
      3  2cbf				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__013_R
      4  2cbf					      ENDIF
      0  2cbf					      DEFL	_014_L, "6#4-|#@3-2#3-|#-2#$-4#|#-#-$-*2-#|#-$-2.*2-#|5#2.$-#|4-2#.$-#|5-5#"
      0  2cbf					      START_LEVEL	_014_L
      1  2cbf				   LEVEL_START SET	*
      2  2cbf		       00 05	   BANK_LEVEL__014_L =	_CURRENT_BANK
      3  2cbf				   LEVEL__014_L SUBROUTINE
      4  2cbf				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2cbf
      2  2cbf		       36 23 34 2d*	      .byte.b	"6#4-|#@3-2#3-|#-2#$-4#|#-#-$-*2-#|#-$-2.*2-#|5#2.$-#|4-2#.$-#|5-5#",0
      0  2d02					      END_LEVEL	_014_L
      1  2d02		       00 43	   LEVEL_SIZE__014_L =	* - LEVEL_START
      2  2d02					      IF	LEVEL_SIZE__014_L > MAX_LEVEL_SIZE
      3  2d02				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__014_L
      4  2d02					      ENDIF
      0  2d02					      DEFL	_014_R, "6#3-|#4-4#|#2-#2-$@#|#-$.*-3#|2#-.*-#2-|-2#.$-#2-|2-#.$-#2-|2-5#2-"
      0  2d02					      START_LEVEL	_014_R
      1  2d02				   LEVEL_START SET	*
      2  2d02		       00 05	   BANK_LEVEL__014_R =	_CURRENT_BANK
      3  2d02				   LEVEL__014_R SUBROUTINE
      4  2d02				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2d02
      2  2d02		       36 23 33 2d*	      .byte.b	"6#3-|#4-4#|#2-#2-$@#|#-$.*-3#|2#-.*-#2-|-2#.$-#2-|2-#.$-#2-|2-5#2-",0
      0  2d45					      END_LEVEL	_014_R
      1  2d45		       00 43	   LEVEL_SIZE__014_R =	* - LEVEL_START
      2  2d45				  -	      IF	LEVEL_SIZE__014_R > MAX_LEVEL_SIZE
      3  2d45				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__014_R
      4  2d45					      ENDIF
      0  2d45					      DEFL	_015_L, "2-5#|3#3-#|#@#-$-#|#$*.-2#|#2.*$-#|2#-*2-#|-#4-#|-6#"
      0  2d45					      START_LEVEL	_015_L
      1  2d45				   LEVEL_START SET	*
      2  2d45		       00 05	   BANK_LEVEL__015_L =	_CURRENT_BANK
      3  2d45				   LEVEL__015_L SUBROUTINE
      4  2d45				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2d45
      2  2d45		       32 2d 35 23*	      .byte.b	"2-5#|3#3-#|#@#-$-#|#$*.-2#|#2.*$-#|2#-*2-#|-#4-#|-6#",0
      0  2d7a					      END_LEVEL	_015_L
      1  2d7a		       00 35	   LEVEL_SIZE__015_L =	* - LEVEL_START
      2  2d7a				  -	      IF	LEVEL_SIZE__015_L > MAX_LEVEL_SIZE
      3  2d7a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__015_L
      4  2d7a					      ENDIF
      0  2d7a					      DEFL	_015_R, "3-5#|2-2#3-#|2-#4-#|3#-$3#|#.*.*-#-|2#-*2-#-|-#2-$-#-|-3#@2#-|3-3#2-"
      0  2d7a					      START_LEVEL	_015_R
      1  2d7a				   LEVEL_START SET	*
      2  2d7a		       00 05	   BANK_LEVEL__015_R =	_CURRENT_BANK
      3  2d7a				   LEVEL__015_R SUBROUTINE
      4  2d7a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2d7a
      2  2d7a		       33 2d 35 23*	      .byte.b	"3-5#|2-2#3-#|2-#4-#|3#-$3#|#.*.*-#-|2#-*2-#-|-#2-$-#-|-3#@2#-|3-3#2-",0
      0  2dbf					      END_LEVEL	_015_R
      1  2dbf		       00 45	   LEVEL_SIZE__015_R =	* - LEVEL_START
      2  2dbf					      IF	LEVEL_SIZE__015_R > MAX_LEVEL_SIZE
      3  2dbf				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__015_R
      4  2dbf					      ENDIF
      0  2dbf					      DEFL	_016_L, "4-3#2-|5#.3#|#4.*2-#|#$#-*-$-#|#@$-2$-2#|2#4-2#-|-6#2-"
      0  2dbf					      START_LEVEL	_016_L
      1  2dbf				   LEVEL_START SET	*
      2  2dbf		       00 05	   BANK_LEVEL__016_L =	_CURRENT_BANK
      3  2dbf				   LEVEL__016_L SUBROUTINE
      4  2dbf				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2dbf
      2  2dbf		       34 2d 33 23*	      .byte.b	"4-3#2-|5#.3#|#4.*2-#|#$#-*-$-#|#@$-2$-2#|2#4-2#-|-6#2-",0
      0  2df6					      END_LEVEL	_016_L
      1  2df6		       00 37	   LEVEL_SIZE__016_L =	* - LEVEL_START
      2  2df6				  -	      IF	LEVEL_SIZE__016_L > MAX_LEVEL_SIZE
      3  2df6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__016_L
      4  2df6					      ENDIF
      0  2df6					      DEFL	_016_R, "5#-|#.2-#-|#.$-#-|#.*-2#|#*-$@#|#2-$-#|2#2-2#|-4#-"
      0  2df6					      START_LEVEL	_016_R
      1  2df6				   LEVEL_START SET	*
      2  2df6		       00 05	   BANK_LEVEL__016_R =	_CURRENT_BANK
      3  2df6				   LEVEL__016_R SUBROUTINE
      4  2df6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2df6
      2  2df6		       35 23 2d 7c*	      .byte.b	"5#-|#.2-#-|#.$-#-|#.*-2#|#*-$@#|#2-$-#|2#2-2#|-4#-",0
      0  2e29					      END_LEVEL	_016_R
      1  2e29		       00 33	   LEVEL_SIZE__016_R =	* - LEVEL_START
      2  2e29				  -	      IF	LEVEL_SIZE__016_R > MAX_LEVEL_SIZE
      3  2e29				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__016_R
      4  2e29					      ENDIF
      0  2e29					      DEFL	_017_L, "5#4-|#3-2#3-|#$3-2#2-|#2.*$-#2-|2#2*.-3#|-#.$2-$@#|-#2-#-3#|-#4-#2-|-6#2-"
      0  2e29					      START_LEVEL	_017_L
      1  2e29				   LEVEL_START SET	*
      2  2e29		       00 05	   BANK_LEVEL__017_L =	_CURRENT_BANK
      3  2e29				   LEVEL__017_L SUBROUTINE
      4  2e29				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2e29
      2  2e29		       35 23 34 2d*	      .byte.b	"5#4-|#3-2#3-|#$3-2#2-|#2.*$-#2-|2#2*.-3#|-#.$2-$@#|-#2-#-3#|-#4-#2-|-6#2-",0
      0  2e73					      END_LEVEL	_017_L
      1  2e73		       00 4a	   LEVEL_SIZE__017_L =	* - LEVEL_START
      2  2e73					      IF	LEVEL_SIZE__017_L > MAX_LEVEL_SIZE
      3  2e73				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__017_L
      4  2e73					      ENDIF
      0  2e73					      DEFL	_017_R, "3-4#-|3-#2-#-|-3#2-#-|-#.*.-#-|3#2*.#-|#3-2$2#|#-#2-$@#|#3-4#|5#3-"
      0  2e73					      START_LEVEL	_017_R
      1  2e73				   LEVEL_START SET	*
      2  2e73		       00 05	   BANK_LEVEL__017_R =	_CURRENT_BANK
      3  2e73				   LEVEL__017_R SUBROUTINE
      4  2e73				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2e73
      2  2e73		       33 2d 34 23*	      .byte.b	"3-4#-|3-#2-#-|-3#2-#-|-#.*.-#-|3#2*.#-|#3-2$2#|#-#2-$@#|#3-4#|5#3-",0
      0  2eb6					      END_LEVEL	_017_R
      1  2eb6		       00 43	   LEVEL_SIZE__017_R =	* - LEVEL_START
      2  2eb6				  -	      IF	LEVEL_SIZE__017_R > MAX_LEVEL_SIZE
      3  2eb6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__017_R
      4  2eb6					      ENDIF
      0  2eb6					      DEFL	_018_L, "6#3-|#4-2#2-|#-$2.-3#|2#-3*2.#|#-$2-$*$#|#4-#@-#|9#"
      0  2eb6					      START_LEVEL	_018_L
      1  2eb6				   LEVEL_START SET	*
      2  2eb6		       00 05	   BANK_LEVEL__018_L =	_CURRENT_BANK
      3  2eb6				   LEVEL__018_L SUBROUTINE
      4  2eb6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2eb6
      2  2eb6		       36 23 33 2d*	      .byte.b	"6#3-|#4-2#2-|#-$2.-3#|2#-3*2.#|#-$2-$*$#|#4-#@-#|9#",0
      0  2eea					      END_LEVEL	_018_L
      1  2eea		       00 34	   LEVEL_SIZE__018_L =	* - LEVEL_START
      2  2eea				  -	      IF	LEVEL_SIZE__018_L > MAX_LEVEL_SIZE
      3  2eea				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__018_L
      4  2eea					      ENDIF
      0  2eea					      DEFL	_018_R, "-4#3-|-#2-2#2-|2#-*.2#-|#-$.*@2#|#2-$2*-#|#4-#-#|3#4-#|2-6#"
      0  2eea					      START_LEVEL	_018_R
      1  2eea				   LEVEL_START SET	*
      2  2eea		       00 05	   BANK_LEVEL__018_R =	_CURRENT_BANK
      3  2eea				   LEVEL__018_R SUBROUTINE
      4  2eea				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2eea
      2  2eea		       2d 34 23 33*	      .byte.b	"-4#3-|-#2-2#2-|2#-*.2#-|#-$.*@2#|#2-$2*-#|#4-#-#|3#4-#|2-6#",0
      0  2f26					      END_LEVEL	_018_R
      1  2f26		       00 3c	   LEVEL_SIZE__018_R =	* - LEVEL_START
      2  2f26				  -	      IF	LEVEL_SIZE__018_R > MAX_LEVEL_SIZE
      3  2f26				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__018_R
      4  2f26					      ENDIF
      0  2f26					      DEFL	_019_L, "4-5#-|2-3#-*.#-|2-#-$-2.#-|3#-2$*$2#|#@$2-2.2-#|6#3-#|5-5#"
      0  2f26					      START_LEVEL	_019_L
      1  2f26				   LEVEL_START SET	*
      2  2f26		       00 05	   BANK_LEVEL__019_L =	_CURRENT_BANK
      3  2f26				   LEVEL__019_L SUBROUTINE
      4  2f26				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2f26
      2  2f26		       34 2d 35 23*	      .byte.b	"4-5#-|2-3#-*.#-|2-#-$-2.#-|3#-2$*$2#|#@$2-2.2-#|6#3-#|5-5#",0
      0  2f61					      END_LEVEL	_019_L
      1  2f61		       00 3b	   LEVEL_SIZE__019_L =	* - LEVEL_START
      2  2f61				  -	      IF	LEVEL_SIZE__019_L > MAX_LEVEL_SIZE
      3  2f61				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__019_L
      4  2f61					      ENDIF
      0  2f61					      DEFL	_019_R, "2-7#2-|2-#5-2#-|2-#-$*#$-#-|3#-$.*.*#-|#@$-3.$-2#|5#.$3-#|4-2#-2#-#|5-#4-#|5-6#"
      0  2f61					      START_LEVEL	_019_R
      1  2f61				   LEVEL_START SET	*
      2  2f61		       00 05	   BANK_LEVEL__019_R =	_CURRENT_BANK
      3  2f61				   LEVEL__019_R SUBROUTINE
      4  2f61				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2f61
      2  2f61		       32 2d 37 23*	      .byte.b	"2-7#2-|2-#5-2#-|2-#-$*#$-#-|3#-$.*.*#-|#@$-3.$-2#|5#.$3-#|4-2#-2#-#|5-#4-#|5-6#",0
      0  2fb1					      END_LEVEL	_019_R
      1  2fb1		       00 50	   LEVEL_SIZE__019_R =	* - LEVEL_START
      2  2fb1					      IF	LEVEL_SIZE__019_R > MAX_LEVEL_SIZE
      3  2fb1				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__019_R
      4  2fb1					      ENDIF
     80  2fb1
     81  2fb1							;-----------------------------------------------------------
     82  2fb1							; Stella 3E autodetect signature, can live anywhere
     83  2fb1		       85 3e a9 00	      .byte.b	$85, $3E, $A9, $00
     84  2fb5							;-----------------------------------------------------------
     85  2fb5
      0  2fb5					      CHECK_BANK_SIZE	"LEVELS1"
      1  2fb5		       07 b5	   .TEMP      =	* - BANK_START
 LEVELS1 (2K) SIZE =  $7b5 , FREE= $4b
      2  2fb5					      ECHO	"LEVELS1", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  2fb5				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  2fb5				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  2fb5				  -	      ERR
      6  2fb5					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS2.asm LEVEL 2 PASS 3
      0  2fb5					      include	"BANK_LEVELS2.asm"
      1  2fb5							;    Sokoboo - a Sokoban implementation
      2  2fb5							;    using a generic tile-based display engine for the Atari 2600
      3  2fb5							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  2fb5							;
      5  2fb5							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  2fb5							;
      7  2fb5							;    Code related to the generic tile-based display engine was developed by
      8  2fb5							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  2fb5							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  2fb5							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  2fb5							;
     12  2fb5							;    Code related to music and sound effects uses the TIATracker music player
     13  2fb5							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  2fb5							;    directory for Apache licensing details.
     15  2fb5							;
     16  2fb5							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  2fb5							;    See the copyright notices in the License directory for a list of level
     18  2fb5							;    contributors.
     19  2fb5							;
     20  2fb5							;    Except where otherwise indicated, this software is released under the
     21  2fb5							;    following licensing arrangement...
     22  2fb5							;
     23  2fb5							;    This program is free software: you can redistribute it and/or modify
     24  2fb5							;    it under the terms of the GNU General Public License as published by
     25  2fb5							;    the Free Software Foundation, either version 3 of the License, or
     26  2fb5							;    (at your option) any later version.
     27  2fb5							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  2fb5
     29  2fb5							;    This program is distributed in the hope that it will be useful,
     30  2fb5							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  2fb5							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  2fb5							;    GNU General Public License for more details.
     33  2fb5
      0  2fb5					      NEWBANK	LEVELS2
      1  37be ????				      SEG	LEVELS2
      2  3000					      ORG	ORIGIN
      3  3000					      RORG	$F000
      4  3000				   BANK_START SET	*
      5  3000				   LEVELS2    SET	ORIGIN / 2048
      6  3000				   ORIGIN     SET	ORIGIN + 2048
      7  3000				   _CURRENT_BANK SET	LEVELS2
     35  3000
      0  3000					      DEFL	_020_L, "-6#-|-#4-#-|-#-2$-#-|2#-.$3#|#@$.3-#|3#*.*$#|#4-2.#|#3-4#|5#3-"
      0  3000					      START_LEVEL	_020_L
      1  3000				   LEVEL_START SET	*
      2  3000		       00 06	   BANK_LEVEL__020_L =	_CURRENT_BANK
      3  3000				   LEVEL__020_L SUBROUTINE
      4  3000				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3000
      2  3000		       2d 36 23 2d*	      .byte.b	"-6#-|-#4-#-|-#-2$-#-|2#-.$3#|#@$.3-#|3#*.*$#|#4-2.#|#3-4#|5#3-",0
      0  303f					      END_LEVEL	_020_L
      1  303f		       00 3f	   LEVEL_SIZE__020_L =	* - LEVEL_START
      2  303f				  -	      IF	LEVEL_SIZE__020_L > MAX_LEVEL_SIZE
      3  303f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__020_L
      4  303f					      ENDIF
      0  303f					      DEFL	_020_R, "5-4#|6#2-#|#3-#3-#|#-#$.*$-#|#2-3.-2#|#-2$*2-#-|2#@$.-2#-|-6#2-"
      0  303f					      START_LEVEL	_020_R
      1  303f				   LEVEL_START SET	*
      2  303f		       00 06	   BANK_LEVEL__020_R =	_CURRENT_BANK
      3  303f				   LEVEL__020_R SUBROUTINE
      4  303f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  303f
      2  303f		       35 2d 34 23*	      .byte.b	"5-4#|6#2-#|#3-#3-#|#-#$.*$-#|#2-3.-2#|#-2$*2-#-|2#@$.-2#-|-6#2-",0
      0  307f					      END_LEVEL	_020_R
      1  307f		       00 40	   LEVEL_SIZE__020_R =	* - LEVEL_START
      2  307f				  -	      IF	LEVEL_SIZE__020_R > MAX_LEVEL_SIZE
      3  307f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__020_R
      4  307f					      ENDIF
      0  307f					      DEFL	_021_L, "4-4#3-|4-#2-#3-|5#-$2#2-|#@$3.*.#2-|2#-#-$2.3#|-#-#2$*-$-#|-#-$2-.3-#|-4#-*2-2#|4-6#-"
      0  307f					      START_LEVEL	_021_L
      1  307f				   LEVEL_START SET	*
      2  307f		       00 06	   BANK_LEVEL__021_L =	_CURRENT_BANK
      3  307f				   LEVEL__021_L SUBROUTINE
      4  307f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  307f
      2  307f		       34 2d 34 23*	      .byte.b	"4-4#3-|4-#2-#3-|5#-$2#2-|#@$3.*.#2-|2#-#-$2.3#|-#-#2$*-$-#|-#-$2-.3-#|-4#-*2-2#|4-6#-",0
      0  30d5					      END_LEVEL	_021_L
      1  30d5		       00 56	   LEVEL_SIZE__021_L =	* - LEVEL_START
      2  30d5					      IF	LEVEL_SIZE__021_L > MAX_LEVEL_SIZE
      3  30d5				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__021_L
      4  30d5					      ENDIF
      0  30d5					      DEFL	_021_R, "-4#3-|2#@-4#|#-3$2-#|#.*.$2-#|#-.*2-2#|2#.3-#-|-6#-"
      0  30d5					      START_LEVEL	_021_R
      1  30d5				   LEVEL_START SET	*
      2  30d5		       00 06	   BANK_LEVEL__021_R =	_CURRENT_BANK
      3  30d5				   LEVEL__021_R SUBROUTINE
      4  30d5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  30d5
      2  30d5		       2d 34 23 33*	      .byte.b	"-4#3-|2#@-4#|#-3$2-#|#.*.$2-#|#-.*2-2#|2#.3-#-|-6#-",0
      0  3109					      END_LEVEL	_021_R
      1  3109		       00 34	   LEVEL_SIZE__021_R =	* - LEVEL_START
      2  3109				  -	      IF	LEVEL_SIZE__021_R > MAX_LEVEL_SIZE
      3  3109				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__021_R
      4  3109					      ENDIF
      0  3109					      DEFL	_022_L, "3-3#2-|3-#@2#-|2-2#$-2#|3#2.*-#|#2-2$.*#|#-#$-.-#|#3-$.-#|2#4-2#|-6#-"
      0  3109					      START_LEVEL	_022_L
      1  3109				   LEVEL_START SET	*
      2  3109		       00 06	   BANK_LEVEL__022_L =	_CURRENT_BANK
      3  3109				   LEVEL__022_L SUBROUTINE
      4  3109				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3109
      2  3109		       33 2d 33 23*	      .byte.b	"3-3#2-|3-#@2#-|2-2#$-2#|3#2.*-#|#2-2$.*#|#-#$-.-#|#3-$.-#|2#4-2#|-6#-",0
      0  314f					      END_LEVEL	_022_L
      1  314f		       00 46	   LEVEL_SIZE__022_L =	* - LEVEL_START
      2  314f				  -	      IF	LEVEL_SIZE__022_L > MAX_LEVEL_SIZE
      3  314f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__022_L
      4  314f					      ENDIF
      0  314f					      DEFL	_022_R, "-3#4-|-#@2#3-|2#$-4#|#2-2$2-#|#-$.*$-#|#2-3.-#|4#.3#|3-3#2-"
      0  314f					      START_LEVEL	_022_R
      1  314f				   LEVEL_START SET	*
      2  314f		       00 06	   BANK_LEVEL__022_R =	_CURRENT_BANK
      3  314f				   LEVEL__022_R SUBROUTINE
      4  314f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  314f
      2  314f		       2d 33 23 34*	      .byte.b	"-3#4-|-#@2#3-|2#$-4#|#2-2$2-#|#-$.*$-#|#2-3.-#|4#.3#|3-3#2-",0
      0  318b					      END_LEVEL	_022_R
      1  318b		       00 3c	   LEVEL_SIZE__022_R =	* - LEVEL_START
      2  318b				  -	      IF	LEVEL_SIZE__022_R > MAX_LEVEL_SIZE
      3  318b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__022_R
      4  318b					      ENDIF
      0  318b					      DEFL	_023_L, "6#3-|#4-2#2-|#-$-$-2#-|2#-$.$+2#|-#-2.*.-#|-2#$#-#-#|2-#5-#|2-7#"
      0  318b					      START_LEVEL	_023_L
      1  318b				   LEVEL_START SET	*
      2  318b		       00 06	   BANK_LEVEL__023_L =	_CURRENT_BANK
      3  318b				   LEVEL__023_L SUBROUTINE
      4  318b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  318b
      2  318b		       36 23 33 2d*	      .byte.b	"6#3-|#4-2#2-|#-$-$-2#-|2#-$.$+2#|-#-2.*.-#|-2#$#-#-#|2-#5-#|2-7#",0
      0  31cc					      END_LEVEL	_023_L
      1  31cc		       00 41	   LEVEL_SIZE__023_L =	* - LEVEL_START
      2  31cc				  -	      IF	LEVEL_SIZE__023_L > MAX_LEVEL_SIZE
      3  31cc				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__023_L
      4  31cc					      ENDIF
      0  31cc					      DEFL	_023_R, "7#2-|#5-#2-|#2-#2$#2-|#-$-$.3#|2#+2*.*.#|-2#3-3#|2-#2-2#2-|2-4#3-"
      0  31cc					      START_LEVEL	_023_R
      1  31cc				   LEVEL_START SET	*
      2  31cc		       00 06	   BANK_LEVEL__023_R =	_CURRENT_BANK
      3  31cc				   LEVEL__023_R SUBROUTINE
      4  31cc				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  31cc
      2  31cc		       37 23 32 2d*	      .byte.b	"7#2-|#5-#2-|#2-#2$#2-|#-$-$.3#|2#+2*.*.#|-2#3-3#|2-#2-2#2-|2-4#3-",0
      0  320e					      END_LEVEL	_023_R
      1  320e		       00 42	   LEVEL_SIZE__023_R =	* - LEVEL_START
      2  320e				  -	      IF	LEVEL_SIZE__023_R > MAX_LEVEL_SIZE
      3  320e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__023_R
      4  320e					      ENDIF
      0  320e					      DEFL	_024_L, "-9#|-#7-#|-#-#2-$#-#|-#-#.*.#-#|2#2-.*-#-#|#3-.2$2-#|#-$2#2-3#|2#@2#2-#2-|-7#2-"
      0  320e					      START_LEVEL	_024_L
      1  320e				   LEVEL_START SET	*
      2  320e		       00 06	   BANK_LEVEL__024_L =	_CURRENT_BANK
      3  320e				   LEVEL__024_L SUBROUTINE
      4  320e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  320e
      2  320e		       2d 39 23 7c*	      .byte.b	"-9#|-#7-#|-#-#2-$#-#|-#-#.*.#-#|2#2-.*-#-#|#3-.2$2-#|#-$2#2-3#|2#@2#2-#2-|-7#2-",0
      0  325e					      END_LEVEL	_024_L
      1  325e		       00 50	   LEVEL_SIZE__024_L =	* - LEVEL_START
      2  325e				  -	      IF	LEVEL_SIZE__024_L > MAX_LEVEL_SIZE
      3  325e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__024_L
      4  325e					      ENDIF
      0  325e					      DEFL	_024_R, "-8#|2#6-#|#-$-*-#-#|#-3.*$-#|#2-*.*.2#|#2-#$-$-#|4#-$2-#|3-2#@3#|4-3#2-"
      0  325e					      START_LEVEL	_024_R
      1  325e				   LEVEL_START SET	*
      2  325e		       00 06	   BANK_LEVEL__024_R =	_CURRENT_BANK
      3  325e				   LEVEL__024_R SUBROUTINE
      4  325e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  325e
      2  325e		       2d 38 23 7c*	      .byte.b	"-8#|2#6-#|#-$-*-#-#|#-3.*$-#|#2-*.*.2#|#2-#$-$-#|4#-$2-#|3-2#@3#|4-3#2-",0
      0  32a6					      END_LEVEL	_024_R
      1  32a6		       00 48	   LEVEL_SIZE__024_R =	* - LEVEL_START
      2  32a6				  -	      IF	LEVEL_SIZE__024_R > MAX_LEVEL_SIZE
      3  32a6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__024_R
      4  32a6					      ENDIF
      0  32a6					      DEFL	_025_L, "4-4#2-|5#@-2#-|#4-2$-2#|#-3#2-$-#|#-3.2*.-#|#-2$*$2.2#|2#6-#-|-8#-"
      0  32a6					      START_LEVEL	_025_L
      1  32a6				   LEVEL_START SET	*
      2  32a6		       00 06	   BANK_LEVEL__025_L =	_CURRENT_BANK
      3  32a6				   LEVEL__025_L SUBROUTINE
      4  32a6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  32a6
      2  32a6		       34 2d 34 23*	      .byte.b	"4-4#2-|5#@-2#-|#4-2$-2#|#-3#2-$-#|#-3.2*.-#|#-2$*$2.2#|2#6-#-|-8#-",0
      0  32e9					      END_LEVEL	_025_L
      1  32e9		       00 43	   LEVEL_SIZE__025_L =	* - LEVEL_START
      2  32e9				  -	      IF	LEVEL_SIZE__025_L > MAX_LEVEL_SIZE
      3  32e9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__025_L
      4  32e9					      ENDIF
      0  32e9					      DEFL	_025_R, "-6#-|2#.-$-#-|#.*$*-2#|#.*2.$-#|2#3-#@#|-#-$-$-#|-3#2-2#|3-4#-"
      0  32e9					      START_LEVEL	_025_R
      1  32e9				   LEVEL_START SET	*
      2  32e9		       00 06	   BANK_LEVEL__025_R =	_CURRENT_BANK
      3  32e9				   LEVEL__025_R SUBROUTINE
      4  32e9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  32e9
      2  32e9		       2d 36 23 2d*	      .byte.b	"-6#-|2#.-$-#-|#.*$*-2#|#.*2.$-#|2#3-#@#|-#-$-$-#|-3#2-2#|3-4#-",0
      0  3328					      END_LEVEL	_025_R
      1  3328		       00 3f	   LEVEL_SIZE__025_R =	* - LEVEL_START
      2  3328				  -	      IF	LEVEL_SIZE__025_R > MAX_LEVEL_SIZE
      3  3328				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__025_R
      4  3328					      ENDIF
      0  3328					      DEFL	_026_L, "-6#2-|2#-3.3#|#-$-2*.-#|#2-$-2*-#|#-$-$.$-#|#2-#-@2-#|9#"
      0  3328					      START_LEVEL	_026_L
      1  3328				   LEVEL_START SET	*
      2  3328		       00 06	   BANK_LEVEL__026_L =	_CURRENT_BANK
      3  3328				   LEVEL__026_L SUBROUTINE
      4  3328				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3328
      2  3328		       2d 36 23 32*	      .byte.b	"-6#2-|2#-3.3#|#-$-2*.-#|#2-$-2*-#|#-$-$.$-#|#2-#-@2-#|9#",0
      0  3361					      END_LEVEL	_026_L
      1  3361		       00 39	   LEVEL_SIZE__026_L =	* - LEVEL_START
      2  3361				  -	      IF	LEVEL_SIZE__026_L > MAX_LEVEL_SIZE
      3  3361				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__026_L
      4  3361					      ENDIF
      0  3361					      DEFL	_026_R, "5-4#|4-2#2-#|-4#3-#|2#2.-$2-#|#.3*$-2#|2#.$-$-#-|-3#-@2#-|3-4#2-"
      0  3361					      START_LEVEL	_026_R
      1  3361				   LEVEL_START SET	*
      2  3361		       00 06	   BANK_LEVEL__026_R =	_CURRENT_BANK
      3  3361				   LEVEL__026_R SUBROUTINE
      4  3361				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3361
      2  3361		       35 2d 34 23*	      .byte.b	"5-4#|4-2#2-#|-4#3-#|2#2.-$2-#|#.3*$-2#|2#.$-$-#-|-3#-@2#-|3-4#2-",0
      0  33a2					      END_LEVEL	_026_R
      1  33a2		       00 41	   LEVEL_SIZE__026_R =	* - LEVEL_START
      2  33a2				  -	      IF	LEVEL_SIZE__026_R > MAX_LEVEL_SIZE
      3  33a2				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__026_R
      4  33a2					      ENDIF
      0  33a2					      DEFL	_027_L, "8#-|#3-@2-#-|#-*4$2#|2#*.#3-#|-#3.$2-#|-3#*.$-#|3-#.4#|3-3#3-"
      0  33a2					      START_LEVEL	_027_L
      1  33a2				   LEVEL_START SET	*
      2  33a2		       00 06	   BANK_LEVEL__027_L =	_CURRENT_BANK
      3  33a2				   LEVEL__027_L SUBROUTINE
      4  33a2				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  33a2
      2  33a2		       38 23 2d 7c*	      .byte.b	"8#-|#3-@2-#-|#-*4$2#|2#*.#3-#|-#3.$2-#|-3#*.$-#|3-#.4#|3-3#3-",0
      0  33e0					      END_LEVEL	_027_L
      1  33e0		       00 3e	   LEVEL_SIZE__027_L =	* - LEVEL_START
      2  33e0				  -	      IF	LEVEL_SIZE__027_L > MAX_LEVEL_SIZE
      3  33e0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__027_L
      4  33e0					      ENDIF
      0  33e0					      DEFL	_027_R, "7#2-|#5-2#-|#$2*-$-#-|#-*2.2-2#|#2.*3$-#|3#.#3-#|2-4#-@#|5-4#"
      0  33e0					      START_LEVEL	_027_R
      1  33e0				   LEVEL_START SET	*
      2  33e0		       00 06	   BANK_LEVEL__027_R =	_CURRENT_BANK
      3  33e0				   LEVEL__027_R SUBROUTINE
      4  33e0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  33e0
      2  33e0		       37 23 32 2d*	      .byte.b	"7#2-|#5-2#-|#$2*-$-#-|#-*2.2-2#|#2.*3$-#|3#.#3-#|2-4#-@#|5-4#",0
      0  341e					      END_LEVEL	_027_R
      1  341e		       00 3e	   LEVEL_SIZE__027_R =	* - LEVEL_START
      2  341e				  -	      IF	LEVEL_SIZE__027_R > MAX_LEVEL_SIZE
      3  341e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__027_R
      4  341e					      ENDIF
      0  341e					      DEFL	_028_L, "3-3#4-|4#.#4-|#-$-.#4-|#@#.*5#|#-$.*.3-#|#-2$-*$#-#|#2-#-.$2-#|4#4-2#|3-6#-"
      0  341e					      START_LEVEL	_028_L
      1  341e				   LEVEL_START SET	*
      2  341e		       00 06	   BANK_LEVEL__028_L =	_CURRENT_BANK
      3  341e				   LEVEL__028_L SUBROUTINE
      4  341e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  341e
      2  341e		       33 2d 33 23*	      .byte.b	"3-3#4-|4#.#4-|#-$-.#4-|#@#.*5#|#-$.*.3-#|#-2$-*$#-#|#2-#-.$2-#|4#4-2#|3-6#-",0
      0  346a					      END_LEVEL	_028_L
      1  346a		       00 4c	   LEVEL_SIZE__028_L =	* - LEVEL_START
      2  346a				  -	      IF	LEVEL_SIZE__028_L > MAX_LEVEL_SIZE
      3  346a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__028_L
      4  346a					      ENDIF
      0  346a					      DEFL	_028_R, "9#-|#4-2#@#-|#-2#$#-$2#|#-.-.2$2-#|#-.*.2-#-#|#-#.#$3-#|#-#2*3-2#|#4-4#-|6#4-"
      0  346a					      START_LEVEL	_028_R
      1  346a				   LEVEL_START SET	*
      2  346a		       00 06	   BANK_LEVEL__028_R =	_CURRENT_BANK
      3  346a				   LEVEL__028_R SUBROUTINE
      4  346a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  346a
      2  346a		       39 23 2d 7c*	      .byte.b	"9#-|#4-2#@#-|#-2#$#-$2#|#-.-.2$2-#|#-.*.2-#-#|#-#.#$3-#|#-#2*3-2#|#4-4#-|6#4-",0
      0  34b8					      END_LEVEL	_028_R
      1  34b8		       00 4e	   LEVEL_SIZE__028_R =	* - LEVEL_START
      2  34b8				  -	      IF	LEVEL_SIZE__028_R > MAX_LEVEL_SIZE
      3  34b8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__028_R
      4  34b8					      ENDIF
      0  34b8					      DEFL	_029_L, "-5#3-|-#-@-2#2-|2#$*$-3#|#2.*.$2-#|#.*.$3-#|2#2-$-3#|-3#2-#2-|3-4#2-"
      0  34b8					      START_LEVEL	_029_L
      1  34b8				   LEVEL_START SET	*
      2  34b8		       00 06	   BANK_LEVEL__029_L =	_CURRENT_BANK
      3  34b8				   LEVEL__029_L SUBROUTINE
      4  34b8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  34b8
      2  34b8		       2d 35 23 33*	      .byte.b	"-5#3-|-#-@-2#2-|2#$*$-3#|#2.*.$2-#|#.*.$3-#|2#2-$-3#|-3#2-#2-|3-4#2-",0
      0  34fd					      END_LEVEL	_029_L
      1  34fd		       00 45	   LEVEL_SIZE__029_L =	* - LEVEL_START
      2  34fd				  -	      IF	LEVEL_SIZE__029_L > MAX_LEVEL_SIZE
      3  34fd				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__029_L
      4  34fd					      ENDIF
      0  34fd					      DEFL	_029_R, "-4#4-|-#@-4#-|2#$-$2-2#|#2.3$2-#|#.2*.*$-#|3#2-2.-#|2-#2-$.2#|2-6#-"
      0  34fd					      START_LEVEL	_029_R
      1  34fd				   LEVEL_START SET	*
      2  34fd		       00 06	   BANK_LEVEL__029_R =	_CURRENT_BANK
      3  34fd				   LEVEL__029_R SUBROUTINE
      4  34fd				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  34fd
      2  34fd		       2d 34 23 34*	      .byte.b	"-4#4-|-#@-4#-|2#$-$2-2#|#2.3$2-#|#.2*.*$-#|3#2-2.-#|2-#2-$.2#|2-6#-",0
      0  3541					      END_LEVEL	_029_R
      1  3541		       00 44	   LEVEL_SIZE__029_R =	* - LEVEL_START
      2  3541				  -	      IF	LEVEL_SIZE__029_R > MAX_LEVEL_SIZE
      3  3541				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__029_R
      4  3541					      ENDIF
      0  3541					      DEFL	_030_L, "6-5#|5#-#2-@#|#3-3#2$-#|#2-$-2.-$2#|3#-.*.*-2#|2-3#-.$2-#|4-#3-#-#|4-2#4-#|5-6#"
      0  3541					      START_LEVEL	_030_L
      1  3541				   LEVEL_START SET	*
      2  3541		       00 06	   BANK_LEVEL__030_L =	_CURRENT_BANK
      3  3541				   LEVEL__030_L SUBROUTINE
      4  3541				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3541
      2  3541		       36 2d 35 23*	      .byte.b	"6-5#|5#-#2-@#|#3-3#2$-#|#2-$-2.-$2#|3#-.*.*-2#|2-3#-.$2-#|4-#3-#-#|4-2#4-#|5-6#",0
      0  3591					      END_LEVEL	_030_L
      1  3591		       00 50	   LEVEL_SIZE__030_L =	* - LEVEL_START
      2  3591				  -	      IF	LEVEL_SIZE__030_L > MAX_LEVEL_SIZE
      3  3591				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__030_L
      4  3591					      ENDIF
      0  3591					      DEFL	_030_R, "-7#2-|2#-$2-.#2-|#-$-$#.#2-|#-#.$2.#2-|#-#3.$2#-|#2-$#*2-2#|3#2-*2$-#|2-#@5-#|2-8#"
      0  3591					      START_LEVEL	_030_R
      1  3591				   LEVEL_START SET	*
      2  3591		       00 06	   BANK_LEVEL__030_R =	_CURRENT_BANK
      3  3591				   LEVEL__030_R SUBROUTINE
      4  3591				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3591
      2  3591		       2d 37 23 32*	      .byte.b	"-7#2-|2#-$2-.#2-|#-$-$#.#2-|#-#.$2.#2-|#-#3.$2#-|#2-$#*2-2#|3#2-*2$-#|2-#@5-#|2-8#",0
      0  35e4					      END_LEVEL	_030_R
      1  35e4		       00 53	   LEVEL_SIZE__030_R =	* - LEVEL_START
      2  35e4				  -	      IF	LEVEL_SIZE__030_R > MAX_LEVEL_SIZE
      3  35e4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__030_R
      4  35e4					      ENDIF
      0  35e4					      DEFL	_031_L, "-7#2-|-#3-@-3#|-#-2$*2$-#|3#2-*.2-#|#2.2*.*2-#|#$#2-.2-2#|#3-5#-|5#5-"
      0  35e4					      START_LEVEL	_031_L
      1  35e4				   LEVEL_START SET	*
      2  35e4		       00 06	   BANK_LEVEL__031_L =	_CURRENT_BANK
      3  35e4				   LEVEL__031_L SUBROUTINE
      4  35e4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  35e4
      2  35e4		       2d 37 23 32*	      .byte.b	"-7#2-|-#3-@-3#|-#-2$*2$-#|3#2-*.2-#|#2.2*.*2-#|#$#2-.2-2#|#3-5#-|5#5-",0
      0  362a					      END_LEVEL	_031_L
      1  362a		       00 46	   LEVEL_SIZE__031_L =	* - LEVEL_START
      2  362a				  -	      IF	LEVEL_SIZE__031_L > MAX_LEVEL_SIZE
      3  362a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__031_L
      4  362a					      ENDIF
      0  362a					      DEFL	_031_R, "6#-|#2-#+#-|#2-$.2#|#2-2*.#|#-$-.$#|#-$-*.#|#-2$.-#|#-$-.-#|7#"
      0  362a					      START_LEVEL	_031_R
      1  362a				   LEVEL_START SET	*
      2  362a		       00 06	   BANK_LEVEL__031_R =	_CURRENT_BANK
      3  362a				   LEVEL__031_R SUBROUTINE
      4  362a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  362a
      2  362a		       36 23 2d 7c*	      .byte.b	"6#-|#2-#+#-|#2-$.2#|#2-2*.#|#-$-.$#|#-$-*.#|#-2$.-#|#-$-.-#|7#",0
      0  3669					      END_LEVEL	_031_R
      1  3669		       00 3f	   LEVEL_SIZE__031_R =	* - LEVEL_START
      2  3669				  -	      IF	LEVEL_SIZE__031_R > MAX_LEVEL_SIZE
      3  3669				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__031_R
      4  3669					      ENDIF
      0  3669					      DEFL	_032_L, "-4#2-|-#2-3#|2#2-2.#|#@2$*.#|#-$2-.#|#-$-#*#|3#3-#|2-5#"
      0  3669					      START_LEVEL	_032_L
      1  3669				   LEVEL_START SET	*
      2  3669		       00 06	   BANK_LEVEL__032_L =	_CURRENT_BANK
      3  3669				   LEVEL__032_L SUBROUTINE
      4  3669				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3669
      2  3669		       2d 34 23 32*	      .byte.b	"-4#2-|-#2-3#|2#2-2.#|#@2$*.#|#-$2-.#|#-$-#*#|3#3-#|2-5#",0
      0  36a1					      END_LEVEL	_032_L
      1  36a1		       00 38	   LEVEL_SIZE__032_L =	* - LEVEL_START
      2  36a1				  -	      IF	LEVEL_SIZE__032_L > MAX_LEVEL_SIZE
      3  36a1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__032_L
      4  36a1					      ENDIF
      0  36a1					      DEFL	_032_R, "9#-|#7-2#|#-$3#-$@#|#2-2.#.$-#|#-.*.2*$-#|#-$.*2-$-#|#2-#.$-3#|8#2-"
      0  36a1					      START_LEVEL	_032_R
      1  36a1				   LEVEL_START SET	*
      2  36a1		       00 06	   BANK_LEVEL__032_R =	_CURRENT_BANK
      3  36a1				   LEVEL__032_R SUBROUTINE
      4  36a1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  36a1
      2  36a1		       39 23 2d 7c*	      .byte.b	"9#-|#7-2#|#-$3#-$@#|#2-2.#.$-#|#-.*.2*$-#|#-$.*2-$-#|#2-#.$-3#|8#2-",0
      0  36e5					      END_LEVEL	_032_R
      1  36e5		       00 44	   LEVEL_SIZE__032_R =	* - LEVEL_START
      2  36e5				  -	      IF	LEVEL_SIZE__032_R > MAX_LEVEL_SIZE
      3  36e5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__032_R
      4  36e5					      ENDIF
      0  36e5					      DEFL	_033_L, "2-7#-|-2#2-#2-2#|-#2-.*-$-#|-#-$.$-$@#|2#$-2*-3#|#2-$*.*.#-|#3-2.3#-|7#3-"
      0  36e5					      START_LEVEL	_033_L
      1  36e5				   LEVEL_START SET	*
      2  36e5		       00 06	   BANK_LEVEL__033_L =	_CURRENT_BANK
      3  36e5				   LEVEL__033_L SUBROUTINE
      4  36e5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  36e5
      2  36e5		       32 2d 37 23*	      .byte.b	"2-7#-|-2#2-#2-2#|-#2-.*-$-#|-#-$.$-$@#|2#$-2*-3#|#2-$*.*.#-|#3-2.3#-|7#3-",0
      0  372f					      END_LEVEL	_033_L
      1  372f		       00 4a	   LEVEL_SIZE__033_L =	* - LEVEL_START
      2  372f				  -	      IF	LEVEL_SIZE__033_L > MAX_LEVEL_SIZE
      3  372f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__033_L
      4  372f					      ENDIF
      0  372f					      DEFL	_033_R, "-7#2-|2#2-#@-2#-|#-$-#3-2#|#-$2-$*$-#|#2-*.*.2-#|2#.*2.-$-#|-9#"
      0  372f					      START_LEVEL	_033_R
      1  372f				   LEVEL_START SET	*
      2  372f		       00 06	   BANK_LEVEL__033_R =	_CURRENT_BANK
      3  372f				   LEVEL__033_R SUBROUTINE
      4  372f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  372f
      2  372f		       2d 37 23 32*	      .byte.b	"-7#2-|2#2-#@-2#-|#-$-#3-2#|#-$2-$*$-#|#2-*.*.2-#|2#.*2.-$-#|-9#",0
      0  376f					      END_LEVEL	_033_R
      1  376f		       00 40	   LEVEL_SIZE__033_R =	* - LEVEL_START
      2  376f				  -	      IF	LEVEL_SIZE__033_R > MAX_LEVEL_SIZE
      3  376f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__033_R
      4  376f					      ENDIF
      0  376f					      DEFL	_034_L, "5-4#-|-5#2-#-|-#-$@$2-#-|2#-#*$.*2#|#3-.2*2.#|#2-$2-4#|4#2-#3-|3-#2-#3-|3-4#3-"
      0  376f					      START_LEVEL	_034_L
      1  376f				   LEVEL_START SET	*
      2  376f		       00 06	   BANK_LEVEL__034_L =	_CURRENT_BANK
      3  376f				   LEVEL__034_L SUBROUTINE
      4  376f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  376f
      2  376f		       35 2d 34 23*	      .byte.b	"5-4#-|-5#2-#-|-#-$@$2-#-|2#-#*$.*2#|#3-.2*2.#|#2-$2-4#|4#2-#3-|3-#2-#3-|3-4#3-",0
      0  37be					      END_LEVEL	_034_L
      1  37be		       00 4f	   LEVEL_SIZE__034_L =	* - LEVEL_START
      2  37be				  -	      IF	LEVEL_SIZE__034_L > MAX_LEVEL_SIZE
      3  37be				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__034_L
      4  37be					      ENDIF
     65  37be
      0  37be					      CHECK_BANK_SIZE	"LEVELS2"
      1  37be		       07 be	   .TEMP      =	* - BANK_START
 LEVELS2 (2K) SIZE =  $7be , FREE= $42
      2  37be					      ECHO	"LEVELS2", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  37be				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  37be				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  37be				  -	      ERR
      6  37be					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS3.asm LEVEL 2 PASS 3
      0  37be					      include	"BANK_LEVELS3.asm"
      1  37be							;    Sokoboo - a Sokoban implementation
      2  37be							;    using a generic tile-based display engine for the Atari 2600
      3  37be							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  37be							;
      5  37be							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  37be							;
      7  37be							;    Code related to the generic tile-based display engine was developed by
      8  37be							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  37be							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  37be							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  37be							;
     12  37be							;    Code related to music and sound effects uses the TIATracker music player
     13  37be							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  37be							;    directory for Apache licensing details.
     15  37be							;
     16  37be							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  37be							;    See the copyright notices in the License directory for a list of level
     18  37be							;    contributors.
     19  37be							;
     20  37be							;    Except where otherwise indicated, this software is released under the
     21  37be							;    following licensing arrangement...
     22  37be							;
     23  37be							;    This program is free software: you can redistribute it and/or modify
     24  37be							;    it under the terms of the GNU General Public License as published by
     25  37be							;    the Free Software Foundation, either version 3 of the License, or
     26  37be							;    (at your option) any later version.
     27  37be							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  37be
     29  37be							;    This program is distributed in the hope that it will be useful,
     30  37be							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  37be							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  37be							;    GNU General Public License for more details.
     33  37be
      0  37be					      NEWBANK	LEVELS3
      1  3fc7 ????				      SEG	LEVELS3
      2  3800					      ORG	ORIGIN
      3  3800					      RORG	$F000
      4  3800				   BANK_START SET	*
      5  3800				   LEVELS3    SET	ORIGIN / 2048
      6  3800				   ORIGIN     SET	ORIGIN + 2048
      7  3800				   _CURRENT_BANK SET	LEVELS3
     35  3800
      0  3800					      DEFL	_034_R, "-6#3-|-#4-#3-|2#-$.-3#-|#-2$*.$@#-|#-3.#2$2#|4#.4-#|3-3#-#-#|5-#3-#|5-5#"
      0  3800					      START_LEVEL	_034_R
      1  3800				   LEVEL_START SET	*
      2  3800		       00 07	   BANK_LEVEL__034_R =	_CURRENT_BANK
      3  3800				   LEVEL__034_R SUBROUTINE
      4  3800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3800
      2  3800		       2d 36 23 33*	      .byte.b	"-6#3-|-#4-#3-|2#-$.-3#-|#-2$*.$@#-|#-3.#2$2#|4#.4-#|3-3#-#-#|5-#3-#|5-5#",0
      0  3849					      END_LEVEL	_034_R
      1  3849		       00 49	   LEVEL_SIZE__034_R =	* - LEVEL_START
      2  3849				  -	      IF	LEVEL_SIZE__034_R > MAX_LEVEL_SIZE
      3  3849				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__034_R
      4  3849					      ENDIF
      0  3849					      DEFL	_035_L, "5-3#2-|6#.2#-|#@2-2#*.#-|#-3$2.-#-|2#2-$*.$2#|-#-$2-.2-#|-5#3-#|5-5#"
      0  3849					      START_LEVEL	_035_L
      1  3849				   LEVEL_START SET	*
      2  3849		       00 07	   BANK_LEVEL__035_L =	_CURRENT_BANK
      3  3849				   LEVEL__035_L SUBROUTINE
      4  3849				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3849
      2  3849		       35 2d 33 23*	      .byte.b	"5-3#2-|6#.2#-|#@2-2#*.#-|#-3$2.-#-|2#2-$*.$2#|-#-$2-.2-#|-5#3-#|5-5#",0
      0  388e					      END_LEVEL	_035_L
      1  388e		       00 45	   LEVEL_SIZE__035_L =	* - LEVEL_START
      2  388e				  -	      IF	LEVEL_SIZE__035_L > MAX_LEVEL_SIZE
      3  388e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__035_L
      4  388e					      ENDIF
      0  388e					      DEFL	_035_R, "-11#|-#4-@4-#|-#-2$3*$#-#|3#-*.$.-$-#|#3-.*.-4#|#3-2#.2#3-|8#4-"
      0  388e					      START_LEVEL	_035_R
      1  388e				   LEVEL_START SET	*
      2  388e		       00 07	   BANK_LEVEL__035_R =	_CURRENT_BANK
      3  388e				   LEVEL__035_R SUBROUTINE
      4  388e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  388e
      2  388e		       2d 31 31 23*	      .byte.b	"-11#|-#4-@4-#|-#-2$3*$#-#|3#-*.$.-$-#|#3-.*.-4#|#3-2#.2#3-|8#4-",0
      0  38ce					      END_LEVEL	_035_R
      1  38ce		       00 40	   LEVEL_SIZE__035_R =	* - LEVEL_START
      2  38ce				  -	      IF	LEVEL_SIZE__035_R > MAX_LEVEL_SIZE
      3  38ce				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__035_R
      4  38ce					      ENDIF
      0  38ce					      DEFL	_036_L, "5#2-|#3-3#|#*#-$@#|#.2-$-#|#.*2$-#|#2.#2-#|4#2-#|3-4#"
      0  38ce					      START_LEVEL	_036_L
      1  38ce				   LEVEL_START SET	*
      2  38ce		       00 07	   BANK_LEVEL__036_L =	_CURRENT_BANK
      3  38ce				   LEVEL__036_L SUBROUTINE
      4  38ce				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  38ce
      2  38ce		       35 23 32 2d*	      .byte.b	"5#2-|#3-3#|#*#-$@#|#.2-$-#|#.*2$-#|#2.#2-#|4#2-#|3-4#",0
      0  3904					      END_LEVEL	_036_L
      1  3904		       00 36	   LEVEL_SIZE__036_L =	* - LEVEL_START
      2  3904				  -	      IF	LEVEL_SIZE__036_L > MAX_LEVEL_SIZE
      3  3904				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__036_L
      4  3904					      ENDIF
      0  3904					      DEFL	_036_R, "2-5#2-|-2#.2-2#-|-#.*-$-2#|2#2.$-$-#|#.2*.-$@#|#2-$2-$2#|3#4-#-|2-6#-"
      0  3904					      START_LEVEL	_036_R
      1  3904				   LEVEL_START SET	*
      2  3904		       00 07	   BANK_LEVEL__036_R =	_CURRENT_BANK
      3  3904				   LEVEL__036_R SUBROUTINE
      4  3904				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3904
      2  3904		       32 2d 35 23*	      .byte.b	"2-5#2-|-2#.2-2#-|-#.*-$-2#|2#2.$-$-#|#.2*.-$@#|#2-$2-$2#|3#4-#-|2-6#-",0
      0  394a					      END_LEVEL	_036_R
      1  394a		       00 46	   LEVEL_SIZE__036_R =	* - LEVEL_START
      2  394a				  -	      IF	LEVEL_SIZE__036_R > MAX_LEVEL_SIZE
      3  394a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__036_R
      4  394a					      ENDIF
      0  394a					      DEFL	_037_L, "5-6#|6#4-#|#2-#@2.2$-#|#2-$.3*.-#|#3-$.$-$-#|2#2-#.3-2#|-9#-"
      0  394a					      START_LEVEL	_037_L
      1  394a				   LEVEL_START SET	*
      2  394a		       00 07	   BANK_LEVEL__037_L =	_CURRENT_BANK
      3  394a				   LEVEL__037_L SUBROUTINE
      4  394a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  394a
      2  394a		       35 2d 36 23*	      .byte.b	"5-6#|6#4-#|#2-#@2.2$-#|#2-$.3*.-#|#3-$.$-$-#|2#2-#.3-2#|-9#-",0
      0  3987					      END_LEVEL	_037_L
      1  3987		       00 3d	   LEVEL_SIZE__037_L =	* - LEVEL_START
      2  3987				  -	      IF	LEVEL_SIZE__037_L > MAX_LEVEL_SIZE
      3  3987				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__037_L
      4  3987					      ENDIF
      0  3987					      DEFL	_037_R, "9#2-|#7-3#|#-$2-.2*.-#|2#-*.*$3-#|-2#-2*.#2-#|2-2#@$-$-2#|3-3#3-#-|5-5#-"
      0  3987					      START_LEVEL	_037_R
      1  3987				   LEVEL_START SET	*
      2  3987		       00 07	   BANK_LEVEL__037_R =	_CURRENT_BANK
      3  3987				   LEVEL__037_R SUBROUTINE
      4  3987				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3987
      2  3987		       39 23 32 2d*	      .byte.b	"9#2-|#7-3#|#-$2-.2*.-#|2#-*.*$3-#|-2#-2*.#2-#|2-2#@$-$-2#|3-3#3-#-|5-5#-",0
      0  39d0					      END_LEVEL	_037_R
      1  39d0		       00 49	   LEVEL_SIZE__037_R =	* - LEVEL_START
      2  39d0				  -	      IF	LEVEL_SIZE__037_R > MAX_LEVEL_SIZE
      3  39d0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__037_R
      4  39d0					      ENDIF
      0  39d0					      DEFL	_038_L, "6-4#2-|4-3#@-3#|3-2#2.*$2-#|4#.*.*3-#|#2-2$3-$2-#|#5-6#|3#2-2#5-|2-4#6-"
      0  39d0					      START_LEVEL	_038_L
      1  39d0				   LEVEL_START SET	*
      2  39d0		       00 07	   BANK_LEVEL__038_L =	_CURRENT_BANK
      3  39d0				   LEVEL__038_L SUBROUTINE
      4  39d0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  39d0
      2  39d0		       36 2d 34 23*	      .byte.b	"6-4#2-|4-3#@-3#|3-2#2.*$2-#|4#.*.*3-#|#2-2$3-$2-#|#5-6#|3#2-2#5-|2-4#6-",0
      0  3a18					      END_LEVEL	_038_L
      1  3a18		       00 48	   LEVEL_SIZE__038_L =	* - LEVEL_START
      2  3a18				  -	      IF	LEVEL_SIZE__038_L > MAX_LEVEL_SIZE
      3  3a18				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__038_L
      4  3a18					      ENDIF
      0  3a18					      DEFL	_038_R, "6-6#|4-3#.#-@#|2-3#2.*#$-#|3#-.*2.-$-#|#2-2$2-#-3#|#-$2-#-$-#2-|2#5-3#2-|-7#4-"
      0  3a18					      START_LEVEL	_038_R
      1  3a18				   LEVEL_START SET	*
      2  3a18		       00 07	   BANK_LEVEL__038_R =	_CURRENT_BANK
      3  3a18				   LEVEL__038_R SUBROUTINE
      4  3a18				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3a18
      2  3a18		       36 2d 36 23*	      .byte.b	"6-6#|4-3#.#-@#|2-3#2.*#$-#|3#-.*2.-$-#|#2-2$2-#-3#|#-$2-#-$-#2-|2#5-3#2-|-7#4-",0
      0  3a67					      END_LEVEL	_038_R
      1  3a67		       00 4f	   LEVEL_SIZE__038_R =	* - LEVEL_START
      2  3a67				  -	      IF	LEVEL_SIZE__038_R > MAX_LEVEL_SIZE
      3  3a67				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__038_R
      4  3a67					      ENDIF
      0  3a67					      DEFL	_039_L, "-7#2-|-#5-#2-|2#-#-$-#2-|#.2*.-3#-|2#@3*2-2#|-2#-2.$2-#|2-2#$#-$-#|3-#5-#|3-7#"
      0  3a67					      START_LEVEL	_039_L
      1  3a67				   LEVEL_START SET	*
      2  3a67		       00 07	   BANK_LEVEL__039_L =	_CURRENT_BANK
      3  3a67				   LEVEL__039_L SUBROUTINE
      4  3a67				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3a67
      2  3a67		       2d 37 23 32*	      .byte.b	"-7#2-|-#5-#2-|2#-#-$-#2-|#.2*.-3#-|2#@3*2-2#|-2#-2.$2-#|2-2#$#-$-#|3-#5-#|3-7#",0
      0  3ab6					      END_LEVEL	_039_L
      1  3ab6		       00 4f	   LEVEL_SIZE__039_L =	* - LEVEL_START
      2  3ab6				  -	      IF	LEVEL_SIZE__039_L > MAX_LEVEL_SIZE
      3  3ab6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__039_L
      4  3ab6					      ENDIF
      0  3ab6					      DEFL	_039_R, "4-4#4-|3-2#2-3#2-|2-2#-$.2-#2-|3#-.2*-$3#|#-$-4.3-#|#@$3#-#-#-#|2#4-$2-$-#|-5#3-3#|5-5#2-"
      0  3ab6					      START_LEVEL	_039_R
      1  3ab6				   LEVEL_START SET	*
      2  3ab6		       00 07	   BANK_LEVEL__039_R =	_CURRENT_BANK
      3  3ab6				   LEVEL__039_R SUBROUTINE
      4  3ab6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3ab6
      2  3ab6		       34 2d 34 23*	      .byte.b	"4-4#4-|3-2#2-3#2-|2-2#-$.2-#2-|3#-.2*-$3#|#-$-4.3-#|#@$3#-#-#-#|2#4-$2-$-#|-5#3-3#|5-5#2-",0
      0  3b10					      END_LEVEL	_039_R
      1  3b10		       00 5a	   LEVEL_SIZE__039_R =	* - LEVEL_START
      2  3b10					      IF	LEVEL_SIZE__039_R > MAX_LEVEL_SIZE
      3  3b10				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__039_R
      4  3b10					      ENDIF
      0  3b10					      DEFL	_040_L, "6#3-|#3-@#3-|#2-$.3#-|3#$*$.2#|3#-.2*.#|#2-$-.3#|#2-$3-#-|4#3-#-|3-5#-"
      0  3b10					      START_LEVEL	_040_L
      1  3b10				   LEVEL_START SET	*
      2  3b10		       00 07	   BANK_LEVEL__040_L =	_CURRENT_BANK
      3  3b10				   LEVEL__040_L SUBROUTINE
      4  3b10				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3b10
      2  3b10		       36 23 33 2d*	      .byte.b	"6#3-|#3-@#3-|#2-$.3#-|3#$*$.2#|3#-.2*.#|#2-$-.3#|#2-$3-#-|4#3-#-|3-5#-",0
      0  3b57					      END_LEVEL	_040_L
      1  3b57		       00 47	   LEVEL_SIZE__040_L =	* - LEVEL_START
      2  3b57				  -	      IF	LEVEL_SIZE__040_L > MAX_LEVEL_SIZE
      3  3b57				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__040_L
      4  3b57					      ENDIF
      0  3b57					      DEFL	_040_R, "5-4#-|-5#2-2#|2#.-$2-$-#|#-2.*.$#@#|#-*-.2-$-#|2#-$*-4#|-#3-2#3-|-5#4-"
      0  3b57					      START_LEVEL	_040_R
      1  3b57				   LEVEL_START SET	*
      2  3b57		       00 07	   BANK_LEVEL__040_R =	_CURRENT_BANK
      3  3b57				   LEVEL__040_R SUBROUTINE
      4  3b57				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3b57
      2  3b57		       35 2d 34 23*	      .byte.b	"5-4#-|-5#2-2#|2#.-$2-$-#|#-2.*.$#@#|#-*-.2-$-#|2#-$*-4#|-#3-2#3-|-5#4-",0
      0  3b9e					      END_LEVEL	_040_R
      1  3b9e		       00 47	   LEVEL_SIZE__040_R =	* - LEVEL_START
      2  3b9e				  -	      IF	LEVEL_SIZE__040_R > MAX_LEVEL_SIZE
      3  3b9e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__040_R
      4  3b9e					      ENDIF
     49  3b9e
      0  3b9e					      DEFL	_041_L, "4-3#5-|4-#.4#2-|5#*.$-#2-|#4-3.-3#|#-3$-*.$2-#|2#-@2#.$-$-#|-5#4-2#|5-6#-"
      0  3b9e					      START_LEVEL	_041_L
      1  3b9e				   LEVEL_START SET	*
      2  3b9e		       00 07	   BANK_LEVEL__041_L =	_CURRENT_BANK
      3  3b9e				   LEVEL__041_L SUBROUTINE
      4  3b9e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3b9e
      2  3b9e		       34 2d 33 23*	      .byte.b	"4-3#5-|4-#.4#2-|5#*.$-#2-|#4-3.-3#|#-3$-*.$2-#|2#-@2#.$-$-#|-5#4-2#|5-6#-",0
      0  3be8					      END_LEVEL	_041_L
      1  3be8		       00 4a	   LEVEL_SIZE__041_L =	* - LEVEL_START
      2  3be8				  -	      IF	LEVEL_SIZE__041_L > MAX_LEVEL_SIZE
      3  3be8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__041_L
      4  3be8					      ENDIF
      0  3be8					      DEFL	_041_R, "-4#3-|2#2-3#-|#-@2$-#-|#-$-#.#-|2#$-2.2#|#2-$*2.#|#2-$-*2#|#3-#.#-|7#-"
      0  3be8					      START_LEVEL	_041_R
      1  3be8				   LEVEL_START SET	*
      2  3be8		       00 07	   BANK_LEVEL__041_R =	_CURRENT_BANK
      3  3be8				   LEVEL__041_R SUBROUTINE
      4  3be8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3be8
      2  3be8		       2d 34 23 33*	      .byte.b	"-4#3-|2#2-3#-|#-@2$-#-|#-$-#.#-|2#$-2.2#|#2-$*2.#|#2-$-*2#|#3-#.#-|7#-",0
      0  3c2f					      END_LEVEL	_041_R
      1  3c2f		       00 47	   LEVEL_SIZE__041_R =	* - LEVEL_START
      2  3c2f				  -	      IF	LEVEL_SIZE__041_R > MAX_LEVEL_SIZE
      3  3c2f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__041_R
      4  3c2f					      ENDIF
      0  3c2f					      DEFL	_042_L, "8#4-|#6-#4-|#-#-$*-#4-|#-#-#.3#3-|#3-#2.-3#-|#3-2*4-2#|5#.-3$-#|4-4#2-@#|7-5#"
      0  3c2f					      START_LEVEL	_042_L
      1  3c2f				   LEVEL_START SET	*
      2  3c2f		       00 07	   BANK_LEVEL__042_L =	_CURRENT_BANK
      3  3c2f				   LEVEL__042_L SUBROUTINE
      4  3c2f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3c2f
      2  3c2f		       38 23 34 2d*	      .byte.b	"8#4-|#6-#4-|#-#-$*-#4-|#-#-#.3#3-|#3-#2.-3#-|#3-2*4-2#|5#.-3$-#|4-4#2-@#|7-5#",0
      0  3c7d					      END_LEVEL	_042_L
      1  3c7d		       00 4e	   LEVEL_SIZE__042_L =	* - LEVEL_START
      2  3c7d				  -	      IF	LEVEL_SIZE__042_L > MAX_LEVEL_SIZE
      3  3c7d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__042_L
      4  3c7d					      ENDIF
      0  3c7d					      DEFL	_042_R, "3-5#4-|2-2#3-#4-|2-#-$-$#4-|3#-*.-2#3-|#@$-#.$-2#2-|#-$2-.*.-3#|3#2.*-$3-#|2-6#3-#|7-5#"
      0  3c7d					      START_LEVEL	_042_R
      1  3c7d				   LEVEL_START SET	*
      2  3c7d		       00 07	   BANK_LEVEL__042_R =	_CURRENT_BANK
      3  3c7d				   LEVEL__042_R SUBROUTINE
      4  3c7d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3c7d
      2  3c7d		       33 2d 35 23*	      .byte.b	"3-5#4-|2-2#3-#4-|2-#-$-$#4-|3#-*.-2#3-|#@$-#.$-2#2-|#-$2-.*.-3#|3#2.*-$3-#|2-6#3-#|7-5#",0
      0  3cd5					      END_LEVEL	_042_R
      1  3cd5		       00 58	   LEVEL_SIZE__042_R =	* - LEVEL_START
      2  3cd5				  -	      IF	LEVEL_SIZE__042_R > MAX_LEVEL_SIZE
      3  3cd5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__042_R
      4  3cd5					      ENDIF
      0  3cd5					      DEFL	_043_L, "-8#4-|-#@$.-.-5#|-#2$*.2*.3-#|2#2-$-.2-#$-#|#-$-2#.#3-2#|#3-8#-|#2-2#8-|4#9-"
      0  3cd5					      START_LEVEL	_043_L
      1  3cd5				   LEVEL_START SET	*
      2  3cd5		       00 07	   BANK_LEVEL__043_L =	_CURRENT_BANK
      3  3cd5				   LEVEL__043_L SUBROUTINE
      4  3cd5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3cd5
      2  3cd5		       2d 38 23 34*	      .byte.b	"-8#4-|-#@$.-.-5#|-#2$*.2*.3-#|2#2-$-.2-#$-#|#-$-2#.#3-2#|#3-8#-|#2-2#8-|4#9-",0
      0  3d22					      END_LEVEL	_043_L
      1  3d22		       00 4d	   LEVEL_SIZE__043_L =	* - LEVEL_START
      2  3d22				  -	      IF	LEVEL_SIZE__043_L > MAX_LEVEL_SIZE
      3  3d22				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__043_L
      4  3d22					      ENDIF
      0  3d22					      DEFL	_043_R, "2-6#-|-2#4-#-|2#@$-#-#-|#-$#$2.#-|#*.*2.*2#|#-$2-$2.#|#-$-$2-2#|#4-3#-|6#3-"
      0  3d22					      START_LEVEL	_043_R
      1  3d22				   LEVEL_START SET	*
      2  3d22		       00 07	   BANK_LEVEL__043_R =	_CURRENT_BANK
      3  3d22				   LEVEL__043_R SUBROUTINE
      4  3d22				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3d22
      2  3d22		       32 2d 36 23*	      .byte.b	"2-6#-|-2#4-#-|2#@$-#-#-|#-$#$2.#-|#*.*2.*2#|#-$2-$2.#|#-$-$2-2#|#4-3#-|6#3-",0
      0  3d6e					      END_LEVEL	_043_R
      1  3d6e		       00 4c	   LEVEL_SIZE__043_R =	* - LEVEL_START
      2  3d6e				  -	      IF	LEVEL_SIZE__043_R > MAX_LEVEL_SIZE
      3  3d6e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__043_R
      4  3d6e					      ENDIF
      0  3d6e					      DEFL	_044_L, "7#-|#@4-#-|#$-.2$#-|#3.*-2#|#*$2*2-#|#3-#2-#|#3-#2-#|8#"
      0  3d6e					      START_LEVEL	_044_L
      1  3d6e				   LEVEL_START SET	*
      2  3d6e		       00 07	   BANK_LEVEL__044_L =	_CURRENT_BANK
      3  3d6e				   LEVEL__044_L SUBROUTINE
      4  3d6e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3d6e
      2  3d6e		       37 23 2d 7c*	      .byte.b	"7#-|#@4-#-|#$-.2$#-|#3.*-2#|#*$2*2-#|#3-#2-#|#3-#2-#|8#",0
      0  3da6					      END_LEVEL	_044_L
      1  3da6		       00 38	   LEVEL_SIZE__044_L =	* - LEVEL_START
      2  3da6				  -	      IF	LEVEL_SIZE__044_L > MAX_LEVEL_SIZE
      3  3da6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__044_L
      4  3da6					      ENDIF
      0  3da6					      DEFL	_044_R, "4#-4#-|#2-3#2-#-|#@$2-#-$2#|#$*$5-#|#-*2.$2#-#|#3.#4-#|2#-.-$4#|-3#2-#3-|3-4#3-"
      0  3da6					      START_LEVEL	_044_R
      1  3da6				   LEVEL_START SET	*
      2  3da6		       00 07	   BANK_LEVEL__044_R =	_CURRENT_BANK
      3  3da6				   LEVEL__044_R SUBROUTINE
      4  3da6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3da6
      2  3da6		       34 23 2d 34*	      .byte.b	"4#-4#-|#2-3#2-#-|#@$2-#-$2#|#$*$5-#|#-*2.$2#-#|#3.#4-#|2#-.-$4#|-3#2-#3-|3-4#3-",0
      0  3df6					      END_LEVEL	_044_R
      1  3df6		       00 50	   LEVEL_SIZE__044_R =	* - LEVEL_START
      2  3df6				  -	      IF	LEVEL_SIZE__044_R > MAX_LEVEL_SIZE
      3  3df6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__044_R
      4  3df6					      ENDIF
      0  3df6					      DEFL	_045_L, "3-4#2-|3-#2.3#|4#$.$-#|#@-#-.*-#|#-$2-2*.#|2#-$-*2-#|-2#-$3-#|2-2#2-3#|3-4#2-"
      0  3df6					      START_LEVEL	_045_L
      1  3df6				   LEVEL_START SET	*
      2  3df6		       00 07	   BANK_LEVEL__045_L =	_CURRENT_BANK
      3  3df6				   LEVEL__045_L SUBROUTINE
      4  3df6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3df6
      2  3df6		       33 2d 34 23*	      .byte.b	"3-4#2-|3-#2.3#|4#$.$-#|#@-#-.*-#|#-$2-2*.#|2#-$-*2-#|-2#-$3-#|2-2#2-3#|3-4#2-",0
      0  3e44					      END_LEVEL	_045_L
      1  3e44		       00 4e	   LEVEL_SIZE__045_L =	* - LEVEL_START
      2  3e44				  -	      IF	LEVEL_SIZE__045_L > MAX_LEVEL_SIZE
      3  3e44				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__045_L
      4  3e44					      ENDIF
      0  3e44					      DEFL	_045_R, "3-6#2-|4#4-#2-|#-$-$2#-3#|#-2$-$-$2-#|#-5.#$-#|#-.*#$2.2-#|2#.-$@5#|-6#4-"
      0  3e44					      START_LEVEL	_045_R
      1  3e44				   LEVEL_START SET	*
      2  3e44		       00 07	   BANK_LEVEL__045_R =	_CURRENT_BANK
      3  3e44				   LEVEL__045_R SUBROUTINE
      4  3e44				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3e44
      2  3e44		       33 2d 36 23*	      .byte.b	"3-6#2-|4#4-#2-|#-$-$2#-3#|#-2$-$-$2-#|#-5.#$-#|#-.*#$2.2-#|2#.-$@5#|-6#4-",0
      0  3e8e					      END_LEVEL	_045_R
      1  3e8e		       00 4a	   LEVEL_SIZE__045_R =	* - LEVEL_START
      2  3e8e				  -	      IF	LEVEL_SIZE__045_R > MAX_LEVEL_SIZE
      3  3e8e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__045_R
      4  3e8e					      ENDIF
      0  3e8e					      DEFL	_046_L, "10#-|#@3-#3-2#|#-#*$2-2$-#|#-*.$-$3-#|3#.*$-#2-#|2-#.*.-4#|2-#2.-2#3-|2-5#4-"
      0  3e8e					      START_LEVEL	_046_L
      1  3e8e				   LEVEL_START SET	*
      2  3e8e		       00 07	   BANK_LEVEL__046_L =	_CURRENT_BANK
      3  3e8e				   LEVEL__046_L SUBROUTINE
      4  3e8e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3e8e
      2  3e8e		       31 30 23 2d*	      .byte.b	"10#-|#@3-#3-2#|#-#*$2-2$-#|#-*.$-$3-#|3#.*$-#2-#|2-#.*.-4#|2-#2.-2#3-|2-5#4-",0
      0  3edb					      END_LEVEL	_046_L
      1  3edb		       00 4d	   LEVEL_SIZE__046_L =	* - LEVEL_START
      2  3edb				  -	      IF	LEVEL_SIZE__046_L > MAX_LEVEL_SIZE
      3  3edb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__046_L
      4  3edb					      ENDIF
      0  3edb					      DEFL	_046_R, "8#3-|#3-4#3-|#-$2-$@3#-|#2-5$-#-|3#3.*2.2#|2-2#2-$3.#|3-#2-5#|3-4#4-"
      0  3edb					      START_LEVEL	_046_R
      1  3edb				   LEVEL_START SET	*
      2  3edb		       00 07	   BANK_LEVEL__046_R =	_CURRENT_BANK
      3  3edb				   LEVEL__046_R SUBROUTINE
      4  3edb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3edb
      2  3edb		       38 23 33 2d*	      .byte.b	"8#3-|#3-4#3-|#-$2-$@3#-|#2-5$-#-|3#3.*2.2#|2-2#2-$3.#|3-#2-5#|3-4#4-",0
      0  3f20					      END_LEVEL	_046_R
      1  3f20		       00 45	   LEVEL_SIZE__046_R =	* - LEVEL_START
      2  3f20				  -	      IF	LEVEL_SIZE__046_R > MAX_LEVEL_SIZE
      3  3f20				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__046_R
      4  3f20					      ENDIF
      0  3f20					      DEFL	_047_L, "5-3#5-|3-3#.#5-|2-2#2-.#5-|2-#-$#.6#|3#3-.2#3-#|#-$@2*.$-$#-#|#4-2#-$3-#|8#3-2#|7-5#-"
      0  3f20					      START_LEVEL	_047_L
      1  3f20				   LEVEL_START SET	*
      2  3f20		       00 07	   BANK_LEVEL__047_L =	_CURRENT_BANK
      3  3f20				   LEVEL__047_L SUBROUTINE
      4  3f20				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3f20
      2  3f20		       35 2d 33 23*	      .byte.b	"5-3#5-|3-3#.#5-|2-2#2-.#5-|2-#-$#.6#|3#3-.2#3-#|#-$@2*.$-$#-#|#4-2#-$3-#|8#3-2#|7-5#-",0
      0  3f76					      END_LEVEL	_047_L
      1  3f76		       00 56	   LEVEL_SIZE__047_L =	* - LEVEL_START
      2  3f76				  -	      IF	LEVEL_SIZE__047_L > MAX_LEVEL_SIZE
      3  3f76				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__047_L
      4  3f76					      ENDIF
      0  3f76					      DEFL	_047_R, "4-6#|3-2#3-@#|-3#-3$-#|-#.2-#-$-#|2#.*2-$2-#|#2.-2$#-2#|2#2.#-3#-|-#.3-#3-|-6#3-"
      0  3f76					      START_LEVEL	_047_R
      1  3f76				   LEVEL_START SET	*
      2  3f76		       00 07	   BANK_LEVEL__047_R =	_CURRENT_BANK
      3  3f76				   LEVEL__047_R SUBROUTINE
      4  3f76				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3f76
      2  3f76		       34 2d 36 23*	      .byte.b	"4-6#|3-2#3-@#|-3#-3$-#|-#.2-#-$-#|2#.*2-$2-#|#2.-2$#-2#|2#2.#-3#-|-#.3-#3-|-6#3-",0
      0  3fc7					      END_LEVEL	_047_R
      1  3fc7		       00 51	   LEVEL_SIZE__047_R =	* - LEVEL_START
      2  3fc7				  -	      IF	LEVEL_SIZE__047_R > MAX_LEVEL_SIZE
      3  3fc7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__047_R
      4  3fc7					      ENDIF
     64  3fc7
     65  3fc7
     66  3fc7
      0  3fc7					      CHECK_BANK_SIZE	"LEVELS3 -- full 2K"
      1  3fc7		       07 c7	   .TEMP      =	* - BANK_START
 LEVELS3 -- full 2K (2K) SIZE =  $7c7 , FREE= $39
      2  3fc7					      ECHO	"LEVELS3 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  3fc7				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  3fc7				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  3fc7				  -	      ERR
      6  3fc7					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS4.asm LEVEL 2 PASS 3
      0  3fc7					      include	"BANK_LEVELS4.asm"
      1  3fc7							;    Sokoboo - a Sokoban implementation
      2  3fc7							;    using a generic tile-based display engine for the Atari 2600
      3  3fc7							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  3fc7							;
      5  3fc7							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  3fc7							;
      7  3fc7							;    Code related to the generic tile-based display engine was developed by
      8  3fc7							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  3fc7							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  3fc7							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  3fc7							;
     12  3fc7							;    Code related to music and sound effects uses the TIATracker music player
     13  3fc7							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  3fc7							;    directory for Apache licensing details.
     15  3fc7							;
     16  3fc7							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  3fc7							;    See the copyright notices in the License directory for a list of level
     18  3fc7							;    contributors.
     19  3fc7							;
     20  3fc7							;    Except where otherwise indicated, this software is released under the
     21  3fc7							;    following licensing arrangement...
     22  3fc7							;
     23  3fc7							;    This program is free software: you can redistribute it and/or modify
     24  3fc7							;    it under the terms of the GNU General Public License as published by
     25  3fc7							;    the Free Software Foundation, either version 3 of the License, or
     26  3fc7							;    (at your option) any later version.
     27  3fc7							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  3fc7
     29  3fc7							;    This program is distributed in the hope that it will be useful,
     30  3fc7							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  3fc7							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  3fc7							;    GNU General Public License for more details.
     33  3fc7
     34  3fc7							; level definitions
     35  3fc7							; Sample level definitions.
     36  3fc7							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  3fc7							; have as many banks as you like.
     38  3fc7
      0  3fc7					      NEWBANK	LEVELS4
      1  474a ????				      SEG	LEVELS4
      2  4000					      ORG	ORIGIN
      3  4000					      RORG	$F000
      4  4000				   BANK_START SET	*
      5  4000				   LEVELS4    SET	ORIGIN / 2048
      6  4000				   ORIGIN     SET	ORIGIN + 2048
      7  4000				   _CURRENT_BANK SET	LEVELS4
     40  4000
      0  4000					      DEFL	_048_L, "2-7#-|2-#5-2#|3#$2-#2-#|#-$.3-$-#|#.2*2-4#|#+.#-2#3-|2#$3-#3-|-#4-#3-|-6#3-"
      0  4000					      START_LEVEL	_048_L
      1  4000				   LEVEL_START SET	*
      2  4000		       00 08	   BANK_LEVEL__048_L =	_CURRENT_BANK
      3  4000				   LEVEL__048_L SUBROUTINE
      4  4000				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4000
      2  4000		       32 2d 37 23*	      .byte.b	"2-7#-|2-#5-2#|3#$2-#2-#|#-$.3-$-#|#.2*2-4#|#+.#-2#3-|2#$3-#3-|-#4-#3-|-6#3-",0
      0  404c					      END_LEVEL	_048_L
      1  404c		       00 4c	   LEVEL_SIZE__048_L =	* - LEVEL_START
      2  404c				  -	      IF	LEVEL_SIZE__048_L > MAX_LEVEL_SIZE
      3  404c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__048_L
      4  404c					      ENDIF
      0  404c					      DEFL	_048_R, "5-5#|2-4#3-#|3#-.$-$-#|#2-*3.3#|#2-*.-4#|2#2$*$3-#|-#@$.4-#|-4#2-3#|4-4#2-"
      0  404c					      START_LEVEL	_048_R
      1  404c				   LEVEL_START SET	*
      2  404c		       00 08	   BANK_LEVEL__048_R =	_CURRENT_BANK
      3  404c				   LEVEL__048_R SUBROUTINE
      4  404c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  404c
      2  404c		       35 2d 35 23*	      .byte.b	"5-5#|2-4#3-#|3#-.$-$-#|#2-*3.3#|#2-*.-4#|2#2$*$3-#|-#@$.4-#|-4#2-3#|4-4#2-",0
      0  4097					      END_LEVEL	_048_R
      1  4097		       00 4b	   LEVEL_SIZE__048_R =	* - LEVEL_START
      2  4097				  -	      IF	LEVEL_SIZE__048_R > MAX_LEVEL_SIZE
      3  4097				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__048_R
      4  4097					      ENDIF
      0  4097					      DEFL	_049_L, "4#7-|#2-4#4-|#2-$2-5#|#-$-#-4.#|2#-2$-.-.2#|-#$-#-*#-#-|-#-@#$-#-#-|-4#4-#-|4-6#-"
      0  4097					      START_LEVEL	_049_L
      1  4097				   LEVEL_START SET	*
      2  4097		       00 08	   BANK_LEVEL__049_L =	_CURRENT_BANK
      3  4097				   LEVEL__049_L SUBROUTINE
      4  4097				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4097
      2  4097		       34 23 37 2d*	      .byte.b	"4#7-|#2-4#4-|#2-$2-5#|#-$-#-4.#|2#-2$-.-.2#|-#$-#-*#-#-|-#-@#$-#-#-|-4#4-#-|4-6#-",0
      0  40e9					      END_LEVEL	_049_L
      1  40e9		       00 52	   LEVEL_SIZE__049_L =	* - LEVEL_START
      2  40e9				  -	      IF	LEVEL_SIZE__049_L > MAX_LEVEL_SIZE
      3  40e9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__049_L
      4  40e9					      ENDIF
      0  40e9					      DEFL	_049_R, "8#2-|#6-3#|#-$2#$.*-#|#-$-$2.*+#|#3-#2.$-#|#-2$#-.3#|2#5-#2-|-7#2-"
      0  40e9					      START_LEVEL	_049_R
      1  40e9				   LEVEL_START SET	*
      2  40e9		       00 08	   BANK_LEVEL__049_R =	_CURRENT_BANK
      3  40e9				   LEVEL__049_R SUBROUTINE
      4  40e9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  40e9
      2  40e9		       38 23 32 2d*	      .byte.b	"8#2-|#6-3#|#-$2#$.*-#|#-$-$2.*+#|#3-#2.$-#|#-2$#-.3#|2#5-#2-|-7#2-",0
      0  412c					      END_LEVEL	_049_R
      1  412c		       00 43	   LEVEL_SIZE__049_R =	* - LEVEL_START
      2  412c				  -	      IF	LEVEL_SIZE__049_R > MAX_LEVEL_SIZE
      3  412c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__049_R
      4  412c					      ENDIF
     45  412c
      0  412c					      DEFL	_050_L, "4-5#3-|4-#-@-#3-|4-#$.$2#2-|-4#-*2-#2-|2#4-*.*3#|#2-$-#2.-$-#|#3-3#4-#|5#-6#"
      0  412c					      START_LEVEL	_050_L
      1  412c				   LEVEL_START SET	*
      2  412c		       00 08	   BANK_LEVEL__050_L =	_CURRENT_BANK
      3  412c				   LEVEL__050_L SUBROUTINE
      4  412c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  412c
      2  412c		       34 2d 35 23*	      .byte.b	"4-5#3-|4-#-@-#3-|4-#$.$2#2-|-4#-*2-#2-|2#4-*.*3#|#2-$-#2.-$-#|#3-3#4-#|5#-6#",0
      0  4179					      END_LEVEL	_050_L
      1  4179		       00 4d	   LEVEL_SIZE__050_L =	* - LEVEL_START
      2  4179				  -	      IF	LEVEL_SIZE__050_L > MAX_LEVEL_SIZE
      3  4179				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__050_L
      4  4179					      ENDIF
      0  4179					      DEFL	_050_R, "8#|#4-@-#|#2-$*2$#|#-$*2.-#|#*2.$*.#|#2-*#2-#|#-$.3-#|8#"
      0  4179					      START_LEVEL	_050_R
      1  4179				   LEVEL_START SET	*
      2  4179		       00 08	   BANK_LEVEL__050_R =	_CURRENT_BANK
      3  4179				   LEVEL__050_R SUBROUTINE
      4  4179				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4179
      2  4179		       38 23 7c 23*	      .byte.b	"8#|#4-@-#|#2-$*2$#|#-$*2.-#|#*2.$*.#|#2-*#2-#|#-$.3-#|8#",0
      0  41b2					      END_LEVEL	_050_R
      1  41b2		       00 39	   LEVEL_SIZE__050_R =	* - LEVEL_START
      2  41b2				  -	      IF	LEVEL_SIZE__050_R > MAX_LEVEL_SIZE
      3  41b2				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__050_R
      4  41b2					      ENDIF
      0  41b2					      DEFL	_051_L, "-6#4-|-#2-@-#4-|-#$-*-2#3-|2#-3*.#3-|#2-.*.-#3-|#-#2$2.4#|#4-$-$2-#|3#2-2#3-#|2-9#"
      0  41b2					      START_LEVEL	_051_L
      1  41b2				   LEVEL_START SET	*
      2  41b2		       00 08	   BANK_LEVEL__051_L =	_CURRENT_BANK
      3  41b2				   LEVEL__051_L SUBROUTINE
      4  41b2				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  41b2
      2  41b2		       2d 36 23 34*	      .byte.b	"-6#4-|-#2-@-#4-|-#$-*-2#3-|2#-3*.#3-|#2-.*.-#3-|#-#2$2.4#|#4-$-$2-#|3#2-2#3-#|2-9#",0
      0  4205					      END_LEVEL	_051_L
      1  4205		       00 53	   LEVEL_SIZE__051_L =	* - LEVEL_START
      2  4205				  -	      IF	LEVEL_SIZE__051_L > MAX_LEVEL_SIZE
      3  4205				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__051_L
      4  4205					      ENDIF
      0  4205					      DEFL	_051_R, "-8#-|-#3-#2-#-|2#$-.$2-2#|#-$.*#$2-#|#-*.3-#-#|#3.#$3-#|3#-$@4#|2-#2-2#3-|2-4#4-"
      0  4205					      START_LEVEL	_051_R
      1  4205				   LEVEL_START SET	*
      2  4205		       00 08	   BANK_LEVEL__051_R =	_CURRENT_BANK
      3  4205				   LEVEL__051_R SUBROUTINE
      4  4205				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4205
      2  4205		       2d 38 23 2d*	      .byte.b	"-8#-|-#3-#2-#-|2#$-.$2-2#|#-$.*#$2-#|#-*.3-#-#|#3.#$3-#|3#-$@4#|2-#2-2#3-|2-4#4-",0
      0  4256					      END_LEVEL	_051_R
      1  4256		       00 51	   LEVEL_SIZE__051_R =	* - LEVEL_START
      2  4256				  -	      IF	LEVEL_SIZE__051_R > MAX_LEVEL_SIZE
      3  4256				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__051_R
      4  4256					      ENDIF
      0  4256					      DEFL	_052_L, "5#6-|#.*.2#5-|#@*2.6#|#-*-2$4-#|2#-$3-$2-#|-3#2-5#|3-4#4-"
      0  4256					      START_LEVEL	_052_L
      1  4256				   LEVEL_START SET	*
      2  4256		       00 08	   BANK_LEVEL__052_L =	_CURRENT_BANK
      3  4256				   LEVEL__052_L SUBROUTINE
      4  4256				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4256
      2  4256		       35 23 36 2d*	      .byte.b	"5#6-|#.*.2#5-|#@*2.6#|#-*-2$4-#|2#-$3-$2-#|-3#2-5#|3-4#4-",0
      0  4290					      END_LEVEL	_052_L
      1  4290		       00 3a	   LEVEL_SIZE__052_L =	* - LEVEL_START
      2  4290				  -	      IF	LEVEL_SIZE__052_L > MAX_LEVEL_SIZE
      3  4290				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__052_L
      4  4290					      ENDIF
      0  4290					      DEFL	_052_R, "2-7#|2-#4-@#|2-#-2$2-#|4#*.$-#|#3.*.$2#|#-#-#2-#-|#2-$3-#-|5#2-#-|4-4#-"
      0  4290					      START_LEVEL	_052_R
      1  4290				   LEVEL_START SET	*
      2  4290		       00 08	   BANK_LEVEL__052_R =	_CURRENT_BANK
      3  4290				   LEVEL__052_R SUBROUTINE
      4  4290				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4290
      2  4290		       32 2d 37 23*	      .byte.b	"2-7#|2-#4-@#|2-#-2$2-#|4#*.$-#|#3.*.$2#|#-#-#2-#-|#2-$3-#-|5#2-#-|4-4#-",0
      0  42d8					      END_LEVEL	_052_R
      1  42d8		       00 48	   LEVEL_SIZE__052_R =	* - LEVEL_START
      2  42d8				  -	      IF	LEVEL_SIZE__052_R > MAX_LEVEL_SIZE
      3  42d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__052_R
      4  42d8					      ENDIF
      0  42d8					      DEFL	_053_L, "6#6-|#4-4#3-|#2-2$-$-#3-|#2-#-#.-2#2-|2#$#-$.*.3#|-#@$2-.#2.-#|-4#6-#|4-4#2-2#|7-4#-"
      0  42d8					      START_LEVEL	_053_L
      1  42d8				   LEVEL_START SET	*
      2  42d8		       00 08	   BANK_LEVEL__053_L =	_CURRENT_BANK
      3  42d8				   LEVEL__053_L SUBROUTINE
      4  42d8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  42d8
      2  42d8		       36 23 36 2d*	      .byte.b	"6#6-|#4-4#3-|#2-2$-$-#3-|#2-#-#.-2#2-|2#$#-$.*.3#|-#@$2-.#2.-#|-4#6-#|4-4#2-2#|7-4#-",0
      0  432d					      END_LEVEL	_053_L
      1  432d		       00 55	   LEVEL_SIZE__053_L =	* - LEVEL_START
      2  432d				  -	      IF	LEVEL_SIZE__053_L > MAX_LEVEL_SIZE
      3  432d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__053_L
      4  432d					      ENDIF
      0  432d					      DEFL	_053_R, "5-5#|3-3#3-#|-3#3-#-#|2#.$.*2$-#|#2.*3.#-#|2#2$-.-$-#|-#-2$5#|-#@2-#4-|-5#4-"
      0  432d					      START_LEVEL	_053_R
      1  432d				   LEVEL_START SET	*
      2  432d		       00 08	   BANK_LEVEL__053_R =	_CURRENT_BANK
      3  432d				   LEVEL__053_R SUBROUTINE
      4  432d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  432d
      2  432d		       35 2d 35 23*	      .byte.b	"5-5#|3-3#3-#|-3#3-#-#|2#.$.*2$-#|#2.*3.#-#|2#2$-.-$-#|-#-2$5#|-#@2-#4-|-5#4-",0
      0  437a					      END_LEVEL	_053_R
      1  437a		       00 4d	   LEVEL_SIZE__053_R =	* - LEVEL_START
      2  437a				  -	      IF	LEVEL_SIZE__053_R > MAX_LEVEL_SIZE
      3  437a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__053_R
      4  437a					      ENDIF
      0  437a					      DEFL	_054_L, "-8#2-|2#@-.*.-#2-|#-2$#*2-3#|#3-$2.*2-#|3#2-$.$2-#|-#-$-#.4#|-#3-3#3-|-5#5-"
      0  437a					      START_LEVEL	_054_L
      1  437a				   LEVEL_START SET	*
      2  437a		       00 08	   BANK_LEVEL__054_L =	_CURRENT_BANK
      3  437a				   LEVEL__054_L SUBROUTINE
      4  437a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  437a
      2  437a		       2d 38 23 32*	      .byte.b	"-8#2-|2#@-.*.-#2-|#-2$#*2-3#|#3-$2.*2-#|3#2-$.$2-#|-#-$-#.4#|-#3-3#3-|-5#5-",0
      0  43c6					      END_LEVEL	_054_L
      1  43c6		       00 4c	   LEVEL_SIZE__054_L =	* - LEVEL_START
      2  43c6				  -	      IF	LEVEL_SIZE__054_L > MAX_LEVEL_SIZE
      3  43c6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__054_L
      4  43c6					      ENDIF
      0  43c6					      DEFL	_054_R, "2-4#5-|3#2-6#|#-$-.#.-$-#|#2-$3.2$@#|#2-.*$.-$-#|3#$.-5#|2-#3-#4-|2-5#4-"
      0  43c6					      START_LEVEL	_054_R
      1  43c6				   LEVEL_START SET	*
      2  43c6		       00 08	   BANK_LEVEL__054_R =	_CURRENT_BANK
      3  43c6				   LEVEL__054_R SUBROUTINE
      4  43c6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  43c6
      2  43c6		       32 2d 34 23*	      .byte.b	"2-4#5-|3#2-6#|#-$-.#.-$-#|#2-$3.2$@#|#2-.*$.-$-#|3#$.-5#|2-#3-#4-|2-5#4-",0
      0  440f					      END_LEVEL	_054_R
      1  440f		       00 49	   LEVEL_SIZE__054_R =	* - LEVEL_START
      2  440f				  -	      IF	LEVEL_SIZE__054_R > MAX_LEVEL_SIZE
      3  440f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__054_R
      4  440f					      ENDIF
      0  440f					      DEFL	_055_L, "2-4#6-|2-#2-2#5-|3#2.-#-4#|#-$.*-#-#2-#|#-$*.*3#$-#|#2-$3.4-#|#3-2$#$3-#|4#-@#2-3#|3-7#2-"
      0  440f					      START_LEVEL	_055_L
      1  440f				   LEVEL_START SET	*
      2  440f		       00 08	   BANK_LEVEL__055_L =	_CURRENT_BANK
      3  440f				   LEVEL__055_L SUBROUTINE
      4  440f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  440f
      2  440f		       32 2d 34 23*	      .byte.b	"2-4#6-|2-#2-2#5-|3#2.-#-4#|#-$.*-#-#2-#|#-$*.*3#$-#|#2-$3.4-#|#3-2$#$3-#|4#-@#2-3#|3-7#2-",0
      0  4469					      END_LEVEL	_055_L
      1  4469		       00 5a	   LEVEL_SIZE__055_L =	* - LEVEL_START
      2  4469				  -	      IF	LEVEL_SIZE__055_L > MAX_LEVEL_SIZE
      3  4469				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__055_L
      4  4469					      ENDIF
      0  4469					      DEFL	_055_R, "5-4#2-|5-#2-#2-|-5#2-2#-|-#2-$2-$-2#|2#$-.#4-#|#3-*#$#$-#|#2-*2.-$@2#|2#3.-4#-|-6#4-"
      0  4469					      START_LEVEL	_055_R
      1  4469				   LEVEL_START SET	*
      2  4469		       00 08	   BANK_LEVEL__055_R =	_CURRENT_BANK
      3  4469				   LEVEL__055_R SUBROUTINE
      4  4469				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4469
      2  4469		       35 2d 34 23*	      .byte.b	"5-4#2-|5-#2-#2-|-5#2-2#-|-#2-$2-$-2#|2#$-.#4-#|#3-*#$#$-#|#2-*2.-$@2#|2#3.-4#-|-6#4-",0
      0  44be					      END_LEVEL	_055_R
      1  44be		       00 55	   LEVEL_SIZE__055_R =	* - LEVEL_START
      2  44be				  -	      IF	LEVEL_SIZE__055_R > MAX_LEVEL_SIZE
      3  44be				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__055_R
      4  44be					      ENDIF
      0  44be					      DEFL	_056_L, "6-5#-|6-#3-#-|-6#$#-#-|2#.*.#2-#-2#|#2-3.*@$2-#|#2-*.#-2$2-#|#-2$-3#3-#|#2-3#-#3-#|4#3-5#"
      0  44be					      START_LEVEL	_056_L
      1  44be				   LEVEL_START SET	*
      2  44be		       00 08	   BANK_LEVEL__056_L =	_CURRENT_BANK
      3  44be				   LEVEL__056_L SUBROUTINE
      4  44be				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  44be
      2  44be		       36 2d 35 23*	      .byte.b	"6-5#-|6-#3-#-|-6#$#-#-|2#.*.#2-#-2#|#2-3.*@$2-#|#2-*.#-2$2-#|#-2$-3#3-#|#2-3#-#3-#|4#3-5#",0
      0  4518					      END_LEVEL	_056_L
      1  4518		       00 5a	   LEVEL_SIZE__056_L =	* - LEVEL_START
      2  4518				  -	      IF	LEVEL_SIZE__056_L > MAX_LEVEL_SIZE
      3  4518				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__056_L
      4  4518					      ENDIF
      0  4518					      DEFL	_056_R, "-4#-6#-|-#2-#-#4-#-|-#2-3#-2#$2#|-#$2-@#-2#2-#|2#-2$4.3-#|#2-#3-2.4#|#2-2$5#3-|#4-#7-|6#7-"
      0  4518					      START_LEVEL	_056_R
      1  4518				   LEVEL_START SET	*
      2  4518		       00 08	   BANK_LEVEL__056_R =	_CURRENT_BANK
      3  4518				   LEVEL__056_R SUBROUTINE
      4  4518				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4518
      2  4518		       2d 34 23 2d*	      .byte.b	"-4#-6#-|-#2-#-#4-#-|-#2-3#-2#$2#|-#$2-@#-2#2-#|2#-2$4.3-#|#2-#3-2.4#|#2-2$5#3-|#4-#7-|6#7-",0
      0  4573					      END_LEVEL	_056_R
      1  4573		       00 5b	   LEVEL_SIZE__056_R =	* - LEVEL_START
      2  4573					      IF	LEVEL_SIZE__056_R > MAX_LEVEL_SIZE
      3  4573				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__056_R
      4  4573					      ENDIF
      0  4573					      DEFL	_057_L, "5-6#|4#-#-.2-#|#2-#-#-2.-#|#2-3#2*.-#|#-$-#-*-$2#|#-$-@*.2-#-|#-2$-2#2-#-|#4-5#-|6#5-"
      0  4573					      START_LEVEL	_057_L
      1  4573				   LEVEL_START SET	*
      2  4573		       00 08	   BANK_LEVEL__057_L =	_CURRENT_BANK
      3  4573				   LEVEL__057_L SUBROUTINE
      4  4573				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4573
      2  4573		       35 2d 36 23*	      .byte.b	"5-6#|4#-#-.2-#|#2-#-#-2.-#|#2-3#2*.-#|#-$-#-*-$2#|#-$-@*.2-#-|#-2$-2#2-#-|#4-5#-|6#5-",0
      0  45c9					      END_LEVEL	_057_L
      1  45c9		       00 56	   LEVEL_SIZE__057_L =	* - LEVEL_START
      2  45c9				  -	      IF	LEVEL_SIZE__057_L > MAX_LEVEL_SIZE
      3  45c9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__057_L
      4  45c9					      ENDIF
      0  45c9					      DEFL	_057_R, "5#4-|#3-3#2-|#+2.2-3#|#.#*$-$-#|#.#.-#$-#|#-$2-$2-#|2#$2#3-#|-#5-2#|-7#-"
      0  45c9					      START_LEVEL	_057_R
      1  45c9				   LEVEL_START SET	*
      2  45c9		       00 08	   BANK_LEVEL__057_R =	_CURRENT_BANK
      3  45c9				   LEVEL__057_R SUBROUTINE
      4  45c9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  45c9
      2  45c9		       35 23 34 2d*	      .byte.b	"5#4-|#3-3#2-|#+2.2-3#|#.#*$-$-#|#.#.-#$-#|#-$2-$2-#|2#$2#3-#|-#5-2#|-7#-",0
      0  4612					      END_LEVEL	_057_R
      1  4612		       00 49	   LEVEL_SIZE__057_R =	* - LEVEL_START
      2  4612				  -	      IF	LEVEL_SIZE__057_R > MAX_LEVEL_SIZE
      3  4612				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__057_R
      4  4612					      ENDIF
      0  4612					      DEFL	_058_L, "-6#4-|-#-3.5#|-#-#.*2#2-#|2#-.*$4-#|#-2$*-$-$-#|#@2-2#4-#|7#3-#|6-5#"
      0  4612					      START_LEVEL	_058_L
      1  4612				   LEVEL_START SET	*
      2  4612		       00 08	   BANK_LEVEL__058_L =	_CURRENT_BANK
      3  4612				   LEVEL__058_L SUBROUTINE
      4  4612				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4612
      2  4612		       2d 36 23 34*	      .byte.b	"-6#4-|-#-3.5#|-#-#.*2#2-#|2#-.*$4-#|#-2$*-$-$-#|#@2-2#4-#|7#3-#|6-5#",0
      0  4657					      END_LEVEL	_058_L
      1  4657		       00 45	   LEVEL_SIZE__058_L =	* - LEVEL_START
      2  4657				  -	      IF	LEVEL_SIZE__058_L > MAX_LEVEL_SIZE
      3  4657				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__058_L
      4  4657					      ENDIF
      0  4657					      DEFL	_058_R, "4-5#-|3-2#3-#-|4#-.#$#-|#-$2-.#-#-|#@-3*.-2#|#-$.2-*2-#|3#*$#3-#|2-#4-3#|2-6#2-"
      0  4657					      START_LEVEL	_058_R
      1  4657				   LEVEL_START SET	*
      2  4657		       00 08	   BANK_LEVEL__058_R =	_CURRENT_BANK
      3  4657				   LEVEL__058_R SUBROUTINE
      4  4657				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4657
      2  4657		       34 2d 35 23*	      .byte.b	"4-5#-|3-2#3-#-|4#-.#$#-|#-$2-.#-#-|#@-3*.-2#|#-$.2-*2-#|3#*$#3-#|2-#4-3#|2-6#2-",0
      0  46a7					      END_LEVEL	_058_R
      1  46a7		       00 50	   LEVEL_SIZE__058_R =	* - LEVEL_START
      2  46a7				  -	      IF	LEVEL_SIZE__058_R > MAX_LEVEL_SIZE
      3  46a7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__058_R
      4  46a7					      ENDIF
      0  46a7					      DEFL	_059_L, "6#5-|#4-#5-|#-$#-5#-|#4-.-$@#-|#-#-2*-#$2#|#-$.*-$3-#|2#$#.-2#2-#|-#-3.2#2-#|-10#"
      0  46a7					      START_LEVEL	_059_L
      1  46a7				   LEVEL_START SET	*
      2  46a7		       00 08	   BANK_LEVEL__059_L =	_CURRENT_BANK
      3  46a7				   LEVEL__059_L SUBROUTINE
      4  46a7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  46a7
      2  46a7		       36 23 35 2d*	      .byte.b	"6#5-|#4-#5-|#-$#-5#-|#4-.-$@#-|#-#-2*-#$2#|#-$.*-$3-#|2#$#.-2#2-#|-#-3.2#2-#|-10#",0
      0  46f9					      END_LEVEL	_059_L
      1  46f9		       00 52	   LEVEL_SIZE__059_L =	* - LEVEL_START
      2  46f9				  -	      IF	LEVEL_SIZE__059_L > MAX_LEVEL_SIZE
      3  46f9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__059_L
      4  46f9					      ENDIF
      0  46f9					      DEFL	_059_R, "7-3#-|8#.#-|#4-#-2.2#|#-#-2$*.$-#|#5-2.#-#|2#2-2#-2#-#|#2-$-2$2#-#|#3-2#3-@#|11#"
      0  46f9					      START_LEVEL	_059_R
      1  46f9				   LEVEL_START SET	*
      2  46f9		       00 08	   BANK_LEVEL__059_R =	_CURRENT_BANK
      3  46f9				   LEVEL__059_R SUBROUTINE
      4  46f9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  46f9
      2  46f9		       37 2d 33 23*	      .byte.b	"7-3#-|8#.#-|#4-#-2.2#|#-#-2$*.$-#|#5-2.#-#|2#2-2#-2#-#|#2-$-2$2#-#|#3-2#3-@#|11#",0
      0  474a					      END_LEVEL	_059_R
      1  474a		       00 51	   LEVEL_SIZE__059_R =	* - LEVEL_START
      2  474a				  -	      IF	LEVEL_SIZE__059_R > MAX_LEVEL_SIZE
      3  474a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__059_R
      4  474a					      ENDIF
     66  474a
      0  474a					      CHECK_BANK_SIZE	"LEVELS4 -- full 2K"
      1  474a		       07 4a	   .TEMP      =	* - BANK_START
 LEVELS4 -- full 2K (2K) SIZE =  $74a , FREE= $b6
      2  474a					      ECHO	"LEVELS4 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  474a				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  474a				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  474a				  -	      ERR
      6  474a					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS5.asm LEVEL 2 PASS 3
      0  474a					      include	"BANK_LEVELS5.asm"
      1  474a							;    Sokoboo - a Sokoban implementation
      2  474a							;    using a generic tile-based display engine for the Atari 2600
      3  474a							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  474a							;
      5  474a							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  474a							;
      7  474a							;    Code related to the generic tile-based display engine was developed by
      8  474a							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  474a							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  474a							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  474a							;
     12  474a							;    Code related to music and sound effects uses the TIATracker music player
     13  474a							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  474a							;    directory for Apache licensing details.
     15  474a							;
     16  474a							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  474a							;    See the copyright notices in the License directory for a list of level
     18  474a							;    contributors.
     19  474a							;
     20  474a							;    Except where otherwise indicated, this software is released under the
     21  474a							;    following licensing arrangement...
     22  474a							;
     23  474a							;    This program is free software: you can redistribute it and/or modify
     24  474a							;    it under the terms of the GNU General Public License as published by
     25  474a							;    the Free Software Foundation, either version 3 of the License, or
     26  474a							;    (at your option) any later version.
     27  474a							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  474a
     29  474a							;    This program is distributed in the hope that it will be useful,
     30  474a							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  474a							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  474a							;    GNU General Public License for more details.
     33  474a
     34  474a							; level definitions
     35  474a							; Sample level definitions.
     36  474a							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  474a							; have as many banks as you like.
     38  474a
      0  474a					      NEWBANK	LEVELS5
      1  4e75 ????				      SEG	LEVELS5
      2  4800					      ORG	ORIGIN
      3  4800					      RORG	$F000
      4  4800				   BANK_START SET	*
      5  4800				   LEVELS5    SET	ORIGIN / 2048
      6  4800				   ORIGIN     SET	ORIGIN + 2048
      7  4800				   _CURRENT_BANK SET	LEVELS5
     40  4800
      0  4800					      DEFL	_060_R, "3-6#3-|3-#2.$-#3-|4#.*2-2#2-|#2-2$*3-3#|#3-.+#3$-#|5#.*4-#|4-4#3-#|7-5#"
      0  4800					      START_LEVEL	_060_R
      1  4800				   LEVEL_START SET	*
      2  4800		       00 09	   BANK_LEVEL__060_R =	_CURRENT_BANK
      3  4800				   LEVEL__060_R SUBROUTINE
      4  4800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4800
      2  4800		       33 2d 36 23*	      .byte.b	"3-6#3-|3-#2.$-#3-|4#.*2-2#2-|#2-2$*3-3#|#3-.+#3$-#|5#.*4-#|4-4#3-#|7-5#",0
      0  4848					      END_LEVEL	_060_R
      1  4848		       00 48	   LEVEL_SIZE__060_R =	* - LEVEL_START
      2  4848				  -	      IF	LEVEL_SIZE__060_R > MAX_LEVEL_SIZE
      3  4848				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__060_R
      4  4848					      ENDIF
      0  4848					      DEFL	_061_L, "10#-|#2-#2-@2-#-|#2-#-$-#*2#|#-$-#2*-2.#|#4-$.*.$#|4#-2.$2-#|3-3#-$2-#|5-2#3-#|6-5#"
      0  4848					      START_LEVEL	_061_L
      1  4848				   LEVEL_START SET	*
      2  4848		       00 09	   BANK_LEVEL__061_L =	_CURRENT_BANK
      3  4848				   LEVEL__061_L SUBROUTINE
      4  4848				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4848
      2  4848		       31 30 23 2d*	      .byte.b	"10#-|#2-#2-@2-#-|#2-#-$-#*2#|#-$-#2*-2.#|#4-$.*.$#|4#-2.$2-#|3-3#-$2-#|5-2#3-#|6-5#",0
      0  489c					      END_LEVEL	_061_L
      1  489c		       00 54	   LEVEL_SIZE__061_L =	* - LEVEL_START
      2  489c				  -	      IF	LEVEL_SIZE__061_L > MAX_LEVEL_SIZE
      3  489c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__061_L
      4  489c					      ENDIF
      0  489c					      DEFL	_061_R, "4-5#4-|3-2#.2-#4-|4#.*#-4#-|#3-3.2-$@2#|#2-$-$.4$-#|6#.#4-#|5-5#2-#|9-4#"
      0  489c					      START_LEVEL	_061_R
      1  489c				   LEVEL_START SET	*
      2  489c		       00 09	   BANK_LEVEL__061_R =	_CURRENT_BANK
      3  489c				   LEVEL__061_R SUBROUTINE
      4  489c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  489c
      2  489c		       34 2d 35 23*	      .byte.b	"4-5#4-|3-2#.2-#4-|4#.*#-4#-|#3-3.2-$@2#|#2-$-$.4$-#|6#.#4-#|5-5#2-#|9-4#",0
      0  48e5					      END_LEVEL	_061_R
      1  48e5		       00 49	   LEVEL_SIZE__061_R =	* - LEVEL_START
      2  48e5				  -	      IF	LEVEL_SIZE__061_R > MAX_LEVEL_SIZE
      3  48e5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__061_R
      4  48e5					      ENDIF
      0  48e5					      DEFL	_062_L, "-5#6-|-#3-5#2-|-#2$-#3-#2-|2#-#2-$2-2#-|#5-*#2-#-|#3-#-.#2.2#|5#$3*.-#|4-#@$-.2-#|4-8#"
      0  48e5					      START_LEVEL	_062_L
      1  48e5				   LEVEL_START SET	*
      2  48e5		       00 09	   BANK_LEVEL__062_L =	_CURRENT_BANK
      3  48e5				   LEVEL__062_L SUBROUTINE
      4  48e5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  48e5
      2  48e5		       2d 35 23 36*	      .byte.b	"-5#6-|-#3-5#2-|-#2$-#3-#2-|2#-#2-$2-2#-|#5-*#2-#-|#3-#-.#2.2#|5#$3*.-#|4-#@$-.2-#|4-8#",0
      0  493c					      END_LEVEL	_062_L
      1  493c		       00 57	   LEVEL_SIZE__062_L =	* - LEVEL_START
      2  493c				  -	      IF	LEVEL_SIZE__062_L > MAX_LEVEL_SIZE
      3  493c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__062_L
      4  493c					      ENDIF
      0  493c					      DEFL	_062_R, "5-5#|3-3#@2.#|-3#3-*2#|-#2-2$*.#-|2#2-$3.#-|#-$2-$-2#-|#2-$4#2-|#3-#5-|5#5-"
      0  493c					      START_LEVEL	_062_R
      1  493c				   LEVEL_START SET	*
      2  493c		       00 09	   BANK_LEVEL__062_R =	_CURRENT_BANK
      3  493c				   LEVEL__062_R SUBROUTINE
      4  493c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  493c
      2  493c		       35 2d 35 23*	      .byte.b	"5-5#|3-3#@2.#|-3#3-*2#|-#2-2$*.#-|2#2-$3.#-|#-$2-$-2#-|#2-$4#2-|#3-#5-|5#5-",0
      0  4988					      END_LEVEL	_062_R
      1  4988		       00 4c	   LEVEL_SIZE__062_R =	* - LEVEL_START
      2  4988				  -	      IF	LEVEL_SIZE__062_R > MAX_LEVEL_SIZE
      3  4988				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__062_R
      4  4988					      ENDIF
      0  4988					      DEFL	_063_L, "2-5#6-|2-#3-7#|2-#2-$@2#3-#|4#$#*.#-#-#|#2-$.#.*2-#-#|#3-.*.3$2-#|3#.*7-#|2-11#"
      0  4988					      START_LEVEL	_063_L
      1  4988				   LEVEL_START SET	*
      2  4988		       00 09	   BANK_LEVEL__063_L =	_CURRENT_BANK
      3  4988				   LEVEL__063_L SUBROUTINE
      4  4988				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4988
      2  4988		       32 2d 35 23*	      .byte.b	"2-5#6-|2-#3-7#|2-#2-$@2#3-#|4#$#*.#-#-#|#2-$.#.*2-#-#|#3-.*.3$2-#|3#.*7-#|2-11#",0
      0  49d8					      END_LEVEL	_063_L
      1  49d8		       00 50	   LEVEL_SIZE__063_L =	* - LEVEL_START
      2  49d8				  -	      IF	LEVEL_SIZE__063_L > MAX_LEVEL_SIZE
      3  49d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__063_L
      4  49d8					      ENDIF
      0  49d8					      DEFL	_063_R, "2-6#3-|2-#-+.-#3-|2-#$*$-4#|-2#3.#3-#|2#-$.*.3-#|#-$-#$2#-2#|#-2$5-#-|#6-3#-|8#3-"
      0  49d8					      START_LEVEL	_063_R
      1  49d8				   LEVEL_START SET	*
      2  49d8		       00 09	   BANK_LEVEL__063_R =	_CURRENT_BANK
      3  49d8				   LEVEL__063_R SUBROUTINE
      4  49d8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  49d8
      2  49d8		       32 2d 36 23*	      .byte.b	"2-6#3-|2-#-+.-#3-|2-#$*$-4#|-2#3.#3-#|2#-$.*.3-#|#-$-#$2#-2#|#-2$5-#-|#6-3#-|8#3-",0
      0  4a2a					      END_LEVEL	_063_R
      1  4a2a		       00 52	   LEVEL_SIZE__063_R =	* - LEVEL_START
      2  4a2a				  -	      IF	LEVEL_SIZE__063_R > MAX_LEVEL_SIZE
      3  4a2a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__063_R
      4  4a2a					      ENDIF
      0  4a2a					      DEFL	_064_L, "-8#3-|2#2-2#2-#3-|#3-2#2-#3-|#-@-$.$.#3-|3#-$*2.4#|2-#$-#*.3-#|2-#2-$-.-$-#|2-#2-7#|2-4#6-"
      0  4a2a					      START_LEVEL	_064_L
      1  4a2a				   LEVEL_START SET	*
      2  4a2a		       00 09	   BANK_LEVEL__064_L =	_CURRENT_BANK
      3  4a2a				   LEVEL__064_L SUBROUTINE
      4  4a2a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4a2a
      2  4a2a		       2d 38 23 33*	      .byte.b	"-8#3-|2#2-2#2-#3-|#3-2#2-#3-|#-@-$.$.#3-|3#-$*2.4#|2-#$-#*.3-#|2-#2-$-.-$-#|2-#2-7#|2-4#6-",0
      0  4a85					      END_LEVEL	_064_L
      1  4a85		       00 5b	   LEVEL_SIZE__064_L =	* - LEVEL_START
      2  4a85				  -	      IF	LEVEL_SIZE__064_L > MAX_LEVEL_SIZE
      3  4a85				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__064_L
      4  4a85					      ENDIF
      0  4a85					      DEFL	_064_R, "4#-6#|#2-#-#4-#|#2-3#4-#|#-$*-$-$-2#|#2-3.-#-#-|3#2.#3$#-|2-2#2.-$@#-|3-7#-"
      0  4a85					      START_LEVEL	_064_R
      1  4a85				   LEVEL_START SET	*
      2  4a85		       00 09	   BANK_LEVEL__064_R =	_CURRENT_BANK
      3  4a85				   LEVEL__064_R SUBROUTINE
      4  4a85				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4a85
      2  4a85		       34 23 2d 36*	      .byte.b	"4#-6#|#2-#-#4-#|#2-3#4-#|#-$*-$-$-2#|#2-3.-#-#-|3#2.#3$#-|2-2#2.-$@#-|3-7#-",0
      0  4ad1					      END_LEVEL	_064_R
      1  4ad1		       00 4c	   LEVEL_SIZE__064_R =	* - LEVEL_START
      2  4ad1				  -	      IF	LEVEL_SIZE__064_R > MAX_LEVEL_SIZE
      3  4ad1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__064_R
      4  4ad1					      ENDIF
      0  4ad1					      DEFL	_065_L, "2-5#5-|3#3-#5-|#-3$-6#|#-.-#2.#2-@#|2#*2.*.3$-#|#2.$-#.$-$-#|2#.2-2#2-$-#|-6#3-2#|6-5#-"
      0  4ad1					      START_LEVEL	_065_L
      1  4ad1				   LEVEL_START SET	*
      2  4ad1		       00 09	   BANK_LEVEL__065_L =	_CURRENT_BANK
      3  4ad1				   LEVEL__065_L SUBROUTINE
      4  4ad1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4ad1
      2  4ad1		       32 2d 35 23*	      .byte.b	"2-5#5-|3#3-#5-|#-3$-6#|#-.-#2.#2-@#|2#*2.*.3$-#|#2.$-#.$-$-#|2#.2-2#2-$-#|-6#3-2#|6-5#-",0
      0  4b29					      END_LEVEL	_065_L
      1  4b29		       00 58	   LEVEL_SIZE__065_L =	* - LEVEL_START
      2  4b29				  -	      IF	LEVEL_SIZE__065_L > MAX_LEVEL_SIZE
      3  4b29				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__065_L
      4  4b29					      ENDIF
      0  4b29					      DEFL	_065_R, "3-5#2-|4#.2-#2-|#2-#2.$#2-|#2-$*.-3#|#2-$2.*$-#|2#3$.3-#|-#@$-.*2-#|-9#"
      0  4b29					      START_LEVEL	_065_R
      1  4b29				   LEVEL_START SET	*
      2  4b29		       00 09	   BANK_LEVEL__065_R =	_CURRENT_BANK
      3  4b29				   LEVEL__065_R SUBROUTINE
      4  4b29				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4b29
      2  4b29		       33 2d 35 23*	      .byte.b	"3-5#2-|4#.2-#2-|#2-#2.$#2-|#2-$*.-3#|#2-$2.*$-#|2#3$.3-#|-#@$-.*2-#|-9#",0
      0  4b71					      END_LEVEL	_065_R
      1  4b71		       00 48	   LEVEL_SIZE__065_R =	* - LEVEL_START
      2  4b71				  -	      IF	LEVEL_SIZE__065_R > MAX_LEVEL_SIZE
      3  4b71				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__065_R
      4  4b71					      ENDIF
      0  4b71					      DEFL	_066_L, "10#3-|#5-#2-4#|#-$2#$*.*$2-#|#@-#-5.#-#|#-$#$2.-#3-#|#2-$2-7#|4#-$-$2-#2-|3-#6-#2-|3-8#2-"
      0  4b71					      START_LEVEL	_066_L
      1  4b71				   LEVEL_START SET	*
      2  4b71		       00 09	   BANK_LEVEL__066_L =	_CURRENT_BANK
      3  4b71				   LEVEL__066_L SUBROUTINE
      4  4b71				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4b71
      2  4b71		       31 30 23 33*	      .byte.b	"10#3-|#5-#2-4#|#-$2#$*.*$2-#|#@-#-5.#-#|#-$#$2.-#3-#|#2-$2-7#|4#-$-$2-#2-|3-#6-#2-|3-8#2-",0
      0  4bcb					      END_LEVEL	_066_L
      1  4bcb		       00 5a	   LEVEL_SIZE__066_L =	* - LEVEL_START
      2  4bcb				  -	      IF	LEVEL_SIZE__066_L > MAX_LEVEL_SIZE
      3  4bcb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__066_L
      4  4bcb					      ENDIF
      0  4bcb					      DEFL	_066_R, "2-5#5-|2-#3-2#4-|2-#4-#4-|2-#-*.$5#|2-#-2*2.-$-#|3#2$.#.2#-#|#2-@$.-$2#-#|#3-#6-#|12#"
      0  4bcb					      START_LEVEL	_066_R
      1  4bcb				   LEVEL_START SET	*
      2  4bcb		       00 09	   BANK_LEVEL__066_R =	_CURRENT_BANK
      3  4bcb				   LEVEL__066_R SUBROUTINE
      4  4bcb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4bcb
      2  4bcb		       32 2d 35 23*	      .byte.b	"2-5#5-|2-#3-2#4-|2-#4-#4-|2-#-*.$5#|2-#-2*2.-$-#|3#2$.#.2#-#|#2-@$.-$2#-#|#3-#6-#|12#",0
      0  4c21					      END_LEVEL	_066_R
      1  4c21		       00 56	   LEVEL_SIZE__066_R =	* - LEVEL_START
      2  4c21				  -	      IF	LEVEL_SIZE__066_R > MAX_LEVEL_SIZE
      3  4c21				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__066_R
      4  4c21					      ENDIF
      0  4c21					      DEFL	_067_L, "8#3-|#3-@2-#3-|#-2$-2$4#|#2-2#$-$-.#|#-$2#-.*#.#|#2-2#-*.*.#|#2-2#-.-.-#|11#"
      0  4c21					      START_LEVEL	_067_L
      1  4c21				   LEVEL_START SET	*
      2  4c21		       00 09	   BANK_LEVEL__067_L =	_CURRENT_BANK
      3  4c21				   LEVEL__067_L SUBROUTINE
      4  4c21				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4c21
      2  4c21		       38 23 33 2d*	      .byte.b	"8#3-|#3-@2-#3-|#-2$-2$4#|#2-2#$-$-.#|#-$2#-.*#.#|#2-2#-*.*.#|#2-2#-.-.-#|11#",0
      0  4c6e					      END_LEVEL	_067_L
      1  4c6e		       00 4d	   LEVEL_SIZE__067_L =	* - LEVEL_START
      2  4c6e				  -	      IF	LEVEL_SIZE__067_L > MAX_LEVEL_SIZE
      3  4c6e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__067_L
      4  4c6e					      ENDIF
      0  4c6e					      DEFL	_067_R, "7#2-4#|#5-2#-#2-#|#-2$2-.3#$-#|2#2-#$*2.3-#|-2#2-*2.#$#-#|2-2#+*2.#-$-#|3-#-$-$3-2#|3-4#3-2#-|6-5#2-"
      0  4c6e					      START_LEVEL	_067_R
      1  4c6e				   LEVEL_START SET	*
      2  4c6e		       00 09	   BANK_LEVEL__067_R =	_CURRENT_BANK
      3  4c6e				   LEVEL__067_R SUBROUTINE
      4  4c6e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4c6e
      2  4c6e		       37 23 32 2d*	      .byte.b	"7#2-4#|#5-2#-#2-#|#-2$2-.3#$-#|2#2-#$*2.3-#|-2#2-*2.#$#-#|2-2#+*2.#-$-#|3-#-$-$3-2#|3-4#3-2#-|6-5#2-",0
      0  4cd3					      END_LEVEL	_067_R
      1  4cd3		       00 65	   LEVEL_SIZE__067_R =	* - LEVEL_START
      2  4cd3					      IF	LEVEL_SIZE__067_R > MAX_LEVEL_SIZE
      3  4cd3				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__067_R
      4  4cd3					      ENDIF
      0  4cd3					      DEFL	_068_L, "10#|#2-#5-#|#-$#$-$2-#|#-$2-$.2-#|#2-#.*.$2#|#-$#.2*-#-|2#@*3.2#-|-2#-*2-#2-|2-6#2-"
      0  4cd3					      START_LEVEL	_068_L
      1  4cd3				   LEVEL_START SET	*
      2  4cd3		       00 09	   BANK_LEVEL__068_L =	_CURRENT_BANK
      3  4cd3				   LEVEL__068_L SUBROUTINE
      4  4cd3				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4cd3
      2  4cd3		       31 30 23 7c*	      .byte.b	"10#|#2-#5-#|#-$#$-$2-#|#-$2-$.2-#|#2-#.*.$2#|#-$#.2*-#-|2#@*3.2#-|-2#-*2-#2-|2-6#2-",0
      0  4d27					      END_LEVEL	_068_L
      1  4d27		       00 54	   LEVEL_SIZE__068_L =	* - LEVEL_START
      2  4d27				  -	      IF	LEVEL_SIZE__068_L > MAX_LEVEL_SIZE
      3  4d27				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__068_L
      4  4d27					      ENDIF
      0  4d27					      DEFL	_068_R, "5-5#-|3-3#3-#-|3-#2-$2-#-|4#*-2$3#|#3.*.#3-#|#.#.*.#-$-#|#$#-$@$2-2#|#3-3#2-#-|5#-4#-"
      0  4d27					      START_LEVEL	_068_R
      1  4d27				   LEVEL_START SET	*
      2  4d27		       00 09	   BANK_LEVEL__068_R =	_CURRENT_BANK
      3  4d27				   LEVEL__068_R SUBROUTINE
      4  4d27				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4d27
      2  4d27		       35 2d 35 23*	      .byte.b	"5-5#-|3-3#3-#-|3-#2-$2-#-|4#*-2$3#|#3.*.#3-#|#.#.*.#-$-#|#$#-$@$2-2#|#3-3#2-#-|5#-4#-",0
      0  4d7d					      END_LEVEL	_068_R
      1  4d7d		       00 56	   LEVEL_SIZE__068_R =	* - LEVEL_START
      2  4d7d				  -	      IF	LEVEL_SIZE__068_R > MAX_LEVEL_SIZE
      3  4d7d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__068_R
      4  4d7d					      ENDIF
      0  4d7d					      DEFL	_069_L, "-6#3-|-#2-$.3#-|-#2-*2.-#-|2#$#.-.-2#|#-$2-#2.-#|#@2$2#-$-#|#-$6-#|7#2-#|6-4#"
      0  4d7d					      START_LEVEL	_069_L
      1  4d7d				   LEVEL_START SET	*
      2  4d7d		       00 09	   BANK_LEVEL__069_L =	_CURRENT_BANK
      3  4d7d				   LEVEL__069_L SUBROUTINE
      4  4d7d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4d7d
      2  4d7d		       2d 36 23 33*	      .byte.b	"-6#3-|-#2-$.3#-|-#2-*2.-#-|2#$#.-.-2#|#-$2-#2.-#|#@2$2#-$-#|#-$6-#|7#2-#|6-4#",0
      0  4dcb					      END_LEVEL	_069_L
      1  4dcb		       00 4e	   LEVEL_SIZE__069_L =	* - LEVEL_START
      2  4dcb				  -	      IF	LEVEL_SIZE__069_L > MAX_LEVEL_SIZE
      3  4dcb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__069_L
      4  4dcb					      ENDIF
      0  4dcb					      DEFL	_069_R, "2-5#4-|-2#3-5#|2#@$-2$3-#|#-$#2-$.*.#|#2-#2-2*2.#|#-$2-#.-3#|4#2-.2#2-|3-5#3-"
      0  4dcb					      START_LEVEL	_069_R
      1  4dcb				   LEVEL_START SET	*
      2  4dcb		       00 09	   BANK_LEVEL__069_R =	_CURRENT_BANK
      3  4dcb				   LEVEL__069_R SUBROUTINE
      4  4dcb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4dcb
      2  4dcb		       32 2d 35 23*	      .byte.b	"2-5#4-|-2#3-5#|2#@$-2$3-#|#-$#2-$.*.#|#2-#2-2*2.#|#-$2-#.-3#|4#2-.2#2-|3-5#3-",0
      0  4e19					      END_LEVEL	_069_R
      1  4e19		       00 4e	   LEVEL_SIZE__069_R =	* - LEVEL_START
      2  4e19				  -	      IF	LEVEL_SIZE__069_R > MAX_LEVEL_SIZE
      3  4e19				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__069_R
      4  4e19					      ENDIF
     60  4e19
      0  4e19					      DEFL	_122_Maya, "14#|4#3-3#2-2#|#-$-$2-2#3-2#|#.2-$4#$2-2#|#.*2-$3-$-3#|#*.#$*.$-#2$-#|#6.*-#-@-#|2#4-8#|14#"
      0  4e19					      START_LEVEL	_122_Maya
      1  4e19				   LEVEL_START SET	*
      2  4e19		       00 09	   BANK_LEVEL__122_Maya =	_CURRENT_BANK
      3  4e19				   LEVEL__122_Maya SUBROUTINE
      4  4e19				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4e19
      2  4e19		       31 34 23 7c*	      .byte.b	"14#|4#3-3#2-2#|#-$-$2-2#3-2#|#.2-$4#$2-2#|#.*2-$3-$-3#|#*.#$*.$-#2$-#|#6.*-#-@-#|2#4-8#|14#",0
      0  4e75					      END_LEVEL	_122_Maya
      1  4e75		       00 5c	   LEVEL_SIZE__122_Maya =	* - LEVEL_START
      2  4e75				  -	      IF	LEVEL_SIZE__122_Maya > MAX_LEVEL_SIZE
      3  4e75				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__122_Maya
      4  4e75					      ENDIF
     62  4e75
      0  4e75					      CHECK_BANK_SIZE	"LEVELS5 -- full 2K"
      1  4e75		       06 75	   .TEMP      =	* - BANK_START
 LEVELS5 -- full 2K (2K) SIZE =  $675 , FREE= $18b
      2  4e75					      ECHO	"LEVELS5 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  4e75				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  4e75				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  4e75				  -	      ERR
      6  4e75					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS6.asm LEVEL 2 PASS 3
      0  4e75					      include	"BANK_LEVELS6.asm"
      1  4e75							;    Sokoboo - a Sokoban implementation
      2  4e75							;    using a generic tile-based display engine for the Atari 2600
      3  4e75							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  4e75							;
      5  4e75							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  4e75							;
      7  4e75							;    Code related to the generic tile-based display engine was developed by
      8  4e75							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  4e75							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  4e75							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  4e75							;
     12  4e75							;    Code related to music and sound effects uses the TIATracker music player
     13  4e75							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  4e75							;    directory for Apache licensing details.
     15  4e75							;
     16  4e75							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  4e75							;    See the copyright notices in the License directory for a list of level
     18  4e75							;    contributors.
     19  4e75							;
     20  4e75							;    Except where otherwise indicated, this software is released under the
     21  4e75							;    following licensing arrangement...
     22  4e75							;
     23  4e75							;    This program is free software: you can redistribute it and/or modify
     24  4e75							;    it under the terms of the GNU General Public License as published by
     25  4e75							;    the Free Software Foundation, either version 3 of the License, or
     26  4e75							;    (at your option) any later version.
     27  4e75							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  4e75
     29  4e75							;    This program is distributed in the hope that it will be useful,
     30  4e75							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  4e75							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  4e75							;    GNU General Public License for more details.
     33  4e75
     34  4e75							; level definitions
     35  4e75							; Sample level definitions.
     36  4e75							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  4e75							; have as many banks as you like.
     38  4e75
      0  4e75					      NEWBANK	LEVELS6
      1  57e0 ????				      SEG	LEVELS6
      2  5000					      ORG	ORIGIN
      3  5000					      RORG	$F000
      4  5000				   BANK_START SET	*
      5  5000				   LEVELS6    SET	ORIGIN / 2048
      6  5000				   ORIGIN     SET	ORIGIN + 2048
      7  5000				   _CURRENT_BANK SET	LEVELS6
     40  5000
     41  5000
     42  5000							; Level definitions
     43  5000
     44  5000							; "sokhard" collection
     45  5000					      if	1
     46  5000
      0  5000					      DEFL	_102_Natalie, "11#|2#2-#@4.#|2#3-2$.2*#|2#-$2-2$#.#|#2-$#-#2-.#|#2-$-#-2#-#|#9-#|11#"
      0  5000					      START_LEVEL	_102_Natalie
      1  5000				   LEVEL_START SET	*
      2  5000		       00 0a	   BANK_LEVEL__102_Natalie =	_CURRENT_BANK
      3  5000				   LEVEL__102_Natalie SUBROUTINE
      4  5000				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5000
      2  5000		       31 31 23 7c*	      .byte.b	"11#|2#2-#@4.#|2#3-2$.2*#|2#-$2-2$#.#|#2-$#-#2-.#|#2-$-#-2#-#|#9-#|11#",0
      0  5046					      END_LEVEL	_102_Natalie
      1  5046		       00 46	   LEVEL_SIZE__102_Natalie =	* - LEVEL_START
      2  5046				  -	      IF	LEVEL_SIZE__102_Natalie > MAX_LEVEL_SIZE
      3  5046				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__102_Natalie
      4  5046					      ENDIF
      0  5046					      DEFL	_102_Mirabel, "11#|6#3-2#|2#2-2#$2-2#|2#2-#-2$-2#|#7-3#|#.-#$-#-3#|#.#.-#2-$-#|#3.#-2$#@#|#-2.4-$-#|#2-8#|11#"
      0  5046					      START_LEVEL	_102_Mirabel
      1  5046				   LEVEL_START SET	*
      2  5046		       00 0a	   BANK_LEVEL__102_Mirabel =	_CURRENT_BANK
      3  5046				   LEVEL__102_Mirabel SUBROUTINE
      4  5046				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5046
      2  5046		       31 31 23 7c*	      .byte.b	"11#|6#3-2#|2#2-2#$2-2#|2#2-#-2$-2#|#7-3#|#.-#$-#-3#|#.#.-#2-$-#|#3.#-2$#@#|#-2.4-$-#|#2-8#|11#",0
      0  50a5					      END_LEVEL	_102_Mirabel
      1  50a5		       00 5f	   LEVEL_SIZE__102_Mirabel =	* - LEVEL_START
      2  50a5				  -	      IF	LEVEL_SIZE__102_Mirabel > MAX_LEVEL_SIZE
      3  50a5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__102_Mirabel
      4  50a5					      ENDIF
      0  50a5					      DEFL	_102_Oralia, "9#|#2.$.#2-#|#4.2*-#|#-$.2#2-#|2#-$2-$-#|4#$-$-#|#-$3-$-#|#5-#@#|9#"
      0  50a5					      START_LEVEL	_102_Oralia
      1  50a5				   LEVEL_START SET	*
      2  50a5		       00 0a	   BANK_LEVEL__102_Oralia =	_CURRENT_BANK
      3  50a5				   LEVEL__102_Oralia SUBROUTINE
      4  50a5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  50a5
      2  50a5		       39 23 7c 23*	      .byte.b	"9#|#2.$.#2-#|#4.2*-#|#-$.2#2-#|2#-$2-$-#|4#$-$-#|#-$3-$-#|#5-#@#|9#",0
      0  50e9					      END_LEVEL	_102_Oralia
      1  50e9		       00 44	   LEVEL_SIZE__102_Oralia =	* - LEVEL_START
      2  50e9				  -	      IF	LEVEL_SIZE__102_Oralia > MAX_LEVEL_SIZE
      3  50e9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__102_Oralia
      4  50e9					      ENDIF
     50  50e9
     51  50e9
     52  50e9							;---------------------------------------------------------------------------------------------------
     53  50e9							; IMAGE IS ABOVE DEFINITION
     54  50e9
     55  50e9							;  ###########
     56  50e9							;  #  #      #
     57  50e9							;  # $# $ $$ #
     58  50e9							;  #  ##$#$  #
     59  50e9							;  #  $    #@#
     60  50e9							;  # $## #  ##
     61  50e9							;  ##	# .## #
     62  50e9							;  ##$ #.*. ##
     63  50e9							;  # ..*. *. #
     64  50e9							;  # # .. #  #
     65  50e9							;  ###########
     66  50e9
      0  50e9					      DEFL	_102_Raven, "11#|#2-#6-#|#-$#-$-2$-#|#2-2#$#$2-#|#2-$4-#@#|#-$2#-#2-2#|2#2-#-.2#-#|2#$-#.*.-2#|#-2.*.-*.-#|#-#-2.-#2-#|11#"
      0  50e9					      START_LEVEL	_102_Raven
      1  50e9				   LEVEL_START SET	*
      2  50e9		       00 0a	   BANK_LEVEL__102_Raven =	_CURRENT_BANK
      3  50e9				   LEVEL__102_Raven SUBROUTINE
      4  50e9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  50e9
      2  50e9		       31 31 23 7c*	      .byte.b	"11#|#2-#6-#|#-$#-$-2$-#|#2-2#$#$2-#|#2-$4-#@#|#-$2#-#2-2#|2#2-#-.2#-#|2#$-#.*.-2#|#-2.*.-*.-#|#-#-2.-#2-#|11#",0
      0  5157					      END_LEVEL	_102_Raven
      1  5157		       00 6e	   LEVEL_SIZE__102_Raven =	* - LEVEL_START
      2  5157					      IF	LEVEL_SIZE__102_Raven > MAX_LEVEL_SIZE
      3  5157				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__102_Raven
      4  5157					      ENDIF
     68  5157
     69  5157							;  ############
     70  5157							;  #@##. #  # #
     71  5157							;  #**..$#    #
     72  5157							;  #. $..#  # #
     73  5157							;  # $#.$#$$$ #
     74  5157							;  #	      ##
     75  5157							;  #  ##  #   #
     76  5157							;  ############
     77  5157
      0  5157					      DEFL	_103_Adin, "12#|#@2#.-#2-#-#|#2*2.$#4-#|#.-$2.#2-#-#|#-$#.$#3$-#|#9-2#|#2-2#2-#3-#|12#"
      0  5157					      START_LEVEL	_103_Adin
      1  5157				   LEVEL_START SET	*
      2  5157		       00 0a	   BANK_LEVEL__103_Adin =	_CURRENT_BANK
      3  5157				   LEVEL__103_Adin SUBROUTINE
      4  5157				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5157
      2  5157		       31 32 23 7c*	      .byte.b	"12#|#@2#.-#2-#-#|#2*2.$#4-#|#.-$2.#2-#-#|#-$#.$#3$-#|#9-2#|#2-2#2-#3-#|12#",0
      0  51a2					      END_LEVEL	_103_Adin
      1  51a2		       00 4b	   LEVEL_SIZE__103_Adin =	* - LEVEL_START
      2  51a2				  -	      IF	LEVEL_SIZE__103_Adin > MAX_LEVEL_SIZE
      3  51a2				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__103_Adin
      4  51a2					      ENDIF
     79  51a2
     80  51a2							;  #######___
     81  51a2							;  #	  #___
     82  51a2							;  #	$$#___
     83  51a2							;  #.*  .#___
     84  51a2							;  #$*$#*###_
     85  51a2							;  #@*... .#_
     86  51a2							;  #####$ .##
     87  51a2							;  ___# $ $ #
     88  51a2							;  ___#     #
     89  51a2							;  ___#######	(_ = modified by boo from wall)
     90  51a2
      0  51a2					      DEFL	_103_Ajalae, "7#|#5-#|#3-2$#|#.*2-.#|#$*$#*3#|#@*3.-.#|5#$-.2#|3-#-$-$-#|3-#5-#|3-7#"
      0  51a2					      START_LEVEL	_103_Ajalae
      1  51a2				   LEVEL_START SET	*
      2  51a2		       00 0a	   BANK_LEVEL__103_Ajalae =	_CURRENT_BANK
      3  51a2				   LEVEL__103_Ajalae SUBROUTINE
      4  51a2				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  51a2
      2  51a2		       37 23 7c 23*	      .byte.b	"7#|#5-#|#3-2$#|#.*2-.#|#$*$#*3#|#@*3.-.#|5#$-.2#|3-#-$-$-#|3-#5-#|3-7#",0
      0  51e9					      END_LEVEL	_103_Ajalae
      1  51e9		       00 47	   LEVEL_SIZE__103_Ajalae =	* - LEVEL_START
      2  51e9				  -	      IF	LEVEL_SIZE__103_Ajalae > MAX_LEVEL_SIZE
      3  51e9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__103_Ajalae
      4  51e9					      ENDIF
     92  51e9
     93  51e9
     94  51e9							;  ############
     95  51e9							;  #@#  #     #
     96  51e9							;  #  # #$#$# #
     97  51e9							;  # *$       #
     98  51e9							;  #..##$#$   #
     99  51e9							;  #..#. #  $ #
    100  51e9							;  #....# $$$##
    101  51e9							;  #	       #
    102  51e9							;  ############
    103  51e9
      0  51e9					      DEFL	_103_Arielle, "12#|#@#2-#5-#|#2-#-#$#$#-#|#-*$7-#|#2.2#$#$3-#|#2.#.-#2-$-#|#4.#-3$2#|#10-#|12#"
      0  51e9					      START_LEVEL	_103_Arielle
      1  51e9				   LEVEL_START SET	*
      2  51e9		       00 0a	   BANK_LEVEL__103_Arielle =	_CURRENT_BANK
      3  51e9				   LEVEL__103_Arielle SUBROUTINE
      4  51e9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  51e9
      2  51e9		       31 32 23 7c*	      .byte.b	"12#|#@#2-#5-#|#2-#-#$#$#-#|#-*$7-#|#2.2#$#$3-#|#2.#.-#2-$-#|#4.#-3$2#|#10-#|12#",0
      0  5239					      END_LEVEL	_103_Arielle
      1  5239		       00 50	   LEVEL_SIZE__103_Arielle =	* - LEVEL_START
      2  5239				  -	      IF	LEVEL_SIZE__103_Arielle > MAX_LEVEL_SIZE
      3  5239				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__103_Arielle
      4  5239					      ENDIF
      0  5239					      DEFL	_1XJH_Tara_Gelson, "8#|#2-#2-*#|#2-*-*-#|#-*$-$-#|#2-.#.-#|#3-#-*#|2#-@3-#|8#"
      0  5239					      START_LEVEL	_1XJH_Tara_Gelson
      1  5239				   LEVEL_START SET	*
      2  5239		       00 0a	   BANK_LEVEL__1XJH_Tara_Gelson =	_CURRENT_BANK
      3  5239				   LEVEL__1XJH_Tara_Gelson SUBROUTINE
      4  5239				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5239
      2  5239		       38 23 7c 23*	      .byte.b	"8#|#2-#2-*#|#2-*-*-#|#-*$-$-#|#2-.#.-#|#3-#-*#|2#-@3-#|8#",0
      0  5273					      END_LEVEL	_1XJH_Tara_Gelson
      1  5273		       00 3a	   LEVEL_SIZE__1XJH_Tara_Gelson =	* - LEVEL_START
      2  5273				  -	      IF	LEVEL_SIZE__1XJH_Tara_Gelson > MAX_LEVEL_SIZE
      3  5273				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__1XJH_Tara_Gelson
      4  5273					      ENDIF
      0  5273					      DEFL	_1R7X_Alison, "7#|#2-.2-#|#-$*2$#|#-2.$.#|#@*-$-#|2#.3-#|7#"
      0  5273					      START_LEVEL	_1R7X_Alison
      1  5273				   LEVEL_START SET	*
      2  5273		       00 0a	   BANK_LEVEL__1R7X_Alison =	_CURRENT_BANK
      3  5273				   LEVEL__1R7X_Alison SUBROUTINE
      4  5273				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5273
      2  5273		       37 23 7c 23*	      .byte.b	"7#|#2-.2-#|#-$*2$#|#-2.$.#|#@*-$-#|2#.3-#|7#",0
      0  52a0					      END_LEVEL	_1R7X_Alison
      1  52a0		       00 2d	   LEVEL_SIZE__1R7X_Alison =	* - LEVEL_START
      2  52a0				  -	      IF	LEVEL_SIZE__1R7X_Alison > MAX_LEVEL_SIZE
      3  52a0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__1R7X_Alison
      4  52a0					      ENDIF
      0  52a0					      DEFL	_1KWD_Cecile_Clayworth, "8#|3#.2-.#|#-$4-#|#-*2#2$#|#3-$-+#|#-*.-*-#|#6-#|8#"
      0  52a0					      START_LEVEL	_1KWD_Cecile_Clayworth
      1  52a0				   LEVEL_START SET	*
      2  52a0		       00 0a	   BANK_LEVEL__1KWD_Cecile_Clayworth =	_CURRENT_BANK
      3  52a0				   LEVEL__1KWD_Cecile_Clayworth SUBROUTINE
      4  52a0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  52a0
      2  52a0		       38 23 7c 33*	      .byte.b	"8#|3#.2-.#|#-$4-#|#-*2#2$#|#3-$-+#|#-*.-*-#|#6-#|8#",0
      0  52d4					      END_LEVEL	_1KWD_Cecile_Clayworth
      1  52d4		       00 34	   LEVEL_SIZE__1KWD_Cecile_Clayworth =	* - LEVEL_START
      2  52d4				  -	      IF	LEVEL_SIZE__1KWD_Cecile_Clayworth > MAX_LEVEL_SIZE
      3  52d4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__1KWD_Cecile_Clayworth
      4  52d4					      ENDIF
      0  52d4					      DEFL	_1EKT_Samantha_Gelson, "8#|#-*3-.#|#2-$-*-#|#-.$-$-#|#*-*2-*#|#.#-#2-#|#4-@-#|8#"
      0  52d4					      START_LEVEL	_1EKT_Samantha_Gelson
      1  52d4				   LEVEL_START SET	*
      2  52d4		       00 0a	   BANK_LEVEL__1EKT_Samantha_Gelson =	_CURRENT_BANK
      3  52d4				   LEVEL__1EKT_Samantha_Gelson SUBROUTINE
      4  52d4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  52d4
      2  52d4		       38 23 7c 23*	      .byte.b	"8#|#-*3-.#|#2-$-*-#|#-.$-$-#|#*-*2-*#|#.#-#2-#|#4-@-#|8#",0
      0  530d					      END_LEVEL	_1EKT_Samantha_Gelson
      1  530d		       00 39	   LEVEL_SIZE__1EKT_Samantha_Gelson =	* - LEVEL_START
      2  530d				  -	      IF	LEVEL_SIZE__1EKT_Samantha_Gelson > MAX_LEVEL_SIZE
      3  530d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__1EKT_Samantha_Gelson
      4  530d					      ENDIF
      0  530d					      DEFL	_0VM5_Andrea_Wadd, "7#|#3-#-#|#-$*2-#|#-.-+-#|#-*2$-#|2#2-.-#|7#"
      0  530d					      START_LEVEL	_0VM5_Andrea_Wadd
      1  530d				   LEVEL_START SET	*
      2  530d		       00 0a	   BANK_LEVEL__0VM5_Andrea_Wadd =	_CURRENT_BANK
      3  530d				   LEVEL__0VM5_Andrea_Wadd SUBROUTINE
      4  530d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  530d
      2  530d		       37 23 7c 23*	      .byte.b	"7#|#3-#-#|#-$*2-#|#-.-+-#|#-*2$-#|2#2-.-#|7#",0
      0  533a					      END_LEVEL	_0VM5_Andrea_Wadd
      1  533a		       00 2d	   LEVEL_SIZE__0VM5_Andrea_Wadd =	* - LEVEL_START
      2  533a				  -	      IF	LEVEL_SIZE__0VM5_Andrea_Wadd > MAX_LEVEL_SIZE
      3  533a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__0VM5_Andrea_Wadd
      4  533a					      ENDIF
      0  533a					      DEFL	_0PAL_Jill_Leatherby, "7#|#3-3#|#2-2*-#|#3-$-#|#2-$2.#|3#@2-#|7#"
      0  533a					      START_LEVEL	_0PAL_Jill_Leatherby
      1  533a				   LEVEL_START SET	*
      2  533a		       00 0a	   BANK_LEVEL__0PAL_Jill_Leatherby =	_CURRENT_BANK
      3  533a				   LEVEL__0PAL_Jill_Leatherby SUBROUTINE
      4  533a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  533a
      2  533a		       37 23 7c 23*	      .byte.b	"7#|#3-3#|#2-2*-#|#3-$-#|#2-$2.#|3#@2-#|7#",0
      0  5364					      END_LEVEL	_0PAL_Jill_Leatherby
      1  5364		       00 2a	   LEVEL_SIZE__0PAL_Jill_Leatherby =	* - LEVEL_START
      2  5364				  -	      IF	LEVEL_SIZE__0PAL_Jill_Leatherby > MAX_LEVEL_SIZE
      3  5364				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__0PAL_Jill_Leatherby
      4  5364					      ENDIF
      0  5364					      DEFL	_0IZ1_Sophia, "7#|#5-#|#@$.#-#|#*$2-.#|#-2$2-#|#-.-.-#|7#"
      0  5364					      START_LEVEL	_0IZ1_Sophia
      1  5364				   LEVEL_START SET	*
      2  5364		       00 0a	   BANK_LEVEL__0IZ1_Sophia =	_CURRENT_BANK
      3  5364				   LEVEL__0IZ1_Sophia SUBROUTINE
      4  5364				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5364
      2  5364		       37 23 7c 23*	      .byte.b	"7#|#5-#|#@$.#-#|#*$2-.#|#-2$2-#|#-.-.-#|7#",0
      0  538f					      END_LEVEL	_0IZ1_Sophia
      1  538f		       00 2b	   LEVEL_SIZE__0IZ1_Sophia =	* - LEVEL_START
      2  538f				  -	      IF	LEVEL_SIZE__0IZ1_Sophia > MAX_LEVEL_SIZE
      3  538f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__0IZ1_Sophia
      4  538f					      ENDIF
      0  538f					      DEFL	_0CNH_Alice, "7#|#.4-#|#$*-#-#|#.2-$*#|#-.$2-#|#@-*2-#|7#"
      0  538f					      START_LEVEL	_0CNH_Alice
      1  538f				   LEVEL_START SET	*
      2  538f		       00 0a	   BANK_LEVEL__0CNH_Alice =	_CURRENT_BANK
      3  538f				   LEVEL__0CNH_Alice SUBROUTINE
      4  538f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  538f
      2  538f		       37 23 7c 23*	      .byte.b	"7#|#.4-#|#$*-#-#|#.2-$*#|#-.$2-#|#@-*2-#|7#",0
      0  53bb					      END_LEVEL	_0CNH_Alice
      1  53bb		       00 2c	   LEVEL_SIZE__0CNH_Alice =	* - LEVEL_START
      2  53bb				  -	      IF	LEVEL_SIZE__0CNH_Alice > MAX_LEVEL_SIZE
      3  53bb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__0CNH_Alice
      4  53bb					      ENDIF
    113  53bb
    114  53bb
    115  53bb							;  START_LEVEL TowC
    116  53bb							;   .byte "4-5#|4-#3-#|4-#$2-#|2-3#2-$2#|2-#2-$-$-#|3#-#-2#-#3-6#|#3-#-2#-5#2-2.#|#-$2-$10-2.#|5#-3#-#@2#2-2.#|4-#5-9#|4-7#",0
    117  53bb							;  END_LEVEL TowC
    118  53bb
    119  53bb							;  START_LEVEL SimpleC
    120  53bb							;  .byte "7#|#.@-#-#|#$*-$-#|#3-$-#|#-..--#|#--*--#|7#",0
    121  53bb							;  END_LEVEL SimpleC
    122  53bb
    123  53bb							;  START_LEVEL bAlfa_DrFogh
    124  53bb							;   .byte "2-4#2-4#|-2#2-2#-#2-#|-#4-3#2-2#|2#2-2*2-#.2-2#|#2-*2-*-#*#2-#|#-*4-2*2-#-#|#-*-2#-*3-#-#|2#-*2-*#*#-#-#|-#$-2*-#-*-#-#|-#@#2-2#5-#|-2#2-4#2-3#|2-#2-#2-4#|2-#2-#|2-4#",0
    125  53bb							;  END_LEVEL bAlfa_DrFogh
    126  53bb
    127  53bb							;  START_LEVEL b51X_Sharpen
    128  53bb							;   .byte "-9#3-|-#7-#3-|-#-$-2$-$#3-|3#$#2-$-#3-|#.#3-2$-2#2-|#.3#3-$-#2-|#.#.-$-2#-3#|#3.$-$2#-$-#|#3.$3-$2-@#|#2.3#$3#-2#|#4.#5-#-|12#-",0
    129  53bb							;  END_LEVEL b51X_Sharpen
    130  53bb
    131  53bb							;  START_LEVEL bDarcy_Burnsell101
    132  53bb							;   .byte "8#|#2-.-$@#|#.#$*2$#|#2-.-*-#|#2$-2$.#|#.#-#2-#|#.2-.-.#|8#",0
    133  53bb							;  END_LEVEL bDarcy_Burnsell101
    134  53bb
    135  53bb							;  START_LEVEL bAislin101
    136  53bb							;  .byte "8#|2#-*-*.#|#2.$-$*#|#-.#-*.#|2#-$-$2#|#-#$-$-#|#2.2-$@#|8#",0
    137  53bb							;  END_LEVEL bAislin101
    138  53bb
    139  53bb							;  START_LEVEL b82X_Sharpen
    140  53bb							;  .byte "-11#8-|-#5-#3-2#7-|-#-$-$-$-#2-5#3-|-3#2-5#5-#3-|-#4.#5-3#-#3-|-#.4#2-4#3-#3-|-#4.4-#2-$-2#3-|-#-3.#3-#-3$5#|3#.7#2-$@$3-#|#-$3-5#-$-2#3-#|#-#.#-$6-$3#$-#|#-#.8#2-#2-$-#|#-#3.7-2#-2$-#|#3-7#-$-#-#2-#|5#5-#7-2#|10-9#-",0
    141  53bb							;  END_LEVEL b82X_Sharpen
    142  53bb
      0  53bb					      DEFL	Thomas_Reinke16, "-5#|2#3-3#|#6-2#|#-#-2#2-#|#2.*2-#-#|#2-*2-#-#|3#*2$2-#|2-#@-4#|2-4#"
      0  53bb					      START_LEVEL	Thomas_Reinke16
      1  53bb				   LEVEL_START SET	*
      2  53bb		       00 0a	   BANK_LEVEL_Thomas_Reinke16 =	_CURRENT_BANK
      3  53bb				   LEVEL_Thomas_Reinke16 SUBROUTINE
      4  53bb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  53bb
      2  53bb		       2d 35 23 7c*	      .byte.b	"-5#|2#3-3#|#6-2#|#-#-2#2-#|#2.*2-#-#|#2-*2-#-#|3#*2$2-#|2-#@-4#|2-4#",0
      0  5400					      END_LEVEL	Thomas_Reinke16
      1  5400		       00 45	   LEVEL_SIZE_Thomas_Reinke16 =	* - LEVEL_START
      2  5400				  -	      IF	LEVEL_SIZE_Thomas_Reinke16 > MAX_LEVEL_SIZE
      3  5400				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Thomas_Reinke16
      4  5400					      ENDIF
    144  5400
    145  5400
    146  5400							;Level element	Character	ASCII Code
    147  5400							;Wall	#	0x23
    148  5400							;Player	@	0x40
    149  5400							;Player on goal square	+	0x2b
    150  5400							;Box	$	0x24
    151  5400							;Box on goal square	*	0x2a
    152  5400							;Goal square	.	0x2e
    153  5400							;Floor	(Space)	0x20 or underscore
    154  5400
    155  5400							;This level ("Claire", by Lee J Haywood):
    156  5400
    157  5400							;#######
    158  5400							;#.@ # #
    159  5400							;#$* $ #
    160  5400							;#   $ #
    161  5400							;# ..	#
    162  5400							;#  *	#
    163  5400							;#######
    164  5400							;runlength encoded looks like this:
    165  5400
    166  5400							;The rows of the level are separated by "|"s. There has been a discussion in the Yahoo Group about what character should represent an empty square in May 2006. Finally the hyphen has been elected to be the standard character for an empty square. Nevertheless, programs are encouraged to support both, hyphens and underscores.
    167  5400
    168  5400							;If only two level elements are grouped together they may be run length encoded, but needn't to. Example:
    169  5400
    170  5400
    171  5400					      endif
    172  5400
    173  5400							; http://www.sourcecode.se/sokoban/levels
    174  5400							; Revenge Collection 7 - Marcus Hof
    175  5400							; partial
    176  5400
      0  5400					      DEFL	_Hof_0, "6#|#*.*.#4-6#|#2.$.7#3-#|2#2$9-$-#|-#2-$#2-3$.$@2#|-2#2.4#.2-.#|2-#.-10#|2-#.*-$-$-$-$-#|2-#.10-#|2-13#"
      0  5400					      START_LEVEL	_Hof_0
      1  5400				   LEVEL_START SET	*
      2  5400		       00 0a	   BANK_LEVEL__Hof_0 =	_CURRENT_BANK
      3  5400				   LEVEL__Hof_0 SUBROUTINE
      4  5400				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5400
      2  5400		       36 23 7c 23*	      .byte.b	"6#|#*.*.#4-6#|#2.$.7#3-#|2#2$9-$-#|-#2-$#2-3$.$@2#|-2#2.4#.2-.#|2-#.-10#|2-#.*-$-$-$-$-#|2-#.10-#|2-13#",0
      0  5468					      END_LEVEL	_Hof_0
      1  5468		       00 68	   LEVEL_SIZE__Hof_0 =	* - LEVEL_START
      2  5468				  -	      IF	LEVEL_SIZE__Hof_0 > MAX_LEVEL_SIZE
      3  5468				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_0
      4  5468					      ENDIF
      0  5468					      DEFL	_Hof_1, "8-11#|6-3#9-#|6-#3-$2#$#2$-#|6-#-2$@2-$4-#|6-3#-$-$2-$#-#|7#.#4-$4-#|#3.-.2-2#2$-$#-3#|2#5.9-#|-2#4.-9#|-8#"
      0  5468					      START_LEVEL	_Hof_1
      1  5468				   LEVEL_START SET	*
      2  5468		       00 0a	   BANK_LEVEL__Hof_1 =	_CURRENT_BANK
      3  5468				   LEVEL__Hof_1 SUBROUTINE
      4  5468				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5468
      2  5468		       38 2d 31 31*	      .byte.b	"8-11#|6-3#9-#|6-#3-$2#$#2$-#|6-#-2$@2-$4-#|6-3#-$-$2-$#-#|7#.#4-$4-#|#3.-.2-2#2$-$#-3#|2#5.9-#|-2#4.-9#|-8#",0
      0  54d4					      END_LEVEL	_Hof_1
      1  54d4		       00 6c	   LEVEL_SIZE__Hof_1 =	* - LEVEL_START
      2  54d4				  -	      IF	LEVEL_SIZE__Hof_1 > MAX_LEVEL_SIZE
      3  54d4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_1
      4  54d4					      ENDIF
      0  54d4					      DEFL	_Hof_2, "5-6#|5-#.3-#|2-4#.2$-#|2-#2.$2.-2#|2-#@2#.#-#|-7#-#|2#7-#|#2-$-#2$-#|#2-$2#-#-#|2#7-2#|-7#2-#|3-#-$-.2-#|3-#5-2#|3-7#"
      0  54d4					      START_LEVEL	_Hof_2
      1  54d4				   LEVEL_START SET	*
      2  54d4		       00 0a	   BANK_LEVEL__Hof_2 =	_CURRENT_BANK
      3  54d4				   LEVEL__Hof_2 SUBROUTINE
      4  54d4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  54d4
      2  54d4		       35 2d 36 23*	      .byte.b	"5-6#|5-#.3-#|2-4#.2$-#|2-#2.$2.-2#|2-#@2#.#-#|-7#-#|2#7-#|#2-$-#2$-#|#2-$2#-#-#|2#7-2#|-7#2-#|3-#-$-.2-#|3-#5-2#|3-7#",0
      0  554a					      END_LEVEL	_Hof_2
      1  554a		       00 76	   LEVEL_SIZE__Hof_2 =	* - LEVEL_START
      2  554a					      IF	LEVEL_SIZE__Hof_2 > MAX_LEVEL_SIZE
      3  554a				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_2
      4  554a					      ENDIF
      0  554a					      DEFL	_Hof_3, "4-4#|5#2-#|#6-2#|#-2.#.*-#|2#$-2$2-#|-#2-#2-@#|-8#"
      0  554a					      START_LEVEL	_Hof_3
      1  554a				   LEVEL_START SET	*
      2  554a		       00 0a	   BANK_LEVEL__Hof_3 =	_CURRENT_BANK
      3  554a				   LEVEL__Hof_3 SUBROUTINE
      4  554a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  554a
      2  554a		       34 2d 34 23*	      .byte.b	"4-4#|5#2-#|#6-2#|#-2.#.*-#|2#$-2$2-#|-#2-#2-@#|-8#",0
      0  557d					      END_LEVEL	_Hof_3
      1  557d		       00 33	   LEVEL_SIZE__Hof_3 =	* - LEVEL_START
      2  557d				  -	      IF	LEVEL_SIZE__Hof_3 > MAX_LEVEL_SIZE
      3  557d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_3
      4  557d					      ENDIF
      0  557d					      DEFL	_Hof_4, "-4#|2#2-11#|#@$11-#|#-10*.-#|#13-#|15#"
      0  557d					      START_LEVEL	_Hof_4
      1  557d				   LEVEL_START SET	*
      2  557d		       00 0a	   BANK_LEVEL__Hof_4 =	_CURRENT_BANK
      3  557d				   LEVEL__Hof_4 SUBROUTINE
      4  557d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  557d
      2  557d		       2d 34 23 7c*	      .byte.b	"-4#|2#2-11#|#@$11-#|#-10*.-#|#13-#|15#",0
      0  55a4					      END_LEVEL	_Hof_4
      1  55a4		       00 27	   LEVEL_SIZE__Hof_4 =	* - LEVEL_START
      2  55a4				  -	      IF	LEVEL_SIZE__Hof_4 > MAX_LEVEL_SIZE
      3  55a4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_4
      4  55a4					      ENDIF
      0  55a4					      DEFL	_Hof_5, "11#|#8-2#|#-5*3-#|#5-*2$@#|#*.4*3-#|#*.7*#|3#5*3#|2-#4*2#|2-6#"
      0  55a4					      START_LEVEL	_Hof_5
      1  55a4				   LEVEL_START SET	*
      2  55a4		       00 0a	   BANK_LEVEL__Hof_5 =	_CURRENT_BANK
      3  55a4				   LEVEL__Hof_5 SUBROUTINE
      4  55a4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  55a4
      2  55a4		       31 31 23 7c*	      .byte.b	"11#|#8-2#|#-5*3-#|#5-*2$@#|#*.4*3-#|#*.7*#|3#5*3#|2-#4*2#|2-6#",0
      0  55e3					      END_LEVEL	_Hof_5
      1  55e3		       00 3f	   LEVEL_SIZE__Hof_5 =	* - LEVEL_START
      2  55e3				  -	      IF	LEVEL_SIZE__Hof_5 > MAX_LEVEL_SIZE
      3  55e3				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_5
      4  55e3					      ENDIF
      0  55e3					      DEFL	_Hof_6, "2-7#|2-#5-#|3#-3*-#|#-$-*+*-#|#3-3*-#|3#5-#|2-#2-4#|2-4#"
      0  55e3					      START_LEVEL	_Hof_6
      1  55e3				   LEVEL_START SET	*
      2  55e3		       00 0a	   BANK_LEVEL__Hof_6 =	_CURRENT_BANK
      3  55e3				   LEVEL__Hof_6 SUBROUTINE
      4  55e3				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  55e3
      2  55e3		       32 2d 37 23*	      .byte.b	"2-7#|2-#5-#|3#-3*-#|#-$-*+*-#|#3-3*-#|3#5-#|2-#2-4#|2-4#",0
      0  561c					      END_LEVEL	_Hof_6
      1  561c		       00 39	   LEVEL_SIZE__Hof_6 =	* - LEVEL_START
      2  561c				  -	      IF	LEVEL_SIZE__Hof_6 > MAX_LEVEL_SIZE
      3  561c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_6
      4  561c					      ENDIF
      0  561c					      DEFL	_Hof_7, "17#|2#13-2#|#-#-$2-$2-$-$*#-#|#3-*.3*.3*-*-#|#-$-$-.@.$-.4-#|#-$2-*-*2.$.2-*-#|#-#-2*-2*-*-*.#-#|2#13-2#|17#"
      0  561c					      START_LEVEL	_Hof_7
      1  561c				   LEVEL_START SET	*
      2  561c		       00 0a	   BANK_LEVEL__Hof_7 =	_CURRENT_BANK
      3  561c				   LEVEL__Hof_7 SUBROUTINE
      4  561c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  561c
      2  561c		       31 37 23 7c*	      .byte.b	"17#|2#13-2#|#-#-$2-$2-$-$*#-#|#3-*.3*.3*-*-#|#-$-$-.@.$-.4-#|#-$2-*-*2.$.2-*-#|#-#-2*-2*-*-*.#-#|2#13-2#|17#",0
      0  5689					      END_LEVEL	_Hof_7
      1  5689		       00 6d	   LEVEL_SIZE__Hof_7 =	* - LEVEL_START
      2  5689				  -	      IF	LEVEL_SIZE__Hof_7 > MAX_LEVEL_SIZE
      3  5689				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_7
      4  5689					      ENDIF
      0  5689					      DEFL	_Hof_8, "5#|#-2.5#|#2-2.-@-6#|#-$-3$2.-3.3#|5#3-3$4-#|4-5#3-2$-#|8-5#2-#|12-4#"
      0  5689					      START_LEVEL	_Hof_8
      1  5689				   LEVEL_START SET	*
      2  5689		       00 0a	   BANK_LEVEL__Hof_8 =	_CURRENT_BANK
      3  5689				   LEVEL__Hof_8 SUBROUTINE
      4  5689				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5689
      2  5689		       35 23 7c 23*	      .byte.b	"5#|#-2.5#|#2-2.-@-6#|#-$-3$2.-3.3#|5#3-3$4-#|4-5#3-2$-#|8-5#2-#|12-4#",0
      0  56cf					      END_LEVEL	_Hof_8
      1  56cf		       00 46	   LEVEL_SIZE__Hof_8 =	* - LEVEL_START
      2  56cf				  -	      IF	LEVEL_SIZE__Hof_8 > MAX_LEVEL_SIZE
      3  56cf				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_8
      4  56cf					      ENDIF
      0  56cf					      DEFL	_Hof_9, "-6#|-#4-#|2#2$2-7#|#-.#$.#5.#|#-*$2-#-3$-#|#-$.$.2-$@$-#|#5-#-3$-#|7#5.#|6-7#"
      0  56cf					      START_LEVEL	_Hof_9
      1  56cf				   LEVEL_START SET	*
      2  56cf		       00 0a	   BANK_LEVEL__Hof_9 =	_CURRENT_BANK
      3  56cf				   LEVEL__Hof_9 SUBROUTINE
      4  56cf				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  56cf
      2  56cf		       2d 36 23 7c*	      .byte.b	"-6#|-#4-#|2#2$2-7#|#-.#$.#5.#|#-*$2-#-3$-#|#-$.$.2-$@$-#|#5-#-3$-#|7#5.#|6-7#",0
      0  571d					      END_LEVEL	_Hof_9
      1  571d		       00 4e	   LEVEL_SIZE__Hof_9 =	* - LEVEL_START
      2  571d				  -	      IF	LEVEL_SIZE__Hof_9 > MAX_LEVEL_SIZE
      3  571d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__Hof_9
      4  571d					      ENDIF
    187  571d
    188  571d							; Zone 26 2014-04-13117  Dries de Clercq
      0  571d					      DEFL	Zone_26_0, "-4#|-#-.4#|2#.4 #|#2.-2#-#|#-#-2#-#|#-$2 $-#|2#-2$3#|-#@2 #|-5#"
      0  571d					      START_LEVEL	Zone_26_0
      1  571d				   LEVEL_START SET	*
      2  571d		       00 0a	   BANK_LEVEL_Zone_26_0 =	_CURRENT_BANK
      3  571d				   LEVEL_Zone_26_0 SUBROUTINE
      4  571d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  571d
      2  571d		       2d 34 23 7c*	      .byte.b	"-4#|-#-.4#|2#.4 #|#2.-2#-#|#-#-2#-#|#-$2 $-#|2#-2$3#|-#@2 #|-5#",0
      0  575d					      END_LEVEL	Zone_26_0
      1  575d		       00 40	   LEVEL_SIZE_Zone_26_0 =	* - LEVEL_START
      2  575d				  -	      IF	LEVEL_SIZE_Zone_26_0 > MAX_LEVEL_SIZE
      3  575d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_0
      4  575d					      ENDIF
      0  575d					      DEFL	Zone_26_1, "|-7#|-#5 #|2#.-2#-#|#-.$+#-#|#2 $*#-#|3#-$2 #|2 #2 3#|2 #2 #|2 4#"
      0  575d					      START_LEVEL	Zone_26_1
      1  575d				   LEVEL_START SET	*
      2  575d		       00 0a	   BANK_LEVEL_Zone_26_1 =	_CURRENT_BANK
      3  575d				   LEVEL_Zone_26_1 SUBROUTINE
      4  575d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  575d
      2  575d		       7c 2d 37 23*	      .byte.b	"|-7#|-#5 #|2#.-2#-#|#-.$+#-#|#2 $*#-#|3#-$2 #|2 #2 3#|2 #2 #|2 4#",0
      0  579f					      END_LEVEL	Zone_26_1
      1  579f		       00 42	   LEVEL_SIZE_Zone_26_1 =	* - LEVEL_START
      2  579f				  -	      IF	LEVEL_SIZE_Zone_26_1 > MAX_LEVEL_SIZE
      3  579f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_1
      4  579f					      ENDIF
      0  579f					      DEFL	Zone_26_2, "|-5#|-#3 #|-#$#-3#|-#2 $2 #|2#-.-2.#|#-$2#.-#|#@$3 2#|4#2 #|3 4#"
      0  579f					      START_LEVEL	Zone_26_2
      1  579f				   LEVEL_START SET	*
      2  579f		       00 0a	   BANK_LEVEL_Zone_26_2 =	_CURRENT_BANK
      3  579f				   LEVEL_Zone_26_2 SUBROUTINE
      4  579f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  579f
      2  579f		       7c 2d 35 23*	      .byte.b	"|-5#|-#3 #|-#$#-3#|-#2 $2 #|2#-.-2.#|#-$2#.-#|#@$3 2#|4#2 #|3 4#",0
      0  57e0					      END_LEVEL	Zone_26_2
      1  57e0		       00 41	   LEVEL_SIZE_Zone_26_2 =	* - LEVEL_START
      2  57e0				  -	      IF	LEVEL_SIZE_Zone_26_2 > MAX_LEVEL_SIZE
      3  57e0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_2
      4  57e0					      ENDIF
    192  57e0
      0  57e0					      CHECK_BANK_SIZE	"LEVELS6 -- full 2K"
      1  57e0		       07 e0	   .TEMP      =	* - BANK_START
 LEVELS6 -- full 2K (2K) SIZE =  $7e0 , FREE= $20
      2  57e0					      ECHO	"LEVELS6 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  57e0				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  57e0				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  57e0				  -	      ERR
      6  57e0					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS7.asm LEVEL 2 PASS 3
      0  57e0					      include	"BANK_LEVELS7.asm"
      1  57e0							;    Sokoboo - a Sokoban implementation
      2  57e0							;    using a generic tile-based display engine for the Atari 2600
      3  57e0							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  57e0							;
      5  57e0							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  57e0							;
      7  57e0							;    Code related to the generic tile-based display engine was developed by
      8  57e0							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  57e0							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  57e0							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  57e0							;
     12  57e0							;    Code related to music and sound effects uses the TIATracker music player
     13  57e0							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  57e0							;    directory for Apache licensing details.
     15  57e0							;
     16  57e0							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  57e0							;    See the copyright notices in the License directory for a list of level
     18  57e0							;    contributors.
     19  57e0							;
     20  57e0							;    Except where otherwise indicated, this software is released under the
     21  57e0							;    following licensing arrangement...
     22  57e0							;
     23  57e0							;    This program is free software: you can redistribute it and/or modify
     24  57e0							;    it under the terms of the GNU General Public License as published by
     25  57e0							;    the Free Software Foundation, either version 3 of the License, or
     26  57e0							;    (at your option) any later version.
     27  57e0							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  57e0
     29  57e0							;    This program is distributed in the hope that it will be useful,
     30  57e0							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  57e0							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  57e0							;    GNU General Public License for more details.
     33  57e0
     34  57e0							; level definitions
     35  57e0							; Sample level definitions.
     36  57e0							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  57e0							; have as many banks as you like.
     38  57e0
      0  57e0					      NEWBANK	LEVELS7
      1  5ff7 ????				      SEG	LEVELS7
      2  5800					      ORG	ORIGIN
      3  5800					      RORG	$F000
      4  5800				   BANK_START SET	*
      5  5800				   LEVELS7    SET	ORIGIN / 2048
      6  5800				   ORIGIN     SET	ORIGIN + 2048
      7  5800				   _CURRENT_BANK SET	LEVELS7
     40  5800
      0  5800					      DEFL	Zone_26_3, "|3 4#|3 #2 #|3 #-.#|4#2 3#|#-.2 2.-#|#-$#2$2 #|2#@$-#-2#|-3#3 #|3 5#"
      0  5800					      START_LEVEL	Zone_26_3
      1  5800				   LEVEL_START SET	*
      2  5800		       00 0b	   BANK_LEVEL_Zone_26_3 =	_CURRENT_BANK
      3  5800				   LEVEL_Zone_26_3 SUBROUTINE
      4  5800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5800
      2  5800		       7c 33 20 34*	      .byte.b	"|3 4#|3 #2 #|3 #-.#|4#2 3#|#-.2 2.-#|#-$#2$2 #|2#@$-#-2#|-3#3 #|3 5#",0
      0  5845					      END_LEVEL	Zone_26_3
      1  5845		       00 45	   LEVEL_SIZE_Zone_26_3 =	* - LEVEL_START
      2  5845				  -	      IF	LEVEL_SIZE_Zone_26_3 > MAX_LEVEL_SIZE
      3  5845				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_3
      4  5845					      ENDIF
      0  5845					      DEFL	Zone_26_4, "|-6#|-#.3 #|2#-2#-#|#-2.$-2#|#3 #$-#|#-.$-$@#|2#2 4#|-#2 #|-4#"
      0  5845					      START_LEVEL	Zone_26_4
      1  5845				   LEVEL_START SET	*
      2  5845		       00 0b	   BANK_LEVEL_Zone_26_4 =	_CURRENT_BANK
      3  5845				   LEVEL_Zone_26_4 SUBROUTINE
      4  5845				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5845
      2  5845		       7c 2d 36 23*	      .byte.b	"|-6#|-#.3 #|2#-2#-#|#-2.$-2#|#3 #$-#|#-.$-$@#|2#2 4#|-#2 #|-4#",0
      0  5884					      END_LEVEL	Zone_26_4
      1  5884		       00 3f	   LEVEL_SIZE_Zone_26_4 =	* - LEVEL_START
      2  5884				  -	      IF	LEVEL_SIZE_Zone_26_4 > MAX_LEVEL_SIZE
      3  5884				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_4
      4  5884					      ENDIF
      0  5884					      DEFL	Zone_26_5, "|-4#|-#2 4#|-#$2 $-#|-#-.-.-#|2#$2#.-#|#2 .#-2#|#2 $2 #|4#-@#|3 4#"
      0  5884					      START_LEVEL	Zone_26_5
      1  5884				   LEVEL_START SET	*
      2  5884		       00 0b	   BANK_LEVEL_Zone_26_5 =	_CURRENT_BANK
      3  5884				   LEVEL_Zone_26_5 SUBROUTINE
      4  5884				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5884
      2  5884		       7c 2d 34 23*	      .byte.b	"|-4#|-#2 4#|-#$2 $-#|-#-.-.-#|2#$2#.-#|#2 .#-2#|#2 $2 #|4#-@#|3 4#",0
      0  58c7					      END_LEVEL	Zone_26_5
      1  58c7		       00 43	   LEVEL_SIZE_Zone_26_5 =	* - LEVEL_START
      2  58c7				  -	      IF	LEVEL_SIZE_Zone_26_5 > MAX_LEVEL_SIZE
      3  58c7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_5
      4  58c7					      ENDIF
      0  58c7					      DEFL	Zone_26_6, "|-5#|-#3 #|-#-#$#|-#-$@3#|2#-#$2 #|#2 .-.-#|#2 .#$-#|3#2 .2#|2 5#"
      0  58c7					      START_LEVEL	Zone_26_6
      1  58c7				   LEVEL_START SET	*
      2  58c7		       00 0b	   BANK_LEVEL_Zone_26_6 =	_CURRENT_BANK
      3  58c7				   LEVEL_Zone_26_6 SUBROUTINE
      4  58c7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  58c7
      2  58c7		       7c 2d 35 23*	      .byte.b	"|-5#|-#3 #|-#-#$#|-#-$@3#|2#-#$2 #|#2 .-.-#|#2 .#$-#|3#2 .2#|2 5#",0
      0  5909					      END_LEVEL	Zone_26_6
      1  5909		       00 42	   LEVEL_SIZE_Zone_26_6 =	* - LEVEL_START
      2  5909				  -	      IF	LEVEL_SIZE_Zone_26_6 > MAX_LEVEL_SIZE
      3  5909				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_6
      4  5909					      ENDIF
      0  5909					      DEFL	Zone_26_7, "|-4#|-#2 4#|-#$2 $-#|-#-.-.-#|2#$2#.-#|#-@#.-2#|#-$3 #|4#2 #|3 4#"
      0  5909					      START_LEVEL	Zone_26_7
      1  5909				   LEVEL_START SET	*
      2  5909		       00 0b	   BANK_LEVEL_Zone_26_7 =	_CURRENT_BANK
      3  5909				   LEVEL_Zone_26_7 SUBROUTINE
      4  5909				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5909
      2  5909		       7c 2d 34 23*	      .byte.b	"|-4#|-#2 4#|-#$2 $-#|-#-.-.-#|2#$2#.-#|#-@#.-2#|#-$3 #|4#2 #|3 4#",0
      0  594b					      END_LEVEL	Zone_26_7
      1  594b		       00 42	   LEVEL_SIZE_Zone_26_7 =	* - LEVEL_START
      2  594b				  -	      IF	LEVEL_SIZE_Zone_26_7 > MAX_LEVEL_SIZE
      3  594b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_7
      4  594b					      ENDIF
      0  594b					      DEFL	Zone_26_8, "|2 5#|3#3 #|#-2$#-2#|#-$-2.-#|#-#-2.-#|#-#2$2 #|#.-@4#|5#"
      0  594b					      START_LEVEL	Zone_26_8
      1  594b				   LEVEL_START SET	*
      2  594b		       00 0b	   BANK_LEVEL_Zone_26_8 =	_CURRENT_BANK
      3  594b				   LEVEL_Zone_26_8 SUBROUTINE
      4  594b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  594b
      2  594b		       7c 32 20 35*	      .byte.b	"|2 5#|3#3 #|#-2$#-2#|#-$-2.-#|#-#-2.-#|#-#2$2 #|#.-@4#|5#",0
      0  5985					      END_LEVEL	Zone_26_8
      1  5985		       00 3a	   LEVEL_SIZE_Zone_26_8 =	* - LEVEL_START
      2  5985				  -	      IF	LEVEL_SIZE_Zone_26_8 > MAX_LEVEL_SIZE
      3  5985				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_8
      4  5985					      ENDIF
      0  5985					      DEFL	Zone_26_9, "|7#|#5 #|#-#.#-#|#-$-$-#|2#-2*-#|-#@#.-#|-#-$2 #|-3#-.#|3 4#"
      0  5985					      START_LEVEL	Zone_26_9
      1  5985				   LEVEL_START SET	*
      2  5985		       00 0b	   BANK_LEVEL_Zone_26_9 =	_CURRENT_BANK
      3  5985				   LEVEL_Zone_26_9 SUBROUTINE
      4  5985				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5985
      2  5985		       7c 37 23 7c*	      .byte.b	"|7#|#5 #|#-#.#-#|#-$-$-#|2#-2*-#|-#@#.-#|-#-$2 #|-3#-.#|3 4#",0
      0  59c2					      END_LEVEL	Zone_26_9
      1  59c2		       00 3d	   LEVEL_SIZE_Zone_26_9 =	* - LEVEL_START
      2  59c2				  -	      IF	LEVEL_SIZE_Zone_26_9 > MAX_LEVEL_SIZE
      3  59c2				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_9
      4  59c2					      ENDIF
     48  59c2
      0  59c2					      DEFL	Zone_26_10, "|-5#|2#2 .3#|#@*2 $-#|#-#$.-.#|#3 #$.#|3#$#2 #|2 #4 #|2 6#"
      0  59c2					      START_LEVEL	Zone_26_10
      1  59c2				   LEVEL_START SET	*
      2  59c2		       00 0b	   BANK_LEVEL_Zone_26_10 =	_CURRENT_BANK
      3  59c2				   LEVEL_Zone_26_10 SUBROUTINE
      4  59c2				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  59c2
      2  59c2		       7c 2d 35 23*	      .byte.b	"|-5#|2#2 .3#|#@*2 $-#|#-#$.-.#|#3 #$.#|3#$#2 #|2 #4 #|2 6#",0
      0  59fd					      END_LEVEL	Zone_26_10
      1  59fd		       00 3b	   LEVEL_SIZE_Zone_26_10 =	* - LEVEL_START
      2  59fd				  -	      IF	LEVEL_SIZE_Zone_26_10 > MAX_LEVEL_SIZE
      3  59fd				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_10
      4  59fd					      ENDIF
      0  59fd					      DEFL	Zone_26_11, "|3 5#|4#2 .#|#@$.$#-#|#$#.2 .#|#.3 #-#|#2 $-$-#|#2 5#|4#"
      0  59fd					      START_LEVEL	Zone_26_11
      1  59fd				   LEVEL_START SET	*
      2  59fd		       00 0b	   BANK_LEVEL_Zone_26_11 =	_CURRENT_BANK
      3  59fd				   LEVEL_Zone_26_11 SUBROUTINE
      4  59fd				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  59fd
      2  59fd		       7c 33 20 35*	      .byte.b	"|3 5#|4#2 .#|#@$.$#-#|#$#.2 .#|#.3 #-#|#2 $-$-#|#2 5#|4#",0
      0  5a36					      END_LEVEL	Zone_26_11
      1  5a36		       00 39	   LEVEL_SIZE_Zone_26_11 =	* - LEVEL_START
      2  5a36				  -	      IF	LEVEL_SIZE_Zone_26_11 > MAX_LEVEL_SIZE
      3  5a36				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_11
      4  5a36					      ENDIF
      0  5a36					      DEFL	Zone_26_12, "|6#|#2 .-3#|#-#-$2 #|#2 .-#-#|2#.-2$.#|-#$#-$-#|-#+2 3#|-5#"
      0  5a36					      START_LEVEL	Zone_26_12
      1  5a36				   LEVEL_START SET	*
      2  5a36		       00 0b	   BANK_LEVEL_Zone_26_12 =	_CURRENT_BANK
      3  5a36				   LEVEL_Zone_26_12 SUBROUTINE
      4  5a36				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5a36
      2  5a36		       7c 36 23 7c*	      .byte.b	"|6#|#2 .-3#|#-#-$2 #|#2 .-#-#|2#.-2$.#|-#$#-$-#|-#+2 3#|-5#",0
      0  5a72					      END_LEVEL	Zone_26_12
      1  5a72		       00 3c	   LEVEL_SIZE_Zone_26_12 =	* - LEVEL_START
      2  5a72				  -	      IF	LEVEL_SIZE_Zone_26_12 > MAX_LEVEL_SIZE
      3  5a72				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_12
      4  5a72					      ENDIF
      0  5a72					      DEFL	Zone_26_13, "|6#|#4 #|#.#$-#|#-#.-3#|#.$2 $-#|#-#-2*@#|#5 2#|7#"
      0  5a72					      START_LEVEL	Zone_26_13
      1  5a72				   LEVEL_START SET	*
      2  5a72		       00 0b	   BANK_LEVEL_Zone_26_13 =	_CURRENT_BANK
      3  5a72				   LEVEL_Zone_26_13 SUBROUTINE
      4  5a72				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5a72
      2  5a72		       7c 36 23 7c*	      .byte.b	"|6#|#4 #|#.#$-#|#-#.-3#|#.$2 $-#|#-#-2*@#|#5 2#|7#",0
      0  5aa5					      END_LEVEL	Zone_26_13
      1  5aa5		       00 33	   LEVEL_SIZE_Zone_26_13 =	* - LEVEL_START
      2  5aa5				  -	      IF	LEVEL_SIZE_Zone_26_13 > MAX_LEVEL_SIZE
      3  5aa5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_13
      4  5aa5					      ENDIF
      0  5aa5					      DEFL	Zone_26_14, "|2 4#|-2#2 2#|-#2 *+#|2#-#-$#|#-$-*-#|#-#-$-#|#.2 .-#|3#3 #|2 5#"
      0  5aa5					      START_LEVEL	Zone_26_14
      1  5aa5				   LEVEL_START SET	*
      2  5aa5		       00 0b	   BANK_LEVEL_Zone_26_14 =	_CURRENT_BANK
      3  5aa5				   LEVEL_Zone_26_14 SUBROUTINE
      4  5aa5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5aa5
      2  5aa5		       7c 32 20 34*	      .byte.b	"|2 4#|-2#2 2#|-#2 *+#|2#-#-$#|#-$-*-#|#-#-$-#|#.2 .-#|3#3 #|2 5#",0
      0  5ae6					      END_LEVEL	Zone_26_14
      1  5ae6		       00 41	   LEVEL_SIZE_Zone_26_14 =	* - LEVEL_START
      2  5ae6				  -	      IF	LEVEL_SIZE_Zone_26_14 > MAX_LEVEL_SIZE
      3  5ae6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_14
      4  5ae6					      ENDIF
      0  5ae6					      DEFL	Zone_26_15, "|7#|#5 #|#-#-.-#|#3 $-#|2#-#*-#|-#$#.-#|-#2 $*#|-3#@.#|3 4#"
      0  5ae6					      START_LEVEL	Zone_26_15
      1  5ae6				   LEVEL_START SET	*
      2  5ae6		       00 0b	   BANK_LEVEL_Zone_26_15 =	_CURRENT_BANK
      3  5ae6				   LEVEL_Zone_26_15 SUBROUTINE
      4  5ae6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5ae6
      2  5ae6		       7c 37 23 7c*	      .byte.b	"|7#|#5 #|#-#-.-#|#3 $-#|2#-#*-#|-#$#.-#|-#2 $*#|-3#@.#|3 4#",0
      0  5b22					      END_LEVEL	Zone_26_15
      1  5b22		       00 3c	   LEVEL_SIZE_Zone_26_15 =	* - LEVEL_START
      2  5b22				  -	      IF	LEVEL_SIZE_Zone_26_15 > MAX_LEVEL_SIZE
      3  5b22				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_15
      4  5b22					      ENDIF
      0  5b22					      DEFL	Zone_26_16, "|3 4#|4#-@#|#-$-*$#|#2 #2 2#|#2 $*2 #|#-2.-#-#|3#3 .#|2 6#"
      0  5b22					      START_LEVEL	Zone_26_16
      1  5b22				   LEVEL_START SET	*
      2  5b22		       00 0b	   BANK_LEVEL_Zone_26_16 =	_CURRENT_BANK
      3  5b22				   LEVEL_Zone_26_16 SUBROUTINE
      4  5b22				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5b22
      2  5b22		       7c 33 20 34*	      .byte.b	"|3 4#|4#-@#|#-$-*$#|#2 #2 2#|#2 $*2 #|#-2.-#-#|3#3 .#|2 6#",0
      0  5b5d					      END_LEVEL	Zone_26_16
      1  5b5d		       00 3b	   LEVEL_SIZE_Zone_26_16 =	* - LEVEL_START
      2  5b5d				  -	      IF	LEVEL_SIZE_Zone_26_16 > MAX_LEVEL_SIZE
      3  5b5d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_16
      4  5b5d					      ENDIF
      0  5b5d					      DEFL	Zone_26_17, "|2 4#|2 #2 #|3#2 #|#2 *+#|#-#-$3#|#-$.*2 2#|2#3 $2 #|-4#-.-#|4 5#"
      0  5b5d					      START_LEVEL	Zone_26_17
      1  5b5d				   LEVEL_START SET	*
      2  5b5d		       00 0b	   BANK_LEVEL_Zone_26_17 =	_CURRENT_BANK
      3  5b5d				   LEVEL_Zone_26_17 SUBROUTINE
      4  5b5d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5b5d
      2  5b5d		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 #|3#2 #|#2 *+#|#-#-$3#|#-$.*2 2#|2#3 $2 #|-4#-.-#|4 5#",0
      0  5b9f					      END_LEVEL	Zone_26_17
      1  5b9f		       00 42	   LEVEL_SIZE_Zone_26_17 =	* - LEVEL_START
      2  5b9f				  -	      IF	LEVEL_SIZE_Zone_26_17 > MAX_LEVEL_SIZE
      3  5b9f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_17
      4  5b9f					      ENDIF
      0  5b9f					      DEFL	Zone_26_18, "|5#|#3 4#|#-$2 $-#|2#2.$-.#|#2 #.$-#|#3 *@2#|4#2 #|3 4#"
      0  5b9f					      START_LEVEL	Zone_26_18
      1  5b9f				   LEVEL_START SET	*
      2  5b9f		       00 0b	   BANK_LEVEL_Zone_26_18 =	_CURRENT_BANK
      3  5b9f				   LEVEL_Zone_26_18 SUBROUTINE
      4  5b9f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5b9f
      2  5b9f		       7c 35 23 7c*	      .byte.b	"|5#|#3 4#|#-$2 $-#|2#2.$-.#|#2 #.$-#|#3 *@2#|4#2 #|3 4#",0
      0  5bd7					      END_LEVEL	Zone_26_18
      1  5bd7		       00 38	   LEVEL_SIZE_Zone_26_18 =	* - LEVEL_START
      2  5bd7				  -	      IF	LEVEL_SIZE_Zone_26_18 > MAX_LEVEL_SIZE
      3  5bd7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_18
      4  5bd7					      ENDIF
      0  5bd7					      DEFL	Zone_26_19, "|6#|#3 .#|#-$#-2#|2#@$.-#|2#$*2 #|#-.-.-#|#-$2 2#|#2 3#|4#"
      0  5bd7					      START_LEVEL	Zone_26_19
      1  5bd7				   LEVEL_START SET	*
      2  5bd7		       00 0b	   BANK_LEVEL_Zone_26_19 =	_CURRENT_BANK
      3  5bd7				   LEVEL_Zone_26_19 SUBROUTINE
      4  5bd7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5bd7
      2  5bd7		       7c 36 23 7c*	      .byte.b	"|6#|#3 .#|#-$#-2#|2#@$.-#|2#$*2 #|#-.-.-#|#-$2 2#|#2 3#|4#",0
      0  5c12					      END_LEVEL	Zone_26_19
      1  5c12		       00 3b	   LEVEL_SIZE_Zone_26_19 =	* - LEVEL_START
      2  5c12				  -	      IF	LEVEL_SIZE_Zone_26_19 > MAX_LEVEL_SIZE
      3  5c12				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_19
      4  5c12					      ENDIF
     59  5c12
      0  5c12					      DEFL	Zone_26_20, "|7#|#+4 2#|#3 2$-#|#.#$3 #|#.#2 $-#|#.#$4#|#.2 #|5#"
      0  5c12					      START_LEVEL	Zone_26_20
      1  5c12				   LEVEL_START SET	*
      2  5c12		       00 0b	   BANK_LEVEL_Zone_26_20 =	_CURRENT_BANK
      3  5c12				   LEVEL_Zone_26_20 SUBROUTINE
      4  5c12				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5c12
      2  5c12		       7c 37 23 7c*	      .byte.b	"|7#|#+4 2#|#3 2$-#|#.#$3 #|#.#2 $-#|#.#$4#|#.2 #|5#",0
      0  5c46					      END_LEVEL	Zone_26_20
      1  5c46		       00 34	   LEVEL_SIZE_Zone_26_20 =	* - LEVEL_START
      2  5c46				  -	      IF	LEVEL_SIZE_Zone_26_20 > MAX_LEVEL_SIZE
      3  5c46				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_20
      4  5c46					      ENDIF
      0  5c46					      DEFL	Zone_26_21, "|4#|#2 4#|#-.@2 #|#$-#$-#|#-$2 2#|#.*.$#|#-#2 #|#2 .-#|6#"
      0  5c46					      START_LEVEL	Zone_26_21
      1  5c46				   LEVEL_START SET	*
      2  5c46		       00 0b	   BANK_LEVEL_Zone_26_21 =	_CURRENT_BANK
      3  5c46				   LEVEL_Zone_26_21 SUBROUTINE
      4  5c46				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5c46
      2  5c46		       7c 34 23 7c*	      .byte.b	"|4#|#2 4#|#-.@2 #|#$-#$-#|#-$2 2#|#.*.$#|#-#2 #|#2 .-#|6#",0
      0  5c80					      END_LEVEL	Zone_26_21
      1  5c80		       00 3a	   LEVEL_SIZE_Zone_26_21 =	* - LEVEL_START
      2  5c80				  -	      IF	LEVEL_SIZE_Zone_26_21 > MAX_LEVEL_SIZE
      3  5c80				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_21
      4  5c80					      ENDIF
      0  5c80					      DEFL	Zone_26_22, "|-7#|-#5 #|2#$-2#.#|#-$2 #.#|#@2$2 .#|2#2 $2.#|-#2 4#|-4#"
      0  5c80					      START_LEVEL	Zone_26_22
      1  5c80				   LEVEL_START SET	*
      2  5c80		       00 0b	   BANK_LEVEL_Zone_26_22 =	_CURRENT_BANK
      3  5c80				   LEVEL_Zone_26_22 SUBROUTINE
      4  5c80				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5c80
      2  5c80		       7c 2d 37 23*	      .byte.b	"|-7#|-#5 #|2#$-2#.#|#-$2 #.#|#@2$2 .#|2#2 $2.#|-#2 4#|-4#",0
      0  5cba					      END_LEVEL	Zone_26_22
      1  5cba		       00 3a	   LEVEL_SIZE_Zone_26_22 =	* - LEVEL_START
      2  5cba				  -	      IF	LEVEL_SIZE_Zone_26_22 > MAX_LEVEL_SIZE
      3  5cba				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_22
      4  5cba					      ENDIF
      0  5cba					      DEFL	Zone_26_23, "|-5#|-#3 #|-#-2$#|-#-$@#|2#-#$3#|#2.2 $-#|#-2.-.-#|2#3 3#|-5#"
      0  5cba					      START_LEVEL	Zone_26_23
      1  5cba				   LEVEL_START SET	*
      2  5cba		       00 0b	   BANK_LEVEL_Zone_26_23 =	_CURRENT_BANK
      3  5cba				   LEVEL_Zone_26_23 SUBROUTINE
      4  5cba				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5cba
      2  5cba		       7c 2d 35 23*	      .byte.b	"|-5#|-#3 #|-#-2$#|-#-$@#|2#-#$3#|#2.2 $-#|#-2.-.-#|2#3 3#|-5#",0
      0  5cf8					      END_LEVEL	Zone_26_23
      1  5cf8		       00 3e	   LEVEL_SIZE_Zone_26_23 =	* - LEVEL_START
      2  5cf8				  -	      IF	LEVEL_SIZE_Zone_26_23 > MAX_LEVEL_SIZE
      3  5cf8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_23
      4  5cf8					      ENDIF
      0  5cf8					      DEFL	Zone_26_24, "|5#|#3 3#|#-#*2 2#|#3 .2 #|3#$-*-#|2 #@$.-#|2 #$#-2#|2 #.2 #|2 5#"
      0  5cf8					      START_LEVEL	Zone_26_24
      1  5cf8				   LEVEL_START SET	*
      2  5cf8		       00 0b	   BANK_LEVEL_Zone_26_24 =	_CURRENT_BANK
      3  5cf8				   LEVEL_Zone_26_24 SUBROUTINE
      4  5cf8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5cf8
      2  5cf8		       7c 35 23 7c*	      .byte.b	"|5#|#3 3#|#-#*2 2#|#3 .2 #|3#$-*-#|2 #@$.-#|2 #$#-2#|2 #.2 #|2 5#",0
      0  5d3a					      END_LEVEL	Zone_26_24
      1  5d3a		       00 42	   LEVEL_SIZE_Zone_26_24 =	* - LEVEL_START
      2  5d3a				  -	      IF	LEVEL_SIZE_Zone_26_24 > MAX_LEVEL_SIZE
      3  5d3a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_24
      4  5d3a					      ENDIF
      0  5d3a					      DEFL	Zone_26_25, "|-5#|-#-.-#|-#$.-2#|-#-2.-#|-#2$2 #|2#@#-2#|#-2$2 #|#3 .-#|7#"
      0  5d3a					      START_LEVEL	Zone_26_25
      1  5d3a				   LEVEL_START SET	*
      2  5d3a		       00 0b	   BANK_LEVEL_Zone_26_25 =	_CURRENT_BANK
      3  5d3a				   LEVEL_Zone_26_25 SUBROUTINE
      4  5d3a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5d3a
      2  5d3a		       7c 2d 35 23*	      .byte.b	"|-5#|-#-.-#|-#$.-2#|-#-2.-#|-#2$2 #|2#@#-2#|#-2$2 #|#3 .-#|7#",0
      0  5d78					      END_LEVEL	Zone_26_25
      1  5d78		       00 3e	   LEVEL_SIZE_Zone_26_25 =	* - LEVEL_START
      2  5d78				  -	      IF	LEVEL_SIZE_Zone_26_25 > MAX_LEVEL_SIZE
      3  5d78				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_25
      4  5d78					      ENDIF
      0  5d78					      DEFL	Zone_26_26, "|-4#|-#@-3#|-#2$2 #|-#-$2 #|2#-#.3#|#.2 .2 #|#-$.-*-#|5#2 #|4 4#"
      0  5d78					      START_LEVEL	Zone_26_26
      1  5d78				   LEVEL_START SET	*
      2  5d78		       00 0b	   BANK_LEVEL_Zone_26_26 =	_CURRENT_BANK
      3  5d78				   LEVEL_Zone_26_26 SUBROUTINE
      4  5d78				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5d78
      2  5d78		       7c 2d 34 23*	      .byte.b	"|-4#|-#@-3#|-#2$2 #|-#-$2 #|2#-#.3#|#.2 .2 #|#-$.-*-#|5#2 #|4 4#",0
      0  5db9					      END_LEVEL	Zone_26_26
      1  5db9		       00 41	   LEVEL_SIZE_Zone_26_26 =	* - LEVEL_START
      2  5db9				  -	      IF	LEVEL_SIZE_Zone_26_26 > MAX_LEVEL_SIZE
      3  5db9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_26
      4  5db9					      ENDIF
      0  5db9					      DEFL	Zone_26_27, "|8#|#2 .-*@#|#2 *$.-#|2#-*-$-#|#2 #-3#|#4 #|#2 3#|4#"
      0  5db9					      START_LEVEL	Zone_26_27
      1  5db9				   LEVEL_START SET	*
      2  5db9		       00 0b	   BANK_LEVEL_Zone_26_27 =	_CURRENT_BANK
      3  5db9				   LEVEL_Zone_26_27 SUBROUTINE
      4  5db9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5db9
      2  5db9		       7c 38 23 7c*	      .byte.b	"|8#|#2 .-*@#|#2 *$.-#|2#-*-$-#|#2 #-3#|#4 #|#2 3#|4#",0
      0  5dee					      END_LEVEL	Zone_26_27
      1  5dee		       00 35	   LEVEL_SIZE_Zone_26_27 =	* - LEVEL_START
      2  5dee				  -	      IF	LEVEL_SIZE_Zone_26_27 > MAX_LEVEL_SIZE
      3  5dee				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_27
      4  5dee					      ENDIF
      0  5dee					      DEFL	Zone_26_28, "|2 5#|2 #3 #|-2#2 $2#|-#2 .$@#|2#.#$#-#|#2 $.*.#|#4 3#|3#2 #|2 4#"
      0  5dee					      START_LEVEL	Zone_26_28
      1  5dee				   LEVEL_START SET	*
      2  5dee		       00 0b	   BANK_LEVEL_Zone_26_28 =	_CURRENT_BANK
      3  5dee				   LEVEL_Zone_26_28 SUBROUTINE
      4  5dee				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5dee
      2  5dee		       7c 32 20 35*	      .byte.b	"|2 5#|2 #3 #|-2#2 $2#|-#2 .$@#|2#.#$#-#|#2 $.*.#|#4 3#|3#2 #|2 4#",0
      0  5e30					      END_LEVEL	Zone_26_28
      1  5e30		       00 42	   LEVEL_SIZE_Zone_26_28 =	* - LEVEL_START
      2  5e30				  -	      IF	LEVEL_SIZE_Zone_26_28 > MAX_LEVEL_SIZE
      3  5e30				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_28
      4  5e30					      ENDIF
      0  5e30					      DEFL	Zone_26_29, "|2 4#|2 #-@#|2 #-$3#|3#*3 #|#-.2 #-#|#-2$2.-#|#-.$#-2#|3#3 #|2 5#"
      0  5e30					      START_LEVEL	Zone_26_29
      1  5e30				   LEVEL_START SET	*
      2  5e30		       00 0b	   BANK_LEVEL_Zone_26_29 =	_CURRENT_BANK
      3  5e30				   LEVEL_Zone_26_29 SUBROUTINE
      4  5e30				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5e30
      2  5e30		       7c 32 20 34*	      .byte.b	"|2 4#|2 #-@#|2 #-$3#|3#*3 #|#-.2 #-#|#-2$2.-#|#-.$#-2#|3#3 #|2 5#",0
      0  5e72					      END_LEVEL	Zone_26_29
      1  5e72		       00 42	   LEVEL_SIZE_Zone_26_29 =	* - LEVEL_START
      2  5e72				  -	      IF	LEVEL_SIZE_Zone_26_29 > MAX_LEVEL_SIZE
      3  5e72				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_29
      4  5e72					      ENDIF
     70  5e72
      0  5e72					      DEFL	Zone_26_30, "|2 4#|-2#2 #|2#-.-3#|#@$.$2 #|#-2$-#-#|2#2 .-.#|-#-#$3#|-#2 .#|-5#"
      0  5e72					      START_LEVEL	Zone_26_30
      1  5e72				   LEVEL_START SET	*
      2  5e72		       00 0b	   BANK_LEVEL_Zone_26_30 =	_CURRENT_BANK
      3  5e72				   LEVEL_Zone_26_30 SUBROUTINE
      4  5e72				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5e72
      2  5e72		       7c 32 20 34*	      .byte.b	"|2 4#|-2#2 #|2#-.-3#|#@$.$2 #|#-2$-#-#|2#2 .-.#|-#-#$3#|-#2 .#|-5#",0
      0  5eb5					      END_LEVEL	Zone_26_30
      1  5eb5		       00 43	   LEVEL_SIZE_Zone_26_30 =	* - LEVEL_START
      2  5eb5				  -	      IF	LEVEL_SIZE_Zone_26_30 > MAX_LEVEL_SIZE
      3  5eb5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_30
      4  5eb5					      ENDIF
      0  5eb5					      DEFL	Zone_26_31, "|2 4#|2 #-@#|3#-$3#|#2 $.-.#|#-$*-#-#|2#-.-#-#|-#-.$2 #|-2#2 3#|2 4#"
      0  5eb5					      START_LEVEL	Zone_26_31
      1  5eb5				   LEVEL_START SET	*
      2  5eb5		       00 0b	   BANK_LEVEL_Zone_26_31 =	_CURRENT_BANK
      3  5eb5				   LEVEL_Zone_26_31 SUBROUTINE
      4  5eb5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5eb5
      2  5eb5		       7c 32 20 34*	      .byte.b	"|2 4#|2 #-@#|3#-$3#|#2 $.-.#|#-$*-#-#|2#-.-#-#|-#-.$2 #|-2#2 3#|2 4#",0
      0  5efa					      END_LEVEL	Zone_26_31
      1  5efa		       00 45	   LEVEL_SIZE_Zone_26_31 =	* - LEVEL_START
      2  5efa				  -	      IF	LEVEL_SIZE_Zone_26_31 > MAX_LEVEL_SIZE
      3  5efa				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_31
      4  5efa					      ENDIF
      0  5efa					      DEFL	Zone_26_32, "|3 4#|3 #2 #|-3#2 2#|-#@$3 #|2#$#-$-#|#2.2$#-#|#.5 #|#2.5#|4#"
      0  5efa					      START_LEVEL	Zone_26_32
      1  5efa				   LEVEL_START SET	*
      2  5efa		       00 0b	   BANK_LEVEL_Zone_26_32 =	_CURRENT_BANK
      3  5efa				   LEVEL_Zone_26_32 SUBROUTINE
      4  5efa				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5efa
      2  5efa		       7c 33 20 34*	      .byte.b	"|3 4#|3 #2 #|-3#2 2#|-#@$3 #|2#$#-$-#|#2.2$#-#|#.5 #|#2.5#|4#",0
      0  5f38					      END_LEVEL	Zone_26_32
      1  5f38		       00 3e	   LEVEL_SIZE_Zone_26_32 =	* - LEVEL_START
      2  5f38				  -	      IF	LEVEL_SIZE_Zone_26_32 > MAX_LEVEL_SIZE
      3  5f38				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_32
      4  5f38					      ENDIF
      0  5f38					      DEFL	Zone_26_33, "|-5#|-#3 #|-#-#-3#|-#.-$2 #|-#-#.*-#|2#*@$-2#|#2 *2 #|#3 3#|5#"
      0  5f38					      START_LEVEL	Zone_26_33
      1  5f38				   LEVEL_START SET	*
      2  5f38		       00 0b	   BANK_LEVEL_Zone_26_33 =	_CURRENT_BANK
      3  5f38				   LEVEL_Zone_26_33 SUBROUTINE
      4  5f38				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5f38
      2  5f38		       7c 2d 35 23*	      .byte.b	"|-5#|-#3 #|-#-#-3#|-#.-$2 #|-#-#.*-#|2#*@$-2#|#2 *2 #|#3 3#|5#",0
      0  5f77					      END_LEVEL	Zone_26_33
      1  5f77		       00 3f	   LEVEL_SIZE_Zone_26_33 =	* - LEVEL_START
      2  5f77				  -	      IF	LEVEL_SIZE_Zone_26_33 > MAX_LEVEL_SIZE
      3  5f77				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_33
      4  5f77					      ENDIF
      0  5f77					      DEFL	Zone_26_34, "|2 6#|3#2 .-#|#2 $#2 #|#2 *-.-#|2#$#-*-#|-#-@$2 #|-4#.-#|4 4#"
      0  5f77					      START_LEVEL	Zone_26_34
      1  5f77				   LEVEL_START SET	*
      2  5f77		       00 0b	   BANK_LEVEL_Zone_26_34 =	_CURRENT_BANK
      3  5f77				   LEVEL_Zone_26_34 SUBROUTINE
      4  5f77				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5f77
      2  5f77		       7c 32 20 36*	      .byte.b	"|2 6#|3#2 .-#|#2 $#2 #|#2 *-.-#|2#$#-*-#|-#-@$2 #|-4#.-#|4 4#",0
      0  5fb5					      END_LEVEL	Zone_26_34
      1  5fb5		       00 3e	   LEVEL_SIZE_Zone_26_34 =	* - LEVEL_START
      2  5fb5				  -	      IF	LEVEL_SIZE_Zone_26_34 > MAX_LEVEL_SIZE
      3  5fb5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_34
      4  5fb5					      ENDIF
      0  5fb5					      DEFL	Zone_26_35, "|2 5#|2 #3 #|2 #2$-#|2 #@$-#|3#$#-#|#-$3 2#|#-.-2.-#|3#-2.-#|2 6#"
      0  5fb5					      START_LEVEL	Zone_26_35
      1  5fb5				   LEVEL_START SET	*
      2  5fb5		       00 0b	   BANK_LEVEL_Zone_26_35 =	_CURRENT_BANK
      3  5fb5				   LEVEL_Zone_26_35 SUBROUTINE
      4  5fb5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  5fb5
      2  5fb5		       7c 32 20 35*	      .byte.b	"|2 5#|2 #3 #|2 #2$-#|2 #@$-#|3#$#-#|#-$3 2#|#-.-2.-#|3#-2.-#|2 6#",0
      0  5ff7					      END_LEVEL	Zone_26_35
      1  5ff7		       00 42	   LEVEL_SIZE_Zone_26_35 =	* - LEVEL_START
      2  5ff7				  -	      IF	LEVEL_SIZE_Zone_26_35 > MAX_LEVEL_SIZE
      3  5ff7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_35
      4  5ff7					      ENDIF
     77  5ff7
     78  5ff7				  -	      if	0
     79  5ff7				  -	      DEFL	Zone_26_36, "|2 4#|2 #2 #|3#+$3#|#-2$.2 #|#4 #-#|3#*.-.#|2 #-#$-#|2 #4 #|2 6#"
     80  5ff7				  -	      DEFL	Zone_26_37, "|-5#|-#.2 #|2#-#$3#|#-.-.$-#|#2 .3 #|#-#$-3#|#.-2$#|3#@-#|2 4#"
     81  5ff7				  -	      DEFL	Zone_26_38, "|4#|#2 #|#+-5#|#2$4 #|#2.*$2 #|#.-$-3#|#-2#-#|#4 #|6#"
     82  5ff7				  -	      DEFL	Zone_26_39, "|2 4#|-2#-.3#|-#2 $@.#|2#*-$.-#|#-.-#-2#|#2 2$-#|#-#-3#|#3 #|5#"
     83  5ff7				  -
     84  5ff7				  -	      DEFL	Zone_26_40, "|-7#|-#-.$2 #|2#$4 #|#@-$-3#|#-#.-#|#.*.-#|2#-#$#|-#3 #|-5#"
     85  5ff7				  -	      DEFL	Zone_26_41, "|5#|#3 3#|#-.$-.2#|#-$-#$-#|#$.4 #|#2 #$3#|#2.@-#|6#"
     86  5ff7				  -	      DEFL	Zone_26_42, "|2 5#|2 #3 #|3#.$.2#|#.-2$2 #|#-2#.2 #|#3 *@2#|3#-$-#|2 #2 2#|2 4#"
     87  5ff7				  -	      DEFL	Zone_26_43, "|2 5#|2 #3 #|3#*2 2#|#2 .$.@#|#-$#.2 #|2#2 *-2#|-2#-$-#|2 #2 2#|2 4#"
     88  5ff7				  -	      DEFL	Zone_26_44, "|8#|#3 $-.#|#-.-.-.#|#2 $-#-#|2#-#-$-#|-#$#$3#|-#.@-#|-5#"
     89  5ff7				  -	      DEFL	Zone_26_45, "|2 5#|-2#3 #|-#4 #|-#*-.2#|-#.-2#|2#*-#|#@$-#|#$-$#|#.2 #|#3 #|5#"
     90  5ff7				  -	      DEFL	Zone_26_46, "|3 4#|2 2#2 #|3#-*-#|#.2 *-2#|#-#-*2 #|#-2$@-.#|3#3 2#|2 #2 2#|2 4#"
     91  5ff7				  -	      DEFL	Zone_26_47, "|2 5#|2 #3 2#|2 #$#2 #|2 #4 #|2 #-.-2#|3#$*-#|#-@-*$#|#-2.2 #|7#"
     92  5ff7				  -	      DEFL	Zone_26_48, "|2 4#|2 #2 #|2 #-.2#|3#-*-3#|#@.2$3 #|#-$5 #|4#$#.2#|3 #2 .#|3 5#"
     93  5ff7				  -	      DEFL	Zone_26_49, "|2 4#|2 #2 3#|2 #-$-@#|2 #-$2.#|3#-$#.#|#.-$.$-#|#-#3 2#|#3 3#|5#"
     94  5ff7				  -	      DEFL	Zone_26_50, "|-4#|-#-@#|-#-$#|2#$.#|#-$-#|#-.-3#|#2.-$-#|#5 #|2#.$3#|-#2 #|-4#"
     95  5ff7				  -	      DEFL	Zone_26_51, "|4 4#|2 3#-@#|-2#.-*$#|2#2 #*-#|#-.4 #|#2 $-$-#|5#-.#|4 #2 #|4 4#"
     96  5ff7				  -	      DEFL	Zone_26_52, "|-4#|-#-@#|2#2$3#|#-.$-.#|#-.-#-2#|#-*$3 #|2#-#3 #|-#.2 3#|-5#"
     97  5ff7				  -	      DEFL	Zone_26_53, "|2 4#|2 #-.3#|3#-.2 #|#-$-$2 #|#3 #.2#|3#-2$-#|2 #2 $+#|2 #-.3#|2 4#"
     98  5ff7				  -	      DEFL	Zone_26_54, "|2 4#|2 #2 #|3#-.2#|#2 $2 3#|#2 3.2 #|3#-$-*-#|2 #$#$3#|2 #-@-#|2 5#"
     99  5ff7				  -	      DEFL	Zone_26_55, "|2 4#|2 #@-#|3#*$3#|#2 $-$-#|#.-2.2 #|#-#2 3#|#.#-$#|#4 #|6#"
    100  5ff7				  -	      DEFL	Zone_26_56, "|-4#|-#+-#|2#$-5#|#-.$2 $-#|#2 $4 #|2#.-5#|-#*-#|-#.-#|-#2 #|-4#"
    101  5ff7				  -	      DEFL	Zone_26_57, "|-4#|-#2 4#|2#-+3 #|#-2$3 #|#-.$#.$#|3#-*-.#|2 #2 3#|2 #2 #|2 4#"
    102  5ff7				  -	      DEFL	Zone_26_58, "|-5#|2#-.-2#|#5 #|#-.$.*2#|2#-#$2 #|-#2 $.-#|-3#-$2#|3 #-@#|3 4#"
    103  5ff7				  -	      DEFL	Zone_26_59, "|4#|#2 5#|#-$4 #|#6 #|3#$#$2#|2 #-.*-#|2 #-.*@#|2 #-.3#|2 4#"
    104  5ff7				  -	      DEFL	Zone_26_60, "|2 4#|2 #2 2#|2 #-.-#|3#$*-3#|#3 *2 .#|#-@$2 $-#|6#-.#|5 #2 #|5 4#"
    105  5ff7				  -	      DEFL	Zone_26_61, "|2 4#|3#2 #|#2 $-3#|#2.*$-@#|#3 .$-#|#-.#-3#|2#$#-#|-#3 #|-5#"
    106  5ff7				  -	      DEFL	Zone_26_62, "|-4#|-#2 3#|-#2 $-#|2#2$@.#|#2 #$.#|#.-.$.#|#3 $2#|2#-.-#|-5#"
    107  5ff7				  -	      DEFL	Zone_26_63, "|-5#|2#3 2#|#-2.2 #|#-*.-$2#|#-.#3 #|2#4$-#|-#.-@3#|-5#"
    108  5ff7				  -	      DEFL	Zone_26_64, "|3 5#|4#3 #|#4 $-#|#-.*$+2#|2#$.2$-#|-#.2 .-#|-4#2 #|4 4#"
    109  5ff7				  -	      DEFL	Zone_26_65, "|5#|#3 4#|#4 *-#|2#.*2$@#|2#$-.-2#|#2 .*-#|#3 3#|5#"
    110  5ff7				  -	      DEFL	Zone_26_66, "|2 4#|3#2 2#|#-.2 @2#|#-*-*$-#|#-*$.#-#|#2 $.2 #|3#2 3#|2 4#"
    111  5ff7				  -	      DEFL	Zone_26_67, "|7#|#5 #|#3.$-2#|#2 2$2 #|3#+$#-#|2 #*-*-#|2 #3 2#|2 5#"
    112  5ff7				  -	      DEFL	Zone_26_68, "|-4#|-#-@3#|-#2*.-#|-#-$2 #|2#.#2 #|#3 $-#|#2.2$2#|#4 #|6#"
    113  5ff7				  -	      DEFL	Zone_26_69, "|4#|#2 3#|#.2 .3#|#-$#$-@#|#-$.2*-#|#4 $-#|2#-.-3#|-5#"
    114  5ff7				  -	      DEFL	Zone_26_70, "|-4#|2#@-3#|#-2*2 2#|#2 2*.-#|#-*-$2 #|2#3 3#|-2#2 #|2 #2 #|2 4#"
    115  5ff7				  -	      DEFL	Zone_26_71, "|3 4#|2 2#2 #|2 #3 2#|-2#-2*-#|2#-2.2 #|#-$-2$.#|#-.$@3#|#2 3#|4#"
    116  5ff7				  -	      DEFL	Zone_26_72, "|-4#|-#@-2#|-#-*-#|2#$.-#|#2 .$2#|#*$3 #|#-.-*-#|#4 2#|6#"
    117  5ff7				  -	      DEFL	Zone_26_73, "|2 5#|2 #3 2#|3#-.2 #|#2 $-#.#|#-$@*$-#|3#2*.-#|2 #4 #|2 6#"
    118  5ff7				  -	      DEFL	Zone_26_74, "|4#|#@-3#|#-$-.#|#-*-$2#|2#*-*-#|-#-.*-2#|-#5 #|-3#3 #|3 5#"
    119  5ff7				  -	      DEFL	Zone_26_75, "|7#|#-+-.-2#|#3 *$-#|3#$.2 #|2 #2 *-#|2 #$#$-#|2 #2 .-#|2 6#"
    120  5ff7				  -	      DEFL	Zone_26_76, "|-5#|2#3 3#|#-$#3 #|#-.*$2.#|#-$2 @-#|2#-*$3#|-#-.-#|-5#"
    121  5ff7				  -	      DEFL	Zone_26_77, "|4#|#2 4#|#2 *2 #|#-$2 .#|2#-*#-#|-#2 *-#|-#-$.$#|-2#-.@#|2 5#"
    122  5ff7				  -	      DEFL	Zone_26_78, "|3 4#|3 #2 #|4#2 2#|#3 $.-#|#2 2*2 #|#-$+$#-#|2#-*-.-#|-7#"
    123  5ff7				  -	      DEFL	Zone_26_79, "|2 5#|3#3 #|#.*2.-#|#2 $*-#|#.#3 #|#3 $-#|3#2$2#|2 #-@#|2 4#"
    124  5ff7				  -	      DEFL	Zone_26_80, "|5#|#.2 3#|#-#$2 #|#2 .-.2#|#.*-*$-#|#2 $-$@#|4#2 2#|3 4#"
    125  5ff7				  -	      DEFL	Zone_26_81, "|-6#|-#4 #|-#$*$.#|-#2 #.#|2#-*@-#|#2 *.-#|#-$2 2#|#2 3#|4#"
    126  5ff7				  -	      DEFL	Zone_26_82, "|2 4#|3#.-#|#-$2 #|#2 $-3#|#2.#3 #|#@*.2$-#|2#-*3 #|-7#"
    127  5ff7				  -	      DEFL	Zone_26_83, "|3 5#|3 #@2 #|4#2$-#|#3 .$-#|#-.$#-.#|2#$-.*-#|-#-.2 2#|-6#"
    128  5ff7				  -	      DEFL	Zone_26_84, "|5#|#-.-4#|#4 $@#|2#$-*$*#|-#-#-*-#|-#-.-.-#|-3#3 #|3 5#"
    129  5ff7				  -	      DEFL	Zone_26_85, "|2 4#|2 #2 #|3#2 3#|#2 *2$@#|#-#2 *$#|#.-2.$.#|2#5 #|-7#"
    130  5ff7				  -	      DEFL	Zone_26_86, "|2 4#|2 #2 2#|3#.$-2#|#2 *-$-#|#-$-*$@#|#-#-.-2#|#-.-.-#|7#"
    131  5ff7				  -	      DEFL	Zone_26_87, "|5#|#-+-2#|#$-$-3#|#-*2.2 #|#-$-$2 #|#.$#-3#|#-.2 #|6#"
    132  5ff7				  -	      DEFL	Zone_26_88, "|4#|#2 2#|#.$-5#|#2 2.3 #|2#-$-$2 #|-#$*.-3#|-#@*2 #|-6#"
    133  5ff7				  -	      DEFL	Zone_26_89, "|7#|#3 $.2#|#.-$2 +#|4#$.$#|3 #-*-#|3 #-*-#|3 #3 #|3 #3 #|3 5#"
    134  5ff7				  -	      DEFL	Zone_26_90, "|2 4#|2 #2 #|3#2 #|#2 *-#|#.-.-#|#-$.$2#|2#$*$-#|-#2 .@#|-3#2 #|3 4#"
    135  5ff7				  -	      DEFL	Zone_26_91, "|-7#|-#-*-.-#|-#-.3 #|-#-.$3#|2#$.-#|#.-2$#|#2 $@#|#2 3#|4#"
    136  5ff7				  -	      DEFL	Zone_26_92, "|2 4#|3#2 #|#-2$-2#|#-*3 #|#-.$#-2#|#@*.*2 #|2#3 .-#|-7#"
    137  5ff7				  -	      DEFL	Zone_26_93, "|6#|#-*2 #|#-2.$3#|#2 $3 #|2#2.$2 #|#-2$-3#|#2 +2#|5#"
    138  5ff7				  -	      DEFL	Zone_26_94, "|2 4#|2 #-@#|2 #2$#|2 #-.3#|3#$2.-#|#-$-$2 #|#2 *.-2#|#4 .#|7#"
    139  5ff7				  -	      DEFL	Zone_26_95, "|2 5#|2 #-@.#|2 #-.$#|2 #-*-#|-2#$*-2#|2#2 $2 #|#2 *.2 #|#3 4#|5#"
    140  5ff7				  -	      DEFL	Zone_26_96, "|3 4#|3 #2 #|4#$.2#|#-$4 #|#@.2*.-#|#2$4 #|#.-5#|#2 #|4#"
    141  5ff7				  -	      DEFL	Zone_26_97, "|2 4#|2 #2 #|3#-$3#|#2 $.-.#|#-.-.2 #|3#$*-$#|2 #@*2 #|2 3#2 #|4 4#"
    142  5ff7				  -	      DEFL	Zone_26_98, "|2 4#|2 #2 3#|2 #-.-.#|3#-2*-#|#-@2$.-#|#-$2 $-#|5#.-#|4 #2 #|4 4#"
    143  5ff7				  -	      DEFL	Zone_26_99, "|3 5#|-3#3 #|2#3 $-#|#-$.*-2#|#2.$.-#|#3 .2#|3#2$#|2 #-@#|2 4#"
    144  5ff7				  -	      DEFL	Zone_26_100, "|3 4#|2 2#2 #|3#-.-#|#-$-$.#|#.*3 #|#3 *-#|3#.$2#|2 #$-#|2 #@-#|2 4#"
    145  5ff7				  -	      DEFL	Zone_26_101, "|4#|#@-5#|#.$-.2 #|#-$*.*-#|2#-$2 2#|-#-$-2#|-#-.-#|-#2 2#|-4#"
    146  5ff7				  -	      DEFL	Zone_26_102, "|3 5#|4#.2 #|#-+$.$-#|#-$-2.2#|3#2$-#|2 #-$.#|2 #3 #|2 #3 #|2 5#"
    147  5ff7				  -	      DEFL	Zone_26_103, "|4#|#2 3#|#-$2 #|#2 .$3#|2#$.$.@#|-#.2 $-#|-#-*-3#|-#-.-#|-5#"
    148  5ff7				  -	      DEFL	Zone_26_104, "|2 4#|2 #-@3#|2 #2$2 #|-2#.*2 #|-#-*-*2#|2#-*.-#|#5 #|#3 3#|5#"
    149  5ff7				  -	      DEFL	Zone_26_105, "|4#|#2 2#|#-.-3#|#3 $-#|2#.$2.#|-#-*$@#|-#-.$-#|-#-$3#|-#2 #|-4#"
    150  5ff7				  -	      DEFL	Zone_26_106, "|-4#|-#2 #|2#-$4#|#-.2 $@#|#2 2*-.#|#-*-*2 #|3#2 3#|2 #2 #|2 4#"
    151  5ff7				  -	      DEFL	Zone_26_107, "|2 4#|2 #2 #|3#2 3#|#-$.-$-#|#2 *-.-#|#-$*-3#|2#-.$#|-#-.@#|-5#"
    152  5ff7				  -	      DEFL	Zone_26_108, "|2 4#|3#@-#|#.-2$#|#.-*-3#|2#$.$.-#|-#-*3 #|-#3 3#|-#3 #|-5#"
    153  5ff7				  -	      DEFL	Zone_26_109, "|-4#|-#2 #|-#.-#|-#$-#|2#.-4#|#-*-$@-#|#-*$*2 #|#3 .2 #|8#"
    154  5ff7				  -	      DEFL	Zone_26_110, "|2 4#|2 #2 2#|3#-.-#|#-$*2 2#|#2.-.$-#|#-$*-$@#|3#2 3#|2 #2 #|2 4#"
    155  5ff7				  -	      DEFL	Zone_26_111, "|3 5#|-3#-.-#|2#-$3 #|#-.2 *2#|#3 *-#|3#.$-#|2 #$*-#|2 #-@2#|2 4#"
    156  5ff7				  -	      DEFL	Zone_26_112, "|2 4#|2 #2 3#|2 #$3 #|2 #-.-.#|3#$.-2#|#2 $*-#|#@*-.$#|3#3 #|2 5#"
    157  5ff7				  -	      DEFL	Zone_26_113, "|2 4#|2 #2 #|3#2 3#|#@$2 $-#|#.2*$2.#|#2 $3 #|#.-5#|#2 #|4#"
    158  5ff7				  -	      DEFL	Zone_26_114, "|4#|#2 #|#2 3#|#-$2 2#|#.-2*-#|#-$.*@#|2#3 2#|-#-*-#|-#2 2#|-4#"
    159  5ff7				  -	      DEFL	Zone_26_115, "|2 6#|2 #2 *-#|3#.*2 2#|#2 *-.2 #|#2 $.$2 #|3#-$4#|2 #@-#|2 4#"
    160  5ff7				  -	      DEFL	Zone_26_116, "|4#|#2 4#|#2 $2 #|#.$2.-#|#-*-$.#|#$-*$-#|#2 .@2#|6#"
    161  5ff7					      endif
    162  5ff7
      0  5ff7					      CHECK_BANK_SIZE	"LEVELS7 -- full 2K"
      1  5ff7		       07 f7	   .TEMP      =	* - BANK_START
 LEVELS7 -- full 2K (2K) SIZE =  $7f7 , FREE= $9
      2  5ff7					      ECHO	"LEVELS7 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  5ff7				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  5ff7				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  5ff7				  -	      ERR
      6  5ff7					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS8.asm LEVEL 2 PASS 3
      0  5ff7					      include	"BANK_LEVELS8.asm"
      1  5ff7							;    Sokoboo - a Sokoban implementation
      2  5ff7							;    using a generic tile-based display engine for the Atari 2600
      3  5ff7							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  5ff7							;
      5  5ff7							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  5ff7							;
      7  5ff7							;    Code related to the generic tile-based display engine was developed by
      8  5ff7							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  5ff7							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  5ff7							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  5ff7							;
     12  5ff7							;    Code related to music and sound effects uses the TIATracker music player
     13  5ff7							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  5ff7							;    directory for Apache licensing details.
     15  5ff7							;
     16  5ff7							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  5ff7							;    See the copyright notices in the License directory for a list of level
     18  5ff7							;    contributors.
     19  5ff7							;
     20  5ff7							;    Except where otherwise indicated, this software is released under the
     21  5ff7							;    following licensing arrangement...
     22  5ff7							;
     23  5ff7							;    This program is free software: you can redistribute it and/or modify
     24  5ff7							;    it under the terms of the GNU General Public License as published by
     25  5ff7							;    the Free Software Foundation, either version 3 of the License, or
     26  5ff7							;    (at your option) any later version.
     27  5ff7							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  5ff7
     29  5ff7							;    This program is distributed in the hope that it will be useful,
     30  5ff7							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  5ff7							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  5ff7							;    GNU General Public License for more details.
     33  5ff7
     34  5ff7							; level definitions
     35  5ff7							; Sample level definitions.
     36  5ff7							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  5ff7							; have as many banks as you like.
     38  5ff7
      0  5ff7					      NEWBANK	LEVELS8
      1  67d8 ????				      SEG	LEVELS8
      2  6000					      ORG	ORIGIN
      3  6000					      RORG	$F000
      4  6000				   BANK_START SET	*
      5  6000				   LEVELS8    SET	ORIGIN / 2048
      6  6000				   ORIGIN     SET	ORIGIN + 2048
      7  6000				   _CURRENT_BANK SET	LEVELS8
     40  6000
      0  6000					      DEFL	Zone_26_36, "|2 4#|2 #2 #|3#+$3#|#-2$.2 #|#4 #-#|3#*.-.#|2 #-#$-#|2 #4 #|2 6#"
      0  6000					      START_LEVEL	Zone_26_36
      1  6000				   LEVEL_START SET	*
      2  6000		       00 0c	   BANK_LEVEL_Zone_26_36 =	_CURRENT_BANK
      3  6000				   LEVEL_Zone_26_36 SUBROUTINE
      4  6000				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6000
      2  6000		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 #|3#+$3#|#-2$.2 #|#4 #-#|3#*.-.#|2 #-#$-#|2 #4 #|2 6#",0
      0  6041					      END_LEVEL	Zone_26_36
      1  6041		       00 41	   LEVEL_SIZE_Zone_26_36 =	* - LEVEL_START
      2  6041				  -	      IF	LEVEL_SIZE_Zone_26_36 > MAX_LEVEL_SIZE
      3  6041				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_36
      4  6041					      ENDIF
      0  6041					      DEFL	Zone_26_37, "|-5#|-#.2 #|2#-#$3#|#-.-.$-#|#2 .3 #|#-#$-3#|#.-2$#|3#@-#|2 4#"
      0  6041					      START_LEVEL	Zone_26_37
      1  6041				   LEVEL_START SET	*
      2  6041		       00 0c	   BANK_LEVEL_Zone_26_37 =	_CURRENT_BANK
      3  6041				   LEVEL_Zone_26_37 SUBROUTINE
      4  6041				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6041
      2  6041		       7c 2d 35 23*	      .byte.b	"|-5#|-#.2 #|2#-#$3#|#-.-.$-#|#2 .3 #|#-#$-3#|#.-2$#|3#@-#|2 4#",0
      0  6080					      END_LEVEL	Zone_26_37
      1  6080		       00 3f	   LEVEL_SIZE_Zone_26_37 =	* - LEVEL_START
      2  6080				  -	      IF	LEVEL_SIZE_Zone_26_37 > MAX_LEVEL_SIZE
      3  6080				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_37
      4  6080					      ENDIF
      0  6080					      DEFL	Zone_26_38, "|4#|#2 #|#+-5#|#2$4 #|#2.*$2 #|#.-$-3#|#-2#-#|#4 #|6#"
      0  6080					      START_LEVEL	Zone_26_38
      1  6080				   LEVEL_START SET	*
      2  6080		       00 0c	   BANK_LEVEL_Zone_26_38 =	_CURRENT_BANK
      3  6080				   LEVEL_Zone_26_38 SUBROUTINE
      4  6080				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6080
      2  6080		       7c 34 23 7c*	      .byte.b	"|4#|#2 #|#+-5#|#2$4 #|#2.*$2 #|#.-$-3#|#-2#-#|#4 #|6#",0
      0  60b6					      END_LEVEL	Zone_26_38
      1  60b6		       00 36	   LEVEL_SIZE_Zone_26_38 =	* - LEVEL_START
      2  60b6				  -	      IF	LEVEL_SIZE_Zone_26_38 > MAX_LEVEL_SIZE
      3  60b6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_38
      4  60b6					      ENDIF
      0  60b6					      DEFL	Zone_26_39, "|2 4#|-2#-.3#|-#2 $@.#|2#*-$.-#|#-.-#-2#|#2 2$-#|#-#-3#|#3 #|5#"
      0  60b6					      START_LEVEL	Zone_26_39
      1  60b6				   LEVEL_START SET	*
      2  60b6		       00 0c	   BANK_LEVEL_Zone_26_39 =	_CURRENT_BANK
      3  60b6				   LEVEL_Zone_26_39 SUBROUTINE
      4  60b6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  60b6
      2  60b6		       7c 32 20 34*	      .byte.b	"|2 4#|-2#-.3#|-#2 $@.#|2#*-$.-#|#-.-#-2#|#2 2$-#|#-#-3#|#3 #|5#",0
      0  60f6					      END_LEVEL	Zone_26_39
      1  60f6		       00 40	   LEVEL_SIZE_Zone_26_39 =	* - LEVEL_START
      2  60f6				  -	      IF	LEVEL_SIZE_Zone_26_39 > MAX_LEVEL_SIZE
      3  60f6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_39
      4  60f6					      ENDIF
     45  60f6
      0  60f6					      DEFL	Zone_26_40, "|-7#|-#-.$2 #|2#$4 #|#@-$-3#|#-#.-#|#.*.-#|2#-#$#|-#3 #|-5#"
      0  60f6					      START_LEVEL	Zone_26_40
      1  60f6				   LEVEL_START SET	*
      2  60f6		       00 0c	   BANK_LEVEL_Zone_26_40 =	_CURRENT_BANK
      3  60f6				   LEVEL_Zone_26_40 SUBROUTINE
      4  60f6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  60f6
      2  60f6		       7c 2d 37 23*	      .byte.b	"|-7#|-#-.$2 #|2#$4 #|#@-$-3#|#-#.-#|#.*.-#|2#-#$#|-#3 #|-5#",0
      0  6132					      END_LEVEL	Zone_26_40
      1  6132		       00 3c	   LEVEL_SIZE_Zone_26_40 =	* - LEVEL_START
      2  6132				  -	      IF	LEVEL_SIZE_Zone_26_40 > MAX_LEVEL_SIZE
      3  6132				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_40
      4  6132					      ENDIF
      0  6132					      DEFL	Zone_26_41, "|5#|#3 3#|#-.$-.2#|#-$-#$-#|#$.4 #|#2 #$3#|#2.@-#|6#"
      0  6132					      START_LEVEL	Zone_26_41
      1  6132				   LEVEL_START SET	*
      2  6132		       00 0c	   BANK_LEVEL_Zone_26_41 =	_CURRENT_BANK
      3  6132				   LEVEL_Zone_26_41 SUBROUTINE
      4  6132				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6132
      2  6132		       7c 35 23 7c*	      .byte.b	"|5#|#3 3#|#-.$-.2#|#-$-#$-#|#$.4 #|#2 #$3#|#2.@-#|6#",0
      0  6167					      END_LEVEL	Zone_26_41
      1  6167		       00 35	   LEVEL_SIZE_Zone_26_41 =	* - LEVEL_START
      2  6167				  -	      IF	LEVEL_SIZE_Zone_26_41 > MAX_LEVEL_SIZE
      3  6167				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_41
      4  6167					      ENDIF
      0  6167					      DEFL	Zone_26_42, "|2 5#|2 #3 #|3#.$.2#|#.-2$2 #|#-2#.2 #|#3 *@2#|3#-$-#|2 #2 2#|2 4#"
      0  6167					      START_LEVEL	Zone_26_42
      1  6167				   LEVEL_START SET	*
      2  6167		       00 0c	   BANK_LEVEL_Zone_26_42 =	_CURRENT_BANK
      3  6167				   LEVEL_Zone_26_42 SUBROUTINE
      4  6167				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6167
      2  6167		       7c 32 20 35*	      .byte.b	"|2 5#|2 #3 #|3#.$.2#|#.-2$2 #|#-2#.2 #|#3 *@2#|3#-$-#|2 #2 2#|2 4#",0
      0  61aa					      END_LEVEL	Zone_26_42
      1  61aa		       00 43	   LEVEL_SIZE_Zone_26_42 =	* - LEVEL_START
      2  61aa				  -	      IF	LEVEL_SIZE_Zone_26_42 > MAX_LEVEL_SIZE
      3  61aa				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_42
      4  61aa					      ENDIF
      0  61aa					      DEFL	Zone_26_43, "|2 5#|2 #3 #|3#*2 2#|#2 .$.@#|#-$#.2 #|2#2 *-2#|-2#-$-#|2 #2 2#|2 4#"
      0  61aa					      START_LEVEL	Zone_26_43
      1  61aa				   LEVEL_START SET	*
      2  61aa		       00 0c	   BANK_LEVEL_Zone_26_43 =	_CURRENT_BANK
      3  61aa				   LEVEL_Zone_26_43 SUBROUTINE
      4  61aa				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  61aa
      2  61aa		       7c 32 20 35*	      .byte.b	"|2 5#|2 #3 #|3#*2 2#|#2 .$.@#|#-$#.2 #|2#2 *-2#|-2#-$-#|2 #2 2#|2 4#",0
      0  61ef					      END_LEVEL	Zone_26_43
      1  61ef		       00 45	   LEVEL_SIZE_Zone_26_43 =	* - LEVEL_START
      2  61ef				  -	      IF	LEVEL_SIZE_Zone_26_43 > MAX_LEVEL_SIZE
      3  61ef				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_43
      4  61ef					      ENDIF
      0  61ef					      DEFL	Zone_26_44, "|8#|#3 $-.#|#-.-.-.#|#2 $-#-#|2#-#-$-#|-#$#$3#|-#.@-#|-5#"
      0  61ef					      START_LEVEL	Zone_26_44
      1  61ef				   LEVEL_START SET	*
      2  61ef		       00 0c	   BANK_LEVEL_Zone_26_44 =	_CURRENT_BANK
      3  61ef				   LEVEL_Zone_26_44 SUBROUTINE
      4  61ef				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  61ef
      2  61ef		       7c 38 23 7c*	      .byte.b	"|8#|#3 $-.#|#-.-.-.#|#2 $-#-#|2#-#-$-#|-#$#$3#|-#.@-#|-5#",0
      0  6229					      END_LEVEL	Zone_26_44
      1  6229		       00 3a	   LEVEL_SIZE_Zone_26_44 =	* - LEVEL_START
      2  6229				  -	      IF	LEVEL_SIZE_Zone_26_44 > MAX_LEVEL_SIZE
      3  6229				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_44
      4  6229					      ENDIF
      0  6229					      DEFL	Zone_26_45, "|2 5#|-2#3 #|-#4 #|-#*-.2#|-#.-2#|2#*-#|#@$-#|#$-$#|#.2 #|#3 #|5#"
      0  6229					      START_LEVEL	Zone_26_45
      1  6229				   LEVEL_START SET	*
      2  6229		       00 0c	   BANK_LEVEL_Zone_26_45 =	_CURRENT_BANK
      3  6229				   LEVEL_Zone_26_45 SUBROUTINE
      4  6229				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6229
      2  6229		       7c 32 20 35*	      .byte.b	"|2 5#|-2#3 #|-#4 #|-#*-.2#|-#.-2#|2#*-#|#@$-#|#$-$#|#.2 #|#3 #|5#",0
      0  626b					      END_LEVEL	Zone_26_45
      1  626b		       00 42	   LEVEL_SIZE_Zone_26_45 =	* - LEVEL_START
      2  626b				  -	      IF	LEVEL_SIZE_Zone_26_45 > MAX_LEVEL_SIZE
      3  626b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_45
      4  626b					      ENDIF
      0  626b					      DEFL	Zone_26_46, "|3 4#|2 2#2 #|3#-*-#|#.2 *-2#|#-#-*2 #|#-2$@-.#|3#3 2#|2 #2 2#|2 4#"
      0  626b					      START_LEVEL	Zone_26_46
      1  626b				   LEVEL_START SET	*
      2  626b		       00 0c	   BANK_LEVEL_Zone_26_46 =	_CURRENT_BANK
      3  626b				   LEVEL_Zone_26_46 SUBROUTINE
      4  626b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  626b
      2  626b		       7c 33 20 34*	      .byte.b	"|3 4#|2 2#2 #|3#-*-#|#.2 *-2#|#-#-*2 #|#-2$@-.#|3#3 2#|2 #2 2#|2 4#",0
      0  62af					      END_LEVEL	Zone_26_46
      1  62af		       00 44	   LEVEL_SIZE_Zone_26_46 =	* - LEVEL_START
      2  62af				  -	      IF	LEVEL_SIZE_Zone_26_46 > MAX_LEVEL_SIZE
      3  62af				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_46
      4  62af					      ENDIF
      0  62af					      DEFL	Zone_26_47, "|2 5#|2 #3 2#|2 #$#2 #|2 #4 #|2 #-.-2#|3#$*-#|#-@-*$#|#-2.2 #|7#"
      0  62af					      START_LEVEL	Zone_26_47
      1  62af				   LEVEL_START SET	*
      2  62af		       00 0c	   BANK_LEVEL_Zone_26_47 =	_CURRENT_BANK
      3  62af				   LEVEL_Zone_26_47 SUBROUTINE
      4  62af				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  62af
      2  62af		       7c 32 20 35*	      .byte.b	"|2 5#|2 #3 2#|2 #$#2 #|2 #4 #|2 #-.-2#|3#$*-#|#-@-*$#|#-2.2 #|7#",0
      0  62f0					      END_LEVEL	Zone_26_47
      1  62f0		       00 41	   LEVEL_SIZE_Zone_26_47 =	* - LEVEL_START
      2  62f0				  -	      IF	LEVEL_SIZE_Zone_26_47 > MAX_LEVEL_SIZE
      3  62f0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_47
      4  62f0					      ENDIF
      0  62f0					      DEFL	Zone_26_48, "|2 4#|2 #2 #|2 #-.2#|3#-*-3#|#@.2$3 #|#-$5 #|4#$#.2#|3 #2 .#|3 5#"
      0  62f0					      START_LEVEL	Zone_26_48
      1  62f0				   LEVEL_START SET	*
      2  62f0		       00 0c	   BANK_LEVEL_Zone_26_48 =	_CURRENT_BANK
      3  62f0				   LEVEL_Zone_26_48 SUBROUTINE
      4  62f0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  62f0
      2  62f0		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 #|2 #-.2#|3#-*-3#|#@.2$3 #|#-$5 #|4#$#.2#|3 #2 .#|3 5#",0
      0  6332					      END_LEVEL	Zone_26_48
      1  6332		       00 42	   LEVEL_SIZE_Zone_26_48 =	* - LEVEL_START
      2  6332				  -	      IF	LEVEL_SIZE_Zone_26_48 > MAX_LEVEL_SIZE
      3  6332				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_48
      4  6332					      ENDIF
      0  6332					      DEFL	Zone_26_49, "|2 4#|2 #2 3#|2 #-$-@#|2 #-$2.#|3#-$#.#|#.-$.$-#|#-#3 2#|#3 3#|5#"
      0  6332					      START_LEVEL	Zone_26_49
      1  6332				   LEVEL_START SET	*
      2  6332		       00 0c	   BANK_LEVEL_Zone_26_49 =	_CURRENT_BANK
      3  6332				   LEVEL_Zone_26_49 SUBROUTINE
      4  6332				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6332
      2  6332		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 3#|2 #-$-@#|2 #-$2.#|3#-$#.#|#.-$.$-#|#-#3 2#|#3 3#|5#",0
      0  6374					      END_LEVEL	Zone_26_49
      1  6374		       00 42	   LEVEL_SIZE_Zone_26_49 =	* - LEVEL_START
      2  6374				  -	      IF	LEVEL_SIZE_Zone_26_49 > MAX_LEVEL_SIZE
      3  6374				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_49
      4  6374					      ENDIF
     56  6374
      0  6374					      DEFL	Zone_26_50, "|-4#|-#-@#|-#-$#|2#$.#|#-$-#|#-.-3#|#2.-$-#|#5 #|2#.$3#|-#2 #|-4#"
      0  6374					      START_LEVEL	Zone_26_50
      1  6374				   LEVEL_START SET	*
      2  6374		       00 0c	   BANK_LEVEL_Zone_26_50 =	_CURRENT_BANK
      3  6374				   LEVEL_Zone_26_50 SUBROUTINE
      4  6374				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6374
      2  6374		       7c 2d 34 23*	      .byte.b	"|-4#|-#-@#|-#-$#|2#$.#|#-$-#|#-.-3#|#2.-$-#|#5 #|2#.$3#|-#2 #|-4#",0
      0  63b6					      END_LEVEL	Zone_26_50
      1  63b6		       00 42	   LEVEL_SIZE_Zone_26_50 =	* - LEVEL_START
      2  63b6				  -	      IF	LEVEL_SIZE_Zone_26_50 > MAX_LEVEL_SIZE
      3  63b6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_50
      4  63b6					      ENDIF
      0  63b6					      DEFL	Zone_26_51, "|4 4#|2 3#-@#|-2#.-*$#|2#2 #*-#|#-.4 #|#2 $-$-#|5#-.#|4 #2 #|4 4#"
      0  63b6					      START_LEVEL	Zone_26_51
      1  63b6				   LEVEL_START SET	*
      2  63b6		       00 0c	   BANK_LEVEL_Zone_26_51 =	_CURRENT_BANK
      3  63b6				   LEVEL_Zone_26_51 SUBROUTINE
      4  63b6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  63b6
      2  63b6		       7c 34 20 34*	      .byte.b	"|4 4#|2 3#-@#|-2#.-*$#|2#2 #*-#|#-.4 #|#2 $-$-#|5#-.#|4 #2 #|4 4#",0
      0  63f8					      END_LEVEL	Zone_26_51
      1  63f8		       00 42	   LEVEL_SIZE_Zone_26_51 =	* - LEVEL_START
      2  63f8				  -	      IF	LEVEL_SIZE_Zone_26_51 > MAX_LEVEL_SIZE
      3  63f8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_51
      4  63f8					      ENDIF
      0  63f8					      DEFL	Zone_26_52, "|-4#|-#-@#|2#2$3#|#-.$-.#|#-.-#-2#|#-*$3 #|2#-#3 #|-#.2 3#|-5#"
      0  63f8					      START_LEVEL	Zone_26_52
      1  63f8				   LEVEL_START SET	*
      2  63f8		       00 0c	   BANK_LEVEL_Zone_26_52 =	_CURRENT_BANK
      3  63f8				   LEVEL_Zone_26_52 SUBROUTINE
      4  63f8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  63f8
      2  63f8		       7c 2d 34 23*	      .byte.b	"|-4#|-#-@#|2#2$3#|#-.$-.#|#-.-#-2#|#-*$3 #|2#-#3 #|-#.2 3#|-5#",0
      0  6437					      END_LEVEL	Zone_26_52
      1  6437		       00 3f	   LEVEL_SIZE_Zone_26_52 =	* - LEVEL_START
      2  6437				  -	      IF	LEVEL_SIZE_Zone_26_52 > MAX_LEVEL_SIZE
      3  6437				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_52
      4  6437					      ENDIF
      0  6437					      DEFL	Zone_26_53, "|2 4#|2 #-.3#|3#-.2 #|#-$-$2 #|#3 #.2#|3#-2$-#|2 #2 $+#|2 #-.3#|2 4#"
      0  6437					      START_LEVEL	Zone_26_53
      1  6437				   LEVEL_START SET	*
      2  6437		       00 0c	   BANK_LEVEL_Zone_26_53 =	_CURRENT_BANK
      3  6437				   LEVEL_Zone_26_53 SUBROUTINE
      4  6437				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6437
      2  6437		       7c 32 20 34*	      .byte.b	"|2 4#|2 #-.3#|3#-.2 #|#-$-$2 #|#3 #.2#|3#-2$-#|2 #2 $+#|2 #-.3#|2 4#",0
      0  647c					      END_LEVEL	Zone_26_53
      1  647c		       00 45	   LEVEL_SIZE_Zone_26_53 =	* - LEVEL_START
      2  647c				  -	      IF	LEVEL_SIZE_Zone_26_53 > MAX_LEVEL_SIZE
      3  647c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_53
      4  647c					      ENDIF
      0  647c					      DEFL	Zone_26_54, "|2 4#|2 #2 #|3#-.2#|#2 $2 3#|#2 3.2 #|3#-$-*-#|2 #$#$3#|2 #-@-#|2 5#"
      0  647c					      START_LEVEL	Zone_26_54
      1  647c				   LEVEL_START SET	*
      2  647c		       00 0c	   BANK_LEVEL_Zone_26_54 =	_CURRENT_BANK
      3  647c				   LEVEL_Zone_26_54 SUBROUTINE
      4  647c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  647c
      2  647c		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 #|3#-.2#|#2 $2 3#|#2 3.2 #|3#-$-*-#|2 #$#$3#|2 #-@-#|2 5#",0
      0  64c1					      END_LEVEL	Zone_26_54
      1  64c1		       00 45	   LEVEL_SIZE_Zone_26_54 =	* - LEVEL_START
      2  64c1				  -	      IF	LEVEL_SIZE_Zone_26_54 > MAX_LEVEL_SIZE
      3  64c1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_54
      4  64c1					      ENDIF
      0  64c1					      DEFL	Zone_26_55, "|2 4#|2 #@-#|3#*$3#|#2 $-$-#|#.-2.2 #|#-#2 3#|#.#-$#|#4 #|6#"
      0  64c1					      START_LEVEL	Zone_26_55
      1  64c1				   LEVEL_START SET	*
      2  64c1		       00 0c	   BANK_LEVEL_Zone_26_55 =	_CURRENT_BANK
      3  64c1				   LEVEL_Zone_26_55 SUBROUTINE
      4  64c1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  64c1
      2  64c1		       7c 32 20 34*	      .byte.b	"|2 4#|2 #@-#|3#*$3#|#2 $-$-#|#.-2.2 #|#-#2 3#|#.#-$#|#4 #|6#",0
      0  64fe					      END_LEVEL	Zone_26_55
      1  64fe		       00 3d	   LEVEL_SIZE_Zone_26_55 =	* - LEVEL_START
      2  64fe				  -	      IF	LEVEL_SIZE_Zone_26_55 > MAX_LEVEL_SIZE
      3  64fe				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_55
      4  64fe					      ENDIF
      0  64fe					      DEFL	Zone_26_56, "|-4#|-#+-#|2#$-5#|#-.$2 $-#|#2 $4 #|2#.-5#|-#*-#|-#.-#|-#2 #|-4#"
      0  64fe					      START_LEVEL	Zone_26_56
      1  64fe				   LEVEL_START SET	*
      2  64fe		       00 0c	   BANK_LEVEL_Zone_26_56 =	_CURRENT_BANK
      3  64fe				   LEVEL_Zone_26_56 SUBROUTINE
      4  64fe				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  64fe
      2  64fe		       7c 2d 34 23*	      .byte.b	"|-4#|-#+-#|2#$-5#|#-.$2 $-#|#2 $4 #|2#.-5#|-#*-#|-#.-#|-#2 #|-4#",0
      0  653f					      END_LEVEL	Zone_26_56
      1  653f		       00 41	   LEVEL_SIZE_Zone_26_56 =	* - LEVEL_START
      2  653f				  -	      IF	LEVEL_SIZE_Zone_26_56 > MAX_LEVEL_SIZE
      3  653f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_56
      4  653f					      ENDIF
      0  653f					      DEFL	Zone_26_57, "|-4#|-#2 4#|2#-+3 #|#-2$3 #|#-.$#.$#|3#-*-.#|2 #2 3#|2 #2 #|2 4#"
      0  653f					      START_LEVEL	Zone_26_57
      1  653f				   LEVEL_START SET	*
      2  653f		       00 0c	   BANK_LEVEL_Zone_26_57 =	_CURRENT_BANK
      3  653f				   LEVEL_Zone_26_57 SUBROUTINE
      4  653f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  653f
      2  653f		       7c 2d 34 23*	      .byte.b	"|-4#|-#2 4#|2#-+3 #|#-2$3 #|#-.$#.$#|3#-*-.#|2 #2 3#|2 #2 #|2 4#",0
      0  6580					      END_LEVEL	Zone_26_57
      1  6580		       00 41	   LEVEL_SIZE_Zone_26_57 =	* - LEVEL_START
      2  6580				  -	      IF	LEVEL_SIZE_Zone_26_57 > MAX_LEVEL_SIZE
      3  6580				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_57
      4  6580					      ENDIF
      0  6580					      DEFL	Zone_26_58, "|-5#|2#-.-2#|#5 #|#-.$.*2#|2#-#$2 #|-#2 $.-#|-3#-$2#|3 #-@#|3 4#"
      0  6580					      START_LEVEL	Zone_26_58
      1  6580				   LEVEL_START SET	*
      2  6580		       00 0c	   BANK_LEVEL_Zone_26_58 =	_CURRENT_BANK
      3  6580				   LEVEL_Zone_26_58 SUBROUTINE
      4  6580				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6580
      2  6580		       7c 2d 35 23*	      .byte.b	"|-5#|2#-.-2#|#5 #|#-.$.*2#|2#-#$2 #|-#2 $.-#|-3#-$2#|3 #-@#|3 4#",0
      0  65c1					      END_LEVEL	Zone_26_58
      1  65c1		       00 41	   LEVEL_SIZE_Zone_26_58 =	* - LEVEL_START
      2  65c1				  -	      IF	LEVEL_SIZE_Zone_26_58 > MAX_LEVEL_SIZE
      3  65c1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_58
      4  65c1					      ENDIF
      0  65c1					      DEFL	Zone_26_59, "|4#|#2 5#|#-$4 #|#6 #|3#$#$2#|2 #-.*-#|2 #-.*@#|2 #-.3#|2 4#"
      0  65c1					      START_LEVEL	Zone_26_59
      1  65c1				   LEVEL_START SET	*
      2  65c1		       00 0c	   BANK_LEVEL_Zone_26_59 =	_CURRENT_BANK
      3  65c1				   LEVEL_Zone_26_59 SUBROUTINE
      4  65c1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  65c1
      2  65c1		       7c 34 23 7c*	      .byte.b	"|4#|#2 5#|#-$4 #|#6 #|3#$#$2#|2 #-.*-#|2 #-.*@#|2 #-.3#|2 4#",0
      0  65fe					      END_LEVEL	Zone_26_59
      1  65fe		       00 3d	   LEVEL_SIZE_Zone_26_59 =	* - LEVEL_START
      2  65fe				  -	      IF	LEVEL_SIZE_Zone_26_59 > MAX_LEVEL_SIZE
      3  65fe				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_59
      4  65fe					      ENDIF
     67  65fe
      0  65fe					      DEFL	Zone_26_60, "|2 4#|2 #2 2#|2 #-.-#|3#$*-3#|#3 *2 .#|#-@$2 $-#|6#-.#|5 #2 #|5 4#"
      0  65fe					      START_LEVEL	Zone_26_60
      1  65fe				   LEVEL_START SET	*
      2  65fe		       00 0c	   BANK_LEVEL_Zone_26_60 =	_CURRENT_BANK
      3  65fe				   LEVEL_Zone_26_60 SUBROUTINE
      4  65fe				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  65fe
      2  65fe		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 2#|2 #-.-#|3#$*-3#|#3 *2 .#|#-@$2 $-#|6#-.#|5 #2 #|5 4#",0
      0  6641					      END_LEVEL	Zone_26_60
      1  6641		       00 43	   LEVEL_SIZE_Zone_26_60 =	* - LEVEL_START
      2  6641				  -	      IF	LEVEL_SIZE_Zone_26_60 > MAX_LEVEL_SIZE
      3  6641				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_60
      4  6641					      ENDIF
      0  6641					      DEFL	Zone_26_61, "|2 4#|3#2 #|#2 $-3#|#2.*$-@#|#3 .$-#|#-.#-3#|2#$#-#|-#3 #|-5#"
      0  6641					      START_LEVEL	Zone_26_61
      1  6641				   LEVEL_START SET	*
      2  6641		       00 0c	   BANK_LEVEL_Zone_26_61 =	_CURRENT_BANK
      3  6641				   LEVEL_Zone_26_61 SUBROUTINE
      4  6641				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6641
      2  6641		       7c 32 20 34*	      .byte.b	"|2 4#|3#2 #|#2 $-3#|#2.*$-@#|#3 .$-#|#-.#-3#|2#$#-#|-#3 #|-5#",0
      0  667f					      END_LEVEL	Zone_26_61
      1  667f		       00 3e	   LEVEL_SIZE_Zone_26_61 =	* - LEVEL_START
      2  667f				  -	      IF	LEVEL_SIZE_Zone_26_61 > MAX_LEVEL_SIZE
      3  667f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_61
      4  667f					      ENDIF
      0  667f					      DEFL	Zone_26_62, "|-4#|-#2 3#|-#2 $-#|2#2$@.#|#2 #$.#|#.-.$.#|#3 $2#|2#-.-#|-5#"
      0  667f					      START_LEVEL	Zone_26_62
      1  667f				   LEVEL_START SET	*
      2  667f		       00 0c	   BANK_LEVEL_Zone_26_62 =	_CURRENT_BANK
      3  667f				   LEVEL_Zone_26_62 SUBROUTINE
      4  667f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  667f
      2  667f		       7c 2d 34 23*	      .byte.b	"|-4#|-#2 3#|-#2 $-#|2#2$@.#|#2 #$.#|#.-.$.#|#3 $2#|2#-.-#|-5#",0
      0  66bd					      END_LEVEL	Zone_26_62
      1  66bd		       00 3e	   LEVEL_SIZE_Zone_26_62 =	* - LEVEL_START
      2  66bd				  -	      IF	LEVEL_SIZE_Zone_26_62 > MAX_LEVEL_SIZE
      3  66bd				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_62
      4  66bd					      ENDIF
      0  66bd					      DEFL	Zone_26_63, "|-5#|2#3 2#|#-2.2 #|#-*.-$2#|#-.#3 #|2#4$-#|-#.-@3#|-5#"
      0  66bd					      START_LEVEL	Zone_26_63
      1  66bd				   LEVEL_START SET	*
      2  66bd		       00 0c	   BANK_LEVEL_Zone_26_63 =	_CURRENT_BANK
      3  66bd				   LEVEL_Zone_26_63 SUBROUTINE
      4  66bd				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  66bd
      2  66bd		       7c 2d 35 23*	      .byte.b	"|-5#|2#3 2#|#-2.2 #|#-*.-$2#|#-.#3 #|2#4$-#|-#.-@3#|-5#",0
      0  66f5					      END_LEVEL	Zone_26_63
      1  66f5		       00 38	   LEVEL_SIZE_Zone_26_63 =	* - LEVEL_START
      2  66f5				  -	      IF	LEVEL_SIZE_Zone_26_63 > MAX_LEVEL_SIZE
      3  66f5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_63
      4  66f5					      ENDIF
      0  66f5					      DEFL	Zone_26_64, "|3 5#|4#3 #|#4 $-#|#-.*$+2#|2#$.2$-#|-#.2 .-#|-4#2 #|4 4#"
      0  66f5					      START_LEVEL	Zone_26_64
      1  66f5				   LEVEL_START SET	*
      2  66f5		       00 0c	   BANK_LEVEL_Zone_26_64 =	_CURRENT_BANK
      3  66f5				   LEVEL_Zone_26_64 SUBROUTINE
      4  66f5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  66f5
      2  66f5		       7c 33 20 35*	      .byte.b	"|3 5#|4#3 #|#4 $-#|#-.*$+2#|2#$.2$-#|-#.2 .-#|-4#2 #|4 4#",0
      0  672f					      END_LEVEL	Zone_26_64
      1  672f		       00 3a	   LEVEL_SIZE_Zone_26_64 =	* - LEVEL_START
      2  672f				  -	      IF	LEVEL_SIZE_Zone_26_64 > MAX_LEVEL_SIZE
      3  672f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_64
      4  672f					      ENDIF
      0  672f					      DEFL	Zone_26_65, "|5#|#3 4#|#4 *-#|2#.*2$@#|2#$-.-2#|#2 .*-#|#3 3#|5#"
      0  672f					      START_LEVEL	Zone_26_65
      1  672f				   LEVEL_START SET	*
      2  672f		       00 0c	   BANK_LEVEL_Zone_26_65 =	_CURRENT_BANK
      3  672f				   LEVEL_Zone_26_65 SUBROUTINE
      4  672f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  672f
      2  672f		       7c 35 23 7c*	      .byte.b	"|5#|#3 4#|#4 *-#|2#.*2$@#|2#$-.-2#|#2 .*-#|#3 3#|5#",0
      0  6763					      END_LEVEL	Zone_26_65
      1  6763		       00 34	   LEVEL_SIZE_Zone_26_65 =	* - LEVEL_START
      2  6763				  -	      IF	LEVEL_SIZE_Zone_26_65 > MAX_LEVEL_SIZE
      3  6763				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_65
      4  6763					      ENDIF
      0  6763					      DEFL	Zone_26_66, "|2 4#|3#2 2#|#-.2 @2#|#-*-*$-#|#-*$.#-#|#2 $.2 #|3#2 3#|2 4#"
      0  6763					      START_LEVEL	Zone_26_66
      1  6763				   LEVEL_START SET	*
      2  6763		       00 0c	   BANK_LEVEL_Zone_26_66 =	_CURRENT_BANK
      3  6763				   LEVEL_Zone_26_66 SUBROUTINE
      4  6763				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6763
      2  6763		       7c 32 20 34*	      .byte.b	"|2 4#|3#2 2#|#-.2 @2#|#-*-*$-#|#-*$.#-#|#2 $.2 #|3#2 3#|2 4#",0
      0  67a0					      END_LEVEL	Zone_26_66
      1  67a0		       00 3d	   LEVEL_SIZE_Zone_26_66 =	* - LEVEL_START
      2  67a0				  -	      IF	LEVEL_SIZE_Zone_26_66 > MAX_LEVEL_SIZE
      3  67a0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_66
      4  67a0					      ENDIF
      0  67a0					      DEFL	Zone_26_67, "|7#|#5 #|#3.$-2#|#2 2$2 #|3#+$#-#|2 #*-*-#|2 #3 2#|2 5#"
      0  67a0					      START_LEVEL	Zone_26_67
      1  67a0				   LEVEL_START SET	*
      2  67a0		       00 0c	   BANK_LEVEL_Zone_26_67 =	_CURRENT_BANK
      3  67a0				   LEVEL_Zone_26_67 SUBROUTINE
      4  67a0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  67a0
      2  67a0		       7c 37 23 7c*	      .byte.b	"|7#|#5 #|#3.$-2#|#2 2$2 #|3#+$#-#|2 #*-*-#|2 #3 2#|2 5#",0
      0  67d8					      END_LEVEL	Zone_26_67
      1  67d8		       00 38	   LEVEL_SIZE_Zone_26_67 =	* - LEVEL_START
      2  67d8				  -	      IF	LEVEL_SIZE_Zone_26_67 > MAX_LEVEL_SIZE
      3  67d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_67
      4  67d8					      ENDIF
     76  67d8
     77  67d8
     78  67d8				  -	      if	0
     79  67d8				  -	      DEFL	Zone_26_68, "|-4#|-#-@3#|-#2*.-#|-#-$2 #|2#.#2 #|#3 $-#|#2.2$2#|#4 #|6#"
     80  67d8				  -	      DEFL	Zone_26_69, "|4#|#2 3#|#.2 .3#|#-$#$-@#|#-$.2*-#|#4 $-#|2#-.-3#|-5#"
     81  67d8				  -
     82  67d8				  -
     83  67d8				  -	      DEFL	Zone_26_70, "|-4#|2#@-3#|#-2*2 2#|#2 2*.-#|#-*-$2 #|2#3 3#|-2#2 #|2 #2 #|2 4#"
     84  67d8				  -	      DEFL	Zone_26_71, "|3 4#|2 2#2 #|2 #3 2#|-2#-2*-#|2#-2.2 #|#-$-2$.#|#-.$@3#|#2 3#|4#"
     85  67d8				  -	      DEFL	Zone_26_72, "|-4#|-#@-2#|-#-*-#|2#$.-#|#2 .$2#|#*$3 #|#-.-*-#|#4 2#|6#"
     86  67d8				  -	      DEFL	Zone_26_73, "|2 5#|2 #3 2#|3#-.2 #|#2 $-#.#|#-$@*$-#|3#2*.-#|2 #4 #|2 6#"
     87  67d8				  -	      DEFL	Zone_26_74, "|4#|#@-3#|#-$-.#|#-*-$2#|2#*-*-#|-#-.*-2#|-#5 #|-3#3 #|3 5#"
     88  67d8				  -	      DEFL	Zone_26_75, "|7#|#-+-.-2#|#3 *$-#|3#$.2 #|2 #2 *-#|2 #$#$-#|2 #2 .-#|2 6#"
     89  67d8				  -	      DEFL	Zone_26_76, "|-5#|2#3 3#|#-$#3 #|#-.*$2.#|#-$2 @-#|2#-*$3#|-#-.-#|-5#"
     90  67d8				  -	      DEFL	Zone_26_77, "|4#|#2 4#|#2 *2 #|#-$2 .#|2#-*#-#|-#2 *-#|-#-$.$#|-2#-.@#|2 5#"
     91  67d8				  -	      DEFL	Zone_26_78, "|3 4#|3 #2 #|4#2 2#|#3 $.-#|#2 2*2 #|#-$+$#-#|2#-*-.-#|-7#"
     92  67d8				  -	      DEFL	Zone_26_79, "|2 5#|3#3 #|#.*2.-#|#2 $*-#|#.#3 #|#3 $-#|3#2$2#|2 #-@#|2 4#"
     93  67d8				  -	      DEFL	Zone_26_80, "|5#|#.2 3#|#-#$2 #|#2 .-.2#|#.*-*$-#|#2 $-$@#|4#2 2#|3 4#"
     94  67d8				  -	      DEFL	Zone_26_81, "|-6#|-#4 #|-#$*$.#|-#2 #.#|2#-*@-#|#2 *.-#|#-$2 2#|#2 3#|4#"
     95  67d8				  -	      DEFL	Zone_26_82, "|2 4#|3#.-#|#-$2 #|#2 $-3#|#2.#3 #|#@*.2$-#|2#-*3 #|-7#"
     96  67d8				  -	      DEFL	Zone_26_83, "|3 5#|3 #@2 #|4#2$-#|#3 .$-#|#-.$#-.#|2#$-.*-#|-#-.2 2#|-6#"
     97  67d8				  -	      DEFL	Zone_26_84, "|5#|#-.-4#|#4 $@#|2#$-*$*#|-#-#-*-#|-#-.-.-#|-3#3 #|3 5#"
     98  67d8				  -	      DEFL	Zone_26_85, "|2 4#|2 #2 #|3#2 3#|#2 *2$@#|#-#2 *$#|#.-2.$.#|2#5 #|-7#"
     99  67d8				  -	      DEFL	Zone_26_86, "|2 4#|2 #2 2#|3#.$-2#|#2 *-$-#|#-$-*$@#|#-#-.-2#|#-.-.-#|7#"
    100  67d8				  -	      DEFL	Zone_26_87, "|5#|#-+-2#|#$-$-3#|#-*2.2 #|#-$-$2 #|#.$#-3#|#-.2 #|6#"
    101  67d8				  -	      DEFL	Zone_26_88, "|4#|#2 2#|#.$-5#|#2 2.3 #|2#-$-$2 #|-#$*.-3#|-#@*2 #|-6#"
    102  67d8				  -	      DEFL	Zone_26_89, "|7#|#3 $.2#|#.-$2 +#|4#$.$#|3 #-*-#|3 #-*-#|3 #3 #|3 #3 #|3 5#"
    103  67d8				  -	      DEFL	Zone_26_90, "|2 4#|2 #2 #|3#2 #|#2 *-#|#.-.-#|#-$.$2#|2#$*$-#|-#2 .@#|-3#2 #|3 4#"
    104  67d8				  -	      DEFL	Zone_26_91, "|-7#|-#-*-.-#|-#-.3 #|-#-.$3#|2#$.-#|#.-2$#|#2 $@#|#2 3#|4#"
    105  67d8				  -	      DEFL	Zone_26_92, "|2 4#|3#2 #|#-2$-2#|#-*3 #|#-.$#-2#|#@*.*2 #|2#3 .-#|-7#"
    106  67d8				  -	      DEFL	Zone_26_93, "|6#|#-*2 #|#-2.$3#|#2 $3 #|2#2.$2 #|#-2$-3#|#2 +2#|5#"
    107  67d8				  -	      DEFL	Zone_26_94, "|2 4#|2 #-@#|2 #2$#|2 #-.3#|3#$2.-#|#-$-$2 #|#2 *.-2#|#4 .#|7#"
    108  67d8				  -	      DEFL	Zone_26_95, "|2 5#|2 #-@.#|2 #-.$#|2 #-*-#|-2#$*-2#|2#2 $2 #|#2 *.2 #|#3 4#|5#"
    109  67d8				  -	      DEFL	Zone_26_96, "|3 4#|3 #2 #|4#$.2#|#-$4 #|#@.2*.-#|#2$4 #|#.-5#|#2 #|4#"
    110  67d8				  -	      DEFL	Zone_26_97, "|2 4#|2 #2 #|3#-$3#|#2 $.-.#|#-.-.2 #|3#$*-$#|2 #@*2 #|2 3#2 #|4 4#"
    111  67d8				  -	      DEFL	Zone_26_98, "|2 4#|2 #2 3#|2 #-.-.#|3#-2*-#|#-@2$.-#|#-$2 $-#|5#.-#|4 #2 #|4 4#"
    112  67d8				  -	      DEFL	Zone_26_99, "|3 5#|-3#3 #|2#3 $-#|#-$.*-2#|#2.$.-#|#3 .2#|3#2$#|2 #-@#|2 4#"
    113  67d8				  -	      DEFL	Zone_26_100, "|3 4#|2 2#2 #|3#-.-#|#-$-$.#|#.*3 #|#3 *-#|3#.$2#|2 #$-#|2 #@-#|2 4#"
    114  67d8				  -	      DEFL	Zone_26_101, "|4#|#@-5#|#.$-.2 #|#-$*.*-#|2#-$2 2#|-#-$-2#|-#-.-#|-#2 2#|-4#"
    115  67d8				  -	      DEFL	Zone_26_102, "|3 5#|4#.2 #|#-+$.$-#|#-$-2.2#|3#2$-#|2 #-$.#|2 #3 #|2 #3 #|2 5#"
    116  67d8				  -	      DEFL	Zone_26_103, "|4#|#2 3#|#-$2 #|#2 .$3#|2#$.$.@#|-#.2 $-#|-#-*-3#|-#-.-#|-5#"
    117  67d8				  -	      DEFL	Zone_26_104, "|2 4#|2 #-@3#|2 #2$2 #|-2#.*2 #|-#-*-*2#|2#-*.-#|#5 #|#3 3#|5#"
    118  67d8				  -	      DEFL	Zone_26_105, "|4#|#2 2#|#-.-3#|#3 $-#|2#.$2.#|-#-*$@#|-#-.$-#|-#-$3#|-#2 #|-4#"
    119  67d8				  -	      DEFL	Zone_26_106, "|-4#|-#2 #|2#-$4#|#-.2 $@#|#2 2*-.#|#-*-*2 #|3#2 3#|2 #2 #|2 4#"
    120  67d8				  -	      DEFL	Zone_26_107, "|2 4#|2 #2 #|3#2 3#|#-$.-$-#|#2 *-.-#|#-$*-3#|2#-.$#|-#-.@#|-5#"
    121  67d8				  -	      DEFL	Zone_26_108, "|2 4#|3#@-#|#.-2$#|#.-*-3#|2#$.$.-#|-#-*3 #|-#3 3#|-#3 #|-5#"
    122  67d8				  -	      DEFL	Zone_26_109, "|-4#|-#2 #|-#.-#|-#$-#|2#.-4#|#-*-$@-#|#-*$*2 #|#3 .2 #|8#"
    123  67d8				  -	      DEFL	Zone_26_110, "|2 4#|2 #2 2#|3#-.-#|#-$*2 2#|#2.-.$-#|#-$*-$@#|3#2 3#|2 #2 #|2 4#"
    124  67d8				  -	      DEFL	Zone_26_111, "|3 5#|-3#-.-#|2#-$3 #|#-.2 *2#|#3 *-#|3#.$-#|2 #$*-#|2 #-@2#|2 4#"
    125  67d8				  -	      DEFL	Zone_26_112, "|2 4#|2 #2 3#|2 #$3 #|2 #-.-.#|3#$.-2#|#2 $*-#|#@*-.$#|3#3 #|2 5#"
    126  67d8				  -	      DEFL	Zone_26_113, "|2 4#|2 #2 #|3#2 3#|#@$2 $-#|#.2*$2.#|#2 $3 #|#.-5#|#2 #|4#"
    127  67d8				  -	      DEFL	Zone_26_114, "|4#|#2 #|#2 3#|#-$2 2#|#.-2*-#|#-$.*@#|2#3 2#|-#-*-#|-#2 2#|-4#"
    128  67d8				  -	      DEFL	Zone_26_115, "|2 6#|2 #2 *-#|3#.*2 2#|#2 *-.2 #|#2 $.$2 #|3#-$4#|2 #@-#|2 4#"
    129  67d8				  -	      DEFL	Zone_26_116, "|4#|#2 4#|#2 $2 #|#.$2.-#|#-*-$.#|#$-*$-#|#2 .@2#|6#"
    130  67d8					      endif
    131  67d8
      0  67d8					      CHECK_BANK_SIZE	"LEVELS8 -- full 2K"
      1  67d8		       07 d8	   .TEMP      =	* - BANK_START
 LEVELS8 -- full 2K (2K) SIZE =  $7d8 , FREE= $28
      2  67d8					      ECHO	"LEVELS8 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  67d8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  67d8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  67d8				  -	      ERR
      6  67d8					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS9.asm LEVEL 2 PASS 3
      0  67d8					      include	"BANK_LEVELS9.asm"
      1  67d8							;    Sokoboo - a Sokoban implementation
      2  67d8							;    using a generic tile-based display engine for the Atari 2600
      3  67d8							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  67d8							;
      5  67d8							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  67d8							;
      7  67d8							;    Code related to the generic tile-based display engine was developed by
      8  67d8							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  67d8							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  67d8							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  67d8							;
     12  67d8							;    Code related to music and sound effects uses the TIATracker music player
     13  67d8							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  67d8							;    directory for Apache licensing details.
     15  67d8							;
     16  67d8							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  67d8							;    See the copyright notices in the License directory for a list of level
     18  67d8							;    contributors.
     19  67d8							;
     20  67d8							;    Except where otherwise indicated, this software is released under the
     21  67d8							;    following licensing arrangement...
     22  67d8							;
     23  67d8							;    This program is free software: you can redistribute it and/or modify
     24  67d8							;    it under the terms of the GNU General Public License as published by
     25  67d8							;    the Free Software Foundation, either version 3 of the License, or
     26  67d8							;    (at your option) any later version.
     27  67d8							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  67d8
     29  67d8							;    This program is distributed in the hope that it will be useful,
     30  67d8							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  67d8							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  67d8							;    GNU General Public License for more details.
     33  67d8
     34  67d8							; level definitions
     35  67d8							; Sample level definitions.
     36  67d8							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  67d8							; have as many banks as you like.
     38  67d8
      0  67d8					      NEWBANK	LEVELS9
      1  6c30 ????				      SEG	LEVELS9
      2  6800					      ORG	ORIGIN
      3  6800					      RORG	$F000
      4  6800				   BANK_START SET	*
      5  6800				   LEVELS9    SET	ORIGIN / 2048
      6  6800				   ORIGIN     SET	ORIGIN + 2048
      7  6800				   _CURRENT_BANK SET	LEVELS9
     40  6800
      0  6800					      DEFL	Zone_26_68, "|-4#|-#-@3#|-#2*.-#|-#-$2 #|2#.#2 #|#3 $-#|#2.2$2#|#4 #|6#"
      0  6800					      START_LEVEL	Zone_26_68
      1  6800				   LEVEL_START SET	*
      2  6800		       00 0d	   BANK_LEVEL_Zone_26_68 =	_CURRENT_BANK
      3  6800				   LEVEL_Zone_26_68 SUBROUTINE
      4  6800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6800
      2  6800		       7c 2d 34 23*	      .byte.b	"|-4#|-#-@3#|-#2*.-#|-#-$2 #|2#.#2 #|#3 $-#|#2.2$2#|#4 #|6#",0
      0  683b					      END_LEVEL	Zone_26_68
      1  683b		       00 3b	   LEVEL_SIZE_Zone_26_68 =	* - LEVEL_START
      2  683b				  -	      IF	LEVEL_SIZE_Zone_26_68 > MAX_LEVEL_SIZE
      3  683b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_68
      4  683b					      ENDIF
      0  683b					      DEFL	Zone_26_69, "|4#|#2 3#|#.2 .3#|#-$#$-@#|#-$.2*-#|#4 $-#|2#-.-3#|-5#"
      0  683b					      START_LEVEL	Zone_26_69
      1  683b				   LEVEL_START SET	*
      2  683b		       00 0d	   BANK_LEVEL_Zone_26_69 =	_CURRENT_BANK
      3  683b				   LEVEL_Zone_26_69 SUBROUTINE
      4  683b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  683b
      2  683b		       7c 34 23 7c*	      .byte.b	"|4#|#2 3#|#.2 .3#|#-$#$-@#|#-$.2*-#|#4 $-#|2#-.-3#|-5#",0
      0  6872					      END_LEVEL	Zone_26_69
      1  6872		       00 37	   LEVEL_SIZE_Zone_26_69 =	* - LEVEL_START
      2  6872				  -	      IF	LEVEL_SIZE_Zone_26_69 > MAX_LEVEL_SIZE
      3  6872				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_69
      4  6872					      ENDIF
     43  6872
     44  6872
      0  6872					      DEFL	Zone_26_70, "|-4#|2#@-3#|#-2*2 2#|#2 2*.-#|#-*-$2 #|2#3 3#|-2#2 #|2 #2 #|2 4#"
      0  6872					      START_LEVEL	Zone_26_70
      1  6872				   LEVEL_START SET	*
      2  6872		       00 0d	   BANK_LEVEL_Zone_26_70 =	_CURRENT_BANK
      3  6872				   LEVEL_Zone_26_70 SUBROUTINE
      4  6872				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6872
      2  6872		       7c 2d 34 23*	      .byte.b	"|-4#|2#@-3#|#-2*2 2#|#2 2*.-#|#-*-$2 #|2#3 3#|-2#2 #|2 #2 #|2 4#",0
      0  68b3					      END_LEVEL	Zone_26_70
      1  68b3		       00 41	   LEVEL_SIZE_Zone_26_70 =	* - LEVEL_START
      2  68b3				  -	      IF	LEVEL_SIZE_Zone_26_70 > MAX_LEVEL_SIZE
      3  68b3				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_70
      4  68b3					      ENDIF
      0  68b3					      DEFL	Zone_26_71, "|3 4#|2 2#2 #|2 #3 2#|-2#-2*-#|2#-2.2 #|#-$-2$.#|#-.$@3#|#2 3#|4#"
      0  68b3					      START_LEVEL	Zone_26_71
      1  68b3				   LEVEL_START SET	*
      2  68b3		       00 0d	   BANK_LEVEL_Zone_26_71 =	_CURRENT_BANK
      3  68b3				   LEVEL_Zone_26_71 SUBROUTINE
      4  68b3				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  68b3
      2  68b3		       7c 33 20 34*	      .byte.b	"|3 4#|2 2#2 #|2 #3 2#|-2#-2*-#|2#-2.2 #|#-$-2$.#|#-.$@3#|#2 3#|4#",0
      0  68f5					      END_LEVEL	Zone_26_71
      1  68f5		       00 42	   LEVEL_SIZE_Zone_26_71 =	* - LEVEL_START
      2  68f5				  -	      IF	LEVEL_SIZE_Zone_26_71 > MAX_LEVEL_SIZE
      3  68f5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_71
      4  68f5					      ENDIF
      0  68f5					      DEFL	Zone_26_72, "|-4#|-#@-2#|-#-*-#|2#$.-#|#2 .$2#|#*$3 #|#-.-*-#|#4 2#|6#"
      0  68f5					      START_LEVEL	Zone_26_72
      1  68f5				   LEVEL_START SET	*
      2  68f5		       00 0d	   BANK_LEVEL_Zone_26_72 =	_CURRENT_BANK
      3  68f5				   LEVEL_Zone_26_72 SUBROUTINE
      4  68f5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  68f5
      2  68f5		       7c 2d 34 23*	      .byte.b	"|-4#|-#@-2#|-#-*-#|2#$.-#|#2 .$2#|#*$3 #|#-.-*-#|#4 2#|6#",0
      0  692f					      END_LEVEL	Zone_26_72
      1  692f		       00 3a	   LEVEL_SIZE_Zone_26_72 =	* - LEVEL_START
      2  692f				  -	      IF	LEVEL_SIZE_Zone_26_72 > MAX_LEVEL_SIZE
      3  692f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_72
      4  692f					      ENDIF
      0  692f					      DEFL	Zone_26_73, "|2 5#|2 #3 2#|3#-.2 #|#2 $-#.#|#-$@*$-#|3#2*.-#|2 #4 #|2 6#"
      0  692f					      START_LEVEL	Zone_26_73
      1  692f				   LEVEL_START SET	*
      2  692f		       00 0d	   BANK_LEVEL_Zone_26_73 =	_CURRENT_BANK
      3  692f				   LEVEL_Zone_26_73 SUBROUTINE
      4  692f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  692f
      2  692f		       7c 32 20 35*	      .byte.b	"|2 5#|2 #3 2#|3#-.2 #|#2 $-#.#|#-$@*$-#|3#2*.-#|2 #4 #|2 6#",0
      0  696b					      END_LEVEL	Zone_26_73
      1  696b		       00 3c	   LEVEL_SIZE_Zone_26_73 =	* - LEVEL_START
      2  696b				  -	      IF	LEVEL_SIZE_Zone_26_73 > MAX_LEVEL_SIZE
      3  696b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_73
      4  696b					      ENDIF
      0  696b					      DEFL	Zone_26_74, "|4#|#@-3#|#-$-.#|#-*-$2#|2#*-*-#|-#-.*-2#|-#5 #|-3#3 #|3 5#"
      0  696b					      START_LEVEL	Zone_26_74
      1  696b				   LEVEL_START SET	*
      2  696b		       00 0d	   BANK_LEVEL_Zone_26_74 =	_CURRENT_BANK
      3  696b				   LEVEL_Zone_26_74 SUBROUTINE
      4  696b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  696b
      2  696b		       7c 34 23 7c*	      .byte.b	"|4#|#@-3#|#-$-.#|#-*-$2#|2#*-*-#|-#-.*-2#|-#5 #|-3#3 #|3 5#",0
      0  69a7					      END_LEVEL	Zone_26_74
      1  69a7		       00 3c	   LEVEL_SIZE_Zone_26_74 =	* - LEVEL_START
      2  69a7				  -	      IF	LEVEL_SIZE_Zone_26_74 > MAX_LEVEL_SIZE
      3  69a7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_74
      4  69a7					      ENDIF
      0  69a7					      DEFL	Zone_26_75, "|7#|#-+-.-2#|#3 *$-#|3#$.2 #|2 #2 *-#|2 #$#$-#|2 #2 .-#|2 6#"
      0  69a7					      START_LEVEL	Zone_26_75
      1  69a7				   LEVEL_START SET	*
      2  69a7		       00 0d	   BANK_LEVEL_Zone_26_75 =	_CURRENT_BANK
      3  69a7				   LEVEL_Zone_26_75 SUBROUTINE
      4  69a7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  69a7
      2  69a7		       7c 37 23 7c*	      .byte.b	"|7#|#-+-.-2#|#3 *$-#|3#$.2 #|2 #2 *-#|2 #$#$-#|2 #2 .-#|2 6#",0
      0  69e4					      END_LEVEL	Zone_26_75
      1  69e4		       00 3d	   LEVEL_SIZE_Zone_26_75 =	* - LEVEL_START
      2  69e4				  -	      IF	LEVEL_SIZE_Zone_26_75 > MAX_LEVEL_SIZE
      3  69e4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_75
      4  69e4					      ENDIF
      0  69e4					      DEFL	Zone_26_76, "|-5#|2#3 3#|#-$#3 #|#-.*$2.#|#-$2 @-#|2#-*$3#|-#-.-#|-5#"
      0  69e4					      START_LEVEL	Zone_26_76
      1  69e4				   LEVEL_START SET	*
      2  69e4		       00 0d	   BANK_LEVEL_Zone_26_76 =	_CURRENT_BANK
      3  69e4				   LEVEL_Zone_26_76 SUBROUTINE
      4  69e4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  69e4
      2  69e4		       7c 2d 35 23*	      .byte.b	"|-5#|2#3 3#|#-$#3 #|#-.*$2.#|#-$2 @-#|2#-*$3#|-#-.-#|-5#",0
      0  6a1d					      END_LEVEL	Zone_26_76
      1  6a1d		       00 39	   LEVEL_SIZE_Zone_26_76 =	* - LEVEL_START
      2  6a1d				  -	      IF	LEVEL_SIZE_Zone_26_76 > MAX_LEVEL_SIZE
      3  6a1d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_76
      4  6a1d					      ENDIF
      0  6a1d					      DEFL	Zone_26_77, "|4#|#2 4#|#2 *2 #|#-$2 .#|2#-*#-#|-#2 *-#|-#-$.$#|-2#-.@#|2 5#"
      0  6a1d					      START_LEVEL	Zone_26_77
      1  6a1d				   LEVEL_START SET	*
      2  6a1d		       00 0d	   BANK_LEVEL_Zone_26_77 =	_CURRENT_BANK
      3  6a1d				   LEVEL_Zone_26_77 SUBROUTINE
      4  6a1d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6a1d
      2  6a1d		       7c 34 23 7c*	      .byte.b	"|4#|#2 4#|#2 *2 #|#-$2 .#|2#-*#-#|-#2 *-#|-#-$.$#|-2#-.@#|2 5#",0
      0  6a5c					      END_LEVEL	Zone_26_77
      1  6a5c		       00 3f	   LEVEL_SIZE_Zone_26_77 =	* - LEVEL_START
      2  6a5c				  -	      IF	LEVEL_SIZE_Zone_26_77 > MAX_LEVEL_SIZE
      3  6a5c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_77
      4  6a5c					      ENDIF
      0  6a5c					      DEFL	Zone_26_78, "|3 4#|3 #2 #|4#2 2#|#3 $.-#|#2 2*2 #|#-$+$#-#|2#-*-.-#|-7#"
      0  6a5c					      START_LEVEL	Zone_26_78
      1  6a5c				   LEVEL_START SET	*
      2  6a5c		       00 0d	   BANK_LEVEL_Zone_26_78 =	_CURRENT_BANK
      3  6a5c				   LEVEL_Zone_26_78 SUBROUTINE
      4  6a5c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6a5c
      2  6a5c		       7c 33 20 34*	      .byte.b	"|3 4#|3 #2 #|4#2 2#|#3 $.-#|#2 2*2 #|#-$+$#-#|2#-*-.-#|-7#",0
      0  6a97					      END_LEVEL	Zone_26_78
      1  6a97		       00 3b	   LEVEL_SIZE_Zone_26_78 =	* - LEVEL_START
      2  6a97				  -	      IF	LEVEL_SIZE_Zone_26_78 > MAX_LEVEL_SIZE
      3  6a97				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_78
      4  6a97					      ENDIF
      0  6a97					      DEFL	Zone_26_79, "|2 5#|3#3 #|#.*2.-#|#2 $*-#|#.#3 #|#3 $-#|3#2$2#|2 #-@#|2 4#"
      0  6a97					      START_LEVEL	Zone_26_79
      1  6a97				   LEVEL_START SET	*
      2  6a97		       00 0d	   BANK_LEVEL_Zone_26_79 =	_CURRENT_BANK
      3  6a97				   LEVEL_Zone_26_79 SUBROUTINE
      4  6a97				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6a97
      2  6a97		       7c 32 20 35*	      .byte.b	"|2 5#|3#3 #|#.*2.-#|#2 $*-#|#.#3 #|#3 $-#|3#2$2#|2 #-@#|2 4#",0
      0  6ad4					      END_LEVEL	Zone_26_79
      1  6ad4		       00 3d	   LEVEL_SIZE_Zone_26_79 =	* - LEVEL_START
      2  6ad4				  -	      IF	LEVEL_SIZE_Zone_26_79 > MAX_LEVEL_SIZE
      3  6ad4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_79
      4  6ad4					      ENDIF
      0  6ad4					      DEFL	Zone_26_80, "|5#|#.2 3#|#-#$2 #|#2 .-.2#|#.*-*$-#|#2 $-$@#|4#2 2#|3 4#"
      0  6ad4					      START_LEVEL	Zone_26_80
      1  6ad4				   LEVEL_START SET	*
      2  6ad4		       00 0d	   BANK_LEVEL_Zone_26_80 =	_CURRENT_BANK
      3  6ad4				   LEVEL_Zone_26_80 SUBROUTINE
      4  6ad4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6ad4
      2  6ad4		       7c 35 23 7c*	      .byte.b	"|5#|#.2 3#|#-#$2 #|#2 .-.2#|#.*-*$-#|#2 $-$@#|4#2 2#|3 4#",0
      0  6b0e					      END_LEVEL	Zone_26_80
      1  6b0e		       00 3a	   LEVEL_SIZE_Zone_26_80 =	* - LEVEL_START
      2  6b0e				  -	      IF	LEVEL_SIZE_Zone_26_80 > MAX_LEVEL_SIZE
      3  6b0e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_80
      4  6b0e					      ENDIF
      0  6b0e					      DEFL	Zone_26_81, "|-6#|-#4 #|-#$*$.#|-#2 #.#|2#-*@-#|#2 *.-#|#-$2 2#|#2 3#|4#"
      0  6b0e					      START_LEVEL	Zone_26_81
      1  6b0e				   LEVEL_START SET	*
      2  6b0e		       00 0d	   BANK_LEVEL_Zone_26_81 =	_CURRENT_BANK
      3  6b0e				   LEVEL_Zone_26_81 SUBROUTINE
      4  6b0e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6b0e
      2  6b0e		       7c 2d 36 23*	      .byte.b	"|-6#|-#4 #|-#$*$.#|-#2 #.#|2#-*@-#|#2 *.-#|#-$2 2#|#2 3#|4#",0
      0  6b4a					      END_LEVEL	Zone_26_81
      1  6b4a		       00 3c	   LEVEL_SIZE_Zone_26_81 =	* - LEVEL_START
      2  6b4a				  -	      IF	LEVEL_SIZE_Zone_26_81 > MAX_LEVEL_SIZE
      3  6b4a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_81
      4  6b4a					      ENDIF
      0  6b4a					      DEFL	Zone_26_82, "|2 4#|3#.-#|#-$2 #|#2 $-3#|#2.#3 #|#@*.2$-#|2#-*3 #|-7#"
      0  6b4a					      START_LEVEL	Zone_26_82
      1  6b4a				   LEVEL_START SET	*
      2  6b4a		       00 0d	   BANK_LEVEL_Zone_26_82 =	_CURRENT_BANK
      3  6b4a				   LEVEL_Zone_26_82 SUBROUTINE
      4  6b4a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6b4a
      2  6b4a		       7c 32 20 34*	      .byte.b	"|2 4#|3#.-#|#-$2 #|#2 $-3#|#2.#3 #|#@*.2$-#|2#-*3 #|-7#",0
      0  6b82					      END_LEVEL	Zone_26_82
      1  6b82		       00 38	   LEVEL_SIZE_Zone_26_82 =	* - LEVEL_START
      2  6b82				  -	      IF	LEVEL_SIZE_Zone_26_82 > MAX_LEVEL_SIZE
      3  6b82				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_82
      4  6b82					      ENDIF
      0  6b82					      DEFL	Zone_26_83, "|3 5#|3 #@2 #|4#2$-#|#3 .$-#|#-.$#-.#|2#$-.*-#|-#-.2 2#|-6#"
      0  6b82					      START_LEVEL	Zone_26_83
      1  6b82				   LEVEL_START SET	*
      2  6b82		       00 0d	   BANK_LEVEL_Zone_26_83 =	_CURRENT_BANK
      3  6b82				   LEVEL_Zone_26_83 SUBROUTINE
      4  6b82				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6b82
      2  6b82		       7c 33 20 35*	      .byte.b	"|3 5#|3 #@2 #|4#2$-#|#3 .$-#|#-.$#-.#|2#$-.*-#|-#-.2 2#|-6#",0
      0  6bbe					      END_LEVEL	Zone_26_83
      1  6bbe		       00 3c	   LEVEL_SIZE_Zone_26_83 =	* - LEVEL_START
      2  6bbe				  -	      IF	LEVEL_SIZE_Zone_26_83 > MAX_LEVEL_SIZE
      3  6bbe				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_83
      4  6bbe					      ENDIF
      0  6bbe					      DEFL	Zone_26_84, "|5#|#-.-4#|#4 $@#|2#$-*$*#|-#-#-*-#|-#-.-.-#|-3#3 #|3 5#"
      0  6bbe					      START_LEVEL	Zone_26_84
      1  6bbe				   LEVEL_START SET	*
      2  6bbe		       00 0d	   BANK_LEVEL_Zone_26_84 =	_CURRENT_BANK
      3  6bbe				   LEVEL_Zone_26_84 SUBROUTINE
      4  6bbe				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6bbe
      2  6bbe		       7c 35 23 7c*	      .byte.b	"|5#|#-.-4#|#4 $@#|2#$-*$*#|-#-#-*-#|-#-.-.-#|-3#3 #|3 5#",0
      0  6bf7					      END_LEVEL	Zone_26_84
      1  6bf7		       00 39	   LEVEL_SIZE_Zone_26_84 =	* - LEVEL_START
      2  6bf7				  -	      IF	LEVEL_SIZE_Zone_26_84 > MAX_LEVEL_SIZE
      3  6bf7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_84
      4  6bf7					      ENDIF
      0  6bf7					      DEFL	Zone_26_85, "|2 4#|2 #2 #|3#2 3#|#2 *2$@#|#-#2 *$#|#.-2.$.#|2#5 #|-7#"
      0  6bf7					      START_LEVEL	Zone_26_85
      1  6bf7				   LEVEL_START SET	*
      2  6bf7		       00 0d	   BANK_LEVEL_Zone_26_85 =	_CURRENT_BANK
      3  6bf7				   LEVEL_Zone_26_85 SUBROUTINE
      4  6bf7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  6bf7
      2  6bf7		       7c 32 20 34*	      .byte.b	"|2 4#|2 #2 #|3#2 3#|#2 *2$@#|#-#2 *$#|#.-2.$.#|2#5 #|-7#",0
      0  6c30					      END_LEVEL	Zone_26_85
      1  6c30		       00 39	   LEVEL_SIZE_Zone_26_85 =	* - LEVEL_START
      2  6c30				  -	      IF	LEVEL_SIZE_Zone_26_85 > MAX_LEVEL_SIZE
      3  6c30				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE_Zone_26_85
      4  6c30					      ENDIF
     61  6c30				  -	      if	0
     62  6c30				  -	      DEFL	Zone_26_86, "|2 4#|2 #2 2#|3#.$-2#|#2 *-$-#|#-$-*$@#|#-#-.-2#|#-.-.-#|7#"
     63  6c30				  -	      DEFL	Zone_26_87, "|5#|#-+-2#|#$-$-3#|#-*2.2 #|#-$-$2 #|#.$#-3#|#-.2 #|6#"
     64  6c30				  -	      DEFL	Zone_26_88, "|4#|#2 2#|#.$-5#|#2 2.3 #|2#-$-$2 #|-#$*.-3#|-#@*2 #|-6#"
     65  6c30				  -	      DEFL	Zone_26_89, "|7#|#3 $.2#|#.-$2 +#|4#$.$#|3 #-*-#|3 #-*-#|3 #3 #|3 #3 #|3 5#"
     66  6c30				  -	      DEFL	Zone_26_90, "|2 4#|2 #2 #|3#2 #|#2 *-#|#.-.-#|#-$.$2#|2#$*$-#|-#2 .@#|-3#2 #|3 4#"
     67  6c30				  -	      DEFL	Zone_26_91, "|-7#|-#-*-.-#|-#-.3 #|-#-.$3#|2#$.-#|#.-2$#|#2 $@#|#2 3#|4#"
     68  6c30				  -	      DEFL	Zone_26_92, "|2 4#|3#2 #|#-2$-2#|#-*3 #|#-.$#-2#|#@*.*2 #|2#3 .-#|-7#"
     69  6c30				  -	      DEFL	Zone_26_93, "|6#|#-*2 #|#-2.$3#|#2 $3 #|2#2.$2 #|#-2$-3#|#2 +2#|5#"
     70  6c30				  -	      DEFL	Zone_26_94, "|2 4#|2 #-@#|2 #2$#|2 #-.3#|3#$2.-#|#-$-$2 #|#2 *.-2#|#4 .#|7#"
     71  6c30				  -	      DEFL	Zone_26_95, "|2 5#|2 #-@.#|2 #-.$#|2 #-*-#|-2#$*-2#|2#2 $2 #|#2 *.2 #|#3 4#|5#"
     72  6c30				  -	      DEFL	Zone_26_96, "|3 4#|3 #2 #|4#$.2#|#-$4 #|#@.2*.-#|#2$4 #|#.-5#|#2 #|4#"
     73  6c30				  -	      DEFL	Zone_26_97, "|2 4#|2 #2 #|3#-$3#|#2 $.-.#|#-.-.2 #|3#$*-$#|2 #@*2 #|2 3#2 #|4 4#"
     74  6c30				  -	      DEFL	Zone_26_98, "|2 4#|2 #2 3#|2 #-.-.#|3#-2*-#|#-@2$.-#|#-$2 $-#|5#.-#|4 #2 #|4 4#"
     75  6c30				  -	      DEFL	Zone_26_99, "|3 5#|-3#3 #|2#3 $-#|#-$.*-2#|#2.$.-#|#3 .2#|3#2$#|2 #-@#|2 4#"
     76  6c30				  -
     77  6c30				  -	      DEFL	Zone_26_100, "|3 4#|2 2#2 #|3#-.-#|#-$-$.#|#.*3 #|#3 *-#|3#.$2#|2 #$-#|2 #@-#|2 4#"
     78  6c30				  -	      DEFL	Zone_26_101, "|4#|#@-5#|#.$-.2 #|#-$*.*-#|2#-$2 2#|-#-$-2#|-#-.-#|-#2 2#|-4#"
     79  6c30				  -	      DEFL	Zone_26_102, "|3 5#|4#.2 #|#-+$.$-#|#-$-2.2#|3#2$-#|2 #-$.#|2 #3 #|2 #3 #|2 5#"
     80  6c30				  -	      DEFL	Zone_26_103, "|4#|#2 3#|#-$2 #|#2 .$3#|2#$.$.@#|-#.2 $-#|-#-*-3#|-#-.-#|-5#"
     81  6c30				  -	      DEFL	Zone_26_104, "|2 4#|2 #-@3#|2 #2$2 #|-2#.*2 #|-#-*-*2#|2#-*.-#|#5 #|#3 3#|5#"
     82  6c30				  -	      DEFL	Zone_26_105, "|4#|#2 2#|#-.-3#|#3 $-#|2#.$2.#|-#-*$@#|-#-.$-#|-#-$3#|-#2 #|-4#"
     83  6c30				  -	      DEFL	Zone_26_106, "|-4#|-#2 #|2#-$4#|#-.2 $@#|#2 2*-.#|#-*-*2 #|3#2 3#|2 #2 #|2 4#"
     84  6c30				  -	      DEFL	Zone_26_107, "|2 4#|2 #2 #|3#2 3#|#-$.-$-#|#2 *-.-#|#-$*-3#|2#-.$#|-#-.@#|-5#"
     85  6c30				  -	      DEFL	Zone_26_108, "|2 4#|3#@-#|#.-2$#|#.-*-3#|2#$.$.-#|-#-*3 #|-#3 3#|-#3 #|-5#"
     86  6c30				  -	      DEFL	Zone_26_109, "|-4#|-#2 #|-#.-#|-#$-#|2#.-4#|#-*-$@-#|#-*$*2 #|#3 .2 #|8#"
     87  6c30				  -	      DEFL	Zone_26_110, "|2 4#|2 #2 2#|3#-.-#|#-$*2 2#|#2.-.$-#|#-$*-$@#|3#2 3#|2 #2 #|2 4#"
     88  6c30				  -	      DEFL	Zone_26_111, "|3 5#|-3#-.-#|2#-$3 #|#-.2 *2#|#3 *-#|3#.$-#|2 #$*-#|2 #-@2#|2 4#"
     89  6c30				  -	      DEFL	Zone_26_112, "|2 4#|2 #2 3#|2 #$3 #|2 #-.-.#|3#$.-2#|#2 $*-#|#@*-.$#|3#3 #|2 5#"
     90  6c30				  -	      DEFL	Zone_26_113, "|2 4#|2 #2 #|3#2 3#|#@$2 $-#|#.2*$2.#|#2 $3 #|#.-5#|#2 #|4#"
     91  6c30				  -	      DEFL	Zone_26_114, "|4#|#2 #|#2 3#|#-$2 2#|#.-2*-#|#-$.*@#|2#3 2#|-#-*-#|-#2 2#|-4#"
     92  6c30				  -	      DEFL	Zone_26_115, "|2 6#|2 #2 *-#|3#.*2 2#|#2 *-.2 #|#2 $.$2 #|3#-$4#|2 #@-#|2 4#"
     93  6c30				  -	      DEFL	Zone_26_116, "|4#|#2 4#|#2 $2 #|#.$2.-#|#-*-$.#|#$-*$-#|#2 .@2#|6#"
     94  6c30					      endif
     95  6c30
      0  6c30					      CHECK_BANK_SIZE	"LEVELS9 -- full 2K"
      1  6c30		       04 30	   .TEMP      =	* - BANK_START
 LEVELS9 -- full 2K (2K) SIZE =  $430 , FREE= $3d0
      2  6c30					      ECHO	"LEVELS9 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  6c30				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  6c30				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  6c30				  -	      ERR
      6  6c30					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_PlayerFrames.asm LEVEL 2 PASS 3
      0  6c30					      include	"BANK_PlayerFrames.asm"
      1  6c30							;    Sokoboo - a Sokoban implementation
      2  6c30							;    using a generic tile-based display engine for the Atari 2600
      3  6c30							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  6c30							;
      5  6c30							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  6c30							;
      7  6c30							;    Code related to the generic tile-based display engine was developed by
      8  6c30							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  6c30							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  6c30							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  6c30							;
     12  6c30							;    Code related to music and sound effects uses the TIATracker music player
     13  6c30							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  6c30							;    directory for Apache licensing details.
     15  6c30							;
     16  6c30							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  6c30							;    See the copyright notices in the License directory for a list of level
     18  6c30							;    contributors.
     19  6c30							;
     20  6c30							;    Except where otherwise indicated, this software is released under the
     21  6c30							;    following licensing arrangement...
     22  6c30							;
     23  6c30							;    This program is free software: you can redistribute it and/or modify
     24  6c30							;    it under the terms of the GNU General Public License as published by
     25  6c30							;    the Free Software Foundation, either version 3 of the License, or
     26  6c30							;    (at your option) any later version.
     27  6c30							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  6c30
     29  6c30							;    This program is distributed in the hope that it will be useful,
     30  6c30							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  6c30							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  6c30							;    GNU General Public License for more details.
     33  6c30
      0  6c30					      NEWBANK	PLAYER_FRAMES
      1  7588 ????				      SEG	PLAYER_FRAMES
      2  7000					      ORG	ORIGIN
      3  7000					      RORG	$F000
      4  7000				   BANK_START SET	*
      5  7000				   PLAYER_FRAMES SET	ORIGIN / 2048
      6  7000				   ORIGIN     SET	ORIGIN + 2048
      7  7000				   _CURRENT_BANK SET	PLAYER_FRAMES
     35  7000
     36  7000							;CL0	  = $0
     37  7000							;CL1	  = $4C   ;yellow
     38  7000							;CL2	  = $68
     39  7000							;CL3	  = $0C   ; cuffs/trim
     40  7000							;CL4	  = $B8   ; jumper
     41  7000							;CL5	  = $b2
     42  7000							;CL6	  = $66
     43  7000
     44  7000		       00 00	   CL0	      =	$0
     45  7000		       00 01	   CL1	      =	1	;$2C	;yellow
     46  7000		       00 02	   CL2	      =	2	;$24
     47  7000		       00 03	   CL3	      =	3	;$6A	; cuffs/trim
     48  7000		       00 04	   CL4	      =	4	;$44
     49  7000		       00 05	   CL5	      =	5	;$B6	; pants
     50  7000		       00 06	   CL6	      =	6	;$64
     51  7000
     52  7000
     53  7000
     54  7000		       00 ff	   JUMP       =	$FF
     55  7000		       00 fe	   FLIP       =	$FE
     56  7000
     57  7000					      MAC	flip
     58  7000					      .byte	FLIP,0
     59  7000					      ENDM
     60  7000
     61  7000					      MAC	goto
     62  7000					      .byte	JUMP
     63  7000					      .byte	ANIMATION_{1}_ID
     64  7000					      ENDM
     65  7000
     66  7000					      MAC	show
     67  7000					      .byte	FRAME_{1},{2}
     68  7000					      ENDM
     69  7000
     70  7000
     71  7000				   ANIM_INDEX SET	0
     72  7000					      MAC	insert_animation
     73  7000				   ANIMATION_{1}_ID =	ANIM_INDEX
     74  7000					      .word	Animation_{1}
     75  7000				   ANIM_INDEX SET	ANIM_INDEX + 2
     76  7000					      ENDM		; {animation address}
     77  7000
     78  7000				   ANIM_TABLE
      0  7000					      INSERT_ANIMATION	WALK
      1  7000		       00 00	   ANIMATION_WALK_ID =	ANIM_INDEX
      2  7000		       12 f0		      .word.w	Animation_WALK
      3  7000				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  7002					      INSERT_ANIMATION	IDLE
      1  7002		       00 02	   ANIMATION_IDLE_ID =	ANIM_INDEX
      2  7002		       44 f0		      .word.w	Animation_IDLE
      3  7002				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  7004					      INSERT_ANIMATION	WIN
      1  7004		       00 04	   ANIMATION_WIN_ID =	ANIM_INDEX
      2  7004		       1e f0		      .word.w	Animation_WIN
      3  7004				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  7006					      INSERT_ANIMATION	WIN2
      1  7006		       00 06	   ANIMATION_WIN2_ID =	ANIM_INDEX
      2  7006		       1e f0		      .word.w	Animation_WIN2
      3  7006				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  7008					      INSERT_ANIMATION	PUSH
      1  7008		       00 08	   ANIMATION_PUSH_ID =	ANIM_INDEX
      2  7008		       c8 f0		      .word.w	Animation_PUSH
      3  7008				   ANIM_INDEX SET	ANIM_INDEX + 2
     84  700a							;    INSERT_ANIMATION PUSHTRY
      0  700a					      INSERT_ANIMATION	PUSHUP
      1  700a		       00 0a	   ANIMATION_PUSHUP_ID =	ANIM_INDEX
      2  700a		       d2 f0		      .word.w	Animation_PUSHUP
      3  700a				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  700c					      INSERT_ANIMATION	WALK2
      1  700c		       00 0c	   ANIMATION_WALK2_ID =	ANIM_INDEX
      2  700c		       14 f0		      .word.w	Animation_WALK2
      3  700c				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  700e					      INSERT_ANIMATION	TURNAROUND
      1  700e		       00 0e	   ANIMATION_TURNAROUND_ID =	ANIM_INDEX
      2  700e		       b4 f0		      .word.w	Animation_TURNAROUND
      3  700e				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  7010					      INSERT_ANIMATION	YAWN
      1  7010		       00 10	   ANIMATION_YAWN_ID =	ANIM_INDEX
      2  7010		       be f0		      .word.w	Animation_YAWN
      3  7010				   ANIM_INDEX SET	ANIM_INDEX + 2
     89  7012							;    INSERT_ANIMATION PUSH_START
     90  7012
     91  7012
     92  7012				   Animation_WALK
     93  7012
      0  7012					      SHOW	WALK2, 4
      1  7012		       02 04		      .byte.b	FRAME_WALK2,4
     95  7014
     96  7014				   Animation_WALK2
      0  7014					      SHOW	WALK3, 8
      1  7014		       05 08		      .byte.b	FRAME_WALK3,8
      0  7016					      SHOW	WALK2, 8
      1  7016		       02 08		      .byte.b	FRAME_WALK2,8
      0  7018					      SHOW	WALK1, 8
      1  7018		       01 08		      .byte.b	FRAME_WALK1,8
      0  701a					      SHOW	WALK2, 8
      1  701a		       02 08		      .byte.b	FRAME_WALK2,8
      0  701c					      GOTO	WALK2
      1  701c		       ff		      .byte.b	JUMP
      2  701d		       0c		      .byte.b	ANIMATION_WALK2_ID
    102  701e
    103  701e
    104  701e				   Animation_WIN
    105  701e
    106  701e				   Animation_WIN2
    107  701e
      0  701e					      SHOW	IDLE1,10
      1  701e		       0d 0a		      .byte.b	FRAME_IDLE1,10
      0  7020					      SHOW	IDLE2,10
      1  7020		       0b 0a		      .byte.b	FRAME_IDLE2,10
      0  7022					      SHOW	IDLE1,10
      1  7022		       0d 0a		      .byte.b	FRAME_IDLE1,10
      0  7024					      SHOW	IDLE2,15
      1  7024		       0b 0f		      .byte.b	FRAME_IDLE2,15
      0  7026					      SHOW	IDLE3,15
      1  7026		       0a 0f		      .byte.b	FRAME_IDLE3,15
      0  7028					      GOTO	WIN2
      1  7028		       ff		      .byte.b	JUMP
      2  7029		       06		      .byte.b	ANIMATION_WIN2_ID
    114  702a
    115  702a
    116  702a
    117  702a
    118  702a				   Animation_WOBBLE
    119  702a
    120  702a							; pretty cool little wobble
    121  702a					      REPEAT	4
      0  702a					      SHOW	WALK2, 10
      1  702a		       02 0a		      .byte.b	FRAME_WALK2,10
      0  702c					      FLIP
      1  702c		       fe 00		      .byte.b	FLIP,0
      0  702e					      SHOW	LOOK2, 10
      1  702e		       11 0a		      .byte.b	FRAME_LOOK2,10
    121  702e					      REPEND
      0  7030					      SHOW	WALK2, 10
      1  7030		       02 0a		      .byte.b	FRAME_WALK2,10
      0  7032					      FLIP
      1  7032		       fe 00		      .byte.b	FLIP,0
      0  7034					      SHOW	LOOK2, 10
      1  7034		       11 0a		      .byte.b	FRAME_LOOK2,10
    121  7034					      REPEND
      0  7036					      SHOW	WALK2, 10
      1  7036		       02 0a		      .byte.b	FRAME_WALK2,10
      0  7038					      FLIP
      1  7038		       fe 00		      .byte.b	FLIP,0
      0  703a					      SHOW	LOOK2, 10
      1  703a		       11 0a		      .byte.b	FRAME_LOOK2,10
    121  703a					      REPEND
      0  703c					      SHOW	WALK2, 10
      1  703c		       02 0a		      .byte.b	FRAME_WALK2,10
      0  703e					      FLIP
      1  703e		       fe 00		      .byte.b	FLIP,0
      0  7040					      SHOW	LOOK2, 10
      1  7040		       11 0a		      .byte.b	FRAME_LOOK2,10
    125  7042					      REPEND
      0  7042					      GOTO	IDLE
      1  7042		       ff		      .byte.b	JUMP
      2  7043		       02		      .byte.b	ANIMATION_IDLE_ID
    127  7044
    128  7044
    129  7044
    130  7044				   Animation_IDLE
    131  7044
    132  7044					      REPEAT	2
    133  7044					      REPEAT	2
      0  7044					      SHOW	BLINK, 2
      1  7044		       0f 02		      .byte.b	FRAME_BLINK,2
      0  7046					      SHOW	WALK2, 255
      1  7046		       02 ff		      .byte.b	FRAME_WALK2,255
    133  7046					      REPEND
      0  7048					      SHOW	BLINK, 2
      1  7048		       0f 02		      .byte.b	FRAME_BLINK,2
      0  704a					      SHOW	WALK2, 255
      1  704a		       02 ff		      .byte.b	FRAME_WALK2,255
    136  704c					      REPEND
    137  704c					      REPEAT	6
      0  704c					      SHOW	HANDLIP1, 20
      1  704c		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  704e					      SHOW	HANDLIP2, 20
      1  704e		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  704e					      REPEND
      0  7050					      SHOW	HANDLIP1, 20
      1  7050		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7052					      SHOW	HANDLIP2, 20
      1  7052		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  7052					      REPEND
      0  7054					      SHOW	HANDLIP1, 20
      1  7054		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7056					      SHOW	HANDLIP2, 20
      1  7056		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  7056					      REPEND
      0  7058					      SHOW	HANDLIP1, 20
      1  7058		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  705a					      SHOW	HANDLIP2, 20
      1  705a		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  705a					      REPEND
      0  705c					      SHOW	HANDLIP1, 20
      1  705c		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  705e					      SHOW	HANDLIP2, 20
      1  705e		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  705e					      REPEND
      0  7060					      SHOW	HANDLIP1, 20
      1  7060		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7062					      SHOW	HANDLIP2, 20
      1  7062		       14 14		      .byte.b	FRAME_HANDLIP2,20
    140  7064					      REPEND
    141  7064					      REPEAT	2
      0  7064					      SHOW	BLINK, 2
      1  7064		       0f 02		      .byte.b	FRAME_BLINK,2
      0  7066					      SHOW	WALK2, 255
      1  7066		       02 ff		      .byte.b	FRAME_WALK2,255
    141  7066					      REPEND
      0  7068					      SHOW	BLINK, 2
      1  7068		       0f 02		      .byte.b	FRAME_BLINK,2
      0  706a					      SHOW	WALK2, 255
      1  706a		       02 ff		      .byte.b	FRAME_WALK2,255
    144  706c					      REPEND
    145  706c					      REPEAT	3
      0  706c					      SHOW	TAPFOOT, 10
      1  706c		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  706e					      SHOW	WALK2, 5
      1  706e		       02 05		      .byte.b	FRAME_WALK2,5
    145  706e					      REPEND
      0  7070					      SHOW	TAPFOOT, 10
      1  7070		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  7072					      SHOW	WALK2, 5
      1  7072		       02 05		      .byte.b	FRAME_WALK2,5
    145  7072					      REPEND
      0  7074					      SHOW	TAPFOOT, 10
      1  7074		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  7076					      SHOW	WALK2, 5
      1  7076		       02 05		      .byte.b	FRAME_WALK2,5
    148  7078					      REPEND
    132  7078					      REPEND
    133  7078					      REPEAT	2
      0  7078					      SHOW	BLINK, 2
      1  7078		       0f 02		      .byte.b	FRAME_BLINK,2
      0  707a					      SHOW	WALK2, 255
      1  707a		       02 ff		      .byte.b	FRAME_WALK2,255
    133  707a					      REPEND
      0  707c					      SHOW	BLINK, 2
      1  707c		       0f 02		      .byte.b	FRAME_BLINK,2
      0  707e					      SHOW	WALK2, 255
      1  707e		       02 ff		      .byte.b	FRAME_WALK2,255
    136  7080					      REPEND
    137  7080					      REPEAT	6
      0  7080					      SHOW	HANDLIP1, 20
      1  7080		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7082					      SHOW	HANDLIP2, 20
      1  7082		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  7082					      REPEND
      0  7084					      SHOW	HANDLIP1, 20
      1  7084		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7086					      SHOW	HANDLIP2, 20
      1  7086		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  7086					      REPEND
      0  7088					      SHOW	HANDLIP1, 20
      1  7088		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  708a					      SHOW	HANDLIP2, 20
      1  708a		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  708a					      REPEND
      0  708c					      SHOW	HANDLIP1, 20
      1  708c		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  708e					      SHOW	HANDLIP2, 20
      1  708e		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  708e					      REPEND
      0  7090					      SHOW	HANDLIP1, 20
      1  7090		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7092					      SHOW	HANDLIP2, 20
      1  7092		       14 14		      .byte.b	FRAME_HANDLIP2,20
    137  7092					      REPEND
      0  7094					      SHOW	HANDLIP1, 20
      1  7094		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  7096					      SHOW	HANDLIP2, 20
      1  7096		       14 14		      .byte.b	FRAME_HANDLIP2,20
    140  7098					      REPEND
    141  7098					      REPEAT	2
      0  7098					      SHOW	BLINK, 2
      1  7098		       0f 02		      .byte.b	FRAME_BLINK,2
      0  709a					      SHOW	WALK2, 255
      1  709a		       02 ff		      .byte.b	FRAME_WALK2,255
    141  709a					      REPEND
      0  709c					      SHOW	BLINK, 2
      1  709c		       0f 02		      .byte.b	FRAME_BLINK,2
      0  709e					      SHOW	WALK2, 255
      1  709e		       02 ff		      .byte.b	FRAME_WALK2,255
    144  70a0					      REPEND
    145  70a0					      REPEAT	3
      0  70a0					      SHOW	TAPFOOT, 10
      1  70a0		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  70a2					      SHOW	WALK2, 5
      1  70a2		       02 05		      .byte.b	FRAME_WALK2,5
    145  70a2					      REPEND
      0  70a4					      SHOW	TAPFOOT, 10
      1  70a4		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  70a6					      SHOW	WALK2, 5
      1  70a6		       02 05		      .byte.b	FRAME_WALK2,5
    145  70a6					      REPEND
      0  70a8					      SHOW	TAPFOOT, 10
      1  70a8		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  70aa					      SHOW	WALK2, 5
      1  70aa		       02 05		      .byte.b	FRAME_WALK2,5
    148  70ac					      REPEND
    149  70ac					      REPEND
    150  70ac
      0  70ac					      SHOW	LOOK3, 3
      1  70ac		       12 03		      .byte.b	FRAME_LOOK3,3
      0  70ae					      SHOW	LOOK2, 30
      1  70ae		       11 1e		      .byte.b	FRAME_LOOK2,30
      0  70b0					      SHOW	LOOK3, 3
      1  70b0		       12 03		      .byte.b	FRAME_LOOK3,3
    154  70b2
      0  70b2					      GOTO	YAWN
      1  70b2		       ff		      .byte.b	JUMP
      2  70b3		       10		      .byte.b	ANIMATION_YAWN_ID
    156  70b4
    157  70b4
    158  70b4				   Animation_TURNAROUND
    159  70b4
      0  70b4					      SHOW	LOOK3, 1
      1  70b4		       12 01		      .byte.b	FRAME_LOOK3,1
      0  70b6					      SHOW	LOOK2, 1
      1  70b6		       11 01		      .byte.b	FRAME_LOOK2,1
      0  70b8					      SHOW	LOOK1, 1
      1  70b8		       13 01		      .byte.b	FRAME_LOOK1,1
      0  70ba					      FLIP
      1  70ba		       fe 00		      .byte.b	FLIP,0
      0  70bc					      GOTO	IDLE
      1  70bc		       ff		      .byte.b	JUMP
      2  70bd		       02		      .byte.b	ANIMATION_IDLE_ID
    165  70be
    166  70be				   Animation_YAWN
    167  70be
    168  70be							;    SHOW WALK2, 50
      0  70be					      SHOW	IDLE1, 10
      1  70be		       0d 0a		      .byte.b	FRAME_IDLE1,10
      0  70c0					      SHOW	IDLE2, 10
      1  70c0		       0b 0a		      .byte.b	FRAME_IDLE2,10
      0  70c2					      SHOW	IDLE3, 150
      1  70c2		       0a 96		      .byte.b	FRAME_IDLE3,150
      0  70c4					      SHOW	IDLE2, 20
      1  70c4		       0b 14		      .byte.b	FRAME_IDLE2,20
      0  70c6					      GOTO	IDLE
      1  70c6		       ff		      .byte.b	JUMP
      2  70c7		       02		      .byte.b	ANIMATION_IDLE_ID
    174  70c8
    175  70c8
    176  70c8							;Animation_PUSHTRY
    177  70c8							;    .byte FRAME_PUSH1,20
    178  70c8							;    .byte FRAME_PUSH2,20
    179  70c8							;    .byte JUMP,ANIMATION_PUSHTRY_ID
    180  70c8
    181  70c8							;Animation_PUSH_START
    182  70c8
    183  70c8							;    .byte FRAME_WALK2,2
    184  70c8
    185  70c8				   Animation_PUSH
    186  70c8
      0  70c8					      SHOW	PUSH1, 10
      1  70c8		       0e 0a		      .byte.b	FRAME_PUSH1,10
      0  70ca					      SHOW	PUSH2, 10
      1  70ca		       0c 0a		      .byte.b	FRAME_PUSH2,10
      0  70cc					      SHOW	PUSH3, 10
      1  70cc		       09 0a		      .byte.b	FRAME_PUSH3,10
      0  70ce					      SHOW	PUSH2, 10
      1  70ce		       0c 0a		      .byte.b	FRAME_PUSH2,10
      0  70d0					      GOTO	PUSH
      1  70d0		       ff		      .byte.b	JUMP
      2  70d1		       08		      .byte.b	ANIMATION_PUSH_ID
    192  70d2
    193  70d2				   Animation_PUSHUP
      0  70d2					      SHOW	PUSH_UP_1, 10
      1  70d2		       06 0a		      .byte.b	FRAME_PUSH_UP_1,10
      0  70d4					      SHOW	PUSH_UP_2, 10
      1  70d4		       08 0a		      .byte.b	FRAME_PUSH_UP_2,10
      0  70d6					      SHOW	PUSH_UP_3, 10
      1  70d6		       07 0a		      .byte.b	FRAME_PUSH_UP_3,10
      0  70d8					      SHOW	PUSH_UP_2, 10
      1  70d8		       08 0a		      .byte.b	FRAME_PUSH_UP_2,10
      0  70da					      GOTO	PUSHUP
      1  70da		       ff		      .byte.b	JUMP
      2  70db		       0a		      .byte.b	ANIMATION_PUSHUP_ID
    199  70dc
    200  70dc
------- FILE sprites/spriteData.asm LEVEL 3 PASS 3
      0  70dc					      include	"sprites/spriteData.asm"
      1  70dc				   FRAMEDATA_crouch1
      2  70dc		       26		      .byte.b	38	; 23
      3  70dd		       12		      .byte.b	18	; 20
      4  70de		       5a		      .byte.b	90	; 17
      5  70df		       fc		      .byte.b	252	; 14
      6  70e0		       18		      .byte.b	24	; 11
      7  70e1		       18		      .byte.b	24	; 8
      8  70e2		       04		      .byte.b	4	; 5
      9  70e3		       00		      .byte.b	0	; 2
     10  70e4		       40		      .byte.b	64	; 22
     11  70e5		       3e		      .byte.b	62	; 19
     12  70e6		       ba		      .byte.b	186	; 16
     13  70e7		       7c		      .byte.b	124	; 13
     14  70e8		       18		      .byte.b	24	; 10
     15  70e9		       0c		      .byte.b	12	; 7
     16  70ea		       1e		      .byte.b	30	; 4
     17  70eb		       00		      .byte.b	0	; 1
     18  70ec		       34		      .byte.b	52	; 21
     19  70ed		       52		      .byte.b	82	; 18
     20  70ee		       be		      .byte.b	190	; 15
     21  70ef		       38		      .byte.b	56	; 12
     22  70f0		       1c		      .byte.b	28	; 9
     23  70f1		       0a		      .byte.b	10	; 6
     24  70f2		       1d		      .byte.b	29	; 3
     25  70f3		       00		      .byte.b	0	; 0
     26  70f4
     27  70f4				   COLOURDATA_crouch1
     28  70f4		       06		      .byte.b	CL6	; 23
     29  70f5		       05		      .byte.b	CL5	; 20
     30  70f6		       03		      .byte.b	CL3	; 17
     31  70f7		       04		      .byte.b	CL4	; 14
     32  70f8		       03		      .byte.b	CL3	; 11
     33  70f9		       02		      .byte.b	CL2	; 8
     34  70fa		       02		      .byte.b	CL2	; 5
     35  70fb		       00		      .byte.b	CL0	; 2
     36  70fc		       06		      .byte.b	CL6	; 22
     37  70fd		       05		      .byte.b	CL5	; 19
     38  70fe		       04		      .byte.b	CL4	; 16
     39  70ff		       04		      .byte.b	CL4	; 13
     40  7100		       02		      .byte.b	CL2	; 10
     41  7101		       02		      .byte.b	CL2	; 7
     42  7102		       01		      .byte.b	CL1	; 4
     43  7103		       00		      .byte.b	CL0	; 1
     44  7104		       05		      .byte.b	CL5	; 21
     45  7105		       02		      .byte.b	CL2	; 18
     46  7106		       04		      .byte.b	CL4	; 15
     47  7107		       04		      .byte.b	CL4	; 12
     48  7108		       02		      .byte.b	CL2	; 9
     49  7109		       02		      .byte.b	CL2	; 6
     50  710a		       01		      .byte.b	CL1	; 3
     51  710b		       00		      .byte.b	CL0	; 0
     52  710c
     53  710c				   FRAMEDATA_walk1
     54  710c		       44		      .byte.b	68	; 23
     55  710d		       4c		      .byte.b	76	; 20
     56  710e		       28		      .byte.b	40	; 17
     57  710f		       ba		      .byte.b	186	; 14
     58  7110		       7c		      .byte.b	124	; 11
     59  7111		       18		      .byte.b	24	; 8
     60  7112		       0c		      .byte.b	12	; 5
     61  7113		       1e		      .byte.b	30	; 2
     62  7114		       82		      .byte.b	130	; 22
     63  7115		       1c		      .byte.b	28	; 19
     64  7116		       b2		      .byte.b	178	; 16
     65  7117		       bc		      .byte.b	188	; 13
     66  7118		       38		      .byte.b	56	; 10
     67  7119		       1c		      .byte.b	28	; 7
     68  711a		       0a		      .byte.b	10	; 4
     69  711b		       1d		      .byte.b	29	; 1
     70  711c		       6c		      .byte.b	108	; 21
     71  711d		       38		      .byte.b	56	; 18
     72  711e		       ba		      .byte.b	186	; 15
     73  711f		       fc		      .byte.b	252	; 12
     74  7120		       18		      .byte.b	24	; 9
     75  7121		       18		      .byte.b	24	; 6
     76  7122		       04		      .byte.b	4	; 3
     77  7123		       00		      .byte.b	0	; 0
     78  7124
     79  7124				   COLOURDATA_walk1
     80  7124		       06		      .byte.b	CL6	; 23
     81  7125		       05		      .byte.b	CL5	; 20
     82  7126		       05		      .byte.b	CL5	; 17
     83  7127		       04		      .byte.b	CL4	; 14
     84  7128		       04		      .byte.b	CL4	; 11
     85  7129		       02		      .byte.b	CL2	; 8
     86  712a		       02		      .byte.b	CL2	; 5
     87  712b		       01		      .byte.b	CL1	; 2
     88  712c		       06		      .byte.b	CL6	; 22
     89  712d		       05		      .byte.b	CL5	; 19
     90  712e		       02		      .byte.b	CL2	; 16
     91  712f		       04		      .byte.b	CL4	; 13
     92  7130		       04		      .byte.b	CL4	; 10
     93  7131		       02		      .byte.b	CL2	; 7
     94  7132		       02		      .byte.b	CL2	; 4
     95  7133		       01		      .byte.b	CL1	; 1
     96  7134		       05		      .byte.b	CL5	; 21
     97  7135		       05		      .byte.b	CL5	; 18
     98  7136		       03		      .byte.b	CL3	; 15
     99  7137		       04		      .byte.b	CL4	; 12
    100  7138		       03		      .byte.b	CL3	; 9
    101  7139		       02		      .byte.b	CL2	; 6
    102  713a		       02		      .byte.b	CL2	; 3
    103  713b		       00		      .byte.b	CL0	; 0
    104  713c
    105  713c				   FRAMEDATA_walk2
    106  713c		       34		      .byte.b	52	; 23
    107  713d		       28		      .byte.b	40	; 20
    108  713e		       38		      .byte.b	56	; 17
    109  713f		       ba		      .byte.b	186	; 14
    110  7140		       fc		      .byte.b	252	; 11
    111  7141		       18		      .byte.b	24	; 8
    112  7142		       18		      .byte.b	24	; 5
    113  7143		       04		      .byte.b	4	; 2
    114  7144		       00		      .byte.b	0	; 22
    115  7145		       28		      .byte.b	40	; 19
    116  7146		       18		      .byte.b	24	; 16
    117  7147		       ba		      .byte.b	186	; 13
    118  7148		       7c		      .byte.b	124	; 10
    119  7149		       18		      .byte.b	24	; 7
    120  714a		       0c		      .byte.b	12	; 4
    121  714b		       1e		      .byte.b	30	; 1
    122  714c		       28		      .byte.b	40	; 21
    123  714d		       28		      .byte.b	40	; 18
    124  714e		       b2		      .byte.b	178	; 15
    125  714f		       bc		      .byte.b	188	; 12
    126  7150		       38		      .byte.b	56	; 9
    127  7151		       1c		      .byte.b	28	; 6
    128  7152		       0a		      .byte.b	10	; 3
    129  7153		       1d		      .byte.b	29	; 0
    130  7154
    131  7154				   COLOURDATA_walk2
    132  7154		       06		      .byte.b	CL6	; 23
    133  7155		       05		      .byte.b	CL5	; 20
    134  7156		       05		      .byte.b	CL5	; 17
    135  7157		       03		      .byte.b	CL3	; 14
    136  7158		       04		      .byte.b	CL4	; 11
    137  7159		       03		      .byte.b	CL3	; 8
    138  715a		       02		      .byte.b	CL2	; 5
    139  715b		       02		      .byte.b	CL2	; 2
    140  715c		       00		      .byte.b	CL0	; 22
    141  715d		       05		      .byte.b	CL5	; 19
    142  715e		       05		      .byte.b	CL5	; 16
    143  715f		       04		      .byte.b	CL4	; 13
    144  7160		       04		      .byte.b	CL4	; 10
    145  7161		       02		      .byte.b	CL2	; 7
    146  7162		       02		      .byte.b	CL2	; 4
    147  7163		       01		      .byte.b	CL1	; 1
    148  7164		       05		      .byte.b	CL5	; 21
    149  7165		       05		      .byte.b	CL5	; 18
    150  7166		       02		      .byte.b	CL2	; 15
    151  7167		       04		      .byte.b	CL4	; 12
    152  7168		       04		      .byte.b	CL4	; 9
    153  7169		       02		      .byte.b	CL2	; 6
    154  716a		       02		      .byte.b	CL2	; 3
    155  716b		       01		      .byte.b	CL1	; 0
    156  716c
    157  716c				   FRAMEDATA_handlip
    158  716c		       2c		      .byte.b	44	; 23
    159  716d		       28		      .byte.b	40	; 20
    160  716e		       38		      .byte.b	56	; 17
    161  716f		       58		      .byte.b	88	; 14
    162  7170		       fc		      .byte.b	252	; 11
    163  7171		       1a		      .byte.b	26	; 8
    164  7172		       18		      .byte.b	24	; 5
    165  7173		       04		      .byte.b	4	; 2
    166  7174		       00		      .byte.b	0	; 22
    167  7175		       28		      .byte.b	40	; 19
    168  7176		       38		      .byte.b	56	; 16
    169  7177		       b8		      .byte.b	184	; 13
    170  7178		       7e		      .byte.b	126	; 10
    171  7179		       1a		      .byte.b	26	; 7
    172  717a		       0c		      .byte.b	12	; 4
    173  717b		       1e		      .byte.b	30	; 1
    174  717c		       28		      .byte.b	40	; 21
    175  717d		       28		      .byte.b	40	; 18
    176  717e		       28		      .byte.b	40	; 15
    177  717f		       b8		      .byte.b	184	; 12
    178  7180		       3a		      .byte.b	58	; 9
    179  7181		       1e		      .byte.b	30	; 6
    180  7182		       0a		      .byte.b	10	; 3
    181  7183		       1d		      .byte.b	29	; 0
    182  7184
    183  7184				   COLOURDATA_handlip
    184  7184		       01		      .byte.b	CL1	; 23
    185  7185		       02		      .byte.b	CL2	; 20
    186  7186		       02		      .byte.b	CL2	; 17
    187  7187		       06		      .byte.b	CL6	; 14
    188  7188		       03		      .byte.b	CL3	; 11
    189  7189		       06		      .byte.b	CL6	; 8
    190  718a		       04		      .byte.b	CL4	; 5
    191  718b		       04		      .byte.b	CL4	; 2
    192  718c		       00		      .byte.b	CL0	; 22
    193  718d		       02		      .byte.b	CL2	; 19
    194  718e		       02		      .byte.b	CL2	; 16
    195  718f		       03		      .byte.b	CL3	; 13
    196  7190		       03		      .byte.b	CL3	; 10
    197  7191		       04		      .byte.b	CL4	; 7
    198  7192		       04		      .byte.b	CL4	; 4
    199  7193		       05		      .byte.b	CL5	; 1
    200  7194		       02		      .byte.b	CL2	; 21
    201  7195		       02		      .byte.b	CL2	; 18
    202  7196		       04		      .byte.b	CL4	; 15
    203  7197		       03		      .byte.b	CL3	; 12
    204  7198		       03		      .byte.b	CL3	; 9
    205  7199		       04		      .byte.b	CL4	; 6
    206  719a		       04		      .byte.b	CL4	; 3
    207  719b		       05		      .byte.b	CL5	; 0
    208  719c
    209  719c				   FRAMEDATA_lookup
    210  719c		       34		      .byte.b	52	; 23
    211  719d		       28		      .byte.b	40	; 20
    212  719e		       18		      .byte.b	24	; 17
    213  719f		       b8		      .byte.b	184	; 14
    214  71a0		       7e		      .byte.b	126	; 11
    215  71a1		       32		      .byte.b	50	; 8
    216  71a2		       70		      .byte.b	112	; 5
    217  71a3		       40		      .byte.b	64	; 2
    218  71a4		       00		      .byte.b	0	; 22
    219  71a5		       28		      .byte.b	40	; 19
    220  71a6		       b0		      .byte.b	176	; 16
    221  71a7		       b8		      .byte.b	184	; 13
    222  71a8		       7a		      .byte.b	122	; 10
    223  71a9		       36		      .byte.b	54	; 7
    224  71aa		       58		      .byte.b	88	; 4
    225  71ab		       78		      .byte.b	120	; 1
    226  71ac		       28		      .byte.b	40	; 21
    227  71ad		       28		      .byte.b	40	; 18
    228  71ae		       b8		      .byte.b	184	; 15
    229  71af		       fc		      .byte.b	252	; 12
    230  71b0		       32		      .byte.b	50	; 9
    231  71b1		       60		      .byte.b	96	; 6
    232  71b2		       30		      .byte.b	48	; 3
    233  71b3		       34		      .byte.b	52	; 0
    234  71b4
    235  71b4				   COLOURDATA_lookup
    236  71b4		       06		      .byte.b	CL6	; 23
    237  71b5		       05		      .byte.b	CL5	; 20
    238  71b6		       05		      .byte.b	CL5	; 17
    239  71b7		       04		      .byte.b	CL4	; 14
    240  71b8		       04		      .byte.b	CL4	; 11
    241  71b9		       02		      .byte.b	CL2	; 8
    242  71ba		       02		      .byte.b	CL2	; 5
    243  71bb		       01		      .byte.b	CL1	; 2
    244  71bc		       00		      .byte.b	CL0	; 22
    245  71bd		       05		      .byte.b	CL5	; 19
    246  71be		       02		      .byte.b	CL2	; 16
    247  71bf		       04		      .byte.b	CL4	; 13
    248  71c0		       04		      .byte.b	CL4	; 10
    249  71c1		       02		      .byte.b	CL2	; 7
    250  71c2		       02		      .byte.b	CL2	; 4
    251  71c3		       01		      .byte.b	CL1	; 1
    252  71c4		       05		      .byte.b	CL5	; 21
    253  71c5		       05		      .byte.b	CL5	; 18
    254  71c6		       03		      .byte.b	CL3	; 15
    255  71c7		       04		      .byte.b	CL4	; 12
    256  71c8		       03		      .byte.b	CL3	; 9
    257  71c9		       02		      .byte.b	CL2	; 6
    258  71ca		       02		      .byte.b	CL2	; 3
    259  71cb		       01		      .byte.b	CL1	; 0
    260  71cc
    261  71cc				   FRAMEDATA_walk3
    262  71cc		       44		      .byte.b	68	; 23
    263  71cd		       74		      .byte.b	116	; 20
    264  71ce		       28		      .byte.b	40	; 17
    265  71cf		       ba		      .byte.b	186	; 14
    266  71d0		       7c		      .byte.b	124	; 11
    267  71d1		       18		      .byte.b	24	; 8
    268  71d2		       0c		      .byte.b	12	; 5
    269  71d3		       1e		      .byte.b	30	; 2
    270  71d4		       82		      .byte.b	130	; 22
    271  71d5		       34		      .byte.b	52	; 19
    272  71d6		       b2		      .byte.b	178	; 16
    273  71d7		       bc		      .byte.b	188	; 13
    274  71d8		       38		      .byte.b	56	; 10
    275  71d9		       1c		      .byte.b	28	; 7
    276  71da		       0a		      .byte.b	10	; 4
    277  71db		       1d		      .byte.b	29	; 1
    278  71dc		       64		      .byte.b	100	; 21
    279  71dd		       38		      .byte.b	56	; 18
    280  71de		       ba		      .byte.b	186	; 15
    281  71df		       fc		      .byte.b	252	; 12
    282  71e0		       18		      .byte.b	24	; 9
    283  71e1		       18		      .byte.b	24	; 6
    284  71e2		       04		      .byte.b	4	; 3
    285  71e3		       00		      .byte.b	0	; 0
    286  71e4
    287  71e4				   COLOURDATA_walk3
    288  71e4		       06		      .byte.b	CL6	; 23
    289  71e5		       05		      .byte.b	CL5	; 20
    290  71e6		       05		      .byte.b	CL5	; 17
    291  71e7		       04		      .byte.b	CL4	; 14
    292  71e8		       04		      .byte.b	CL4	; 11
    293  71e9		       02		      .byte.b	CL2	; 8
    294  71ea		       02		      .byte.b	CL2	; 5
    295  71eb		       01		      .byte.b	CL1	; 2
    296  71ec		       06		      .byte.b	CL6	; 22
    297  71ed		       05		      .byte.b	CL5	; 19
    298  71ee		       02		      .byte.b	CL2	; 16
    299  71ef		       04		      .byte.b	CL4	; 13
    300  71f0		       04		      .byte.b	CL4	; 10
    301  71f1		       02		      .byte.b	CL2	; 7
    302  71f2		       02		      .byte.b	CL2	; 4
    303  71f3		       01		      .byte.b	CL1	; 1
    304  71f4		       05		      .byte.b	CL5	; 21
    305  71f5		       05		      .byte.b	CL5	; 18
    306  71f6		       03		      .byte.b	CL3	; 15
    307  71f7		       04		      .byte.b	CL4	; 12
    308  71f8		       03		      .byte.b	CL3	; 9
    309  71f9		       02		      .byte.b	CL2	; 6
    310  71fa		       02		      .byte.b	CL2	; 3
    311  71fb		       00		      .byte.b	CL0	; 0
    312  71fc
    313  71fc				   FRAMEDATA_push_up_1
    314  71fc		       00		      .byte.b	0	; 23
    315  71fd		       20		      .byte.b	32	; 20
    316  71fe		       20		      .byte.b	32	; 17
    317  71ff		       20		      .byte.b	32	; 14
    318  7200		       38		      .byte.b	56	; 11
    319  7201		       38		      .byte.b	56	; 8
    320  7202		       ee		      .byte.b	238	; 5
    321  7203		       38		      .byte.b	56	; 2
    322  7204		       00		      .byte.b	0	; 22
    323  7205		       20		      .byte.b	32	; 19
    324  7206		       28		      .byte.b	40	; 16
    325  7207		       38		      .byte.b	56	; 13
    326  7208		       38		      .byte.b	56	; 10
    327  7209		       38		      .byte.b	56	; 7
    328  720a		       82		      .byte.b	130	; 4
    329  720b		       38		      .byte.b	56	; 1
    330  720c		       00		      .byte.b	0	; 21
    331  720d		       08		      .byte.b	8	; 18
    332  720e		       08		      .byte.b	8	; 15
    333  720f		       10		      .byte.b	16	; 12
    334  7210		       38		      .byte.b	56	; 9
    335  7211		       7c		      .byte.b	124	; 6
    336  7212		       aa		      .byte.b	170	; 3
    337  7213		       00		      .byte.b	0	; 0
    338  7214
    339  7214				   COLOURDATA_push_up_1
    340  7214		       00		      .byte.b	CL0	; 23
    341  7215		       06		      .byte.b	CL6	; 20
    342  7216		       05		      .byte.b	CL5	; 17
    343  7217		       05		      .byte.b	CL5	; 14
    344  7218		       06		      .byte.b	CL6	; 11
    345  7219		       04		      .byte.b	CL4	; 8
    346  721a		       04		      .byte.b	CL4	; 5
    347  721b		       01		      .byte.b	CL1	; 2
    348  721c		       00		      .byte.b	CL0	; 22
    349  721d		       06		      .byte.b	CL6	; 19
    350  721e		       05		      .byte.b	CL5	; 16
    351  721f		       05		      .byte.b	CL5	; 13
    352  7220		       03		      .byte.b	CL3	; 10
    353  7221		       04		      .byte.b	CL4	; 7
    354  7222		       03		      .byte.b	CL3	; 4
    355  7223		       01		      .byte.b	CL1	; 1
    356  7224		       00		      .byte.b	CL0	; 21
    357  7225		       06		      .byte.b	CL6	; 18
    358  7226		       05		      .byte.b	CL5	; 15
    359  7227		       05		      .byte.b	CL5	; 12
    360  7228		       04		      .byte.b	CL4	; 9
    361  7229		       04		      .byte.b	CL4	; 6
    362  722a		       02		      .byte.b	CL2	; 3
    363  722b		       00		      .byte.b	CL0	; 0
    364  722c
    365  722c				   FRAMEDATA_push_up_3
    366  722c		       00		      .byte.b	0	; 23
    367  722d		       08		      .byte.b	8	; 20
    368  722e		       08		      .byte.b	8	; 17
    369  722f		       08		      .byte.b	8	; 14
    370  7230		       38		      .byte.b	56	; 11
    371  7231		       38		      .byte.b	56	; 8
    372  7232		       ee		      .byte.b	238	; 5
    373  7233		       38		      .byte.b	56	; 2
    374  7234		       00		      .byte.b	0	; 22
    375  7235		       08		      .byte.b	8	; 19
    376  7236		       28		      .byte.b	40	; 16
    377  7237		       38		      .byte.b	56	; 13
    378  7238		       38		      .byte.b	56	; 10
    379  7239		       38		      .byte.b	56	; 7
    380  723a		       82		      .byte.b	130	; 4
    381  723b		       38		      .byte.b	56	; 1
    382  723c		       00		      .byte.b	0	; 21
    383  723d		       20		      .byte.b	32	; 18
    384  723e		       20		      .byte.b	32	; 15
    385  723f		       10		      .byte.b	16	; 12
    386  7240		       38		      .byte.b	56	; 9
    387  7241		       7c		      .byte.b	124	; 6
    388  7242		       aa		      .byte.b	170	; 3
    389  7243		       00		      .byte.b	0	; 0
    390  7244
    391  7244				   COLOURDATA_push_up_3
    392  7244		       00		      .byte.b	CL0	; 23
    393  7245		       06		      .byte.b	CL6	; 20
    394  7246		       05		      .byte.b	CL5	; 17
    395  7247		       05		      .byte.b	CL5	; 14
    396  7248		       01		      .byte.b	CL1	; 11
    397  7249		       04		      .byte.b	CL4	; 8
    398  724a		       04		      .byte.b	CL4	; 5
    399  724b		       01		      .byte.b	CL1	; 2
    400  724c		       00		      .byte.b	CL0	; 22
    401  724d		       06		      .byte.b	CL6	; 19
    402  724e		       05		      .byte.b	CL5	; 16
    403  724f		       05		      .byte.b	CL5	; 13
    404  7250		       03		      .byte.b	CL3	; 10
    405  7251		       04		      .byte.b	CL4	; 7
    406  7252		       03		      .byte.b	CL3	; 4
    407  7253		       01		      .byte.b	CL1	; 1
    408  7254		       00		      .byte.b	CL0	; 21
    409  7255		       06		      .byte.b	CL6	; 18
    410  7256		       05		      .byte.b	CL5	; 15
    411  7257		       05		      .byte.b	CL5	; 12
    412  7258		       04		      .byte.b	CL4	; 9
    413  7259		       04		      .byte.b	CL4	; 6
    414  725a		       02		      .byte.b	CL2	; 3
    415  725b		       00		      .byte.b	CL0	; 0
    416  725c
    417  725c				   FRAMEDATA_push_up_2
    418  725c		       00		      .byte.b	0	; 23
    419  725d		       00		      .byte.b	0	; 20
    420  725e		       28		      .byte.b	40	; 17
    421  725f		       28		      .byte.b	40	; 14
    422  7260		       38		      .byte.b	56	; 11
    423  7261		       38		      .byte.b	56	; 8
    424  7262		       ee		      .byte.b	238	; 5
    425  7263		       38		      .byte.b	56	; 2
    426  7264		       00		      .byte.b	0	; 22
    427  7265		       28		      .byte.b	40	; 19
    428  7266		       28		      .byte.b	40	; 16
    429  7267		       38		      .byte.b	56	; 13
    430  7268		       38		      .byte.b	56	; 10
    431  7269		       38		      .byte.b	56	; 7
    432  726a		       82		      .byte.b	130	; 4
    433  726b		       38		      .byte.b	56	; 1
    434  726c		       00		      .byte.b	0	; 21
    435  726d		       00		      .byte.b	0	; 18
    436  726e		       00		      .byte.b	0	; 15
    437  726f		       10		      .byte.b	16	; 12
    438  7270		       38		      .byte.b	56	; 9
    439  7271		       7c		      .byte.b	124	; 6
    440  7272		       aa		      .byte.b	170	; 3
    441  7273		       00		      .byte.b	0	; 0
    442  7274
    443  7274				   COLOURDATA_push_up_2
    444  7274		       00		      .byte.b	CL0	; 23
    445  7275		       00		      .byte.b	CL0	; 20
    446  7276		       05		      .byte.b	CL5	; 17
    447  7277		       05		      .byte.b	CL5	; 14
    448  7278		       06		      .byte.b	CL6	; 11
    449  7279		       04		      .byte.b	CL4	; 8
    450  727a		       04		      .byte.b	CL4	; 5
    451  727b		       01		      .byte.b	CL1	; 2
    452  727c		       00		      .byte.b	CL0	; 22
    453  727d		       06		      .byte.b	CL6	; 19
    454  727e		       05		      .byte.b	CL5	; 16
    455  727f		       05		      .byte.b	CL5	; 13
    456  7280		       03		      .byte.b	CL3	; 10
    457  7281		       04		      .byte.b	CL4	; 7
    458  7282		       03		      .byte.b	CL3	; 4
    459  7283		       01		      .byte.b	CL1	; 1
    460  7284		       00		      .byte.b	CL0	; 21
    461  7285		       00		      .byte.b	CL0	; 18
    462  7286		       00		      .byte.b	CL0	; 15
    463  7287		       05		      .byte.b	CL5	; 12
    464  7288		       04		      .byte.b	CL4	; 9
    465  7289		       04		      .byte.b	CL4	; 6
    466  728a		       02		      .byte.b	CL2	; 3
    467  728b		       00		      .byte.b	CL0	; 0
    468  728c
    469  728c				   FRAMEDATA_push3
    470  728c		       46		      .byte.b	70	; 23
    471  728d		       72		      .byte.b	114	; 20
    472  728e		       18		      .byte.b	24	; 17
    473  728f		       38		      .byte.b	56	; 14
    474  7290		       3e		      .byte.b	62	; 11
    475  7291		       19		      .byte.b	25	; 8
    476  7292		       0c		      .byte.b	12	; 5
    477  7293		       1e		      .byte.b	30	; 2
    478  7294		       80		      .byte.b	128	; 22
    479  7295		       3e		      .byte.b	62	; 19
    480  7296		       30		      .byte.b	48	; 16
    481  7297		       38		      .byte.b	56	; 13
    482  7298		       3f		      .byte.b	63	; 10
    483  7299		       1d		      .byte.b	29	; 7
    484  729a		       0a		      .byte.b	10	; 4
    485  729b		       1d		      .byte.b	29	; 1
    486  729c		       64		      .byte.b	100	; 21
    487  729d		       3c		      .byte.b	60	; 18
    488  729e		       38		      .byte.b	56	; 15
    489  729f		       3c		      .byte.b	60	; 12
    490  72a0		       19		      .byte.b	25	; 9
    491  72a1		       18		      .byte.b	24	; 6
    492  72a2		       04		      .byte.b	4	; 3
    493  72a3		       00		      .byte.b	0	; 0
    494  72a4
    495  72a4				   COLOURDATA_push3
    496  72a4		       06		      .byte.b	CL6	; 23
    497  72a5		       05		      .byte.b	CL5	; 20
    498  72a6		       05		      .byte.b	CL5	; 17
    499  72a7		       04		      .byte.b	CL4	; 14
    500  72a8		       04		      .byte.b	CL4	; 11
    501  72a9		       02		      .byte.b	CL2	; 8
    502  72aa		       02		      .byte.b	CL2	; 5
    503  72ab		       01		      .byte.b	CL1	; 2
    504  72ac		       06		      .byte.b	CL6	; 22
    505  72ad		       05		      .byte.b	CL5	; 19
    506  72ae		       06		      .byte.b	CL6	; 16
    507  72af		       04		      .byte.b	CL4	; 13
    508  72b0		       04		      .byte.b	CL4	; 10
    509  72b1		       02		      .byte.b	CL2	; 7
    510  72b2		       02		      .byte.b	CL2	; 4
    511  72b3		       01		      .byte.b	CL1	; 1
    512  72b4		       05		      .byte.b	CL5	; 21
    513  72b5		       05		      .byte.b	CL5	; 18
    514  72b6		       03		      .byte.b	CL3	; 15
    515  72b7		       04		      .byte.b	CL4	; 12
    516  72b8		       03		      .byte.b	CL3	; 9
    517  72b9		       02		      .byte.b	CL2	; 6
    518  72ba		       02		      .byte.b	CL2	; 3
    519  72bb		       00		      .byte.b	CL0	; 0
    520  72bc
    521  72bc				   FRAMEDATA_idle3
    522  72bc		       2c		      .byte.b	44	; 23
    523  72bd		       28		      .byte.b	40	; 20
    524  72be		       38		      .byte.b	56	; 17
    525  72bf		       38		      .byte.b	56	; 14
    526  72c0		       38		      .byte.b	56	; 11
    527  72c1		       b2		      .byte.b	178	; 8
    528  72c2		       30		      .byte.b	48	; 5
    529  72c3		       08		      .byte.b	8	; 2
    530  72c4		       00		      .byte.b	0	; 22
    531  72c5		       28		      .byte.b	40	; 19
    532  72c6		       38		      .byte.b	56	; 16
    533  72c7		       38		      .byte.b	56	; 13
    534  72c8		       fe		      .byte.b	254	; 10
    535  72c9		       ba		      .byte.b	186	; 7
    536  72ca		       18		      .byte.b	24	; 4
    537  72cb		       3c		      .byte.b	60	; 1
    538  72cc		       28		      .byte.b	40	; 21
    539  72cd		       28		      .byte.b	40	; 18
    540  72ce		       28		      .byte.b	40	; 15
    541  72cf		       38		      .byte.b	56	; 12
    542  72d0		       fe		      .byte.b	254	; 9
    543  72d1		       b2		      .byte.b	178	; 6
    544  72d2		       14		      .byte.b	20	; 3
    545  72d3		       3a		      .byte.b	58	; 0
    546  72d4
    547  72d4				   COLOURDATA_idle3
    548  72d4		       06		      .byte.b	CL6	; 23
    549  72d5		       05		      .byte.b	CL5	; 20
    550  72d6		       05		      .byte.b	CL5	; 17
    551  72d7		       03		      .byte.b	CL3	; 14
    552  72d8		       04		      .byte.b	CL4	; 11
    553  72d9		       03		      .byte.b	CL3	; 8
    554  72da		       02		      .byte.b	CL2	; 5
    555  72db		       02		      .byte.b	CL2	; 2
    556  72dc		       00		      .byte.b	CL0	; 22
    557  72dd		       05		      .byte.b	CL5	; 19
    558  72de		       05		      .byte.b	CL5	; 16
    559  72df		       04		      .byte.b	CL4	; 13
    560  72e0		       04		      .byte.b	CL4	; 10
    561  72e1		       02		      .byte.b	CL2	; 7
    562  72e2		       02		      .byte.b	CL2	; 4
    563  72e3		       01		      .byte.b	CL1	; 1
    564  72e4		       05		      .byte.b	CL5	; 21
    565  72e5		       05		      .byte.b	CL5	; 18
    566  72e6		       02		      .byte.b	CL2	; 15
    567  72e7		       04		      .byte.b	CL4	; 12
    568  72e8		       04		      .byte.b	CL4	; 9
    569  72e9		       02		      .byte.b	CL2	; 6
    570  72ea		       02		      .byte.b	CL2	; 3
    571  72eb		       01		      .byte.b	CL1	; 0
    572  72ec
    573  72ec				   FRAMEDATA_idle2
    574  72ec		       2c		      .byte.b	44	; 23
    575  72ed		       28		      .byte.b	40	; 20
    576  72ee		       38		      .byte.b	56	; 17
    577  72ef		       38		      .byte.b	56	; 14
    578  72f0		       fe		      .byte.b	254	; 11
    579  72f1		       b2		      .byte.b	178	; 8
    580  72f2		       30		      .byte.b	48	; 5
    581  72f3		       08		      .byte.b	8	; 2
    582  72f4		       00		      .byte.b	0	; 22
    583  72f5		       28		      .byte.b	40	; 19
    584  72f6		       38		      .byte.b	56	; 16
    585  72f7		       38		      .byte.b	56	; 13
    586  72f8		       fe		      .byte.b	254	; 10
    587  72f9		       ba		      .byte.b	186	; 7
    588  72fa		       18		      .byte.b	24	; 4
    589  72fb		       3c		      .byte.b	60	; 1
    590  72fc		       28		      .byte.b	40	; 21
    591  72fd		       28		      .byte.b	40	; 18
    592  72fe		       28		      .byte.b	40	; 15
    593  72ff		       38		      .byte.b	56	; 12
    594  7300		       ba		      .byte.b	186	; 9
    595  7301		       30		      .byte.b	48	; 6
    596  7302		       14		      .byte.b	20	; 3
    597  7303		       3a		      .byte.b	58	; 0
    598  7304
    599  7304				   COLOURDATA_idle2
    600  7304		       06		      .byte.b	CL6	; 23
    601  7305		       05		      .byte.b	CL5	; 20
    602  7306		       05		      .byte.b	CL5	; 17
    603  7307		       03		      .byte.b	CL3	; 14
    604  7308		       04		      .byte.b	CL4	; 11
    605  7309		       03		      .byte.b	CL3	; 8
    606  730a		       02		      .byte.b	CL2	; 5
    607  730b		       02		      .byte.b	CL2	; 2
    608  730c		       00		      .byte.b	CL0	; 22
    609  730d		       05		      .byte.b	CL5	; 19
    610  730e		       05		      .byte.b	CL5	; 16
    611  730f		       04		      .byte.b	CL4	; 13
    612  7310		       04		      .byte.b	CL4	; 10
    613  7311		       02		      .byte.b	CL2	; 7
    614  7312		       02		      .byte.b	CL2	; 4
    615  7313		       01		      .byte.b	CL1	; 1
    616  7314		       05		      .byte.b	CL5	; 21
    617  7315		       05		      .byte.b	CL5	; 18
    618  7316		       02		      .byte.b	CL2	; 15
    619  7317		       04		      .byte.b	CL4	; 12
    620  7318		       04		      .byte.b	CL4	; 9
    621  7319		       02		      .byte.b	CL2	; 6
    622  731a		       02		      .byte.b	CL2	; 3
    623  731b		       01		      .byte.b	CL1	; 0
    624  731c
    625  731c				   FRAMEDATA_push2
    626  731c		       26		      .byte.b	38	; 23
    627  731d		       14		      .byte.b	20	; 20
    628  731e		       3c		      .byte.b	60	; 17
    629  731f		       38		      .byte.b	56	; 14
    630  7320		       3c		      .byte.b	60	; 11
    631  7321		       19		      .byte.b	25	; 8
    632  7322		       18		      .byte.b	24	; 5
    633  7323		       04		      .byte.b	4	; 2
    634  7324		       40		      .byte.b	64	; 22
    635  7325		       14		      .byte.b	20	; 19
    636  7326		       28		      .byte.b	40	; 16
    637  7327		       38		      .byte.b	56	; 13
    638  7328		       3e		      .byte.b	62	; 10
    639  7329		       19		      .byte.b	25	; 7
    640  732a		       0c		      .byte.b	12	; 4
    641  732b		       1e		      .byte.b	30	; 1
    642  732c		       34		      .byte.b	52	; 21
    643  732d		       3c		      .byte.b	60	; 18
    644  732e		       30		      .byte.b	48	; 15
    645  732f		       38		      .byte.b	56	; 12
    646  7330		       3f		      .byte.b	63	; 9
    647  7331		       1d		      .byte.b	29	; 6
    648  7332		       0a		      .byte.b	10	; 3
    649  7333		       1d		      .byte.b	29	; 0
    650  7334
    651  7334				   COLOURDATA_push2
    652  7334		       06		      .byte.b	CL6	; 23
    653  7335		       05		      .byte.b	CL5	; 20
    654  7336		       05		      .byte.b	CL5	; 17
    655  7337		       03		      .byte.b	CL3	; 14
    656  7338		       04		      .byte.b	CL4	; 11
    657  7339		       03		      .byte.b	CL3	; 8
    658  733a		       02		      .byte.b	CL2	; 5
    659  733b		       02		      .byte.b	CL2	; 2
    660  733c		       06		      .byte.b	CL6	; 22
    661  733d		       05		      .byte.b	CL5	; 19
    662  733e		       05		      .byte.b	CL5	; 16
    663  733f		       04		      .byte.b	CL4	; 13
    664  7340		       04		      .byte.b	CL4	; 10
    665  7341		       02		      .byte.b	CL2	; 7
    666  7342		       02		      .byte.b	CL2	; 4
    667  7343		       01		      .byte.b	CL1	; 1
    668  7344		       05		      .byte.b	CL5	; 21
    669  7345		       05		      .byte.b	CL5	; 18
    670  7346		       06		      .byte.b	CL6	; 15
    671  7347		       04		      .byte.b	CL4	; 12
    672  7348		       04		      .byte.b	CL4	; 9
    673  7349		       02		      .byte.b	CL2	; 6
    674  734a		       02		      .byte.b	CL2	; 3
    675  734b		       01		      .byte.b	CL1	; 0
    676  734c
    677  734c				   FRAMEDATA_idle1
    678  734c		       34		      .byte.b	52	; 23
    679  734d		       28		      .byte.b	40	; 20
    680  734e		       38		      .byte.b	56	; 17
    681  734f		       ba		      .byte.b	186	; 14
    682  7350		       fc		      .byte.b	252	; 11
    683  7351		       18		      .byte.b	24	; 8
    684  7352		       18		      .byte.b	24	; 5
    685  7353		       04		      .byte.b	4	; 2
    686  7354		       00		      .byte.b	0	; 22
    687  7355		       28		      .byte.b	40	; 19
    688  7356		       18		      .byte.b	24	; 16
    689  7357		       ba		      .byte.b	186	; 13
    690  7358		       7c		      .byte.b	124	; 10
    691  7359		       18		      .byte.b	24	; 7
    692  735a		       0c		      .byte.b	12	; 4
    693  735b		       1e		      .byte.b	30	; 1
    694  735c		       28		      .byte.b	40	; 21
    695  735d		       28		      .byte.b	40	; 18
    696  735e		       b2		      .byte.b	178	; 15
    697  735f		       bc		      .byte.b	188	; 12
    698  7360		       38		      .byte.b	56	; 9
    699  7361		       1c		      .byte.b	28	; 6
    700  7362		       0a		      .byte.b	10	; 3
    701  7363		       1d		      .byte.b	29	; 0
    702  7364
    703  7364				   COLOURDATA_idle1
    704  7364		       06		      .byte.b	CL6	; 23
    705  7365		       05		      .byte.b	CL5	; 20
    706  7366		       05		      .byte.b	CL5	; 17
    707  7367		       03		      .byte.b	CL3	; 14
    708  7368		       04		      .byte.b	CL4	; 11
    709  7369		       03		      .byte.b	CL3	; 8
    710  736a		       02		      .byte.b	CL2	; 5
    711  736b		       02		      .byte.b	CL2	; 2
    712  736c		       00		      .byte.b	CL0	; 22
    713  736d		       05		      .byte.b	CL5	; 19
    714  736e		       05		      .byte.b	CL5	; 16
    715  736f		       04		      .byte.b	CL4	; 13
    716  7370		       04		      .byte.b	CL4	; 10
    717  7371		       02		      .byte.b	CL2	; 7
    718  7372		       02		      .byte.b	CL2	; 4
    719  7373		       01		      .byte.b	CL1	; 1
    720  7374		       05		      .byte.b	CL5	; 21
    721  7375		       05		      .byte.b	CL5	; 18
    722  7376		       02		      .byte.b	CL2	; 15
    723  7377		       04		      .byte.b	CL4	; 12
    724  7378		       04		      .byte.b	CL4	; 9
    725  7379		       02		      .byte.b	CL2	; 6
    726  737a		       02		      .byte.b	CL2	; 3
    727  737b		       01		      .byte.b	CL1	; 0
    728  737c
    729  737c				   FRAMEDATA_push1
    730  737c		       46		      .byte.b	70	; 23
    731  737d		       62		      .byte.b	98	; 20
    732  737e		       28		      .byte.b	40	; 17
    733  737f		       38		      .byte.b	56	; 14
    734  7380		       3e		      .byte.b	62	; 11
    735  7381		       19		      .byte.b	25	; 8
    736  7382		       0c		      .byte.b	12	; 5
    737  7383		       1e		      .byte.b	30	; 2
    738  7384		       80		      .byte.b	128	; 22
    739  7385		       1e		      .byte.b	30	; 19
    740  7386		       30		      .byte.b	48	; 16
    741  7387		       38		      .byte.b	56	; 13
    742  7388		       3f		      .byte.b	63	; 10
    743  7389		       1d		      .byte.b	29	; 7
    744  738a		       0a		      .byte.b	10	; 4
    745  738b		       1d		      .byte.b	29	; 1
    746  738c		       64		      .byte.b	100	; 21
    747  738d		       3c		      .byte.b	60	; 18
    748  738e		       38		      .byte.b	56	; 15
    749  738f		       3c		      .byte.b	60	; 12
    750  7390		       19		      .byte.b	25	; 9
    751  7391		       18		      .byte.b	24	; 6
    752  7392		       04		      .byte.b	4	; 3
    753  7393		       00		      .byte.b	0	; 0
    754  7394
    755  7394				   COLOURDATA_push1
    756  7394		       06		      .byte.b	CL6	; 23
    757  7395		       05		      .byte.b	CL5	; 20
    758  7396		       05		      .byte.b	CL5	; 17
    759  7397		       04		      .byte.b	CL4	; 14
    760  7398		       04		      .byte.b	CL4	; 11
    761  7399		       02		      .byte.b	CL2	; 8
    762  739a		       02		      .byte.b	CL2	; 5
    763  739b		       01		      .byte.b	CL1	; 2
    764  739c		       06		      .byte.b	CL6	; 22
    765  739d		       05		      .byte.b	CL5	; 19
    766  739e		       06		      .byte.b	CL6	; 16
    767  739f		       04		      .byte.b	CL4	; 13
    768  73a0		       04		      .byte.b	CL4	; 10
    769  73a1		       02		      .byte.b	CL2	; 7
    770  73a2		       02		      .byte.b	CL2	; 4
    771  73a3		       01		      .byte.b	CL1	; 1
    772  73a4		       05		      .byte.b	CL5	; 21
    773  73a5		       05		      .byte.b	CL5	; 18
    774  73a6		       03		      .byte.b	CL3	; 15
    775  73a7		       04		      .byte.b	CL4	; 12
    776  73a8		       03		      .byte.b	CL3	; 9
    777  73a9		       02		      .byte.b	CL2	; 6
    778  73aa		       02		      .byte.b	CL2	; 3
    779  73ab		       00		      .byte.b	CL0	; 0
    780  73ac
    781  73ac				   FRAMEDATA_blink
    782  73ac		       34		      .byte.b	52	; 23
    783  73ad		       28		      .byte.b	40	; 20
    784  73ae		       38		      .byte.b	56	; 17
    785  73af		       ba		      .byte.b	186	; 14
    786  73b0		       fc		      .byte.b	252	; 11
    787  73b1		       18		      .byte.b	24	; 8
    788  73b2		       18		      .byte.b	24	; 5
    789  73b3		       04		      .byte.b	4	; 2
    790  73b4		       00		      .byte.b	0	; 22
    791  73b5		       28		      .byte.b	40	; 19
    792  73b6		       18		      .byte.b	24	; 16
    793  73b7		       ba		      .byte.b	186	; 13
    794  73b8		       7c		      .byte.b	124	; 10
    795  73b9		       18		      .byte.b	24	; 7
    796  73ba		       0c		      .byte.b	12	; 4
    797  73bb		       1e		      .byte.b	30	; 1
    798  73bc		       28		      .byte.b	40	; 21
    799  73bd		       28		      .byte.b	40	; 18
    800  73be		       b2		      .byte.b	178	; 15
    801  73bf		       bc		      .byte.b	188	; 12
    802  73c0		       38		      .byte.b	56	; 9
    803  73c1		       1c		      .byte.b	28	; 6
    804  73c2		       0e		      .byte.b	14	; 3
    805  73c3		       1d		      .byte.b	29	; 0
    806  73c4
    807  73c4				   COLOURDATA_blink
    808  73c4		       06		      .byte.b	CL6	; 23
    809  73c5		       05		      .byte.b	CL5	; 20
    810  73c6		       05		      .byte.b	CL5	; 17
    811  73c7		       03		      .byte.b	CL3	; 14
    812  73c8		       04		      .byte.b	CL4	; 11
    813  73c9		       03		      .byte.b	CL3	; 8
    814  73ca		       02		      .byte.b	CL2	; 5
    815  73cb		       02		      .byte.b	CL2	; 2
    816  73cc		       00		      .byte.b	CL0	; 22
    817  73cd		       05		      .byte.b	CL5	; 19
    818  73ce		       05		      .byte.b	CL5	; 16
    819  73cf		       04		      .byte.b	CL4	; 13
    820  73d0		       04		      .byte.b	CL4	; 10
    821  73d1		       02		      .byte.b	CL2	; 7
    822  73d2		       02		      .byte.b	CL2	; 4
    823  73d3		       01		      .byte.b	CL1	; 1
    824  73d4		       05		      .byte.b	CL5	; 21
    825  73d5		       05		      .byte.b	CL5	; 18
    826  73d6		       02		      .byte.b	CL2	; 15
    827  73d7		       04		      .byte.b	CL4	; 12
    828  73d8		       04		      .byte.b	CL4	; 9
    829  73d9		       02		      .byte.b	CL2	; 6
    830  73da		       02		      .byte.b	CL2	; 3
    831  73db		       01		      .byte.b	CL1	; 0
    832  73dc
    833  73dc				   FRAMEDATA_yell
    834  73dc		       34		      .byte.b	52	; 23
    835  73dd		       28		      .byte.b	40	; 20
    836  73de		       18		      .byte.b	24	; 17
    837  73df		       b8		      .byte.b	184	; 14
    838  73e0		       7e		      .byte.b	126	; 11
    839  73e1		       32		      .byte.b	50	; 8
    840  73e2		       72		      .byte.b	114	; 5
    841  73e3		       40		      .byte.b	64	; 2
    842  73e4		       00		      .byte.b	0	; 22
    843  73e5		       28		      .byte.b	40	; 19
    844  73e6		       b0		      .byte.b	176	; 16
    845  73e7		       b8		      .byte.b	184	; 13
    846  73e8		       7a		      .byte.b	122	; 10
    847  73e9		       36		      .byte.b	54	; 7
    848  73ea		       58		      .byte.b	88	; 4
    849  73eb		       78		      .byte.b	120	; 1
    850  73ec		       28		      .byte.b	40	; 21
    851  73ed		       28		      .byte.b	40	; 18
    852  73ee		       b8		      .byte.b	184	; 15
    853  73ef		       fc		      .byte.b	252	; 12
    854  73f0		       32		      .byte.b	50	; 9
    855  73f1		       62		      .byte.b	98	; 6
    856  73f2		       30		      .byte.b	48	; 3
    857  73f3		       34		      .byte.b	52	; 0
    858  73f4
    859  73f4				   COLOURDATA_yell
    860  73f4		       06		      .byte.b	CL6	; 23
    861  73f5		       05		      .byte.b	CL5	; 20
    862  73f6		       05		      .byte.b	CL5	; 17
    863  73f7		       04		      .byte.b	CL4	; 14
    864  73f8		       04		      .byte.b	CL4	; 11
    865  73f9		       02		      .byte.b	CL2	; 8
    866  73fa		       02		      .byte.b	CL2	; 5
    867  73fb		       01		      .byte.b	CL1	; 2
    868  73fc		       00		      .byte.b	CL0	; 22
    869  73fd		       05		      .byte.b	CL5	; 19
    870  73fe		       02		      .byte.b	CL2	; 16
    871  73ff		       04		      .byte.b	CL4	; 13
    872  7400		       04		      .byte.b	CL4	; 10
    873  7401		       02		      .byte.b	CL2	; 7
    874  7402		       02		      .byte.b	CL2	; 4
    875  7403		       01		      .byte.b	CL1	; 1
    876  7404		       05		      .byte.b	CL5	; 21
    877  7405		       05		      .byte.b	CL5	; 18
    878  7406		       03		      .byte.b	CL3	; 15
    879  7407		       04		      .byte.b	CL4	; 12
    880  7408		       03		      .byte.b	CL3	; 9
    881  7409		       02		      .byte.b	CL2	; 6
    882  740a		       02		      .byte.b	CL2	; 3
    883  740b		       01		      .byte.b	CL1	; 0
    884  740c
    885  740c				   FRAMEDATA_look2
    886  740c		       34		      .byte.b	52	; 23
    887  740d		       28		      .byte.b	40	; 20
    888  740e		       38		      .byte.b	56	; 17
    889  740f		       ba		      .byte.b	186	; 14
    890  7410		       7c		      .byte.b	124	; 11
    891  7411		       30		      .byte.b	48	; 8
    892  7412		       10		      .byte.b	16	; 5
    893  7413		       70		      .byte.b	112	; 2
    894  7414		       00		      .byte.b	0	; 22
    895  7415		       28		      .byte.b	40	; 19
    896  7416		       18		      .byte.b	24	; 16
    897  7417		       be		      .byte.b	190	; 13
    898  7418		       78		      .byte.b	120	; 10
    899  7419		       30		      .byte.b	48	; 7
    900  741a		       78		      .byte.b	120	; 4
    901  741b		       78		      .byte.b	120	; 1
    902  741c		       28		      .byte.b	40	; 21
    903  741d		       28		      .byte.b	40	; 18
    904  741e		       b2		      .byte.b	178	; 15
    905  741f		       fc		      .byte.b	252	; 12
    906  7420		       38		      .byte.b	56	; 9
    907  7421		       30		      .byte.b	48	; 6
    908  7422		       28		      .byte.b	40	; 3
    909  7423		       b8		      .byte.b	184	; 0
    910  7424
    911  7424				   COLOURDATA_look2
    912  7424		       06		      .byte.b	CL6	; 23
    913  7425		       05		      .byte.b	CL5	; 20
    914  7426		       05		      .byte.b	CL5	; 17
    915  7427		       03		      .byte.b	CL3	; 14
    916  7428		       04		      .byte.b	CL4	; 11
    917  7429		       03		      .byte.b	CL3	; 8
    918  742a		       02		      .byte.b	CL2	; 5
    919  742b		       02		      .byte.b	CL2	; 2
    920  742c		       00		      .byte.b	CL0	; 22
    921  742d		       05		      .byte.b	CL5	; 19
    922  742e		       05		      .byte.b	CL5	; 16
    923  742f		       04		      .byte.b	CL4	; 13
    924  7430		       04		      .byte.b	CL4	; 10
    925  7431		       02		      .byte.b	CL2	; 7
    926  7432		       02		      .byte.b	CL2	; 4
    927  7433		       01		      .byte.b	CL1	; 1
    928  7434		       05		      .byte.b	CL5	; 21
    929  7435		       05		      .byte.b	CL5	; 18
    930  7436		       02		      .byte.b	CL2	; 15
    931  7437		       04		      .byte.b	CL4	; 12
    932  7438		       04		      .byte.b	CL4	; 9
    933  7439		       02		      .byte.b	CL2	; 6
    934  743a		       02		      .byte.b	CL2	; 3
    935  743b		       01		      .byte.b	CL1	; 0
    936  743c
    937  743c				   FRAMEDATA_look3
    938  743c		       34		      .byte.b	52	; 23
    939  743d		       28		      .byte.b	40	; 20
    940  743e		       38		      .byte.b	56	; 17
    941  743f		       ba		      .byte.b	186	; 14
    942  7440		       fc		      .byte.b	252	; 11
    943  7441		       18		      .byte.b	24	; 8
    944  7442		       10		      .byte.b	16	; 5
    945  7443		       1c		      .byte.b	28	; 2
    946  7444		       00		      .byte.b	0	; 22
    947  7445		       28		      .byte.b	40	; 19
    948  7446		       18		      .byte.b	24	; 16
    949  7447		       ba		      .byte.b	186	; 13
    950  7448		       7c		      .byte.b	124	; 10
    951  7449		       18		      .byte.b	24	; 7
    952  744a		       3c		      .byte.b	60	; 4
    953  744b		       3c		      .byte.b	60	; 1
    954  744c		       28		      .byte.b	40	; 21
    955  744d		       28		      .byte.b	40	; 18
    956  744e		       b2		      .byte.b	178	; 15
    957  744f		       bc		      .byte.b	188	; 12
    958  7450		       38		      .byte.b	56	; 9
    959  7451		       18		      .byte.b	24	; 6
    960  7452		       28		      .byte.b	40	; 3
    961  7453		       3a		      .byte.b	58	; 0
    962  7454
    963  7454				   COLOURDATA_look3
    964  7454		       06		      .byte.b	CL6	; 23
    965  7455		       05		      .byte.b	CL5	; 20
    966  7456		       05		      .byte.b	CL5	; 17
    967  7457		       03		      .byte.b	CL3	; 14
    968  7458		       04		      .byte.b	CL4	; 11
    969  7459		       03		      .byte.b	CL3	; 8
    970  745a		       02		      .byte.b	CL2	; 5
    971  745b		       02		      .byte.b	CL2	; 2
    972  745c		       00		      .byte.b	CL0	; 22
    973  745d		       05		      .byte.b	CL5	; 19
    974  745e		       05		      .byte.b	CL5	; 16
    975  745f		       04		      .byte.b	CL4	; 13
    976  7460		       04		      .byte.b	CL4	; 10
    977  7461		       02		      .byte.b	CL2	; 7
    978  7462		       02		      .byte.b	CL2	; 4
    979  7463		       01		      .byte.b	CL1	; 1
    980  7464		       05		      .byte.b	CL5	; 21
    981  7465		       05		      .byte.b	CL5	; 18
    982  7466		       02		      .byte.b	CL2	; 15
    983  7467		       04		      .byte.b	CL4	; 12
    984  7468		       04		      .byte.b	CL4	; 9
    985  7469		       02		      .byte.b	CL2	; 6
    986  746a		       02		      .byte.b	CL2	; 3
    987  746b		       01		      .byte.b	CL1	; 0
    988  746c
    989  746c				   FRAMEDATA_look1
    990  746c		       28		      .byte.b	40	; 23
    991  746d		       28		      .byte.b	40	; 20
    992  746e		       38		      .byte.b	56	; 17
    993  746f		       59		      .byte.b	89	; 14
    994  7470		       7c		      .byte.b	124	; 11
    995  7471		       18		      .byte.b	24	; 8
    996  7472		       18		      .byte.b	24	; 5
    997  7473		       20		      .byte.b	32	; 2
    998  7474		       00		      .byte.b	0	; 22
    999  7475		       28		      .byte.b	40	; 19
   1000  7476		       38		      .byte.b	56	; 16
   1001  7477		       5a		      .byte.b	90	; 13
   1002  7478		       3c		      .byte.b	60	; 10
   1003  7479		       18		      .byte.b	24	; 7
   1004  747a		       30		      .byte.b	48	; 4
   1005  747b		       78		      .byte.b	120	; 1
   1006  747c		       28		      .byte.b	40	; 21
   1007  747d		       28		      .byte.b	40	; 18
   1008  747e		       49		      .byte.b	73	; 15
   1009  747f		       7e		      .byte.b	126	; 12
   1010  7480		       18		      .byte.b	24	; 9
   1011  7481		       38		      .byte.b	56	; 6
   1012  7482		       50		      .byte.b	80	; 3
   1013  7483		       b8		      .byte.b	184	; 0
   1014  7484
   1015  7484				   COLOURDATA_look1
   1016  7484		       06		      .byte.b	CL6	; 23
   1017  7485		       05		      .byte.b	CL5	; 20
   1018  7486		       05		      .byte.b	CL5	; 17
   1019  7487		       03		      .byte.b	CL3	; 14
   1020  7488		       04		      .byte.b	CL4	; 11
   1021  7489		       03		      .byte.b	CL3	; 8
   1022  748a		       02		      .byte.b	CL2	; 5
   1023  748b		       02		      .byte.b	CL2	; 2
   1024  748c		       00		      .byte.b	CL0	; 22
   1025  748d		       05		      .byte.b	CL5	; 19
   1026  748e		       05		      .byte.b	CL5	; 16
   1027  748f		       04		      .byte.b	CL4	; 13
   1028  7490		       04		      .byte.b	CL4	; 10
   1029  7491		       02		      .byte.b	CL2	; 7
   1030  7492		       02		      .byte.b	CL2	; 4
   1031  7493		       01		      .byte.b	CL1	; 1
   1032  7494		       05		      .byte.b	CL5	; 21
   1033  7495		       05		      .byte.b	CL5	; 18
   1034  7496		       02		      .byte.b	CL2	; 15
   1035  7497		       04		      .byte.b	CL4	; 12
   1036  7498		       04		      .byte.b	CL4	; 9
   1037  7499		       02		      .byte.b	CL2	; 6
   1038  749a		       02		      .byte.b	CL2	; 3
   1039  749b		       01		      .byte.b	CL1	; 0
   1040  749c
   1041  749c				   FRAMEDATA_handlip2
   1042  749c		       28		      .byte.b	40	; 23
   1043  749d		       28		      .byte.b	40	; 20
   1044  749e		       38		      .byte.b	56	; 17
   1045  749f		       58		      .byte.b	88	; 14
   1046  74a0		       fc		      .byte.b	252	; 11
   1047  74a1		       1a		      .byte.b	26	; 8
   1048  74a2		       18		      .byte.b	24	; 5
   1049  74a3		       04		      .byte.b	4	; 2
   1050  74a4		       04		      .byte.b	4	; 22
   1051  74a5		       28		      .byte.b	40	; 19
   1052  74a6		       38		      .byte.b	56	; 16
   1053  74a7		       b8		      .byte.b	184	; 13
   1054  74a8		       7e		      .byte.b	126	; 10
   1055  74a9		       1a		      .byte.b	26	; 7
   1056  74aa		       0c		      .byte.b	12	; 4
   1057  74ab		       1e		      .byte.b	30	; 1
   1058  74ac		       28		      .byte.b	40	; 21
   1059  74ad		       28		      .byte.b	40	; 18
   1060  74ae		       28		      .byte.b	40	; 15
   1061  74af		       b8		      .byte.b	184	; 12
   1062  74b0		       3a		      .byte.b	58	; 9
   1063  74b1		       1e		      .byte.b	30	; 6
   1064  74b2		       0a		      .byte.b	10	; 3
   1065  74b3		       1d		      .byte.b	29	; 0
   1066  74b4
   1067  74b4				   COLOURDATA_handlip2
   1068  74b4		       06		      .byte.b	CL6	; 23
   1069  74b5		       05		      .byte.b	CL5	; 20
   1070  74b6		       05		      .byte.b	CL5	; 17
   1071  74b7		       03		      .byte.b	CL3	; 14
   1072  74b8		       04		      .byte.b	CL4	; 11
   1073  74b9		       03		      .byte.b	CL3	; 8
   1074  74ba		       02		      .byte.b	CL2	; 5
   1075  74bb		       02		      .byte.b	CL2	; 2
   1076  74bc		       06		      .byte.b	CL6	; 22
   1077  74bd		       05		      .byte.b	CL5	; 19
   1078  74be		       05		      .byte.b	CL5	; 16
   1079  74bf		       04		      .byte.b	CL4	; 13
   1080  74c0		       04		      .byte.b	CL4	; 10
   1081  74c1		       02		      .byte.b	CL2	; 7
   1082  74c2		       02		      .byte.b	CL2	; 4
   1083  74c3		       01		      .byte.b	CL1	; 1
   1084  74c4		       05		      .byte.b	CL5	; 21
   1085  74c5		       05		      .byte.b	CL5	; 18
   1086  74c6		       02		      .byte.b	CL2	; 15
   1087  74c7		       04		      .byte.b	CL4	; 12
   1088  74c8		       04		      .byte.b	CL4	; 9
   1089  74c9		       02		      .byte.b	CL2	; 6
   1090  74ca		       02		      .byte.b	CL2	; 3
   1091  74cb		       01		      .byte.b	CL1	; 0
   1092  74cc
   1093  74cc				   FRAMEDATA_tapfoot
   1094  74cc		       24		      .byte.b	36	; 23
   1095  74cd		       28		      .byte.b	40	; 20
   1096  74ce		       38		      .byte.b	56	; 17
   1097  74cf		       ba		      .byte.b	186	; 14
   1098  74d0		       fc		      .byte.b	252	; 11
   1099  74d1		       18		      .byte.b	24	; 8
   1100  74d2		       18		      .byte.b	24	; 5
   1101  74d3		       04		      .byte.b	4	; 2
   1102  74d4		       10		      .byte.b	16	; 22
   1103  74d5		       28		      .byte.b	40	; 19
   1104  74d6		       18		      .byte.b	24	; 16
   1105  74d7		       ba		      .byte.b	186	; 13
   1106  74d8		       7c		      .byte.b	124	; 10
   1107  74d9		       18		      .byte.b	24	; 7
   1108  74da		       0c		      .byte.b	12	; 4
   1109  74db		       1e		      .byte.b	30	; 1
   1110  74dc		       28		      .byte.b	40	; 21
   1111  74dd		       28		      .byte.b	40	; 18
   1112  74de		       b2		      .byte.b	178	; 15
   1113  74df		       bc		      .byte.b	188	; 12
   1114  74e0		       38		      .byte.b	56	; 9
   1115  74e1		       1c		      .byte.b	28	; 6
   1116  74e2		       0a		      .byte.b	10	; 3
   1117  74e3		       1d		      .byte.b	29	; 0
   1118  74e4
   1119  74e4				   COLOURDATA_tapfoot
   1120  74e4		       06		      .byte.b	CL6	; 23
   1121  74e5		       05		      .byte.b	CL5	; 20
   1122  74e6		       05		      .byte.b	CL5	; 17
   1123  74e7		       03		      .byte.b	CL3	; 14
   1124  74e8		       04		      .byte.b	CL4	; 11
   1125  74e9		       03		      .byte.b	CL3	; 8
   1126  74ea		       02		      .byte.b	CL2	; 5
   1127  74eb		       02		      .byte.b	CL2	; 2
   1128  74ec		       06		      .byte.b	CL6	; 22
   1129  74ed		       05		      .byte.b	CL5	; 19
   1130  74ee		       05		      .byte.b	CL5	; 16
   1131  74ef		       04		      .byte.b	CL4	; 13
   1132  74f0		       04		      .byte.b	CL4	; 10
   1133  74f1		       02		      .byte.b	CL2	; 7
   1134  74f2		       02		      .byte.b	CL2	; 4
   1135  74f3		       01		      .byte.b	CL1	; 1
   1136  74f4		       05		      .byte.b	CL5	; 21
   1137  74f5		       05		      .byte.b	CL5	; 18
   1138  74f6		       02		      .byte.b	CL2	; 15
   1139  74f7		       04		      .byte.b	CL4	; 12
   1140  74f8		       04		      .byte.b	CL4	; 9
   1141  74f9		       02		      .byte.b	CL2	; 6
   1142  74fa		       02		      .byte.b	CL2	; 3
   1143  74fb		       01		      .byte.b	CL1	; 0
   1144  74fc
   1145  74fc				   FRAMEDATA_handlip1
   1146  74fc		       2c		      .byte.b	44	; 23
   1147  74fd		       28		      .byte.b	40	; 20
   1148  74fe		       38		      .byte.b	56	; 17
   1149  74ff		       58		      .byte.b	88	; 14
   1150  7500		       fc		      .byte.b	252	; 11
   1151  7501		       1a		      .byte.b	26	; 8
   1152  7502		       18		      .byte.b	24	; 5
   1153  7503		       04		      .byte.b	4	; 2
   1154  7504		       00		      .byte.b	0	; 22
   1155  7505		       28		      .byte.b	40	; 19
   1156  7506		       38		      .byte.b	56	; 16
   1157  7507		       b8		      .byte.b	184	; 13
   1158  7508		       7e		      .byte.b	126	; 10
   1159  7509		       1a		      .byte.b	26	; 7
   1160  750a		       0c		      .byte.b	12	; 4
   1161  750b		       1e		      .byte.b	30	; 1
   1162  750c		       28		      .byte.b	40	; 21
   1163  750d		       28		      .byte.b	40	; 18
   1164  750e		       28		      .byte.b	40	; 15
   1165  750f		       b8		      .byte.b	184	; 12
   1166  7510		       3a		      .byte.b	58	; 9
   1167  7511		       1e		      .byte.b	30	; 6
   1168  7512		       0a		      .byte.b	10	; 3
   1169  7513		       1d		      .byte.b	29	; 0
   1170  7514
   1171  7514				   COLOURDATA_handlip1
   1172  7514		       06		      .byte.b	CL6	; 23
   1173  7515		       05		      .byte.b	CL5	; 20
   1174  7516		       05		      .byte.b	CL5	; 17
   1175  7517		       03		      .byte.b	CL3	; 14
   1176  7518		       04		      .byte.b	CL4	; 11
   1177  7519		       03		      .byte.b	CL3	; 8
   1178  751a		       02		      .byte.b	CL2	; 5
   1179  751b		       02		      .byte.b	CL2	; 2
   1180  751c		       00		      .byte.b	CL0	; 22
   1181  751d		       05		      .byte.b	CL5	; 19
   1182  751e		       05		      .byte.b	CL5	; 16
   1183  751f		       04		      .byte.b	CL4	; 13
   1184  7520		       04		      .byte.b	CL4	; 10
   1185  7521		       02		      .byte.b	CL2	; 7
   1186  7522		       02		      .byte.b	CL2	; 4
   1187  7523		       01		      .byte.b	CL1	; 1
   1188  7524		       05		      .byte.b	CL5	; 21
   1189  7525		       05		      .byte.b	CL5	; 18
   1190  7526		       02		      .byte.b	CL2	; 15
   1191  7527		       04		      .byte.b	CL4	; 12
   1192  7528		       04		      .byte.b	CL4	; 9
   1193  7529		       02		      .byte.b	CL2	; 6
   1194  752a		       02		      .byte.b	CL2	; 3
   1195  752b		       01		      .byte.b	CL1	; 0
   1196  752c
   1197  752c
   1198  752c				   __FNUM     SET	0
   1199  752c					      MAC	deframe
   1200  752c				   FRAME_{1}  =	__FNUM
   1201  752c				   __FNUM     SET	__FNUM + 1
   1202  752c					      ENDM		;{name}
   1203  752c
      0  752c					      DEFRAME	CROUCH1
      1  752c		       00 00	   FRAME_CROUCH1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	WALK1
      1  752c		       00 01	   FRAME_WALK1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	WALK2
      1  752c		       00 02	   FRAME_WALK2 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	HANDLIP
      1  752c		       00 03	   FRAME_HANDLIP =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	LOOKUP
      1  752c		       00 04	   FRAME_LOOKUP =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	WALK3
      1  752c		       00 05	   FRAME_WALK3 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	PUSH_UP_1
      1  752c		       00 06	   FRAME_PUSH_UP_1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	PUSH_UP_3
      1  752c		       00 07	   FRAME_PUSH_UP_3 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	PUSH_UP_2
      1  752c		       00 08	   FRAME_PUSH_UP_2 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	PUSH3
      1  752c		       00 09	   FRAME_PUSH3 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	IDLE3
      1  752c		       00 0a	   FRAME_IDLE3 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	IDLE2
      1  752c		       00 0b	   FRAME_IDLE2 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	PUSH2
      1  752c		       00 0c	   FRAME_PUSH2 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	IDLE1
      1  752c		       00 0d	   FRAME_IDLE1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	PUSH1
      1  752c		       00 0e	   FRAME_PUSH1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	BLINK
      1  752c		       00 0f	   FRAME_BLINK =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	YELL
      1  752c		       00 10	   FRAME_YELL =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	LOOK2
      1  752c		       00 11	   FRAME_LOOK2 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	LOOK3
      1  752c		       00 12	   FRAME_LOOK3 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	LOOK1
      1  752c		       00 13	   FRAME_LOOK1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	HANDLIP2
      1  752c		       00 14	   FRAME_HANDLIP2 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	TAPFOOT
      1  752c		       00 15	   FRAME_TAPFOOT =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
      0  752c					      DEFRAME	HANDLIP1
      1  752c		       00 16	   FRAME_HANDLIP1 =	__FNUM
      2  752c				   __FNUM     SET	__FNUM + 1
   1227  752c
   1228  752c				   FRAME_PTR_LO
   1229  752c		       dc		      .byte.b	<FRAMEDATA_crouch1
   1230  752d		       0c		      .byte.b	<FRAMEDATA_walk1
   1231  752e		       3c		      .byte.b	<FRAMEDATA_walk2
   1232  752f		       6c		      .byte.b	<FRAMEDATA_handlip
   1233  7530		       9c		      .byte.b	<FRAMEDATA_lookup
   1234  7531		       cc		      .byte.b	<FRAMEDATA_walk3
   1235  7532		       fc		      .byte.b	<FRAMEDATA_push_up_1
   1236  7533		       2c		      .byte.b	<FRAMEDATA_push_up_3
   1237  7534		       5c		      .byte.b	<FRAMEDATA_push_up_2
   1238  7535		       8c		      .byte.b	<FRAMEDATA_push3
   1239  7536		       bc		      .byte.b	<FRAMEDATA_idle3
   1240  7537		       ec		      .byte.b	<FRAMEDATA_idle2
   1241  7538		       1c		      .byte.b	<FRAMEDATA_push2
   1242  7539		       4c		      .byte.b	<FRAMEDATA_idle1
   1243  753a		       7c		      .byte.b	<FRAMEDATA_push1
   1244  753b		       ac		      .byte.b	<FRAMEDATA_blink
   1245  753c		       dc		      .byte.b	<FRAMEDATA_yell
   1246  753d		       0c		      .byte.b	<FRAMEDATA_look2
   1247  753e		       3c		      .byte.b	<FRAMEDATA_look3
   1248  753f		       6c		      .byte.b	<FRAMEDATA_look1
   1249  7540		       9c		      .byte.b	<FRAMEDATA_handlip2
   1250  7541		       cc		      .byte.b	<FRAMEDATA_tapfoot
   1251  7542		       fc		      .byte.b	<FRAMEDATA_handlip1
   1252  7543
   1253  7543				   FRAME_PTR_HI
   1254  7543		       f0		      .byte.b	>FRAMEDATA_crouch1
   1255  7544		       f1		      .byte.b	>FRAMEDATA_walk1
   1256  7545		       f1		      .byte.b	>FRAMEDATA_walk2
   1257  7546		       f1		      .byte.b	>FRAMEDATA_handlip
   1258  7547		       f1		      .byte.b	>FRAMEDATA_lookup
   1259  7548		       f1		      .byte.b	>FRAMEDATA_walk3
   1260  7549		       f1		      .byte.b	>FRAMEDATA_push_up_1
   1261  754a		       f2		      .byte.b	>FRAMEDATA_push_up_3
   1262  754b		       f2		      .byte.b	>FRAMEDATA_push_up_2
   1263  754c		       f2		      .byte.b	>FRAMEDATA_push3
   1264  754d		       f2		      .byte.b	>FRAMEDATA_idle3
   1265  754e		       f2		      .byte.b	>FRAMEDATA_idle2
   1266  754f		       f3		      .byte.b	>FRAMEDATA_push2
   1267  7550		       f3		      .byte.b	>FRAMEDATA_idle1
   1268  7551		       f3		      .byte.b	>FRAMEDATA_push1
   1269  7552		       f3		      .byte.b	>FRAMEDATA_blink
   1270  7553		       f3		      .byte.b	>FRAMEDATA_yell
   1271  7554		       f4		      .byte.b	>FRAMEDATA_look2
   1272  7555		       f4		      .byte.b	>FRAMEDATA_look3
   1273  7556		       f4		      .byte.b	>FRAMEDATA_look1
   1274  7557		       f4		      .byte.b	>FRAMEDATA_handlip2
   1275  7558		       f4		      .byte.b	>FRAMEDATA_tapfoot
   1276  7559		       f4		      .byte.b	>FRAMEDATA_handlip1
   1277  755a
   1278  755a				   COLOUR_PTR_LO
   1279  755a		       f4		      .byte.b	<COLOURDATA_crouch1
   1280  755b		       24		      .byte.b	<COLOURDATA_walk1
   1281  755c		       54		      .byte.b	<COLOURDATA_walk2
   1282  755d		       84		      .byte.b	<COLOURDATA_handlip
   1283  755e		       b4		      .byte.b	<COLOURDATA_lookup
   1284  755f		       e4		      .byte.b	<COLOURDATA_walk3
   1285  7560		       14		      .byte.b	<COLOURDATA_push_up_1
   1286  7561		       44		      .byte.b	<COLOURDATA_push_up_3
   1287  7562		       74		      .byte.b	<COLOURDATA_push_up_2
   1288  7563		       a4		      .byte.b	<COLOURDATA_push3
   1289  7564		       d4		      .byte.b	<COLOURDATA_idle3
   1290  7565		       04		      .byte.b	<COLOURDATA_idle2
   1291  7566		       34		      .byte.b	<COLOURDATA_push2
   1292  7567		       64		      .byte.b	<COLOURDATA_idle1
   1293  7568		       94		      .byte.b	<COLOURDATA_push1
   1294  7569		       c4		      .byte.b	<COLOURDATA_blink
   1295  756a		       f4		      .byte.b	<COLOURDATA_yell
   1296  756b		       24		      .byte.b	<COLOURDATA_look2
   1297  756c		       54		      .byte.b	<COLOURDATA_look3
   1298  756d		       84		      .byte.b	<COLOURDATA_look1
   1299  756e		       b4		      .byte.b	<COLOURDATA_handlip2
   1300  756f		       e4		      .byte.b	<COLOURDATA_tapfoot
   1301  7570		       14		      .byte.b	<COLOURDATA_handlip1
   1302  7571
   1303  7571				   COLOUR_PTR_HI
   1304  7571		       f0		      .byte.b	>COLOURDATA_crouch1
   1305  7572		       f1		      .byte.b	>COLOURDATA_walk1
   1306  7573		       f1		      .byte.b	>COLOURDATA_walk2
   1307  7574		       f1		      .byte.b	>COLOURDATA_handlip
   1308  7575		       f1		      .byte.b	>COLOURDATA_lookup
   1309  7576		       f1		      .byte.b	>COLOURDATA_walk3
   1310  7577		       f2		      .byte.b	>COLOURDATA_push_up_1
   1311  7578		       f2		      .byte.b	>COLOURDATA_push_up_3
   1312  7579		       f2		      .byte.b	>COLOURDATA_push_up_2
   1313  757a		       f2		      .byte.b	>COLOURDATA_push3
   1314  757b		       f2		      .byte.b	>COLOURDATA_idle3
   1315  757c		       f3		      .byte.b	>COLOURDATA_idle2
   1316  757d		       f3		      .byte.b	>COLOURDATA_push2
   1317  757e		       f3		      .byte.b	>COLOURDATA_idle1
   1318  757f		       f3		      .byte.b	>COLOURDATA_push1
   1319  7580		       f3		      .byte.b	>COLOURDATA_blink
   1320  7581		       f3		      .byte.b	>COLOURDATA_yell
   1321  7582		       f4		      .byte.b	>COLOURDATA_look2
   1322  7583		       f4		      .byte.b	>COLOURDATA_look3
   1323  7584		       f4		      .byte.b	>COLOURDATA_look1
   1324  7585		       f4		      .byte.b	>COLOURDATA_handlip2
   1325  7586		       f4		      .byte.b	>COLOURDATA_tapfoot
   1326  7587		       f5		      .byte.b	>COLOURDATA_handlip1
------- FILE BANK_PlayerFrames.asm
    202  7588
    203  7588
      0  7588					      CHECK_BANK_SIZE	"PLAYER_FRAMES"
      1  7588		       05 88	   .TEMP      =	* - BANK_START
 PLAYER_FRAMES (2K) SIZE =  $588 , FREE= $278
      2  7588					      ECHO	"PLAYER_FRAMES", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  7588				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  7588				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  7588				  -	      ERR
      6  7588					      endif
------- FILE ./sokoboo.asm
------- FILE titleScreen.asm LEVEL 2 PASS 3
      0  7588					      include	"titleScreen.asm"
      0  7588					      NEWBANK	TITLESCREEN
      1  7f4a ????				      SEG	TITLESCREEN
      2  7800					      ORG	ORIGIN
      3  7800					      RORG	$F000
      4  7800				   BANK_START SET	*
      5  7800				   TITLESCREEN SET	ORIGIN / 2048
      6  7800				   ORIGIN     SET	ORIGIN + 2048
      7  7800				   _CURRENT_BANK SET	TITLESCREEN
      0  7800					      DEFINE_SUBROUTINE	TitleScreen
      1  7800		       00 0f	   BANK_TitleScreen =	_CURRENT_BANK
      2  7800					      SUBROUTINE
      3  7800				   TitleScreen
      3  7800
      4  7800							; Start of new frame
      5  7800
      6  7800							; Start of vertical blank processing
      7  7800
      8  7800				   TitleSequence
      9  7800
     10  7800		       a9 00		      lda	#%00000000
     11  7802		       85 4a		      sta	CTRLPF
     12  7804		       85 49		      sta	COLUBK
     13  7806
     14  7806		       a6 80		      ldx	Platform
     15  7808		       bd b6 f0 	      lda	colvec,x
     16  780b		       85 da		      sta	colour_table
     17  780d		       bd b7 f0 	      lda	colvec+1,x
     18  7810		       85 db		      sta	colour_table+1
     19  7812
     20  7812		       85 c7		      sta	rndHi
     21  7814		       85 c8		      sta	rnd
     22  7816
     23  7816
      0  7816					      RESYNC
      1  7816
      2  7816		       a9 02		      lda	#%10
      3  7818		       85 41		      sta	VBLANK
      4  781a
      5  781a		       a2 08		      ldx	#8
      6  781c				   .loopResync
      0  781c					      VERTICAL_SYNC
      1  781c		       a9 0e		      lda	#%1110
      2  781e		       85 42	   .VSLP1     sta	WSYNC
      3  7820		       85 40		      sta	VSYNC
      4  7822		       4a		      lsr
      5  7823		       d0 f9		      bne	.VSLP1
      8  7825
      9  7825		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  7827		       a5 80		      lda	Platform
     11  7829		       49 02		      eor	#PAL_50
     12  782b		       d0 02		      bne	.ntsc
     13  782d		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  782f				   .ntsc
     15  782f				   .loopWait
     16  782f		       85 42		      sta	WSYNC
     17  7831		       85 42		      sta	WSYNC
     18  7833		       88		      dey
     19  7834		       d0 f9		      bne	.loopWait
     20  7836		       ca		      dex
     21  7837		       d0 e3		      bne	.loopResync
     25  7839
      0  7839					      DEFINE_SUBROUTINE	RestartFrame
      1  7839		       00 0f	   BANK_RestartFrame =	_CURRENT_BANK
      2  7839					      SUBROUTINE
      3  7839				   RestartFrame
     27  7839		       a9 0e		      lda	#%1110	; VSYNC ON
     28  783b		       85 42	   .loopVSync2 sta	WSYNC
     29  783d		       85 40		      sta	VSYNC
     30  783f		       4a		      lsr
     31  7840		       d0 f9		      bne	.loopVSync2	; branch until VYSNC has been reset
     32  7842
     33  7842							;------------------------------------------------------------------
     34  7842
     35  7842
     36  7842
     37  7842		       a6 80		      ldx	Platform
     38  7844		       bc ef fc 	      ldy	VBlankTime,x
     39  7847		       8c 96 02 	      sty	TIM64T
     40  784a
     41  784a
     42  784a				  -	      if	0
     43  784a				  -	      lda	SWCHB
     44  784a				  -	      rol
     45  784a				  -	      rol
     46  784a				  -	      rol
     47  784a				  -	      and	#%11
     48  784a				  -	      eor	#PAL
     49  784a				  -	      cmp	Platform
     50  784a				  -	      beq	platOK
     51  784a				  -	      sta	Platform
     52  784a				  -	      jmp	TitleSequence
     53  784a				  -platOK
     54  784a					      endif
     55  784a
     56  784a
     57  784a
     58  784a		       85 42	   VerticalBlank sta	WSYNC
     59  784c		       ad 84 02 	      lda	INTIM
     60  784f		       d0 f9		      bne	VerticalBlank
     61  7851		       85 41		      sta	VBLANK
     62  7853
     63  7853
     64  7853							;------------------------------------------------------------------
     65  7853
     66  7853							; Do X scanlines of color-changing (our picture)
     67  7853
     68  7853		       a0 77		      ldy	#119	; this counts our scanline number
     69  7855		       a2 03	   SokoLogo   ldx	#3
     70  7857		       b1 da	   triplet    lda	(colour_table),y
     71  7859		       85 42		      sta	WSYNC
     72  785b		       85 48		      sta	COLUPF	; 3
     73  785d
     74  785d		       b9 aa f1 	      lda	COL_0,y	; 5
     75  7860		       85 4d		      sta	PF0	; 3   @11
     76  7862		       b9 9a f2 	      lda	COL_1,y	; 5
     77  7865		       85 4e		      sta	PF1	; 3   @19
     78  7867		       b9 8a f3 	      lda	COL_2,y	; 5
     79  786a		       85 4f		      sta	PF2	; 3   @27
     80  786c
     81  786c		       b9 7a f4 	      lda	COL_3,y	; 5
     82  786f		       85 4d		      sta	PF0	; 3   @35
      0  7871					      SLEEP	2	; @37
      1  7871				   .CYCLES    SET	2
      2  7871
      3  7871				  -	      IF	.CYCLES < 2
      4  7871				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  7871				  -	      ERR
      6  7871					      ENDIF
      7  7871
      8  7871				  -	      IF	.CYCLES & 1
      9  7871				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  7871				  -	      nop	0
     11  7871				  -	      ELSE
     12  7871				  -	      bit	VSYNC
     13  7871				  -	      ENDIF
     14  7871				  -.CYCLES    SET	.CYCLES - 3
     15  7871					      ENDIF
     16  7871
     17  7871					      REPEAT	.CYCLES / 2
     18  7871		       ea		      nop
     19  7872					      REPEND
     84  7872		       b9 6a f5 	      lda	COL_4,y	; 5
     85  7875		       85 4e		      sta	PF1	; 3   @45
      0  7877					      SLEEP	3	; @45
      1  7877				   .CYCLES    SET	3
      2  7877
      3  7877				  -	      IF	.CYCLES < 2
      4  7877				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  7877				  -	      ERR
      6  7877					      ENDIF
      7  7877
      8  7877					      IF	.CYCLES & 1
      9  7877					      IFNCONST	NO_ILLEGAL_OPCODES
     10  7877		       04 00		      nop	0
     11  7879				  -	      ELSE
     12  7879				  -	      bit	VSYNC
     13  7879					      ENDIF
     14  7879				   .CYCLES    SET	.CYCLES - 3
     15  7879					      ENDIF
     16  7879
     17  7879				  -	      REPEAT	.CYCLES / 2
     18  7879				  -	      nop
     19  7879					      REPEND
     87  7879		       b9 5a f6 	      lda	COL_5,y	; 5
     88  787c		       85 4f		      sta	PF2	; 3
     89  787e
     90  787e		       88		      dey		; 2
     91  787f		       ca		      dex		; 2
     92  7880		       d0 d5		      bne	triplet	; 2(3)
     93  7882
     94  7882		       c0 ff		      cpy	#-1	; 2
     95  7884		       d0 cf		      bne	SokoLogo	; 2(3)
     96  7886
     97  7886		       a9 00		      lda	#0
     98  7888		       85 4d		      sta	PF0
     99  788a		       85 4e		      sta	PF1
    100  788c		       85 4f		      sta	PF2
    101  788e
    102  788e		       a6 80		      ldx	Platform
    103  7890		       bd b2 f0 	      lda	OverscanTime2,x
    104  7893		       8d 96 02 	      sta	TIM64T
    105  7896
    106  7896				  -	      if	0
    107  7896				  -	      sta	WSYNC
    108  7896				  -	      sta	WSYNC
    109  7896				  -	      sta	WSYNC
    110  7896				  -	      sta	WSYNC
    111  7896				  -	      sta	WSYNC
    112  7896				  -	      SLEEP	8
    113  7896				  -	      jsr	SokoScreen
    114  7896				  -
    115  7896				  -	      lda	#0
    116  7896				  -	      sta	BoardScrollX
    117  7896				  -	      sta	BoardScrollY
    118  7896					      endif
    119  7896
    120  7896							;		ldy #63
    121  7896							;bot2		 sta WSYNC
    122  7896							;		dey
    123  7896							;		bpl bot2
    124  7896
    125  7896							;--------------------------------------------------------------------------
    126  7896
    127  7896							;		lda #0
    128  7896							;		sta PF0
    129  7896							;		sta PF1
    130  7896							;		sta PF2
    131  7896
    132  7896
      0  7896					      NEXT_RANDOM
      1  7896
      2  7896		       a5 c8		      lda	rnd
      3  7898		       4a		      lsr
      4  7899					      IFCONST	rndHi
      5  7899		       66 c7		      ror	rndHi
      6  789b					      ENDIF
      7  789b		       90 02		      bcc	.skipEOR
      8  789d		       49 b4		      eor	#RND_EOR_VAL
      9  789f				   .skipEOR
     10  789f		       85 c8		      sta	rnd
    134  78a1
    135  78a1							; D1 VBLANK turns off beam
    136  78a1							; It needs to be turned on 37 scanlines later
    137  78a1
    138  78a1				   oscan
    139  78a1		       ad 84 02 	      lda	INTIM
    140  78a4		       d0 fb		      bne	oscan
    141  78a6
    142  78a6		       a9 42		      lda	#%01000010	; bit6 is not required
    143  78a8		       85 41		      sta	VBLANK	; end of screen - enter blanking
    144  78aa
    145  78aa		       a5 4c		      lda	INPT4
    146  78ac		       10 03		      bpl	ret
    147  78ae
    148  78ae		       4c 39 f0 	      jmp	RestartFrame
    149  78b1
    150  78b1		       60	   ret	      rts
    151  78b2
    152  78b2				   OverscanTime2
    153  78b2		       85 85		      .byte.b	133, 133
    154  78b4		       8b 8b		      .byte.b	139, 139
    155  78b6
    156  78b6				   colvec
    157  78b6		       32 f1 ba f0	      .word.w	colr_ntsc, colr_pal
    158  78ba
    159  78ba
    160  78ba					      MAC	lumtable
    161  78ba							; {4} MIN LUM 1
    162  78ba							; {5} MIN LUM 2
    163  78ba							; {6} MIN LUM 3
    164  78ba
    165  78ba				   .LUM1      SET	{4}*256
    166  78ba				   .LUM2      SET	{5}*256
    167  78ba				   .LUM3      SET	{6}*256
    168  78ba
    169  78ba				   .STEP1     =	(256*({7}-{4}))/40
    170  78ba				   .STEP2     =	(256*({8}-{5}))/40
    171  78ba				   .STEP3     =	(256*({9}-{6}))/40
    172  78ba
    173  78ba					      REPEAT	40
    174  78ba					      .byte	{1}+(.LUM1/256)
    175  78ba					      .byte	{2}+(.LUM2/256)
    176  78ba					      .byte	{3}+(.LUM3/256)
    177  78ba				   .LUM1      SET	.LUM1 + .STEP1
    178  78ba				   .LUM2      SET	.LUM2 + .STEP2
    179  78ba				   .LUM3      SET	.LUM3 + .STEP3
    180  78ba					      REPEND
    181  78ba					      ENDM		;{1}{2}{3} base colours
    182  78ba
    183  78ba							;colr_pal    LUMTABLE $B0,$30,$A0,0,8,4 ;2,4,6
      0  78ba				   colr_pal   LUMTABLE	$b0, $70, $40, 6,7,8, $C,$E,$E
      1  78ba
      2  78ba
      3  78ba
      4  78ba
      5  78ba				   .LUM1      SET	6*256
      6  78ba				   .LUM2      SET	7*256
      7  78ba				   .LUM3      SET	8*256
      8  78ba
      9  78ba		       00 26	   .STEP1     =	(256*($C-6))/40
     10  78ba		       00 2c	   .STEP2     =	(256*($E-7))/40
     11  78ba		       00 26	   .STEP3     =	(256*($E-8))/40
     12  78ba
     13  78ba					      REPEAT	40
     14  78ba		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78bb		       77		      .byte.b	$70+(.LUM2/256)
     16  78bc		       48		      .byte.b	$40+(.LUM3/256)
     17  78bc				   .LUM1      SET	.LUM1 + .STEP1
     18  78bc				   .LUM2      SET	.LUM2 + .STEP2
     19  78bc				   .LUM3      SET	.LUM3 + .STEP3
     13  78bc					      REPEND
     14  78bd		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78be		       77		      .byte.b	$70+(.LUM2/256)
     16  78bf		       48		      .byte.b	$40+(.LUM3/256)
     17  78bf				   .LUM1      SET	.LUM1 + .STEP1
     18  78bf				   .LUM2      SET	.LUM2 + .STEP2
     19  78bf				   .LUM3      SET	.LUM3 + .STEP3
     13  78bf					      REPEND
     14  78c0		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78c1		       77		      .byte.b	$70+(.LUM2/256)
     16  78c2		       48		      .byte.b	$40+(.LUM3/256)
     17  78c2				   .LUM1      SET	.LUM1 + .STEP1
     18  78c2				   .LUM2      SET	.LUM2 + .STEP2
     19  78c2				   .LUM3      SET	.LUM3 + .STEP3
     13  78c2					      REPEND
     14  78c3		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78c4		       77		      .byte.b	$70+(.LUM2/256)
     16  78c5		       48		      .byte.b	$40+(.LUM3/256)
     17  78c5				   .LUM1      SET	.LUM1 + .STEP1
     18  78c5				   .LUM2      SET	.LUM2 + .STEP2
     19  78c5				   .LUM3      SET	.LUM3 + .STEP3
     13  78c5					      REPEND
     14  78c6		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78c7		       77		      .byte.b	$70+(.LUM2/256)
     16  78c8		       48		      .byte.b	$40+(.LUM3/256)
     17  78c8				   .LUM1      SET	.LUM1 + .STEP1
     18  78c8				   .LUM2      SET	.LUM2 + .STEP2
     19  78c8				   .LUM3      SET	.LUM3 + .STEP3
     13  78c8					      REPEND
     14  78c9		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78ca		       77		      .byte.b	$70+(.LUM2/256)
     16  78cb		       48		      .byte.b	$40+(.LUM3/256)
     17  78cb				   .LUM1      SET	.LUM1 + .STEP1
     18  78cb				   .LUM2      SET	.LUM2 + .STEP2
     19  78cb				   .LUM3      SET	.LUM3 + .STEP3
     13  78cb					      REPEND
     14  78cc		       b6		      .byte.b	$b0+(.LUM1/256)
     15  78cd		       78		      .byte.b	$70+(.LUM2/256)
     16  78ce		       48		      .byte.b	$40+(.LUM3/256)
     17  78ce				   .LUM1      SET	.LUM1 + .STEP1
     18  78ce				   .LUM2      SET	.LUM2 + .STEP2
     19  78ce				   .LUM3      SET	.LUM3 + .STEP3
     13  78ce					      REPEND
     14  78cf		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78d0		       78		      .byte.b	$70+(.LUM2/256)
     16  78d1		       49		      .byte.b	$40+(.LUM3/256)
     17  78d1				   .LUM1      SET	.LUM1 + .STEP1
     18  78d1				   .LUM2      SET	.LUM2 + .STEP2
     19  78d1				   .LUM3      SET	.LUM3 + .STEP3
     13  78d1					      REPEND
     14  78d2		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78d3		       78		      .byte.b	$70+(.LUM2/256)
     16  78d4		       49		      .byte.b	$40+(.LUM3/256)
     17  78d4				   .LUM1      SET	.LUM1 + .STEP1
     18  78d4				   .LUM2      SET	.LUM2 + .STEP2
     19  78d4				   .LUM3      SET	.LUM3 + .STEP3
     13  78d4					      REPEND
     14  78d5		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78d6		       78		      .byte.b	$70+(.LUM2/256)
     16  78d7		       49		      .byte.b	$40+(.LUM3/256)
     17  78d7				   .LUM1      SET	.LUM1 + .STEP1
     18  78d7				   .LUM2      SET	.LUM2 + .STEP2
     19  78d7				   .LUM3      SET	.LUM3 + .STEP3
     13  78d7					      REPEND
     14  78d8		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78d9		       78		      .byte.b	$70+(.LUM2/256)
     16  78da		       49		      .byte.b	$40+(.LUM3/256)
     17  78da				   .LUM1      SET	.LUM1 + .STEP1
     18  78da				   .LUM2      SET	.LUM2 + .STEP2
     19  78da				   .LUM3      SET	.LUM3 + .STEP3
     13  78da					      REPEND
     14  78db		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78dc		       78		      .byte.b	$70+(.LUM2/256)
     16  78dd		       49		      .byte.b	$40+(.LUM3/256)
     17  78dd				   .LUM1      SET	.LUM1 + .STEP1
     18  78dd				   .LUM2      SET	.LUM2 + .STEP2
     19  78dd				   .LUM3      SET	.LUM3 + .STEP3
     13  78dd					      REPEND
     14  78de		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78df		       79		      .byte.b	$70+(.LUM2/256)
     16  78e0		       49		      .byte.b	$40+(.LUM3/256)
     17  78e0				   .LUM1      SET	.LUM1 + .STEP1
     18  78e0				   .LUM2      SET	.LUM2 + .STEP2
     19  78e0				   .LUM3      SET	.LUM3 + .STEP3
     13  78e0					      REPEND
     14  78e1		       b7		      .byte.b	$b0+(.LUM1/256)
     15  78e2		       79		      .byte.b	$70+(.LUM2/256)
     16  78e3		       49		      .byte.b	$40+(.LUM3/256)
     17  78e3				   .LUM1      SET	.LUM1 + .STEP1
     18  78e3				   .LUM2      SET	.LUM2 + .STEP2
     19  78e3				   .LUM3      SET	.LUM3 + .STEP3
     13  78e3					      REPEND
     14  78e4		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78e5		       79		      .byte.b	$70+(.LUM2/256)
     16  78e6		       4a		      .byte.b	$40+(.LUM3/256)
     17  78e6				   .LUM1      SET	.LUM1 + .STEP1
     18  78e6				   .LUM2      SET	.LUM2 + .STEP2
     19  78e6				   .LUM3      SET	.LUM3 + .STEP3
     13  78e6					      REPEND
     14  78e7		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78e8		       79		      .byte.b	$70+(.LUM2/256)
     16  78e9		       4a		      .byte.b	$40+(.LUM3/256)
     17  78e9				   .LUM1      SET	.LUM1 + .STEP1
     18  78e9				   .LUM2      SET	.LUM2 + .STEP2
     19  78e9				   .LUM3      SET	.LUM3 + .STEP3
     13  78e9					      REPEND
     14  78ea		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78eb		       79		      .byte.b	$70+(.LUM2/256)
     16  78ec		       4a		      .byte.b	$40+(.LUM3/256)
     17  78ec				   .LUM1      SET	.LUM1 + .STEP1
     18  78ec				   .LUM2      SET	.LUM2 + .STEP2
     19  78ec				   .LUM3      SET	.LUM3 + .STEP3
     13  78ec					      REPEND
     14  78ed		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78ee		       79		      .byte.b	$70+(.LUM2/256)
     16  78ef		       4a		      .byte.b	$40+(.LUM3/256)
     17  78ef				   .LUM1      SET	.LUM1 + .STEP1
     18  78ef				   .LUM2      SET	.LUM2 + .STEP2
     19  78ef				   .LUM3      SET	.LUM3 + .STEP3
     13  78ef					      REPEND
     14  78f0		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78f1		       7a		      .byte.b	$70+(.LUM2/256)
     16  78f2		       4a		      .byte.b	$40+(.LUM3/256)
     17  78f2				   .LUM1      SET	.LUM1 + .STEP1
     18  78f2				   .LUM2      SET	.LUM2 + .STEP2
     19  78f2				   .LUM3      SET	.LUM3 + .STEP3
     13  78f2					      REPEND
     14  78f3		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78f4		       7a		      .byte.b	$70+(.LUM2/256)
     16  78f5		       4a		      .byte.b	$40+(.LUM3/256)
     17  78f5				   .LUM1      SET	.LUM1 + .STEP1
     18  78f5				   .LUM2      SET	.LUM2 + .STEP2
     19  78f5				   .LUM3      SET	.LUM3 + .STEP3
     13  78f5					      REPEND
     14  78f6		       b8		      .byte.b	$b0+(.LUM1/256)
     15  78f7		       7a		      .byte.b	$70+(.LUM2/256)
     16  78f8		       4a		      .byte.b	$40+(.LUM3/256)
     17  78f8				   .LUM1      SET	.LUM1 + .STEP1
     18  78f8				   .LUM2      SET	.LUM2 + .STEP2
     19  78f8				   .LUM3      SET	.LUM3 + .STEP3
     13  78f8					      REPEND
     14  78f9		       b9		      .byte.b	$b0+(.LUM1/256)
     15  78fa		       7a		      .byte.b	$70+(.LUM2/256)
     16  78fb		       4b		      .byte.b	$40+(.LUM3/256)
     17  78fb				   .LUM1      SET	.LUM1 + .STEP1
     18  78fb				   .LUM2      SET	.LUM2 + .STEP2
     19  78fb				   .LUM3      SET	.LUM3 + .STEP3
     13  78fb					      REPEND
     14  78fc		       b9		      .byte.b	$b0+(.LUM1/256)
     15  78fd		       7a		      .byte.b	$70+(.LUM2/256)
     16  78fe		       4b		      .byte.b	$40+(.LUM3/256)
     17  78fe				   .LUM1      SET	.LUM1 + .STEP1
     18  78fe				   .LUM2      SET	.LUM2 + .STEP2
     19  78fe				   .LUM3      SET	.LUM3 + .STEP3
     13  78fe					      REPEND
     14  78ff		       b9		      .byte.b	$b0+(.LUM1/256)
     15  7900		       7a		      .byte.b	$70+(.LUM2/256)
     16  7901		       4b		      .byte.b	$40+(.LUM3/256)
     17  7901				   .LUM1      SET	.LUM1 + .STEP1
     18  7901				   .LUM2      SET	.LUM2 + .STEP2
     19  7901				   .LUM3      SET	.LUM3 + .STEP3
     13  7901					      REPEND
     14  7902		       b9		      .byte.b	$b0+(.LUM1/256)
     15  7903		       7b		      .byte.b	$70+(.LUM2/256)
     16  7904		       4b		      .byte.b	$40+(.LUM3/256)
     17  7904				   .LUM1      SET	.LUM1 + .STEP1
     18  7904				   .LUM2      SET	.LUM2 + .STEP2
     19  7904				   .LUM3      SET	.LUM3 + .STEP3
     13  7904					      REPEND
     14  7905		       b9		      .byte.b	$b0+(.LUM1/256)
     15  7906		       7b		      .byte.b	$70+(.LUM2/256)
     16  7907		       4b		      .byte.b	$40+(.LUM3/256)
     17  7907				   .LUM1      SET	.LUM1 + .STEP1
     18  7907				   .LUM2      SET	.LUM2 + .STEP2
     19  7907				   .LUM3      SET	.LUM3 + .STEP3
     13  7907					      REPEND
     14  7908		       b9		      .byte.b	$b0+(.LUM1/256)
     15  7909		       7b		      .byte.b	$70+(.LUM2/256)
     16  790a		       4b		      .byte.b	$40+(.LUM3/256)
     17  790a				   .LUM1      SET	.LUM1 + .STEP1
     18  790a				   .LUM2      SET	.LUM2 + .STEP2
     19  790a				   .LUM3      SET	.LUM3 + .STEP3
     13  790a					      REPEND
     14  790b		       ba		      .byte.b	$b0+(.LUM1/256)
     15  790c		       7b		      .byte.b	$70+(.LUM2/256)
     16  790d		       4c		      .byte.b	$40+(.LUM3/256)
     17  790d				   .LUM1      SET	.LUM1 + .STEP1
     18  790d				   .LUM2      SET	.LUM2 + .STEP2
     19  790d				   .LUM3      SET	.LUM3 + .STEP3
     13  790d					      REPEND
     14  790e		       ba		      .byte.b	$b0+(.LUM1/256)
     15  790f		       7b		      .byte.b	$70+(.LUM2/256)
     16  7910		       4c		      .byte.b	$40+(.LUM3/256)
     17  7910				   .LUM1      SET	.LUM1 + .STEP1
     18  7910				   .LUM2      SET	.LUM2 + .STEP2
     19  7910				   .LUM3      SET	.LUM3 + .STEP3
     13  7910					      REPEND
     14  7911		       ba		      .byte.b	$b0+(.LUM1/256)
     15  7912		       7b		      .byte.b	$70+(.LUM2/256)
     16  7913		       4c		      .byte.b	$40+(.LUM3/256)
     17  7913				   .LUM1      SET	.LUM1 + .STEP1
     18  7913				   .LUM2      SET	.LUM2 + .STEP2
     19  7913				   .LUM3      SET	.LUM3 + .STEP3
     13  7913					      REPEND
     14  7914		       ba		      .byte.b	$b0+(.LUM1/256)
     15  7915		       7c		      .byte.b	$70+(.LUM2/256)
     16  7916		       4c		      .byte.b	$40+(.LUM3/256)
     17  7916				   .LUM1      SET	.LUM1 + .STEP1
     18  7916				   .LUM2      SET	.LUM2 + .STEP2
     19  7916				   .LUM3      SET	.LUM3 + .STEP3
     13  7916					      REPEND
     14  7917		       ba		      .byte.b	$b0+(.LUM1/256)
     15  7918		       7c		      .byte.b	$70+(.LUM2/256)
     16  7919		       4c		      .byte.b	$40+(.LUM3/256)
     17  7919				   .LUM1      SET	.LUM1 + .STEP1
     18  7919				   .LUM2      SET	.LUM2 + .STEP2
     19  7919				   .LUM3      SET	.LUM3 + .STEP3
     13  7919					      REPEND
     14  791a		       ba		      .byte.b	$b0+(.LUM1/256)
     15  791b		       7c		      .byte.b	$70+(.LUM2/256)
     16  791c		       4c		      .byte.b	$40+(.LUM3/256)
     17  791c				   .LUM1      SET	.LUM1 + .STEP1
     18  791c				   .LUM2      SET	.LUM2 + .STEP2
     19  791c				   .LUM3      SET	.LUM3 + .STEP3
     13  791c					      REPEND
     14  791d		       ba		      .byte.b	$b0+(.LUM1/256)
     15  791e		       7c		      .byte.b	$70+(.LUM2/256)
     16  791f		       4c		      .byte.b	$40+(.LUM3/256)
     17  791f				   .LUM1      SET	.LUM1 + .STEP1
     18  791f				   .LUM2      SET	.LUM2 + .STEP2
     19  791f				   .LUM3      SET	.LUM3 + .STEP3
     13  791f					      REPEND
     14  7920		       bb		      .byte.b	$b0+(.LUM1/256)
     15  7921		       7c		      .byte.b	$70+(.LUM2/256)
     16  7922		       4d		      .byte.b	$40+(.LUM3/256)
     17  7922				   .LUM1      SET	.LUM1 + .STEP1
     18  7922				   .LUM2      SET	.LUM2 + .STEP2
     19  7922				   .LUM3      SET	.LUM3 + .STEP3
     13  7922					      REPEND
     14  7923		       bb		      .byte.b	$b0+(.LUM1/256)
     15  7924		       7d		      .byte.b	$70+(.LUM2/256)
     16  7925		       4d		      .byte.b	$40+(.LUM3/256)
     17  7925				   .LUM1      SET	.LUM1 + .STEP1
     18  7925				   .LUM2      SET	.LUM2 + .STEP2
     19  7925				   .LUM3      SET	.LUM3 + .STEP3
     13  7925					      REPEND
     14  7926		       bb		      .byte.b	$b0+(.LUM1/256)
     15  7927		       7d		      .byte.b	$70+(.LUM2/256)
     16  7928		       4d		      .byte.b	$40+(.LUM3/256)
     17  7928				   .LUM1      SET	.LUM1 + .STEP1
     18  7928				   .LUM2      SET	.LUM2 + .STEP2
     19  7928				   .LUM3      SET	.LUM3 + .STEP3
     13  7928					      REPEND
     14  7929		       bb		      .byte.b	$b0+(.LUM1/256)
     15  792a		       7d		      .byte.b	$70+(.LUM2/256)
     16  792b		       4d		      .byte.b	$40+(.LUM3/256)
     17  792b				   .LUM1      SET	.LUM1 + .STEP1
     18  792b				   .LUM2      SET	.LUM2 + .STEP2
     19  792b				   .LUM3      SET	.LUM3 + .STEP3
     13  792b					      REPEND
     14  792c		       bb		      .byte.b	$b0+(.LUM1/256)
     15  792d		       7d		      .byte.b	$70+(.LUM2/256)
     16  792e		       4d		      .byte.b	$40+(.LUM3/256)
     17  792e				   .LUM1      SET	.LUM1 + .STEP1
     18  792e				   .LUM2      SET	.LUM2 + .STEP2
     19  792e				   .LUM3      SET	.LUM3 + .STEP3
     13  792e					      REPEND
     14  792f		       bb		      .byte.b	$b0+(.LUM1/256)
     15  7930		       7d		      .byte.b	$70+(.LUM2/256)
     16  7931		       4d		      .byte.b	$40+(.LUM3/256)
     17  7931				   .LUM1      SET	.LUM1 + .STEP1
     18  7931				   .LUM2      SET	.LUM2 + .STEP2
     19  7931				   .LUM3      SET	.LUM3 + .STEP3
     20  7932					      REPEND
      0  7932				   colr_ntsc  LUMTABLE	$90,$B0,$20,5,6,7,$C,$E,$E
      1  7932
      2  7932
      3  7932
      4  7932
      5  7932				   .LUM1      SET	5*256
      6  7932				   .LUM2      SET	6*256
      7  7932				   .LUM3      SET	7*256
      8  7932
      9  7932		       00 2c	   .STEP1     =	(256*($C-5))/40
     10  7932		       00 33	   .STEP2     =	(256*($E-6))/40
     11  7932		       00 2c	   .STEP3     =	(256*($E-7))/40
     12  7932
     13  7932					      REPEAT	40
     14  7932		       95		      .byte.b	$90+(.LUM1/256)
     15  7933		       b6		      .byte.b	$B0+(.LUM2/256)
     16  7934		       27		      .byte.b	$20+(.LUM3/256)
     17  7934				   .LUM1      SET	.LUM1 + .STEP1
     18  7934				   .LUM2      SET	.LUM2 + .STEP2
     19  7934				   .LUM3      SET	.LUM3 + .STEP3
     13  7934					      REPEND
     14  7935		       95		      .byte.b	$90+(.LUM1/256)
     15  7936		       b6		      .byte.b	$B0+(.LUM2/256)
     16  7937		       27		      .byte.b	$20+(.LUM3/256)
     17  7937				   .LUM1      SET	.LUM1 + .STEP1
     18  7937				   .LUM2      SET	.LUM2 + .STEP2
     19  7937				   .LUM3      SET	.LUM3 + .STEP3
     13  7937					      REPEND
     14  7938		       95		      .byte.b	$90+(.LUM1/256)
     15  7939		       b6		      .byte.b	$B0+(.LUM2/256)
     16  793a		       27		      .byte.b	$20+(.LUM3/256)
     17  793a				   .LUM1      SET	.LUM1 + .STEP1
     18  793a				   .LUM2      SET	.LUM2 + .STEP2
     19  793a				   .LUM3      SET	.LUM3 + .STEP3
     13  793a					      REPEND
     14  793b		       95		      .byte.b	$90+(.LUM1/256)
     15  793c		       b6		      .byte.b	$B0+(.LUM2/256)
     16  793d		       27		      .byte.b	$20+(.LUM3/256)
     17  793d				   .LUM1      SET	.LUM1 + .STEP1
     18  793d				   .LUM2      SET	.LUM2 + .STEP2
     19  793d				   .LUM3      SET	.LUM3 + .STEP3
     13  793d					      REPEND
     14  793e		       95		      .byte.b	$90+(.LUM1/256)
     15  793f		       b6		      .byte.b	$B0+(.LUM2/256)
     16  7940		       27		      .byte.b	$20+(.LUM3/256)
     17  7940				   .LUM1      SET	.LUM1 + .STEP1
     18  7940				   .LUM2      SET	.LUM2 + .STEP2
     19  7940				   .LUM3      SET	.LUM3 + .STEP3
     13  7940					      REPEND
     14  7941		       95		      .byte.b	$90+(.LUM1/256)
     15  7942		       b6		      .byte.b	$B0+(.LUM2/256)
     16  7943		       27		      .byte.b	$20+(.LUM3/256)
     17  7943				   .LUM1      SET	.LUM1 + .STEP1
     18  7943				   .LUM2      SET	.LUM2 + .STEP2
     19  7943				   .LUM3      SET	.LUM3 + .STEP3
     13  7943					      REPEND
     14  7944		       96		      .byte.b	$90+(.LUM1/256)
     15  7945		       b7		      .byte.b	$B0+(.LUM2/256)
     16  7946		       28		      .byte.b	$20+(.LUM3/256)
     17  7946				   .LUM1      SET	.LUM1 + .STEP1
     18  7946				   .LUM2      SET	.LUM2 + .STEP2
     19  7946				   .LUM3      SET	.LUM3 + .STEP3
     13  7946					      REPEND
     14  7947		       96		      .byte.b	$90+(.LUM1/256)
     15  7948		       b7		      .byte.b	$B0+(.LUM2/256)
     16  7949		       28		      .byte.b	$20+(.LUM3/256)
     17  7949				   .LUM1      SET	.LUM1 + .STEP1
     18  7949				   .LUM2      SET	.LUM2 + .STEP2
     19  7949				   .LUM3      SET	.LUM3 + .STEP3
     13  7949					      REPEND
     14  794a		       96		      .byte.b	$90+(.LUM1/256)
     15  794b		       b7		      .byte.b	$B0+(.LUM2/256)
     16  794c		       28		      .byte.b	$20+(.LUM3/256)
     17  794c				   .LUM1      SET	.LUM1 + .STEP1
     18  794c				   .LUM2      SET	.LUM2 + .STEP2
     19  794c				   .LUM3      SET	.LUM3 + .STEP3
     13  794c					      REPEND
     14  794d		       96		      .byte.b	$90+(.LUM1/256)
     15  794e		       b7		      .byte.b	$B0+(.LUM2/256)
     16  794f		       28		      .byte.b	$20+(.LUM3/256)
     17  794f				   .LUM1      SET	.LUM1 + .STEP1
     18  794f				   .LUM2      SET	.LUM2 + .STEP2
     19  794f				   .LUM3      SET	.LUM3 + .STEP3
     13  794f					      REPEND
     14  7950		       96		      .byte.b	$90+(.LUM1/256)
     15  7951		       b7		      .byte.b	$B0+(.LUM2/256)
     16  7952		       28		      .byte.b	$20+(.LUM3/256)
     17  7952				   .LUM1      SET	.LUM1 + .STEP1
     18  7952				   .LUM2      SET	.LUM2 + .STEP2
     19  7952				   .LUM3      SET	.LUM3 + .STEP3
     13  7952					      REPEND
     14  7953		       96		      .byte.b	$90+(.LUM1/256)
     15  7954		       b8		      .byte.b	$B0+(.LUM2/256)
     16  7955		       28		      .byte.b	$20+(.LUM3/256)
     17  7955				   .LUM1      SET	.LUM1 + .STEP1
     18  7955				   .LUM2      SET	.LUM2 + .STEP2
     19  7955				   .LUM3      SET	.LUM3 + .STEP3
     13  7955					      REPEND
     14  7956		       97		      .byte.b	$90+(.LUM1/256)
     15  7957		       b8		      .byte.b	$B0+(.LUM2/256)
     16  7958		       29		      .byte.b	$20+(.LUM3/256)
     17  7958				   .LUM1      SET	.LUM1 + .STEP1
     18  7958				   .LUM2      SET	.LUM2 + .STEP2
     19  7958				   .LUM3      SET	.LUM3 + .STEP3
     13  7958					      REPEND
     14  7959		       97		      .byte.b	$90+(.LUM1/256)
     15  795a		       b8		      .byte.b	$B0+(.LUM2/256)
     16  795b		       29		      .byte.b	$20+(.LUM3/256)
     17  795b				   .LUM1      SET	.LUM1 + .STEP1
     18  795b				   .LUM2      SET	.LUM2 + .STEP2
     19  795b				   .LUM3      SET	.LUM3 + .STEP3
     13  795b					      REPEND
     14  795c		       97		      .byte.b	$90+(.LUM1/256)
     15  795d		       b8		      .byte.b	$B0+(.LUM2/256)
     16  795e		       29		      .byte.b	$20+(.LUM3/256)
     17  795e				   .LUM1      SET	.LUM1 + .STEP1
     18  795e				   .LUM2      SET	.LUM2 + .STEP2
     19  795e				   .LUM3      SET	.LUM3 + .STEP3
     13  795e					      REPEND
     14  795f		       97		      .byte.b	$90+(.LUM1/256)
     15  7960		       b8		      .byte.b	$B0+(.LUM2/256)
     16  7961		       29		      .byte.b	$20+(.LUM3/256)
     17  7961				   .LUM1      SET	.LUM1 + .STEP1
     18  7961				   .LUM2      SET	.LUM2 + .STEP2
     19  7961				   .LUM3      SET	.LUM3 + .STEP3
     13  7961					      REPEND
     14  7962		       97		      .byte.b	$90+(.LUM1/256)
     15  7963		       b9		      .byte.b	$B0+(.LUM2/256)
     16  7964		       29		      .byte.b	$20+(.LUM3/256)
     17  7964				   .LUM1      SET	.LUM1 + .STEP1
     18  7964				   .LUM2      SET	.LUM2 + .STEP2
     19  7964				   .LUM3      SET	.LUM3 + .STEP3
     13  7964					      REPEND
     14  7965		       97		      .byte.b	$90+(.LUM1/256)
     15  7966		       b9		      .byte.b	$B0+(.LUM2/256)
     16  7967		       29		      .byte.b	$20+(.LUM3/256)
     17  7967				   .LUM1      SET	.LUM1 + .STEP1
     18  7967				   .LUM2      SET	.LUM2 + .STEP2
     19  7967				   .LUM3      SET	.LUM3 + .STEP3
     13  7967					      REPEND
     14  7968		       98		      .byte.b	$90+(.LUM1/256)
     15  7969		       b9		      .byte.b	$B0+(.LUM2/256)
     16  796a		       2a		      .byte.b	$20+(.LUM3/256)
     17  796a				   .LUM1      SET	.LUM1 + .STEP1
     18  796a				   .LUM2      SET	.LUM2 + .STEP2
     19  796a				   .LUM3      SET	.LUM3 + .STEP3
     13  796a					      REPEND
     14  796b		       98		      .byte.b	$90+(.LUM1/256)
     15  796c		       b9		      .byte.b	$B0+(.LUM2/256)
     16  796d		       2a		      .byte.b	$20+(.LUM3/256)
     17  796d				   .LUM1      SET	.LUM1 + .STEP1
     18  796d				   .LUM2      SET	.LUM2 + .STEP2
     19  796d				   .LUM3      SET	.LUM3 + .STEP3
     13  796d					      REPEND
     14  796e		       98		      .byte.b	$90+(.LUM1/256)
     15  796f		       b9		      .byte.b	$B0+(.LUM2/256)
     16  7970		       2a		      .byte.b	$20+(.LUM3/256)
     17  7970				   .LUM1      SET	.LUM1 + .STEP1
     18  7970				   .LUM2      SET	.LUM2 + .STEP2
     19  7970				   .LUM3      SET	.LUM3 + .STEP3
     13  7970					      REPEND
     14  7971		       98		      .byte.b	$90+(.LUM1/256)
     15  7972		       ba		      .byte.b	$B0+(.LUM2/256)
     16  7973		       2a		      .byte.b	$20+(.LUM3/256)
     17  7973				   .LUM1      SET	.LUM1 + .STEP1
     18  7973				   .LUM2      SET	.LUM2 + .STEP2
     19  7973				   .LUM3      SET	.LUM3 + .STEP3
     13  7973					      REPEND
     14  7974		       98		      .byte.b	$90+(.LUM1/256)
     15  7975		       ba		      .byte.b	$B0+(.LUM2/256)
     16  7976		       2a		      .byte.b	$20+(.LUM3/256)
     17  7976				   .LUM1      SET	.LUM1 + .STEP1
     18  7976				   .LUM2      SET	.LUM2 + .STEP2
     19  7976				   .LUM3      SET	.LUM3 + .STEP3
     13  7976					      REPEND
     14  7977		       98		      .byte.b	$90+(.LUM1/256)
     15  7978		       ba		      .byte.b	$B0+(.LUM2/256)
     16  7979		       2a		      .byte.b	$20+(.LUM3/256)
     17  7979				   .LUM1      SET	.LUM1 + .STEP1
     18  7979				   .LUM2      SET	.LUM2 + .STEP2
     19  7979				   .LUM3      SET	.LUM3 + .STEP3
     13  7979					      REPEND
     14  797a		       99		      .byte.b	$90+(.LUM1/256)
     15  797b		       ba		      .byte.b	$B0+(.LUM2/256)
     16  797c		       2b		      .byte.b	$20+(.LUM3/256)
     17  797c				   .LUM1      SET	.LUM1 + .STEP1
     18  797c				   .LUM2      SET	.LUM2 + .STEP2
     19  797c				   .LUM3      SET	.LUM3 + .STEP3
     13  797c					      REPEND
     14  797d		       99		      .byte.b	$90+(.LUM1/256)
     15  797e		       ba		      .byte.b	$B0+(.LUM2/256)
     16  797f		       2b		      .byte.b	$20+(.LUM3/256)
     17  797f				   .LUM1      SET	.LUM1 + .STEP1
     18  797f				   .LUM2      SET	.LUM2 + .STEP2
     19  797f				   .LUM3      SET	.LUM3 + .STEP3
     13  797f					      REPEND
     14  7980		       99		      .byte.b	$90+(.LUM1/256)
     15  7981		       bb		      .byte.b	$B0+(.LUM2/256)
     16  7982		       2b		      .byte.b	$20+(.LUM3/256)
     17  7982				   .LUM1      SET	.LUM1 + .STEP1
     18  7982				   .LUM2      SET	.LUM2 + .STEP2
     19  7982				   .LUM3      SET	.LUM3 + .STEP3
     13  7982					      REPEND
     14  7983		       99		      .byte.b	$90+(.LUM1/256)
     15  7984		       bb		      .byte.b	$B0+(.LUM2/256)
     16  7985		       2b		      .byte.b	$20+(.LUM3/256)
     17  7985				   .LUM1      SET	.LUM1 + .STEP1
     18  7985				   .LUM2      SET	.LUM2 + .STEP2
     19  7985				   .LUM3      SET	.LUM3 + .STEP3
     13  7985					      REPEND
     14  7986		       99		      .byte.b	$90+(.LUM1/256)
     15  7987		       bb		      .byte.b	$B0+(.LUM2/256)
     16  7988		       2b		      .byte.b	$20+(.LUM3/256)
     17  7988				   .LUM1      SET	.LUM1 + .STEP1
     18  7988				   .LUM2      SET	.LUM2 + .STEP2
     19  7988				   .LUM3      SET	.LUM3 + .STEP3
     13  7988					      REPEND
     14  7989		       99		      .byte.b	$90+(.LUM1/256)
     15  798a		       bb		      .byte.b	$B0+(.LUM2/256)
     16  798b		       2b		      .byte.b	$20+(.LUM3/256)
     17  798b				   .LUM1      SET	.LUM1 + .STEP1
     18  798b				   .LUM2      SET	.LUM2 + .STEP2
     19  798b				   .LUM3      SET	.LUM3 + .STEP3
     13  798b					      REPEND
     14  798c		       9a		      .byte.b	$90+(.LUM1/256)
     15  798d		       bb		      .byte.b	$B0+(.LUM2/256)
     16  798e		       2c		      .byte.b	$20+(.LUM3/256)
     17  798e				   .LUM1      SET	.LUM1 + .STEP1
     18  798e				   .LUM2      SET	.LUM2 + .STEP2
     19  798e				   .LUM3      SET	.LUM3 + .STEP3
     13  798e					      REPEND
     14  798f		       9a		      .byte.b	$90+(.LUM1/256)
     15  7990		       bc		      .byte.b	$B0+(.LUM2/256)
     16  7991		       2c		      .byte.b	$20+(.LUM3/256)
     17  7991				   .LUM1      SET	.LUM1 + .STEP1
     18  7991				   .LUM2      SET	.LUM2 + .STEP2
     19  7991				   .LUM3      SET	.LUM3 + .STEP3
     13  7991					      REPEND
     14  7992		       9a		      .byte.b	$90+(.LUM1/256)
     15  7993		       bc		      .byte.b	$B0+(.LUM2/256)
     16  7994		       2c		      .byte.b	$20+(.LUM3/256)
     17  7994				   .LUM1      SET	.LUM1 + .STEP1
     18  7994				   .LUM2      SET	.LUM2 + .STEP2
     19  7994				   .LUM3      SET	.LUM3 + .STEP3
     13  7994					      REPEND
     14  7995		       9a		      .byte.b	$90+(.LUM1/256)
     15  7996		       bc		      .byte.b	$B0+(.LUM2/256)
     16  7997		       2c		      .byte.b	$20+(.LUM3/256)
     17  7997				   .LUM1      SET	.LUM1 + .STEP1
     18  7997				   .LUM2      SET	.LUM2 + .STEP2
     19  7997				   .LUM3      SET	.LUM3 + .STEP3
     13  7997					      REPEND
     14  7998		       9a		      .byte.b	$90+(.LUM1/256)
     15  7999		       bc		      .byte.b	$B0+(.LUM2/256)
     16  799a		       2c		      .byte.b	$20+(.LUM3/256)
     17  799a				   .LUM1      SET	.LUM1 + .STEP1
     18  799a				   .LUM2      SET	.LUM2 + .STEP2
     19  799a				   .LUM3      SET	.LUM3 + .STEP3
     13  799a					      REPEND
     14  799b		       9b		      .byte.b	$90+(.LUM1/256)
     15  799c		       bc		      .byte.b	$B0+(.LUM2/256)
     16  799d		       2d		      .byte.b	$20+(.LUM3/256)
     17  799d				   .LUM1      SET	.LUM1 + .STEP1
     18  799d				   .LUM2      SET	.LUM2 + .STEP2
     19  799d				   .LUM3      SET	.LUM3 + .STEP3
     13  799d					      REPEND
     14  799e		       9b		      .byte.b	$90+(.LUM1/256)
     15  799f		       bd		      .byte.b	$B0+(.LUM2/256)
     16  79a0		       2d		      .byte.b	$20+(.LUM3/256)
     17  79a0				   .LUM1      SET	.LUM1 + .STEP1
     18  79a0				   .LUM2      SET	.LUM2 + .STEP2
     19  79a0				   .LUM3      SET	.LUM3 + .STEP3
     13  79a0					      REPEND
     14  79a1		       9b		      .byte.b	$90+(.LUM1/256)
     15  79a2		       bd		      .byte.b	$B0+(.LUM2/256)
     16  79a3		       2d		      .byte.b	$20+(.LUM3/256)
     17  79a3				   .LUM1      SET	.LUM1 + .STEP1
     18  79a3				   .LUM2      SET	.LUM2 + .STEP2
     19  79a3				   .LUM3      SET	.LUM3 + .STEP3
     13  79a3					      REPEND
     14  79a4		       9b		      .byte.b	$90+(.LUM1/256)
     15  79a5		       bd		      .byte.b	$B0+(.LUM2/256)
     16  79a6		       2d		      .byte.b	$20+(.LUM3/256)
     17  79a6				   .LUM1      SET	.LUM1 + .STEP1
     18  79a6				   .LUM2      SET	.LUM2 + .STEP2
     19  79a6				   .LUM3      SET	.LUM3 + .STEP3
     13  79a6					      REPEND
     14  79a7		       9b		      .byte.b	$90+(.LUM1/256)
     15  79a8		       bd		      .byte.b	$B0+(.LUM2/256)
     16  79a9		       2d		      .byte.b	$20+(.LUM3/256)
     17  79a9				   .LUM1      SET	.LUM1 + .STEP1
     18  79a9				   .LUM2      SET	.LUM2 + .STEP2
     19  79a9				   .LUM3      SET	.LUM3 + .STEP3
     20  79aa					      REPEND
    186  79aa
------- FILE titleData.asm LEVEL 3 PASS 3
      0  79aa					      include	"titleData.asm"
      1  79aa				   COL_0
      2  79aa		       00		      .byte.b	0	;R (79)
      3  79ab		       00		      .byte.b	0	;G
      4  79ac		       00		      .byte.b	0	;B
      5  79ad		       c0		      .byte.b	192	;R (78)
      6  79ae		       c0		      .byte.b	192	;G
      7  79af		       c0		      .byte.b	192	;B
      8  79b0		       e0		      .byte.b	224	;R (77)
      9  79b1		       e0		      .byte.b	224	;G
     10  79b2		       e0		      .byte.b	224	;B
     11  79b3		       20		      .byte.b	32	;R (76)
     12  79b4		       e0		      .byte.b	224	;G
     13  79b5		       e0		      .byte.b	224	;B
     14  79b6		       30		      .byte.b	48	;R (75)
     15  79b7		       30		      .byte.b	48	;G
     16  79b8		       30		      .byte.b	48	;B
     17  79b9		       f0		      .byte.b	240	;R (74)
     18  79ba		       10		      .byte.b	16	;G
     19  79bb		       d0		      .byte.b	208	;B
     20  79bc		       f0		      .byte.b	240	;R (73)
     21  79bd		       10		      .byte.b	16	;G
     22  79be		       d0		      .byte.b	208	;B
     23  79bf		       f0		      .byte.b	240	;R (72)
     24  79c0		       10		      .byte.b	16	;G
     25  79c1		       d0		      .byte.b	208	;B
     26  79c2		       f0		      .byte.b	240	;R (71)
     27  79c3		       10		      .byte.b	16	;G
     28  79c4		       d0		      .byte.b	208	;B
     29  79c5		       f0		      .byte.b	240	;R (70)
     30  79c6		       10		      .byte.b	16	;G
     31  79c7		       d0		      .byte.b	208	;B
     32  79c8		       f0		      .byte.b	240	;R (69)
     33  79c9		       10		      .byte.b	16	;G
     34  79ca		       10		      .byte.b	16	;B
     35  79cb		       f0		      .byte.b	240	;R (68)
     36  79cc		       10		      .byte.b	16	;G
     37  79cd		       10		      .byte.b	16	;B
     38  79ce		       f0		      .byte.b	240	;R (67)
     39  79cf		       10		      .byte.b	16	;G
     40  79d0		       10		      .byte.b	16	;B
     41  79d1		       f0		      .byte.b	240	;R (66)
     42  79d2		       10		      .byte.b	16	;G
     43  79d3		       10		      .byte.b	16	;B
     44  79d4		       f0		      .byte.b	240	;R (65)
     45  79d5		       10		      .byte.b	16	;G
     46  79d6		       10		      .byte.b	16	;B
     47  79d7		       f0		      .byte.b	240	;R (64)
     48  79d8		       10		      .byte.b	16	;G
     49  79d9		       10		      .byte.b	16	;B
     50  79da		       f0		      .byte.b	240	;R (63)
     51  79db		       10		      .byte.b	16	;G
     52  79dc		       10		      .byte.b	16	;B
     53  79dd		       f0		      .byte.b	240	;R (62)
     54  79de		       10		      .byte.b	16	;G
     55  79df		       10		      .byte.b	16	;B
     56  79e0		       90		      .byte.b	144	;R (61)
     57  79e1		       70		      .byte.b	112	;G
     58  79e2		       10		      .byte.b	16	;B
     59  79e3		       10		      .byte.b	16	;R (60)
     60  79e4		       f0		      .byte.b	240	;G
     61  79e5		       10		      .byte.b	16	;B
     62  79e6		       90		      .byte.b	144	;R (59)
     63  79e7		       70		      .byte.b	112	;G
     64  79e8		       90		      .byte.b	144	;B
     65  79e9		       90		      .byte.b	144	;R (58)
     66  79ea		       70		      .byte.b	112	;G
     67  79eb		       90		      .byte.b	144	;B
     68  79ec		       d0		      .byte.b	208	;R (57)
     69  79ed		       30		      .byte.b	48	;G
     70  79ee		       d0		      .byte.b	208	;B
     71  79ef		       d0		      .byte.b	208	;R (56)
     72  79f0		       30		      .byte.b	48	;G
     73  79f1		       d0		      .byte.b	208	;B
     74  79f2		       50		      .byte.b	80	;R (55)
     75  79f3		       30		      .byte.b	48	;G
     76  79f4		       50		      .byte.b	80	;B
     77  79f5		       50		      .byte.b	80	;R (54)
     78  79f6		       30		      .byte.b	48	;G
     79  79f7		       50		      .byte.b	80	;B
     80  79f8		       50		      .byte.b	80	;R (53)
     81  79f9		       30		      .byte.b	48	;G
     82  79fa		       50		      .byte.b	80	;B
     83  79fb		       50		      .byte.b	80	;R (52)
     84  79fc		       30		      .byte.b	48	;G
     85  79fd		       50		      .byte.b	80	;B
     86  79fe		       d0		      .byte.b	208	;R (51)
     87  79ff		       30		      .byte.b	48	;G
     88  7a00		       d0		      .byte.b	208	;B
     89  7a01		       d0		      .byte.b	208	;R (50)
     90  7a02		       30		      .byte.b	48	;G
     91  7a03		       d0		      .byte.b	208	;B
     92  7a04		       d0		      .byte.b	208	;R (49)
     93  7a05		       30		      .byte.b	48	;G
     94  7a06		       d0		      .byte.b	208	;B
     95  7a07		       d0		      .byte.b	208	;R (48)
     96  7a08		       30		      .byte.b	48	;G
     97  7a09		       d0		      .byte.b	208	;B
     98  7a0a		       90		      .byte.b	144	;R (47)
     99  7a0b		       70		      .byte.b	112	;G
    100  7a0c		       90		      .byte.b	144	;B
    101  7a0d		       90		      .byte.b	144	;R (46)
    102  7a0e		       70		      .byte.b	112	;G
    103  7a0f		       90		      .byte.b	144	;B
    104  7a10		       10		      .byte.b	16	;R (45)
    105  7a11		       f0		      .byte.b	240	;G
    106  7a12		       10		      .byte.b	16	;B
    107  7a13		       10		      .byte.b	16	;R (44)
    108  7a14		       f0		      .byte.b	240	;G
    109  7a15		       10		      .byte.b	16	;B
    110  7a16		       10		      .byte.b	16	;R (43)
    111  7a17		       f0		      .byte.b	240	;G
    112  7a18		       10		      .byte.b	16	;B
    113  7a19		       20		      .byte.b	32	;R (42)
    114  7a1a		       e0		      .byte.b	224	;G
    115  7a1b		       20		      .byte.b	32	;B
    116  7a1c		       20		      .byte.b	32	;R (41)
    117  7a1d		       e0		      .byte.b	224	;G
    118  7a1e		       20		      .byte.b	32	;B
    119  7a1f		       e0		      .byte.b	224	;R (40)
    120  7a20		       e0		      .byte.b	224	;G
    121  7a21		       e0		      .byte.b	224	;B
    122  7a22		       c0		      .byte.b	192	;R (39)
    123  7a23		       c0		      .byte.b	192	;G
    124  7a24		       c0		      .byte.b	192	;B
    125  7a25		       e0		      .byte.b	224	;R (38)
    126  7a26		       e0		      .byte.b	224	;G
    127  7a27		       e0		      .byte.b	224	;B
    128  7a28		       20		      .byte.b	32	;R (37)
    129  7a29		       e0		      .byte.b	224	;G
    130  7a2a		       e0		      .byte.b	224	;B
    131  7a2b		       30		      .byte.b	48	;R (36)
    132  7a2c		       30		      .byte.b	48	;G
    133  7a2d		       30		      .byte.b	48	;B
    134  7a2e		       f0		      .byte.b	240	;R (35)
    135  7a2f		       10		      .byte.b	16	;G
    136  7a30		       d0		      .byte.b	208	;B
    137  7a31		       f0		      .byte.b	240	;R (34)
    138  7a32		       10		      .byte.b	16	;G
    139  7a33		       d0		      .byte.b	208	;B
    140  7a34		       f0		      .byte.b	240	;R (33)
    141  7a35		       10		      .byte.b	16	;G
    142  7a36		       d0		      .byte.b	208	;B
    143  7a37		       f0		      .byte.b	240	;R (32)
    144  7a38		       10		      .byte.b	16	;G
    145  7a39		       d0		      .byte.b	208	;B
    146  7a3a		       f0		      .byte.b	240	;R (31)
    147  7a3b		       10		      .byte.b	16	;G
    148  7a3c		       d0		      .byte.b	208	;B
    149  7a3d		       f0		      .byte.b	240	;R (30)
    150  7a3e		       10		      .byte.b	16	;G
    151  7a3f		       10		      .byte.b	16	;B
    152  7a40		       f0		      .byte.b	240	;R (29)
    153  7a41		       10		      .byte.b	16	;G
    154  7a42		       10		      .byte.b	16	;B
    155  7a43		       f0		      .byte.b	240	;R (28)
    156  7a44		       10		      .byte.b	16	;G
    157  7a45		       10		      .byte.b	16	;B
    158  7a46		       f0		      .byte.b	240	;R (27)
    159  7a47		       10		      .byte.b	16	;G
    160  7a48		       10		      .byte.b	16	;B
    161  7a49		       f0		      .byte.b	240	;R (26)
    162  7a4a		       10		      .byte.b	16	;G
    163  7a4b		       10		      .byte.b	16	;B
    164  7a4c		       f0		      .byte.b	240	;R (25)
    165  7a4d		       10		      .byte.b	16	;G
    166  7a4e		       10		      .byte.b	16	;B
    167  7a4f		       f0		      .byte.b	240	;R (24)
    168  7a50		       10		      .byte.b	16	;G
    169  7a51		       10		      .byte.b	16	;B
    170  7a52		       f0		      .byte.b	240	;R (23)
    171  7a53		       10		      .byte.b	16	;G
    172  7a54		       10		      .byte.b	16	;B
    173  7a55		       90		      .byte.b	144	;R (22)
    174  7a56		       70		      .byte.b	112	;G
    175  7a57		       10		      .byte.b	16	;B
    176  7a58		       10		      .byte.b	16	;R (21)
    177  7a59		       f0		      .byte.b	240	;G
    178  7a5a		       10		      .byte.b	16	;B
    179  7a5b		       90		      .byte.b	144	;R (20)
    180  7a5c		       70		      .byte.b	112	;G
    181  7a5d		       90		      .byte.b	144	;B
    182  7a5e		       90		      .byte.b	144	;R (19)
    183  7a5f		       70		      .byte.b	112	;G
    184  7a60		       90		      .byte.b	144	;B
    185  7a61		       d0		      .byte.b	208	;R (18)
    186  7a62		       30		      .byte.b	48	;G
    187  7a63		       d0		      .byte.b	208	;B
    188  7a64		       d0		      .byte.b	208	;R (17)
    189  7a65		       30		      .byte.b	48	;G
    190  7a66		       d0		      .byte.b	208	;B
    191  7a67		       50		      .byte.b	80	;R (16)
    192  7a68		       30		      .byte.b	48	;G
    193  7a69		       50		      .byte.b	80	;B
    194  7a6a		       50		      .byte.b	80	;R (15)
    195  7a6b		       30		      .byte.b	48	;G
    196  7a6c		       50		      .byte.b	80	;B
    197  7a6d		       50		      .byte.b	80	;R (14)
    198  7a6e		       30		      .byte.b	48	;G
    199  7a6f		       50		      .byte.b	80	;B
    200  7a70		       50		      .byte.b	80	;R (13)
    201  7a71		       30		      .byte.b	48	;G
    202  7a72		       50		      .byte.b	80	;B
    203  7a73		       d0		      .byte.b	208	;R (12)
    204  7a74		       30		      .byte.b	48	;G
    205  7a75		       d0		      .byte.b	208	;B
    206  7a76		       d0		      .byte.b	208	;R (11)
    207  7a77		       30		      .byte.b	48	;G
    208  7a78		       d0		      .byte.b	208	;B
    209  7a79		       d0		      .byte.b	208	;R (10)
    210  7a7a		       30		      .byte.b	48	;G
    211  7a7b		       d0		      .byte.b	208	;B
    212  7a7c		       d0		      .byte.b	208	;R (9)
    213  7a7d		       30		      .byte.b	48	;G
    214  7a7e		       d0		      .byte.b	208	;B
    215  7a7f		       90		      .byte.b	144	;R (8)
    216  7a80		       70		      .byte.b	112	;G
    217  7a81		       90		      .byte.b	144	;B
    218  7a82		       90		      .byte.b	144	;R (7)
    219  7a83		       70		      .byte.b	112	;G
    220  7a84		       90		      .byte.b	144	;B
    221  7a85		       10		      .byte.b	16	;R (6)
    222  7a86		       f0		      .byte.b	240	;G
    223  7a87		       10		      .byte.b	16	;B
    224  7a88		       10		      .byte.b	16	;R (5)
    225  7a89		       f0		      .byte.b	240	;G
    226  7a8a		       10		      .byte.b	16	;B
    227  7a8b		       10		      .byte.b	16	;R (4)
    228  7a8c		       f0		      .byte.b	240	;G
    229  7a8d		       10		      .byte.b	16	;B
    230  7a8e		       20		      .byte.b	32	;R (3)
    231  7a8f		       e0		      .byte.b	224	;G
    232  7a90		       20		      .byte.b	32	;B
    233  7a91		       20		      .byte.b	32	;R (2)
    234  7a92		       e0		      .byte.b	224	;G
    235  7a93		       20		      .byte.b	32	;B
    236  7a94		       e0		      .byte.b	224	;R (1)
    237  7a95		       e0		      .byte.b	224	;G
    238  7a96		       e0		      .byte.b	224	;B
    239  7a97		       c0		      .byte.b	192	;R (0)
    240  7a98		       c0		      .byte.b	192	;G
    241  7a99		       c0		      .byte.b	192	;B
    242  7a9a				   COL_1
    243  7a9a		       00		      .byte.b	0	;R (79)
    244  7a9b		       00		      .byte.b	0	;G
    245  7a9c		       00		      .byte.b	0	;B
    246  7a9d		       ff		      .byte.b	255	;R (78)
    247  7a9e		       ff		      .byte.b	255	;G
    248  7a9f		       ff		      .byte.b	255	;B
    249  7aa0		       ff		      .byte.b	255	;R (77)
    250  7aa1		       ff		      .byte.b	255	;G
    251  7aa2		       ff		      .byte.b	255	;B
    252  7aa3		       00		      .byte.b	0	;R (76)
    253  7aa4		       ff		      .byte.b	255	;G
    254  7aa5		       ff		      .byte.b	255	;B
    255  7aa6		       00		      .byte.b	0	;R (75)
    256  7aa7		       f3		      .byte.b	243	;G
    257  7aa8		       f3		      .byte.b	243	;B
    258  7aa9		       0c		      .byte.b	12	;R (74)
    259  7aaa		       7d		      .byte.b	125	;G
    260  7aab		       71		      .byte.b	113	;B
    261  7aac		       0c		      .byte.b	12	;R (73)
    262  7aad		       7d		      .byte.b	125	;G
    263  7aae		       71		      .byte.b	113	;B
    264  7aaf		       9c		      .byte.b	156	;R (72)
    265  7ab0		       3d		      .byte.b	61	;G
    266  7ab1		       a1		      .byte.b	161	;B
    267  7ab2		       9c		      .byte.b	156	;R (71)
    268  7ab3		       3d		      .byte.b	61	;G
    269  7ab4		       a1		      .byte.b	161	;B
    270  7ab5		       9e		      .byte.b	158	;R (70)
    271  7ab6		       3e		      .byte.b	62	;G
    272  7ab7		       a0		      .byte.b	160	;B
    273  7ab8		       de		      .byte.b	222	;R (69)
    274  7ab9		       1e		      .byte.b	30	;G
    275  7aba		       c0		      .byte.b	192	;B
    276  7abb		       d2		      .byte.b	210	;R (68)
    277  7abc		       12		      .byte.b	18	;G
    278  7abd		       c0		      .byte.b	192	;B
    279  7abe		       d6		      .byte.b	214	;R (67)
    280  7abf		       12		      .byte.b	18	;G
    281  7ac0		       c0		      .byte.b	192	;B
    282  7ac1		       d6		      .byte.b	214	;R (66)
    283  7ac2		       12		      .byte.b	18	;G
    284  7ac3		       c0		      .byte.b	192	;B
    285  7ac4		       d6		      .byte.b	214	;R (65)
    286  7ac5		       12		      .byte.b	18	;G
    287  7ac6		       c0		      .byte.b	192	;B
    288  7ac7		       d6		      .byte.b	214	;R (64)
    289  7ac8		       12		      .byte.b	18	;G
    290  7ac9		       c0		      .byte.b	192	;B
    291  7aca		       d6		      .byte.b	214	;R (63)
    292  7acb		       12		      .byte.b	18	;G
    293  7acc		       c0		      .byte.b	192	;B
    294  7acd		       d6		      .byte.b	214	;R (62)
    295  7ace		       12		      .byte.b	18	;G
    296  7acf		       c0		      .byte.b	192	;B
    297  7ad0		       d6		      .byte.b	214	;R (61)
    298  7ad1		       12		      .byte.b	18	;G
    299  7ad2		       c0		      .byte.b	192	;B
    300  7ad3		       d6		      .byte.b	214	;R (60)
    301  7ad4		       12		      .byte.b	18	;G
    302  7ad5		       c0		      .byte.b	192	;B
    303  7ad6		       d6		      .byte.b	214	;R (59)
    304  7ad7		       12		      .byte.b	18	;G
    305  7ad8		       c0		      .byte.b	192	;B
    306  7ad9		       d6		      .byte.b	214	;R (58)
    307  7ada		       12		      .byte.b	18	;G
    308  7adb		       c0		      .byte.b	192	;B
    309  7adc		       96		      .byte.b	150	;R (57)
    310  7add		       32		      .byte.b	50	;G
    311  7ade		       80		      .byte.b	128	;B
    312  7adf		       12		      .byte.b	18	;R (56)
    313  7ae0		       76		      .byte.b	118	;G
    314  7ae1		       00		      .byte.b	0	;B
    315  7ae2		       12		      .byte.b	18	;R (55)
    316  7ae3		       f6		      .byte.b	246	;G
    317  7ae4		       00		      .byte.b	0	;B
    318  7ae5		       12		      .byte.b	18	;R (54)
    319  7ae6		       f6		      .byte.b	246	;G
    320  7ae7		       00		      .byte.b	0	;B
    321  7ae8		       12		      .byte.b	18	;R (53)
    322  7ae9		       f6		      .byte.b	246	;G
    323  7aea		       00		      .byte.b	0	;B
    324  7aeb		       12		      .byte.b	18	;R (52)
    325  7aec		       f6		      .byte.b	246	;G
    326  7aed		       00		      .byte.b	0	;B
    327  7aee		       12		      .byte.b	18	;R (51)
    328  7aef		       76		      .byte.b	118	;G
    329  7af0		       00		      .byte.b	0	;B
    330  7af1		       12		      .byte.b	18	;R (50)
    331  7af2		       76		      .byte.b	118	;G
    332  7af3		       00		      .byte.b	0	;B
    333  7af4		       12		      .byte.b	18	;R (49)
    334  7af5		       76		      .byte.b	118	;G
    335  7af6		       00		      .byte.b	0	;B
    336  7af7		       9a		      .byte.b	154	;R (48)
    337  7af8		       3a		      .byte.b	58	;G
    338  7af9		       80		      .byte.b	128	;B
    339  7afa		       da		      .byte.b	218	;R (47)
    340  7afb		       1a		      .byte.b	26	;G
    341  7afc		       c0		      .byte.b	192	;B
    342  7afd		       fe		      .byte.b	254	;R (46)
    343  7afe		       1e		      .byte.b	30	;G
    344  7aff		       e0		      .byte.b	224	;B
    345  7b00		       ee		      .byte.b	238	;R (45)
    346  7b01		       0e		      .byte.b	14	;G
    347  7b02		       e0		      .byte.b	224	;B
    348  7b03		       6e		      .byte.b	110	;R (44)
    349  7b04		       8e		      .byte.b	142	;G
    350  7b05		       60		      .byte.b	96	;B
    351  7b06		       24		      .byte.b	36	;R (43)
    352  7b07		       cd		      .byte.b	205	;G
    353  7b08		       20		      .byte.b	32	;B
    354  7b09		       00		      .byte.b	0	;R (42)
    355  7b0a		       ff		      .byte.b	255	;G
    356  7b0b		       00		      .byte.b	0	;B
    357  7b0c		       00		      .byte.b	0	;R (41)
    358  7b0d		       ff		      .byte.b	255	;G
    359  7b0e		       00		      .byte.b	0	;B
    360  7b0f		       ff		      .byte.b	255	;R (40)
    361  7b10		       ff		      .byte.b	255	;G
    362  7b11		       ff		      .byte.b	255	;B
    363  7b12		       ff		      .byte.b	255	;R (39)
    364  7b13		       ff		      .byte.b	255	;G
    365  7b14		       ff		      .byte.b	255	;B
    366  7b15		       ff		      .byte.b	255	;R (38)
    367  7b16		       ff		      .byte.b	255	;G
    368  7b17		       ff		      .byte.b	255	;B
    369  7b18		       00		      .byte.b	0	;R (37)
    370  7b19		       ff		      .byte.b	255	;G
    371  7b1a		       ff		      .byte.b	255	;B
    372  7b1b		       00		      .byte.b	0	;R (36)
    373  7b1c		       ff		      .byte.b	255	;G
    374  7b1d		       ff		      .byte.b	255	;B
    375  7b1e		       00		      .byte.b	0	;R (35)
    376  7b1f		       7f		      .byte.b	127	;G
    377  7b20		       7f		      .byte.b	127	;B
    378  7b21		       00		      .byte.b	0	;R (34)
    379  7b22		       7f		      .byte.b	127	;G
    380  7b23		       7f		      .byte.b	127	;B
    381  7b24		       9f		      .byte.b	159	;R (33)
    382  7b25		       3f		      .byte.b	63	;G
    383  7b26		       a0		      .byte.b	160	;B
    384  7b27		       9f		      .byte.b	159	;R (32)
    385  7b28		       3f		      .byte.b	63	;G
    386  7b29		       a0		      .byte.b	160	;B
    387  7b2a		       9f		      .byte.b	159	;R (31)
    388  7b2b		       3f		      .byte.b	63	;G
    389  7b2c		       a0		      .byte.b	160	;B
    390  7b2d		       df		      .byte.b	223	;R (30)
    391  7b2e		       1f		      .byte.b	31	;G
    392  7b2f		       c0		      .byte.b	192	;B
    393  7b30		       df		      .byte.b	223	;R (29)
    394  7b31		       1f		      .byte.b	31	;G
    395  7b32		       c0		      .byte.b	192	;B
    396  7b33		       df		      .byte.b	223	;R (28)
    397  7b34		       1f		      .byte.b	31	;G
    398  7b35		       c0		      .byte.b	192	;B
    399  7b36		       df		      .byte.b	223	;R (27)
    400  7b37		       1f		      .byte.b	31	;G
    401  7b38		       c0		      .byte.b	192	;B
    402  7b39		       df		      .byte.b	223	;R (26)
    403  7b3a		       1f		      .byte.b	31	;G
    404  7b3b		       c0		      .byte.b	192	;B
    405  7b3c		       df		      .byte.b	223	;R (25)
    406  7b3d		       1f		      .byte.b	31	;G
    407  7b3e		       c0		      .byte.b	192	;B
    408  7b3f		       df		      .byte.b	223	;R (24)
    409  7b40		       1f		      .byte.b	31	;G
    410  7b41		       c0		      .byte.b	192	;B
    411  7b42		       df		      .byte.b	223	;R (23)
    412  7b43		       1f		      .byte.b	31	;G
    413  7b44		       c0		      .byte.b	192	;B
    414  7b45		       df		      .byte.b	223	;R (22)
    415  7b46		       1f		      .byte.b	31	;G
    416  7b47		       c0		      .byte.b	192	;B
    417  7b48		       df		      .byte.b	223	;R (21)
    418  7b49		       1f		      .byte.b	31	;G
    419  7b4a		       c0		      .byte.b	192	;B
    420  7b4b		       df		      .byte.b	223	;R (20)
    421  7b4c		       1f		      .byte.b	31	;G
    422  7b4d		       c0		      .byte.b	192	;B
    423  7b4e		       df		      .byte.b	223	;R (19)
    424  7b4f		       1f		      .byte.b	31	;G
    425  7b50		       c0		      .byte.b	192	;B
    426  7b51		       9f		      .byte.b	159	;R (18)
    427  7b52		       3f		      .byte.b	63	;G
    428  7b53		       80		      .byte.b	128	;B
    429  7b54		       1f		      .byte.b	31	;R (17)
    430  7b55		       7f		      .byte.b	127	;G
    431  7b56		       00		      .byte.b	0	;B
    432  7b57		       1f		      .byte.b	31	;R (16)
    433  7b58		       ff		      .byte.b	255	;G
    434  7b59		       00		      .byte.b	0	;B
    435  7b5a		       1f		      .byte.b	31	;R (15)
    436  7b5b		       ff		      .byte.b	255	;G
    437  7b5c		       00		      .byte.b	0	;B
    438  7b5d		       1f		      .byte.b	31	;R (14)
    439  7b5e		       ff		      .byte.b	255	;G
    440  7b5f		       00		      .byte.b	0	;B
    441  7b60		       1f		      .byte.b	31	;R (13)
    442  7b61		       ff		      .byte.b	255	;G
    443  7b62		       00		      .byte.b	0	;B
    444  7b63		       1f		      .byte.b	31	;R (12)
    445  7b64		       7f		      .byte.b	127	;G
    446  7b65		       00		      .byte.b	0	;B
    447  7b66		       1f		      .byte.b	31	;R (11)
    448  7b67		       7f		      .byte.b	127	;G
    449  7b68		       00		      .byte.b	0	;B
    450  7b69		       1f		      .byte.b	31	;R (10)
    451  7b6a		       7f		      .byte.b	127	;G
    452  7b6b		       00		      .byte.b	0	;B
    453  7b6c		       9f		      .byte.b	159	;R (9)
    454  7b6d		       3f		      .byte.b	63	;G
    455  7b6e		       80		      .byte.b	128	;B
    456  7b6f		       df		      .byte.b	223	;R (8)
    457  7b70		       1f		      .byte.b	31	;G
    458  7b71		       c0		      .byte.b	192	;B
    459  7b72		       ff		      .byte.b	255	;R (7)
    460  7b73		       1f		      .byte.b	31	;G
    461  7b74		       e0		      .byte.b	224	;B
    462  7b75		       e0		      .byte.b	224	;R (6)
    463  7b76		       00		      .byte.b	0	;G
    464  7b77		       e0		      .byte.b	224	;B
    465  7b78		       60		      .byte.b	96	;R (5)
    466  7b79		       80		      .byte.b	128	;G
    467  7b7a		       60		      .byte.b	96	;B
    468  7b7b		       20		      .byte.b	32	;R (4)
    469  7b7c		       c0		      .byte.b	192	;G
    470  7b7d		       20		      .byte.b	32	;B
    471  7b7e		       00		      .byte.b	0	;R (3)
    472  7b7f		       ff		      .byte.b	255	;G
    473  7b80		       00		      .byte.b	0	;B
    474  7b81		       00		      .byte.b	0	;R (2)
    475  7b82		       ff		      .byte.b	255	;G
    476  7b83		       00		      .byte.b	0	;B
    477  7b84		       ff		      .byte.b	255	;R (1)
    478  7b85		       ff		      .byte.b	255	;G
    479  7b86		       ff		      .byte.b	255	;B
    480  7b87		       ff		      .byte.b	255	;R (0)
    481  7b88		       ff		      .byte.b	255	;G
    482  7b89		       ff		      .byte.b	255	;B
    483  7b8a				   COL_2
    484  7b8a		       00		      .byte.b	0	;R (79)
    485  7b8b		       00		      .byte.b	0	;G
    486  7b8c		       00		      .byte.b	0	;B
    487  7b8d		       ff		      .byte.b	255	;R (78)
    488  7b8e		       ff		      .byte.b	255	;G
    489  7b8f		       ff		      .byte.b	255	;B
    490  7b90		       ff		      .byte.b	255	;R (77)
    491  7b91		       ff		      .byte.b	255	;G
    492  7b92		       ff		      .byte.b	255	;B
    493  7b93		       00		      .byte.b	0	;R (76)
    494  7b94		       ff		      .byte.b	255	;G
    495  7b95		       ff		      .byte.b	255	;B
    496  7b96		       00		      .byte.b	0	;R (75)
    497  7b97		       26		      .byte.b	38	;G
    498  7b98		       26		      .byte.b	38	;B
    499  7b99		       c0		      .byte.b	192	;R (74)
    500  7b9a		       04		      .byte.b	4	;G
    501  7b9b		       dd		      .byte.b	221	;B
    502  7b9c		       c0		      .byte.b	192	;R (73)
    503  7b9d		       04		      .byte.b	4	;G
    504  7b9e		       dd		      .byte.b	221	;B
    505  7b9f		       e0		      .byte.b	224	;R (72)
    506  7ba0		       04		      .byte.b	4	;G
    507  7ba1		       ed		      .byte.b	237	;B
    508  7ba2		       e0		      .byte.b	224	;R (71)
    509  7ba3		       04		      .byte.b	4	;G
    510  7ba4		       ed		      .byte.b	237	;B
    511  7ba5		       e0		      .byte.b	224	;R (70)
    512  7ba6		       04		      .byte.b	4	;G
    513  7ba7		       ed		      .byte.b	237	;B
    514  7ba8		       e0		      .byte.b	224	;R (69)
    515  7ba9		       00		      .byte.b	0	;G
    516  7baa		       ed		      .byte.b	237	;B
    517  7bab		       20		      .byte.b	32	;R (68)
    518  7bac		       80		      .byte.b	128	;G
    519  7bad		       af		      .byte.b	175	;B
    520  7bae		       20		      .byte.b	32	;R (67)
    521  7baf		       80		      .byte.b	128	;G
    522  7bb0		       af		      .byte.b	175	;B
    523  7bb1		       20		      .byte.b	32	;R (66)
    524  7bb2		       80		      .byte.b	128	;G
    525  7bb3		       af		      .byte.b	175	;B
    526  7bb4		       20		      .byte.b	32	;R (65)
    527  7bb5		       90		      .byte.b	144	;G
    528  7bb6		       b7		      .byte.b	183	;B
    529  7bb7		       20		      .byte.b	32	;R (64)
    530  7bb8		       90		      .byte.b	144	;G
    531  7bb9		       b7		      .byte.b	183	;B
    532  7bba		       20		      .byte.b	32	;R (63)
    533  7bbb		       90		      .byte.b	144	;G
    534  7bbc		       b7		      .byte.b	183	;B
    535  7bbd		       38		      .byte.b	56	;R (62)
    536  7bbe		       80		      .byte.b	128	;G
    537  7bbf		       a3		      .byte.b	163	;B
    538  7bc0		       38		      .byte.b	56	;R (61)
    539  7bc1		       80		      .byte.b	128	;G
    540  7bc2		       a3		      .byte.b	163	;B
    541  7bc3		       b0		      .byte.b	176	;R (60)
    542  7bc4		       00		      .byte.b	0	;G
    543  7bc5		       27		      .byte.b	39	;B
    544  7bc6		       b0		      .byte.b	176	;R (59)
    545  7bc7		       00		      .byte.b	0	;G
    546  7bc8		       27		      .byte.b	39	;B
    547  7bc9		       b0		      .byte.b	176	;R (58)
    548  7bca		       00		      .byte.b	0	;G
    549  7bcb		       27		      .byte.b	39	;B
    550  7bcc		       b0		      .byte.b	176	;R (57)
    551  7bcd		       00		      .byte.b	0	;G
    552  7bce		       27		      .byte.b	39	;B
    553  7bcf		       a0		      .byte.b	160	;R (56)
    554  7bd0		       00		      .byte.b	0	;G
    555  7bd1		       2f		      .byte.b	47	;B
    556  7bd2		       a0		      .byte.b	160	;R (55)
    557  7bd3		       00		      .byte.b	0	;G
    558  7bd4		       2f		      .byte.b	47	;B
    559  7bd5		       a0		      .byte.b	160	;R (54)
    560  7bd6		       00		      .byte.b	0	;G
    561  7bd7		       2d		      .byte.b	45	;B
    562  7bd8		       a0		      .byte.b	160	;R (53)
    563  7bd9		       00		      .byte.b	0	;G
    564  7bda		       2d		      .byte.b	45	;B
    565  7bdb		       a0		      .byte.b	160	;R (52)
    566  7bdc		       00		      .byte.b	0	;G
    567  7bdd		       2d		      .byte.b	45	;B
    568  7bde		       a0		      .byte.b	160	;R (51)
    569  7bdf		       04		      .byte.b	4	;G
    570  7be0		       29		      .byte.b	41	;B
    571  7be1		       a0		      .byte.b	160	;R (50)
    572  7be2		       04		      .byte.b	4	;G
    573  7be3		       29		      .byte.b	41	;B
    574  7be4		       a0		      .byte.b	160	;R (49)
    575  7be5		       04		      .byte.b	4	;G
    576  7be6		       29		      .byte.b	41	;B
    577  7be7		       60		      .byte.b	96	;R (48)
    578  7be8		       04		      .byte.b	4	;G
    579  7be9		       69		      .byte.b	105	;B
    580  7bea		       60		      .byte.b	96	;R (47)
    581  7beb		       04		      .byte.b	4	;G
    582  7bec		       79		      .byte.b	121	;B
    583  7bed		       e0		      .byte.b	224	;R (46)
    584  7bee		       04		      .byte.b	4	;G
    585  7bef		       f9		      .byte.b	249	;B
    586  7bf0		       c0		      .byte.b	192	;R (45)
    587  7bf1		       04		      .byte.b	4	;G
    588  7bf2		       d9		      .byte.b	217	;B
    589  7bf3		       c0		      .byte.b	192	;R (44)
    590  7bf4		       04		      .byte.b	4	;G
    591  7bf5		       d9		      .byte.b	217	;B
    592  7bf6		       80		      .byte.b	128	;R (43)
    593  7bf7		       44		      .byte.b	68	;G
    594  7bf8		       99		      .byte.b	153	;B
    595  7bf9		       00		      .byte.b	0	;R (42)
    596  7bfa		       ff		      .byte.b	255	;G
    597  7bfb		       00		      .byte.b	0	;B
    598  7bfc		       00		      .byte.b	0	;R (41)
    599  7bfd		       ff		      .byte.b	255	;G
    600  7bfe		       00		      .byte.b	0	;B
    601  7bff		       ff		      .byte.b	255	;R (40)
    602  7c00		       ff		      .byte.b	255	;G
    603  7c01		       ff		      .byte.b	255	;B
    604  7c02		       ff		      .byte.b	255	;R (39)
    605  7c03		       ff		      .byte.b	255	;G
    606  7c04		       ff		      .byte.b	255	;B
    607  7c05		       ff		      .byte.b	255	;R (38)
    608  7c06		       ff		      .byte.b	255	;G
    609  7c07		       ff		      .byte.b	255	;B
    610  7c08		       00		      .byte.b	0	;R (37)
    611  7c09		       ff		      .byte.b	255	;G
    612  7c0a		       ff		      .byte.b	255	;B
    613  7c0b		       00		      .byte.b	0	;R (36)
    614  7c0c		       f9		      .byte.b	249	;G
    615  7c0d		       f9		      .byte.b	249	;B
    616  7c0e		       06		      .byte.b	6	;R (35)
    617  7c0f		       07		      .byte.b	7	;G
    618  7c10		       01		      .byte.b	1	;B
    619  7c11		       06		      .byte.b	6	;R (34)
    620  7c12		       07		      .byte.b	7	;G
    621  7c13		       01		      .byte.b	1	;B
    622  7c14		       07		      .byte.b	7	;R (33)
    623  7c15		       07		      .byte.b	7	;G
    624  7c16		       00		      .byte.b	0	;B
    625  7c17		       07		      .byte.b	7	;R (32)
    626  7c18		       07		      .byte.b	7	;G
    627  7c19		       00		      .byte.b	0	;B
    628  7c1a		       ff		      .byte.b	255	;R (31)
    629  7c1b		       ff		      .byte.b	255	;G
    630  7c1c		       00		      .byte.b	0	;B
    631  7c1d		       ff		      .byte.b	255	;R (30)
    632  7c1e		       ff		      .byte.b	255	;G
    633  7c1f		       00		      .byte.b	0	;B
    634  7c20		       f9		      .byte.b	249	;R (29)
    635  7c21		       f9		      .byte.b	249	;G
    636  7c22		       00		      .byte.b	0	;B
    637  7c23		       fd		      .byte.b	253	;R (28)
    638  7c24		       f9		      .byte.b	249	;G
    639  7c25		       00		      .byte.b	0	;B
    640  7c26		       fd		      .byte.b	253	;R (27)
    641  7c27		       f9		      .byte.b	249	;G
    642  7c28		       00		      .byte.b	0	;B
    643  7c29		       fd		      .byte.b	253	;R (26)
    644  7c2a		       f9		      .byte.b	249	;G
    645  7c2b		       00		      .byte.b	0	;B
    646  7c2c		       fd		      .byte.b	253	;R (25)
    647  7c2d		       f9		      .byte.b	249	;G
    648  7c2e		       00		      .byte.b	0	;B
    649  7c2f		       fd		      .byte.b	253	;R (24)
    650  7c30		       f9		      .byte.b	249	;G
    651  7c31		       00		      .byte.b	0	;B
    652  7c32		       fd		      .byte.b	253	;R (23)
    653  7c33		       f9		      .byte.b	249	;G
    654  7c34		       00		      .byte.b	0	;B
    655  7c35		       fd		      .byte.b	253	;R (22)
    656  7c36		       f9		      .byte.b	249	;G
    657  7c37		       00		      .byte.b	0	;B
    658  7c38		       fd		      .byte.b	253	;R (21)
    659  7c39		       f9		      .byte.b	249	;G
    660  7c3a		       00		      .byte.b	0	;B
    661  7c3b		       fd		      .byte.b	253	;R (20)
    662  7c3c		       f9		      .byte.b	249	;G
    663  7c3d		       00		      .byte.b	0	;B
    664  7c3e		       fd		      .byte.b	253	;R (19)
    665  7c3f		       f9		      .byte.b	249	;G
    666  7c40		       00		      .byte.b	0	;B
    667  7c41		       fd		      .byte.b	253	;R (18)
    668  7c42		       f9		      .byte.b	249	;G
    669  7c43		       00		      .byte.b	0	;B
    670  7c44		       f9		      .byte.b	249	;R (17)
    671  7c45		       fd		      .byte.b	253	;G
    672  7c46		       00		      .byte.b	0	;B
    673  7c47		       f9		      .byte.b	249	;R (16)
    674  7c48		       fd		      .byte.b	253	;G
    675  7c49		       00		      .byte.b	0	;B
    676  7c4a		       f9		      .byte.b	249	;R (15)
    677  7c4b		       fd		      .byte.b	253	;G
    678  7c4c		       00		      .byte.b	0	;B
    679  7c4d		       f9		      .byte.b	249	;R (14)
    680  7c4e		       fd		      .byte.b	253	;G
    681  7c4f		       00		      .byte.b	0	;B
    682  7c50		       f9		      .byte.b	249	;R (13)
    683  7c51		       fd		      .byte.b	253	;G
    684  7c52		       00		      .byte.b	0	;B
    685  7c53		       f9		      .byte.b	249	;R (12)
    686  7c54		       fd		      .byte.b	253	;G
    687  7c55		       00		      .byte.b	0	;B
    688  7c56		       f9		      .byte.b	249	;R (11)
    689  7c57		       fd		      .byte.b	253	;G
    690  7c58		       00		      .byte.b	0	;B
    691  7c59		       f9		      .byte.b	249	;R (10)
    692  7c5a		       fd		      .byte.b	253	;G
    693  7c5b		       00		      .byte.b	0	;B
    694  7c5c		       fb		      .byte.b	251	;R (9)
    695  7c5d		       fb		      .byte.b	251	;G
    696  7c5e		       00		      .byte.b	0	;B
    697  7c5f		       fb		      .byte.b	251	;R (8)
    698  7c60		       fb		      .byte.b	251	;G
    699  7c61		       00		      .byte.b	0	;B
    700  7c62		       ff		      .byte.b	255	;R (7)
    701  7c63		       ff		      .byte.b	255	;G
    702  7c64		       00		      .byte.b	0	;B
    703  7c65		       fe		      .byte.b	254	;R (6)
    704  7c66		       fe		      .byte.b	254	;G
    705  7c67		       00		      .byte.b	0	;B
    706  7c68		       fe		      .byte.b	254	;R (5)
    707  7c69		       fe		      .byte.b	254	;G
    708  7c6a		       00		      .byte.b	0	;B
    709  7c6b		       04		      .byte.b	4	;R (4)
    710  7c6c		       06		      .byte.b	6	;G
    711  7c6d		       00		      .byte.b	0	;B
    712  7c6e		       00		      .byte.b	0	;R (3)
    713  7c6f		       ff		      .byte.b	255	;G
    714  7c70		       00		      .byte.b	0	;B
    715  7c71		       00		      .byte.b	0	;R (2)
    716  7c72		       ff		      .byte.b	255	;G
    717  7c73		       00		      .byte.b	0	;B
    718  7c74		       ff		      .byte.b	255	;R (1)
    719  7c75		       ff		      .byte.b	255	;G
    720  7c76		       ff		      .byte.b	255	;B
    721  7c77		       ff		      .byte.b	255	;R (0)
    722  7c78		       ff		      .byte.b	255	;G
    723  7c79		       ff		      .byte.b	255	;B
    724  7c7a				   COL_3
    725  7c7a		       00		      .byte.b	0	;R (79)
    726  7c7b		       00		      .byte.b	0	;G
    727  7c7c		       00		      .byte.b	0	;B
    728  7c7d		       f0		      .byte.b	240	;R (78)
    729  7c7e		       f0		      .byte.b	240	;G
    730  7c7f		       f0		      .byte.b	240	;B
    731  7c80		       f0		      .byte.b	240	;R (77)
    732  7c81		       f0		      .byte.b	240	;G
    733  7c82		       f0		      .byte.b	240	;B
    734  7c83		       00		      .byte.b	0	;R (76)
    735  7c84		       f0		      .byte.b	240	;G
    736  7c85		       f0		      .byte.b	240	;B
    737  7c86		       00		      .byte.b	0	;R (75)
    738  7c87		       30		      .byte.b	48	;G
    739  7c88		       30		      .byte.b	48	;B
    740  7c89		       00		      .byte.b	0	;R (74)
    741  7c8a		       20		      .byte.b	32	;G
    742  7c8b		       e0		      .byte.b	224	;B
    743  7c8c		       00		      .byte.b	0	;R (73)
    744  7c8d		       20		      .byte.b	32	;G
    745  7c8e		       e0		      .byte.b	224	;B
    746  7c8f		       00		      .byte.b	0	;R (72)
    747  7c90		       20		      .byte.b	32	;G
    748  7c91		       e0		      .byte.b	224	;B
    749  7c92		       00		      .byte.b	0	;R (71)
    750  7c93		       20		      .byte.b	32	;G
    751  7c94		       e0		      .byte.b	224	;B
    752  7c95		       10		      .byte.b	16	;R (70)
    753  7c96		       00		      .byte.b	0	;G
    754  7c97		       d0		      .byte.b	208	;B
    755  7c98		       10		      .byte.b	16	;R (69)
    756  7c99		       00		      .byte.b	0	;G
    757  7c9a		       50		      .byte.b	80	;B
    758  7c9b		       10		      .byte.b	16	;R (68)
    759  7c9c		       00		      .byte.b	0	;G
    760  7c9d		       50		      .byte.b	80	;B
    761  7c9e		       10		      .byte.b	16	;R (67)
    762  7c9f		       00		      .byte.b	0	;G
    763  7ca0		       50		      .byte.b	80	;B
    764  7ca1		       10		      .byte.b	16	;R (66)
    765  7ca2		       00		      .byte.b	0	;G
    766  7ca3		       50		      .byte.b	80	;B
    767  7ca4		       10		      .byte.b	16	;R (65)
    768  7ca5		       00		      .byte.b	0	;G
    769  7ca6		       50		      .byte.b	80	;B
    770  7ca7		       10		      .byte.b	16	;R (64)
    771  7ca8		       00		      .byte.b	0	;G
    772  7ca9		       50		      .byte.b	80	;B
    773  7caa		       10		      .byte.b	16	;R (63)
    774  7cab		       00		      .byte.b	0	;G
    775  7cac		       50		      .byte.b	80	;B
    776  7cad		       10		      .byte.b	16	;R (62)
    777  7cae		       00		      .byte.b	0	;G
    778  7caf		       d0		      .byte.b	208	;B
    779  7cb0		       10		      .byte.b	16	;R (61)
    780  7cb1		       00		      .byte.b	0	;G
    781  7cb2		       d0		      .byte.b	208	;B
    782  7cb3		       10		      .byte.b	16	;R (60)
    783  7cb4		       00		      .byte.b	0	;G
    784  7cb5		       d0		      .byte.b	208	;B
    785  7cb6		       10		      .byte.b	16	;R (59)
    786  7cb7		       00		      .byte.b	0	;G
    787  7cb8		       d0		      .byte.b	208	;B
    788  7cb9		       10		      .byte.b	16	;R (58)
    789  7cba		       00		      .byte.b	0	;G
    790  7cbb		       d0		      .byte.b	208	;B
    791  7cbc		       10		      .byte.b	16	;R (57)
    792  7cbd		       00		      .byte.b	0	;G
    793  7cbe		       d0		      .byte.b	208	;B
    794  7cbf		       10		      .byte.b	16	;R (56)
    795  7cc0		       00		      .byte.b	0	;G
    796  7cc1		       50		      .byte.b	80	;B
    797  7cc2		       10		      .byte.b	16	;R (55)
    798  7cc3		       00		      .byte.b	0	;G
    799  7cc4		       50		      .byte.b	80	;B
    800  7cc5		       10		      .byte.b	16	;R (54)
    801  7cc6		       00		      .byte.b	0	;G
    802  7cc7		       50		      .byte.b	80	;B
    803  7cc8		       10		      .byte.b	16	;R (53)
    804  7cc9		       00		      .byte.b	0	;G
    805  7cca		       50		      .byte.b	80	;B
    806  7ccb		       10		      .byte.b	16	;R (52)
    807  7ccc		       00		      .byte.b	0	;G
    808  7ccd		       50		      .byte.b	80	;B
    809  7cce		       10		      .byte.b	16	;R (51)
    810  7ccf		       00		      .byte.b	0	;G
    811  7cd0		       50		      .byte.b	80	;B
    812  7cd1		       10		      .byte.b	16	;R (50)
    813  7cd2		       00		      .byte.b	0	;G
    814  7cd3		       50		      .byte.b	80	;B
    815  7cd4		       10		      .byte.b	16	;R (49)
    816  7cd5		       00		      .byte.b	0	;G
    817  7cd6		       50		      .byte.b	80	;B
    818  7cd7		       10		      .byte.b	16	;R (48)
    819  7cd8		       00		      .byte.b	0	;G
    820  7cd9		       50		      .byte.b	80	;B
    821  7cda		       10		      .byte.b	16	;R (47)
    822  7cdb		       00		      .byte.b	0	;G
    823  7cdc		       d0		      .byte.b	208	;B
    824  7cdd		       10		      .byte.b	16	;R (46)
    825  7cde		       00		      .byte.b	0	;G
    826  7cdf		       d0		      .byte.b	208	;B
    827  7ce0		       10		      .byte.b	16	;R (45)
    828  7ce1		       00		      .byte.b	0	;G
    829  7ce2		       d0		      .byte.b	208	;B
    830  7ce3		       10		      .byte.b	16	;R (44)
    831  7ce4		       00		      .byte.b	0	;G
    832  7ce5		       d0		      .byte.b	208	;B
    833  7ce6		       00		      .byte.b	0	;R (43)
    834  7ce7		       20		      .byte.b	32	;G
    835  7ce8		       c0		      .byte.b	192	;B
    836  7ce9		       00		      .byte.b	0	;R (42)
    837  7cea		       f0		      .byte.b	240	;G
    838  7ceb		       00		      .byte.b	0	;B
    839  7cec		       00		      .byte.b	0	;R (41)
    840  7ced		       f0		      .byte.b	240	;G
    841  7cee		       00		      .byte.b	0	;B
    842  7cef		       f0		      .byte.b	240	;R (40)
    843  7cf0		       f0		      .byte.b	240	;G
    844  7cf1		       f0		      .byte.b	240	;B
    845  7cf2		       f0		      .byte.b	240	;R (39)
    846  7cf3		       f0		      .byte.b	240	;G
    847  7cf4		       f0		      .byte.b	240	;B
    848  7cf5		       f0		      .byte.b	240	;R (38)
    849  7cf6		       f0		      .byte.b	240	;G
    850  7cf7		       f0		      .byte.b	240	;B
    851  7cf8		       00		      .byte.b	0	;R (37)
    852  7cf9		       f0		      .byte.b	240	;G
    853  7cfa		       f0		      .byte.b	240	;B
    854  7cfb		       00		      .byte.b	0	;R (36)
    855  7cfc		       d0		      .byte.b	208	;G
    856  7cfd		       d0		      .byte.b	208	;B
    857  7cfe		       00		      .byte.b	0	;R (35)
    858  7cff		       90		      .byte.b	144	;G
    859  7d00		       b0		      .byte.b	176	;B
    860  7d01		       00		      .byte.b	0	;R (34)
    861  7d02		       90		      .byte.b	144	;G
    862  7d03		       b0		      .byte.b	176	;B
    863  7d04		       00		      .byte.b	0	;R (33)
    864  7d05		       90		      .byte.b	144	;G
    865  7d06		       b0		      .byte.b	176	;B
    866  7d07		       00		      .byte.b	0	;R (32)
    867  7d08		       90		      .byte.b	144	;G
    868  7d09		       b0		      .byte.b	176	;B
    869  7d0a		       00		      .byte.b	0	;R (31)
    870  7d0b		       80		      .byte.b	128	;G
    871  7d0c		       a0		      .byte.b	160	;B
    872  7d0d		       00		      .byte.b	0	;R (30)
    873  7d0e		       00		      .byte.b	0	;G
    874  7d0f		       a0		      .byte.b	160	;B
    875  7d10		       00		      .byte.b	0	;R (29)
    876  7d11		       00		      .byte.b	0	;G
    877  7d12		       e0		      .byte.b	224	;B
    878  7d13		       00		      .byte.b	0	;R (28)
    879  7d14		       00		      .byte.b	0	;G
    880  7d15		       e0		      .byte.b	224	;B
    881  7d16		       00		      .byte.b	0	;R (27)
    882  7d17		       00		      .byte.b	0	;G
    883  7d18		       e0		      .byte.b	224	;B
    884  7d19		       00		      .byte.b	0	;R (26)
    885  7d1a		       00		      .byte.b	0	;G
    886  7d1b		       e0		      .byte.b	224	;B
    887  7d1c		       00		      .byte.b	0	;R (25)
    888  7d1d		       00		      .byte.b	0	;G
    889  7d1e		       e0		      .byte.b	224	;B
    890  7d1f		       00		      .byte.b	0	;R (24)
    891  7d20		       00		      .byte.b	0	;G
    892  7d21		       e0		      .byte.b	224	;B
    893  7d22		       00		      .byte.b	0	;R (23)
    894  7d23		       00		      .byte.b	0	;G
    895  7d24		       60		      .byte.b	96	;B
    896  7d25		       00		      .byte.b	0	;R (22)
    897  7d26		       00		      .byte.b	0	;G
    898  7d27		       60		      .byte.b	96	;B
    899  7d28		       00		      .byte.b	0	;R (21)
    900  7d29		       00		      .byte.b	0	;G
    901  7d2a		       e0		      .byte.b	224	;B
    902  7d2b		       00		      .byte.b	0	;R (20)
    903  7d2c		       00		      .byte.b	0	;G
    904  7d2d		       e0		      .byte.b	224	;B
    905  7d2e		       00		      .byte.b	0	;R (19)
    906  7d2f		       00		      .byte.b	0	;G
    907  7d30		       e0		      .byte.b	224	;B
    908  7d31		       00		      .byte.b	0	;R (18)
    909  7d32		       00		      .byte.b	0	;G
    910  7d33		       e0		      .byte.b	224	;B
    911  7d34		       00		      .byte.b	0	;R (17)
    912  7d35		       00		      .byte.b	0	;G
    913  7d36		       e0		      .byte.b	224	;B
    914  7d37		       00		      .byte.b	0	;R (16)
    915  7d38		       00		      .byte.b	0	;G
    916  7d39		       e0		      .byte.b	224	;B
    917  7d3a		       00		      .byte.b	0	;R (15)
    918  7d3b		       00		      .byte.b	0	;G
    919  7d3c		       a0		      .byte.b	160	;B
    920  7d3d		       00		      .byte.b	0	;R (14)
    921  7d3e		       00		      .byte.b	0	;G
    922  7d3f		       a0		      .byte.b	160	;B
    923  7d40		       00		      .byte.b	0	;R (13)
    924  7d41		       00		      .byte.b	0	;G
    925  7d42		       a0		      .byte.b	160	;B
    926  7d43		       00		      .byte.b	0	;R (12)
    927  7d44		       80		      .byte.b	128	;G
    928  7d45		       20		      .byte.b	32	;B
    929  7d46		       00		      .byte.b	0	;R (11)
    930  7d47		       80		      .byte.b	128	;G
    931  7d48		       20		      .byte.b	32	;B
    932  7d49		       00		      .byte.b	0	;R (10)
    933  7d4a		       80		      .byte.b	128	;G
    934  7d4b		       20		      .byte.b	32	;B
    935  7d4c		       00		      .byte.b	0	;R (9)
    936  7d4d		       80		      .byte.b	128	;G
    937  7d4e		       20		      .byte.b	32	;B
    938  7d4f		       00		      .byte.b	0	;R (8)
    939  7d50		       80		      .byte.b	128	;G
    940  7d51		       20		      .byte.b	32	;B
    941  7d52		       00		      .byte.b	0	;R (7)
    942  7d53		       80		      .byte.b	128	;G
    943  7d54		       20		      .byte.b	32	;B
    944  7d55		       00		      .byte.b	0	;R (6)
    945  7d56		       80		      .byte.b	128	;G
    946  7d57		       20		      .byte.b	32	;B
    947  7d58		       00		      .byte.b	0	;R (5)
    948  7d59		       80		      .byte.b	128	;G
    949  7d5a		       20		      .byte.b	32	;B
    950  7d5b		       00		      .byte.b	0	;R (4)
    951  7d5c		       90		      .byte.b	144	;G
    952  7d5d		       20		      .byte.b	32	;B
    953  7d5e		       00		      .byte.b	0	;R (3)
    954  7d5f		       f0		      .byte.b	240	;G
    955  7d60		       00		      .byte.b	0	;B
    956  7d61		       00		      .byte.b	0	;R (2)
    957  7d62		       f0		      .byte.b	240	;G
    958  7d63		       00		      .byte.b	0	;B
    959  7d64		       f0		      .byte.b	240	;R (1)
    960  7d65		       f0		      .byte.b	240	;G
    961  7d66		       f0		      .byte.b	240	;B
    962  7d67		       f0		      .byte.b	240	;R (0)
    963  7d68		       f0		      .byte.b	240	;G
    964  7d69		       f0		      .byte.b	240	;B
    965  7d6a				   COL_4
    966  7d6a		       00		      .byte.b	0	;R (79)
    967  7d6b		       00		      .byte.b	0	;G
    968  7d6c		       00		      .byte.b	0	;B
    969  7d6d		       ff		      .byte.b	255	;R (78)
    970  7d6e		       ff		      .byte.b	255	;G
    971  7d6f		       ff		      .byte.b	255	;B
    972  7d70		       ff		      .byte.b	255	;R (77)
    973  7d71		       ff		      .byte.b	255	;G
    974  7d72		       ff		      .byte.b	255	;B
    975  7d73		       00		      .byte.b	0	;R (76)
    976  7d74		       ff		      .byte.b	255	;G
    977  7d75		       ff		      .byte.b	255	;B
    978  7d76		       00		      .byte.b	0	;R (75)
    979  7d77		       79		      .byte.b	121	;G
    980  7d78		       79		      .byte.b	121	;B
    981  7d79		       00		      .byte.b	0	;R (74)
    982  7d7a		       3e		      .byte.b	62	;G
    983  7d7b		       b8		      .byte.b	184	;B
    984  7d7c		       00		      .byte.b	0	;R (73)
    985  7d7d		       3e		      .byte.b	62	;G
    986  7d7e		       b8		      .byte.b	184	;B
    987  7d7f		       00		      .byte.b	0	;R (72)
    988  7d80		       1e		      .byte.b	30	;G
    989  7d81		       d0		      .byte.b	208	;B
    990  7d82		       00		      .byte.b	0	;R (71)
    991  7d83		       0e		      .byte.b	14	;G
    992  7d84		       e0		      .byte.b	224	;B
    993  7d85		       00		      .byte.b	0	;R (70)
    994  7d86		       0f		      .byte.b	15	;G
    995  7d87		       e0		      .byte.b	224	;B
    996  7d88		       00		      .byte.b	0	;R (69)
    997  7d89		       8f		      .byte.b	143	;G
    998  7d8a		       e0		      .byte.b	224	;B
    999  7d8b		       00		      .byte.b	0	;R (68)
   1000  7d8c		       c9		      .byte.b	201	;G
   1001  7d8d		       e2		      .byte.b	226	;B
   1002  7d8e		       00		      .byte.b	0	;R (67)
   1003  7d8f		       c9		      .byte.b	201	;G
   1004  7d90		       e2		      .byte.b	226	;B
   1005  7d91		       00		      .byte.b	0	;R (66)
   1006  7d92		       c9		      .byte.b	201	;G
   1007  7d93		       e2		      .byte.b	226	;B
   1008  7d94		       00		      .byte.b	0	;R (65)
   1009  7d95		       c9		      .byte.b	201	;G
   1010  7d96		       e2		      .byte.b	226	;B
   1011  7d97		       00		      .byte.b	0	;R (64)
   1012  7d98		       89		      .byte.b	137	;G
   1013  7d99		       e2		      .byte.b	226	;B
   1014  7d9a		       00		      .byte.b	0	;R (63)
   1015  7d9b		       89		      .byte.b	137	;G
   1016  7d9c		       e2		      .byte.b	226	;B
   1017  7d9d		       00		      .byte.b	0	;R (62)
   1018  7d9e		       09		      .byte.b	9	;G
   1019  7d9f		       62		      .byte.b	98	;B
   1020  7da0		       00		      .byte.b	0	;R (61)
   1021  7da1		       09		      .byte.b	9	;G
   1022  7da2		       e2		      .byte.b	226	;B
   1023  7da3		       00		      .byte.b	0	;R (60)
   1024  7da4		       09		      .byte.b	9	;G
   1025  7da5		       d2		      .byte.b	210	;B
   1026  7da6		       00		      .byte.b	0	;R (59)
   1027  7da7		       09		      .byte.b	9	;G
   1028  7da8		       d2		      .byte.b	210	;B
   1029  7da9		       00		      .byte.b	0	;R (58)
   1030  7daa		       09		      .byte.b	9	;G
   1031  7dab		       d2		      .byte.b	210	;B
   1032  7dac		       00		      .byte.b	0	;R (57)
   1033  7dad		       09		      .byte.b	9	;G
   1034  7dae		       52		      .byte.b	82	;B
   1035  7daf		       c0		      .byte.b	192	;R (56)
   1036  7db0		       09		      .byte.b	9	;G
   1037  7db1		       22		      .byte.b	34	;B
   1038  7db2		       c0		      .byte.b	192	;R (55)
   1039  7db3		       09		      .byte.b	9	;G
   1040  7db4		       22		      .byte.b	34	;B
   1041  7db5		       c0		      .byte.b	192	;R (54)
   1042  7db6		       09		      .byte.b	9	;G
   1043  7db7		       22		      .byte.b	34	;B
   1044  7db8		       c0		      .byte.b	192	;R (53)
   1045  7db9		       09		      .byte.b	9	;G
   1046  7dba		       22		      .byte.b	34	;B
   1047  7dbb		       c0		      .byte.b	192	;R (52)
   1048  7dbc		       09		      .byte.b	9	;G
   1049  7dbd		       22		      .byte.b	34	;B
   1050  7dbe		       c0		      .byte.b	192	;R (51)
   1051  7dbf		       09		      .byte.b	9	;G
   1052  7dc0		       22		      .byte.b	34	;B
   1053  7dc1		       80		      .byte.b	128	;R (50)
   1054  7dc2		       09		      .byte.b	9	;G
   1055  7dc3		       62		      .byte.b	98	;B
   1056  7dc4		       80		      .byte.b	128	;R (49)
   1057  7dc5		       09		      .byte.b	9	;G
   1058  7dc6		       62		      .byte.b	98	;B
   1059  7dc7		       00		      .byte.b	0	;R (48)
   1060  7dc8		       0d		      .byte.b	13	;G
   1061  7dc9		       60		      .byte.b	96	;B
   1062  7dca		       10		      .byte.b	16	;R (47)
   1063  7dcb		       0d		      .byte.b	13	;G
   1064  7dcc		       c0		      .byte.b	192	;B
   1065  7dcd		       10		      .byte.b	16	;R (46)
   1066  7dce		       0f		      .byte.b	15	;G
   1067  7dcf		       c0		      .byte.b	192	;B
   1068  7dd0		       18		      .byte.b	24	;R (45)
   1069  7dd1		       07		      .byte.b	7	;G
   1070  7dd2		       c0		      .byte.b	192	;B
   1071  7dd3		       18		      .byte.b	24	;R (44)
   1072  7dd4		       07		      .byte.b	7	;G
   1073  7dd5		       80		      .byte.b	128	;B
   1074  7dd6		       3c		      .byte.b	60	;R (43)
   1075  7dd7		       02		      .byte.b	2	;G
   1076  7dd8		       80		      .byte.b	128	;B
   1077  7dd9		       3f		      .byte.b	63	;R (42)
   1078  7dda		       c0		      .byte.b	192	;G
   1079  7ddb		       00		      .byte.b	0	;B
   1080  7ddc		       1f		      .byte.b	31	;R (41)
   1081  7ddd		       e0		      .byte.b	224	;G
   1082  7dde		       00		      .byte.b	0	;B
   1083  7ddf		       ff		      .byte.b	255	;R (40)
   1084  7de0		       ff		      .byte.b	255	;G
   1085  7de1		       ff		      .byte.b	255	;B
   1086  7de2		       ff		      .byte.b	255	;R (39)
   1087  7de3		       ff		      .byte.b	255	;G
   1088  7de4		       ff		      .byte.b	255	;B
   1089  7de5		       ff		      .byte.b	255	;R (38)
   1090  7de6		       ff		      .byte.b	255	;G
   1091  7de7		       ff		      .byte.b	255	;B
   1092  7de8		       00		      .byte.b	0	;R (37)
   1093  7de9		       ff		      .byte.b	255	;G
   1094  7dea		       ff		      .byte.b	255	;B
   1095  7deb		       00		      .byte.b	0	;R (36)
   1096  7dec		       00		      .byte.b	0	;G
   1097  7ded		       00		      .byte.b	0	;B
   1098  7dee		       00		      .byte.b	0	;R (35)
   1099  7def		       00		      .byte.b	0	;G
   1100  7df0		       ff		      .byte.b	255	;B
   1101  7df1		       00		      .byte.b	0	;R (34)
   1102  7df2		       00		      .byte.b	0	;G
   1103  7df3		       ff		      .byte.b	255	;B
   1104  7df4		       00		      .byte.b	0	;R (33)
   1105  7df5		       00		      .byte.b	0	;G
   1106  7df6		       80		      .byte.b	128	;B
   1107  7df7		       00		      .byte.b	0	;R (32)
   1108  7df8		       00		      .byte.b	0	;G
   1109  7df9		       80		      .byte.b	128	;B
   1110  7dfa		       00		      .byte.b	0	;R (31)
   1111  7dfb		       00		      .byte.b	0	;G
   1112  7dfc		       80		      .byte.b	128	;B
   1113  7dfd		       00		      .byte.b	0	;R (30)
   1114  7dfe		       00		      .byte.b	0	;G
   1115  7dff		       80		      .byte.b	128	;B
   1116  7e00		       00		      .byte.b	0	;R (29)
   1117  7e01		       00		      .byte.b	0	;G
   1118  7e02		       80		      .byte.b	128	;B
   1119  7e03		       00		      .byte.b	0	;R (28)
   1120  7e04		       00		      .byte.b	0	;G
   1121  7e05		       80		      .byte.b	128	;B
   1122  7e06		       00		      .byte.b	0	;R (27)
   1123  7e07		       00		      .byte.b	0	;G
   1124  7e08		       80		      .byte.b	128	;B
   1125  7e09		       00		      .byte.b	0	;R (26)
   1126  7e0a		       7f		      .byte.b	127	;G
   1127  7e0b		       7f		      .byte.b	127	;B
   1128  7e0c		       00		      .byte.b	0	;R (25)
   1129  7e0d		       7f		      .byte.b	127	;G
   1130  7e0e		       7f		      .byte.b	127	;B
   1131  7e0f		       00		      .byte.b	0	;R (24)
   1132  7e10		       7f		      .byte.b	127	;G
   1133  7e11		       7f		      .byte.b	127	;B
   1134  7e12		       ff		      .byte.b	255	;R (23)
   1135  7e13		       00		      .byte.b	0	;G
   1136  7e14		       00		      .byte.b	0	;B
   1137  7e15		       ff		      .byte.b	255	;R (22)
   1138  7e16		       00		      .byte.b	0	;G
   1139  7e17		       00		      .byte.b	0	;B
   1140  7e18		       7f		      .byte.b	127	;R (21)
   1141  7e19		       00		      .byte.b	0	;G
   1142  7e1a		       00		      .byte.b	0	;B
   1143  7e1b		       7f		      .byte.b	127	;R (20)
   1144  7e1c		       00		      .byte.b	0	;G
   1145  7e1d		       00		      .byte.b	0	;B
   1146  7e1e		       7f		      .byte.b	127	;R (19)
   1147  7e1f		       00		      .byte.b	0	;G
   1148  7e20		       00		      .byte.b	0	;B
   1149  7e21		       7f		      .byte.b	127	;R (18)
   1150  7e22		       00		      .byte.b	0	;G
   1151  7e23		       00		      .byte.b	0	;B
   1152  7e24		       00		      .byte.b	0	;R (17)
   1153  7e25		       00		      .byte.b	0	;G
   1154  7e26		       80		      .byte.b	128	;B
   1155  7e27		       00		      .byte.b	0	;R (16)
   1156  7e28		       00		      .byte.b	0	;G
   1157  7e29		       80		      .byte.b	128	;B
   1158  7e2a		       00		      .byte.b	0	;R (15)
   1159  7e2b		       00		      .byte.b	0	;G
   1160  7e2c		       80		      .byte.b	128	;B
   1161  7e2d		       00		      .byte.b	0	;R (14)
   1162  7e2e		       00		      .byte.b	0	;G
   1163  7e2f		       80		      .byte.b	128	;B
   1164  7e30		       00		      .byte.b	0	;R (13)
   1165  7e31		       00		      .byte.b	0	;G
   1166  7e32		       80		      .byte.b	128	;B
   1167  7e33		       00		      .byte.b	0	;R (12)
   1168  7e34		       00		      .byte.b	0	;G
   1169  7e35		       80		      .byte.b	128	;B
   1170  7e36		       00		      .byte.b	0	;R (11)
   1171  7e37		       00		      .byte.b	0	;G
   1172  7e38		       80		      .byte.b	128	;B
   1173  7e39		       00		      .byte.b	0	;R (10)
   1174  7e3a		       00		      .byte.b	0	;G
   1175  7e3b		       80		      .byte.b	128	;B
   1176  7e3c		       00		      .byte.b	0	;R (9)
   1177  7e3d		       00		      .byte.b	0	;G
   1178  7e3e		       80		      .byte.b	128	;B
   1179  7e3f		       00		      .byte.b	0	;R (8)
   1180  7e40		       00		      .byte.b	0	;G
   1181  7e41		       ff		      .byte.b	255	;B
   1182  7e42		       00		      .byte.b	0	;R (7)
   1183  7e43		       00		      .byte.b	0	;G
   1184  7e44		       ff		      .byte.b	255	;B
   1185  7e45		       00		      .byte.b	0	;R (6)
   1186  7e46		       00		      .byte.b	0	;G
   1187  7e47		       ff		      .byte.b	255	;B
   1188  7e48		       00		      .byte.b	0	;R (5)
   1189  7e49		       00		      .byte.b	0	;G
   1190  7e4a		       ff		      .byte.b	255	;B
   1191  7e4b		       00		      .byte.b	0	;R (4)
   1192  7e4c		       00		      .byte.b	0	;G
   1193  7e4d		       ff		      .byte.b	255	;B
   1194  7e4e		       00		      .byte.b	0	;R (3)
   1195  7e4f		       ff		      .byte.b	255	;G
   1196  7e50		       00		      .byte.b	0	;B
   1197  7e51		       00		      .byte.b	0	;R (2)
   1198  7e52		       ff		      .byte.b	255	;G
   1199  7e53		       00		      .byte.b	0	;B
   1200  7e54		       ff		      .byte.b	255	;R (1)
   1201  7e55		       ff		      .byte.b	255	;G
   1202  7e56		       ff		      .byte.b	255	;B
   1203  7e57		       ff		      .byte.b	255	;R (0)
   1204  7e58		       ff		      .byte.b	255	;G
   1205  7e59		       ff		      .byte.b	255	;B
   1206  7e5a				   COL_5
   1207  7e5a		       00		      .byte.b	0	;R (79)
   1208  7e5b		       00		      .byte.b	0	;G
   1209  7e5c		       00		      .byte.b	0	;B
   1210  7e5d		       3f		      .byte.b	63	;R (78)
   1211  7e5e		       3f		      .byte.b	63	;G
   1212  7e5f		       3f		      .byte.b	63	;B
   1213  7e60		       7f		      .byte.b	127	;R (77)
   1214  7e61		       7f		      .byte.b	127	;G
   1215  7e62		       7f		      .byte.b	127	;B
   1216  7e63		       40		      .byte.b	64	;R (76)
   1217  7e64		       7f		      .byte.b	127	;G
   1218  7e65		       7f		      .byte.b	127	;B
   1219  7e66		       c0		      .byte.b	192	;R (75)
   1220  7e67		       f3		      .byte.b	243	;G
   1221  7e68		       f3		      .byte.b	243	;B
   1222  7e69		       8c		      .byte.b	140	;R (74)
   1223  7e6a		       ef		      .byte.b	239	;G
   1224  7e6b		       e3		      .byte.b	227	;B
   1225  7e6c		       8c		      .byte.b	140	;R (73)
   1226  7e6d		       ef		      .byte.b	239	;G
   1227  7e6e		       e3		      .byte.b	227	;B
   1228  7e6f		       8e		      .byte.b	142	;R (72)
   1229  7e70		       ef		      .byte.b	239	;G
   1230  7e71		       e1		      .byte.b	225	;B
   1231  7e72		       8e		      .byte.b	142	;R (71)
   1232  7e73		       ef		      .byte.b	239	;G
   1233  7e74		       e1		      .byte.b	225	;B
   1234  7e75		       9e		      .byte.b	158	;R (70)
   1235  7e76		       9e		      .byte.b	158	;G
   1236  7e77		       c0		      .byte.b	192	;B
   1237  7e78		       9e		      .byte.b	158	;R (69)
   1238  7e79		       9e		      .byte.b	158	;G
   1239  7e7a		       c0		      .byte.b	192	;B
   1240  7e7b		       92		      .byte.b	146	;R (68)
   1241  7e7c		       92		      .byte.b	146	;G
   1242  7e7d		       c8		      .byte.b	200	;B
   1243  7e7e		       92		      .byte.b	146	;R (67)
   1244  7e7f		       92		      .byte.b	146	;G
   1245  7e80		       c8		      .byte.b	200	;B
   1246  7e81		       92		      .byte.b	146	;R (66)
   1247  7e82		       92		      .byte.b	146	;G
   1248  7e83		       c8		      .byte.b	200	;B
   1249  7e84		       92		      .byte.b	146	;R (65)
   1250  7e85		       92		      .byte.b	146	;G
   1251  7e86		       c8		      .byte.b	200	;B
   1252  7e87		       92		      .byte.b	146	;R (64)
   1253  7e88		       92		      .byte.b	146	;G
   1254  7e89		       c8		      .byte.b	200	;B
   1255  7e8a		       92		      .byte.b	146	;R (63)
   1256  7e8b		       92		      .byte.b	146	;G
   1257  7e8c		       c8		      .byte.b	200	;B
   1258  7e8d		       92		      .byte.b	146	;R (62)
   1259  7e8e		       92		      .byte.b	146	;G
   1260  7e8f		       c8		      .byte.b	200	;B
   1261  7e90		       92		      .byte.b	146	;R (61)
   1262  7e91		       92		      .byte.b	146	;G
   1263  7e92		       c8		      .byte.b	200	;B
   1264  7e93		       92		      .byte.b	146	;R (60)
   1265  7e94		       92		      .byte.b	146	;G
   1266  7e95		       c8		      .byte.b	200	;B
   1267  7e96		       92		      .byte.b	146	;R (59)
   1268  7e97		       92		      .byte.b	146	;G
   1269  7e98		       c8		      .byte.b	200	;B
   1270  7e99		       92		      .byte.b	146	;R (58)
   1271  7e9a		       92		      .byte.b	146	;G
   1272  7e9b		       c8		      .byte.b	200	;B
   1273  7e9c		       92		      .byte.b	146	;R (57)
   1274  7e9d		       92		      .byte.b	146	;G
   1275  7e9e		       c8		      .byte.b	200	;B
   1276  7e9f		       92		      .byte.b	146	;R (56)
   1277  7ea0		       92		      .byte.b	146	;G
   1278  7ea1		       c8		      .byte.b	200	;B
   1279  7ea2		       92		      .byte.b	146	;R (55)
   1280  7ea3		       92		      .byte.b	146	;G
   1281  7ea4		       c8		      .byte.b	200	;B
   1282  7ea5		       92		      .byte.b	146	;R (54)
   1283  7ea6		       92		      .byte.b	146	;G
   1284  7ea7		       c8		      .byte.b	200	;B
   1285  7ea8		       92		      .byte.b	146	;R (53)
   1286  7ea9		       92		      .byte.b	146	;G
   1287  7eaa		       c8		      .byte.b	200	;B
   1288  7eab		       92		      .byte.b	146	;R (52)
   1289  7eac		       92		      .byte.b	146	;G
   1290  7ead		       c8		      .byte.b	200	;B
   1291  7eae		       92		      .byte.b	146	;R (51)
   1292  7eaf		       92		      .byte.b	146	;G
   1293  7eb0		       c8		      .byte.b	200	;B
   1294  7eb1		       92		      .byte.b	146	;R (50)
   1295  7eb2		       92		      .byte.b	146	;G
   1296  7eb3		       c8		      .byte.b	200	;B
   1297  7eb4		       92		      .byte.b	146	;R (49)
   1298  7eb5		       92		      .byte.b	146	;G
   1299  7eb6		       c8		      .byte.b	200	;B
   1300  7eb7		       96		      .byte.b	150	;R (48)
   1301  7eb8		       96		      .byte.b	150	;G
   1302  7eb9		       c0		      .byte.b	192	;B
   1303  7eba		       96		      .byte.b	150	;R (47)
   1304  7ebb		       96		      .byte.b	150	;G
   1305  7ebc		       c0		      .byte.b	192	;B
   1306  7ebd		       9e		      .byte.b	158	;R (46)
   1307  7ebe		       9e		      .byte.b	158	;G
   1308  7ebf		       c0		      .byte.b	192	;B
   1309  7ec0		       9e		      .byte.b	158	;R (45)
   1310  7ec1		       9c		      .byte.b	156	;G
   1311  7ec2		       c0		      .byte.b	192	;B
   1312  7ec3		       9e		      .byte.b	158	;R (44)
   1313  7ec4		       9c		      .byte.b	156	;G
   1314  7ec5		       c0		      .byte.b	192	;B
   1315  7ec6		       ef		      .byte.b	239	;R (43)
   1316  7ec7		       88		      .byte.b	136	;G
   1317  7ec8		       80		      .byte.b	128	;B
   1318  7ec9		       7f		      .byte.b	127	;R (42)
   1319  7eca		       40		      .byte.b	64	;G
   1320  7ecb		       40		      .byte.b	64	;B
   1321  7ecc		       7f		      .byte.b	127	;R (41)
   1322  7ecd		       40		      .byte.b	64	;G
   1323  7ece		       40		      .byte.b	64	;B
   1324  7ecf		       7f		      .byte.b	127	;R (40)
   1325  7ed0		       7f		      .byte.b	127	;G
   1326  7ed1		       7f		      .byte.b	127	;B
   1327  7ed2		       3f		      .byte.b	63	;R (39)
   1328  7ed3		       3f		      .byte.b	63	;G
   1329  7ed4		       3f		      .byte.b	63	;B
   1330  7ed5		       7f		      .byte.b	127	;R (38)
   1331  7ed6		       7f		      .byte.b	127	;G
   1332  7ed7		       7f		      .byte.b	127	;B
   1333  7ed8		       40		      .byte.b	64	;R (37)
   1334  7ed9		       7f		      .byte.b	127	;G
   1335  7eda		       7f		      .byte.b	127	;B
   1336  7edb		       c0		      .byte.b	192	;R (36)
   1337  7edc		       f9		      .byte.b	249	;G
   1338  7edd		       f9		      .byte.b	249	;B
   1339  7ede		       86		      .byte.b	134	;R (35)
   1340  7edf		       f0		      .byte.b	240	;G
   1341  7ee0		       f6		      .byte.b	246	;B
   1342  7ee1		       86		      .byte.b	134	;R (34)
   1343  7ee2		       f0		      .byte.b	240	;G
   1344  7ee3		       f6		      .byte.b	246	;B
   1345  7ee4		       87		      .byte.b	135	;R (33)
   1346  7ee5		       f0		      .byte.b	240	;G
   1347  7ee6		       f7		      .byte.b	247	;B
   1348  7ee7		       87		      .byte.b	135	;R (32)
   1349  7ee8		       f0		      .byte.b	240	;G
   1350  7ee9		       f7		      .byte.b	247	;B
   1351  7eea		       8f		      .byte.b	143	;R (31)
   1352  7eeb		       80		      .byte.b	128	;G
   1353  7eec		       cf		      .byte.b	207	;B
   1354  7eed		       8f		      .byte.b	143	;R (30)
   1355  7eee		       80		      .byte.b	128	;G
   1356  7eef		       cf		      .byte.b	207	;B
   1357  7ef0		       89		      .byte.b	137	;R (29)
   1358  7ef1		       84		      .byte.b	132	;G
   1359  7ef2		       cd		      .byte.b	205	;B
   1360  7ef3		       89		      .byte.b	137	;R (28)
   1361  7ef4		       84		      .byte.b	132	;G
   1362  7ef5		       cd		      .byte.b	205	;B
   1363  7ef6		       89		      .byte.b	137	;R (27)
   1364  7ef7		       84		      .byte.b	132	;G
   1365  7ef8		       cd		      .byte.b	205	;B
   1366  7ef9		       89		      .byte.b	137	;R (26)
   1367  7efa		       84		      .byte.b	132	;G
   1368  7efb		       cd		      .byte.b	205	;B
   1369  7efc		       89		      .byte.b	137	;R (25)
   1370  7efd		       84		      .byte.b	132	;G
   1371  7efe		       cd		      .byte.b	205	;B
   1372  7eff		       89		      .byte.b	137	;R (24)
   1373  7f00		       84		      .byte.b	132	;G
   1374  7f01		       cd		      .byte.b	205	;B
   1375  7f02		       89		      .byte.b	137	;R (23)
   1376  7f03		       84		      .byte.b	132	;G
   1377  7f04		       cd		      .byte.b	205	;B
   1378  7f05		       89		      .byte.b	137	;R (22)
   1379  7f06		       84		      .byte.b	132	;G
   1380  7f07		       cd		      .byte.b	205	;B
   1381  7f08		       8d		      .byte.b	141	;R (21)
   1382  7f09		       80		      .byte.b	128	;G
   1383  7f0a		       c9		      .byte.b	201	;B
   1384  7f0b		       8d		      .byte.b	141	;R (20)
   1385  7f0c		       80		      .byte.b	128	;G
   1386  7f0d		       c9		      .byte.b	201	;B
   1387  7f0e		       8d		      .byte.b	141	;R (19)
   1388  7f0f		       80		      .byte.b	128	;G
   1389  7f10		       c9		      .byte.b	201	;B
   1390  7f11		       8d		      .byte.b	141	;R (18)
   1391  7f12		       80		      .byte.b	128	;G
   1392  7f13		       c9		      .byte.b	201	;B
   1393  7f14		       8d		      .byte.b	141	;R (17)
   1394  7f15		       80		      .byte.b	128	;G
   1395  7f16		       c9		      .byte.b	201	;B
   1396  7f17		       8d		      .byte.b	141	;R (16)
   1397  7f18		       80		      .byte.b	128	;G
   1398  7f19		       c9		      .byte.b	201	;B
   1399  7f1a		       8d		      .byte.b	141	;R (15)
   1400  7f1b		       80		      .byte.b	128	;G
   1401  7f1c		       c9		      .byte.b	201	;B
   1402  7f1d		       8d		      .byte.b	141	;R (14)
   1403  7f1e		       80		      .byte.b	128	;G
   1404  7f1f		       c9		      .byte.b	201	;B
   1405  7f20		       8d		      .byte.b	141	;R (13)
   1406  7f21		       80		      .byte.b	128	;G
   1407  7f22		       c9		      .byte.b	201	;B
   1408  7f23		       8d		      .byte.b	141	;R (12)
   1409  7f24		       80		      .byte.b	128	;G
   1410  7f25		       c9		      .byte.b	201	;B
   1411  7f26		       8d		      .byte.b	141	;R (11)
   1412  7f27		       80		      .byte.b	128	;G
   1413  7f28		       c9		      .byte.b	201	;B
   1414  7f29		       8d		      .byte.b	141	;R (10)
   1415  7f2a		       80		      .byte.b	128	;G
   1416  7f2b		       c9		      .byte.b	201	;B
   1417  7f2c		       8b		      .byte.b	139	;R (9)
   1418  7f2d		       80		      .byte.b	128	;G
   1419  7f2e		       cb		      .byte.b	203	;B
   1420  7f2f		       8b		      .byte.b	139	;R (8)
   1421  7f30		       80		      .byte.b	128	;G
   1422  7f31		       cb		      .byte.b	203	;B
   1423  7f32		       8f		      .byte.b	143	;R (7)
   1424  7f33		       80		      .byte.b	128	;G
   1425  7f34		       cf		      .byte.b	207	;B
   1426  7f35		       8e		      .byte.b	142	;R (6)
   1427  7f36		       80		      .byte.b	128	;G
   1428  7f37		       ce		      .byte.b	206	;B
   1429  7f38		       8e		      .byte.b	142	;R (5)
   1430  7f39		       80		      .byte.b	128	;G
   1431  7f3a		       ce		      .byte.b	206	;B
   1432  7f3b		       e4		      .byte.b	228	;R (4)
   1433  7f3c		       92		      .byte.b	146	;G
   1434  7f3d		       84		      .byte.b	132	;B
   1435  7f3e		       60		      .byte.b	96	;R (3)
   1436  7f3f		       5f		      .byte.b	95	;G
   1437  7f40		       40		      .byte.b	64	;B
   1438  7f41		       60		      .byte.b	96	;R (2)
   1439  7f42		       5f		      .byte.b	95	;G
   1440  7f43		       40		      .byte.b	64	;B
   1441  7f44		       7f		      .byte.b	127	;R (1)
   1442  7f45		       7f		      .byte.b	127	;G
   1443  7f46		       7f		      .byte.b	127	;B
   1444  7f47		       3f		      .byte.b	63	;R (0)
   1445  7f48		       3f		      .byte.b	63	;G
   1446  7f49		       3f		      .byte.b	63	;B
------- FILE titleScreen.asm
    188  7f4a							;    include "pizza.asm"
    189  7f4a
      0  7f4a					      CHECK_BANK_SIZE	"TITLESCREEN"
      1  7f4a		       07 4a	   .TEMP      =	* - BANK_START
 TITLESCREEN (2K) SIZE =  $74a , FREE= $b6
      2  7f4a					      ECHO	"TITLESCREEN", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  7f4a				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  7f4a				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  7f4a				  -	      ERR
      6  7f4a					      endif
------- FILE ./sokoboo.asm
------- FILE levelScreen.asm LEVEL 2 PASS 3
      0  7f4a					      include	"levelScreen.asm"
      0  7f4a					      NEWBANK	LEVELSCREEN
      1  8800 ????				      SEG	LEVELSCREEN
      2  8000					      ORG	ORIGIN
      3  8000					      RORG	$F000
      4  8000				   BANK_START SET	*
      5  8000				   LEVELSCREEN SET	ORIGIN / 2048
      6  8000				   ORIGIN     SET	ORIGIN + 2048
      7  8000				   _CURRENT_BANK SET	LEVELSCREEN
      2  8000
      3  8000		       00 12	   TOPHAT     =	18
      4  8000		       00 20	   BIGDIG_SIZE =	32
      5  8000
      6  8000
      0  8000					      DEFINE_SUBROUTINE	SelectionScreenInit
      1  8000		       00 10	   BANK_SelectionScreenInit =	_CURRENT_BANK
      2  8000					      SUBROUTINE
      3  8000				   SelectionScreenInit
      8  8000
      9  8000		       a9 00		      lda	#%0
     10  8002		       85 44		      sta	NUSIZ0
     11  8004		       85 45		      sta	NUSIZ1
     12  8006		       85 65		      sta	VDELP0
     13  8008		       85 66		      sta	VDELP1
     14  800a		       85 4b		      sta	REFP0
     15  800c		       85 4c		      sta	REFP1
     16  800e							;		  sta COLUBK
     17  800e		       85 59		      sta	AUDV0
     18  8010		       85 5a		      sta	AUDV1	; turn off music while levels init
     19  8012
     20  8012		       a9 14		      lda	#20
     21  8014		       85 e5		      sta	digitick
     22  8016
     23  8016		       a9 f0		      lda	#%11110000
     24  8018		       85 60		      sta	HMP0
     25  801a
     26  801a		       a9 d0		      lda	#%11010000
     27  801c		       85 61		      sta	HMP1
     28  801e
     29  801e
     30  801e		       a9 04		      lda	#%100
     31  8020		       85 4a		      sta	CTRLPF
     32  8022
     33  8022		       a6 80		      ldx	Platform
     34  8024							;		  lda PlatformAdjustColour,x
      0  8024					      NEXT_RANDOM
      1  8024
      2  8024		       a5 c8		      lda	rnd
      3  8026		       4a		      lsr
      4  8027					      IFCONST	rndHi
      5  8027		       66 c7		      ror	rndHi
      6  8029					      ENDIF
      7  8029		       90 02		      bcc	.skipEOR
      8  802b		       49 b4		      eor	#RND_EOR_VAL
      9  802d				   .skipEOR
     10  802d		       85 c8		      sta	rnd
     36  802f		       29 f0		      and	#$F0
     37  8031		       85 f1		      sta	adjustColour
     38  8033							;		  lda PlatformWallColour,x
      0  8033					      NEXT_RANDOM
      1  8033
      2  8033		       a5 c8		      lda	rnd
      3  8035		       4a		      lsr
      4  8036					      IFCONST	rndHi
      5  8036		       66 c7		      ror	rndHi
      6  8038					      ENDIF
      7  8038		       90 02		      bcc	.skipEOR
      8  803a		       49 b4		      eor	#RND_EOR_VAL
      9  803c				   .skipEOR
     10  803c		       85 c8		      sta	rnd
     40  803e		       29 f0		      and	#$F0
     41  8040		       d0 02		      bne	n00
     42  8042		       a9 02		      lda	#2
     43  8044				   n00
     44  8044		       85 f0		      sta	wallColour
     45  8046
     46  8046		       85 46		      sta	COLUP0
     47  8048		       85 47		      sta	COLUP1
     48  804a
     49  804a		       60		      rts
     50  804b
     51  804b				   PlatformWallColour
     52  804b		       f0 f0 22 22	      .byte.b	$F0, $F0, $22, $22
     53  804f				   PlatformAdjustColour
     54  804f		       00 00 c0 c0	      .byte.b	0,0, $c0, $c0
     55  8053
      0  8053					      DEFINE_SUBROUTINE	LevelScreen
      1  8053		       00 10	   BANK_LevelScreen =	_CURRENT_BANK
      2  8053					      SUBROUTINE
      3  8053				   LevelScreen
     57  8053
     58  8053		       85 ec		      sta	selector
     59  8055
     60  8055							;    lda #%10
     61  8055							;    sta VBLANK
     62  8055
     63  8055
     64  8055		       20 00 f0 	      jsr	SelectionScreenInit
     65  8058
     66  8058		       a9 ff		      lda	#-1
     67  805a		       85 e9		      sta	endwait
     68  805c
     69  805c		       a9 ff		      lda	#-1
     70  805e		       85 e6		      sta	targetDigit
     71  8060		       85 e7		      sta	targetDigit+1
     72  8062		       85 e8		      sta	targetDigit+2
     73  8064
     74  8064		       a9 00		      lda	#0
     75  8066		       85 e2		      sta	digit
     76  8068		       85 e3		      sta	digit+1
     77  806a		       85 e4		      sta	digit+2
     78  806c		       85 ed		      sta	walkSpeed
     79  806e
     80  806e							; convert to 3 digits decimal
     81  806e		       20 04 f3 	      jsr	dd3
     82  8071
     83  8071		       20 1d f3 	      jsr	fixWalkFrame
     84  8074
      0  8074					      RESYNC		; uses overlay
      1  8074
      2  8074		       a9 02		      lda	#%10
      3  8076		       85 41		      sta	VBLANK
      4  8078
      5  8078		       a2 08		      ldx	#8
      6  807a				   .loopResync
      0  807a					      VERTICAL_SYNC
      1  807a		       a9 0e		      lda	#%1110
      2  807c		       85 42	   .VSLP1     sta	WSYNC
      3  807e		       85 40		      sta	VSYNC
      4  8080		       4a		      lsr
      5  8081		       d0 f9		      bne	.VSLP1
      8  8083
      9  8083		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  8085		       a5 80		      lda	Platform
     11  8087		       49 02		      eor	#PAL_50
     12  8089		       d0 02		      bne	.ntsc
     13  808b		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  808d				   .ntsc
     15  808d				   .loopWait
     16  808d		       85 42		      sta	WSYNC
     17  808f		       85 42		      sta	WSYNC
     18  8091		       88		      dey
     19  8092		       d0 f9		      bne	.loopWait
     20  8094		       ca		      dex
     21  8095		       d0 e3		      bne	.loopResync
     86  8097
     87  8097		       a5 ec		      lda	selector
     88  8099		       f0 0c		      beq	RestartFrameX
     89  809b
     90  809b		       a5 e6		      lda	targetDigit
     91  809d		       85 e2		      sta	digit
     92  809f		       a5 e8		      lda	targetDigit+2
     93  80a1		       85 e4		      sta	digit+2
     94  80a3		       a5 e7		      lda	targetDigit+1
     95  80a5		       85 e3		      sta	digit+1
     96  80a7
     97  80a7
     98  80a7				   RestartFrameX
     99  80a7		       a9 0e		      lda	#%1110	; VSYNC ON
    100  80a9		       85 42	   .loopVSync3 sta	WSYNC
    101  80ab		       85 40		      sta	VSYNC
    102  80ad		       4a		      lsr
    103  80ae		       d0 f9		      bne	.loopVSync3	; branch until VYSNC has been reset
    104  80b0
    105  80b0		       a6 80		      ldx	Platform
    106  80b2		       bd ba f3 	      lda	VBlankTime2x,x
    107  80b5		       8d 96 02 	      sta	TIM64T
    108  80b8
    109  80b8		       a9 02		      lda	#2
    110  80ba		       85 41		      sta	VBLANK
    111  80bc		       a2 25		      ldx	#37
    112  80be		       85 42	   toplines   sta	WSYNC
    113  80c0		       ca		      dex
    114  80c1		       d0 fb		      bne	toplines
    115  80c3		       86 41		      stx	VBLANK
    116  80c5
    117  80c5		       a9 00		      lda	#0
    118  80c7		       85 49		      sta	COLUBK
    119  80c9
    120  80c9		       ad 84 02    topsync    lda	INTIM
    121  80cc		       d0 fb		      bne	topsync
    122  80ce
    123  80ce							;		  ldx Platform
    124  80ce							;		  ldy VBlankTime2x,x
    125  80ce							;		  sty TIM64T
    126  80ce
    127  80ce		       a5 e4		      lda	digit+2	; hundreds
    128  80d0		       0a		      asl
    129  80d1		       aa		      tax
    130  80d2		       bd ee f3 	      lda	DIGITHUND,x
    131  80d5		       85 ea		      sta	digitHundreds
    132  80d7		       bd ef f3 	      lda	DIGITHUND+1,x
    133  80da		       85 eb		      sta	digitHundreds+1
    134  80dc
    135  80dc		       a5 e3		      lda	digit+1	; tens
    136  80de		       0a		      asl
    137  80df		       aa		      tax
    138  80e0		       bd c6 f3 	      lda	LDIGIT,x
    139  80e3		       85 dc		      sta	digit1
    140  80e5		       bd c7 f3 	      lda	LDIGIT+1,x
    141  80e8		       85 dd		      sta	digit1+1
    142  80ea
    143  80ea		       a5 e2		      lda	digit	; units
    144  80ec		       0a		      asl
    145  80ed		       aa		      tax
    146  80ee		       bd da f3 	      lda	RDIGIT,x
    147  80f1		       85 de		      sta	digit2
    148  80f3		       bd db f3 	      lda	RDIGIT+1,x
    149  80f6		       85 df		      sta	digit2+1
    150  80f8
    151  80f8
    152  80f8
    153  80f8							;------------------------------------------------------------------
    154  80f8
    155  80f8
    156  80f8							;VerticalBlankX;
    157  80f8							;		  lda INTIM
    158  80f8							;		  bne VerticalBlankX
    159  80f8
    160  80f8
    161  80f8		       a9 00		      lda	#0
    162  80fa		       85 4d		      sta	PF0
    163  80fc		       85 4e		      sta	PF1
    164  80fe		       85 4f		      sta	PF2
    165  8100		       85 49		      sta	COLUBK
    166  8102
    167  8102							; position the sprites for the box walls
    168  8102
    169  8102		       85 42		      sta	WSYNC
    170  8104
      0  8104					      SLEEP	17
      1  8104				   .CYCLES    SET	17
      2  8104
      3  8104				  -	      IF	.CYCLES < 2
      4  8104				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  8104				  -	      ERR
      6  8104					      ENDIF
      7  8104
      8  8104					      IF	.CYCLES & 1
      9  8104					      IFNCONST	NO_ILLEGAL_OPCODES
     10  8104		       04 00		      nop	0
     11  8106				  -	      ELSE
     12  8106				  -	      bit	VSYNC
     13  8106					      ENDIF
     14  8106				   .CYCLES    SET	.CYCLES - 3
     15  8106					      ENDIF
     16  8106
     17  8106					      REPEAT	.CYCLES / 2
     18  8106		       ea		      nop
     17  8106					      REPEND
     18  8107		       ea		      nop
     17  8107					      REPEND
     18  8108		       ea		      nop
     17  8108					      REPEND
     18  8109		       ea		      nop
     17  8109					      REPEND
     18  810a		       ea		      nop
     17  810a					      REPEND
     18  810b		       ea		      nop
     17  810b					      REPEND
     18  810c		       ea		      nop
     19  810d					      REPEND
    172  810d		       85 50		      sta	RESP0
    173  810f
      0  810f					      SLEEP	37
      1  810f				   .CYCLES    SET	37
      2  810f
      3  810f				  -	      IF	.CYCLES < 2
      4  810f				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  810f				  -	      ERR
      6  810f					      ENDIF
      7  810f
      8  810f					      IF	.CYCLES & 1
      9  810f					      IFNCONST	NO_ILLEGAL_OPCODES
     10  810f		       04 00		      nop	0
     11  8111				  -	      ELSE
     12  8111				  -	      bit	VSYNC
     13  8111					      ENDIF
     14  8111				   .CYCLES    SET	.CYCLES - 3
     15  8111					      ENDIF
     16  8111
     17  8111					      REPEAT	.CYCLES / 2
     18  8111		       ea		      nop
     17  8111					      REPEND
     18  8112		       ea		      nop
     17  8112					      REPEND
     18  8113		       ea		      nop
     17  8113					      REPEND
     18  8114		       ea		      nop
     17  8114					      REPEND
     18  8115		       ea		      nop
     17  8115					      REPEND
     18  8116		       ea		      nop
     17  8116					      REPEND
     18  8117		       ea		      nop
     17  8117					      REPEND
     18  8118		       ea		      nop
     17  8118					      REPEND
     18  8119		       ea		      nop
     17  8119					      REPEND
     18  811a		       ea		      nop
     17  811a					      REPEND
     18  811b		       ea		      nop
     17  811b					      REPEND
     18  811c		       ea		      nop
     17  811c					      REPEND
     18  811d		       ea		      nop
     17  811d					      REPEND
     18  811e		       ea		      nop
     17  811e					      REPEND
     18  811f		       ea		      nop
     17  811f					      REPEND
     18  8120		       ea		      nop
     17  8120					      REPEND
     18  8121		       ea		      nop
     19  8122					      REPEND
    175  8122		       85 51		      sta	RESP1
    176  8124
    177  8124		       85 42		      sta	WSYNC
    178  8126		       85 6a		      sta	HMOVE
    179  8128
    180  8128
    181  8128							;===================================================================================================
    182  8128
    183  8128							; now a top for the 'box'
    184  8128
    185  8128		       a9 00		      lda	#0
    186  812a		       85 4d		      sta	PF0
    187  812c		       85 4e		      sta	PF1
    188  812e		       85 4f		      sta	PF2
    189  8130
    190  8130		       a0 11		      ldy	#TOPHAT-1
    191  8132		       85 42	   boxtop     sta	WSYNC	;@0
    192  8134
    193  8134		       98		      tya
    194  8135		       0a		      asl
    195  8136		       29 06		      and	#%110
    196  8138		       05 f0		      ora	wallColour
    197  813a		       85 48		      sta	COLUPF
    198  813c		       b9 02 f4 	      lda	lid0,y	;#%11100000
    199  813f		       85 4d		      sta	PF0
    200  8141		       b9 14 f4 	      lda	lid1,y	;#255
    201  8144							;nop
    202  8144		       85 4e		      sta	PF1
    203  8146		       b9 14 f4 	      lda	lid2,y	;#255
    204  8149							;nop
    205  8149		       85 4f		      sta	PF2	; 3 = 8 @ 19
    206  814b
    207  814b							; RHS
    208  814b		       b9 26 f4 	      lda	lid3,y	;#255
    209  814e							;nop
    210  814e		       85 4d		      sta	PF0	; 3 = 8 @ 27 OK	D7D6D5D4 <--- mirrored
    211  8150
      0  8150					      SLEEP	8
      1  8150				   .CYCLES    SET	8
      2  8150
      3  8150				  -	      IF	.CYCLES < 2
      4  8150				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  8150				  -	      ERR
      6  8150					      ENDIF
      7  8150
      8  8150				  -	      IF	.CYCLES & 1
      9  8150				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  8150				  -	      nop	0
     11  8150				  -	      ELSE
     12  8150				  -	      bit	VSYNC
     13  8150				  -	      ENDIF
     14  8150				  -.CYCLES    SET	.CYCLES - 3
     15  8150					      ENDIF
     16  8150
     17  8150					      REPEAT	.CYCLES / 2
     18  8150		       ea		      nop
     17  8150					      REPEND
     18  8151		       ea		      nop
     17  8151					      REPEND
     18  8152		       ea		      nop
     17  8152					      REPEND
     18  8153		       ea		      nop
     19  8154					      REPEND
    213  8154		       b9 26 f4 	      lda	lid4,y	;#255
    214  8157		       85 4e		      sta	PF1	; 3 @40		 NOT MIRRORED, D7D6D5D4 -->
    215  8159
    216  8159		       a9 00		      lda	#%00000000
    217  815b							;		  nop
    218  815b		       85 4f		      sta	PF2	; 3 = 8 @48
    219  815d
    220  815d		       a9 00		      lda	#0
    221  815f		       85 49		      sta	COLUBK
    222  8161
    223  8161
    224  8161		       88		      dey		; 2
    225  8162		       10 ce		      bpl	boxtop
    226  8164
    227  8164
    228  8164		       a9 00		      lda	#0
    229  8166		       85 4d		      sta	PF0
    230  8168		       85 4e		      sta	PF1
    231  816a		       85 4f		      sta	PF2
    232  816c							;		  sta GRP0
    233  816c							;		  sta GRP1
    234  816c
    235  816c		       a9 fc		      lda	#%11111100
    236  816e		       85 5b		      sta	GRP0
    237  8170		       a9 3f		      lda	#%00111111
    238  8172		       85 5c		      sta	GRP1
    239  8174
    240  8174
    241  8174		       85 42		      sta	WSYNC
    242  8176							;		  sta WSYNC
    243  8176							;		  sta WSYNC
    244  8176							;		  sta WSYNC
    245  8176							;		  sta WSYNC
    246  8176
    247  8176							;===================================================================================================
    248  8176
    249  8176		       a6 80		      ldx	Platform
    250  8178		       bd c2 f3 	      lda	colvecX,x
    251  817b		       aa		      tax
    252  817c
    253  817c							;------------------------------------------------------------------
    254  817c
    255  817c							; Do X scanlines of color-changing (our picture)
    256  817c
    257  817c
    258  817c		       a9 2a		      lda	#$2A	; 2
    259  817e		       85 48		      sta	COLUPF	; 3 = 5 @8
    260  8180
    261  8180		       a0 1f		      ldy	#BIGDIG_SIZE-1	; #lines in characters-1
    262  8182
    263  8182		       a2 00		      ldx	#0	; used as a generic "0" during the kernel
    264  8184		       85 42		      sta	WSYNC
    265  8186
    266  8186
    267  8186		       00 04	   DUPES      =	4
    268  8186				   LevelNumberDigits
    269  8186
    270  8186				   .LOOP      SET	0
    271  8186					      REPEAT	DUPES
    272  8186
    273  8186		       86 4d		      stx	PF0	; 3
    274  8188
    275  8188					      IF	.LOOP < DUPES-1
    276  8188		       b9 47 f3 	      lda	colbk,y	; 4
    277  818b		       65 f1		      adc	adjustColour	; 3
    278  818d		       85 48		      sta	COLUPF	; 3 = 10 @13
    279  818f				  -	      ELSE
    280  818f				  -	      lda	#0	;wallColour	      ; 3
    281  818f				  -	      sta	COLUPF	; 3 = 7
    282  818f				  -	      SLEEP	5	; 4 = 10 @13
    283  818f				  -
    284  818f					      ENDIF
    285  818f		       b1 ea		      lda	(digitHundreds),y	; 5
    286  8191		       85 4e		      sta	PF1	; 3 = 8 @21
    287  8193
    288  8193		       b1 dc		      lda	(digit1),y	; 5
    289  8195		       85 4f		      sta	PF2	; 3 = 8 @29
    290  8197
    291  8197							; RHS
    292  8197
    293  8197		       b1 de		      lda	(digit2),y	; 5
    294  8199		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    295  819b
    296  819b		       0a		      asl		; 2
    297  819c		       0a		      asl		; 2
    298  819d		       0a		      asl		; 2
    299  819e		       0a		      asl		; 2
    300  819f		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    301  81a1
    302  81a1		       b1 e0		      lda	(digitstar),y	; 5
    303  81a3		       85 4f		      sta	PF2	; 3 = 8 @56
    304  81a5
    305  81a5		       b1 ee		      lda	(manc),y	; 5
    306  81a7		       85 48		      sta	COLUPF	; 3 = 8 @64
    307  81a9
    308  81a9		       00 0c	   SPARE      =	12
    309  81a9
    310  81a9					      IF	.LOOP < DUPES-1
      0  81a9					      SLEEP	SPARE
      1  81a9				   .CYCLES    SET	SPARE
      2  81a9
      3  81a9				  -	      IF	.CYCLES < 2
      4  81a9				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  81a9				  -	      ERR
      6  81a9					      ENDIF
      7  81a9
      8  81a9				  -	      IF	.CYCLES & 1
      9  81a9				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  81a9				  -	      nop	0
     11  81a9				  -	      ELSE
     12  81a9				  -	      bit	VSYNC
     13  81a9				  -	      ENDIF
     14  81a9				  -.CYCLES    SET	.CYCLES - 3
     15  81a9					      ENDIF
     16  81a9
     17  81a9					      REPEAT	.CYCLES / 2
     18  81a9		       ea		      nop
     17  81a9					      REPEND
     18  81aa		       ea		      nop
     17  81aa					      REPEND
     18  81ab		       ea		      nop
     17  81ab					      REPEND
     18  81ac		       ea		      nop
     17  81ac					      REPEND
     18  81ad		       ea		      nop
     17  81ad					      REPEND
     18  81ae		       ea		      nop
     19  81af					      REPEND
    312  81af					      ENDIF
    313  81af
    314  81af				  -	      IF	.LOOP = DUPES-1
    315  81af				  -	      SLEEP	SPARE-7
    316  81af					      ENDIF
    317  81af
    318  81af
    319  81af				   .LOOP      SET	.LOOP + 1
    271  81af					      REPEND
    272  81af
    273  81af		       86 4d		      stx	PF0	; 3
    274  81b1
    275  81b1					      IF	.LOOP < DUPES-1
    276  81b1		       b9 47 f3 	      lda	colbk,y	; 4
    277  81b4		       65 f1		      adc	adjustColour	; 3
    278  81b6		       85 48		      sta	COLUPF	; 3 = 10 @13
    279  81b8				  -	      ELSE
    280  81b8				  -	      lda	#0	;wallColour	      ; 3
    281  81b8				  -	      sta	COLUPF	; 3 = 7
    282  81b8				  -	      SLEEP	5	; 4 = 10 @13
    283  81b8				  -
    284  81b8					      ENDIF
    285  81b8		       b1 ea		      lda	(digitHundreds),y	; 5
    286  81ba		       85 4e		      sta	PF1	; 3 = 8 @21
    287  81bc
    288  81bc		       b1 dc		      lda	(digit1),y	; 5
    289  81be		       85 4f		      sta	PF2	; 3 = 8 @29
    290  81c0
    291  81c0							; RHS
    292  81c0
    293  81c0		       b1 de		      lda	(digit2),y	; 5
    294  81c2		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    295  81c4
    296  81c4		       0a		      asl		; 2
    297  81c5		       0a		      asl		; 2
    298  81c6		       0a		      asl		; 2
    299  81c7		       0a		      asl		; 2
    300  81c8		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    301  81ca
    302  81ca		       b1 e0		      lda	(digitstar),y	; 5
    303  81cc		       85 4f		      sta	PF2	; 3 = 8 @56
    304  81ce
    305  81ce		       b1 ee		      lda	(manc),y	; 5
    306  81d0		       85 48		      sta	COLUPF	; 3 = 8 @64
    307  81d2
    308  81d2		       00 0c	   SPARE      =	12
    309  81d2
    310  81d2					      IF	.LOOP < DUPES-1
      0  81d2					      SLEEP	SPARE
      1  81d2				   .CYCLES    SET	SPARE
      2  81d2
      3  81d2				  -	      IF	.CYCLES < 2
      4  81d2				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  81d2				  -	      ERR
      6  81d2					      ENDIF
      7  81d2
      8  81d2				  -	      IF	.CYCLES & 1
      9  81d2				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  81d2				  -	      nop	0
     11  81d2				  -	      ELSE
     12  81d2				  -	      bit	VSYNC
     13  81d2				  -	      ENDIF
     14  81d2				  -.CYCLES    SET	.CYCLES - 3
     15  81d2					      ENDIF
     16  81d2
     17  81d2					      REPEAT	.CYCLES / 2
     18  81d2		       ea		      nop
     17  81d2					      REPEND
     18  81d3		       ea		      nop
     17  81d3					      REPEND
     18  81d4		       ea		      nop
     17  81d4					      REPEND
     18  81d5		       ea		      nop
     17  81d5					      REPEND
     18  81d6		       ea		      nop
     17  81d6					      REPEND
     18  81d7		       ea		      nop
     19  81d8					      REPEND
    312  81d8					      ENDIF
    313  81d8
    314  81d8				  -	      IF	.LOOP = DUPES-1
    315  81d8				  -	      SLEEP	SPARE-7
    316  81d8					      ENDIF
    317  81d8
    318  81d8
    319  81d8				   .LOOP      SET	.LOOP + 1
    271  81d8					      REPEND
    272  81d8
    273  81d8		       86 4d		      stx	PF0	; 3
    274  81da
    275  81da					      IF	.LOOP < DUPES-1
    276  81da		       b9 47 f3 	      lda	colbk,y	; 4
    277  81dd		       65 f1		      adc	adjustColour	; 3
    278  81df		       85 48		      sta	COLUPF	; 3 = 10 @13
    279  81e1				  -	      ELSE
    280  81e1				  -	      lda	#0	;wallColour	      ; 3
    281  81e1				  -	      sta	COLUPF	; 3 = 7
    282  81e1				  -	      SLEEP	5	; 4 = 10 @13
    283  81e1				  -
    284  81e1					      ENDIF
    285  81e1		       b1 ea		      lda	(digitHundreds),y	; 5
    286  81e3		       85 4e		      sta	PF1	; 3 = 8 @21
    287  81e5
    288  81e5		       b1 dc		      lda	(digit1),y	; 5
    289  81e7		       85 4f		      sta	PF2	; 3 = 8 @29
    290  81e9
    291  81e9							; RHS
    292  81e9
    293  81e9		       b1 de		      lda	(digit2),y	; 5
    294  81eb		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    295  81ed
    296  81ed		       0a		      asl		; 2
    297  81ee		       0a		      asl		; 2
    298  81ef		       0a		      asl		; 2
    299  81f0		       0a		      asl		; 2
    300  81f1		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    301  81f3
    302  81f3		       b1 e0		      lda	(digitstar),y	; 5
    303  81f5		       85 4f		      sta	PF2	; 3 = 8 @56
    304  81f7
    305  81f7		       b1 ee		      lda	(manc),y	; 5
    306  81f9		       85 48		      sta	COLUPF	; 3 = 8 @64
    307  81fb
    308  81fb		       00 0c	   SPARE      =	12
    309  81fb
    310  81fb					      IF	.LOOP < DUPES-1
      0  81fb					      SLEEP	SPARE
      1  81fb				   .CYCLES    SET	SPARE
      2  81fb
      3  81fb				  -	      IF	.CYCLES < 2
      4  81fb				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  81fb				  -	      ERR
      6  81fb					      ENDIF
      7  81fb
      8  81fb				  -	      IF	.CYCLES & 1
      9  81fb				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  81fb				  -	      nop	0
     11  81fb				  -	      ELSE
     12  81fb				  -	      bit	VSYNC
     13  81fb				  -	      ENDIF
     14  81fb				  -.CYCLES    SET	.CYCLES - 3
     15  81fb					      ENDIF
     16  81fb
     17  81fb					      REPEAT	.CYCLES / 2
     18  81fb		       ea		      nop
     17  81fb					      REPEND
     18  81fc		       ea		      nop
     17  81fc					      REPEND
     18  81fd		       ea		      nop
     17  81fd					      REPEND
     18  81fe		       ea		      nop
     17  81fe					      REPEND
     18  81ff		       ea		      nop
     17  81ff					      REPEND
     18  8200		       ea		      nop
     19  8201					      REPEND
    312  8201					      ENDIF
    313  8201
    314  8201				  -	      IF	.LOOP = DUPES-1
    315  8201				  -	      SLEEP	SPARE-7
    316  8201					      ENDIF
    317  8201
    318  8201
    319  8201				   .LOOP      SET	.LOOP + 1
    271  8201					      REPEND
    272  8201
    273  8201		       86 4d		      stx	PF0	; 3
    274  8203
    275  8203				  -	      IF	.LOOP < DUPES-1
    276  8203				  -	      lda	colbk,y	; 4
    277  8203				  -	      adc	adjustColour	; 3
    278  8203				  -	      sta	COLUPF	; 3 = 10 @13
    279  8203					      ELSE
    280  8203		       a9 00		      lda	#0	;wallColour	      ; 3
    281  8205		       85 48		      sta	COLUPF	; 3 = 7
      0  8207					      SLEEP	5	; 4 = 10 @13
      1  8207				   .CYCLES    SET	5
      2  8207
      3  8207				  -	      IF	.CYCLES < 2
      4  8207				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  8207				  -	      ERR
      6  8207					      ENDIF
      7  8207
      8  8207					      IF	.CYCLES & 1
      9  8207					      IFNCONST	NO_ILLEGAL_OPCODES
     10  8207		       04 00		      nop	0
     11  8209				  -	      ELSE
     12  8209				  -	      bit	VSYNC
     13  8209					      ENDIF
     14  8209				   .CYCLES    SET	.CYCLES - 3
     15  8209					      ENDIF
     16  8209
     17  8209					      REPEAT	.CYCLES / 2
     18  8209		       ea		      nop
     19  820a					      REPEND
    283  820a
    284  820a					      ENDIF
    285  820a		       b1 ea		      lda	(digitHundreds),y	; 5
    286  820c		       85 4e		      sta	PF1	; 3 = 8 @21
    287  820e
    288  820e		       b1 dc		      lda	(digit1),y	; 5
    289  8210		       85 4f		      sta	PF2	; 3 = 8 @29
    290  8212
    291  8212							; RHS
    292  8212
    293  8212		       b1 de		      lda	(digit2),y	; 5
    294  8214		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    295  8216
    296  8216		       0a		      asl		; 2
    297  8217		       0a		      asl		; 2
    298  8218		       0a		      asl		; 2
    299  8219		       0a		      asl		; 2
    300  821a		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    301  821c
    302  821c		       b1 e0		      lda	(digitstar),y	; 5
    303  821e		       85 4f		      sta	PF2	; 3 = 8 @56
    304  8220
    305  8220		       b1 ee		      lda	(manc),y	; 5
    306  8222		       85 48		      sta	COLUPF	; 3 = 8 @64
    307  8224
    308  8224		       00 0c	   SPARE      =	12
    309  8224
    310  8224				  -	      IF	.LOOP < DUPES-1
    311  8224				  -	      SLEEP	SPARE
    312  8224					      ENDIF
    313  8224
    314  8224					      IF	.LOOP = DUPES-1
      0  8224					      SLEEP	SPARE-7
      1  8224				   .CYCLES    SET	SPARE-7
      2  8224
      3  8224				  -	      IF	.CYCLES < 2
      4  8224				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  8224				  -	      ERR
      6  8224					      ENDIF
      7  8224
      8  8224					      IF	.CYCLES & 1
      9  8224					      IFNCONST	NO_ILLEGAL_OPCODES
     10  8224		       04 00		      nop	0
     11  8226				  -	      ELSE
     12  8226				  -	      bit	VSYNC
     13  8226					      ENDIF
     14  8226				   .CYCLES    SET	.CYCLES - 3
     15  8226					      ENDIF
     16  8226
     17  8226					      REPEAT	.CYCLES / 2
     18  8226		       ea		      nop
     19  8227					      REPEND
    316  8227					      ENDIF
    317  8227
    318  8227
    319  8227				   .LOOP      SET	.LOOP + 1
    320  8227					      REPEND
    321  8227		       88		      dey		; 2
    322  8228		       30 03		      bmi	ess	; 2/3
    323  822a		       4c 86 f1 	      jmp	LevelNumberDigits	; 3 = 7 mostly @ 71
    324  822d
    325  822d
    326  822d				   ess
    327  822d
    328  822d							;		  sta WSYNC
    329  822d
    330  822d
    331  822d							; now a bottom for the 'box'
    332  822d
    333  822d		       a9 00		      lda	#0
    334  822f		       85 4d		      sta	PF0
    335  8231		       85 4e		      sta	PF1
    336  8233		       85 4f		      sta	PF2
    337  8235
    338  8235		       a5 f0		      lda	wallColour
    339  8237		       85 48		      sta	COLUPF
    340  8239
    341  8239		       a0 08		      ldy	#8
    342  823b		       85 42	   boxbottom  sta	WSYNC	;@0
    343  823d		       b9 38 f4 	      lda	lidb0,y	;#%11100000
    344  8240		       29 c0		      and	#%11000000
    345  8242		       85 4d		      sta	PF0
    346  8244		       b9 38 f4 	      lda	lidb1,y	;#255
    347  8247		       85 4e		      sta	PF1
    348  8249		       b9 38 f4 	      lda	lidb2,y	;#255
    349  824c		       85 4f		      sta	PF2	; 3 = 8 @ 19
    350  824e
    351  824e							; RHS
    352  824e		       b9 38 f4 	      lda	lidb3,y
    353  8251		       85 4d		      sta	PF0	; 3 = 8 @ 27 OK	D7D6D5D4 <--- mirrored
    354  8253
      0  8253					      SLEEP	8
      1  8253				   .CYCLES    SET	8
      2  8253
      3  8253				  -	      IF	.CYCLES < 2
      4  8253				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  8253				  -	      ERR
      6  8253					      ENDIF
      7  8253
      8  8253				  -	      IF	.CYCLES & 1
      9  8253				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  8253				  -	      nop	0
     11  8253				  -	      ELSE
     12  8253				  -	      bit	VSYNC
     13  8253				  -	      ENDIF
     14  8253				  -.CYCLES    SET	.CYCLES - 3
     15  8253					      ENDIF
     16  8253
     17  8253					      REPEAT	.CYCLES / 2
     18  8253		       ea		      nop
     17  8253					      REPEND
     18  8254		       ea		      nop
     17  8254					      REPEND
     18  8255		       ea		      nop
     17  8255					      REPEND
     18  8256		       ea		      nop
     19  8257					      REPEND
    356  8257		       b9 38 f4 	      lda	lidb4,y
    357  825a		       85 4e		      sta	PF1	; 3 @40		 NOT MIRRORED, D7D6D5D4 -->
    358  825c
    359  825c		       a9 00		      lda	#%00000000
    360  825e							;		  nop
    361  825e		       85 4f		      sta	PF2	; 3 = 8 @48
    362  8260
    363  8260		       a9 06		      lda	#6
    364  8262		       85 49		      sta	COLUBK
    365  8264
    366  8264
    367  8264		       88		      dey		; 2
    368  8265		       10 d4		      bpl	boxbottom
    369  8267
    370  8267
    371  8267		       a9 00		      lda	#0
    372  8269		       85 4d		      sta	PF0
    373  826b		       85 4e		      sta	PF1
    374  826d		       85 4f		      sta	PF2
    375  826f		       85 5b		      sta	GRP0
    376  8271		       85 5c		      sta	GRP1
    377  8273
    378  8273		       a4 80		      ldy	Platform
    379  8275		       b9 be f3 	      lda	OverscanTime2X,y
    380  8278		       8d 96 02 	      sta	TIM64T
    381  827b
    382  827b		       85 42		      sta	WSYNC
    383  827d
    384  827d							;--------------------------------------------------------------------------
    385  827d
    386  827d		       c6 e5		      dec	digitick
    387  827f		       10 59		      bpl	donedig
    388  8281		       a9 07		      lda	#7
    389  8283		       85 e5		      sta	digitick
    390  8285
    391  8285		       a2 02		      ldx	#2
    392  8287		       b5 e2	   scanner    lda	digit,x
    393  8289		       d5 e6		      cmp	targetDigit,x
    394  828b		       f0 0e		      beq	scanOK
    395  828d
    396  828d		       f8		      sed
    397  828e		       69 01		      adc	#1
    398  8290		       29 0f		      and	#$F
    399  8292		       95 e2		      sta	digit,x
    400  8294		       d8		      cld
    401  8295
    402  8295		       a9 64		      lda	#100
    403  8297		       85 e9		      sta	endwait
    404  8299		       d0 3f		      bne	donedig
    405  829b
    406  829b		       ca	   scanOK     dex
    407  829c		       10 e9		      bpl	scanner
    408  829e
    409  829e		       a5 ec		      lda	selector
    410  82a0		       f0 38		      beq	donedig	; don't allow joystick selection
    411  82a2
    412  82a2		       a9 ff		      lda	#-1
    413  82a4		       85 e6		      sta	targetDigit
    414  82a6		       85 e7		      sta	targetDigit+1
    415  82a8		       85 e8		      sta	targetDigit+2
    416  82aa
    417  82aa		       ad 80 02 	      lda	SWCHA
    418  82ad		       4a		      lsr
    419  82ae		       4a		      lsr
    420  82af		       4a		      lsr
    421  82b0		       4a		      lsr
    422  82b1		       aa		      tax
    423  82b2
    424  82b2		       bd aa f3 	      lda	xJoyMoveX,x
    425  82b5		       f0 03		      beq	adjustLevelNum
    426  82b7
    427  82b7							; level is changing, so animate the man too
    428  82b7
    429  82b7		       20 1d f3 	      jsr	fixWalkFrame
    430  82ba
    431  82ba
    432  82ba		       18	   adjustLevelNum clc
    433  82bb		       a5 b2		      lda	levelX
    434  82bd		       7d aa f3 	      adc	xJoyMoveX,x
    435  82c0		       c9 ff		      cmp	#255
    436  82c2		       d0 02		      bne	nml1
    437  82c4		       a9 f9		      lda	#MAX_LEVEL-1
    438  82c6		       c9 fa	   nml1       cmp	#MAX_LEVEL
    439  82c8		       d0 02		      bne	nml2
    440  82ca		       a9 00		      lda	#0
    441  82cc		       85 b2	   nml2       sta	levelX
    442  82ce
    443  82ce		       20 04 f3 	      jsr	dd3
    444  82d1
    445  82d1		       a2 02		      ldx	#2
    446  82d3		       b5 e6	   zapper     lda	targetDigit,x
    447  82d5		       95 e2		      sta	digit,x
    448  82d7		       ca		      dex
    449  82d8		       10 f9		      bpl	zapper
    450  82da
    451  82da				   donedig
    452  82da
      0  82da					      NEXT_RANDOM
      1  82da
      2  82da		       a5 c8		      lda	rnd
      3  82dc		       4a		      lsr
      4  82dd					      IFCONST	rndHi
      5  82dd		       66 c7		      ror	rndHi
      6  82df					      ENDIF
      7  82df		       90 02		      bcc	.skipEOR
      8  82e1		       49 b4		      eor	#RND_EOR_VAL
      9  82e3				   .skipEOR
     10  82e3		       85 c8		      sta	rnd
    454  82e5
    455  82e5		       ad 84 02    oscanX     lda	INTIM
    456  82e8		       d0 fb		      bne	oscanX
    457  82ea
    458  82ea		       85 49		      sta	COLUBK
    459  82ec		       a9 42		      lda	#%01000010	; bit6 is not required
    460  82ee		       85 41		      sta	VBLANK	; end of screen - enter blanking
    461  82f0
    462  82f0		       a9 00		      lda	#0
    463  82f2		       85 40		      sta	VSYNC
    464  82f4
    465  82f4
    466  82f4		       a5 ec		      lda	selector
    467  82f6		       d0 04		      bne	waitbutton
    468  82f8		       c6 e9		      dec	endwait
    469  82fa		       f0 07		      beq	retX
    470  82fc
    471  82fc		       a5 4c	   waitbutton lda	INPT4
    472  82fe		       10 03		      bpl	retX
    473  8300
    474  8300		       4c a7 f0 	      jmp	RestartFrameX
    475  8303
    476  8303		       60	   retX       rts
    477  8304
    478  8304
    479  8304
    480  8304				   dd3
    481  8304		       18		      clc
    482  8305		       a5 b2		      lda	levelX
    483  8307		       69 01		      adc	#1
    484  8309		       38		      sec
    485  830a		       e9 64	   m100       sbc	#100
    486  830c		       e6 e8		      inc	targetDigit+2
    487  830e		       b0 fa		      bcs	m100
    488  8310		       69 64		      adc	#100
    489  8312		       e9 0a	   m10	      sbc	#10
    490  8314		       e6 e7		      inc	targetDigit+1
    491  8316		       b0 fa		      bcs	m10
    492  8318		       69 0a		      adc	#10
    493  831a		       85 e6		      sta	targetDigit
    494  831c
    495  831c
    496  831c							; leading zero removal
    497  831c							;lda targetDigit+2
    498  831c							;bne hunds
    499  831c							;lda #10
    500  831c							;sta targetDigit+2
    501  831c							;sta digit+2		  ; hide hundreds if 0
    502  831c				   hunds
    503  831c
    504  831c		       60		      rts
    505  831d
    506  831d
      0  831d					      DEFINE_SUBROUTINE	fixWalkFrame
      1  831d		       00 10	   BANK_fixWalkFrame =	_CURRENT_BANK
      2  831d					      SUBROUTINE
      3  831d				   fixWalkFrame
    508  831d
    509  831d
    510  831d		       a5 ec		      lda	selector
    511  831f		       f0 10		      beq	walk0
    512  8321
    513  8321		       18		      clc
    514  8322		       a5 ed		      lda	walkSpeed
    515  8324		       69 04		      adc	#4
    516  8326		       85 ed		      sta	walkSpeed
    517  8328
    518  8328		       4a		      lsr
    519  8329		       4a		      lsr
    520  832a		       29 03		      and	#%11
    521  832c		       a8		      tay
    522  832d		       b9 67 f3 	      lda	walkOrder,y
    523  8330		       0a		      asl
    524  8331		       a8	   walk0      tay
    525  8332		       b9 6b f3 	      lda	walkFrame,y
    526  8335		       85 e0		      sta	digitstar
    527  8337		       b9 6c f3 	      lda	walkFrame+1,y
    528  833a		       85 e1		      sta	digitstar+1
    529  833c
    530  833c
    531  833c		       b9 73 f3 	      lda	walkColour,y
    532  833f		       85 ee		      sta	manc
    533  8341		       b9 74 f3 	      lda	walkColour+1,y
    534  8344		       85 ef		      sta	manc+1
    535  8346		       60		      rts
    536  8347
    537  8347
    538  8347
      0  8347					      OPTIONAL_PAGEBREAK	"colbk @levelScreen.asm", BIGDIG_SIZE
     10  8347					      LIST	ON
    540  8347
    541  8347				   colbk		; hardwired for 32 - will need manual changing
    542  8347
    543  8347				   .CRK       SET	256*$B2
    544  8347				   .CGK       SET	256*$B2
    545  8347				   .CBK       SET	256*$B2
    546  8347
    547  8347					      REPEAT	10
    548  8347		       b2		      .byte.b	.CRK/256
    549  8348		       b2		      .byte.b	.CBK/256
    550  8349		       b2		      .byte.b	.CGK/256
    551  834a
    552  834a				   .CRK       SET	.CRK + 280	;135
    553  834a				   .CGK       SET	.CGK + 280	;135
    554  834a				   .CBK       SET	.CBK + 280	;135
    547  834a					      REPEND
    548  834a		       b3		      .byte.b	.CRK/256
    549  834b		       b3		      .byte.b	.CBK/256
    550  834c		       b3		      .byte.b	.CGK/256
    551  834d
    552  834d				   .CRK       SET	.CRK + 280	;135
    553  834d				   .CGK       SET	.CGK + 280	;135
    554  834d				   .CBK       SET	.CBK + 280	;135
    547  834d					      REPEND
    548  834d		       b4		      .byte.b	.CRK/256
    549  834e		       b4		      .byte.b	.CBK/256
    550  834f		       b4		      .byte.b	.CGK/256
    551  8350
    552  8350				   .CRK       SET	.CRK + 280	;135
    553  8350				   .CGK       SET	.CGK + 280	;135
    554  8350				   .CBK       SET	.CBK + 280	;135
    547  8350					      REPEND
    548  8350		       b5		      .byte.b	.CRK/256
    549  8351		       b5		      .byte.b	.CBK/256
    550  8352		       b5		      .byte.b	.CGK/256
    551  8353
    552  8353				   .CRK       SET	.CRK + 280	;135
    553  8353				   .CGK       SET	.CGK + 280	;135
    554  8353				   .CBK       SET	.CBK + 280	;135
    547  8353					      REPEND
    548  8353		       b6		      .byte.b	.CRK/256
    549  8354		       b6		      .byte.b	.CBK/256
    550  8355		       b6		      .byte.b	.CGK/256
    551  8356
    552  8356				   .CRK       SET	.CRK + 280	;135
    553  8356				   .CGK       SET	.CGK + 280	;135
    554  8356				   .CBK       SET	.CBK + 280	;135
    547  8356					      REPEND
    548  8356		       b7		      .byte.b	.CRK/256
    549  8357		       b7		      .byte.b	.CBK/256
    550  8358		       b7		      .byte.b	.CGK/256
    551  8359
    552  8359				   .CRK       SET	.CRK + 280	;135
    553  8359				   .CGK       SET	.CGK + 280	;135
    554  8359				   .CBK       SET	.CBK + 280	;135
    547  8359					      REPEND
    548  8359		       b8		      .byte.b	.CRK/256
    549  835a		       b8		      .byte.b	.CBK/256
    550  835b		       b8		      .byte.b	.CGK/256
    551  835c
    552  835c				   .CRK       SET	.CRK + 280	;135
    553  835c				   .CGK       SET	.CGK + 280	;135
    554  835c				   .CBK       SET	.CBK + 280	;135
    547  835c					      REPEND
    548  835c		       b9		      .byte.b	.CRK/256
    549  835d		       b9		      .byte.b	.CBK/256
    550  835e		       b9		      .byte.b	.CGK/256
    551  835f
    552  835f				   .CRK       SET	.CRK + 280	;135
    553  835f				   .CGK       SET	.CGK + 280	;135
    554  835f				   .CBK       SET	.CBK + 280	;135
    547  835f					      REPEND
    548  835f		       ba		      .byte.b	.CRK/256
    549  8360		       ba		      .byte.b	.CBK/256
    550  8361		       ba		      .byte.b	.CGK/256
    551  8362
    552  8362				   .CRK       SET	.CRK + 280	;135
    553  8362				   .CGK       SET	.CGK + 280	;135
    554  8362				   .CBK       SET	.CBK + 280	;135
    547  8362					      REPEND
    548  8362		       bb		      .byte.b	.CRK/256
    549  8363		       bb		      .byte.b	.CBK/256
    550  8364		       bb		      .byte.b	.CGK/256
    551  8365
    552  8365				   .CRK       SET	.CRK + 280	;135
    553  8365				   .CGK       SET	.CGK + 280	;135
    554  8365				   .CBK       SET	.CBK + 280	;135
    555  8365					      REPEND
    556  8365		       bc		      .byte.b	.CRK/256
    557  8366		       bc		      .byte.b	.CBK/256
    558  8367
      0  8367					      CHECKPAGEX	colbk, "WARNING: colbk crosses page @levelScreen.asm"
      9  8367					      LIST	ON
    560  8367
    561  8367
    562  8367
    563  8367		       01 02 03 02 walkOrder  .byte.b	1,2,3,2
    564  836b				   walkFrame
    565  836b		       80 f7		      .word.w	LEFT_star0
    566  836d		       a0 f7		      .word.w	LEFT_star1
    567  836f		       c0 f7		      .word.w	LEFT_star2
    568  8371		       e0 f7		      .word.w	LEFT_star3
    569  8373
    570  8373				   walkColour
    571  8373		       92 f3		      .word.w	mancolourPAL2
    572  8375		       7b f3		      .word.w	mancolourPAL
    573  8377		       92 f3		      .word.w	mancolourPAL2
    574  8379		       7b f3		      .word.w	mancolourPAL
    575  837b
    576  837b
    577  837b				   mancolourPAL
    578  837b							; NTSC_TO_PAL $10, 4
      0  837b					      NTSC_TO_PAL	$10, 4
      1  837b				  -	      IF	$10 = 0
      2  837b				  -	      .byte	$10+4
      3  837b					      ENDIF
      4  837b					      IF	$10 = $10
      5  837b		       24		      .byte.b	$20+4
      6  837c					      ENDIF
      7  837c				  -	      IF	$10 = $20
      8  837c				  -	      .byte	$40+4
      9  837c					      ENDIF
     10  837c				  -	      IF	$10 = $30
     11  837c				  -	      .byte	$40+4
     12  837c					      ENDIF
     13  837c				  -	      IF	$10 = $40
     14  837c				  -	      .byte	$60+4
     15  837c					      ENDIF
     16  837c				  -	      IF	$10 = $50
     17  837c				  -	      .byte	$80+4
     18  837c					      ENDIF
     19  837c				  -	      IF	$10 = $60
     20  837c				  -	      .byte	$C0+4
     21  837c					      ENDIF
     22  837c				  -	      IF	$10 = $70
     23  837c				  -	      .byte	$D0+4
     24  837c					      ENDIF
     25  837c				  -	      IF	$10 = $80
     26  837c				  -	      .byte	$B0+4
     27  837c					      ENDIF
     28  837c				  -	      IF	$10 = $90
     29  837c				  -	      .byte	$90+4
     30  837c					      ENDIF
     31  837c				  -	      IF	$10 = $A0
     32  837c				  -	      .byte	$70+4
     33  837c					      ENDIF
     34  837c				  -	      IF	$10 = $B0
     35  837c				  -	      .byte	$50+4
     36  837c					      ENDIF
     37  837c				  -	      IF	$10 = $C0
     38  837c				  -	      .byte	$30+4
     39  837c					      ENDIF
     40  837c				  -	      IF	$10 = $D0
     41  837c				  -	      .byte	$30+4
     42  837c					      ENDIF
     43  837c				  -	      IF	$10 = $E0
     44  837c				  -	      .byte	$20+4
     45  837c					      ENDIF
     46  837c				  -	      IF	$10 = $F0
     47  837c				  -	      .byte	$40+4
     48  837c					      ENDIF
      0  837c					      NTSC_TO_PAL	$10, 4
      1  837c				  -	      IF	$10 = 0
      2  837c				  -	      .byte	$10+4
      3  837c					      ENDIF
      4  837c					      IF	$10 = $10
      5  837c		       24		      .byte.b	$20+4
      6  837d					      ENDIF
      7  837d				  -	      IF	$10 = $20
      8  837d				  -	      .byte	$40+4
      9  837d					      ENDIF
     10  837d				  -	      IF	$10 = $30
     11  837d				  -	      .byte	$40+4
     12  837d					      ENDIF
     13  837d				  -	      IF	$10 = $40
     14  837d				  -	      .byte	$60+4
     15  837d					      ENDIF
     16  837d				  -	      IF	$10 = $50
     17  837d				  -	      .byte	$80+4
     18  837d					      ENDIF
     19  837d				  -	      IF	$10 = $60
     20  837d				  -	      .byte	$C0+4
     21  837d					      ENDIF
     22  837d				  -	      IF	$10 = $70
     23  837d				  -	      .byte	$D0+4
     24  837d					      ENDIF
     25  837d				  -	      IF	$10 = $80
     26  837d				  -	      .byte	$B0+4
     27  837d					      ENDIF
     28  837d				  -	      IF	$10 = $90
     29  837d				  -	      .byte	$90+4
     30  837d					      ENDIF
     31  837d				  -	      IF	$10 = $A0
     32  837d				  -	      .byte	$70+4
     33  837d					      ENDIF
     34  837d				  -	      IF	$10 = $B0
     35  837d				  -	      .byte	$50+4
     36  837d					      ENDIF
     37  837d				  -	      IF	$10 = $C0
     38  837d				  -	      .byte	$30+4
     39  837d					      ENDIF
     40  837d				  -	      IF	$10 = $D0
     41  837d				  -	      .byte	$30+4
     42  837d					      ENDIF
     43  837d				  -	      IF	$10 = $E0
     44  837d				  -	      .byte	$20+4
     45  837d					      ENDIF
     46  837d				  -	      IF	$10 = $F0
     47  837d				  -	      .byte	$40+4
     48  837d					      ENDIF
      0  837d					      NTSC_TO_PAL	$90, 4
      1  837d				  -	      IF	$90 = 0
      2  837d				  -	      .byte	$90+4
      3  837d					      ENDIF
      4  837d				  -	      IF	$90 = $10
      5  837d				  -	      .byte	$20+4
      6  837d					      ENDIF
      7  837d				  -	      IF	$90 = $20
      8  837d				  -	      .byte	$40+4
      9  837d					      ENDIF
     10  837d				  -	      IF	$90 = $30
     11  837d				  -	      .byte	$40+4
     12  837d					      ENDIF
     13  837d				  -	      IF	$90 = $40
     14  837d				  -	      .byte	$60+4
     15  837d					      ENDIF
     16  837d				  -	      IF	$90 = $50
     17  837d				  -	      .byte	$80+4
     18  837d					      ENDIF
     19  837d				  -	      IF	$90 = $60
     20  837d				  -	      .byte	$C0+4
     21  837d					      ENDIF
     22  837d				  -	      IF	$90 = $70
     23  837d				  -	      .byte	$D0+4
     24  837d					      ENDIF
     25  837d				  -	      IF	$90 = $80
     26  837d				  -	      .byte	$B0+4
     27  837d					      ENDIF
     28  837d					      IF	$90 = $90
     29  837d		       94		      .byte.b	$90+4
     30  837e					      ENDIF
     31  837e				  -	      IF	$90 = $A0
     32  837e				  -	      .byte	$70+4
     33  837e					      ENDIF
     34  837e				  -	      IF	$90 = $B0
     35  837e				  -	      .byte	$50+4
     36  837e					      ENDIF
     37  837e				  -	      IF	$90 = $C0
     38  837e				  -	      .byte	$30+4
     39  837e					      ENDIF
     40  837e				  -	      IF	$90 = $D0
     41  837e				  -	      .byte	$30+4
     42  837e					      ENDIF
     43  837e				  -	      IF	$90 = $E0
     44  837e				  -	      .byte	$20+4
     45  837e					      ENDIF
     46  837e				  -	      IF	$90 = $F0
     47  837e				  -	      .byte	$40+4
     48  837e					      ENDIF
      0  837e					      NTSC_TO_PAL	$90, 4
      1  837e				  -	      IF	$90 = 0
      2  837e				  -	      .byte	$90+4
      3  837e					      ENDIF
      4  837e				  -	      IF	$90 = $10
      5  837e				  -	      .byte	$20+4
      6  837e					      ENDIF
      7  837e				  -	      IF	$90 = $20
      8  837e				  -	      .byte	$40+4
      9  837e					      ENDIF
     10  837e				  -	      IF	$90 = $30
     11  837e				  -	      .byte	$40+4
     12  837e					      ENDIF
     13  837e				  -	      IF	$90 = $40
     14  837e				  -	      .byte	$60+4
     15  837e					      ENDIF
     16  837e				  -	      IF	$90 = $50
     17  837e				  -	      .byte	$80+4
     18  837e					      ENDIF
     19  837e				  -	      IF	$90 = $60
     20  837e				  -	      .byte	$C0+4
     21  837e					      ENDIF
     22  837e				  -	      IF	$90 = $70
     23  837e				  -	      .byte	$D0+4
     24  837e					      ENDIF
     25  837e				  -	      IF	$90 = $80
     26  837e				  -	      .byte	$B0+4
     27  837e					      ENDIF
     28  837e					      IF	$90 = $90
     29  837e		       94		      .byte.b	$90+4
     30  837f					      ENDIF
     31  837f				  -	      IF	$90 = $A0
     32  837f				  -	      .byte	$70+4
     33  837f					      ENDIF
     34  837f				  -	      IF	$90 = $B0
     35  837f				  -	      .byte	$50+4
     36  837f					      ENDIF
     37  837f				  -	      IF	$90 = $C0
     38  837f				  -	      .byte	$30+4
     39  837f					      ENDIF
     40  837f				  -	      IF	$90 = $D0
     41  837f				  -	      .byte	$30+4
     42  837f					      ENDIF
     43  837f				  -	      IF	$90 = $E0
     44  837f				  -	      .byte	$20+4
     45  837f					      ENDIF
     46  837f				  -	      IF	$90 = $F0
     47  837f				  -	      .byte	$40+4
     48  837f					      ENDIF
      0  837f					      NTSC_TO_PAL	$90, 4
      1  837f				  -	      IF	$90 = 0
      2  837f				  -	      .byte	$90+4
      3  837f					      ENDIF
      4  837f				  -	      IF	$90 = $10
      5  837f				  -	      .byte	$20+4
      6  837f					      ENDIF
      7  837f				  -	      IF	$90 = $20
      8  837f				  -	      .byte	$40+4
      9  837f					      ENDIF
     10  837f				  -	      IF	$90 = $30
     11  837f				  -	      .byte	$40+4
     12  837f					      ENDIF
     13  837f				  -	      IF	$90 = $40
     14  837f				  -	      .byte	$60+4
     15  837f					      ENDIF
     16  837f				  -	      IF	$90 = $50
     17  837f				  -	      .byte	$80+4
     18  837f					      ENDIF
     19  837f				  -	      IF	$90 = $60
     20  837f				  -	      .byte	$C0+4
     21  837f					      ENDIF
     22  837f				  -	      IF	$90 = $70
     23  837f				  -	      .byte	$D0+4
     24  837f					      ENDIF
     25  837f				  -	      IF	$90 = $80
     26  837f				  -	      .byte	$B0+4
     27  837f					      ENDIF
     28  837f					      IF	$90 = $90
     29  837f		       94		      .byte.b	$90+4
     30  8380					      ENDIF
     31  8380				  -	      IF	$90 = $A0
     32  8380				  -	      .byte	$70+4
     33  8380					      ENDIF
     34  8380				  -	      IF	$90 = $B0
     35  8380				  -	      .byte	$50+4
     36  8380					      ENDIF
     37  8380				  -	      IF	$90 = $C0
     38  8380				  -	      .byte	$30+4
     39  8380					      ENDIF
     40  8380				  -	      IF	$90 = $D0
     41  8380				  -	      .byte	$30+4
     42  8380					      ENDIF
     43  8380				  -	      IF	$90 = $E0
     44  8380				  -	      .byte	$20+4
     45  8380					      ENDIF
     46  8380				  -	      IF	$90 = $F0
     47  8380				  -	      .byte	$40+4
     48  8380					      ENDIF
      0  8380					      NTSC_TO_PAL	$90, 4
      1  8380				  -	      IF	$90 = 0
      2  8380				  -	      .byte	$90+4
      3  8380					      ENDIF
      4  8380				  -	      IF	$90 = $10
      5  8380				  -	      .byte	$20+4
      6  8380					      ENDIF
      7  8380				  -	      IF	$90 = $20
      8  8380				  -	      .byte	$40+4
      9  8380					      ENDIF
     10  8380				  -	      IF	$90 = $30
     11  8380				  -	      .byte	$40+4
     12  8380					      ENDIF
     13  8380				  -	      IF	$90 = $40
     14  8380				  -	      .byte	$60+4
     15  8380					      ENDIF
     16  8380				  -	      IF	$90 = $50
     17  8380				  -	      .byte	$80+4
     18  8380					      ENDIF
     19  8380				  -	      IF	$90 = $60
     20  8380				  -	      .byte	$C0+4
     21  8380					      ENDIF
     22  8380				  -	      IF	$90 = $70
     23  8380				  -	      .byte	$D0+4
     24  8380					      ENDIF
     25  8380				  -	      IF	$90 = $80
     26  8380				  -	      .byte	$B0+4
     27  8380					      ENDIF
     28  8380					      IF	$90 = $90
     29  8380		       94		      .byte.b	$90+4
     30  8381					      ENDIF
     31  8381				  -	      IF	$90 = $A0
     32  8381				  -	      .byte	$70+4
     33  8381					      ENDIF
     34  8381				  -	      IF	$90 = $B0
     35  8381				  -	      .byte	$50+4
     36  8381					      ENDIF
     37  8381				  -	      IF	$90 = $C0
     38  8381				  -	      .byte	$30+4
     39  8381					      ENDIF
     40  8381				  -	      IF	$90 = $D0
     41  8381				  -	      .byte	$30+4
     42  8381					      ENDIF
     43  8381				  -	      IF	$90 = $E0
     44  8381				  -	      .byte	$20+4
     45  8381					      ENDIF
     46  8381				  -	      IF	$90 = $F0
     47  8381				  -	      .byte	$40+4
     48  8381					      ENDIF
      0  8381					      NTSC_TO_PAL	$90, 4
      1  8381				  -	      IF	$90 = 0
      2  8381				  -	      .byte	$90+4
      3  8381					      ENDIF
      4  8381				  -	      IF	$90 = $10
      5  8381				  -	      .byte	$20+4
      6  8381					      ENDIF
      7  8381				  -	      IF	$90 = $20
      8  8381				  -	      .byte	$40+4
      9  8381					      ENDIF
     10  8381				  -	      IF	$90 = $30
     11  8381				  -	      .byte	$40+4
     12  8381					      ENDIF
     13  8381				  -	      IF	$90 = $40
     14  8381				  -	      .byte	$60+4
     15  8381					      ENDIF
     16  8381				  -	      IF	$90 = $50
     17  8381				  -	      .byte	$80+4
     18  8381					      ENDIF
     19  8381				  -	      IF	$90 = $60
     20  8381				  -	      .byte	$C0+4
     21  8381					      ENDIF
     22  8381				  -	      IF	$90 = $70
     23  8381				  -	      .byte	$D0+4
     24  8381					      ENDIF
     25  8381				  -	      IF	$90 = $80
     26  8381				  -	      .byte	$B0+4
     27  8381					      ENDIF
     28  8381					      IF	$90 = $90
     29  8381		       94		      .byte.b	$90+4
     30  8382					      ENDIF
     31  8382				  -	      IF	$90 = $A0
     32  8382				  -	      .byte	$70+4
     33  8382					      ENDIF
     34  8382				  -	      IF	$90 = $B0
     35  8382				  -	      .byte	$50+4
     36  8382					      ENDIF
     37  8382				  -	      IF	$90 = $C0
     38  8382				  -	      .byte	$30+4
     39  8382					      ENDIF
     40  8382				  -	      IF	$90 = $D0
     41  8382				  -	      .byte	$30+4
     42  8382					      ENDIF
     43  8382				  -	      IF	$90 = $E0
     44  8382				  -	      .byte	$20+4
     45  8382					      ENDIF
     46  8382				  -	      IF	$90 = $F0
     47  8382				  -	      .byte	$40+4
     48  8382					      ENDIF
      0  8382					      NTSC_TO_PAL	$30, 4
      1  8382				  -	      IF	$30 = 0
      2  8382				  -	      .byte	$30+4
      3  8382					      ENDIF
      4  8382				  -	      IF	$30 = $10
      5  8382				  -	      .byte	$20+4
      6  8382					      ENDIF
      7  8382				  -	      IF	$30 = $20
      8  8382				  -	      .byte	$40+4
      9  8382					      ENDIF
     10  8382					      IF	$30 = $30
     11  8382		       44		      .byte.b	$40+4
     12  8383					      ENDIF
     13  8383				  -	      IF	$30 = $40
     14  8383				  -	      .byte	$60+4
     15  8383					      ENDIF
     16  8383				  -	      IF	$30 = $50
     17  8383				  -	      .byte	$80+4
     18  8383					      ENDIF
     19  8383				  -	      IF	$30 = $60
     20  8383				  -	      .byte	$C0+4
     21  8383					      ENDIF
     22  8383				  -	      IF	$30 = $70
     23  8383				  -	      .byte	$D0+4
     24  8383					      ENDIF
     25  8383				  -	      IF	$30 = $80
     26  8383				  -	      .byte	$B0+4
     27  8383					      ENDIF
     28  8383				  -	      IF	$30 = $90
     29  8383				  -	      .byte	$90+4
     30  8383					      ENDIF
     31  8383				  -	      IF	$30 = $A0
     32  8383				  -	      .byte	$70+4
     33  8383					      ENDIF
     34  8383				  -	      IF	$30 = $B0
     35  8383				  -	      .byte	$50+4
     36  8383					      ENDIF
     37  8383				  -	      IF	$30 = $C0
     38  8383				  -	      .byte	$30+4
     39  8383					      ENDIF
     40  8383				  -	      IF	$30 = $D0
     41  8383				  -	      .byte	$30+4
     42  8383					      ENDIF
     43  8383				  -	      IF	$30 = $E0
     44  8383				  -	      .byte	$20+4
     45  8383					      ENDIF
     46  8383				  -	      IF	$30 = $F0
     47  8383				  -	      .byte	$40+4
     48  8383					      ENDIF
      0  8383					      NTSC_TO_PAL	$0, 12
      1  8383					      IF	$0 = 0
      2  8383		       0c		      .byte.b	$0+12
      3  8384					      ENDIF
      4  8384				  -	      IF	$0 = $10
      5  8384				  -	      .byte	$20+12
      6  8384					      ENDIF
      7  8384				  -	      IF	$0 = $20
      8  8384				  -	      .byte	$40+12
      9  8384					      ENDIF
     10  8384				  -	      IF	$0 = $30
     11  8384				  -	      .byte	$40+12
     12  8384					      ENDIF
     13  8384				  -	      IF	$0 = $40
     14  8384				  -	      .byte	$60+12
     15  8384					      ENDIF
     16  8384				  -	      IF	$0 = $50
     17  8384				  -	      .byte	$80+12
     18  8384					      ENDIF
     19  8384				  -	      IF	$0 = $60
     20  8384				  -	      .byte	$C0+12
     21  8384					      ENDIF
     22  8384				  -	      IF	$0 = $70
     23  8384				  -	      .byte	$D0+12
     24  8384					      ENDIF
     25  8384				  -	      IF	$0 = $80
     26  8384				  -	      .byte	$B0+12
     27  8384					      ENDIF
     28  8384				  -	      IF	$0 = $90
     29  8384				  -	      .byte	$90+12
     30  8384					      ENDIF
     31  8384				  -	      IF	$0 = $A0
     32  8384				  -	      .byte	$70+12
     33  8384					      ENDIF
     34  8384				  -	      IF	$0 = $B0
     35  8384				  -	      .byte	$50+12
     36  8384					      ENDIF
     37  8384				  -	      IF	$0 = $C0
     38  8384				  -	      .byte	$30+12
     39  8384					      ENDIF
     40  8384				  -	      IF	$0 = $D0
     41  8384				  -	      .byte	$30+12
     42  8384					      ENDIF
     43  8384				  -	      IF	$0 = $E0
     44  8384				  -	      .byte	$20+12
     45  8384					      ENDIF
     46  8384				  -	      IF	$0 = $F0
     47  8384				  -	      .byte	$40+12
     48  8384					      ENDIF
      0  8384					      NTSC_TO_PAL	$90, 6
      1  8384				  -	      IF	$90 = 0
      2  8384				  -	      .byte	$90+6
      3  8384					      ENDIF
      4  8384				  -	      IF	$90 = $10
      5  8384				  -	      .byte	$20+6
      6  8384					      ENDIF
      7  8384				  -	      IF	$90 = $20
      8  8384				  -	      .byte	$40+6
      9  8384					      ENDIF
     10  8384				  -	      IF	$90 = $30
     11  8384				  -	      .byte	$40+6
     12  8384					      ENDIF
     13  8384				  -	      IF	$90 = $40
     14  8384				  -	      .byte	$60+6
     15  8384					      ENDIF
     16  8384				  -	      IF	$90 = $50
     17  8384				  -	      .byte	$80+6
     18  8384					      ENDIF
     19  8384				  -	      IF	$90 = $60
     20  8384				  -	      .byte	$C0+6
     21  8384					      ENDIF
     22  8384				  -	      IF	$90 = $70
     23  8384				  -	      .byte	$D0+6
     24  8384					      ENDIF
     25  8384				  -	      IF	$90 = $80
     26  8384				  -	      .byte	$B0+6
     27  8384					      ENDIF
     28  8384					      IF	$90 = $90
     29  8384		       96		      .byte.b	$90+6
     30  8385					      ENDIF
     31  8385				  -	      IF	$90 = $A0
     32  8385				  -	      .byte	$70+6
     33  8385					      ENDIF
     34  8385				  -	      IF	$90 = $B0
     35  8385				  -	      .byte	$50+6
     36  8385					      ENDIF
     37  8385				  -	      IF	$90 = $C0
     38  8385				  -	      .byte	$30+6
     39  8385					      ENDIF
     40  8385				  -	      IF	$90 = $D0
     41  8385				  -	      .byte	$30+6
     42  8385					      ENDIF
     43  8385				  -	      IF	$90 = $E0
     44  8385				  -	      .byte	$20+6
     45  8385					      ENDIF
     46  8385				  -	      IF	$90 = $F0
     47  8385				  -	      .byte	$40+6
     48  8385					      ENDIF
      0  8385					      NTSC_TO_PAL	$90, 6
      1  8385				  -	      IF	$90 = 0
      2  8385				  -	      .byte	$90+6
      3  8385					      ENDIF
      4  8385				  -	      IF	$90 = $10
      5  8385				  -	      .byte	$20+6
      6  8385					      ENDIF
      7  8385				  -	      IF	$90 = $20
      8  8385				  -	      .byte	$40+6
      9  8385					      ENDIF
     10  8385				  -	      IF	$90 = $30
     11  8385				  -	      .byte	$40+6
     12  8385					      ENDIF
     13  8385				  -	      IF	$90 = $40
     14  8385				  -	      .byte	$60+6
     15  8385					      ENDIF
     16  8385				  -	      IF	$90 = $50
     17  8385				  -	      .byte	$80+6
     18  8385					      ENDIF
     19  8385				  -	      IF	$90 = $60
     20  8385				  -	      .byte	$C0+6
     21  8385					      ENDIF
     22  8385				  -	      IF	$90 = $70
     23  8385				  -	      .byte	$D0+6
     24  8385					      ENDIF
     25  8385				  -	      IF	$90 = $80
     26  8385				  -	      .byte	$B0+6
     27  8385					      ENDIF
     28  8385					      IF	$90 = $90
     29  8385		       96		      .byte.b	$90+6
     30  8386					      ENDIF
     31  8386				  -	      IF	$90 = $A0
     32  8386				  -	      .byte	$70+6
     33  8386					      ENDIF
     34  8386				  -	      IF	$90 = $B0
     35  8386				  -	      .byte	$50+6
     36  8386					      ENDIF
     37  8386				  -	      IF	$90 = $C0
     38  8386				  -	      .byte	$30+6
     39  8386					      ENDIF
     40  8386				  -	      IF	$90 = $D0
     41  8386				  -	      .byte	$30+6
     42  8386					      ENDIF
     43  8386				  -	      IF	$90 = $E0
     44  8386				  -	      .byte	$20+6
     45  8386					      ENDIF
     46  8386				  -	      IF	$90 = $F0
     47  8386				  -	      .byte	$40+6
     48  8386					      ENDIF
      0  8386					      NTSC_TO_PAL	$90, 6
      1  8386				  -	      IF	$90 = 0
      2  8386				  -	      .byte	$90+6
      3  8386					      ENDIF
      4  8386				  -	      IF	$90 = $10
      5  8386				  -	      .byte	$20+6
      6  8386					      ENDIF
      7  8386				  -	      IF	$90 = $20
      8  8386				  -	      .byte	$40+6
      9  8386					      ENDIF
     10  8386				  -	      IF	$90 = $30
     11  8386				  -	      .byte	$40+6
     12  8386					      ENDIF
     13  8386				  -	      IF	$90 = $40
     14  8386				  -	      .byte	$60+6
     15  8386					      ENDIF
     16  8386				  -	      IF	$90 = $50
     17  8386				  -	      .byte	$80+6
     18  8386					      ENDIF
     19  8386				  -	      IF	$90 = $60
     20  8386				  -	      .byte	$C0+6
     21  8386					      ENDIF
     22  8386				  -	      IF	$90 = $70
     23  8386				  -	      .byte	$D0+6
     24  8386					      ENDIF
     25  8386				  -	      IF	$90 = $80
     26  8386				  -	      .byte	$B0+6
     27  8386					      ENDIF
     28  8386					      IF	$90 = $90
     29  8386		       96		      .byte.b	$90+6
     30  8387					      ENDIF
     31  8387				  -	      IF	$90 = $A0
     32  8387				  -	      .byte	$70+6
     33  8387					      ENDIF
     34  8387				  -	      IF	$90 = $B0
     35  8387				  -	      .byte	$50+6
     36  8387					      ENDIF
     37  8387				  -	      IF	$90 = $C0
     38  8387				  -	      .byte	$30+6
     39  8387					      ENDIF
     40  8387				  -	      IF	$90 = $D0
     41  8387				  -	      .byte	$30+6
     42  8387					      ENDIF
     43  8387				  -	      IF	$90 = $E0
     44  8387				  -	      .byte	$20+6
     45  8387					      ENDIF
     46  8387				  -	      IF	$90 = $F0
     47  8387				  -	      .byte	$40+6
     48  8387					      ENDIF
      0  8387					      NTSC_TO_PAL	$90, 6
      1  8387				  -	      IF	$90 = 0
      2  8387				  -	      .byte	$90+6
      3  8387					      ENDIF
      4  8387				  -	      IF	$90 = $10
      5  8387				  -	      .byte	$20+6
      6  8387					      ENDIF
      7  8387				  -	      IF	$90 = $20
      8  8387				  -	      .byte	$40+6
      9  8387					      ENDIF
     10  8387				  -	      IF	$90 = $30
     11  8387				  -	      .byte	$40+6
     12  8387					      ENDIF
     13  8387				  -	      IF	$90 = $40
     14  8387				  -	      .byte	$60+6
     15  8387					      ENDIF
     16  8387				  -	      IF	$90 = $50
     17  8387				  -	      .byte	$80+6
     18  8387					      ENDIF
     19  8387				  -	      IF	$90 = $60
     20  8387				  -	      .byte	$C0+6
     21  8387					      ENDIF
     22  8387				  -	      IF	$90 = $70
     23  8387				  -	      .byte	$D0+6
     24  8387					      ENDIF
     25  8387				  -	      IF	$90 = $80
     26  8387				  -	      .byte	$B0+6
     27  8387					      ENDIF
     28  8387					      IF	$90 = $90
     29  8387		       96		      .byte.b	$90+6
     30  8388					      ENDIF
     31  8388				  -	      IF	$90 = $A0
     32  8388				  -	      .byte	$70+6
     33  8388					      ENDIF
     34  8388				  -	      IF	$90 = $B0
     35  8388				  -	      .byte	$50+6
     36  8388					      ENDIF
     37  8388				  -	      IF	$90 = $C0
     38  8388				  -	      .byte	$30+6
     39  8388					      ENDIF
     40  8388				  -	      IF	$90 = $D0
     41  8388				  -	      .byte	$30+6
     42  8388					      ENDIF
     43  8388				  -	      IF	$90 = $E0
     44  8388				  -	      .byte	$20+6
     45  8388					      ENDIF
     46  8388				  -	      IF	$90 = $F0
     47  8388				  -	      .byte	$40+6
     48  8388					      ENDIF
      0  8388					      NTSC_TO_PAL	$90, 6
      1  8388				  -	      IF	$90 = 0
      2  8388				  -	      .byte	$90+6
      3  8388					      ENDIF
      4  8388				  -	      IF	$90 = $10
      5  8388				  -	      .byte	$20+6
      6  8388					      ENDIF
      7  8388				  -	      IF	$90 = $20
      8  8388				  -	      .byte	$40+6
      9  8388					      ENDIF
     10  8388				  -	      IF	$90 = $30
     11  8388				  -	      .byte	$40+6
     12  8388					      ENDIF
     13  8388				  -	      IF	$90 = $40
     14  8388				  -	      .byte	$60+6
     15  8388					      ENDIF
     16  8388				  -	      IF	$90 = $50
     17  8388				  -	      .byte	$80+6
     18  8388					      ENDIF
     19  8388				  -	      IF	$90 = $60
     20  8388				  -	      .byte	$C0+6
     21  8388					      ENDIF
     22  8388				  -	      IF	$90 = $70
     23  8388				  -	      .byte	$D0+6
     24  8388					      ENDIF
     25  8388				  -	      IF	$90 = $80
     26  8388				  -	      .byte	$B0+6
     27  8388					      ENDIF
     28  8388					      IF	$90 = $90
     29  8388		       96		      .byte.b	$90+6
     30  8389					      ENDIF
     31  8389				  -	      IF	$90 = $A0
     32  8389				  -	      .byte	$70+6
     33  8389					      ENDIF
     34  8389				  -	      IF	$90 = $B0
     35  8389				  -	      .byte	$50+6
     36  8389					      ENDIF
     37  8389				  -	      IF	$90 = $C0
     38  8389				  -	      .byte	$30+6
     39  8389					      ENDIF
     40  8389				  -	      IF	$90 = $D0
     41  8389				  -	      .byte	$30+6
     42  8389					      ENDIF
     43  8389				  -	      IF	$90 = $E0
     44  8389				  -	      .byte	$20+6
     45  8389					      ENDIF
     46  8389				  -	      IF	$90 = $F0
     47  8389				  -	      .byte	$40+6
     48  8389					      ENDIF
      0  8389					      NTSC_TO_PAL	$0, 12
      1  8389					      IF	$0 = 0
      2  8389		       0c		      .byte.b	$0+12
      3  838a					      ENDIF
      4  838a				  -	      IF	$0 = $10
      5  838a				  -	      .byte	$20+12
      6  838a					      ENDIF
      7  838a				  -	      IF	$0 = $20
      8  838a				  -	      .byte	$40+12
      9  838a					      ENDIF
     10  838a				  -	      IF	$0 = $30
     11  838a				  -	      .byte	$40+12
     12  838a					      ENDIF
     13  838a				  -	      IF	$0 = $40
     14  838a				  -	      .byte	$60+12
     15  838a					      ENDIF
     16  838a				  -	      IF	$0 = $50
     17  838a				  -	      .byte	$80+12
     18  838a					      ENDIF
     19  838a				  -	      IF	$0 = $60
     20  838a				  -	      .byte	$C0+12
     21  838a					      ENDIF
     22  838a				  -	      IF	$0 = $70
     23  838a				  -	      .byte	$D0+12
     24  838a					      ENDIF
     25  838a				  -	      IF	$0 = $80
     26  838a				  -	      .byte	$B0+12
     27  838a					      ENDIF
     28  838a				  -	      IF	$0 = $90
     29  838a				  -	      .byte	$90+12
     30  838a					      ENDIF
     31  838a				  -	      IF	$0 = $A0
     32  838a				  -	      .byte	$70+12
     33  838a					      ENDIF
     34  838a				  -	      IF	$0 = $B0
     35  838a				  -	      .byte	$50+12
     36  838a					      ENDIF
     37  838a				  -	      IF	$0 = $C0
     38  838a				  -	      .byte	$30+12
     39  838a					      ENDIF
     40  838a				  -	      IF	$0 = $D0
     41  838a				  -	      .byte	$30+12
     42  838a					      ENDIF
     43  838a				  -	      IF	$0 = $E0
     44  838a				  -	      .byte	$20+12
     45  838a					      ENDIF
     46  838a				  -	      IF	$0 = $F0
     47  838a				  -	      .byte	$40+12
     48  838a					      ENDIF
      0  838a					      NTSC_TO_PAL	$30, 8
      1  838a				  -	      IF	$30 = 0
      2  838a				  -	      .byte	$30+8
      3  838a					      ENDIF
      4  838a				  -	      IF	$30 = $10
      5  838a				  -	      .byte	$20+8
      6  838a					      ENDIF
      7  838a				  -	      IF	$30 = $20
      8  838a				  -	      .byte	$40+8
      9  838a					      ENDIF
     10  838a					      IF	$30 = $30
     11  838a		       48		      .byte.b	$40+8
     12  838b					      ENDIF
     13  838b				  -	      IF	$30 = $40
     14  838b				  -	      .byte	$60+8
     15  838b					      ENDIF
     16  838b				  -	      IF	$30 = $50
     17  838b				  -	      .byte	$80+8
     18  838b					      ENDIF
     19  838b				  -	      IF	$30 = $60
     20  838b				  -	      .byte	$C0+8
     21  838b					      ENDIF
     22  838b				  -	      IF	$30 = $70
     23  838b				  -	      .byte	$D0+8
     24  838b					      ENDIF
     25  838b				  -	      IF	$30 = $80
     26  838b				  -	      .byte	$B0+8
     27  838b					      ENDIF
     28  838b				  -	      IF	$30 = $90
     29  838b				  -	      .byte	$90+8
     30  838b					      ENDIF
     31  838b				  -	      IF	$30 = $A0
     32  838b				  -	      .byte	$70+8
     33  838b					      ENDIF
     34  838b				  -	      IF	$30 = $B0
     35  838b				  -	      .byte	$50+8
     36  838b					      ENDIF
     37  838b				  -	      IF	$30 = $C0
     38  838b				  -	      .byte	$30+8
     39  838b					      ENDIF
     40  838b				  -	      IF	$30 = $D0
     41  838b				  -	      .byte	$30+8
     42  838b					      ENDIF
     43  838b				  -	      IF	$30 = $E0
     44  838b				  -	      .byte	$20+8
     45  838b					      ENDIF
     46  838b				  -	      IF	$30 = $F0
     47  838b				  -	      .byte	$40+8
     48  838b					      ENDIF
      0  838b					      NTSC_TO_PAL	$30, 8
      1  838b				  -	      IF	$30 = 0
      2  838b				  -	      .byte	$30+8
      3  838b					      ENDIF
      4  838b				  -	      IF	$30 = $10
      5  838b				  -	      .byte	$20+8
      6  838b					      ENDIF
      7  838b				  -	      IF	$30 = $20
      8  838b				  -	      .byte	$40+8
      9  838b					      ENDIF
     10  838b					      IF	$30 = $30
     11  838b		       48		      .byte.b	$40+8
     12  838c					      ENDIF
     13  838c				  -	      IF	$30 = $40
     14  838c				  -	      .byte	$60+8
     15  838c					      ENDIF
     16  838c				  -	      IF	$30 = $50
     17  838c				  -	      .byte	$80+8
     18  838c					      ENDIF
     19  838c				  -	      IF	$30 = $60
     20  838c				  -	      .byte	$C0+8
     21  838c					      ENDIF
     22  838c				  -	      IF	$30 = $70
     23  838c				  -	      .byte	$D0+8
     24  838c					      ENDIF
     25  838c				  -	      IF	$30 = $80
     26  838c				  -	      .byte	$B0+8
     27  838c					      ENDIF
     28  838c				  -	      IF	$30 = $90
     29  838c				  -	      .byte	$90+8
     30  838c					      ENDIF
     31  838c				  -	      IF	$30 = $A0
     32  838c				  -	      .byte	$70+8
     33  838c					      ENDIF
     34  838c				  -	      IF	$30 = $B0
     35  838c				  -	      .byte	$50+8
     36  838c					      ENDIF
     37  838c				  -	      IF	$30 = $C0
     38  838c				  -	      .byte	$30+8
     39  838c					      ENDIF
     40  838c				  -	      IF	$30 = $D0
     41  838c				  -	      .byte	$30+8
     42  838c					      ENDIF
     43  838c				  -	      IF	$30 = $E0
     44  838c				  -	      .byte	$20+8
     45  838c					      ENDIF
     46  838c				  -	      IF	$30 = $F0
     47  838c				  -	      .byte	$40+8
     48  838c					      ENDIF
      0  838c					      NTSC_TO_PAL	$30, 8
      1  838c				  -	      IF	$30 = 0
      2  838c				  -	      .byte	$30+8
      3  838c					      ENDIF
      4  838c				  -	      IF	$30 = $10
      5  838c				  -	      .byte	$20+8
      6  838c					      ENDIF
      7  838c				  -	      IF	$30 = $20
      8  838c				  -	      .byte	$40+8
      9  838c					      ENDIF
     10  838c					      IF	$30 = $30
     11  838c		       48		      .byte.b	$40+8
     12  838d					      ENDIF
     13  838d				  -	      IF	$30 = $40
     14  838d				  -	      .byte	$60+8
     15  838d					      ENDIF
     16  838d				  -	      IF	$30 = $50
     17  838d				  -	      .byte	$80+8
     18  838d					      ENDIF
     19  838d				  -	      IF	$30 = $60
     20  838d				  -	      .byte	$C0+8
     21  838d					      ENDIF
     22  838d				  -	      IF	$30 = $70
     23  838d				  -	      .byte	$D0+8
     24  838d					      ENDIF
     25  838d				  -	      IF	$30 = $80
     26  838d				  -	      .byte	$B0+8
     27  838d					      ENDIF
     28  838d				  -	      IF	$30 = $90
     29  838d				  -	      .byte	$90+8
     30  838d					      ENDIF
     31  838d				  -	      IF	$30 = $A0
     32  838d				  -	      .byte	$70+8
     33  838d					      ENDIF
     34  838d				  -	      IF	$30 = $B0
     35  838d				  -	      .byte	$50+8
     36  838d					      ENDIF
     37  838d				  -	      IF	$30 = $C0
     38  838d				  -	      .byte	$30+8
     39  838d					      ENDIF
     40  838d				  -	      IF	$30 = $D0
     41  838d				  -	      .byte	$30+8
     42  838d					      ENDIF
     43  838d				  -	      IF	$30 = $E0
     44  838d				  -	      .byte	$20+8
     45  838d					      ENDIF
     46  838d				  -	      IF	$30 = $F0
     47  838d				  -	      .byte	$40+8
     48  838d					      ENDIF
      0  838d					      NTSC_TO_PAL	$30, 8
      1  838d				  -	      IF	$30 = 0
      2  838d				  -	      .byte	$30+8
      3  838d					      ENDIF
      4  838d				  -	      IF	$30 = $10
      5  838d				  -	      .byte	$20+8
      6  838d					      ENDIF
      7  838d				  -	      IF	$30 = $20
      8  838d				  -	      .byte	$40+8
      9  838d					      ENDIF
     10  838d					      IF	$30 = $30
     11  838d		       48		      .byte.b	$40+8
     12  838e					      ENDIF
     13  838e				  -	      IF	$30 = $40
     14  838e				  -	      .byte	$60+8
     15  838e					      ENDIF
     16  838e				  -	      IF	$30 = $50
     17  838e				  -	      .byte	$80+8
     18  838e					      ENDIF
     19  838e				  -	      IF	$30 = $60
     20  838e				  -	      .byte	$C0+8
     21  838e					      ENDIF
     22  838e				  -	      IF	$30 = $70
     23  838e				  -	      .byte	$D0+8
     24  838e					      ENDIF
     25  838e				  -	      IF	$30 = $80
     26  838e				  -	      .byte	$B0+8
     27  838e					      ENDIF
     28  838e				  -	      IF	$30 = $90
     29  838e				  -	      .byte	$90+8
     30  838e					      ENDIF
     31  838e				  -	      IF	$30 = $A0
     32  838e				  -	      .byte	$70+8
     33  838e					      ENDIF
     34  838e				  -	      IF	$30 = $B0
     35  838e				  -	      .byte	$50+8
     36  838e					      ENDIF
     37  838e				  -	      IF	$30 = $C0
     38  838e				  -	      .byte	$30+8
     39  838e					      ENDIF
     40  838e				  -	      IF	$30 = $D0
     41  838e				  -	      .byte	$30+8
     42  838e					      ENDIF
     43  838e				  -	      IF	$30 = $E0
     44  838e				  -	      .byte	$20+8
     45  838e					      ENDIF
     46  838e				  -	      IF	$30 = $F0
     47  838e				  -	      .byte	$40+8
     48  838e					      ENDIF
      0  838e					      NTSC_TO_PAL	$30, 8
      1  838e				  -	      IF	$30 = 0
      2  838e				  -	      .byte	$30+8
      3  838e					      ENDIF
      4  838e				  -	      IF	$30 = $10
      5  838e				  -	      .byte	$20+8
      6  838e					      ENDIF
      7  838e				  -	      IF	$30 = $20
      8  838e				  -	      .byte	$40+8
      9  838e					      ENDIF
     10  838e					      IF	$30 = $30
     11  838e		       48		      .byte.b	$40+8
     12  838f					      ENDIF
     13  838f				  -	      IF	$30 = $40
     14  838f				  -	      .byte	$60+8
     15  838f					      ENDIF
     16  838f				  -	      IF	$30 = $50
     17  838f				  -	      .byte	$80+8
     18  838f					      ENDIF
     19  838f				  -	      IF	$30 = $60
     20  838f				  -	      .byte	$C0+8
     21  838f					      ENDIF
     22  838f				  -	      IF	$30 = $70
     23  838f				  -	      .byte	$D0+8
     24  838f					      ENDIF
     25  838f				  -	      IF	$30 = $80
     26  838f				  -	      .byte	$B0+8
     27  838f					      ENDIF
     28  838f				  -	      IF	$30 = $90
     29  838f				  -	      .byte	$90+8
     30  838f					      ENDIF
     31  838f				  -	      IF	$30 = $A0
     32  838f				  -	      .byte	$70+8
     33  838f					      ENDIF
     34  838f				  -	      IF	$30 = $B0
     35  838f				  -	      .byte	$50+8
     36  838f					      ENDIF
     37  838f				  -	      IF	$30 = $C0
     38  838f				  -	      .byte	$30+8
     39  838f					      ENDIF
     40  838f				  -	      IF	$30 = $D0
     41  838f				  -	      .byte	$30+8
     42  838f					      ENDIF
     43  838f				  -	      IF	$30 = $E0
     44  838f				  -	      .byte	$20+8
     45  838f					      ENDIF
     46  838f				  -	      IF	$30 = $F0
     47  838f				  -	      .byte	$40+8
     48  838f					      ENDIF
      0  838f					      NTSC_TO_PAL	$30, 8
      1  838f				  -	      IF	$30 = 0
      2  838f				  -	      .byte	$30+8
      3  838f					      ENDIF
      4  838f				  -	      IF	$30 = $10
      5  838f				  -	      .byte	$20+8
      6  838f					      ENDIF
      7  838f				  -	      IF	$30 = $20
      8  838f				  -	      .byte	$40+8
      9  838f					      ENDIF
     10  838f					      IF	$30 = $30
     11  838f		       48		      .byte.b	$40+8
     12  8390					      ENDIF
     13  8390				  -	      IF	$30 = $40
     14  8390				  -	      .byte	$60+8
     15  8390					      ENDIF
     16  8390				  -	      IF	$30 = $50
     17  8390				  -	      .byte	$80+8
     18  8390					      ENDIF
     19  8390				  -	      IF	$30 = $60
     20  8390				  -	      .byte	$C0+8
     21  8390					      ENDIF
     22  8390				  -	      IF	$30 = $70
     23  8390				  -	      .byte	$D0+8
     24  8390					      ENDIF
     25  8390				  -	      IF	$30 = $80
     26  8390				  -	      .byte	$B0+8
     27  8390					      ENDIF
     28  8390				  -	      IF	$30 = $90
     29  8390				  -	      .byte	$90+8
     30  8390					      ENDIF
     31  8390				  -	      IF	$30 = $A0
     32  8390				  -	      .byte	$70+8
     33  8390					      ENDIF
     34  8390				  -	      IF	$30 = $B0
     35  8390				  -	      .byte	$50+8
     36  8390					      ENDIF
     37  8390				  -	      IF	$30 = $C0
     38  8390				  -	      .byte	$30+8
     39  8390					      ENDIF
     40  8390				  -	      IF	$30 = $D0
     41  8390				  -	      .byte	$30+8
     42  8390					      ENDIF
     43  8390				  -	      IF	$30 = $E0
     44  8390				  -	      .byte	$20+8
     45  8390					      ENDIF
     46  8390				  -	      IF	$30 = $F0
     47  8390				  -	      .byte	$40+8
     48  8390					      ENDIF
      0  8390					      NTSC_TO_PAL	$10, $C
      1  8390				  -	      IF	$10 = 0
      2  8390				  -	      .byte	$10+$C
      3  8390					      ENDIF
      4  8390					      IF	$10 = $10
      5  8390		       2c		      .byte.b	$20+$C
      6  8391					      ENDIF
      7  8391				  -	      IF	$10 = $20
      8  8391				  -	      .byte	$40+$C
      9  8391					      ENDIF
     10  8391				  -	      IF	$10 = $30
     11  8391				  -	      .byte	$40+$C
     12  8391					      ENDIF
     13  8391				  -	      IF	$10 = $40
     14  8391				  -	      .byte	$60+$C
     15  8391					      ENDIF
     16  8391				  -	      IF	$10 = $50
     17  8391				  -	      .byte	$80+$C
     18  8391					      ENDIF
     19  8391				  -	      IF	$10 = $60
     20  8391				  -	      .byte	$C0+$C
     21  8391					      ENDIF
     22  8391				  -	      IF	$10 = $70
     23  8391				  -	      .byte	$D0+$C
     24  8391					      ENDIF
     25  8391				  -	      IF	$10 = $80
     26  8391				  -	      .byte	$B0+$C
     27  8391					      ENDIF
     28  8391				  -	      IF	$10 = $90
     29  8391				  -	      .byte	$90+$C
     30  8391					      ENDIF
     31  8391				  -	      IF	$10 = $A0
     32  8391				  -	      .byte	$70+$C
     33  8391					      ENDIF
     34  8391				  -	      IF	$10 = $B0
     35  8391				  -	      .byte	$50+$C
     36  8391					      ENDIF
     37  8391				  -	      IF	$10 = $C0
     38  8391				  -	      .byte	$30+$C
     39  8391					      ENDIF
     40  8391				  -	      IF	$10 = $D0
     41  8391				  -	      .byte	$30+$C
     42  8391					      ENDIF
     43  8391				  -	      IF	$10 = $E0
     44  8391				  -	      .byte	$20+$C
     45  8391					      ENDIF
     46  8391				  -	      IF	$10 = $F0
     47  8391				  -	      .byte	$40+$C
     48  8391					      ENDIF
      0  8391					      NTSC_TO_PAL	$10, $C
      1  8391				  -	      IF	$10 = 0
      2  8391				  -	      .byte	$10+$C
      3  8391					      ENDIF
      4  8391					      IF	$10 = $10
      5  8391		       2c		      .byte.b	$20+$C
      6  8392					      ENDIF
      7  8392				  -	      IF	$10 = $20
      8  8392				  -	      .byte	$40+$C
      9  8392					      ENDIF
     10  8392				  -	      IF	$10 = $30
     11  8392				  -	      .byte	$40+$C
     12  8392					      ENDIF
     13  8392				  -	      IF	$10 = $40
     14  8392				  -	      .byte	$60+$C
     15  8392					      ENDIF
     16  8392				  -	      IF	$10 = $50
     17  8392				  -	      .byte	$80+$C
     18  8392					      ENDIF
     19  8392				  -	      IF	$10 = $60
     20  8392				  -	      .byte	$C0+$C
     21  8392					      ENDIF
     22  8392				  -	      IF	$10 = $70
     23  8392				  -	      .byte	$D0+$C
     24  8392					      ENDIF
     25  8392				  -	      IF	$10 = $80
     26  8392				  -	      .byte	$B0+$C
     27  8392					      ENDIF
     28  8392				  -	      IF	$10 = $90
     29  8392				  -	      .byte	$90+$C
     30  8392					      ENDIF
     31  8392				  -	      IF	$10 = $A0
     32  8392				  -	      .byte	$70+$C
     33  8392					      ENDIF
     34  8392				  -	      IF	$10 = $B0
     35  8392				  -	      .byte	$50+$C
     36  8392					      ENDIF
     37  8392				  -	      IF	$10 = $C0
     38  8392				  -	      .byte	$30+$C
     39  8392					      ENDIF
     40  8392				  -	      IF	$10 = $D0
     41  8392				  -	      .byte	$30+$C
     42  8392					      ENDIF
     43  8392				  -	      IF	$10 = $E0
     44  8392				  -	      .byte	$20+$C
     45  8392					      ENDIF
     46  8392				  -	      IF	$10 = $F0
     47  8392				  -	      .byte	$40+$C
     48  8392					      ENDIF
    602  8392
    603  8392				   mancolourPAL2
      0  8392					      NTSC_TO_PAL	$10, 4
      1  8392				  -	      IF	$10 = 0
      2  8392				  -	      .byte	$10+4
      3  8392					      ENDIF
      4  8392					      IF	$10 = $10
      5  8392		       24		      .byte.b	$20+4
      6  8393					      ENDIF
      7  8393				  -	      IF	$10 = $20
      8  8393				  -	      .byte	$40+4
      9  8393					      ENDIF
     10  8393				  -	      IF	$10 = $30
     11  8393				  -	      .byte	$40+4
     12  8393					      ENDIF
     13  8393				  -	      IF	$10 = $40
     14  8393				  -	      .byte	$60+4
     15  8393					      ENDIF
     16  8393				  -	      IF	$10 = $50
     17  8393				  -	      .byte	$80+4
     18  8393					      ENDIF
     19  8393				  -	      IF	$10 = $60
     20  8393				  -	      .byte	$C0+4
     21  8393					      ENDIF
     22  8393				  -	      IF	$10 = $70
     23  8393				  -	      .byte	$D0+4
     24  8393					      ENDIF
     25  8393				  -	      IF	$10 = $80
     26  8393				  -	      .byte	$B0+4
     27  8393					      ENDIF
     28  8393				  -	      IF	$10 = $90
     29  8393				  -	      .byte	$90+4
     30  8393					      ENDIF
     31  8393				  -	      IF	$10 = $A0
     32  8393				  -	      .byte	$70+4
     33  8393					      ENDIF
     34  8393				  -	      IF	$10 = $B0
     35  8393				  -	      .byte	$50+4
     36  8393					      ENDIF
     37  8393				  -	      IF	$10 = $C0
     38  8393				  -	      .byte	$30+4
     39  8393					      ENDIF
     40  8393				  -	      IF	$10 = $D0
     41  8393				  -	      .byte	$30+4
     42  8393					      ENDIF
     43  8393				  -	      IF	$10 = $E0
     44  8393				  -	      .byte	$20+4
     45  8393					      ENDIF
     46  8393				  -	      IF	$10 = $F0
     47  8393				  -	      .byte	$40+4
     48  8393					      ENDIF
      0  8393					      NTSC_TO_PAL	$10, 4
      1  8393				  -	      IF	$10 = 0
      2  8393				  -	      .byte	$10+4
      3  8393					      ENDIF
      4  8393					      IF	$10 = $10
      5  8393		       24		      .byte.b	$20+4
      6  8394					      ENDIF
      7  8394				  -	      IF	$10 = $20
      8  8394				  -	      .byte	$40+4
      9  8394					      ENDIF
     10  8394				  -	      IF	$10 = $30
     11  8394				  -	      .byte	$40+4
     12  8394					      ENDIF
     13  8394				  -	      IF	$10 = $40
     14  8394				  -	      .byte	$60+4
     15  8394					      ENDIF
     16  8394				  -	      IF	$10 = $50
     17  8394				  -	      .byte	$80+4
     18  8394					      ENDIF
     19  8394				  -	      IF	$10 = $60
     20  8394				  -	      .byte	$C0+4
     21  8394					      ENDIF
     22  8394				  -	      IF	$10 = $70
     23  8394				  -	      .byte	$D0+4
     24  8394					      ENDIF
     25  8394				  -	      IF	$10 = $80
     26  8394				  -	      .byte	$B0+4
     27  8394					      ENDIF
     28  8394				  -	      IF	$10 = $90
     29  8394				  -	      .byte	$90+4
     30  8394					      ENDIF
     31  8394				  -	      IF	$10 = $A0
     32  8394				  -	      .byte	$70+4
     33  8394					      ENDIF
     34  8394				  -	      IF	$10 = $B0
     35  8394				  -	      .byte	$50+4
     36  8394					      ENDIF
     37  8394				  -	      IF	$10 = $C0
     38  8394				  -	      .byte	$30+4
     39  8394					      ENDIF
     40  8394				  -	      IF	$10 = $D0
     41  8394				  -	      .byte	$30+4
     42  8394					      ENDIF
     43  8394				  -	      IF	$10 = $E0
     44  8394				  -	      .byte	$20+4
     45  8394					      ENDIF
     46  8394				  -	      IF	$10 = $F0
     47  8394				  -	      .byte	$40+4
     48  8394					      ENDIF
      0  8394					      NTSC_TO_PAL	$90, 4
      1  8394				  -	      IF	$90 = 0
      2  8394				  -	      .byte	$90+4
      3  8394					      ENDIF
      4  8394				  -	      IF	$90 = $10
      5  8394				  -	      .byte	$20+4
      6  8394					      ENDIF
      7  8394				  -	      IF	$90 = $20
      8  8394				  -	      .byte	$40+4
      9  8394					      ENDIF
     10  8394				  -	      IF	$90 = $30
     11  8394				  -	      .byte	$40+4
     12  8394					      ENDIF
     13  8394				  -	      IF	$90 = $40
     14  8394				  -	      .byte	$60+4
     15  8394					      ENDIF
     16  8394				  -	      IF	$90 = $50
     17  8394				  -	      .byte	$80+4
     18  8394					      ENDIF
     19  8394				  -	      IF	$90 = $60
     20  8394				  -	      .byte	$C0+4
     21  8394					      ENDIF
     22  8394				  -	      IF	$90 = $70
     23  8394				  -	      .byte	$D0+4
     24  8394					      ENDIF
     25  8394				  -	      IF	$90 = $80
     26  8394				  -	      .byte	$B0+4
     27  8394					      ENDIF
     28  8394					      IF	$90 = $90
     29  8394		       94		      .byte.b	$90+4
     30  8395					      ENDIF
     31  8395				  -	      IF	$90 = $A0
     32  8395				  -	      .byte	$70+4
     33  8395					      ENDIF
     34  8395				  -	      IF	$90 = $B0
     35  8395				  -	      .byte	$50+4
     36  8395					      ENDIF
     37  8395				  -	      IF	$90 = $C0
     38  8395				  -	      .byte	$30+4
     39  8395					      ENDIF
     40  8395				  -	      IF	$90 = $D0
     41  8395				  -	      .byte	$30+4
     42  8395					      ENDIF
     43  8395				  -	      IF	$90 = $E0
     44  8395				  -	      .byte	$20+4
     45  8395					      ENDIF
     46  8395				  -	      IF	$90 = $F0
     47  8395				  -	      .byte	$40+4
     48  8395					      ENDIF
      0  8395					      NTSC_TO_PAL	$90, 4
      1  8395				  -	      IF	$90 = 0
      2  8395				  -	      .byte	$90+4
      3  8395					      ENDIF
      4  8395				  -	      IF	$90 = $10
      5  8395				  -	      .byte	$20+4
      6  8395					      ENDIF
      7  8395				  -	      IF	$90 = $20
      8  8395				  -	      .byte	$40+4
      9  8395					      ENDIF
     10  8395				  -	      IF	$90 = $30
     11  8395				  -	      .byte	$40+4
     12  8395					      ENDIF
     13  8395				  -	      IF	$90 = $40
     14  8395				  -	      .byte	$60+4
     15  8395					      ENDIF
     16  8395				  -	      IF	$90 = $50
     17  8395				  -	      .byte	$80+4
     18  8395					      ENDIF
     19  8395				  -	      IF	$90 = $60
     20  8395				  -	      .byte	$C0+4
     21  8395					      ENDIF
     22  8395				  -	      IF	$90 = $70
     23  8395				  -	      .byte	$D0+4
     24  8395					      ENDIF
     25  8395				  -	      IF	$90 = $80
     26  8395				  -	      .byte	$B0+4
     27  8395					      ENDIF
     28  8395					      IF	$90 = $90
     29  8395		       94		      .byte.b	$90+4
     30  8396					      ENDIF
     31  8396				  -	      IF	$90 = $A0
     32  8396				  -	      .byte	$70+4
     33  8396					      ENDIF
     34  8396				  -	      IF	$90 = $B0
     35  8396				  -	      .byte	$50+4
     36  8396					      ENDIF
     37  8396				  -	      IF	$90 = $C0
     38  8396				  -	      .byte	$30+4
     39  8396					      ENDIF
     40  8396				  -	      IF	$90 = $D0
     41  8396				  -	      .byte	$30+4
     42  8396					      ENDIF
     43  8396				  -	      IF	$90 = $E0
     44  8396				  -	      .byte	$20+4
     45  8396					      ENDIF
     46  8396				  -	      IF	$90 = $F0
     47  8396				  -	      .byte	$40+4
     48  8396					      ENDIF
      0  8396					      NTSC_TO_PAL	$90, 4
      1  8396				  -	      IF	$90 = 0
      2  8396				  -	      .byte	$90+4
      3  8396					      ENDIF
      4  8396				  -	      IF	$90 = $10
      5  8396				  -	      .byte	$20+4
      6  8396					      ENDIF
      7  8396				  -	      IF	$90 = $20
      8  8396				  -	      .byte	$40+4
      9  8396					      ENDIF
     10  8396				  -	      IF	$90 = $30
     11  8396				  -	      .byte	$40+4
     12  8396					      ENDIF
     13  8396				  -	      IF	$90 = $40
     14  8396				  -	      .byte	$60+4
     15  8396					      ENDIF
     16  8396				  -	      IF	$90 = $50
     17  8396				  -	      .byte	$80+4
     18  8396					      ENDIF
     19  8396				  -	      IF	$90 = $60
     20  8396				  -	      .byte	$C0+4
     21  8396					      ENDIF
     22  8396				  -	      IF	$90 = $70
     23  8396				  -	      .byte	$D0+4
     24  8396					      ENDIF
     25  8396				  -	      IF	$90 = $80
     26  8396				  -	      .byte	$B0+4
     27  8396					      ENDIF
     28  8396					      IF	$90 = $90
     29  8396		       94		      .byte.b	$90+4
     30  8397					      ENDIF
     31  8397				  -	      IF	$90 = $A0
     32  8397				  -	      .byte	$70+4
     33  8397					      ENDIF
     34  8397				  -	      IF	$90 = $B0
     35  8397				  -	      .byte	$50+4
     36  8397					      ENDIF
     37  8397				  -	      IF	$90 = $C0
     38  8397				  -	      .byte	$30+4
     39  8397					      ENDIF
     40  8397				  -	      IF	$90 = $D0
     41  8397				  -	      .byte	$30+4
     42  8397					      ENDIF
     43  8397				  -	      IF	$90 = $E0
     44  8397				  -	      .byte	$20+4
     45  8397					      ENDIF
     46  8397				  -	      IF	$90 = $F0
     47  8397				  -	      .byte	$40+4
     48  8397					      ENDIF
      0  8397					      NTSC_TO_PAL	$90, 4
      1  8397				  -	      IF	$90 = 0
      2  8397				  -	      .byte	$90+4
      3  8397					      ENDIF
      4  8397				  -	      IF	$90 = $10
      5  8397				  -	      .byte	$20+4
      6  8397					      ENDIF
      7  8397				  -	      IF	$90 = $20
      8  8397				  -	      .byte	$40+4
      9  8397					      ENDIF
     10  8397				  -	      IF	$90 = $30
     11  8397				  -	      .byte	$40+4
     12  8397					      ENDIF
     13  8397				  -	      IF	$90 = $40
     14  8397				  -	      .byte	$60+4
     15  8397					      ENDIF
     16  8397				  -	      IF	$90 = $50
     17  8397				  -	      .byte	$80+4
     18  8397					      ENDIF
     19  8397				  -	      IF	$90 = $60
     20  8397				  -	      .byte	$C0+4
     21  8397					      ENDIF
     22  8397				  -	      IF	$90 = $70
     23  8397				  -	      .byte	$D0+4
     24  8397					      ENDIF
     25  8397				  -	      IF	$90 = $80
     26  8397				  -	      .byte	$B0+4
     27  8397					      ENDIF
     28  8397					      IF	$90 = $90
     29  8397		       94		      .byte.b	$90+4
     30  8398					      ENDIF
     31  8398				  -	      IF	$90 = $A0
     32  8398				  -	      .byte	$70+4
     33  8398					      ENDIF
     34  8398				  -	      IF	$90 = $B0
     35  8398				  -	      .byte	$50+4
     36  8398					      ENDIF
     37  8398				  -	      IF	$90 = $C0
     38  8398				  -	      .byte	$30+4
     39  8398					      ENDIF
     40  8398				  -	      IF	$90 = $D0
     41  8398				  -	      .byte	$30+4
     42  8398					      ENDIF
     43  8398				  -	      IF	$90 = $E0
     44  8398				  -	      .byte	$20+4
     45  8398					      ENDIF
     46  8398				  -	      IF	$90 = $F0
     47  8398				  -	      .byte	$40+4
     48  8398					      ENDIF
      0  8398					      NTSC_TO_PAL	$90, 4
      1  8398				  -	      IF	$90 = 0
      2  8398				  -	      .byte	$90+4
      3  8398					      ENDIF
      4  8398				  -	      IF	$90 = $10
      5  8398				  -	      .byte	$20+4
      6  8398					      ENDIF
      7  8398				  -	      IF	$90 = $20
      8  8398				  -	      .byte	$40+4
      9  8398					      ENDIF
     10  8398				  -	      IF	$90 = $30
     11  8398				  -	      .byte	$40+4
     12  8398					      ENDIF
     13  8398				  -	      IF	$90 = $40
     14  8398				  -	      .byte	$60+4
     15  8398					      ENDIF
     16  8398				  -	      IF	$90 = $50
     17  8398				  -	      .byte	$80+4
     18  8398					      ENDIF
     19  8398				  -	      IF	$90 = $60
     20  8398				  -	      .byte	$C0+4
     21  8398					      ENDIF
     22  8398				  -	      IF	$90 = $70
     23  8398				  -	      .byte	$D0+4
     24  8398					      ENDIF
     25  8398				  -	      IF	$90 = $80
     26  8398				  -	      .byte	$B0+4
     27  8398					      ENDIF
     28  8398					      IF	$90 = $90
     29  8398		       94		      .byte.b	$90+4
     30  8399					      ENDIF
     31  8399				  -	      IF	$90 = $A0
     32  8399				  -	      .byte	$70+4
     33  8399					      ENDIF
     34  8399				  -	      IF	$90 = $B0
     35  8399				  -	      .byte	$50+4
     36  8399					      ENDIF
     37  8399				  -	      IF	$90 = $C0
     38  8399				  -	      .byte	$30+4
     39  8399					      ENDIF
     40  8399				  -	      IF	$90 = $D0
     41  8399				  -	      .byte	$30+4
     42  8399					      ENDIF
     43  8399				  -	      IF	$90 = $E0
     44  8399				  -	      .byte	$20+4
     45  8399					      ENDIF
     46  8399				  -	      IF	$90 = $F0
     47  8399				  -	      .byte	$40+4
     48  8399					      ENDIF
      0  8399					      NTSC_TO_PAL	$90, 4
      1  8399				  -	      IF	$90 = 0
      2  8399				  -	      .byte	$90+4
      3  8399					      ENDIF
      4  8399				  -	      IF	$90 = $10
      5  8399				  -	      .byte	$20+4
      6  8399					      ENDIF
      7  8399				  -	      IF	$90 = $20
      8  8399				  -	      .byte	$40+4
      9  8399					      ENDIF
     10  8399				  -	      IF	$90 = $30
     11  8399				  -	      .byte	$40+4
     12  8399					      ENDIF
     13  8399				  -	      IF	$90 = $40
     14  8399				  -	      .byte	$60+4
     15  8399					      ENDIF
     16  8399				  -	      IF	$90 = $50
     17  8399				  -	      .byte	$80+4
     18  8399					      ENDIF
     19  8399				  -	      IF	$90 = $60
     20  8399				  -	      .byte	$C0+4
     21  8399					      ENDIF
     22  8399				  -	      IF	$90 = $70
     23  8399				  -	      .byte	$D0+4
     24  8399					      ENDIF
     25  8399				  -	      IF	$90 = $80
     26  8399				  -	      .byte	$B0+4
     27  8399					      ENDIF
     28  8399					      IF	$90 = $90
     29  8399		       94		      .byte.b	$90+4
     30  839a					      ENDIF
     31  839a				  -	      IF	$90 = $A0
     32  839a				  -	      .byte	$70+4
     33  839a					      ENDIF
     34  839a				  -	      IF	$90 = $B0
     35  839a				  -	      .byte	$50+4
     36  839a					      ENDIF
     37  839a				  -	      IF	$90 = $C0
     38  839a				  -	      .byte	$30+4
     39  839a					      ENDIF
     40  839a				  -	      IF	$90 = $D0
     41  839a				  -	      .byte	$30+4
     42  839a					      ENDIF
     43  839a				  -	      IF	$90 = $E0
     44  839a				  -	      .byte	$20+4
     45  839a					      ENDIF
     46  839a				  -	      IF	$90 = $F0
     47  839a				  -	      .byte	$40+4
     48  839a					      ENDIF
      0  839a					      NTSC_TO_PAL	$30, 4
      1  839a				  -	      IF	$30 = 0
      2  839a				  -	      .byte	$30+4
      3  839a					      ENDIF
      4  839a				  -	      IF	$30 = $10
      5  839a				  -	      .byte	$20+4
      6  839a					      ENDIF
      7  839a				  -	      IF	$30 = $20
      8  839a				  -	      .byte	$40+4
      9  839a					      ENDIF
     10  839a					      IF	$30 = $30
     11  839a		       44		      .byte.b	$40+4
     12  839b					      ENDIF
     13  839b				  -	      IF	$30 = $40
     14  839b				  -	      .byte	$60+4
     15  839b					      ENDIF
     16  839b				  -	      IF	$30 = $50
     17  839b				  -	      .byte	$80+4
     18  839b					      ENDIF
     19  839b				  -	      IF	$30 = $60
     20  839b				  -	      .byte	$C0+4
     21  839b					      ENDIF
     22  839b				  -	      IF	$30 = $70
     23  839b				  -	      .byte	$D0+4
     24  839b					      ENDIF
     25  839b				  -	      IF	$30 = $80
     26  839b				  -	      .byte	$B0+4
     27  839b					      ENDIF
     28  839b				  -	      IF	$30 = $90
     29  839b				  -	      .byte	$90+4
     30  839b					      ENDIF
     31  839b				  -	      IF	$30 = $A0
     32  839b				  -	      .byte	$70+4
     33  839b					      ENDIF
     34  839b				  -	      IF	$30 = $B0
     35  839b				  -	      .byte	$50+4
     36  839b					      ENDIF
     37  839b				  -	      IF	$30 = $C0
     38  839b				  -	      .byte	$30+4
     39  839b					      ENDIF
     40  839b				  -	      IF	$30 = $D0
     41  839b				  -	      .byte	$30+4
     42  839b					      ENDIF
     43  839b				  -	      IF	$30 = $E0
     44  839b				  -	      .byte	$20+4
     45  839b					      ENDIF
     46  839b				  -	      IF	$30 = $F0
     47  839b				  -	      .byte	$40+4
     48  839b					      ENDIF
      0  839b					      NTSC_TO_PAL	$0,12
      1  839b					      IF	$0 = 0
      2  839b		       0c		      .byte.b	$0+12
      3  839c					      ENDIF
      4  839c				  -	      IF	$0 = $10
      5  839c				  -	      .byte	$20+12
      6  839c					      ENDIF
      7  839c				  -	      IF	$0 = $20
      8  839c				  -	      .byte	$40+12
      9  839c					      ENDIF
     10  839c				  -	      IF	$0 = $30
     11  839c				  -	      .byte	$40+12
     12  839c					      ENDIF
     13  839c				  -	      IF	$0 = $40
     14  839c				  -	      .byte	$60+12
     15  839c					      ENDIF
     16  839c				  -	      IF	$0 = $50
     17  839c				  -	      .byte	$80+12
     18  839c					      ENDIF
     19  839c				  -	      IF	$0 = $60
     20  839c				  -	      .byte	$C0+12
     21  839c					      ENDIF
     22  839c				  -	      IF	$0 = $70
     23  839c				  -	      .byte	$D0+12
     24  839c					      ENDIF
     25  839c				  -	      IF	$0 = $80
     26  839c				  -	      .byte	$B0+12
     27  839c					      ENDIF
     28  839c				  -	      IF	$0 = $90
     29  839c				  -	      .byte	$90+12
     30  839c					      ENDIF
     31  839c				  -	      IF	$0 = $A0
     32  839c				  -	      .byte	$70+12
     33  839c					      ENDIF
     34  839c				  -	      IF	$0 = $B0
     35  839c				  -	      .byte	$50+12
     36  839c					      ENDIF
     37  839c				  -	      IF	$0 = $C0
     38  839c				  -	      .byte	$30+12
     39  839c					      ENDIF
     40  839c				  -	      IF	$0 = $D0
     41  839c				  -	      .byte	$30+12
     42  839c					      ENDIF
     43  839c				  -	      IF	$0 = $E0
     44  839c				  -	      .byte	$20+12
     45  839c					      ENDIF
     46  839c				  -	      IF	$0 = $F0
     47  839c				  -	      .byte	$40+12
     48  839c					      ENDIF
      0  839c					      NTSC_TO_PAL	$90, 6
      1  839c				  -	      IF	$90 = 0
      2  839c				  -	      .byte	$90+6
      3  839c					      ENDIF
      4  839c				  -	      IF	$90 = $10
      5  839c				  -	      .byte	$20+6
      6  839c					      ENDIF
      7  839c				  -	      IF	$90 = $20
      8  839c				  -	      .byte	$40+6
      9  839c					      ENDIF
     10  839c				  -	      IF	$90 = $30
     11  839c				  -	      .byte	$40+6
     12  839c					      ENDIF
     13  839c				  -	      IF	$90 = $40
     14  839c				  -	      .byte	$60+6
     15  839c					      ENDIF
     16  839c				  -	      IF	$90 = $50
     17  839c				  -	      .byte	$80+6
     18  839c					      ENDIF
     19  839c				  -	      IF	$90 = $60
     20  839c				  -	      .byte	$C0+6
     21  839c					      ENDIF
     22  839c				  -	      IF	$90 = $70
     23  839c				  -	      .byte	$D0+6
     24  839c					      ENDIF
     25  839c				  -	      IF	$90 = $80
     26  839c				  -	      .byte	$B0+6
     27  839c					      ENDIF
     28  839c					      IF	$90 = $90
     29  839c		       96		      .byte.b	$90+6
     30  839d					      ENDIF
     31  839d				  -	      IF	$90 = $A0
     32  839d				  -	      .byte	$70+6
     33  839d					      ENDIF
     34  839d				  -	      IF	$90 = $B0
     35  839d				  -	      .byte	$50+6
     36  839d					      ENDIF
     37  839d				  -	      IF	$90 = $C0
     38  839d				  -	      .byte	$30+6
     39  839d					      ENDIF
     40  839d				  -	      IF	$90 = $D0
     41  839d				  -	      .byte	$30+6
     42  839d					      ENDIF
     43  839d				  -	      IF	$90 = $E0
     44  839d				  -	      .byte	$20+6
     45  839d					      ENDIF
     46  839d				  -	      IF	$90 = $F0
     47  839d				  -	      .byte	$40+6
     48  839d					      ENDIF
      0  839d					      NTSC_TO_PAL	$90, 6
      1  839d				  -	      IF	$90 = 0
      2  839d				  -	      .byte	$90+6
      3  839d					      ENDIF
      4  839d				  -	      IF	$90 = $10
      5  839d				  -	      .byte	$20+6
      6  839d					      ENDIF
      7  839d				  -	      IF	$90 = $20
      8  839d				  -	      .byte	$40+6
      9  839d					      ENDIF
     10  839d				  -	      IF	$90 = $30
     11  839d				  -	      .byte	$40+6
     12  839d					      ENDIF
     13  839d				  -	      IF	$90 = $40
     14  839d				  -	      .byte	$60+6
     15  839d					      ENDIF
     16  839d				  -	      IF	$90 = $50
     17  839d				  -	      .byte	$80+6
     18  839d					      ENDIF
     19  839d				  -	      IF	$90 = $60
     20  839d				  -	      .byte	$C0+6
     21  839d					      ENDIF
     22  839d				  -	      IF	$90 = $70
     23  839d				  -	      .byte	$D0+6
     24  839d					      ENDIF
     25  839d				  -	      IF	$90 = $80
     26  839d				  -	      .byte	$B0+6
     27  839d					      ENDIF
     28  839d					      IF	$90 = $90
     29  839d		       96		      .byte.b	$90+6
     30  839e					      ENDIF
     31  839e				  -	      IF	$90 = $A0
     32  839e				  -	      .byte	$70+6
     33  839e					      ENDIF
     34  839e				  -	      IF	$90 = $B0
     35  839e				  -	      .byte	$50+6
     36  839e					      ENDIF
     37  839e				  -	      IF	$90 = $C0
     38  839e				  -	      .byte	$30+6
     39  839e					      ENDIF
     40  839e				  -	      IF	$90 = $D0
     41  839e				  -	      .byte	$30+6
     42  839e					      ENDIF
     43  839e				  -	      IF	$90 = $E0
     44  839e				  -	      .byte	$20+6
     45  839e					      ENDIF
     46  839e				  -	      IF	$90 = $F0
     47  839e				  -	      .byte	$40+6
     48  839e					      ENDIF
      0  839e					      NTSC_TO_PAL	$90, 6
      1  839e				  -	      IF	$90 = 0
      2  839e				  -	      .byte	$90+6
      3  839e					      ENDIF
      4  839e				  -	      IF	$90 = $10
      5  839e				  -	      .byte	$20+6
      6  839e					      ENDIF
      7  839e				  -	      IF	$90 = $20
      8  839e				  -	      .byte	$40+6
      9  839e					      ENDIF
     10  839e				  -	      IF	$90 = $30
     11  839e				  -	      .byte	$40+6
     12  839e					      ENDIF
     13  839e				  -	      IF	$90 = $40
     14  839e				  -	      .byte	$60+6
     15  839e					      ENDIF
     16  839e				  -	      IF	$90 = $50
     17  839e				  -	      .byte	$80+6
     18  839e					      ENDIF
     19  839e				  -	      IF	$90 = $60
     20  839e				  -	      .byte	$C0+6
     21  839e					      ENDIF
     22  839e				  -	      IF	$90 = $70
     23  839e				  -	      .byte	$D0+6
     24  839e					      ENDIF
     25  839e				  -	      IF	$90 = $80
     26  839e				  -	      .byte	$B0+6
     27  839e					      ENDIF
     28  839e					      IF	$90 = $90
     29  839e		       96		      .byte.b	$90+6
     30  839f					      ENDIF
     31  839f				  -	      IF	$90 = $A0
     32  839f				  -	      .byte	$70+6
     33  839f					      ENDIF
     34  839f				  -	      IF	$90 = $B0
     35  839f				  -	      .byte	$50+6
     36  839f					      ENDIF
     37  839f				  -	      IF	$90 = $C0
     38  839f				  -	      .byte	$30+6
     39  839f					      ENDIF
     40  839f				  -	      IF	$90 = $D0
     41  839f				  -	      .byte	$30+6
     42  839f					      ENDIF
     43  839f				  -	      IF	$90 = $E0
     44  839f				  -	      .byte	$20+6
     45  839f					      ENDIF
     46  839f				  -	      IF	$90 = $F0
     47  839f				  -	      .byte	$40+6
     48  839f					      ENDIF
      0  839f					      NTSC_TO_PAL	$90, 6
      1  839f				  -	      IF	$90 = 0
      2  839f				  -	      .byte	$90+6
      3  839f					      ENDIF
      4  839f				  -	      IF	$90 = $10
      5  839f				  -	      .byte	$20+6
      6  839f					      ENDIF
      7  839f				  -	      IF	$90 = $20
      8  839f				  -	      .byte	$40+6
      9  839f					      ENDIF
     10  839f				  -	      IF	$90 = $30
     11  839f				  -	      .byte	$40+6
     12  839f					      ENDIF
     13  839f				  -	      IF	$90 = $40
     14  839f				  -	      .byte	$60+6
     15  839f					      ENDIF
     16  839f				  -	      IF	$90 = $50
     17  839f				  -	      .byte	$80+6
     18  839f					      ENDIF
     19  839f				  -	      IF	$90 = $60
     20  839f				  -	      .byte	$C0+6
     21  839f					      ENDIF
     22  839f				  -	      IF	$90 = $70
     23  839f				  -	      .byte	$D0+6
     24  839f					      ENDIF
     25  839f				  -	      IF	$90 = $80
     26  839f				  -	      .byte	$B0+6
     27  839f					      ENDIF
     28  839f					      IF	$90 = $90
     29  839f		       96		      .byte.b	$90+6
     30  83a0					      ENDIF
     31  83a0				  -	      IF	$90 = $A0
     32  83a0				  -	      .byte	$70+6
     33  83a0					      ENDIF
     34  83a0				  -	      IF	$90 = $B0
     35  83a0				  -	      .byte	$50+6
     36  83a0					      ENDIF
     37  83a0				  -	      IF	$90 = $C0
     38  83a0				  -	      .byte	$30+6
     39  83a0					      ENDIF
     40  83a0				  -	      IF	$90 = $D0
     41  83a0				  -	      .byte	$30+6
     42  83a0					      ENDIF
     43  83a0				  -	      IF	$90 = $E0
     44  83a0				  -	      .byte	$20+6
     45  83a0					      ENDIF
     46  83a0				  -	      IF	$90 = $F0
     47  83a0				  -	      .byte	$40+6
     48  83a0					      ENDIF
      0  83a0					      NTSC_TO_PAL	$90, 6
      1  83a0				  -	      IF	$90 = 0
      2  83a0				  -	      .byte	$90+6
      3  83a0					      ENDIF
      4  83a0				  -	      IF	$90 = $10
      5  83a0				  -	      .byte	$20+6
      6  83a0					      ENDIF
      7  83a0				  -	      IF	$90 = $20
      8  83a0				  -	      .byte	$40+6
      9  83a0					      ENDIF
     10  83a0				  -	      IF	$90 = $30
     11  83a0				  -	      .byte	$40+6
     12  83a0					      ENDIF
     13  83a0				  -	      IF	$90 = $40
     14  83a0				  -	      .byte	$60+6
     15  83a0					      ENDIF
     16  83a0				  -	      IF	$90 = $50
     17  83a0				  -	      .byte	$80+6
     18  83a0					      ENDIF
     19  83a0				  -	      IF	$90 = $60
     20  83a0				  -	      .byte	$C0+6
     21  83a0					      ENDIF
     22  83a0				  -	      IF	$90 = $70
     23  83a0				  -	      .byte	$D0+6
     24  83a0					      ENDIF
     25  83a0				  -	      IF	$90 = $80
     26  83a0				  -	      .byte	$B0+6
     27  83a0					      ENDIF
     28  83a0					      IF	$90 = $90
     29  83a0		       96		      .byte.b	$90+6
     30  83a1					      ENDIF
     31  83a1				  -	      IF	$90 = $A0
     32  83a1				  -	      .byte	$70+6
     33  83a1					      ENDIF
     34  83a1				  -	      IF	$90 = $B0
     35  83a1				  -	      .byte	$50+6
     36  83a1					      ENDIF
     37  83a1				  -	      IF	$90 = $C0
     38  83a1				  -	      .byte	$30+6
     39  83a1					      ENDIF
     40  83a1				  -	      IF	$90 = $D0
     41  83a1				  -	      .byte	$30+6
     42  83a1					      ENDIF
     43  83a1				  -	      IF	$90 = $E0
     44  83a1				  -	      .byte	$20+6
     45  83a1					      ENDIF
     46  83a1				  -	      IF	$90 = $F0
     47  83a1				  -	      .byte	$40+6
     48  83a1					      ENDIF
      0  83a1					      NTSC_TO_PAL	$0, 12
      1  83a1					      IF	$0 = 0
      2  83a1		       0c		      .byte.b	$0+12
      3  83a2					      ENDIF
      4  83a2				  -	      IF	$0 = $10
      5  83a2				  -	      .byte	$20+12
      6  83a2					      ENDIF
      7  83a2				  -	      IF	$0 = $20
      8  83a2				  -	      .byte	$40+12
      9  83a2					      ENDIF
     10  83a2				  -	      IF	$0 = $30
     11  83a2				  -	      .byte	$40+12
     12  83a2					      ENDIF
     13  83a2				  -	      IF	$0 = $40
     14  83a2				  -	      .byte	$60+12
     15  83a2					      ENDIF
     16  83a2				  -	      IF	$0 = $50
     17  83a2				  -	      .byte	$80+12
     18  83a2					      ENDIF
     19  83a2				  -	      IF	$0 = $60
     20  83a2				  -	      .byte	$C0+12
     21  83a2					      ENDIF
     22  83a2				  -	      IF	$0 = $70
     23  83a2				  -	      .byte	$D0+12
     24  83a2					      ENDIF
     25  83a2				  -	      IF	$0 = $80
     26  83a2				  -	      .byte	$B0+12
     27  83a2					      ENDIF
     28  83a2				  -	      IF	$0 = $90
     29  83a2				  -	      .byte	$90+12
     30  83a2					      ENDIF
     31  83a2				  -	      IF	$0 = $A0
     32  83a2				  -	      .byte	$70+12
     33  83a2					      ENDIF
     34  83a2				  -	      IF	$0 = $B0
     35  83a2				  -	      .byte	$50+12
     36  83a2					      ENDIF
     37  83a2				  -	      IF	$0 = $C0
     38  83a2				  -	      .byte	$30+12
     39  83a2					      ENDIF
     40  83a2				  -	      IF	$0 = $D0
     41  83a2				  -	      .byte	$30+12
     42  83a2					      ENDIF
     43  83a2				  -	      IF	$0 = $E0
     44  83a2				  -	      .byte	$20+12
     45  83a2					      ENDIF
     46  83a2				  -	      IF	$0 = $F0
     47  83a2				  -	      .byte	$40+12
     48  83a2					      ENDIF
      0  83a2					      NTSC_TO_PAL	$30, 8
      1  83a2				  -	      IF	$30 = 0
      2  83a2				  -	      .byte	$30+8
      3  83a2					      ENDIF
      4  83a2				  -	      IF	$30 = $10
      5  83a2				  -	      .byte	$20+8
      6  83a2					      ENDIF
      7  83a2				  -	      IF	$30 = $20
      8  83a2				  -	      .byte	$40+8
      9  83a2					      ENDIF
     10  83a2					      IF	$30 = $30
     11  83a2		       48		      .byte.b	$40+8
     12  83a3					      ENDIF
     13  83a3				  -	      IF	$30 = $40
     14  83a3				  -	      .byte	$60+8
     15  83a3					      ENDIF
     16  83a3				  -	      IF	$30 = $50
     17  83a3				  -	      .byte	$80+8
     18  83a3					      ENDIF
     19  83a3				  -	      IF	$30 = $60
     20  83a3				  -	      .byte	$C0+8
     21  83a3					      ENDIF
     22  83a3				  -	      IF	$30 = $70
     23  83a3				  -	      .byte	$D0+8
     24  83a3					      ENDIF
     25  83a3				  -	      IF	$30 = $80
     26  83a3				  -	      .byte	$B0+8
     27  83a3					      ENDIF
     28  83a3				  -	      IF	$30 = $90
     29  83a3				  -	      .byte	$90+8
     30  83a3					      ENDIF
     31  83a3				  -	      IF	$30 = $A0
     32  83a3				  -	      .byte	$70+8
     33  83a3					      ENDIF
     34  83a3				  -	      IF	$30 = $B0
     35  83a3				  -	      .byte	$50+8
     36  83a3					      ENDIF
     37  83a3				  -	      IF	$30 = $C0
     38  83a3				  -	      .byte	$30+8
     39  83a3					      ENDIF
     40  83a3				  -	      IF	$30 = $D0
     41  83a3				  -	      .byte	$30+8
     42  83a3					      ENDIF
     43  83a3				  -	      IF	$30 = $E0
     44  83a3				  -	      .byte	$20+8
     45  83a3					      ENDIF
     46  83a3				  -	      IF	$30 = $F0
     47  83a3				  -	      .byte	$40+8
     48  83a3					      ENDIF
      0  83a3					      NTSC_TO_PAL	$30, 8
      1  83a3				  -	      IF	$30 = 0
      2  83a3				  -	      .byte	$30+8
      3  83a3					      ENDIF
      4  83a3				  -	      IF	$30 = $10
      5  83a3				  -	      .byte	$20+8
      6  83a3					      ENDIF
      7  83a3				  -	      IF	$30 = $20
      8  83a3				  -	      .byte	$40+8
      9  83a3					      ENDIF
     10  83a3					      IF	$30 = $30
     11  83a3		       48		      .byte.b	$40+8
     12  83a4					      ENDIF
     13  83a4				  -	      IF	$30 = $40
     14  83a4				  -	      .byte	$60+8
     15  83a4					      ENDIF
     16  83a4				  -	      IF	$30 = $50
     17  83a4				  -	      .byte	$80+8
     18  83a4					      ENDIF
     19  83a4				  -	      IF	$30 = $60
     20  83a4				  -	      .byte	$C0+8
     21  83a4					      ENDIF
     22  83a4				  -	      IF	$30 = $70
     23  83a4				  -	      .byte	$D0+8
     24  83a4					      ENDIF
     25  83a4				  -	      IF	$30 = $80
     26  83a4				  -	      .byte	$B0+8
     27  83a4					      ENDIF
     28  83a4				  -	      IF	$30 = $90
     29  83a4				  -	      .byte	$90+8
     30  83a4					      ENDIF
     31  83a4				  -	      IF	$30 = $A0
     32  83a4				  -	      .byte	$70+8
     33  83a4					      ENDIF
     34  83a4				  -	      IF	$30 = $B0
     35  83a4				  -	      .byte	$50+8
     36  83a4					      ENDIF
     37  83a4				  -	      IF	$30 = $C0
     38  83a4				  -	      .byte	$30+8
     39  83a4					      ENDIF
     40  83a4				  -	      IF	$30 = $D0
     41  83a4				  -	      .byte	$30+8
     42  83a4					      ENDIF
     43  83a4				  -	      IF	$30 = $E0
     44  83a4				  -	      .byte	$20+8
     45  83a4					      ENDIF
     46  83a4				  -	      IF	$30 = $F0
     47  83a4				  -	      .byte	$40+8
     48  83a4					      ENDIF
      0  83a4					      NTSC_TO_PAL	$30, 8
      1  83a4				  -	      IF	$30 = 0
      2  83a4				  -	      .byte	$30+8
      3  83a4					      ENDIF
      4  83a4				  -	      IF	$30 = $10
      5  83a4				  -	      .byte	$20+8
      6  83a4					      ENDIF
      7  83a4				  -	      IF	$30 = $20
      8  83a4				  -	      .byte	$40+8
      9  83a4					      ENDIF
     10  83a4					      IF	$30 = $30
     11  83a4		       48		      .byte.b	$40+8
     12  83a5					      ENDIF
     13  83a5				  -	      IF	$30 = $40
     14  83a5				  -	      .byte	$60+8
     15  83a5					      ENDIF
     16  83a5				  -	      IF	$30 = $50
     17  83a5				  -	      .byte	$80+8
     18  83a5					      ENDIF
     19  83a5				  -	      IF	$30 = $60
     20  83a5				  -	      .byte	$C0+8
     21  83a5					      ENDIF
     22  83a5				  -	      IF	$30 = $70
     23  83a5				  -	      .byte	$D0+8
     24  83a5					      ENDIF
     25  83a5				  -	      IF	$30 = $80
     26  83a5				  -	      .byte	$B0+8
     27  83a5					      ENDIF
     28  83a5				  -	      IF	$30 = $90
     29  83a5				  -	      .byte	$90+8
     30  83a5					      ENDIF
     31  83a5				  -	      IF	$30 = $A0
     32  83a5				  -	      .byte	$70+8
     33  83a5					      ENDIF
     34  83a5				  -	      IF	$30 = $B0
     35  83a5				  -	      .byte	$50+8
     36  83a5					      ENDIF
     37  83a5				  -	      IF	$30 = $C0
     38  83a5				  -	      .byte	$30+8
     39  83a5					      ENDIF
     40  83a5				  -	      IF	$30 = $D0
     41  83a5				  -	      .byte	$30+8
     42  83a5					      ENDIF
     43  83a5				  -	      IF	$30 = $E0
     44  83a5				  -	      .byte	$20+8
     45  83a5					      ENDIF
     46  83a5				  -	      IF	$30 = $F0
     47  83a5				  -	      .byte	$40+8
     48  83a5					      ENDIF
      0  83a5					      NTSC_TO_PAL	$30, 8
      1  83a5				  -	      IF	$30 = 0
      2  83a5				  -	      .byte	$30+8
      3  83a5					      ENDIF
      4  83a5				  -	      IF	$30 = $10
      5  83a5				  -	      .byte	$20+8
      6  83a5					      ENDIF
      7  83a5				  -	      IF	$30 = $20
      8  83a5				  -	      .byte	$40+8
      9  83a5					      ENDIF
     10  83a5					      IF	$30 = $30
     11  83a5		       48		      .byte.b	$40+8
     12  83a6					      ENDIF
     13  83a6				  -	      IF	$30 = $40
     14  83a6				  -	      .byte	$60+8
     15  83a6					      ENDIF
     16  83a6				  -	      IF	$30 = $50
     17  83a6				  -	      .byte	$80+8
     18  83a6					      ENDIF
     19  83a6				  -	      IF	$30 = $60
     20  83a6				  -	      .byte	$C0+8
     21  83a6					      ENDIF
     22  83a6				  -	      IF	$30 = $70
     23  83a6				  -	      .byte	$D0+8
     24  83a6					      ENDIF
     25  83a6				  -	      IF	$30 = $80
     26  83a6				  -	      .byte	$B0+8
     27  83a6					      ENDIF
     28  83a6				  -	      IF	$30 = $90
     29  83a6				  -	      .byte	$90+8
     30  83a6					      ENDIF
     31  83a6				  -	      IF	$30 = $A0
     32  83a6				  -	      .byte	$70+8
     33  83a6					      ENDIF
     34  83a6				  -	      IF	$30 = $B0
     35  83a6				  -	      .byte	$50+8
     36  83a6					      ENDIF
     37  83a6				  -	      IF	$30 = $C0
     38  83a6				  -	      .byte	$30+8
     39  83a6					      ENDIF
     40  83a6				  -	      IF	$30 = $D0
     41  83a6				  -	      .byte	$30+8
     42  83a6					      ENDIF
     43  83a6				  -	      IF	$30 = $E0
     44  83a6				  -	      .byte	$20+8
     45  83a6					      ENDIF
     46  83a6				  -	      IF	$30 = $F0
     47  83a6				  -	      .byte	$40+8
     48  83a6					      ENDIF
      0  83a6					      NTSC_TO_PAL	$30, 8
      1  83a6				  -	      IF	$30 = 0
      2  83a6				  -	      .byte	$30+8
      3  83a6					      ENDIF
      4  83a6				  -	      IF	$30 = $10
      5  83a6				  -	      .byte	$20+8
      6  83a6					      ENDIF
      7  83a6				  -	      IF	$30 = $20
      8  83a6				  -	      .byte	$40+8
      9  83a6					      ENDIF
     10  83a6					      IF	$30 = $30
     11  83a6		       48		      .byte.b	$40+8
     12  83a7					      ENDIF
     13  83a7				  -	      IF	$30 = $40
     14  83a7				  -	      .byte	$60+8
     15  83a7					      ENDIF
     16  83a7				  -	      IF	$30 = $50
     17  83a7				  -	      .byte	$80+8
     18  83a7					      ENDIF
     19  83a7				  -	      IF	$30 = $60
     20  83a7				  -	      .byte	$C0+8
     21  83a7					      ENDIF
     22  83a7				  -	      IF	$30 = $70
     23  83a7				  -	      .byte	$D0+8
     24  83a7					      ENDIF
     25  83a7				  -	      IF	$30 = $80
     26  83a7				  -	      .byte	$B0+8
     27  83a7					      ENDIF
     28  83a7				  -	      IF	$30 = $90
     29  83a7				  -	      .byte	$90+8
     30  83a7					      ENDIF
     31  83a7				  -	      IF	$30 = $A0
     32  83a7				  -	      .byte	$70+8
     33  83a7					      ENDIF
     34  83a7				  -	      IF	$30 = $B0
     35  83a7				  -	      .byte	$50+8
     36  83a7					      ENDIF
     37  83a7				  -	      IF	$30 = $C0
     38  83a7				  -	      .byte	$30+8
     39  83a7					      ENDIF
     40  83a7				  -	      IF	$30 = $D0
     41  83a7				  -	      .byte	$30+8
     42  83a7					      ENDIF
     43  83a7				  -	      IF	$30 = $E0
     44  83a7				  -	      .byte	$20+8
     45  83a7					      ENDIF
     46  83a7				  -	      IF	$30 = $F0
     47  83a7				  -	      .byte	$40+8
     48  83a7					      ENDIF
      0  83a7					      NTSC_TO_PAL	$30, 8
      1  83a7				  -	      IF	$30 = 0
      2  83a7				  -	      .byte	$30+8
      3  83a7					      ENDIF
      4  83a7				  -	      IF	$30 = $10
      5  83a7				  -	      .byte	$20+8
      6  83a7					      ENDIF
      7  83a7				  -	      IF	$30 = $20
      8  83a7				  -	      .byte	$40+8
      9  83a7					      ENDIF
     10  83a7					      IF	$30 = $30
     11  83a7		       48		      .byte.b	$40+8
     12  83a8					      ENDIF
     13  83a8				  -	      IF	$30 = $40
     14  83a8				  -	      .byte	$60+8
     15  83a8					      ENDIF
     16  83a8				  -	      IF	$30 = $50
     17  83a8				  -	      .byte	$80+8
     18  83a8					      ENDIF
     19  83a8				  -	      IF	$30 = $60
     20  83a8				  -	      .byte	$C0+8
     21  83a8					      ENDIF
     22  83a8				  -	      IF	$30 = $70
     23  83a8				  -	      .byte	$D0+8
     24  83a8					      ENDIF
     25  83a8				  -	      IF	$30 = $80
     26  83a8				  -	      .byte	$B0+8
     27  83a8					      ENDIF
     28  83a8				  -	      IF	$30 = $90
     29  83a8				  -	      .byte	$90+8
     30  83a8					      ENDIF
     31  83a8				  -	      IF	$30 = $A0
     32  83a8				  -	      .byte	$70+8
     33  83a8					      ENDIF
     34  83a8				  -	      IF	$30 = $B0
     35  83a8				  -	      .byte	$50+8
     36  83a8					      ENDIF
     37  83a8				  -	      IF	$30 = $C0
     38  83a8				  -	      .byte	$30+8
     39  83a8					      ENDIF
     40  83a8				  -	      IF	$30 = $D0
     41  83a8				  -	      .byte	$30+8
     42  83a8					      ENDIF
     43  83a8				  -	      IF	$30 = $E0
     44  83a8				  -	      .byte	$20+8
     45  83a8					      ENDIF
     46  83a8				  -	      IF	$30 = $F0
     47  83a8				  -	      .byte	$40+8
     48  83a8					      ENDIF
      0  83a8					      NTSC_TO_PAL	$10, $C
      1  83a8				  -	      IF	$10 = 0
      2  83a8				  -	      .byte	$10+$C
      3  83a8					      ENDIF
      4  83a8					      IF	$10 = $10
      5  83a8		       2c		      .byte.b	$20+$C
      6  83a9					      ENDIF
      7  83a9				  -	      IF	$10 = $20
      8  83a9				  -	      .byte	$40+$C
      9  83a9					      ENDIF
     10  83a9				  -	      IF	$10 = $30
     11  83a9				  -	      .byte	$40+$C
     12  83a9					      ENDIF
     13  83a9				  -	      IF	$10 = $40
     14  83a9				  -	      .byte	$60+$C
     15  83a9					      ENDIF
     16  83a9				  -	      IF	$10 = $50
     17  83a9				  -	      .byte	$80+$C
     18  83a9					      ENDIF
     19  83a9				  -	      IF	$10 = $60
     20  83a9				  -	      .byte	$C0+$C
     21  83a9					      ENDIF
     22  83a9				  -	      IF	$10 = $70
     23  83a9				  -	      .byte	$D0+$C
     24  83a9					      ENDIF
     25  83a9				  -	      IF	$10 = $80
     26  83a9				  -	      .byte	$B0+$C
     27  83a9					      ENDIF
     28  83a9				  -	      IF	$10 = $90
     29  83a9				  -	      .byte	$90+$C
     30  83a9					      ENDIF
     31  83a9				  -	      IF	$10 = $A0
     32  83a9				  -	      .byte	$70+$C
     33  83a9					      ENDIF
     34  83a9				  -	      IF	$10 = $B0
     35  83a9				  -	      .byte	$50+$C
     36  83a9					      ENDIF
     37  83a9				  -	      IF	$10 = $C0
     38  83a9				  -	      .byte	$30+$C
     39  83a9					      ENDIF
     40  83a9				  -	      IF	$10 = $D0
     41  83a9				  -	      .byte	$30+$C
     42  83a9					      ENDIF
     43  83a9				  -	      IF	$10 = $E0
     44  83a9				  -	      .byte	$20+$C
     45  83a9					      ENDIF
     46  83a9				  -	      IF	$10 = $F0
     47  83a9				  -	      .byte	$40+$C
     48  83a9					      ENDIF
      0  83a9					      NTSC_TO_PAL	$10, $C
      1  83a9				  -	      IF	$10 = 0
      2  83a9				  -	      .byte	$10+$C
      3  83a9					      ENDIF
      4  83a9					      IF	$10 = $10
      5  83a9		       2c		      .byte.b	$20+$C
      6  83aa					      ENDIF
      7  83aa				  -	      IF	$10 = $20
      8  83aa				  -	      .byte	$40+$C
      9  83aa					      ENDIF
     10  83aa				  -	      IF	$10 = $30
     11  83aa				  -	      .byte	$40+$C
     12  83aa					      ENDIF
     13  83aa				  -	      IF	$10 = $40
     14  83aa				  -	      .byte	$60+$C
     15  83aa					      ENDIF
     16  83aa				  -	      IF	$10 = $50
     17  83aa				  -	      .byte	$80+$C
     18  83aa					      ENDIF
     19  83aa				  -	      IF	$10 = $60
     20  83aa				  -	      .byte	$C0+$C
     21  83aa					      ENDIF
     22  83aa				  -	      IF	$10 = $70
     23  83aa				  -	      .byte	$D0+$C
     24  83aa					      ENDIF
     25  83aa				  -	      IF	$10 = $80
     26  83aa				  -	      .byte	$B0+$C
     27  83aa					      ENDIF
     28  83aa				  -	      IF	$10 = $90
     29  83aa				  -	      .byte	$90+$C
     30  83aa					      ENDIF
     31  83aa				  -	      IF	$10 = $A0
     32  83aa				  -	      .byte	$70+$C
     33  83aa					      ENDIF
     34  83aa				  -	      IF	$10 = $B0
     35  83aa				  -	      .byte	$50+$C
     36  83aa					      ENDIF
     37  83aa				  -	      IF	$10 = $C0
     38  83aa				  -	      .byte	$30+$C
     39  83aa					      ENDIF
     40  83aa				  -	      IF	$10 = $D0
     41  83aa				  -	      .byte	$30+$C
     42  83aa					      ENDIF
     43  83aa				  -	      IF	$10 = $E0
     44  83aa				  -	      .byte	$20+$C
     45  83aa					      ENDIF
     46  83aa				  -	      IF	$10 = $F0
     47  83aa				  -	      .byte	$40+$C
     48  83aa					      ENDIF
    628  83aa
    629  83aa
    630  83aa		       00 00 00 00*xJoyMoveX  .byte.b	0,0,0,0,0,1, 1,1,0,-1,-1,-1,0,-1,1,0
    631  83ba
    632  83ba				   VBlankTime2x
    633  83ba		       46 46		      .byte.b	70,70
    634  83bc		       62 62		      .byte.b	98,98
    635  83be				   OverscanTime2X
    636  83be		       3f 3f		      .byte.b	63, 63
    637  83c0		       4d 4d		      .byte.b	77, 77
    638  83c2
    639  83c2		       00 20	   COLOUR_LINES =	32
    640  83c2				   colvecX
    641  83c2		       00 00 20 20	      .byte.b	0, 0, COLOUR_LINES, COLOUR_LINES
    642  83c6
    643  83c6
    644  83c6							;blankDig ds COLOUR_LINES,0
    645  83c6
    646  83c6							;topcolour
    647  83c6
    648  83c6							;    .byte 0
    649  83c6
    650  83c6							;    REPEAT TOPHAT/2
    651  83c6							;    .byte $F2
    652  83c6							;    .byte $F0
    653  83c6							;    REPEND
    654  83c6
    655  83c6							;quest
    656  83c6							;    REPEAT 9
    657  83c6							;	  .byte $60,$60,$0
    658  83c6							;    REPEND
    659  83c6
    660  83c6				   LDIGIT
    661  83c6							;.word blankDig
    662  83c6		       41 f4		      .word.w	LEFT_0
    663  83c8		       a1 f4		      .word.w	LEFT_1
    664  83ca		       20 f5		      .word.w	LEFT_2
    665  83cc		       80 f5		      .word.w	LEFT_3
    666  83ce		       e0 f5		      .word.w	LEFT_4
    667  83d0		       40 f6		      .word.w	LEFT_5
    668  83d2		       80 f6		      .word.w	LEFT_6
    669  83d4		       c0 f6		      .word.w	LEFT_7
    670  83d6		       00 f7		      .word.w	LEFT_8
    671  83d8		       40 f7		      .word.w	LEFT_9
    672  83da
    673  83da				   RDIGIT
    674  83da							;.word blankDig
    675  83da		       61 f4		      .word.w	RIGHT_0
    676  83dc		       c1 f4		      .word.w	RIGHT_1
    677  83de		       40 f5		      .word.w	RIGHT_2
    678  83e0		       a0 f5		      .word.w	RIGHT_3
    679  83e2		       00 f6		      .word.w	RIGHT_4
    680  83e4		       60 f6		      .word.w	RIGHT_5
    681  83e6		       a0 f6		      .word.w	RIGHT_6
    682  83e8		       e0 f6		      .word.w	RIGHT_7
    683  83ea		       20 f7		      .word.w	RIGHT_8
    684  83ec		       60 f7		      .word.w	RIGHT_9
    685  83ee
    686  83ee				   DIGITHUND
    687  83ee							;.word blankDig
    688  83ee		       81 f4		      .word.w	HUNDPF1_0
    689  83f0		       00 f5		      .word.w	HUNDPF1_1
    690  83f2		       60 f5		      .word.w	HUNDPF1_2
    691  83f4		       c0 f5		      .word.w	HUNDPF1_3
    692  83f6		       20 f6		      .word.w	HUNDPF1_4
    693  83f8		       80 f6		      .word.w	HUNDPF1_5
    694  83fa		       c0 f6		      .word.w	HUNDPF1_6
    695  83fc		       00 f7		      .word.w	HUNDPF1_7
    696  83fe		       40 f7		      .word.w	HUNDPF1_8
    697  8400		       80 f7		      .word.w	HUNDPF1_9
    698  8402							;	  .word blankDig
    699  8402
    700  8402
    701  8402				   lid0
    702  8402		       e0		      .byte.b	%11100000
    703  8403		       e0		      .byte.b	%11100000
    704  8404		       e0		      .byte.b	%11100000
    705  8405		       e0		      .byte.b	%11100000
    706  8406		       e0		      .byte.b	%11100000
    707  8407		       e0		      .byte.b	%11100000
    708  8408		       60		      .byte.b	%01100000
    709  8409		       60		      .byte.b	%01100000
    710  840a		       60		      .byte.b	%01100000
    711  840b		       60		      .byte.b	%01100000
    712  840c		       60		      .byte.b	%01100000
    713  840d		       60		      .byte.b	%01100000
    714  840e		       60		      .byte.b	%01100000
    715  840f		       e0		      .byte.b	%11100000
    716  8410		       e0		      .byte.b	%11100000
    717  8411		       e0		      .byte.b	%11100000
    718  8412		       e0		      .byte.b	%11100000
    719  8413		       e0		      .byte.b	%11100000
    720  8414
    721  8414				   lid1
    722  8414				   lid2
    723  8414		       ff		      .byte.b	%11111111
    724  8415		       ff		      .byte.b	%11111111
    725  8416		       ff		      .byte.b	%11111111
    726  8417		       ff		      .byte.b	%11111111
    727  8418		       ff		      .byte.b	%11111111
    728  8419		       ff		      .byte.b	%11111111
    729  841a		       ff		      .byte.b	%11111111
    730  841b		       ff		      .byte.b	%11111111
    731  841c		       ff		      .byte.b	%11111111
    732  841d		       f7		      .byte.b	%11110111
    733  841e		       f7		      .byte.b	%11110111
    734  841f		       f7		      .byte.b	%11110111
    735  8420		       f7		      .byte.b	%11110111
    736  8421		       ff		      .byte.b	%11111111
    737  8422		       ff		      .byte.b	%11111111
    738  8423		       ff		      .byte.b	%11111111
    739  8424		       ff		      .byte.b	%11111111
    740  8425		       c3		      .byte.b	%11000011
    741  8426
    742  8426				   lid3
    743  8426				   lid4
    744  8426		       ff		      .byte.b	%11111111
    745  8427		       ff		      .byte.b	%11111111
    746  8428		       ff		      .byte.b	%11111111
    747  8429		       ff		      .byte.b	%11111111
    748  842a		       ff		      .byte.b	%11111111
    749  842b		       ff		      .byte.b	%11111111
    750  842c		       ff		      .byte.b	%11111111
    751  842d		       ff		      .byte.b	%11111111
    752  842e		       ff		      .byte.b	%11111111
    753  842f		       f7		      .byte.b	%11110111
    754  8430		       f7		      .byte.b	%11110111
    755  8431		       f7		      .byte.b	%11110111
    756  8432		       f7		      .byte.b	%11110111
    757  8433		       ff		      .byte.b	%11111111
    758  8434		       ff		      .byte.b	%11111111
    759  8435		       ff		      .byte.b	%11111111
    760  8436		       ff		      .byte.b	%11111111
    761  8437		       c3		      .byte.b	%11000011
    762  8438
    763  8438				  -	      if	0
    764  8438				  -	      .byte	%11111111
    765  8438				  -	      .byte	%11111111
    766  8438				  -	      .byte	%11111111
    767  8438				  -	      .byte	%11111111
    768  8438				  -	      .byte	%11111111
    769  8438				  -	      .byte	%11111111
    770  8438				  -	      .byte	%11111011
    771  8438				  -	      .byte	%11111011
    772  8438				  -	      .byte	%11111011
    773  8438				  -	      .byte	%11111011
    774  8438				  -	      .byte	%11111011
    775  8438				  -	      .byte	%11111011
    776  8438				  -	      .byte	%11111011
    777  8438				  -	      .byte	%11111111
    778  8438				  -	      .byte	%11111111
    779  8438				  -	      .byte	%11111111
    780  8438				  -	      .byte	%11111111
    781  8438				  -	      .byte	%11000011
    782  8438					      endif
    783  8438
    784  8438				   lidb0
    785  8438				   lidb1
    786  8438				   lidb2
    787  8438				   lidb3
    788  8438				   lidb4
    789  8438
    790  8438		       aa		      .byte.b	%10101010
    791  8439		       ff		      .byte.b	%11111111
    792  843a		       ff		      .byte.b	%11111111
    793  843b		       ff		      .byte.b	%11111111
    794  843c		       ff		      .byte.b	%11111111
    795  843d		       ff		      .byte.b	%11111111
    796  843e		       ff		      .byte.b	%11111111
    797  843f		       ff		      .byte.b	%11111111
    798  8440		       ff		      .byte.b	%11111111
    799  8441
    800  8441
------- FILE bigDigits.asm LEVEL 3 PASS 3
      0  8441					      include	"bigDigits.asm"
      0  8441					      OPTIONAL_PAGEBREAK	"LEFT_0", 32
     10  8441					      LIST	ON
      2  8441				   LEFT_0
      3  8441		       00		      .byte.b	0
      4  8442		       00		      .byte.b	0
      5  8443		       00		      .byte.b	0
      6  8444		       38		      .byte.b	56
      7  8445		       7c		      .byte.b	124
      8  8446		       7c		      .byte.b	124
      9  8447		       fe		      .byte.b	254
     10  8448		       ee		      .byte.b	238
     11  8449		       c6		      .byte.b	198
     12  844a		       c6		      .byte.b	198
     13  844b		       c6		      .byte.b	198
     14  844c		       c6		      .byte.b	198
     15  844d		       c6		      .byte.b	198
     16  844e		       c6		      .byte.b	198
     17  844f		       c6		      .byte.b	198
     18  8450		       c6		      .byte.b	198
     19  8451		       c6		      .byte.b	198
     20  8452		       c6		      .byte.b	198
     21  8453		       c6		      .byte.b	198
     22  8454		       c6		      .byte.b	198
     23  8455		       c6		      .byte.b	198
     24  8456		       c6		      .byte.b	198
     25  8457		       c6		      .byte.b	198
     26  8458		       c6		      .byte.b	198
     27  8459		       c6		      .byte.b	198
     28  845a		       ee		      .byte.b	238
     29  845b		       fe		      .byte.b	254
     30  845c		       7c		      .byte.b	124
     31  845d		       7c		      .byte.b	124
     32  845e		       38		      .byte.b	56
     33  845f		       00		      .byte.b	0
     34  8460		       00		      .byte.b	0
      0  8461					      OPTIONAL_PAGEBREAK	"RIGHT_0", 32
     10  8461					      LIST	ON
     36  8461				   RIGHT_0
     37  8461		       00		      .byte.b	0
     38  8462		       00		      .byte.b	0
     39  8463		       00		      .byte.b	0
     40  8464		       8c		      .byte.b	140
     41  8465		       ce		      .byte.b	206
     42  8466		       ce		      .byte.b	206
     43  8467		       ef		      .byte.b	239
     44  8468		       e7		      .byte.b	231
     45  8469		       63		      .byte.b	99
     46  846a		       63		      .byte.b	99
     47  846b		       63		      .byte.b	99
     48  846c		       63		      .byte.b	99
     49  846d		       63		      .byte.b	99
     50  846e		       63		      .byte.b	99
     51  846f		       63		      .byte.b	99
     52  8470		       63		      .byte.b	99
     53  8471		       63		      .byte.b	99
     54  8472		       63		      .byte.b	99
     55  8473		       63		      .byte.b	99
     56  8474		       63		      .byte.b	99
     57  8475		       63		      .byte.b	99
     58  8476		       63		      .byte.b	99
     59  8477		       63		      .byte.b	99
     60  8478		       63		      .byte.b	99
     61  8479		       63		      .byte.b	99
     62  847a		       e7		      .byte.b	231
     63  847b		       ef		      .byte.b	239
     64  847c		       ce		      .byte.b	206
     65  847d		       ce		      .byte.b	206
     66  847e		       8c		      .byte.b	140
     67  847f		       00		      .byte.b	0
     68  8480		       00		      .byte.b	0
      0  8481					      OPTIONAL_PAGEBREAK	"HUNDPF1_0", 32
     10  8481					      LIST	ON
     70  8481				   HUNDPF1_0
     71  8481		       00		      .byte.b	0
     72  8482		       00		      .byte.b	0
     73  8483		       00		      .byte.b	0
     74  8484		       1c		      .byte.b	28
     75  8485		       3e		      .byte.b	62
     76  8486		       3e		      .byte.b	62
     77  8487		       7f		      .byte.b	127
     78  8488		       77		      .byte.b	119
     79  8489		       63		      .byte.b	99
     80  848a		       63		      .byte.b	99
     81  848b		       63		      .byte.b	99
     82  848c		       63		      .byte.b	99
     83  848d		       63		      .byte.b	99
     84  848e		       63		      .byte.b	99
     85  848f		       63		      .byte.b	99
     86  8490		       63		      .byte.b	99
     87  8491		       63		      .byte.b	99
     88  8492		       63		      .byte.b	99
     89  8493		       63		      .byte.b	99
     90  8494		       63		      .byte.b	99
     91  8495		       63		      .byte.b	99
     92  8496		       63		      .byte.b	99
     93  8497		       63		      .byte.b	99
     94  8498		       63		      .byte.b	99
     95  8499		       63		      .byte.b	99
     96  849a		       77		      .byte.b	119
     97  849b		       7f		      .byte.b	127
     98  849c		       3e		      .byte.b	62
     99  849d		       3e		      .byte.b	62
    100  849e		       1c		      .byte.b	28
    101  849f		       00		      .byte.b	0
    102  84a0		       00		      .byte.b	0
      0  84a1					      OPTIONAL_PAGEBREAK	"LEFT_1", 32
     10  84a1					      LIST	ON
    104  84a1				   LEFT_1
    105  84a1		       00		      .byte.b	0
    106  84a2		       00		      .byte.b	0
    107  84a3		       00		      .byte.b	0
    108  84a4		       30		      .byte.b	48
    109  84a5		       30		      .byte.b	48
    110  84a6		       30		      .byte.b	48
    111  84a7		       30		      .byte.b	48
    112  84a8		       30		      .byte.b	48
    113  84a9		       30		      .byte.b	48
    114  84aa		       30		      .byte.b	48
    115  84ab		       30		      .byte.b	48
    116  84ac		       30		      .byte.b	48
    117  84ad		       30		      .byte.b	48
    118  84ae		       30		      .byte.b	48
    119  84af		       30		      .byte.b	48
    120  84b0		       30		      .byte.b	48
    121  84b1		       30		      .byte.b	48
    122  84b2		       30		      .byte.b	48
    123  84b3		       30		      .byte.b	48
    124  84b4		       30		      .byte.b	48
    125  84b5		       30		      .byte.b	48
    126  84b6		       30		      .byte.b	48
    127  84b7		       30		      .byte.b	48
    128  84b8		       38		      .byte.b	56
    129  84b9		       38		      .byte.b	56
    130  84ba		       38		      .byte.b	56
    131  84bb		       38		      .byte.b	56
    132  84bc		       38		      .byte.b	56
    133  84bd		       30		      .byte.b	48
    134  84be		       30		      .byte.b	48
    135  84bf		       00		      .byte.b	0
    136  84c0		       00		      .byte.b	0
      0  84c1					      OPTIONAL_PAGEBREAK	"RIGHT_1", 32
     10  84c1					      LIST	ON
    138  84c1				   RIGHT_1
    139  84c1		       00		      .byte.b	0
    140  84c2		       00		      .byte.b	0
    141  84c3		       00		      .byte.b	0
    142  84c4		       0c		      .byte.b	12
    143  84c5		       0c		      .byte.b	12
    144  84c6		       0c		      .byte.b	12
    145  84c7		       0c		      .byte.b	12
    146  84c8		       0c		      .byte.b	12
    147  84c9		       0c		      .byte.b	12
    148  84ca		       0c		      .byte.b	12
    149  84cb		       0c		      .byte.b	12
    150  84cc		       0c		      .byte.b	12
    151  84cd		       0c		      .byte.b	12
    152  84ce		       0c		      .byte.b	12
    153  84cf		       0c		      .byte.b	12
    154  84d0		       0c		      .byte.b	12
    155  84d1		       0c		      .byte.b	12
    156  84d2		       0c		      .byte.b	12
    157  84d3		       0c		      .byte.b	12
    158  84d4		       0c		      .byte.b	12
    159  84d5		       0c		      .byte.b	12
    160  84d6		       0c		      .byte.b	12
    161  84d7		       0c		      .byte.b	12
    162  84d8		       8c		      .byte.b	140
    163  84d9		       8c		      .byte.b	140
    164  84da		       8c		      .byte.b	140
    165  84db		       8c		      .byte.b	140
    166  84dc		       8c		      .byte.b	140
    167  84dd		       0c		      .byte.b	12
    168  84de		       0c		      .byte.b	12
    169  84df		       00		      .byte.b	0
    170  84e0		       00		      .byte.b	0
      0  84e1					      OPTIONAL_PAGEBREAK	"HUNDPF1_1", 32
 PAGE BREAK INSERTED FOR  HUNDPF1_1
 REQUESTED SIZE =  $20
 WASTED SPACE =  $1f
 PAGEBREAK LOCATION =  $f500
     10  8500					      LIST	ON
    172  8500				   HUNDPF1_1
    173  8500		       00		      .byte.b	0
    174  8501		       00		      .byte.b	0
    175  8502		       00		      .byte.b	0
    176  8503		       0c		      .byte.b	12
    177  8504		       0c		      .byte.b	12
    178  8505		       0c		      .byte.b	12
    179  8506		       0c		      .byte.b	12
    180  8507		       0c		      .byte.b	12
    181  8508		       0c		      .byte.b	12
    182  8509		       0c		      .byte.b	12
    183  850a		       0c		      .byte.b	12
    184  850b		       0c		      .byte.b	12
    185  850c		       0c		      .byte.b	12
    186  850d		       0c		      .byte.b	12
    187  850e		       0c		      .byte.b	12
    188  850f		       0c		      .byte.b	12
    189  8510		       0c		      .byte.b	12
    190  8511		       0c		      .byte.b	12
    191  8512		       0c		      .byte.b	12
    192  8513		       0c		      .byte.b	12
    193  8514		       0c		      .byte.b	12
    194  8515		       0c		      .byte.b	12
    195  8516		       0c		      .byte.b	12
    196  8517		       1c		      .byte.b	28
    197  8518		       1c		      .byte.b	28
    198  8519		       1c		      .byte.b	28
    199  851a		       1c		      .byte.b	28
    200  851b		       1c		      .byte.b	28
    201  851c		       0c		      .byte.b	12
    202  851d		       0c		      .byte.b	12
    203  851e		       00		      .byte.b	0
    204  851f		       00		      .byte.b	0
      0  8520					      OPTIONAL_PAGEBREAK	"LEFT_2", 32
     10  8520					      LIST	ON
    206  8520				   LEFT_2
    207  8520		       00		      .byte.b	0
    208  8521		       00		      .byte.b	0
    209  8522		       00		      .byte.b	0
    210  8523		       fe		      .byte.b	254
    211  8524		       fe		      .byte.b	254
    212  8525		       fe		      .byte.b	254
    213  8526		       fe		      .byte.b	254
    214  8527		       c6		      .byte.b	198
    215  8528		       06		      .byte.b	6
    216  8529		       06		      .byte.b	6
    217  852a		       06		      .byte.b	6
    218  852b		       0e		      .byte.b	14
    219  852c		       0e		      .byte.b	14
    220  852d		       1c		      .byte.b	28
    221  852e		       3c		      .byte.b	60
    222  852f		       78		      .byte.b	120
    223  8530		       70		      .byte.b	112
    224  8531		       e0		      .byte.b	224
    225  8532		       e0		      .byte.b	224
    226  8533		       c0		      .byte.b	192
    227  8534		       c0		      .byte.b	192
    228  8535		       c0		      .byte.b	192
    229  8536		       c6		      .byte.b	198
    230  8537		       c6		      .byte.b	198
    231  8538		       c6		      .byte.b	198
    232  8539		       ee		      .byte.b	238
    233  853a		       fe		      .byte.b	254
    234  853b		       7c		      .byte.b	124
    235  853c		       7c		      .byte.b	124
    236  853d		       38		      .byte.b	56
    237  853e		       00		      .byte.b	0
    238  853f		       00		      .byte.b	0
      0  8540					      OPTIONAL_PAGEBREAK	"RIGHT_2", 32
     10  8540					      LIST	ON
    240  8540				   RIGHT_2
    241  8540		       00		      .byte.b	0
    242  8541		       00		      .byte.b	0
    243  8542		       00		      .byte.b	0
    244  8543		       ef		      .byte.b	239
    245  8544		       ef		      .byte.b	239
    246  8545		       ef		      .byte.b	239
    247  8546		       ef		      .byte.b	239
    248  8547		       63		      .byte.b	99
    249  8548		       60		      .byte.b	96
    250  8549		       60		      .byte.b	96
    251  854a		       60		      .byte.b	96
    252  854b		       e0		      .byte.b	224
    253  854c		       e0		      .byte.b	224
    254  854d		       c8		      .byte.b	200
    255  854e		       cc		      .byte.b	204
    256  854f		       8e		      .byte.b	142
    257  8550		       0e		      .byte.b	14
    258  8551		       07		      .byte.b	7
    259  8552		       07		      .byte.b	7
    260  8553		       03		      .byte.b	3
    261  8554		       03		      .byte.b	3
    262  8555		       03		      .byte.b	3
    263  8556		       63		      .byte.b	99
    264  8557		       63		      .byte.b	99
    265  8558		       63		      .byte.b	99
    266  8559		       e7		      .byte.b	231
    267  855a		       ef		      .byte.b	239
    268  855b		       ce		      .byte.b	206
    269  855c		       ce		      .byte.b	206
    270  855d		       8c		      .byte.b	140
    271  855e		       00		      .byte.b	0
    272  855f		       00		      .byte.b	0
      0  8560					      OPTIONAL_PAGEBREAK	"HUNDPF1_2", 32
     10  8560					      LIST	ON
    274  8560				   HUNDPF1_2
    275  8560		       00		      .byte.b	0
    276  8561		       00		      .byte.b	0
    277  8562		       00		      .byte.b	0
    278  8563		       7f		      .byte.b	127
    279  8564		       7f		      .byte.b	127
    280  8565		       7f		      .byte.b	127
    281  8566		       7f		      .byte.b	127
    282  8567		       63		      .byte.b	99
    283  8568		       60		      .byte.b	96
    284  8569		       60		      .byte.b	96
    285  856a		       60		      .byte.b	96
    286  856b		       70		      .byte.b	112
    287  856c		       70		      .byte.b	112
    288  856d		       38		      .byte.b	56
    289  856e		       3c		      .byte.b	60
    290  856f		       1e		      .byte.b	30
    291  8570		       0e		      .byte.b	14
    292  8571		       07		      .byte.b	7
    293  8572		       07		      .byte.b	7
    294  8573		       03		      .byte.b	3
    295  8574		       03		      .byte.b	3
    296  8575		       03		      .byte.b	3
    297  8576		       63		      .byte.b	99
    298  8577		       63		      .byte.b	99
    299  8578		       63		      .byte.b	99
    300  8579		       77		      .byte.b	119
    301  857a		       7f		      .byte.b	127
    302  857b		       3e		      .byte.b	62
    303  857c		       3e		      .byte.b	62
    304  857d		       1c		      .byte.b	28
    305  857e		       00		      .byte.b	0
    306  857f		       00		      .byte.b	0
      0  8580					      OPTIONAL_PAGEBREAK	"LEFT_3", 32
     10  8580					      LIST	ON
    308  8580				   LEFT_3
    309  8580		       00		      .byte.b	0
    310  8581		       00		      .byte.b	0
    311  8582		       00		      .byte.b	0
    312  8583		       38		      .byte.b	56
    313  8584		       7c		      .byte.b	124
    314  8585		       7c		      .byte.b	124
    315  8586		       fe		      .byte.b	254
    316  8587		       ee		      .byte.b	238
    317  8588		       c6		      .byte.b	198
    318  8589		       c6		      .byte.b	198
    319  858a		       c6		      .byte.b	198
    320  858b		       c0		      .byte.b	192
    321  858c		       c0		      .byte.b	192
    322  858d		       c0		      .byte.b	192
    323  858e		       e0		      .byte.b	224
    324  858f		       f8		      .byte.b	248
    325  8590		       78		      .byte.b	120
    326  8591		       78		      .byte.b	120
    327  8592		       f8		      .byte.b	248
    328  8593		       e0		      .byte.b	224
    329  8594		       c0		      .byte.b	192
    330  8595		       c0		      .byte.b	192
    331  8596		       c6		      .byte.b	198
    332  8597		       c6		      .byte.b	198
    333  8598		       c6		      .byte.b	198
    334  8599		       ee		      .byte.b	238
    335  859a		       fe		      .byte.b	254
    336  859b		       7c		      .byte.b	124
    337  859c		       7c		      .byte.b	124
    338  859d		       38		      .byte.b	56
    339  859e		       00		      .byte.b	0
    340  859f		       00		      .byte.b	0
      0  85a0					      OPTIONAL_PAGEBREAK	"RIGHT_3", 32
     10  85a0					      LIST	ON
    342  85a0				   RIGHT_3
    343  85a0		       00		      .byte.b	0
    344  85a1		       00		      .byte.b	0
    345  85a2		       00		      .byte.b	0
    346  85a3		       8c		      .byte.b	140
    347  85a4		       ce		      .byte.b	206
    348  85a5		       ce		      .byte.b	206
    349  85a6		       ef		      .byte.b	239
    350  85a7		       e7		      .byte.b	231
    351  85a8		       63		      .byte.b	99
    352  85a9		       63		      .byte.b	99
    353  85aa		       63		      .byte.b	99
    354  85ab		       03		      .byte.b	3
    355  85ac		       03		      .byte.b	3
    356  85ad		       03		      .byte.b	3
    357  85ae		       07		      .byte.b	7
    358  85af		       8f		      .byte.b	143
    359  85b0		       8e		      .byte.b	142
    360  85b1		       8e		      .byte.b	142
    361  85b2		       8f		      .byte.b	143
    362  85b3		       07		      .byte.b	7
    363  85b4		       03		      .byte.b	3
    364  85b5		       03		      .byte.b	3
    365  85b6		       63		      .byte.b	99
    366  85b7		       63		      .byte.b	99
    367  85b8		       63		      .byte.b	99
    368  85b9		       e7		      .byte.b	231
    369  85ba		       ef		      .byte.b	239
    370  85bb		       ce		      .byte.b	206
    371  85bc		       ce		      .byte.b	206
    372  85bd		       8c		      .byte.b	140
    373  85be		       00		      .byte.b	0
    374  85bf		       00		      .byte.b	0
      0  85c0					      OPTIONAL_PAGEBREAK	"HUNDPF1_3", 32
     10  85c0					      LIST	ON
    376  85c0				   HUNDPF1_3
    377  85c0		       00		      .byte.b	0
    378  85c1		       00		      .byte.b	0
    379  85c2		       00		      .byte.b	0
    380  85c3		       1c		      .byte.b	28
    381  85c4		       3e		      .byte.b	62
    382  85c5		       3e		      .byte.b	62
    383  85c6		       7f		      .byte.b	127
    384  85c7		       77		      .byte.b	119
    385  85c8		       63		      .byte.b	99
    386  85c9		       63		      .byte.b	99
    387  85ca		       63		      .byte.b	99
    388  85cb		       03		      .byte.b	3
    389  85cc		       03		      .byte.b	3
    390  85cd		       03		      .byte.b	3
    391  85ce		       07		      .byte.b	7
    392  85cf		       1f		      .byte.b	31
    393  85d0		       1e		      .byte.b	30
    394  85d1		       1e		      .byte.b	30
    395  85d2		       1f		      .byte.b	31
    396  85d3		       07		      .byte.b	7
    397  85d4		       03		      .byte.b	3
    398  85d5		       03		      .byte.b	3
    399  85d6		       63		      .byte.b	99
    400  85d7		       63		      .byte.b	99
    401  85d8		       63		      .byte.b	99
    402  85d9		       77		      .byte.b	119
    403  85da		       7f		      .byte.b	127
    404  85db		       3e		      .byte.b	62
    405  85dc		       3e		      .byte.b	62
    406  85dd		       1c		      .byte.b	28
    407  85de		       00		      .byte.b	0
    408  85df		       00		      .byte.b	0
      0  85e0					      OPTIONAL_PAGEBREAK	"LEFT_4", 32
     10  85e0					      LIST	ON
    410  85e0				   LEFT_4
    411  85e0		       00		      .byte.b	0
    412  85e1		       00		      .byte.b	0
    413  85e2		       00		      .byte.b	0
    414  85e3		       60		      .byte.b	96
    415  85e4		       60		      .byte.b	96
    416  85e5		       60		      .byte.b	96
    417  85e6		       60		      .byte.b	96
    418  85e7		       60		      .byte.b	96
    419  85e8		       fe		      .byte.b	254
    420  85e9		       fe		      .byte.b	254
    421  85ea		       fe		      .byte.b	254
    422  85eb		       fe		      .byte.b	254
    423  85ec		       66		      .byte.b	102
    424  85ed		       66		      .byte.b	102
    425  85ee		       66		      .byte.b	102
    426  85ef		       66		      .byte.b	102
    427  85f0		       6c		      .byte.b	108
    428  85f1		       6c		      .byte.b	108
    429  85f2		       6c		      .byte.b	108
    430  85f3		       6c		      .byte.b	108
    431  85f4		       78		      .byte.b	120
    432  85f5		       78		      .byte.b	120
    433  85f6		       78		      .byte.b	120
    434  85f7		       78		      .byte.b	120
    435  85f8		       70		      .byte.b	112
    436  85f9		       70		      .byte.b	112
    437  85fa		       70		      .byte.b	112
    438  85fb		       70		      .byte.b	112
    439  85fc		       60		      .byte.b	96
    440  85fd		       60		      .byte.b	96
    441  85fe		       00		      .byte.b	0
    442  85ff		       00		      .byte.b	0
      0  8600					      OPTIONAL_PAGEBREAK	"RIGHT_4", 32
     10  8600					      LIST	ON
    444  8600				   RIGHT_4
    445  8600		       00		      .byte.b	0
    446  8601		       00		      .byte.b	0
    447  8602		       00		      .byte.b	0
    448  8603		       06		      .byte.b	6
    449  8604		       06		      .byte.b	6
    450  8605		       06		      .byte.b	6
    451  8606		       06		      .byte.b	6
    452  8607		       06		      .byte.b	6
    453  8608		       ef		      .byte.b	239
    454  8609		       ef		      .byte.b	239
    455  860a		       ef		      .byte.b	239
    456  860b		       ef		      .byte.b	239
    457  860c		       66		      .byte.b	102
    458  860d		       66		      .byte.b	102
    459  860e		       66		      .byte.b	102
    460  860f		       66		      .byte.b	102
    461  8610		       c6		      .byte.b	198
    462  8611		       c6		      .byte.b	198
    463  8612		       c6		      .byte.b	198
    464  8613		       c6		      .byte.b	198
    465  8614		       8e		      .byte.b	142
    466  8615		       8e		      .byte.b	142
    467  8616		       8e		      .byte.b	142
    468  8617		       8e		      .byte.b	142
    469  8618		       0e		      .byte.b	14
    470  8619		       0e		      .byte.b	14
    471  861a		       0e		      .byte.b	14
    472  861b		       0e		      .byte.b	14
    473  861c		       06		      .byte.b	6
    474  861d		       06		      .byte.b	6
    475  861e		       00		      .byte.b	0
    476  861f		       00		      .byte.b	0
      0  8620					      OPTIONAL_PAGEBREAK	"HUNDPF1_4", 32
     10  8620					      LIST	ON
    478  8620				   HUNDPF1_4
    479  8620		       00		      .byte.b	0
    480  8621		       00		      .byte.b	0
    481  8622		       00		      .byte.b	0
    482  8623		       06		      .byte.b	6
    483  8624		       06		      .byte.b	6
    484  8625		       06		      .byte.b	6
    485  8626		       06		      .byte.b	6
    486  8627		       06		      .byte.b	6
    487  8628		       7f		      .byte.b	127
    488  8629		       7f		      .byte.b	127
    489  862a		       7f		      .byte.b	127
    490  862b		       7f		      .byte.b	127
    491  862c		       66		      .byte.b	102
    492  862d		       66		      .byte.b	102
    493  862e		       66		      .byte.b	102
    494  862f		       66		      .byte.b	102
    495  8630		       36		      .byte.b	54
    496  8631		       36		      .byte.b	54
    497  8632		       36		      .byte.b	54
    498  8633		       36		      .byte.b	54
    499  8634		       1e		      .byte.b	30
    500  8635		       1e		      .byte.b	30
    501  8636		       1e		      .byte.b	30
    502  8637		       1e		      .byte.b	30
    503  8638		       0e		      .byte.b	14
    504  8639		       0e		      .byte.b	14
    505  863a		       0e		      .byte.b	14
    506  863b		       0e		      .byte.b	14
    507  863c		       06		      .byte.b	6
    508  863d		       06		      .byte.b	6
    509  863e		       00		      .byte.b	0
    510  863f		       00		      .byte.b	0
      0  8640					      OPTIONAL_PAGEBREAK	"LEFT_5", 32
     10  8640					      LIST	ON
    512  8640				   LEFT_5
    513  8640		       00		      .byte.b	0
    514  8641		       00		      .byte.b	0
    515  8642		       00		      .byte.b	0
    516  8643		       38		      .byte.b	56
    517  8644		       7c		      .byte.b	124
    518  8645		       7c		      .byte.b	124
    519  8646		       fe		      .byte.b	254
    520  8647		       ee		      .byte.b	238
    521  8648		       c6		      .byte.b	198
    522  8649		       c6		      .byte.b	198
    523  864a		       c6		      .byte.b	198
    524  864b		       c0		      .byte.b	192
    525  864c		       c0		      .byte.b	192
    526  864d		       c0		      .byte.b	192
    527  864e		       c0		      .byte.b	192
    528  864f		       c0		      .byte.b	192
    529  8650		       c0		      .byte.b	192
    530  8651		       e6		      .byte.b	230
    531  8652		       fe		      .byte.b	254
    532  8653		       7e		      .byte.b	126
    533  8654		       7e		      .byte.b	126
    534  8655		       36		      .byte.b	54
    535  8656		       06		      .byte.b	6
    536  8657		       06		      .byte.b	6
    537  8658		       06		      .byte.b	6
    538  8659		       c6		      .byte.b	198
    539  865a		       fe		      .byte.b	254
    540  865b		       fe		      .byte.b	254
    541  865c		       fe		      .byte.b	254
    542  865d		       fe		      .byte.b	254
    543  865e		       00		      .byte.b	0
    544  865f		       00		      .byte.b	0
      0  8660					      OPTIONAL_PAGEBREAK	"RIGHT_5", 32
     10  8660					      LIST	ON
    546  8660				   RIGHT_5
    547  8660		       00		      .byte.b	0
    548  8661		       00		      .byte.b	0
    549  8662		       00		      .byte.b	0
    550  8663		       8c		      .byte.b	140
    551  8664		       ce		      .byte.b	206
    552  8665		       ce		      .byte.b	206
    553  8666		       ef		      .byte.b	239
    554  8667		       e7		      .byte.b	231
    555  8668		       63		      .byte.b	99
    556  8669		       63		      .byte.b	99
    557  866a		       63		      .byte.b	99
    558  866b		       03		      .byte.b	3
    559  866c		       03		      .byte.b	3
    560  866d		       03		      .byte.b	3
    561  866e		       03		      .byte.b	3
    562  866f		       03		      .byte.b	3
    563  8670		       03		      .byte.b	3
    564  8671		       67		      .byte.b	103
    565  8672		       ef		      .byte.b	239
    566  8673		       ee		      .byte.b	238
    567  8674		       ee		      .byte.b	238
    568  8675		       6c		      .byte.b	108
    569  8676		       60		      .byte.b	96
    570  8677		       60		      .byte.b	96
    571  8678		       60		      .byte.b	96
    572  8679		       63		      .byte.b	99
    573  867a		       ef		      .byte.b	239
    574  867b		       ef		      .byte.b	239
    575  867c		       ef		      .byte.b	239
    576  867d		       ef		      .byte.b	239
    577  867e		       00		      .byte.b	0
    578  867f		       00		      .byte.b	0
      0  8680					      OPTIONAL_PAGEBREAK	"HUNDPF1_5", 32
     10  8680					      LIST	ON
    580  8680				   HUNDPF1_5
    581  8680				  -	      if	0
    582  8680				  -	      .byte	0
    583  8680				  -	      .byte	0
    584  8680				  -	      .byte	0
    585  8680				  -	      .byte	28
    586  8680				  -	      .byte	62
    587  8680				  -	      .byte	62
    588  8680				  -	      .byte	127
    589  8680				  -	      .byte	119
    590  8680				  -	      .byte	99
    591  8680				  -	      .byte	99
    592  8680				  -	      .byte	99
    593  8680				  -	      .byte	3
    594  8680				  -	      .byte	3
    595  8680				  -	      .byte	3
    596  8680				  -	      .byte	3
    597  8680				  -	      .byte	3
    598  8680				  -	      .byte	3
    599  8680				  -	      .byte	103
    600  8680				  -	      .byte	127
    601  8680				  -	      .byte	126
    602  8680				  -	      .byte	126
    603  8680				  -	      .byte	108
    604  8680				  -	      .byte	96
    605  8680				  -	      .byte	96
    606  8680				  -	      .byte	96
    607  8680				  -	      .byte	99
    608  8680				  -	      .byte	127
    609  8680				  -	      .byte	127
    610  8680				  -	      .byte	127
    611  8680				  -	      .byte	127
    612  8680				  -	      .byte	0
    613  8680				  -	      .byte	0
    614  8680					      endif
      0  8680					      OPTIONAL_PAGEBREAK	"LEFT_6", 32
     10  8680					      LIST	ON
    616  8680				   LEFT_6
    617  8680		       00		      .byte.b	0
    618  8681		       00		      .byte.b	0
    619  8682		       00		      .byte.b	0
    620  8683		       38		      .byte.b	56
    621  8684		       7c		      .byte.b	124
    622  8685		       7c		      .byte.b	124
    623  8686		       fe		      .byte.b	254
    624  8687		       ee		      .byte.b	238
    625  8688		       c6		      .byte.b	198
    626  8689		       c6		      .byte.b	198
    627  868a		       c6		      .byte.b	198
    628  868b		       c6		      .byte.b	198
    629  868c		       c6		      .byte.b	198
    630  868d		       c6		      .byte.b	198
    631  868e		       ee		      .byte.b	238
    632  868f		       fe		      .byte.b	254
    633  8690		       7e		      .byte.b	126
    634  8691		       7e		      .byte.b	126
    635  8692		       36		      .byte.b	54
    636  8693		       06		      .byte.b	6
    637  8694		       06		      .byte.b	6
    638  8695		       0e		      .byte.b	14
    639  8696		       0c		      .byte.b	12
    640  8697		       0c		      .byte.b	12
    641  8698		       1c		      .byte.b	28
    642  8699		       1c		      .byte.b	28
    643  869a		       78		      .byte.b	120
    644  869b		       78		      .byte.b	120
    645  869c		       70		      .byte.b	112
    646  869d		       60		      .byte.b	96
    647  869e		       00		      .byte.b	0
    648  869f		       00		      .byte.b	0
      0  86a0					      OPTIONAL_PAGEBREAK	"RIGHT_6", 32
     10  86a0					      LIST	ON
    650  86a0				   RIGHT_6
    651  86a0		       00		      .byte.b	0
    652  86a1		       00		      .byte.b	0
    653  86a2		       00		      .byte.b	0
    654  86a3		       8c		      .byte.b	140
    655  86a4		       ce		      .byte.b	206
    656  86a5		       ce		      .byte.b	206
    657  86a6		       ef		      .byte.b	239
    658  86a7		       e7		      .byte.b	231
    659  86a8		       63		      .byte.b	99
    660  86a9		       63		      .byte.b	99
    661  86aa		       63		      .byte.b	99
    662  86ab		       63		      .byte.b	99
    663  86ac		       63		      .byte.b	99
    664  86ad		       63		      .byte.b	99
    665  86ae		       e7		      .byte.b	231
    666  86af		       ef		      .byte.b	239
    667  86b0		       ee		      .byte.b	238
    668  86b1		       ee		      .byte.b	238
    669  86b2		       6c		      .byte.b	108
    670  86b3		       60		      .byte.b	96
    671  86b4		       60		      .byte.b	96
    672  86b5		       e0		      .byte.b	224
    673  86b6		       c0		      .byte.b	192
    674  86b7		       c0		      .byte.b	192
    675  86b8		       c8		      .byte.b	200
    676  86b9		       c8		      .byte.b	200
    677  86ba		       8e		      .byte.b	142
    678  86bb		       8e		      .byte.b	142
    679  86bc		       0e		      .byte.b	14
    680  86bd		       06		      .byte.b	6
    681  86be		       00		      .byte.b	0
    682  86bf		       00		      .byte.b	0
      0  86c0					      OPTIONAL_PAGEBREAK	"HUNDPF1_6", 32
     10  86c0					      LIST	ON
    684  86c0				   HUNDPF1_6
    685  86c0				  -	      if	0
    686  86c0				  -	      .byte	0
    687  86c0				  -	      .byte	0
    688  86c0				  -	      .byte	0
    689  86c0				  -	      .byte	28
    690  86c0				  -	      .byte	62
    691  86c0				  -	      .byte	62
    692  86c0				  -	      .byte	127
    693  86c0				  -	      .byte	119
    694  86c0				  -	      .byte	99
    695  86c0				  -	      .byte	99
    696  86c0				  -	      .byte	99
    697  86c0				  -	      .byte	99
    698  86c0				  -	      .byte	99
    699  86c0				  -	      .byte	99
    700  86c0				  -	      .byte	119
    701  86c0				  -	      .byte	127
    702  86c0				  -	      .byte	126
    703  86c0				  -	      .byte	126
    704  86c0				  -	      .byte	108
    705  86c0				  -	      .byte	96
    706  86c0				  -	      .byte	96
    707  86c0				  -	      .byte	112
    708  86c0				  -	      .byte	48
    709  86c0				  -	      .byte	48
    710  86c0				  -	      .byte	56
    711  86c0				  -	      .byte	56
    712  86c0				  -	      .byte	30
    713  86c0				  -	      .byte	30
    714  86c0				  -	      .byte	14
    715  86c0				  -	      .byte	6
    716  86c0				  -	      .byte	0
    717  86c0				  -	      .byte	0
    718  86c0					      endif
      0  86c0					      OPTIONAL_PAGEBREAK	"LEFT_7", 32
     10  86c0					      LIST	ON
    720  86c0				   LEFT_7
    721  86c0		       00		      .byte.b	0
    722  86c1		       00		      .byte.b	0
    723  86c2		       00		      .byte.b	0
    724  86c3		       18		      .byte.b	24
    725  86c4		       18		      .byte.b	24
    726  86c5		       18		      .byte.b	24
    727  86c6		       18		      .byte.b	24
    728  86c7		       18		      .byte.b	24
    729  86c8		       18		      .byte.b	24
    730  86c9		       18		      .byte.b	24
    731  86ca		       18		      .byte.b	24
    732  86cb		       18		      .byte.b	24
    733  86cc		       18		      .byte.b	24
    734  86cd		       18		      .byte.b	24
    735  86ce		       30		      .byte.b	48
    736  86cf		       30		      .byte.b	48
    737  86d0		       30		      .byte.b	48
    738  86d1		       30		      .byte.b	48
    739  86d2		       60		      .byte.b	96
    740  86d3		       60		      .byte.b	96
    741  86d4		       60		      .byte.b	96
    742  86d5		       60		      .byte.b	96
    743  86d6		       c0		      .byte.b	192
    744  86d7		       c0		      .byte.b	192
    745  86d8		       c0		      .byte.b	192
    746  86d9		       c6		      .byte.b	198
    747  86da		       fe		      .byte.b	254
    748  86db		       fe		      .byte.b	254
    749  86dc		       fe		      .byte.b	254
    750  86dd		       fe		      .byte.b	254
    751  86de		       00		      .byte.b	0
    752  86df		       00		      .byte.b	0
      0  86e0					      OPTIONAL_PAGEBREAK	"RIGHT_7", 32
     10  86e0					      LIST	ON
    754  86e0				   RIGHT_7
    755  86e0		       00		      .byte.b	0
    756  86e1		       00		      .byte.b	0
    757  86e2		       00		      .byte.b	0
    758  86e3		       88		      .byte.b	136
    759  86e4		       88		      .byte.b	136
    760  86e5		       88		      .byte.b	136
    761  86e6		       88		      .byte.b	136
    762  86e7		       88		      .byte.b	136
    763  86e8		       88		      .byte.b	136
    764  86e9		       88		      .byte.b	136
    765  86ea		       88		      .byte.b	136
    766  86eb		       88		      .byte.b	136
    767  86ec		       88		      .byte.b	136
    768  86ed		       88		      .byte.b	136
    769  86ee		       0c		      .byte.b	12
    770  86ef		       0c		      .byte.b	12
    771  86f0		       0c		      .byte.b	12
    772  86f1		       0c		      .byte.b	12
    773  86f2		       06		      .byte.b	6
    774  86f3		       06		      .byte.b	6
    775  86f4		       06		      .byte.b	6
    776  86f5		       06		      .byte.b	6
    777  86f6		       03		      .byte.b	3
    778  86f7		       03		      .byte.b	3
    779  86f8		       03		      .byte.b	3
    780  86f9		       63		      .byte.b	99
    781  86fa		       ef		      .byte.b	239
    782  86fb		       ef		      .byte.b	239
    783  86fc		       ef		      .byte.b	239
    784  86fd		       ef		      .byte.b	239
    785  86fe		       00		      .byte.b	0
    786  86ff		       00		      .byte.b	0
      0  8700					      OPTIONAL_PAGEBREAK	"HUNDPF1_7", 32
     10  8700					      LIST	ON
    788  8700				   HUNDPF1_7
    789  8700				  -	      if	0
    790  8700				  -	      .byte	0
    791  8700				  -	      .byte	0
    792  8700				  -	      .byte	0
    793  8700				  -	      .byte	24
    794  8700				  -	      .byte	24
    795  8700				  -	      .byte	24
    796  8700				  -	      .byte	24
    797  8700				  -	      .byte	24
    798  8700				  -	      .byte	24
    799  8700				  -	      .byte	24
    800  8700				  -	      .byte	24
    801  8700				  -	      .byte	24
    802  8700				  -	      .byte	24
    803  8700				  -	      .byte	24
    804  8700				  -	      .byte	12
    805  8700				  -	      .byte	12
    806  8700				  -	      .byte	12
    807  8700				  -	      .byte	12
    808  8700				  -	      .byte	6
    809  8700				  -	      .byte	6
    810  8700				  -	      .byte	6
    811  8700				  -	      .byte	6
    812  8700				  -	      .byte	3
    813  8700				  -	      .byte	3
    814  8700				  -	      .byte	3
    815  8700				  -	      .byte	99
    816  8700				  -	      .byte	127
    817  8700				  -	      .byte	127
    818  8700				  -	      .byte	127
    819  8700				  -	      .byte	127
    820  8700				  -	      .byte	0
    821  8700				  -	      .byte	0
    822  8700					      endif
      0  8700					      OPTIONAL_PAGEBREAK	"LEFT_8", 32
     10  8700					      LIST	ON
    824  8700				   LEFT_8
    825  8700		       00		      .byte.b	0
    826  8701		       00		      .byte.b	0
    827  8702		       00		      .byte.b	0
    828  8703		       38		      .byte.b	56
    829  8704		       7c		      .byte.b	124
    830  8705		       7c		      .byte.b	124
    831  8706		       fe		      .byte.b	254
    832  8707		       ee		      .byte.b	238
    833  8708		       c6		      .byte.b	198
    834  8709		       c6		      .byte.b	198
    835  870a		       c6		      .byte.b	198
    836  870b		       c6		      .byte.b	198
    837  870c		       c6		      .byte.b	198
    838  870d		       c6		      .byte.b	198
    839  870e		       ee		      .byte.b	238
    840  870f		       fc		      .byte.b	252
    841  8710		       7c		      .byte.b	124
    842  8711		       7e		      .byte.b	126
    843  8712		       ee		      .byte.b	238
    844  8713		       c6		      .byte.b	198
    845  8714		       c6		      .byte.b	198
    846  8715		       c6		      .byte.b	198
    847  8716		       c6		      .byte.b	198
    848  8717		       c6		      .byte.b	198
    849  8718		       c6		      .byte.b	198
    850  8719		       ee		      .byte.b	238
    851  871a		       fe		      .byte.b	254
    852  871b		       7c		      .byte.b	124
    853  871c		       7c		      .byte.b	124
    854  871d		       38		      .byte.b	56
    855  871e		       00		      .byte.b	0
    856  871f		       00		      .byte.b	0
      0  8720					      OPTIONAL_PAGEBREAK	"RIGHT_8", 32
     10  8720					      LIST	ON
    858  8720				   RIGHT_8
    859  8720		       00		      .byte.b	0
    860  8721		       00		      .byte.b	0
    861  8722		       00		      .byte.b	0
    862  8723		       8c		      .byte.b	140
    863  8724		       ce		      .byte.b	206
    864  8725		       ce		      .byte.b	206
    865  8726		       ef		      .byte.b	239
    866  8727		       e7		      .byte.b	231
    867  8728		       63		      .byte.b	99
    868  8729		       63		      .byte.b	99
    869  872a		       63		      .byte.b	99
    870  872b		       63		      .byte.b	99
    871  872c		       63		      .byte.b	99
    872  872d		       63		      .byte.b	99
    873  872e		       e7		      .byte.b	231
    874  872f		       cf		      .byte.b	207
    875  8730		       ce		      .byte.b	206
    876  8731		       ee		      .byte.b	238
    877  8732		       e7		      .byte.b	231
    878  8733		       63		      .byte.b	99
    879  8734		       63		      .byte.b	99
    880  8735		       63		      .byte.b	99
    881  8736		       63		      .byte.b	99
    882  8737		       63		      .byte.b	99
    883  8738		       63		      .byte.b	99
    884  8739		       e7		      .byte.b	231
    885  873a		       ef		      .byte.b	239
    886  873b		       ce		      .byte.b	206
    887  873c		       ce		      .byte.b	206
    888  873d		       8c		      .byte.b	140
    889  873e		       00		      .byte.b	0
    890  873f		       00		      .byte.b	0
      0  8740					      OPTIONAL_PAGEBREAK	"HUNDPF1_8", 32
     10  8740					      LIST	ON
    892  8740				   HUNDPF1_8
    893  8740				  -	      if	0
    894  8740				  -
    895  8740				  -	      .byte	0
    896  8740				  -	      .byte	0
    897  8740				  -	      .byte	0
    898  8740				  -	      .byte	28
    899  8740				  -	      .byte	62
    900  8740				  -	      .byte	62
    901  8740				  -	      .byte	127
    902  8740				  -	      .byte	119
    903  8740				  -	      .byte	99
    904  8740				  -	      .byte	99
    905  8740				  -	      .byte	99
    906  8740				  -	      .byte	99
    907  8740				  -	      .byte	99
    908  8740				  -	      .byte	99
    909  8740				  -	      .byte	119
    910  8740				  -	      .byte	63
    911  8740				  -	      .byte	62
    912  8740				  -	      .byte	126
    913  8740				  -	      .byte	119
    914  8740				  -	      .byte	99
    915  8740				  -	      .byte	99
    916  8740				  -	      .byte	99
    917  8740				  -	      .byte	99
    918  8740				  -	      .byte	99
    919  8740				  -	      .byte	99
    920  8740				  -	      .byte	119
    921  8740				  -	      .byte	127
    922  8740				  -	      .byte	62
    923  8740				  -	      .byte	62
    924  8740				  -	      .byte	28
    925  8740				  -	      .byte	0
    926  8740				  -	      .byte	0
    927  8740					      endif
    928  8740
      0  8740					      OPTIONAL_PAGEBREAK	"LEFT_9", 32
     10  8740					      LIST	ON
    930  8740				   LEFT_9
    931  8740		       00		      .byte.b	0
    932  8741		       00		      .byte.b	0
    933  8742		       00		      .byte.b	0
    934  8743		       0c		      .byte.b	12
    935  8744		       1c		      .byte.b	28
    936  8745		       3c		      .byte.b	60
    937  8746		       3c		      .byte.b	60
    938  8747		       70		      .byte.b	112
    939  8748		       70		      .byte.b	112
    940  8749		       60		      .byte.b	96
    941  874a		       e0		      .byte.b	224
    942  874b		       e0		      .byte.b	224
    943  874c		       c0		      .byte.b	192
    944  874d		       c0		      .byte.b	192
    945  874e		       d8		      .byte.b	216
    946  874f		       fc		      .byte.b	252
    947  8750		       fc		      .byte.b	252
    948  8751		       fe		      .byte.b	254
    949  8752		       ee		      .byte.b	238
    950  8753		       c6		      .byte.b	198
    951  8754		       c6		      .byte.b	198
    952  8755		       c6		      .byte.b	198
    953  8756		       c6		      .byte.b	198
    954  8757		       c6		      .byte.b	198
    955  8758		       c6		      .byte.b	198
    956  8759		       ee		      .byte.b	238
    957  875a		       fe		      .byte.b	254
    958  875b		       7c		      .byte.b	124
    959  875c		       7c		      .byte.b	124
    960  875d		       38		      .byte.b	56
    961  875e		       00		      .byte.b	0
    962  875f		       00		      .byte.b	0
      0  8760					      OPTIONAL_PAGEBREAK	"RIGHT_9", 32
     10  8760					      LIST	ON
    964  8760				   RIGHT_9
    965  8760		       00		      .byte.b	0
    966  8761		       00		      .byte.b	0
    967  8762		       00		      .byte.b	0
    968  8763		       c0		      .byte.b	192
    969  8764		       c8		      .byte.b	200
    970  8765		       cc		      .byte.b	204
    971  8766		       cc		      .byte.b	204
    972  8767		       0e		      .byte.b	14
    973  8768		       0e		      .byte.b	14
    974  8769		       06		      .byte.b	6
    975  876a		       07		      .byte.b	7
    976  876b		       07		      .byte.b	7
    977  876c		       03		      .byte.b	3
    978  876d		       03		      .byte.b	3
    979  876e		       8b		      .byte.b	139
    980  876f		       cf		      .byte.b	207
    981  8770		       cf		      .byte.b	207
    982  8771		       ef		      .byte.b	239
    983  8772		       e7		      .byte.b	231
    984  8773		       63		      .byte.b	99
    985  8774		       63		      .byte.b	99
    986  8775		       63		      .byte.b	99
    987  8776		       63		      .byte.b	99
    988  8777		       63		      .byte.b	99
    989  8778		       63		      .byte.b	99
    990  8779		       e7		      .byte.b	231
    991  877a		       ef		      .byte.b	239
    992  877b		       ce		      .byte.b	206
    993  877c		       ce		      .byte.b	206
    994  877d		       8c		      .byte.b	140
    995  877e		       00		      .byte.b	0
    996  877f		       00		      .byte.b	0
      0  8780					      OPTIONAL_PAGEBREAK	"HUNDPF1_9", 32
     10  8780					      LIST	ON
    998  8780				   HUNDPF1_9
    999  8780				  -	      if	0
   1000  8780				  -	      .byte	0
   1001  8780				  -	      .byte	0
   1002  8780				  -	      .byte	0
   1003  8780				  -	      .byte	48
   1004  8780				  -	      .byte	56
   1005  8780				  -	      .byte	60
   1006  8780				  -	      .byte	60
   1007  8780				  -	      .byte	14
   1008  8780				  -	      .byte	14
   1009  8780				  -	      .byte	6
   1010  8780				  -	      .byte	7
   1011  8780				  -	      .byte	7
   1012  8780				  -	      .byte	3
   1013  8780				  -	      .byte	3
   1014  8780				  -	      .byte	27
   1015  8780				  -	      .byte	63
   1016  8780				  -	      .byte	63
   1017  8780				  -	      .byte	127
   1018  8780				  -	      .byte	119
   1019  8780				  -	      .byte	99
   1020  8780				  -	      .byte	99
   1021  8780				  -	      .byte	99
   1022  8780				  -	      .byte	99
   1023  8780				  -	      .byte	99
   1024  8780				  -	      .byte	99
   1025  8780				  -	      .byte	119
   1026  8780				  -	      .byte	127
   1027  8780				  -	      .byte	62
   1028  8780				  -	      .byte	62
   1029  8780				  -	      .byte	28
   1030  8780				  -	      .byte	0
   1031  8780				  -	      .byte	0
   1032  8780					      endif
   1033  8780
      0  8780					      OPTIONAL_PAGEBREAK	"LEFT_star0", 32
     10  8780					      LIST	ON
   1035  8780				   LEFT_star0
   1036  8780		       2c		      .byte.b	44
   1037  8781		       00		      .byte.b	0
   1038  8782		       28		      .byte.b	40
   1039  8783		       28		      .byte.b	40
   1040  8784		       28		      .byte.b	40
   1041  8785		       28		      .byte.b	40
   1042  8786		       38		      .byte.b	56
   1043  8787		       38		      .byte.b	56
   1044  8788		       28		      .byte.b	40
   1045  8789		       38		      .byte.b	56
   1046  878a		       38		      .byte.b	56
   1047  878b		       38		      .byte.b	56
   1048  878c		       38		      .byte.b	56
   1049  878d		       fe		      .byte.b	254
   1050  878e		       fe		      .byte.b	254
   1051  878f		       b2		      .byte.b	178
   1052  8790		       ba		      .byte.b	186
   1053  8791		       b2		      .byte.b	178
   1054  8792		       30		      .byte.b	48
   1055  8793		       18		      .byte.b	24
   1056  8794		       14		      .byte.b	20
   1057  8795		       08		      .byte.b	8
   1058  8796		       3c		      .byte.b	60
   1059  8797		       3a		      .byte.b	58
   1060  8798		       00		      .byte.b	0
   1061  8799		       00		      .byte.b	0
   1062  879a		       00		      .byte.b	0
   1063  879b		       00		      .byte.b	0
   1064  879c		       00		      .byte.b	0
   1065  879d		       00		      .byte.b	0
   1066  879e		       00		      .byte.b	0
   1067  879f		       00		      .byte.b	0
      0  87a0					      OPTIONAL_PAGEBREAK	"LEFT_star1", 32
     10  87a0					      LIST	ON
   1069  87a0				   LEFT_star1
   1070  87a0		       46		      .byte.b	70
   1071  87a1		       80		      .byte.b	128
   1072  87a2		       64		      .byte.b	100
   1073  87a3		       62		      .byte.b	98
   1074  87a4		       1e		      .byte.b	30
   1075  87a5		       3c		      .byte.b	60
   1076  87a6		       28		      .byte.b	40
   1077  87a7		       30		      .byte.b	48
   1078  87a8		       38		      .byte.b	56
   1079  87a9		       38		      .byte.b	56
   1080  87aa		       38		      .byte.b	56
   1081  87ab		       3c		      .byte.b	60
   1082  87ac		       3e		      .byte.b	62
   1083  87ad		       3f		      .byte.b	63
   1084  87ae		       19		      .byte.b	25
   1085  87af		       19		      .byte.b	25
   1086  87b0		       1d		      .byte.b	29
   1087  87b1		       18		      .byte.b	24
   1088  87b2		       0c		      .byte.b	12
   1089  87b3		       0a		      .byte.b	10
   1090  87b4		       04		      .byte.b	4
   1091  87b5		       1e		      .byte.b	30
   1092  87b6		       1d		      .byte.b	29
   1093  87b7		       00		      .byte.b	0
   1094  87b8		       00		      .byte.b	0
   1095  87b9		       00		      .byte.b	0
   1096  87ba		       00		      .byte.b	0
   1097  87bb		       00		      .byte.b	0
   1098  87bc		       00		      .byte.b	0
   1099  87bd		       00		      .byte.b	0
   1100  87be		       00		      .byte.b	0
   1101  87bf		       00		      .byte.b	0
      0  87c0					      OPTIONAL_PAGEBREAK	"LEFT_star2", 32
     10  87c0					      LIST	ON
   1103  87c0				   LEFT_star2
   1104  87c0		       26		      .byte.b	38
   1105  87c1		       40		      .byte.b	64
   1106  87c2		       34		      .byte.b	52
   1107  87c3		       14		      .byte.b	20
   1108  87c4		       14		      .byte.b	20
   1109  87c5		       3c		      .byte.b	60
   1110  87c6		       3c		      .byte.b	60
   1111  87c7		       28		      .byte.b	40
   1112  87c8		       30		      .byte.b	48
   1113  87c9		       38		      .byte.b	56
   1114  87ca		       38		      .byte.b	56
   1115  87cb		       38		      .byte.b	56
   1116  87cc		       3c		      .byte.b	60
   1117  87cd		       3e		      .byte.b	62
   1118  87ce		       3f		      .byte.b	63
   1119  87cf		       19		      .byte.b	25
   1120  87d0		       19		      .byte.b	25
   1121  87d1		       1d		      .byte.b	29
   1122  87d2		       18		      .byte.b	24
   1123  87d3		       0c		      .byte.b	12
   1124  87d4		       0a		      .byte.b	10
   1125  87d5		       04		      .byte.b	4
   1126  87d6		       1e		      .byte.b	30
   1127  87d7		       1d		      .byte.b	29
   1128  87d8		       00		      .byte.b	0
   1129  87d9		       00		      .byte.b	0
   1130  87da		       00		      .byte.b	0
   1131  87db		       00		      .byte.b	0
   1132  87dc		       00		      .byte.b	0
   1133  87dd		       00		      .byte.b	0
   1134  87de		       00		      .byte.b	0
   1135  87df		       00		      .byte.b	0
      0  87e0					      OPTIONAL_PAGEBREAK	"LEFT_star3", 32
     10  87e0					      LIST	ON
   1137  87e0				   LEFT_star3
   1138  87e0		       46		      .byte.b	70
   1139  87e1		       80		      .byte.b	128
   1140  87e2		       64		      .byte.b	100
   1141  87e3		       72		      .byte.b	114
   1142  87e4		       3e		      .byte.b	62
   1143  87e5		       3c		      .byte.b	60
   1144  87e6		       18		      .byte.b	24
   1145  87e7		       30		      .byte.b	48
   1146  87e8		       38		      .byte.b	56
   1147  87e9		       38		      .byte.b	56
   1148  87ea		       38		      .byte.b	56
   1149  87eb		       3c		      .byte.b	60
   1150  87ec		       3e		      .byte.b	62
   1151  87ed		       3f		      .byte.b	63
   1152  87ee		       19		      .byte.b	25
   1153  87ef		       19		      .byte.b	25
   1154  87f0		       1d		      .byte.b	29
   1155  87f1		       18		      .byte.b	24
   1156  87f2		       0c		      .byte.b	12
   1157  87f3		       0a		      .byte.b	10
   1158  87f4		       04		      .byte.b	4
   1159  87f5		       1e		      .byte.b	30
   1160  87f6		       1d		      .byte.b	29
   1161  87f7		       00		      .byte.b	0
   1162  87f8		       00		      .byte.b	0
   1163  87f9		       00		      .byte.b	0
   1164  87fa		       00		      .byte.b	0
   1165  87fb		       00		      .byte.b	0
   1166  87fc		       00		      .byte.b	0
   1167  87fd		       00		      .byte.b	0
   1168  87fe		       00		      .byte.b	0
   1169  87ff		       00		      .byte.b	0
------- FILE levelScreen.asm
    802  8800
      0  8800					      CHECK_BANK_SIZE	"LEVELSCREEN"
      1  8800		       08 00	   .TEMP      =	* - BANK_START
 LEVELSCREEN (2K) SIZE =  $800 , FREE= $0
      2  8800					      ECHO	"LEVELSCREEN", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  8800				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  8800				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  8800				  -	      ERR
      6  8800					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_INITBANK.asm LEVEL 2 PASS 3
      0  8800					      include	"BANK_INITBANK.asm"	; MUST be after banks that include levels -- otherwise MAX_LEVELBANK is not calculated properly
      1  8800							;    Sokoboo - a Sokoban implementation
      2  8800							;    using a generic tile-based display engine for the Atari 2600
      3  8800							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  8800							;
      5  8800							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  8800							;
      7  8800							;    Code related to the generic tile-based display engine was developed by
      8  8800							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  8800							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  8800							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  8800							;
     12  8800							;    Code related to music and sound effects uses the TIATracker music player
     13  8800							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  8800							;    directory for Apache licensing details.
     15  8800							;
     16  8800							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  8800							;    See the copyright notices in the License directory for a list of level
     18  8800							;    contributors.
     19  8800							;
     20  8800							;    Except where otherwise indicated, this software is released under the
     21  8800							;    following licensing arrangement...
     22  8800							;
     23  8800							;    This program is free software: you can redistribute it and/or modify
     24  8800							;    it under the terms of the GNU General Public License as published by
     25  8800							;    the Free Software Foundation, either version 3 of the License, or
     26  8800							;    (at your option) any later version.
     27  8800							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  8800
     29  8800							;    This program is distributed in the hope that it will be useful,
     30  8800							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  8800							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  8800							;    GNU General Public License for more details.
     33  8800
      0  8800					      NEWBANK	INITBANK
      1  8dbb ????				      SEG	INITBANK
      2  8800					      ORG	ORIGIN
      3  8800					      RORG	$F000
      4  8800				   BANK_START SET	*
      5  8800				   INITBANK   SET	ORIGIN / 2048
      6  8800				   ORIGIN     SET	ORIGIN + 2048
      7  8800				   _CURRENT_BANK SET	INITBANK
     35  8800
     36  8800		       00		      .byte.b	0	; to avoid extra cycle when accessing via BoardLineStartLO-1,y
     37  8801
      0  8801					      DEFINE_SUBROUTINE	BoardLineStartLO
      1  8801		       00 11	   BANK_BoardLineStartLO =	_CURRENT_BANK
      2  8801					      SUBROUTINE
      3  8801				   BoardLineStartLO
     39  8801
     40  8801							; Gives the start address (LO) of each board line
     41  8801					      if	1
     42  8801				   .BOARD_LOCATION SET	Board
     43  8801					      REPEAT	SIZE_BOARD_Y
     44  8801				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8801				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8801					      ENDIF
     47  8801		       00		      .byte.b	<.BOARD_LOCATION
     48  8801				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8801					      REPEND
     44  8802				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8802				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8802					      ENDIF
     47  8802		       28		      .byte.b	<.BOARD_LOCATION
     48  8802				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8802					      REPEND
     44  8803				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8803				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8803					      ENDIF
     47  8803		       50		      .byte.b	<.BOARD_LOCATION
     48  8803				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8803					      REPEND
     44  8804				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8804				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8804					      ENDIF
     47  8804		       78		      .byte.b	<.BOARD_LOCATION
     48  8804				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8804					      REPEND
     44  8805				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8805				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8805					      ENDIF
     47  8805		       a0		      .byte.b	<.BOARD_LOCATION
     48  8805				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8805					      REPEND
     44  8806				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8806				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8806					      ENDIF
     47  8806		       c8		      .byte.b	<.BOARD_LOCATION
     48  8806				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8806					      REPEND
     44  8807					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8807				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8807					      ENDIF
     47  8807		       00		      .byte.b	<.BOARD_LOCATION
     48  8807				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8807					      REPEND
     44  8808				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8808				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8808					      ENDIF
     47  8808		       28		      .byte.b	<.BOARD_LOCATION
     48  8808				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8808					      REPEND
     44  8809				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8809				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8809					      ENDIF
     47  8809		       50		      .byte.b	<.BOARD_LOCATION
     48  8809				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8809					      REPEND
     44  880a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  880a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  880a					      ENDIF
     47  880a		       78		      .byte.b	<.BOARD_LOCATION
     48  880a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  880a					      REPEND
     44  880b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  880b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  880b					      ENDIF
     47  880b		       a0		      .byte.b	<.BOARD_LOCATION
     48  880b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  880b					      REPEND
     44  880c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  880c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  880c					      ENDIF
     47  880c		       c8		      .byte.b	<.BOARD_LOCATION
     48  880c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  880c					      REPEND
     44  880d					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  880d				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  880d					      ENDIF
     47  880d		       00		      .byte.b	<.BOARD_LOCATION
     48  880d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  880d					      REPEND
     44  880e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  880e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  880e					      ENDIF
     47  880e		       28		      .byte.b	<.BOARD_LOCATION
     48  880e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  880e					      REPEND
     44  880f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  880f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  880f					      ENDIF
     47  880f		       50		      .byte.b	<.BOARD_LOCATION
     48  880f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  880f					      REPEND
     44  8810				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8810				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8810					      ENDIF
     47  8810		       78		      .byte.b	<.BOARD_LOCATION
     48  8810				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8810					      REPEND
     44  8811				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8811				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8811					      ENDIF
     47  8811		       a0		      .byte.b	<.BOARD_LOCATION
     48  8811				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8811					      REPEND
     44  8812				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8812				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8812					      ENDIF
     47  8812		       c8		      .byte.b	<.BOARD_LOCATION
     48  8812				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8812					      REPEND
     44  8813					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8813				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8813					      ENDIF
     47  8813		       00		      .byte.b	<.BOARD_LOCATION
     48  8813				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8813					      REPEND
     44  8814				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8814				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8814					      ENDIF
     47  8814		       28		      .byte.b	<.BOARD_LOCATION
     48  8814				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8814					      REPEND
     44  8815				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8815				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8815					      ENDIF
     47  8815		       50		      .byte.b	<.BOARD_LOCATION
     48  8815				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  8815					      REPEND
     44  8816				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  8816				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  8816					      ENDIF
     47  8816		       78		      .byte.b	<.BOARD_LOCATION
     48  8816				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     49  8817					      REPEND
      0  8817					      CHECKPAGEX	BoardLineStartLO, "BoardLineStartLO in BANK_INITBANK.asm"
      9  8817					      LIST	ON
     51  8817
     52  8817		       03 a0	   SIZE_BOARD =	.BOARD_LOCATION-Board	; verify calculated value
     53  8817					      endif
     54  8817
     55  8817							;------------------------------------------------------------------------------
     56  8817
     57  8817				   BoardLineStartHiR
     58  8817
     59  8817							; Gives the start address (HI) of each board line
     60  8817							; Note this caters for the memory wrapping when we go from bank to bank, as
     61  8817							; the board overlays multiple banks!
     62  8817
     63  8817				   .BOARD_LOCATION SET	Board
     64  8817					      REPEAT	SIZE_BOARD_Y
     65  8817				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8817				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8817					      ENDIF
     68  8817		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8817				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8817					      REPEND
     65  8818				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8818				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8818					      ENDIF
     68  8818		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8818				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8818					      REPEND
     65  8819				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8819				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8819					      ENDIF
     68  8819		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8819				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8819					      REPEND
     65  881a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  881a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  881a					      ENDIF
     68  881a		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  881a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  881a					      REPEND
     65  881b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  881b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  881b					      ENDIF
     68  881b		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  881b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  881b					      REPEND
     65  881c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  881c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  881c					      ENDIF
     68  881c		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  881c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  881c					      REPEND
     65  881d					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  881d				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  881d					      ENDIF
     68  881d		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  881d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  881d					      REPEND
     65  881e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  881e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  881e					      ENDIF
     68  881e		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  881e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  881e					      REPEND
     65  881f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  881f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  881f					      ENDIF
     68  881f		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  881f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  881f					      REPEND
     65  8820				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8820				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8820					      ENDIF
     68  8820		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8820				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8820					      REPEND
     65  8821				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8821				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8821					      ENDIF
     68  8821		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8821				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8821					      REPEND
     65  8822				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8822				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8822					      ENDIF
     68  8822		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8822				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8822					      REPEND
     65  8823					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8823				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8823					      ENDIF
     68  8823		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8823				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8823					      REPEND
     65  8824				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8824				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8824					      ENDIF
     68  8824		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8824				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8824					      REPEND
     65  8825				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8825				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8825					      ENDIF
     68  8825		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8825				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8825					      REPEND
     65  8826				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8826				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8826					      ENDIF
     68  8826		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8826				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8826					      REPEND
     65  8827				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8827				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8827					      ENDIF
     68  8827		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8827				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8827					      REPEND
     65  8828				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8828				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8828					      ENDIF
     68  8828		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8828				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8828					      REPEND
     65  8829					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  8829				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  8829					      ENDIF
     68  8829		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  8829				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  8829					      REPEND
     65  882a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  882a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  882a					      ENDIF
     68  882a		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  882a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  882a					      REPEND
     65  882b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  882b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  882b					      ENDIF
     68  882b		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  882b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  882b					      REPEND
     65  882c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  882c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  882c					      ENDIF
     68  882c		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  882c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     70  882d					      REPEND
      0  882d					      CHECKPAGEX	BoardLineStartHiR, "BoardLineStartHiR in BANK_INITBANK"
      9  882d					      LIST	ON
     72  882d							;------------------------------------------------------------------------------
     73  882d
     74  882d				   BoardLineStartHiW
     75  882d
     76  882d							; Gives the start address (HI) of each board line
     77  882d							; Note this caters for the memory wrapping when we go from bank to bank, as
     78  882d							; the board overlays multiple banks!
     79  882d
     80  882d				   .BOARD_LOCATION SET	Board
     81  882d					      REPEAT	SIZE_BOARD_Y
     82  882d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  882d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  882d					      ENDIF
     85  882d		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  882d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  882d					      REPEND
     82  882e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  882e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  882e					      ENDIF
     85  882e		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  882e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  882e					      REPEND
     82  882f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  882f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  882f					      ENDIF
     85  882f		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  882f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  882f					      REPEND
     82  8830				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8830				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8830					      ENDIF
     85  8830		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8830				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8830					      REPEND
     82  8831				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8831				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8831					      ENDIF
     85  8831		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8831				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8831					      REPEND
     82  8832				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8832				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8832					      ENDIF
     85  8832		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8832				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8832					      REPEND
     82  8833					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8833				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8833					      ENDIF
     85  8833		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8833				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8833					      REPEND
     82  8834				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8834				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8834					      ENDIF
     85  8834		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8834				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8834					      REPEND
     82  8835				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8835				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8835					      ENDIF
     85  8835		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8835				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8835					      REPEND
     82  8836				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8836				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8836					      ENDIF
     85  8836		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8836				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8836					      REPEND
     82  8837				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8837				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8837					      ENDIF
     85  8837		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8837				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8837					      REPEND
     82  8838				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8838				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8838					      ENDIF
     85  8838		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8838				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8838					      REPEND
     82  8839					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8839				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8839					      ENDIF
     85  8839		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8839				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8839					      REPEND
     82  883a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  883a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  883a					      ENDIF
     85  883a		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  883a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  883a					      REPEND
     82  883b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  883b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  883b					      ENDIF
     85  883b		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  883b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  883b					      REPEND
     82  883c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  883c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  883c					      ENDIF
     85  883c		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  883c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  883c					      REPEND
     82  883d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  883d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  883d					      ENDIF
     85  883d		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  883d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  883d					      REPEND
     82  883e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  883e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  883e					      ENDIF
     85  883e		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  883e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  883e					      REPEND
     82  883f					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  883f				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  883f					      ENDIF
     85  883f		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  883f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  883f					      REPEND
     82  8840				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8840				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8840					      ENDIF
     85  8840		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8840				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8840					      REPEND
     82  8841				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8841				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8841					      ENDIF
     85  8841		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8841				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  8841					      REPEND
     82  8842				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  8842				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  8842					      ENDIF
     85  8842		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  8842				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     87  8843					      REPEND
      0  8843					      CHECKPAGEX	BoardLineStartHiW, "BoardLineStartHiW in BANK_INITBANK"
      9  8843					      LIST	ON
     89  8843
     90  8843							;------------------------------------------------------------------------------
     91  8843							;    IF MULTI_BANK_BOARD = YES
     92  8843							;BoardBank
     93  8843							;    ENDIF
     94  8843							; Gives the RAM bank of the start of the board row for a given row.
     95  8843
     96  8843				   .BOARD_LOCATION SET	Board - RAM_3E
     97  8843					      REPEAT	SIZE_BOARD_Y
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843					      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  8843					      REPEND
     98  8843				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  8843				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  8843					      ENDIF
    101  8843							;    IF MULTI_BANK_BOARD = YES
    102  8843							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  8843							;    ENDIF
    104  8843				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
    105  8843					      REPEND
    106  8843							;    IF MULTI_BANK_BOARD = YES
    107  8843							;    CHECKPAGEX BoardBank, "BoardBank in BANK_INITBANK.asm"
    108  8843							;    ENDIF
    109  8843
    110  8843
    111  8843							;------------------------------------------------------------------------------
    112  8843
    113  8843				   CopyROMShadowToRAM_F000
    114  8843		       a9 f0		      lda	#>$F000
    115  8845
      0  8845					      DEFINE_SUBROUTINE	CopyROMShadowToRAM	; in INITBANK
      1  8845		       00 11	   BANK_CopyROMShadowToRAM =	_CURRENT_BANK
      2  8845					      SUBROUTINE
      3  8845				   CopyROMShadowToRAM
    117  8845
    118  8845							; Function copies a RAM prototype ROM bank into the destination RAM bank.  Typically
    119  8845							; the variable definitions are in the ROM shadow because this allows auto-initialisation
    120  8845							; of the variable contents from ROM declarations, but still allows access to them as
    121  8845							; variables when the correct RAM bank is switched in.	Code is also, of course, copied
    122  8845							; into the RAM destination so that code is callable whenever the ROM *or* RAM bank is
    123  8845							; switched in.  Further, if multiple copies are made to multiple RAM banks, then the
    124  8845							; code co-lives in all banks and may run even as bankswitching occurs between those
    125  8845							; banks -- by the very code itself.
    126  8845
    127  8845							; Note: Relies on ROM_Bank having being set via CALL mechanism to call this function
    128  8845		       85 bc		      sta	Board_AddressR+1
    129  8847		       86 db		      stx	O_ROM_Source_Bank	; source bank
    130  8849		       84 c0		      sty	RAM_Bank	; destination bank
    131  884b
    132  884b		       a0 00		      ldy	#0
    133  884d		       84 bb		      sty	Board_AddressR
    134  884f		       84 bd		      sty	Board_AddressW
    135  8851		       a9 14		      lda	#>($1000+RAM_WRITE)
    136  8853		       85 be		      sta	Board_AddressW+1
    137  8855
    138  8855							; Iterate 4 pages (1K) for complete bank copy
    139  8855
    140  8855		       a9 04		      lda	#4
    141  8857		       85 da		      sta	O_CopyCount
    142  8859
    143  8859		       84 dc	   CopyPage   sty	O_Index
    144  885b		       a5 db		      lda	O_ROM_Source_Bank
    145  885d		       20 0f f8 	      jsr	GetROMByte	; get byte from ROM shadow bank
    146  8860							;tax
    147  8860		       a4 dc		      ldy	O_Index
    148  8862		       a6 c0		      ldx	RAM_Bank
    149  8864		       20 1d f8 	      jsr	PutBoardCharacter	;6+21(A)	 write byte to RAM bank
    150  8867
    151  8867		       a4 dc		      ldy	O_Index
    152  8869		       c8		      iny
    153  886a		       d0 ed		      bne	CopyPage
    154  886c
    155  886c		       e6 bc		      inc	Board_AddressR+1
    156  886e		       e6 be		      inc	Board_AddressW+1
    157  8870
    158  8870		       c6 da		      dec	O_CopyCount
    159  8872		       d0 e5		      bne	CopyPage
    160  8874
    161  8874		       a4 c0		      ldy	RAM_Bank	; TODO: remove!?
    162  8876		       60		      rts
    163  8877
    164  8877
    165  8877							;------------------------------------------------------------------------------
      0  8877					      DEFINE_SUBROUTINE	SetPlatformColours	; in INITBANK
      1  8877		       00 11	   BANK_SetPlatformColours =	_CURRENT_BANK
      2  8877					      SUBROUTINE
      3  8877				   SetPlatformColours
    167  8877
    168  8877							; Now modify the hardwired colours so that we're correctly switched for NTSC/PAL
    169  8877							; The platform (0=NTSC, 1=PAL) is set from the right difficulty switch
    170  8877							; Note: This relies on DrawTheScreen starting on page boundary so that the (),y
    171  8877							; addressing will not violate the page-crossing restriction of 3E.
    172  8877
    173  8877							;		  sty RAM_Bank			  ; we assume we called CopyROMShadowToRAM before
    174  8877
    175  8877		       a9 00		      lda	#<DrawTheScreen	; = 0
    176  8879		       85 bd		      sta	Board_AddressW
    177  887b		       a9 f4		      lda	#>( DrawTheScreen + RAM_WRITE )
    178  887d		       85 be		      sta	Board_AddressW+1
    179  887f
    180  887f							; first, set the x index (with last one being a RTS ($60))
    181  887f
    182  887f		       a6 c0		      ldx	RAM_Bank
    183  8881		       e0 07		      cpx	#SCREEN_LINES-1	; might become variable when vertical scrolling
    184  8883		       d0 07		      bne	.skipPatch
    185  8885		       a9 60		      lda	#$60	; rts
    186  8887		       a0 41		      ldy	#<SELFMOD_X
    187  8889		       20 1d f8 	      jsr	PutBoardCharacter	;6+21(A)	 set index/rts
    188  888c				   .skipPatch
    189  888c
    190  888c
    191  888c							; randomise the rainbow band starting point. Technically we only need
    192  888c							; to do this on the FIRST bank
    193  888c
    194  888c		       a9 67		      lda	#<(BandOffset+RAM_WRITE)
    195  888e		       85 bd		      sta	Board_AddressW
    196  8890		       a9 f7		      lda	#>(BandOffset+RAM_WRITE)
    197  8892		       85 be		      sta	Board_AddressW+1
    198  8894		       20 4b fd 	      jsr	Random
    199  8897		       29 1f		      and	#31
    200  8899		       a0 00		      ldy	#0	; offset from address
    201  889b		       20 1d f8 	      jsr	PutBoardCharacter
    202  889e
    203  889e
    204  889e
    205  889e		       a4 c0		      ldy	RAM_Bank
    206  88a0		       60		      rts
    207  88a1
    208  88a1				   SelfModColOfsTbl
    209  88a1		       53 86 1d 	      .byte.b	<(SELFMOD_BLUE+1), <(SELFMOD_GREEN+1), <(SELFMOD_RED+1)
    210  88a4
    211  88a4
    212  88a4
    213  88a4				   DrawLineStartLO
    214  88a4
    215  88a4							; Gives the start address of each line in the draw flags buffer
    216  88a4
    217  88a4				   .DRAW_LOCATION SET	DrawFlag
    218  88a4					      REPEAT	SCREEN_LINES
    219  88a4		       50		      .byte.b	<.DRAW_LOCATION
    220  88a4				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88a4					      REPEND
    219  88a5		       5a		      .byte.b	<.DRAW_LOCATION
    220  88a5				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88a5					      REPEND
    219  88a6		       64		      .byte.b	<.DRAW_LOCATION
    220  88a6				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88a6					      REPEND
    219  88a7		       6e		      .byte.b	<.DRAW_LOCATION
    220  88a7				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88a7					      REPEND
    219  88a8		       78		      .byte.b	<.DRAW_LOCATION
    220  88a8				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88a8					      REPEND
    219  88a9		       82		      .byte.b	<.DRAW_LOCATION
    220  88a9				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88a9					      REPEND
    219  88aa		       8c		      .byte.b	<.DRAW_LOCATION
    220  88aa				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  88aa					      REPEND
    219  88ab		       96		      .byte.b	<.DRAW_LOCATION
    220  88ab				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    221  88ac					      REPEND
    222  88ac
    223  88ac
    224  88ac							;------------------------------------------------------------------------------
    225  88ac
      0  88ac					      DEFINE_SUBROUTINE	GetBoardAddressRW	; in INITBANK
      1  88ac		       00 11	   BANK_GetBoardAddressRW =	_CURRENT_BANK
      2  88ac					      SUBROUTINE
      3  88ac				   GetBoardAddressRW
    227  88ac							; Must share same bank as BoardLineStart tables
    228  88ac
    229  88ac		       b9 01 f0 	      lda	BoardLineStartLO,y	; 4
    230  88af		       85 bb		      sta	Board_AddressR	; 3
    231  88b1		       85 bd		      sta	Board_AddressW	; 3
    232  88b3		       b9 17 f0 	      lda	BoardLineStartHiR,y	; 4
    233  88b6		       85 bc		      sta	Board_AddressR+1	; 3	     READ address
    234  88b8		       09 04		      ora	#>RAM_WRITE	; 2
    235  88ba		       85 be		      sta	Board_AddressW+1	; 3	     WRITE address
    236  88bc							;    IF MULTI_BANK_BOARD = YES
    237  88bc							;		  ldx BoardBank,y		  ; 4 = 26    switch this on return
    238  88bc							;    ELSE
    239  88bc		       a2 0d		      ldx	#BANK_BOARD	; 2
    240  88be							;    ENDIF
    241  88be		       60		      rts		; 6 = 32[-2]
    242  88bf
    243  88bf							;------------------------------------------------------------------------------
    244  88bf
      0  88bf					      DEFINE_SUBROUTINE	GetBoardAddressR	;=24[-2](A)
      1  88bf		       00 11	   BANK_GetBoardAddressR =	_CURRENT_BANK
      2  88bf					      SUBROUTINE
      3  88bf				   GetBoardAddressR
    246  88bf
    247  88bf		       b9 01 f0 	      lda	BoardLineStartLO,y	; 4
    248  88c2		       85 bb		      sta	Board_AddressR	; 3
    249  88c4		       b9 17 f0 	      lda	BoardLineStartHiR,y	; 4
    250  88c7		       85 bc		      sta	Board_AddressR+1	; 3	 READ address
    251  88c9							;    IF MULTI_BANK_BOARD = YES
    252  88c9							;		  lda BoardBank,y		  ; 4	  switch this on return
    253  88c9							;    ELSE
    254  88c9		       a9 0d		      lda	#BANK_BOARD	; 2
    255  88cb							;    ENDIF
    256  88cb		       60		      rts		; 6[-2]
    257  88cc
    258  88cc							;------------------------------------------------------------------------------
    259  88cc
      0  88cc					      DEFINE_SUBROUTINE	GetBoardAddressW	;=24[-2](A)
      1  88cc		       00 11	   BANK_GetBoardAddressW =	_CURRENT_BANK
      2  88cc					      SUBROUTINE
      3  88cc				   GetBoardAddressW
    261  88cc
    262  88cc							; Must share same bank as BoardLineStart tables
    263  88cc
    264  88cc		       b9 01 f0 	      lda	BoardLineStartLO,y	;4
    265  88cf		       85 bd		      sta	Board_AddressW	;3
    266  88d1		       b9 2d f0 	      lda	BoardLineStartHiW,y	;4
    267  88d4		       85 be		      sta	Board_AddressW+1	;3 WRITE address
    268  88d6							;    IF MULTI_BANK_BOARD = YES
    269  88d6							;		  ldx BoardBank,y		  ;4 switch this on return
    270  88d6							;    ELSE
    271  88d6		       a2 0d		      ldx	#BANK_BOARD	;2
    272  88d8							;    ENDIF
    273  88d8		       60	   QRet       rts		;6
    274  88d9
    275  88d9							;-------------------------------------------------------------------------------
    276  88d9
    277  88d9
    278  88d9							;------------------------------------------------------------------------------
    279  88d9
    280  88d9		       e6 a4	   cannotPush inc	ManPushCounter
    281  88db		       60		      rts
    282  88dc
      0  88dc					      DEFINE_SUBROUTINE	PushBox
      1  88dc		       00 11	   BANK_PushBox =	_CURRENT_BANK
      2  88dc					      SUBROUTINE
      3  88dc				   PushBox
    284  88dc
    285  88dc							; X = restoration character for square we are moving TO
    286  88dc							; so, if X = CHARACTER_TARGET AND we move, THEN we are pushing a box off a target
    287  88dc							; A = this bank!
    288  88dc
    289  88dc		       85 bf		      sta	ROM_Bank
    290  88de
    291  88de		       a9 08		      lda	#ANIMATION_PUSH_ID
    292  88e0		       c5 a6		      cmp	ManAnimationID
    293  88e2		       f0 10		      beq	alreadyAnimPush
    294  88e4
      0  88e4					      LOAD_ANIMATION	PUSH
      1  88e4		       a9 c8		      lda	#<Animation_PUSH
      2  88e6		       85 9a		      sta	animation
      3  88e8		       a9 f0		      lda	#>Animation_PUSH
      4  88ea		       85 9b		      sta	animation+1
      5  88ec		       a9 00		      lda	#0
      6  88ee		       85 9c		      sta	animation_delay
      7  88f0		       a9 08		      lda	#ANIMATION_PUSH_ID
      8  88f2		       85 a6		      sta	ManAnimationID
    296  88f4
    297  88f4							;lda #0
    298  88f4							;sta idleCount
    299  88f4
    300  88f4				   alreadyAnimPush
    301  88f4
    302  88f4
    303  88f4		       a5 a4		      lda	ManPushCounter
    304  88f6		       c9 06		      cmp	#PUSH_LIMIT
    305  88f8		       90 df		      bcc	cannotPush
    306  88fa
    307  88fa		       86 dc		      stx	restorationCharacter	; players new location's restore
    308  88fc
    309  88fc							; Determine if the box is pushable
    310  88fc							; we use the joystick to calculate the subsequent square
    311  88fc
    312  88fc		       a5 93		      lda	PreviousJoystick
    313  88fe		       4a		      lsr
    314  88ff		       4a		      lsr
    315  8900		       4a		      lsr
    316  8901		       4a		      lsr
    317  8902		       a8		      tay
    318  8903
    319  8903		       b9 d4 f2 	      lda	JoyMoveX,y
    320  8906		       f0 05		      beq	x0
    321  8908		       b9 e4 f2 	      lda	JoyMoveY,y
    322  890b		       d0 cc		      bne	cannotPush	; avoid diagonal pushes!
    323  890d
    324  890d		       98	   x0	      tya
    325  890e		       48		      pha
    326  890f
    327  890f		       18		      clc
    328  8910		       a5 8a		      lda	POS_Y_NEW
    329  8912		       79 e4 f2 	      adc	JoyMoveY,y
    330  8915		       85 88		      sta	POS_Y	; the box's pushed-to square
    331  8917		       a8		      tay
    332  8918		       20 ac f0 	      jsr	GetBoardAddressRW
    333  891b
    334  891b		       68		      pla
    335  891c		       a8		      tay
    336  891d
    337  891d		       18		      clc
    338  891e		       a5 89		      lda	POS_X_NEW
    339  8920		       79 d4 f2 	      adc	JoyMoveX,y
    340  8923		       85 87		      sta	POS_X	; the box's pushed-to square
    341  8925		       48		      pha
    342  8926		       a8		      tay
    343  8927
    344  8927							;    IF MULTI_BANK_BOARD = YES
    345  8927							;		  lda RAM_Bank
    346  8927							;    ELSE
    347  8927		       a9 0d		      lda	#BANK_BOARD	; 2
    348  8929							;    ENDIF
    349  8929		       20 14 f8 	      jsr	GetBoardCharacter	;6+20(A)
    350  892c		       68		      pla
    351  892d		       a8		      tay
    352  892e
    353  892e		       a9 02		      lda	#CHARACTER_BOX
    354  8930		       e0 00		      cpx	#CHARACTER_BLANK
    355  8932		       f0 0d		      beq	canPushTarget
    356  8934
    357  8934		       e0 03		      cpx	#CHARACTER_TARGET
    358  8936		       f0 04		      beq	decreaseTargets
    359  8938		       e0 04		      cpx	#CHARACTER_TARGET2
    360  893a		       d0 9d		      bne	cannotPush
    361  893c
    362  893c							; Box is now on a target - so decrease the remaining targets
    363  893c
    364  893c		       20 41 fd    decreaseTargets jsr	DeRegisterTarget
    365  893f		       a9 08		      lda	#CHARACTER_BOX_ON_TARGET
    366  8941		       48	   canPushTarget pha
    367  8942
    368  8942							; If the box *WAS* on a target (restoration character = CHARACTER_TARGET)
    369  8942							; then we increase targets (as there is one more to get)
    370  8942
    371  8942		       a5 dc		      lda	restorationCharacter
    372  8944		       c9 03		      cmp	#CHARACTER_TARGET
    373  8946		       d0 03		      bne	notOnTargetAlready
    374  8948
    375  8948							; increase the required targets as box is leaving one
    376  8948
    377  8948		       20 37 fd 	      jsr	RegisterTarget
    378  894b
    379  894b				   notOnTargetAlready
    380  894b
    381  894b							; record the box takeback params for the player move to use
    382  894b
    383  894b		       86 91		      stx	TB_CHAR
    384  894d		       a5 87		      lda	POS_X
    385  894f		       85 8f		      sta	TB_PUSHX
    386  8951		       a5 88		      lda	POS_Y
    387  8953		       85 90		      sta	TB_PUSHY
    388  8955
    389  8955		       68		      pla		; new char to go on board in box's new position
    390  8956
    391  8956
    392  8956							;  IF MULTI_BANK_BOARD = YES
    393  8956							;		ldx RAM_Bank			  ; <-- this will never work calling from INITBANK!!!
    394  8956							;  ELSE
    395  8956		       a2 0d		      ldx	#BANK_BOARD	; 2
    396  8958							;  ENDIF
    397  8958		       20 1d f8 	      jsr	PutBoardCharacter	;6+21(A)
    398  895b
    399  895b		       a5 8c		      lda	POS_VAR	; player's restoration character
    400  895d		       48		      pha
    401  895e
    402  895e							; Before the player moves to the new position, take away the box and replace with the
    403  895e							; character the box was sitting on (BLANK or TARGET). Then the player moves in "next"
    404  895e
    405  895e		       a5 8a		      lda	POS_Y_NEW
    406  8960		       85 88		      sta	POS_Y
    407  8962		       a5 89		      lda	POS_X_NEW
    408  8964		       85 87		      sta	POS_X
    409  8966		       a5 dc		      lda	restorationCharacter
    410  8968		       85 8c		      sta	POS_VAR
    411  896a		       20 e3 f8 	      jsr	PutCharacterAtXY	; put back BOX's restoration character
    412  896d
    413  896d		       68		      pla
    414  896e		       85 8c		      sta	POS_VAR
    415  8970
    416  8970							;START_SOUND SOUND_BOX
    417  8970
    418  8970							; Note: MovePlayer expects new position to be POS_X_NEW, POS_Y_NEW
    419  8970							; AND the current man's square to be ManX, ManY
    420  8970
    421  8970		       4c 37 f9 	      jmp	MovePlayer	; now there's a gap, player should move in
    422  8973
    423  8973
    424  8973							;------------------------------------------------------------------------------
    425  8973
    426  8973							; IF the creature runs out of time to do stuff, then rts HOWEVER the creature must eventually do something
    427  8973							;  as it will be continually called in available time-slices until it does. This can lockup the system.
    428  8973
    429  8973							; if the creature is done, and is alive next cycle, then jump ReInsertObject
    430  8973
    431  8973							; if the creature dies then jump NextObject
    432  8973
    433  8973
    434  8973
    435  8973							;RDirY 	  .byte -1    ;,0,1,0
    436  8973							;RDirX 	  .byte 0,1   ;,0,-1
    437  8973							;DirPushModX	   .byte 0,-1,1,0
    438  8973							;DirPushModY	   .byte -1,0,0,1
    439  8973							;Directional	  .byte 1,2,3,0,1,2, 0,0, 11,8,9,10,11,8
    440  8973
    441  8973
    442  8973							;------------------------------------------------------------------------------
    443  8973
    444  8973							; the auto-calculation of these was causing DASM to get confused and abort assembling.
    445  8973							; I don't particularly know why; probably because of the level variable-size array and the values
    446  8973							; changing from pass to pass. I've put in the hardwired values and it seems to be OK now.
    447  8973
    448  8973		       00 00	   MANMODE_STARTUP =	0
    449  8973		       00 01	   MANMODE_NORMAL =	1
    450  8973		       00 02	   MANMODE_DEAD =	2
    451  8973		       00 03	   MANMODE_WAITING =	3
    452  8973		       00 04	   MANMODE_WAITING2 =	4
    453  8973		       00 05	   MANMODE_WAITING_NT =	5
    454  8973		       00 06	   MANMODE_WAITING_NT2 =	6
    455  8973		       00 07	   MANMODE_NEXTLEVEL =	7
    456  8973		       00 08	   MANMODE_NEXTLEVEL2 =	8
    457  8973		       00 09	   MANMODE_SWITCH =	9
    458  8973		       00 0a	   MANMODE_TURNAROUND =	10
    459  8973		       00 0b	   MANMODE_TURNAROUND2 =	11
    460  8973		       00 0c	   MANMODE_SWITCH2 =	12
    461  8973		       00 0d	   MANMODE_NEXTLEVEL3 =	13
    462  8973
    463  8973
    464  8973
    465  8973
      0  8973					      DEFINE_SUBROUTINE	ManProcess
      1  8973		       00 11	   BANK_ManProcess =	_CURRENT_BANK
      2  8973					      SUBROUTINE
      3  8973				   ManProcess
    467  8973
    468  8973							; ManMode tells the player what it is currently doing.  State machine.
    469  8973
    470  8973							; Check the switches....
    471  8973							; RESET to restart this level
    472  8973							; SELECT to start next level
    473  8973
    474  8973		       ad 82 02 	      lda	SWCHB
    475  8976		       29 03		      and	#3
    476  8978		       aa		      tax
    477  8979		       bd 9c f1 	      lda	newMode,x
    478  897c		       30 02		      bmi	skipModeChange
    479  897e		       85 a1		      sta	ManMode
    480  8980				   skipModeChange
    481  8980
    482  8980		       20 00 f8 	      jsr	DrawTimeFromROM	; Z-flag == 0!
    483  8983
    484  8983		       38		      sec
    485  8984		       a5 b4		      lda	Throttle	;3
    486  8986		       e9 a0		      sbc	#MAX_THROTTLE	;2
    487  8988		       90 11		      bcc	DoNothing2	;2/3		 plenty of time left!
    488  898a		       85 b4		      sta	Throttle	;3 = 10	 save fractional 'left over' bit
    489  898c
    490  898c
    491  898c		       a4 a1		      ldy	ManMode
    492  898e		       b9 a0 f1 	      lda	ManActionLO,y
    493  8991		       85 da		      sta	actionVector
    494  8993		       b9 ae f1 	      lda	ManActionHI,y
    495  8996		       85 db		      sta	actionVector+1
    496  8998		       6c da 00 	      jmp	(actionVector)
    497  899b
    498  899b				   DoNothing2
    499  899b		       60		      rts
    500  899c
    501  899c		       ff 0c 04 ff newMode    .byte.b	-1, MANMODE_SWITCH2, MANMODE_WAITING2, -1
    502  89a0
    503  89a0				   ManActionLO
    504  89a0		       e3		      .byte.b	<manStartup	; 0		 no timer
    505  89a1		       11		      .byte.b	<normalMan	; 1		 timer
    506  89a2		       00		      .byte.b	<0	; 2		 timer
    507  89a3		       0c		      .byte.b	<waitingMan	; 3		 timer
    508  89a4		       0c		      .byte.b	<waitingManPress	; 4		 timer
    509  89a5		       0c		      .byte.b	<waitingMan	; 5		 no timer
    510  89a6		       0c		      .byte.b	<waitingManPress	; 6		 no timer
    511  89a7		       f3		      .byte.b	<nextLevelMan	; 7		 no timer
    512  89a8		       01		      .byte.b	<nextLevelMan2	; 8		 no timer
    513  89a9		       1d		      .byte.b	<switchLevels	; 9		 no timer
    514  89aa		       bc		      .byte.b	<TurnAround	; 10
    515  89ab		       d5		      .byte.b	<TurnAround2	; 10
    516  89ac		       fa		      .byte.b	<switchLevels2
    517  89ad		       15		      .byte.b	<nextLevelMan3
    518  89ae
    519  89ae				   ManActionHI
    520  89ae		       f1		      .byte.b	>manStartup	; no timer
    521  89af		       f2		      .byte.b	>normalMan	; timer
    522  89b0		       00		      .byte.b	>0	; timer
    523  89b1		       f2		      .byte.b	>waitingMan	; timer
    524  89b2		       f2		      .byte.b	>waitingManPress	; timer
    525  89b3		       f2		      .byte.b	>waitingMan	; no timer
    526  89b4		       f2		      .byte.b	>waitingManPress	; no timer
    527  89b5		       fc		      .byte.b	>nextLevelMan	; no timer
    528  89b6		       fd		      .byte.b	>nextLevelMan2	; no timer
    529  89b7		       fd		      .byte.b	>switchLevels	;9  no timer
    530  89b8		       f1		      .byte.b	>TurnAround	; 10
    531  89b9		       f1		      .byte.b	>TurnAround2	; 10
    532  89ba		       fc		      .byte.b	>switchLevels2
    533  89bb		       fd		      .byte.b	>nextLevelMan3
    534  89bc
    535  89bc
      0  89bc					      DEFINE_SUBROUTINE	TurnAround
      1  89bc		       00 11	   BANK_TurnAround =	_CURRENT_BANK
      2  89bc					      SUBROUTINE
      3  89bc				   TurnAround
    537  89bc
      0  89bc					      LOAD_ANIMATION	TURNAROUND
      1  89bc		       a9 b4		      lda	#<Animation_TURNAROUND
      2  89be		       85 9a		      sta	animation
      3  89c0		       a9 f0		      lda	#>Animation_TURNAROUND
      4  89c2		       85 9b		      sta	animation+1
      5  89c4		       a9 00		      lda	#0
      6  89c6		       85 9c		      sta	animation_delay
      7  89c8		       a9 0e		      lda	#ANIMATION_TURNAROUND_ID
      8  89ca		       85 a6		      sta	ManAnimationID
    539  89cc
    540  89cc		       a5 a2		      lda	ManLastDirection
    541  89ce		       85 a3		      sta	ManTurnStart
    542  89d0
    543  89d0		       a9 0b		      lda	#MANMODE_TURNAROUND2
    544  89d2		       85 a1		      sta	ManMode
    545  89d4		       60		      rts
    546  89d5
      0  89d5					      DEFINE_SUBROUTINE	TurnAround2
      1  89d5		       00 11	   BANK_TurnAround2 =	_CURRENT_BANK
      2  89d5					      SUBROUTINE
      3  89d5				   TurnAround2
    548  89d5
    549  89d5		       a5 a3		      lda	ManTurnStart
    550  89d7		       c5 a2		      cmp	ManLastDirection
    551  89d9		       f0 07		      beq	notTurnedYet
    552  89db
    553  89db		       a9 01		      lda	#MANMODE_NORMAL
    554  89dd		       85 a1		      sta	ManMode
    555  89df		       4c 11 f2 	      jmp	normalMan
    556  89e2
    557  89e2
    558  89e2		       60	   notTurnedYet rts
    559  89e3
    560  89e3
    561  89e3							;------------------------------------------------------------------------------
      0  89e3					      DEFINE_SUBROUTINE	manStartup
      1  89e3		       00 11	   BANK_manStartup =	_CURRENT_BANK
      2  89e3					      SUBROUTINE
      3  89e3				   manStartup
    563  89e3
    564  89e3					      IF	WAIT_FOR_INITIAL_DRAW
    565  89e3							; Delay turning on the visible screen until the background has completed drawing.
    566  89e3							; This is simple - is there anything still in the draw stack?
    567  89e3		       a5 81		      lda	DrawStackPointer
    568  89e5		       10 04		      bpl	midDraw
    569  89e7		       a9 00		      lda	#0
    570  89e9		       85 ae		      sta	blankState
    571  89eb				   midDraw
    572  89eb					      ENDIF
    573  89eb
    574  89eb		       a5 9d		      lda	ManX
    575  89ed		       85 89		      sta	POS_X_NEW
    576  89ef		       a5 9e		      lda	ManY
    577  89f1		       85 8a		      sta	POS_Y_NEW
    578  89f3
    579  89f3		       a9 01		      lda	#MANMODE_NORMAL
    580  89f5		       85 a1		      sta	ManMode
    581  89f7
    582  89f7		       a9 00		      lda	#0
    583  89f9		       85 a8		      sta	idleCount
    584  89fb
      0  89fb					      LOAD_ANIMATION	IDLE
      1  89fb		       a9 44		      lda	#<Animation_IDLE
      2  89fd		       85 9a		      sta	animation
      3  89ff		       a9 f0		      lda	#>Animation_IDLE
      4  8a01		       85 9b		      sta	animation+1
      5  8a03		       a9 00		      lda	#0
      6  8a05		       85 9c		      sta	animation_delay
      7  8a07		       a9 02		      lda	#ANIMATION_IDLE_ID
      8  8a09		       85 a6		      sta	ManAnimationID
    586  8a0b
    587  8a0b				   RTS_CF
    588  8a0b		       60		      rts
    589  8a0c
    590  8a0c							;------------------------------------------------------------------------------
    591  8a0c
    592  8a0c				   waitingMan
    593  8a0c				   waitingManPress
    594  8a0c
    595  8a0c							;		  lda #50
    596  8a0c							;		  sta ColourTimer
    597  8a0c
    598  8a0c							; RESET gets here
    599  8a0c
    600  8a0c							;lda NextLevelTrigger
    601  8a0c							;ora #BIT_NEXTLIFE
    602  8a0c
    603  8a0c		       a9 00		      lda	#0
    604  8a0e		       85 c2		      sta	NextLevelTrigger
    605  8a10		       60		      rts
    606  8a11
    607  8a11
    608  8a11							;------------------------------------------------------------------------------
    609  8a11							; Normal man state
    610  8a11
      0  8a11					      DEFINE_SUBROUTINE	normalMan
      1  8a11		       00 11	   BANK_normalMan =	_CURRENT_BANK
      2  8a11					      SUBROUTINE
      3  8a11				   normalMan
    612  8a11
    613  8a11							; Calling code uses 'POS_X_NEW' and 'POS_Y_NEW' as new player position, so these must be set
    614  8a11							; before exiting via (for example) look-around option :)
    615  8a11
    616  8a11		       a5 9d		      lda	ManX
    617  8a13		       85 89		      sta	POS_X_NEW
    618  8a15		       a5 9e		      lda	ManY
    619  8a17		       85 8a		      sta	POS_Y_NEW
    620  8a19
    621  8a19							;------------------------------------------------------------------------------
    622  8a19							; Take-back is a press/release of the button, with the press being limited in duratino
    623  8a19							; to allow the action to be "cancelled". Meanwhile, a button press + direction triggers
    624  8a19							; "look-around mode"
    625  8a19
    626  8a19		       a5 cc		      lda	FadeComplete
    627  8a1b		       d0 3d		      bne	noLook
    628  8a1d		       a5 4c		      lda	INPT4
    629  8a1f		       30 39		      bmi	noLook	; button?
    630  8a21
    631  8a21							; button pressed, so in looking-around mode
    632  8a21
    633  8a21		       a5 a5		      lda	LookingAround
    634  8a23		       30 04		      bmi	LookAround
    635  8a25		       a2 ff		      ldx	#$FF
    636  8a27		       86 a5		      stx	LookingAround
    637  8a29				   LookAround
    638  8a29
    639  8a29							; Use the joystick as a window-scroller to change the viewport
    640  8a29
    641  8a29		       ad 80 02 	      lda	SWCHA	;BufferedJoystick
    642  8a2c		       4a		      lsr
    643  8a2d		       4a		      lsr
    644  8a2e		       4a		      lsr
    645  8a2f		       4a		      lsr
    646  8a30		       a8		      tay
    647  8a31
    648  8a31							;lda #-1
    649  8a31							;sta BufferedJoystick
    650  8a31
    651  8a31		       b9 d4 f2 	      lda	JoyMoveX,y
    652  8a34		       19 e4 f2 	      ora	JoyMoveY,y
    653  8a37		       f0 20		      beq	AbandonY
    654  8a39
    655  8a39		       a9 fe		      lda	#$FE
    656  8a3b		       85 a5		      sta	LookingAround
    657  8a3d		       a9 a1		      lda	#MAX_THROTTLE+1
    658  8a3f		       85 b4		      sta	Throttle	; IMMEDIATE reaction to any joystick!
    659  8a41
    660  8a41		       b9 d4 f2 	      lda	JoyMoveX,y
    661  8a44							;asl
    662  8a44		       18		      clc
    663  8a45		       65 97		      adc	BoardScrollX
    664  8a47		       c5 94		      cmp	BoardEdge_Right
    665  8a49		       b0 02		      bcs	AbandonX
    666  8a4b		       85 97		      sta	BoardScrollX
    667  8a4d
    668  8a4d				   AbandonX
    669  8a4d							;lda JoyMoveX,y
    670  8a4d							;bne AbandonY			  ; don't allow diagonals!
    671  8a4d
    672  8a4d		       b9 e4 f2 	      lda	JoyMoveY,y
    673  8a50							;asl
    674  8a50		       18		      clc
    675  8a51		       65 96		      adc	BoardScrollY
    676  8a53		       c5 95		      cmp	BoardEdge_Bottom
    677  8a55		       b0 02		      bcs	AbandonY
    678  8a57		       85 96		      sta	BoardScrollY
    679  8a59
    680  8a59		       60	   AbandonY   rts
    681  8a5a
    682  8a5a		       a2 00	   noLook     ldx	#0
    683  8a5c		       a5 a5		      lda	LookingAround
    684  8a5e		       c9 ff		      cmp	#$FF
    685  8a60		       86 a5		      stx	LookingAround
    686  8a62		       d0 03		      bne	bProcComp	; $FE means there was a lookaround, so skip
    687  8a64
    688  8a64							; button was presssed and now released and we didn't actually look around
    689  8a64							; so we do a take-back
    690  8a64
    691  8a64		       4c 17 fa 	      jmp	takebackRestoreEarlierPosition	;.. and rts
    692  8a67							;rts
    693  8a67
    694  8a67				   bProcComp
    695  8a67							;------------------------------------------------------------------------------
    696  8a67
    697  8a67		       a9 02		      lda	#ANIMATION_IDLE_ID
    698  8a69		       c5 a6		      cmp	ManAnimationID
    699  8a6b		       f0 20		      beq	alreadyIdling
    700  8a6d
    701  8a6d		       a5 a4		      lda	ManPushCounter
    702  8a6f		       d0 1c		      bne	alreadyIdling
    703  8a71
    704  8a71		       e6 a8		      inc	idleCount
    705  8a73		       a4 a8		      ldy	idleCount
    706  8a75		       c0 02		      cpy	#2
    707  8a77		       90 14		      bcc	alreadyIdling
    708  8a79
      0  8a79					      LOAD_ANIMATION	IDLE
      1  8a79		       a9 44		      lda	#<Animation_IDLE
      2  8a7b		       85 9a		      sta	animation
      3  8a7d		       a9 f0		      lda	#>Animation_IDLE
      4  8a7f		       85 9b		      sta	animation+1
      5  8a81		       a9 00		      lda	#0
      6  8a83		       85 9c		      sta	animation_delay
      7  8a85		       a9 02		      lda	#ANIMATION_IDLE_ID
      8  8a87		       85 a6		      sta	ManAnimationID
    710  8a89
    711  8a89		       a9 00		      lda	#0
    712  8a8b		       85 a8		      sta	idleCount
    713  8a8d				   alreadyIdling
    714  8a8d
    715  8a8d		       a5 a2		      lda	ManLastDirection
    716  8a8f		       29 07		      and	#DIRECTION_BITS
    717  8a91		       a8		      tay
    718  8a92
    719  8a92		       a5 92		      lda	BufferedJoystick	; joystick
    720  8a94		       85 93		      sta	PreviousJoystick
    721  8a96							;and BufferedJoystick+1
    722  8a96
    723  8a96		       a2 00		      ldx	#0
    724  8a98		       0a	   .loopDirs  asl
    725  8a99		       90 06		      bcc	.dirFound
    726  8a9b		       88		      dey
    727  8a9c		       e8		      inx
    728  8a9d		       e0 04		      cpx	#4
    729  8a9f		       d0 f7		      bne	.loopDirs
    730  8aa1
    731  8aa1							; no direction!
    732  8aa1
    733  8aa1							;inc BGColour
    734  8aa1
    735  8aa1
    736  8aa1							;lda #MAX_THROTTLE+1
    737  8aa1							;sta Throttle		     ; IMMEDIATE reaction to any joystick!
    738  8aa1
    739  8aa1				   .dirFound
    740  8aa1
    741  8aa1		       a9 ff		      lda	#-1
    742  8aa3		       85 92		      sta	BufferedJoystick
    743  8aa5
    744  8aa5		       bd fb f2 	      lda	anim_direction,x
    745  8aa8		       30 0d		      bmi	dontChange
    746  8aaa		       45 a2		      eor	ManLastDirection
    747  8aac		       29 08		      and	#%1000
    748  8aae		       f0 07		      beq	dontChange
    749  8ab0
    750  8ab0							; at this point we want to activate the stand/turn animation before continuing
    751  8ab0
    752  8ab0		       a9 0a		      lda	#MANMODE_TURNAROUND
    753  8ab2		       85 a1		      sta	ManMode
    754  8ab4		       4c bc f1 	      jmp	TurnAround
    755  8ab7
    756  8ab7
    757  8ab7
    758  8ab7
    759  8ab7							;bne noMovement ;kipMove
    760  8ab7				   dontChange
    761  8ab7
    762  8ab7
    763  8ab7
    764  8ab7		       18		      clc
    765  8ab8		       a5 89		      lda	POS_X_NEW
    766  8aba		       7d f6 f2 	      adc	JoyDirX,x
    767  8abd		       85 89		      sta	POS_X_NEW
    768  8abf
    769  8abf		       18		      clc
    770  8ac0		       a5 8a		      lda	POS_Y_NEW
    771  8ac2		       7d f4 f2 	      adc	JoyDirY,x
    772  8ac5		       85 8a		      sta	POS_Y_NEW
    773  8ac7
    774  8ac7
    775  8ac7		       98	   skipMove   tya
    776  8ac8		       f0 09		      beq	noMovement	; animation OK
    777  8aca
    778  8aca		       8a		      txa
    779  8acb		       45 a2		      eor	ManLastDirection
    780  8acd		       29 07		      and	#DIRECTION_BITS
    781  8acf		       45 a2		      eor	ManLastDirection
    782  8ad1		       85 a2		      sta	ManLastDirection
    783  8ad3
    784  8ad3				   noMovement
    785  8ad3
    786  8ad3
    787  8ad3		       60	   DFS_rts    rts
    788  8ad4
    789  8ad4
    790  8ad4							;			RLDU RLD  RL U RL   R DU R D  R  U R	 LDU  LD   L U	L     DU   D	 U
    791  8ad4							;			0000 0001 0010 0011 0100 0101 0110 0111 1000 1001 1010 1011 1100 1101 1110 1111
    792  8ad4		       00 00 00 00*JoyMoveX   .byte.b	0, 0, 0, 0, 0, 1, 1, 1, 0, -1, -1, -1, 0, 0, 0, 0
    793  8ae4		       00 00 00 00*JoyMoveY   .byte.b	0, 0, 0, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0
    794  8af4
    795  8af4				   JoyDirY
    796  8af4		       00 00		      .byte.b	0,0	;,1,-1,0
    797  8af6				   JoyDirX
    798  8af6		       01 ff 00 00*	      .byte.b	1,-1,0,0,0
    799  8afb
    800  8afb							;Data Bit  Direction Player
    801  8afb							;		 D7	   right	  P0  D4
    802  8afb							;		 D6	   left      P0  D3
    803  8afb							;		 D5	   down      P0  D2
    804  8afb							;		 D4	   up	     P0  D1
    805  8afb							;     A "0" in a data bit indicates the joystick has been moved
    806  8afb							;     to close that switch.  All "1's" in a player's nibble
    807  8afb							;     indicates that joystick is not moving.
    808  8afb
    809  8afb							;0  0000 x
    810  8afb							;1  0001 x
    811  8afb							;2  0010 x
    812  8afb							;3  0011 x
    813  8afb							;4  0100 x
    814  8afb							;5  0101 right down
    815  8afb							;6  0110 right up
    816  8afb							;7  0111 right
    817  8afb							;8  1000 x
    818  8afb							;9  1001 left down
    819  8afb							;10  1010 left up
    820  8afb							;11  1011 left
    821  8afb							;12  1100 x
    822  8afb							;13  1101 down
    823  8afb							;14  1110 up
    824  8afb							;15  1111 none
    825  8afb
    826  8afb		       00 08 80 80*anim_direction .byte.b	0,%1000,128,128,128
    827  8b00
    828  8b00							;------------------------------------------------------------------------------
    829  8b00
    830  8b00
      0  8b00					      DEFINE_SUBROUTINE	DrawFullScreen	; @31✅
      1  8b00		       00 11	   BANK_DrawFullScreen =	_CURRENT_BANK
      2  8b00					      SUBROUTINE
      3  8b00				   DrawFullScreen
    832  8b00
    833  8b00		       ad 84 02 	      lda	INTIM	; 4
    834  8b03		       c9 29		      cmp	#SEGTIME_BDF	; 2
    835  8b05		       90 cc		      bcc	DFS_rts	; 2/3 ==> [31]+(9)+6rts = 46✅ on abort
    836  8b07
    837  8b07		       a9 f4		      lda	#>( DrawFlag + RAM_WRITE )	; 2
    838  8b09		       85 db		      sta	BDF_DrawFlagAddress+1	; 3
    839  8b0b		       85 dd		      sta	BDF_DrawFlagAddress2+1	; 3 = 8✅
    840  8b0d
    841  8b0d		       ba		      tsx		; 2
    842  8b0e		       86 e4		      stx	DHS_Stack	; 3
    843  8b10
    844  8b10		       e6 86		      inc	ScreenDrawPhase	; 5
    845  8b12
    846  8b12		       18		      clc		; 2	     required clear for DrawScreenRowPreparation
    847  8b13		       a2 08		      ldx	#SCREEN_LINES	; 2
    848  8b15		       8a		      txa		; 2 = 24✅
    849  8b16
    850  8b16							; fall through
    851  8b16
    852  8b16							;------------------------------------------------------------------------------
    853  8b16
    854  8b16							; @311✅ (from loop)
    855  8b16							; @24✅ (fall through)
    856  8b16
    857  8b16							; 8 lines x 311 + (24)
    858  8b16							; = 2512
    859  8b16							; = 39 :)
    860  8b16
      0  8b16					      DEFINE_SUBROUTINE	DrawScreenRowPreparation
      1  8b16		       00 11	   BANK_DrawScreenRowPreparation =	_CURRENT_BANK
      2  8b16					      SUBROUTINE
      3  8b16				   DrawScreenRowPreparation
    862  8b16
    863  8b16							;clc
    864  8b16		       ca		      dex		; 2
    865  8b17		       86 e3		      stx	DHS_Line	; 3
    866  8b19		       65 96		      adc	BoardScrollY	; 3	     the Y offset of screen into board
    867  8b1b		       a8		      tay		; 2 = 10✅
    868  8b1c
    869  8b1c							;clc
    870  8b1c		       b9 00 f0 	      lda	BoardLineStartLO-1,y	; 4	     Y is one too big!
    871  8b1f		       65 97		      adc	BoardScrollX	; 3	     the X offset of screen into board
    872  8b21		       85 de		      sta	BDF_BoardAddress	; 3
    873  8b23		       69 05		      adc	#SCREEN_WIDTH/2	; 2
    874  8b25		       85 e0		      sta	BDF_BoardAddress2	; 3 = 15✅
    875  8b27
    876  8b27		       b9 16 f0 	      lda	BoardLineStartHiR-1,y	; 4	     a board line *WILL NOT CROSS* page boundary
    877  8b2a		       85 df		      sta	BDF_BoardAddress+1	; 3
    878  8b2c		       85 e1		      sta	BDF_BoardAddress2+1	; 3 = 10 @35✅
    879  8b2e
    880  8b2e		       bd a4 f0 	      lda	DrawLineStartLO,x	; 4
    881  8b31		       85 da		      sta	BDF_DrawFlagAddress	; 3
    882  8b33		       69 05		      adc	#SCREEN_WIDTH/2	; 2
    883  8b35		       85 dc		      sta	BDF_DrawFlagAddress2	; 3 = 12✅
    884  8b37
    885  8b37							;    IF MULTI_BANK_BOARD = YES
    886  8b37							;		  lda BoardBank-1,y		  ; 4
    887  8b37							;		  sta BDF_BoardBank		  ; 3
    888  8b37							;    ENDIF
    889  8b37		       a0 04		      ldy	#SCREEN_WIDTH/2-1	; 2
    890  8b39		       4c 8b fb 	      jmp	CopyRow2	; 3 = 12 @59✅
    891  8b3c
    892  8b3c							;------------------------------------------------------------------------------
    893  8b3c
      0  8b3c					      DEFINE_SUBROUTINE	EndOfLevel
      1  8b3c		       00 11	   BANK_EndOfLevel =	_CURRENT_BANK
      2  8b3c					      SUBROUTINE
      3  8b3c				   EndOfLevel
    895  8b3c
    896  8b3c		       a9 0a		      lda	#10
    897  8b3e		       85 a9		      sta	DelayEndOfLevel
    898  8b40
    899  8b40		       a6 80		      ldx	Platform
    900  8b42		       bd 60 f3 	      lda	FlashColour,x	;+4,x
    901  8b45		       85 b1		      sta	BGColour	;ColourFlash		      ; green
    902  8b47		       a9 08		      lda	#8
    903  8b49		       85 c1		      sta	ColourTimer
    904  8b4b
    905  8b4b
      0  8b4b					      LOAD_ANIMATION	WIN
      1  8b4b		       a9 1e		      lda	#<Animation_WIN
      2  8b4d		       85 9a		      sta	animation
      3  8b4f		       a9 f0		      lda	#>Animation_WIN
      4  8b51		       85 9b		      sta	animation+1
      5  8b53		       a9 00		      lda	#0
      6  8b55		       85 9c		      sta	animation_delay
      7  8b57		       a9 04		      lda	#ANIMATION_WIN_ID
      8  8b59		       85 a6		      sta	ManAnimationID
    907  8b5b
    908  8b5b		       a9 08		      lda	#MANMODE_NEXTLEVEL2
    909  8b5d		       85 a1		      sta	ManMode
    910  8b5f		       60		      rts
    911  8b60
    912  8b60
    913  8b60		       c4 c4 54 54 FlashColour .byte.b	$C4, $C4, $54, $54
    914  8b64
    915  8b64
      0  8b64					      DEFINE_SUBROUTINE	IMC
      1  8b64		       00 11	   BANK_IMC   =	_CURRENT_BANK
      2  8b64					      SUBROUTINE
      3  8b64				   IMC
    917  8b64
    918  8b64		       18		      clc
    919  8b65		       a5 b8		      lda	takebackIndex
    920  8b67		       69 01		      adc	#1
    921  8b69		       29 3f		      and	#TAKEBACK_MASK
    922  8b6b		       85 b8		      sta	takebackIndex
    923  8b6d		       c5 b9		      cmp	takebackBaseIndex
    924  8b6f		       d0 06		      bne	baseOK
    925  8b71		       69 00		      adc	#0
    926  8b73		       29 3f		      and	#TAKEBACK_MASK
    927  8b75		       85 b9		      sta	takebackBaseIndex
    928  8b77				   baseOK
    929  8b77
    930  8b77		       f8		      sed
    931  8b78		       18		      clc
    932  8b79		       a5 b6		      lda	BCD_moveCounter
    933  8b7b		       69 01		      adc	#1
    934  8b7d		       85 b6		      sta	BCD_moveCounter
    935  8b7f		       a5 b7		      lda	BCD_moveCounter+1
    936  8b81		       69 00		      adc	#0
    937  8b83		       85 b7		      sta	BCD_moveCounter+1
    938  8b85		       d8		      cld
    939  8b86
    940  8b86		       60		      rts
    941  8b87
    942  8b87							;------------------------------------------------------------------------------
    943  8b87
      0  8b87					      DEFINE_SUBROUTINE	VectorProcess	;=19 + 13, = 31✅ minimum
      1  8b87		       00 11	   BANK_VectorProcess =	_CURRENT_BANK
      2  8b87					      SUBROUTINE
      3  8b87				   VectorProcess
    945  8b87
    946  8b87		       bd 95 f3 	      lda	OSPointerHI,x	; 4
    947  8b8a		       85 db		      sta	POS_Vector+1	; 3
    948  8b8c		       bd 94 f3 	      lda	OSPointerLO,x	; 4
    949  8b8f		       85 da		      sta	POS_Vector	; 3
    950  8b91
    951  8b91		       6c da 00 	      jmp	(POS_Vector)	; 5 = 19	  vector to processor for particular object type
    952  8b94
    953  8b94							; earliest abort from process = +13
    954  8b94
    955  8b94							;		 NOTE: Bank is either INITBANK or FIXED.
    956  8b94							;------------------------------------------------------------------------------
    957  8b94
    958  8b94
    959  8b94				   OBJTYPE    SET	0
    960  8b94					      MAC	define
    961  8b94				   TYPE_{1}   =	OBJTYPE
    962  8b94				   OBJTYPE    .SET	OBJTYPE + 1
    963  8b94					      ENDM
    964  8b94
    965  8b94							; If adding/removing types, the following must also be updated...
    966  8b94							;   InitialFace[...]		     in UnpackLevel.asm
    967  8b94							;   BaseTypeCharacter[...]	     in BANK_FIXED.asm
    968  8b94							;   BaseTypeCharacterFalling[...]   in BANK_FIXED.asm
    969  8b94							;   OSPointerLO[...]		     in BANK_INITBANK.asm
    970  8b94							;   OSPointerHI[...]		     in BANK_INITBANK.asm
    971  8b94							;   CharReplacement[...]	     in BANK_ROM_SHADOW_DRAWBUFFERS.asm
    972  8b94							;   Sortable[...]		     in BANK_FIXED.asm
    973  8b94
    974  8b94
      0  8b94					      DEFINE	MAN
      1  8b94		       00 00	   TYPE_MAN   =	OBJTYPE
      2  8b94				   OBJTYPE    .SET	OBJTYPE + 1
    976  8b94							;DEFINE CIRCLE
    977  8b94							;DEFINE CIRCLE_HELPER
    978  8b94							;DEFINE CIRCLE_DRAWER
    979  8b94
      0  8b94					      DEFINE	MAXIMUM
      1  8b94		       00 01	   TYPE_MAXIMUM =	OBJTYPE
      2  8b94				   OBJTYPE    .SET	OBJTYPE + 1
    981  8b94
    982  8b94
      0  8b94					      DEFINE_SUBROUTINE	OSPointerLO
      1  8b94		       00 11	   BANK_OSPointerLO =	_CURRENT_BANK
      2  8b94					      SUBROUTINE
      3  8b94				   OSPointerLO
    984  8b94		       a9		      .byte.b	<PROCESS_MAN
    985  8b95							;.byte <PROCESS_CIRCLE
    986  8b95							;.byte <PROCESS_CIRCLE_HELPER
    987  8b95
    988  8b95				  -	      IF	* - OSPointerLO < TYPE_MAXIMUM-4
    989  8b95				  -	      ECHO	"ERROR: Missing entry in OSPointerLO table!"
    990  8b95				  -	      ERR
    991  8b95					      ENDIF
    992  8b95
    993  8b95
      0  8b95					      DEFINE_SUBROUTINE	OSPointerHI
      1  8b95		       00 11	   BANK_OSPointerHI =	_CURRENT_BANK
      2  8b95					      SUBROUTINE
      3  8b95				   OSPointerHI
    995  8b95		       f8		      .byte.b	>PROCESS_MAN
    996  8b96							;.byte >PROCESS_CIRCLE
    997  8b96							;.byte >PROCESS_CIRCLE_HELPER
    998  8b96
    999  8b96				  -	      IF	* - OSPointerHI < TYPE_MAXIMUM-4
   1000  8b96				  -	      ECHO	"ERROR: Missing entry in OSPointerHI table!"
   1001  8b96				  -	      ERR
   1002  8b96					      ENDIF
   1003  8b96
   1004  8b96							;------------------------------------------------------------------------------
   1005  8b96
      0  8b96					      DEFINE_SUBROUTINE	MoveVecLO	; [character type]
      1  8b96		       00 11	   BANK_MoveVecLO =	_CURRENT_BANK
      2  8b96					      SUBROUTINE
      3  8b96				   MoveVecLO
   1007  8b96
   1008  8b96		       92		      .byte.b	<MOVE_BLANK
   1009  8b97		       92		      .byte.b	<MOVE_SOIL
   1010  8b98		       05		      .byte.b	<MOVE_BOX
   1011  8b99		       92		      .byte.b	<MOVE_TARGET
   1012  8b9a		       92		      .byte.b	<MOVE_TARGET
   1013  8b9b		       f0		      .byte.b	<MOVE_GENERIC	;man occupied
   1014  8b9c		       f0		      .byte.b	<MOVE_GENERIC	;steel
   1015  8b9d		       f0		      .byte.b	<MOVE_GENERIC	;wall
   1016  8b9e		       0e		      .byte.b	<MOVE_BOX_ON_TARGET	;box on target
   1017  8b9f							;	  .byte <MOVE_BOX_ON_TARGET ;box on target
   1018  8b9f		       f0		      .byte.b	<MOVE_GENERIC	;nogo
   1019  8ba0		       92		      .byte.b	<MOVE_TARGET	;1
   1020  8ba1		       92		      .byte.b	<MOVE_TARGET	;3
   1021  8ba2		       92		      .byte.b	<MOVE_TARGET	;5
   1022  8ba3		       92		      .byte.b	<MOVE_TARGET	;7
   1023  8ba4
   1024  8ba4				  -	      if	DIGITS
   1025  8ba4				  -	      REPEAT	10	; DIGITS 0-9
   1026  8ba4				  -	      .byte	<MOVE_BLANK
   1027  8ba4				  -	      REPEND
   1028  8ba4					      endif
   1029  8ba4
   1030  8ba4				  -	      IF	* - MoveVecLO != CHARACTER_MAXIMUM
   1031  8ba4				  -	      ECHO	"ERROR: Incorrect number of entries in MoveVecLO table!"
   1032  8ba4				  -	      ERR
   1033  8ba4					      ENDIF
   1034  8ba4
   1035  8ba4
      0  8ba4					      DEFINE_SUBROUTINE	MoveVecHI	;[character type]
      1  8ba4		       00 11	   BANK_MoveVecHI =	_CURRENT_BANK
      2  8ba4					      SUBROUTINE
      3  8ba4				   MoveVecHI
   1037  8ba4
   1038  8ba4		       f9		      .byte.b	>MOVE_BLANK
   1039  8ba5		       f9		      .byte.b	>MOVE_SOIL
   1040  8ba6		       fa		      .byte.b	>MOVE_BOX
   1041  8ba7		       f9		      .byte.b	>MOVE_TARGET
   1042  8ba8		       f9		      .byte.b	>MOVE_TARGET
   1043  8ba9		       f9		      .byte.b	>MOVE_GENERIC	;man occupied
   1044  8baa		       f9		      .byte.b	>MOVE_GENERIC	;steel
   1045  8bab		       f9		      .byte.b	>MOVE_GENERIC	;wall
   1046  8bac		       fa		      .byte.b	>MOVE_BOX_ON_TARGET	;box on target
   1047  8bad							;	  .byte >MOVE_BOX_ON_TARGET ;box on target
   1048  8bad		       f9		      .byte.b	>MOVE_GENERIC	;nogo
   1049  8bae		       f9		      .byte.b	>MOVE_TARGET	;1
   1050  8baf		       f9		      .byte.b	>MOVE_TARGET	;3
   1051  8bb0		       f9		      .byte.b	>MOVE_TARGET	;5
   1052  8bb1		       f9		      .byte.b	>MOVE_TARGET	; 7
   1053  8bb2
   1054  8bb2				  -	      if	DIGITS
   1055  8bb2				  -	      REPEAT	10	; DIGITS 0-9
   1056  8bb2				  -	      .byte	>MOVE_BLANK
   1057  8bb2				  -	      REPEND
   1058  8bb2					      endif
   1059  8bb2
   1060  8bb2				  -	      IF	* - MoveVecHI != CHARACTER_MAXIMUM
   1061  8bb2				  -	      ECHO	"ERROR: Incorrect number of entries in MoveVecHI table!"
   1062  8bb2				  -	      ERR
   1063  8bb2					      ENDIF
   1064  8bb2
   1065  8bb2							;------------------------------------------------------------------------------
   1066  8bb2
      0  8bb2					      DEFINE_SUBROUTINE	SoundFX
      1  8bb2		       00 11	   BANK_SoundFX =	_CURRENT_BANK
      2  8bb2					      SUBROUTINE
      3  8bb2				   SoundFX
------- FILE sound/intro1_player.asm LEVEL 3 PASS 3
      0  8bb2					      include	"sound/intro1_player.asm"
      1  8bb2							; TIATracker music player
      2  8bb2							; Copyright 2016 Andre "Kylearan" Wichmann
      3  8bb2							; Website: https://bitbucket.org/kylearan/tiatracker
      4  8bb2							; Email: andre.wichmann@gmx.de
      5  8bb2							;
      6  8bb2							; Licensed under the Apache License, Version 2.0 (the "License");
      7  8bb2							; you may not use this file except in compliance with the License.
      8  8bb2							; You may obtain a copy of the License at
      9  8bb2							;
     10  8bb2							;   http://www.apache.org/licenses/LICENSE-2.0
     11  8bb2							;
     12  8bb2							; Unless required by applicable law or agreed to in writing, software
     13  8bb2							; distributed under the License is distributed on an "AS IS" BASIS,
     14  8bb2							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15  8bb2							; See the License for the specific language governing permissions and
     16  8bb2							; limitations under the License.
     17  8bb2
     18  8bb2							; Song author:
     19  8bb2							; Song name:
     20  8bb2
     21  8bb2							; @com.wudsn.ide.asm.hardware=ATARI2600
     22  8bb2
     23  8bb2							; =====================================================================
     24  8bb2							; TIATracker Player
     25  8bb2							; =====================================================================
     26  8bb2				   tt_PlayerStart
     27  8bb2
     28  8bb2							; PLANNED PLAYER VARIANTS:
     29  8bb2							; - RAM, speed, player ROM: c0/c1 patterns have same length
     30  8bb2							; - RAM: Pack 2 values (out of cur_pat_index, cur_note_index, envelope_index)
     31  8bb2							;	 into one and use lsr/asl to unpack them, allowing only ranges of
     32  8bb2							;	 16/16 or 32/8 for them, depending on number of patterns, max
     33  8bb2							;	 pattern size and max ADSR size
     34  8bb2							; - ROM: Check if tt_SequenceTable can hold ptrs directly without indexing
     35  8bb2							;	 tt_PatternPtrLo/Hi. Can be smaller if not many patterns get repeated
     36  8bb2							;	 (saves table and decode routine)
     37  8bb2							; - Speed: Inline tt_CalcInsIndex
     38  8bb2							; - Speed: Store ptr to current note in RAM instead of reconstructing it?
     39  8bb2							;	 Might also save the need for cur_note_index
     40  8bb2
     41  8bb2
     42  8bb2							; ---------------------------------------------------------------------
     43  8bb2							; Helper macro: Retrieves current note. May advance pattern if needed.
     44  8bb2							; Becomes a subroutine if TT_USE_OVERLAY is used.
     45  8bb2							; ---------------------------------------------------------------------
     46  8bb2					      MAC	tt_fetch_current_note
     47  8bb2							; construct ptr to pattern
     48  8bb2				   .constructPatPtr
     49  8bb2					      ldy	tt_cur_pat_index_c0,x	; get current pattern (index into tt_SequenceTable)
     50  8bb2					      lda	tt_SequenceTable,y
     51  8bb2					      IF	TT_USE_GOTO = 1
     52  8bb2					      bpl	.noPatternGoto
     53  8bb2					      and	#%01111111	; mask out goto bit to get pattern number
     54  8bb2					      sta	tt_cur_pat_index_c0,x	; store goto'ed pattern index
     55  8bb2					      bpl	.constructPatPtr	; unconditional
     56  8bb2				   .noPatternGoto
     57  8bb2					      ENDIF
     58  8bb2					      tay
     59  8bb2					      lda	tt_PatternPtrLo,y
     60  8bb2					      sta	tt_ptr
     61  8bb2					      lda	tt_PatternPtrHi,y
     62  8bb2					      sta	tt_ptr+1
     63  8bb2							; get new note
     64  8bb2					      IF	TT_USE_OVERLAY = 0
     65  8bb2					      ldy	tt_cur_note_index_c0,x
     66  8bb2					      ELSE
     67  8bb2							; If the V flag is set and if the new note is an instrument,
     68  8bb2							; it means it got pre-fetched by an overlay percussion, it has
     69  8bb2							; to remain in sustain.
     70  8bb2					      clv
     71  8bb2							; check if note had been pre-fetched by overlay perc already
     72  8bb2					      lda	tt_cur_note_index_c0,x
     73  8bb2					      bpl	.notPrefetched
     74  8bb2							; If so, remove flag
     75  8bb2					      and	#%01111111
     76  8bb2					      sta	tt_cur_note_index_c0,x
     77  8bb2							; Set V flag for later
     78  8bb2					      bit	tt_Bit6Set
     79  8bb2				   .notPrefetched
     80  8bb2					      tay
     81  8bb2					      ENDIF
     82  8bb2					      lda	(tt_ptr),y
     83  8bb2							; pre-process new note
     84  8bb2							; 7..5: instrument (1..7), 4..0 (0..31): frequency
     85  8bb2							; 0/0: End of pattern
     86  8bb2					      bne	.noEndOfPattern
     87  8bb2							; End of pattern: Advance to next pattern
     88  8bb2					      sta	tt_cur_note_index_c0,x	; a is 0
     89  8bb2					      inc	tt_cur_pat_index_c0,x
     90  8bb2					      bne	.constructPatPtr	; unconditional
     91  8bb2				   .noEndOfPattern
     92  8bb2					      ENDM
     93  8bb2
     94  8bb2
     95  8bb2							; ---------------------------------------------------------------------
     96  8bb2							; Music player entry. Call once per frame.
     97  8bb2							; ---------------------------------------------------------------------
     98  8bb2				   tt_Player  SUBROUTINE
     99  8bb2							; ==================== Sequencer ====================
    100  8bb2							; Decrease speed timer
    101  8bb2		       c6 cf		      dec	tt_timer
    102  8bb4		       10 6e		      bpl	.noNewNote
    103  8bb6
    104  8bb6							; Timer ran out: Do sequencer
    105  8bb6							; Advance to next note
    106  8bb6		       a2 01		      ldx	#1	; 2 channels
    107  8bb8				   .advanceLoop
    108  8bb8					      IF	TT_USE_OVERLAY = 1
    109  8bb8		       20 ce f3 	      jsr	tt_FetchNote
    110  8bbb				  -	      ELSE
    111  8bbb				  -	      TT_FETCH_CURRENT_NOTE
    112  8bbb					      ENDIF
    113  8bbb							; Parse new note from pattern
    114  8bbb		       c9 10		      cmp	#TT_INS_PAUSE
    115  8bbd					      IF	TT_USE_SLIDE = 0
    116  8bbd		       90 55		      bcc	.finishedNewNote
    117  8bbf		       d0 3d		      bne	.newNote
    118  8bc1				  -	      ELSE
    119  8bc1				  -	      beq	.pause
    120  8bc1				  -	      bcs	.newNote
    121  8bc1				  -
    122  8bc1				  -			; --- slide/hold ---
    123  8bc1				  -			; Adjust frequency and hold note in sustain.
    124  8bc1				  -			; composer/tracker has to make sure that no unwanted
    125  8bc1				  -			; under/overflow happens.
    126  8bc1				  -			; Note: f = f + (8-(16-x)) = x + f - 8
    127  8bc1				  -	      adc	tt_cur_ins_c0,x	; carry is clear after cmp
    128  8bc1				  -	      sec
    129  8bc1				  -	      sbc	#8
    130  8bc1				  -	      sta	tt_cur_ins_c0,x
    131  8bc1				  -	      bcs	.finishedNewNote	; unconditional, since legally no underflow can happen (ins>0 or HOLD for ins=0)
    132  8bc1					      ENDIF
    133  8bc1
    134  8bc1							; --- pause ---
    135  8bc1				   .pause
    136  8bc1							; Get release index for current instrument. Since a pause can
    137  8bc1							; only follow an instrument, we don't need to handle percussion
    138  8bc1							; or commands.
    139  8bc1		       b5 d6		      lda	tt_cur_ins_c0,x
    140  8bc3		       20 5c f4 	      jsr	tt_CalcInsIndex
    141  8bc6		       b9 9e f4 	      lda	tt_InsReleaseIndexes-1,y	; -1 b/c instruments start at #1
    142  8bc9							; Put it into release. Skip junk byte so index no longer indicates
    143  8bc9							; sustain phase.
    144  8bc9		       18		      clc
    145  8bca		       69 01		      adc	#1
    146  8bcc		       90 44		      bcc	.storeADIndex	; unconditional
    147  8bce
    148  8bce							; ---------------------------------------------------------------------
    149  8bce							; Helper subroutine to minimize ROM footprint. Will be inlined if
    150  8bce							; TT_USE_OVERLAY is not used.
    151  8bce							; Interleaved here so player can be inlined.
    152  8bce							; ---------------------------------------------------------------------
    153  8bce					      IF	TT_USE_OVERLAY = 1
    154  8bce				   tt_FetchNote
      0  8bce					      TT_FETCH_CURRENT_NOTE
      1  8bce
      2  8bce				   .constructPatPtr
      3  8bce		       b4 d0		      ldy	tt_cur_pat_index_c0,x
      4  8bd0		       b9 b1 f5 	      lda	tt_SequenceTable,y
      5  8bd3					      IF	TT_USE_GOTO = 1
      6  8bd3		       10 06		      bpl	.noPatternGoto
      7  8bd5		       29 7f		      and	#%01111111
      8  8bd7		       95 d0		      sta	tt_cur_pat_index_c0,x
      9  8bd9		       10 f3		      bpl	.constructPatPtr
     10  8bdb				   .noPatternGoto
     11  8bdb					      ENDIF
     12  8bdb		       a8		      tay
     13  8bdc		       b9 a7 f5 	      lda	tt_PatternPtrLo,y
     14  8bdf		       85 d8		      sta	tt_ptr
     15  8be1		       b9 ac f5 	      lda	tt_PatternPtrHi,y
     16  8be4		       85 d9		      sta	tt_ptr+1
     17  8be6
     18  8be6				  -	      IF	TT_USE_OVERLAY = 0
     19  8be6				  -	      ldy	tt_cur_note_index_c0,x
     20  8be6					      ELSE
     21  8be6
     22  8be6
     23  8be6
     24  8be6		       b8		      clv
     25  8be7
     26  8be7		       b5 d2		      lda	tt_cur_note_index_c0,x
     27  8be9		       10 07		      bpl	.notPrefetched
     28  8beb
     29  8beb		       29 7f		      and	#%01111111
     30  8bed		       95 d2		      sta	tt_cur_note_index_c0,x
     31  8bef
     32  8bef		       2c 62 f4 	      bit	tt_Bit6Set
     33  8bf2				   .notPrefetched
     34  8bf2		       a8		      tay
     35  8bf3					      ENDIF
     36  8bf3		       b1 d8		      lda	(tt_ptr),y
     37  8bf5
     38  8bf5
     39  8bf5
     40  8bf5		       d0 06		      bne	.noEndOfPattern
     41  8bf7
     42  8bf7		       95 d2		      sta	tt_cur_note_index_c0,x
     43  8bf9		       f6 d0		      inc	tt_cur_pat_index_c0,x
     44  8bfb		       d0 d1		      bne	.constructPatPtr
     45  8bfd				   .noEndOfPattern
    156  8bfd		       60		      rts
    157  8bfe					      ENDIF
    158  8bfe
    159  8bfe
    160  8bfe							; --- start instrument or percussion ---
    161  8bfe				   .newNote
    162  8bfe		       95 d6		      sta	tt_cur_ins_c0,x	; set new instrument
    163  8c00							; Instrument or percussion?
    164  8c00		       c9 20		      cmp	#TT_FREQ_MASK+1
    165  8c02		       b0 06		      bcs	.startInstrument
    166  8c04
    167  8c04							; --- start percussion ---
    168  8c04							; Get index of envelope
    169  8c04		       a8		      tay
    170  8c05							; -TT_FIRST_PERC because percussion start with TT_FIRST_PERC
    171  8c05		       b9 c2 f4 	      lda	tt_PercIndexes-TT_FIRST_PERC,y
    172  8c08		       d0 08		      bne	.storeADIndex	; unconditional, since index values are >0
    173  8c0a
    174  8c0a							; --- start instrument ---
    175  8c0a				   .startInstrument
    176  8c0a					      IF	TT_USE_OVERLAY = 1
    177  8c0a							; If V flag is set, this note had been pre-fetched. That means
    178  8c0a							; it should remain in sustain.
    179  8c0a		       70 08		      bvs	.finishedNewNote
    180  8c0c					      ENDIF
    181  8c0c							; Put note into attack/decay
    182  8c0c		       20 5c f4 	      jsr	tt_CalcInsIndex
    183  8c0f		       b9 94 f4 	      lda	tt_InsADIndexes-1,y	; -1 because instruments start at #1
    184  8c12				   .storeADIndex
    185  8c12		       95 d4		      sta	tt_envelope_index_c0,x
    186  8c14
    187  8c14							; --- Finished parsing new note ---
    188  8c14				   .finishedNewNote
    189  8c14							; increase note index into pattern
    190  8c14		       f6 d2		      inc	tt_cur_note_index_c0,x
    191  8c16							; loop over channels
    192  8c16				   .sequencerNextChannel
    193  8c16		       ca		      dex
    194  8c17		       10 9f		      bpl	.advanceLoop
    195  8c19
    196  8c19							; Reset timer value
    197  8c19				  -	      IF	TT_GLOBAL_SPEED = 0
    198  8c19				  -			; Get timer value for current pattern in channel 0
    199  8c19				  -	      ldx	tt_cur_pat_index_c0	; get current pattern (index into tt_SequenceTable)
    200  8c19				  -	      ldy	tt_SequenceTable,x	; Current pattern index now in y
    201  8c19				  -	      IF	TT_USE_FUNKTEMPO = 0
    202  8c19				  -	      lda	tt_PatternSpeeds,y
    203  8c19				  -	      sta	tt_timer
    204  8c19				  -	      ELSE
    205  8c19				  -			; Test for odd/even frame
    206  8c19				  -	      lda	tt_cur_note_index_c0
    207  8c19				  -	      lsr
    208  8c19				  -	      lda	tt_PatternSpeeds,y	; does not affect carry flag
    209  8c19				  -	      bcc	.evenFrame
    210  8c19				  -	      and	#$0f	; does not affect carry flag
    211  8c19				  -	      bcs	.storeFunkTempo
    212  8c19				  -.evenFrame
    213  8c19				  -	      lsr
    214  8c19				  -	      lsr
    215  8c19				  -	      lsr
    216  8c19				  -	      lsr
    217  8c19				  -.storeFunkTempo
    218  8c19				  -	      sta	tt_timer
    219  8c19				  -	      ENDIF		; TT_USE_FUNKTEMPO = 0
    220  8c19				  -
    221  8c19					      ELSE
    222  8c19							; Global tempo
    223  8c19		       a2 04		      ldx	#TT_SPEED-1
    224  8c1b					      IF	TT_USE_FUNKTEMPO = 1
    225  8c1b		       a5 d2		      lda	tt_cur_note_index_c0
    226  8c1d		       4a		      lsr
    227  8c1e		       90 02		      bcc	.noOddFrame
    228  8c20		       a2 03		      ldx	#TT_ODD_SPEED-1
    229  8c22				   .noOddFrame
    230  8c22					      ENDIF		; TT_USE_FUNKTEMPO = 1
    231  8c22		       86 cf		      stx	tt_timer
    232  8c24					      ENDIF		; TT_GLOBAL_SPEED = 0
    233  8c24
    234  8c24							; No new note to process
    235  8c24				   .noNewNote
    236  8c24
    237  8c24							; ==================== Update registers ====================
    238  8c24		       a2 01		      ldx	#1	; 2 channels
    239  8c26				   .updateLoop
    240  8c26							; Percussion or melodic instrument?
    241  8c26		       b5 d6		      lda	tt_cur_ins_c0,x
    242  8c28				  -	      IF	TT_STARTS_WITH_NOTES = 0
    243  8c28				  -			; This branch can be removed if track starts with a note in each channel
    244  8c28				  -	      beq	.afterAudioUpdate
    245  8c28					      ENDIF
    246  8c28		       c9 20		      cmp	#TT_FREQ_MASK+1
    247  8c2a		       b0 37		      bcs	.instrument	; Melodic instrument
    248  8c2c
    249  8c2c							; --- Percussion: Get envelope index ---
    250  8c2c		       b4 d4		      ldy	tt_envelope_index_c0,x
    251  8c2e							; Set AUDC and AUDV value from envelope
    252  8c2e		       b9 eb f4 	      lda	tt_PercCtrlVolTable-1,y	; -1 because values are stored +1
    253  8c31		       f0 02		      beq	.endOfPercussion	; 0 means end of percussion data
    254  8c33		       f6 d4		      inc	tt_envelope_index_c0,x	; if end not reached: advance index
    255  8c35				   .endOfPercussion
    256  8c35		       95 59		      sta	AUDV0,x
    257  8c37		       4a		      lsr
    258  8c38		       4a		      lsr
    259  8c39		       4a		      lsr
    260  8c3a		       4a		      lsr
    261  8c3b		       95 55		      sta	AUDC0,x
    262  8c3d							; Set AUDF
    263  8c3d		       b9 d5 f4 	      lda	tt_PercFreqTable-1,y	; -1 because values are stored +1
    264  8c40							; Bit 7 (overlay) might be set, but is unused in AUDF
    265  8c40		       95 57		      sta	AUDF0,x
    266  8c42					      IF	TT_USE_OVERLAY = 1
    267  8c42		       10 48		      bpl	.afterAudioUpdate
    268  8c44							; Overlay percussion: Fetch next note out of order
    269  8c44		       20 ce f3 	      jsr	tt_FetchNote
    270  8c47							; Only do something if it's a melodic instrument
    271  8c47		       c9 20		      cmp	#TT_FREQ_MASK+1
    272  8c49		       90 41		      bcc	.afterAudioUpdate
    273  8c4b							; Instrument: Put into sustain
    274  8c4b		       95 d6		      sta	tt_cur_ins_c0,x	; set new instrument
    275  8c4d		       20 5c f4 	      jsr	tt_CalcInsIndex
    276  8c50		       b9 99 f4 	      lda	tt_InsSustainIndexes-1,y	; -1 because instruments start at #1
    277  8c53		       95 d4		      sta	tt_envelope_index_c0,x
    278  8c55							; Set prefetch flag. asl-sec-ror is smaller than lda-ora #128-sta
    279  8c55		       16 d2		      asl	tt_cur_note_index_c0,x
    280  8c57		       38		      sec
    281  8c58		       76 d2		      ror	tt_cur_note_index_c0,x
    282  8c5a		       30 30		      bmi	.afterAudioUpdate	; unconditional
    283  8c5c				  -	      ELSE
    284  8c5c				  -	      jmp	.afterAudioUpdate
    285  8c5c					      ENDIF
    286  8c5c
    287  8c5c
    288  8c5c							; ---------------------------------------------------------------------
    289  8c5c							; Helper subroutine to minimize ROM footprint.
    290  8c5c							; Interleaved here so player routine can be inlined.
    291  8c5c							; ---------------------------------------------------------------------
    292  8c5c				   tt_CalcInsIndex
    293  8c5c							; move upper 3 bits to lower 3
    294  8c5c		       4a		      lsr
    295  8c5d		       4a		      lsr
    296  8c5e		       4a		      lsr
    297  8c5f		       4a		      lsr
    298  8c60		       4a		      lsr
    299  8c61		       a8		      tay
    300  8c62				   tt_Bit6Set		; This opcode has bit #6 set, for use with bit instruction
    301  8c62		       60		      rts
    302  8c63
    303  8c63
    304  8c63				   .instrument
    305  8c63							; --- Melodic instrument ---
    306  8c63							; Compute index into ADSR indexes and master Ctrl tables
    307  8c63		       20 5c f4 	      jsr	tt_CalcInsIndex
    308  8c66							; Set AUDC with master value for this instrument, while we are at it
    309  8c66		       b9 8f f4 	      lda	tt_InsCtrlTable-1,y	; -1 because instruments start with #1
    310  8c69		       95 55		      sta	AUDC0,x
    311  8c6b							; advance ADSR counter and compare to end of Sustain
    312  8c6b		       b5 d4		      lda	tt_envelope_index_c0,x
    313  8c6d		       d9 9e f4 	      cmp	tt_InsReleaseIndexes-1,y	; -1 because instruments start with #1
    314  8c70		       d0 03		      bne	.noEndOfSustain
    315  8c72							; End of sustain: Go back to start of sustain
    316  8c72		       b9 99 f4 	      lda	tt_InsSustainIndexes-1,y	; -1 because instruments start with #1
    317  8c75				   .noEndOfSustain
    318  8c75		       a8		      tay
    319  8c76							; Set volume from envelope
    320  8c76		       b9 a4 f4 	      lda	tt_InsFreqVolTable,y
    321  8c79		       f0 01		      beq	.endOfEnvelope	; 0 means end of release has been reached:
    322  8c7b		       c8		      iny		; advance index otherwise
    323  8c7c				   .endOfEnvelope
    324  8c7c		       94 d4		      sty	tt_envelope_index_c0,x
    325  8c7e		       95 59		      sta	AUDV0,x
    326  8c80							; Now adjust frequency with ADSR value from envelope
    327  8c80		       4a		      lsr
    328  8c81		       4a		      lsr
    329  8c82		       4a		      lsr
    330  8c83		       4a		      lsr
    331  8c84		       18		      clc
    332  8c85		       75 d6		      adc	tt_cur_ins_c0,x
    333  8c87		       38		      sec
    334  8c88		       e9 08		      sbc	#8
    335  8c8a		       95 57		      sta	AUDF0,x
    336  8c8c
    337  8c8c				   .afterAudioUpdate
    338  8c8c							; loop over channels
    339  8c8c		       ca		      dex
    340  8c8d		       10 97		      bpl	.updateLoop
    341  8c8f
 Music player size:  $dd
    342  8c8f					      echo	"Music player size: ", *-tt_PlayerStart
------- FILE BANK_INITBANK.asm
   1069  8c8f		       60		      rts
   1070  8c90
------- FILE sound/intro1_trackdata.asm LEVEL 3 PASS 3
      0  8c90					      include	"sound/intro1_trackdata.asm"
      1  8c90							; TIATracker music player
      2  8c90							; Copyright 2016 Andre "Kylearan" Wichmann
      3  8c90							; Website: https://bitbucket.org/kylearan/tiatracker
      4  8c90							; Email: andre.wichmann@gmx.de
      5  8c90							;
      6  8c90							; Licensed under the Apache License, Version 2.0 (the "License");
      7  8c90							; you may not use this file except in compliance with the License.
      8  8c90							; You may obtain a copy of the License at
      9  8c90							;
     10  8c90							;   http://www.apache.org/licenses/LICENSE-2.0
     11  8c90							;
     12  8c90							; Unless required by applicable law or agreed to in writing, software
     13  8c90							; distributed under the License is distributed on an "AS IS" BASIS,
     14  8c90							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15  8c90							; See the License for the specific language governing permissions and
     16  8c90							; limitations under the License.
     17  8c90
     18  8c90							; Song author: 
     19  8c90							; Song name: 
     20  8c90
     21  8c90							; @com.wudsn.ide.asm.hardware=ATARI2600
     22  8c90
     23  8c90							; =====================================================================
     24  8c90							; TIATracker melodic and percussion instruments, patterns and sequencer
     25  8c90							; data.
     26  8c90							; =====================================================================
     27  8c90				   tt_TrackDataStart
     28  8c90
     29  8c90							; =====================================================================
     30  8c90							; Melodic instrument definitions (up to 7). tt_envelope_index_c0/1 hold
     31  8c90							; the index values into these tables for the current instruments played
     32  8c90							; in channel 0 and 1.
     33  8c90							; 
     34  8c90							; Each instrument is defined by:
     35  8c90							; - tt_InsCtrlTable: the AUDC value
     36  8c90							; - tt_InsADIndexes: the index of the start of the ADSR envelope as
     37  8c90							;	 defined in tt_InsFreqVolTable
     38  8c90							; - tt_InsSustainIndexes: the index of the start of the Sustain phase
     39  8c90							;	 of the envelope
     40  8c90							; - tt_InsReleaseIndexes: the index of the start of the Release phase
     41  8c90							; - tt_InsFreqVolTable: The AUDF frequency and AUDV volume values of
     42  8c90							;	 the envelope
     43  8c90							; =====================================================================
     44  8c90
     45  8c90							; Instrument master CTRL values
     46  8c90				   tt_InsCtrlTable
     47  8c90		       07 04 0c 04*	      dc.b	$07, $04, $0c, $04, $0c
     48  8c95
     49  8c95
     50  8c95							; Instrument Attack/Decay start indexes into ADSR tables.
     51  8c95				   tt_InsADIndexes
     52  8c95		       00 0e 0e 1e*	      dc.b	$00, $0e, $0e, $1e, $1e
     53  8c9a
     54  8c9a
     55  8c9a							; Instrument Sustain start indexes into ADSR tables
     56  8c9a				   tt_InsSustainIndexes
     57  8c9a		       08 19 19 2b*	      dc.b	$08, $19, $19, $2b, $2b
     58  8c9f
     59  8c9f
     60  8c9f							; Instrument Release start indexes into ADSR tables
     61  8c9f							; Caution: Values are stored with an implicit -1 modifier! To get the
     62  8c9f							; real index, add 1.
     63  8c9f				   tt_InsReleaseIndexes
     64  8c9f		       09 1b 1b 2c*	      dc.b	$09, $1b, $1b, $2c, $2c
     65  8ca4
     66  8ca4
     67  8ca4							; AUDVx and AUDFx ADSR envelope values.
     68  8ca4							; Each byte encodes the frequency and volume:
     69  8ca4							; - Bits 7..4: Freqency modifier for the current note ([-8..7]),
     70  8ca4							;	 8 means no change. Bit 7 is the sign bit.
     71  8ca4							; - Bits 3..0: Volume
     72  8ca4							; Between sustain and release is one byte that is not used and
     73  8ca4							; can be any value.
     74  8ca4							; The end of the release phase is encoded by a 0.
     75  8ca4				   tt_InsFreqVolTable
     76  8ca4							; 0: Pizzicato bassb
     77  8ca4		       8a 8a 89 88*	      dc.b	$8a, $8a, $89, $88, $86, $85, $85, $84
     78  8cac		       83 00 83 83*	      dc.b	$83, $00, $83, $83, $83, $00
     79  8cb2							; 1+2: Square2
     80  8cb2		       8c 8c 8b 89*	      dc.b	$8c, $8c, $8b, $89, $87, $85, $84, $83
     81  8cba		       82 82 81 81*	      dc.b	$82, $82, $81, $81, $81, $00, $81, $00
     82  8cc2							; 3+4: Square
     83  8cc2		       85 85 85 85*	      dc.b	$85, $85, $85, $85, $84, $83, $83, $82
     84  8cca		       82 82 81 81*	      dc.b	$82, $82, $81, $81, $81, $81, $00, $80
     85  8cd2		       00		      dc.b	$00
     86  8cd3
     87  8cd3
     88  8cd3
     89  8cd3							; =====================================================================
     90  8cd3							; Percussion instrument definitions (up to 15)
     91  8cd3							;
     92  8cd3							; Each percussion instrument is defined by:
     93  8cd3							; - tt_PercIndexes: The index of the first percussion frame as defined
     94  8cd3							;	 in tt_PercFreqTable and tt_PercCtrlVolTable
     95  8cd3							; - tt_PercFreqTable: The AUDF frequency value
     96  8cd3							; - tt_PercCtrlVolTable: The AUDV volume and AUDC values
     97  8cd3							; =====================================================================
     98  8cd3
     99  8cd3							; Indexes into percussion definitions signifying the first frame for
    100  8cd3							; each percussion in tt_PercFreqTable.
    101  8cd3							; Caution: Values are stored with an implicit +1 modifier! To get the
    102  8cd3							; real index, subtract 1.
    103  8cd3				   tt_PercIndexes
    104  8cd3		       01 0a 0c 	      dc.b	$01, $0a, $0c
    105  8cd6
    106  8cd6
    107  8cd6							; The AUDF frequency values for the percussion instruments.
    108  8cd6							; If the second to last value is negative (>=128), it means it's an
    109  8cd6							; "overlay" percussion, i.e. the player fetches the next instrument note
    110  8cd6							; immediately and starts it in the sustain phase next frame. (Needs
    111  8cd6							; TT_USE_OVERLAY)
    112  8cd6				   tt_PercFreqTable
    113  8cd6							; 0: Kick
    114  8cd6		       00 01 02 03*	      dc.b	$00, $01, $02, $03, $04, $05, $06, $87
    115  8cde		       00		      dc.b	$00
    116  8cdf							; 1: HH
    117  8cdf		       80 00		      dc.b	$80, $00
    118  8ce1							; 2: Snare
    119  8ce1		       01 03 06 0e*	      dc.b	$01, $03, $06, $0e, $13, $11, $15, $14
    120  8ce9		       17 1b 00 	      dc.b	$17, $1b, $00
    121  8cec
    122  8cec
    123  8cec							; The AUDCx and AUDVx volume values for the percussion instruments.
    124  8cec							; - Bits 7..4: AUDC value
    125  8cec							; - Bits 3..0: AUDV value
    126  8cec							; 0 means end of percussion data.
    127  8cec				   tt_PercCtrlVolTable
    128  8cec							; 0: Kick
    129  8cec		       ee ed ed eb*	      dc.b	$ee, $ed, $ed, $eb, $e9, $e8, $e8, $e6
    130  8cf4		       00		      dc.b	$00
    131  8cf5							; 1: HH
    132  8cf5		       87 00		      dc.b	$87, $00
    133  8cf7							; 2: Snare
    134  8cf7		       8b 8a 8a 8a*	      dc.b	$8b, $8a, $8a, $8a, $8a, $8a, $89, $88
    135  8cff		       87 86 00 	      dc.b	$87, $86, $00
    136  8d02
    137  8d02
    138  8d02
    139  8d02							; =====================================================================
    140  8d02							; Track definition
    141  8d02							; The track is defined by:
    142  8d02							; - tt_PatternX (X=0, 1, ...): Pattern definitions
    143  8d02							; - tt_PatternPtrLo/Hi: Pointers to the tt_PatternX tables, serving
    144  8d02							;	 as index values
    145  8d02							; - tt_SequenceTable: The order in which the patterns should be played,
    146  8d02							;	 i.e. indexes into tt_PatternPtrLo/Hi. Contains the sequences
    147  8d02							;	 for all channels and sub-tracks. The variables
    148  8d02							;	 tt_cur_pat_index_c0/1 hold an index into tt_SequenceTable for
    149  8d02							;	 each channel.
    150  8d02							;
    151  8d02							; So tt_SequenceTable holds indexes into tt_PatternPtrLo/Hi, which
    152  8d02							; in turn point to pattern definitions (tt_PatternX) in which the notes
    153  8d02							; to play are specified.
    154  8d02							; =====================================================================
    155  8d02
    156  8d02							; ---------------------------------------------------------------------
    157  8d02							; Pattern definitions, one table per pattern. tt_cur_note_index_c0/1
    158  8d02							; hold the index values into these tables for the current pattern
    159  8d02							; played in channel 0 and 1.
    160  8d02							;
    161  8d02							; A pattern is a sequence of notes (one byte per note) ending with a 0.
    162  8d02							; A note can be either:
    163  8d02							; - Pause: Put melodic instrument into release. Must only follow a
    164  8d02							;	 melodic instrument.
    165  8d02							; - Hold: Continue to play last note (or silence). Default "empty" note.
    166  8d02							; - Slide (needs TT_USE_SLIDE): Adjust frequency of last melodic note
    167  8d02							;	 by -7..+7 and keep playing it
    168  8d02							; - Play new note with melodic instrument
    169  8d02							; - Play new note with percussion instrument
    170  8d02							; - End of pattern
    171  8d02							;
    172  8d02							; A note is defined by:
    173  8d02							; - Bits 7..5: 1-7 means play melodic instrument 1-7 with a new note
    174  8d02							;	 and frequency in bits 4..0. If bits 7..5 are 0, bits 4..0 are
    175  8d02							;	 defined as:
    176  8d02							;	 - 0: End of pattern
    177  8d02							;	 - [1..15]: Slide -7..+7 (needs TT_USE_SLIDE)
    178  8d02							;	 - 8: Hold
    179  8d02							;	 - 16: Pause
    180  8d02							;	 - [17..31]: Play percussion instrument 1..15
    181  8d02							;
    182  8d02							; The tracker must ensure that a pause only follows a melodic
    183  8d02							; instrument or a hold/slide.
    184  8d02							; ---------------------------------------------------------------------
    185  8d02		       00 1f	   TT_FREQ_MASK =	%00011111
    186  8d02		       00 08	   TT_INS_HOLD =	8
    187  8d02		       00 10	   TT_INS_PAUSE =	16
    188  8d02		       00 11	   TT_FIRST_PERC =	17
    189  8d02
    190  8d02							; Intro left
    191  8d02				   tt_pattern0
    192  8d02		       11 08 3e 08*	      dc.b	$11, $08, $3e, $08, $12, $3e, $3e, $08
    193  8d0a		       13 08 3e 08*	      dc.b	$13, $08, $3e, $08, $12, $3e, $3e, $08
    194  8d12		       11 08 3e 08*	      dc.b	$11, $08, $3e, $08, $12, $3e, $12, $3e
    195  8d1a		       13 08 3e 08*	      dc.b	$13, $08, $3e, $08, $12, $3e, $13, $08
    196  8d22		       00		      dc.b	$00
    197  8d23
    198  8d23							; Intro2 L
    199  8d23				   tt_pattern1
    200  8d23		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $34, $08
    201  8d2b		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $34, $08
    202  8d33		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $12, $34
    203  8d3b		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $13, $08
    204  8d43		       00		      dc.b	$00
    205  8d44
    206  8d44							; Intro2-fill L
    207  8d44				   tt_pattern2
    208  8d44		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $34, $08
    209  8d4c		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $34, $08
    210  8d54		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $12, $34
    211  8d5c		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $13, $08
    212  8d64		       00		      dc.b	$00
    213  8d65
    214  8d65							; Intro right
    215  8d65				   tt_pattern3
    216  8d65		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $6e, $08, $73, $08
    217  8d6d		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $73, $08, $73, $08
    218  8d75		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $6e, $08, $b3, $08
    219  8d7d		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $b3, $08, $73, $08
    220  8d85		       00		      dc.b	$00
    221  8d86
    222  8d86							; Intro2 R
    223  8d86				   tt_pattern4
    224  8d86		       71 08 73 08*	      dc.b	$71, $08, $73, $08, $74, $08, $71, $08
    225  8d8e		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $b3, $08, $73, $08
    226  8d96		       b3 08 73 08*	      dc.b	$b3, $08, $73, $08, $b3, $08, $73, $08
    227  8d9e		       71 08 73 08*	      dc.b	$71, $08, $73, $08, $74, $08, $71, $08
    228  8da6		       00		      dc.b	$00
    229  8da7
    230  8da7
    231  8da7
    232  8da7
    233  8da7							; Individual pattern speeds (needs TT_GLOBAL_SPEED = 0).
    234  8da7							; Each byte encodes the speed of one pattern in the order
    235  8da7							; of the tt_PatternPtr tables below.
    236  8da7							; If TT_USE_FUNKTEMPO is 1, then the low nibble encodes
    237  8da7							; the even speed and the high nibble the odd speed.
    238  8da7				  -	      IF	TT_GLOBAL_SPEED = 0
    239  8da7				  -tt_PatternSpeeds
    240  8da7				  -%%PATTERNSPEEDS%%
    241  8da7					      ENDIF
    242  8da7
    243  8da7
    244  8da7							; ---------------------------------------------------------------------
    245  8da7							; Pattern pointers look-up table.
    246  8da7							; ---------------------------------------------------------------------
    247  8da7				   tt_PatternPtrLo
    248  8da7		       02 23 44 65	      dc.b	<tt_pattern0, <tt_pattern1, <tt_pattern2, <tt_pattern3
    249  8dab		       86		      dc.b	<tt_pattern4
    250  8dac				   tt_PatternPtrHi
    251  8dac		       f5 f5 f5 f5	      dc.b	>tt_pattern0, >tt_pattern1, >tt_pattern2, >tt_pattern3
    252  8db0		       f5		      dc.b	>tt_pattern4
    253  8db1
    254  8db1
    255  8db1							; ---------------------------------------------------------------------
    256  8db1							; Pattern sequence table. Each byte is an index into the
    257  8db1							; tt_PatternPtrLo/Hi tables where the pointers to the pattern
    258  8db1							; definitions can be found. When a pattern has been played completely,
    259  8db1							; the next byte from this table is used to get the address of the next
    260  8db1							; pattern to play. tt_cur_pat_index_c0/1 hold the current index values
    261  8db1							; into this table for channels 0 and 1.
    262  8db1							; If TT_USE_GOTO is used, a value >=128 denotes a goto to the pattern
    263  8db1							; number encoded in bits 6..0 (i.e. value AND %01111111).
    264  8db1							; ---------------------------------------------------------------------
    265  8db1				   tt_SequenceTable
    266  8db1							; ---------- Channel 0 ----------
    267  8db1		       00 00 01 02*	      dc.b	$00, $00, $01, $02, $80
    268  8db6
    269  8db6
    270  8db6							; ---------- Channel 1 ----------
    271  8db6		       03 04 03 04*	      dc.b	$03, $04, $03, $04, $85
    272  8dbb
    273  8dbb
 Track size:  $12b
    274  8dbb					      echo	"Track size: ", *-tt_TrackDataStart
------- FILE BANK_INITBANK.asm
   1072  8dbb
   1073  8dbb							;------------------------------------------------------------------------------
   1074  8dbb
      0  8dbb					      CHECK_BANK_SIZE	"INITBANK"
      1  8dbb		       05 bb	   .TEMP      =	* - BANK_START
 INITBANK (2K) SIZE =  $5bb , FREE= $245
      2  8dbb					      ECHO	"INITBANK", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  8dbb				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  8dbb				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  8dbb				  -	      ERR
      6  8dbb					      endif
------- FILE ./sokoboo.asm
    818  8dbb
    819  8dbb							; MUST BE LAST...
------- FILE BANK_FIXED.asm LEVEL 2 PASS 3
      0  8dbb					      include	"BANK_FIXED.asm"
      1  8dbb							;    Sokoboo - a Sokoban implementation
      2  8dbb							;    using a generic tile-based display engine for the Atari 2600
      3  8dbb							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  8dbb							;
      5  8dbb							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  8dbb							;
      7  8dbb							;    Code related to the generic tile-based display engine was developed by
      8  8dbb							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  8dbb							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  8dbb							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  8dbb							;
     12  8dbb							;    Code related to music and sound effects uses the TIATracker music player
     13  8dbb							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  8dbb							;    directory for Apache licensing details.
     15  8dbb							;
     16  8dbb							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  8dbb							;    See the copyright notices in the License directory for a list of level
     18  8dbb							;    contributors.
     19  8dbb							;
     20  8dbb							;    Except where otherwise indicated, this software is released under the
     21  8dbb							;    following licensing arrangement...
     22  8dbb							;
     23  8dbb							;    This program is free software: you can redistribute it and/or modify
     24  8dbb							;    it under the terms of the GNU General Public License as published by
     25  8dbb							;    the Free Software Foundation, either version 3 of the License, or
     26  8dbb							;    (at your option) any later version.
     27  8dbb							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  8dbb
     29  8dbb							;    This program is distributed in the hope that it will be useful,
     30  8dbb							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  8dbb							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  8dbb							;    GNU General Public License for more details.
     33  8dbb
     34  8dbb							;------------------------------------------------------------------------------
     35  8dbb							;###############################  FIXED BANK  #################################
     36  8dbb							;------------------------------------------------------------------------------
     37  8dbb
     38  8dbb
     39  8dbb				   ORIGIN     SET	FIXED_BANK
     40  8dbb
      0  8dbb					      NEWBANK	THE_FIXED_BANK
      1  ffd8 ????				      SEG	THE_FIXED_BANK
      2  f800					      ORG	ORIGIN
      3  f800					      RORG	$F000
      4  f800				   BANK_START SET	*
      5  f800				   THE_FIXED_BANK SET	ORIGIN / 2048
      6  f800				   ORIGIN     SET	ORIGIN + 2048
      7  f800				   _CURRENT_BANK SET	THE_FIXED_BANK
     42  f800					      RORG	$f800
     43  f800
     44  f800							;------------------------------------------------------------------------------
     45  f800
      0  f800					      DEFINE_SUBROUTINE	DrawTimeFromROM
      1  f800		       00 1f	   BANK_DrawTimeFromROM =	_CURRENT_BANK
      2  f800					      SUBROUTINE
      3  f800				   DrawTimeFromROM
     47  f800
     48  f800		       a9 09		      lda	#BANK_SCORING
     49  f802		       85 3e		      sta	SET_BANK_RAM
     50  f804		       20 a3 f2 	      jsr	DrawTime
     51  f807		       20 97 f2 	      jsr	DrawBCD_targetsRequired
     52  f80a		       a5 bf		      lda	ROM_Bank
     53  f80c		       85 3f		      sta	SET_BANK
     54  f80e		       60		      rts
     55  f80f
     56  f80f							;------------------------------------------------------------------------------
     57  f80f
      0  f80f					      DEFINE_SUBROUTINE	GetROMByte	;=23(A)
      1  f80f		       00 1f	   BANK_GetROMByte =	_CURRENT_BANK
      2  f80f					      SUBROUTINE
      3  f80f				   GetROMByte
     59  f80f
     60  f80f							; a = ROM bank to retrieve
     61  f80f							; y = page index
     62  f80f							; ROM_Bank = bank to return to
     63  f80f							; (Board_AddressR) = page
     64  f80f							; out a = byte from (Board_AddressR)
     65  f80f
     66  f80f		       85 3f		      sta	SET_BANK	;3
     67  f811		       4c 16 f8 	      jmp	GetBoardCharacter2	;3+17(A)	 unconditional
     68  f814
     69  f814							;------------------------------------------------------------------------------
     70  f814
      0  f814					      DEFINE_SUBROUTINE	GetBoardCharacter	;=20(A)
      1  f814		       00 1f	   BANK_GetBoardCharacter =	_CURRENT_BANK
      2  f814					      SUBROUTINE
      3  f814				   GetBoardCharacter
     72  f814
     73  f814							; call from ROM bank
     74  f814							; switches back to ROM_Bank on exit
     75  f814
     76  f814							; pass A = bank containing character
     77  f814							; Y = x character position
     78  f814							; (Board_AddressR) points to character position
     79  f814							; returns character from board
     80  f814
     81  f814
     82  f814		       85 3e		      sta	SET_BANK_RAM	;3   switch to bank to read
     83  f816
     84  f816				   GetBoardCharacter2		;=17(A)
     85  f816
     86  f816		       b3 bb		      lax	(Board_AddressR),y	;5
     87  f818		       a4 bf		      ldy	ROM_Bank	;3
     88  f81a		       84 3f		      sty	SET_BANK	;3   switch back caller's bank
     89  f81c		       60		      rts		;6   and go back
     90  f81d
     91  f81d							;---------------------------------------------------------------------------
     92  f81d
      0  f81d					      DEFINE_SUBROUTINE	PutBoardCharacter	;=21(A)
      1  f81d		       00 1f	   BANK_PutBoardCharacter =	_CURRENT_BANK
      2  f81d					      SUBROUTINE
      3  f81d				   PutBoardCharacter
     94  f81d
     95  f81d		       86 3e		      stx	SET_BANK_RAM	; 3
     96  f81f
     97  f81f				   PutBoardCharacterSB		; =18
     98  f81f		       91 bd		      sta	(Board_AddressW),y	; 6
     99  f821		       a5 bf		      lda	ROM_Bank	; 3
    100  f823		       85 3f		      sta	SET_BANK	; 3
    101  f825		       60		      rts		; 6 = 21
    102  f826
    103  f826							;---------------------------------------------------------------------------
    104  f826
      0  f826					      DEFINE_SUBROUTINE	GetBoardCharacter__CALL_FROM_RAM__	;=61[-2](A)
      1  f826		       00 1f	   BANK_GetBoardCharacter__CALL_FROM_RAM__ =	_CURRENT_BANK
      2  f826					      SUBROUTINE
      3  f826				   GetBoardCharacter__CALL_FROM_RAM__
    106  f826
    107  f826		       a4 88		      ldy	POS_Y	;3
    108  f828
    109  f828		       a9 11		      lda	#BANK_GetBoardAddressR	;
    110  f82a		       85 3f		      sta	SET_BANK	;
    111  f82c		       20 bf f0 	      jsr	GetBoardAddressR	;11+24[-2](A)
    112  f82f
    113  f82f
    114  f82f							;DEFINE_SUBROUTINE PartialGetBoardCharacter ;=23
    115  f82f
    116  f82f		       85 3e		      sta	SET_BANK_RAM	;3
    117  f831		       a4 87		      ldy	POS_X	;3
    118  f833		       b3 bb		      lax	(Board_AddressR),y	;5
    119  f835		       a4 c0		      ldy	RAM_Bank	;3
    120  f837		       84 3e		      sty	SET_BANK_RAM	;3		 return to RAM caller
    121  f839		       60		      rts		;6		 and go back
    122  f83a
    123  f83a							;---------------------------------------------------------------------------
    124  f83a
      0  f83a					      DEFINE_SUBROUTINE	PutBoardCharacterFromRAM	;=71[-2]
      1  f83a		       00 1f	   BANK_PutBoardCharacterFromRAM =	_CURRENT_BANK
      2  f83a					      SUBROUTINE
      3  f83a				   PutBoardCharacterFromRAM
    126  f83a
    127  f83a							; POS_Y  = row
    128  f83a							; POS_Type = character to write
    129  f83a							; POS_X     = column
    130  f83a							; RAM_Bank = caller's bank
    131  f83a
    132  f83a		       a4 88		      ldy	POS_Y	;3
    133  f83c
    134  f83c		       a9 11		      lda	#BANK_GetBoardAddressW	;
    135  f83e		       85 3f		      sta	SET_BANK	;
    136  f840		       20 cc f0 	      jsr	GetBoardAddressW	;11+24[-2](A)
    137  f843
    138  f843		       86 3e		      stx	SET_BANK_RAM	;3
    139  f845
    140  f845		       a4 87		      ldy	POS_X	;3
    141  f847		       a5 8b		      lda	POS_Type	;3
    142  f849		       91 bd		      sta	(Board_AddressW),y	;6
    143  f84b		       a4 c0		      ldy	RAM_Bank	;3
    144  f84d		       84 3e		      sty	SET_BANK_RAM	;3 return to RAM caller
    145  f84f		       60		      rts		;6
    146  f850
    147  f850
      0  f850					      DEFINE_SUBROUTINE	PutBoardCharacterFromROM
      1  f850		       00 1f	   BANK_PutBoardCharacterFromROM =	_CURRENT_BANK
      2  f850					      SUBROUTINE
      3  f850				   PutBoardCharacterFromROM
    149  f850		       48		      pha
    150  f851		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
    151  f854		       68		      pla
    152  f855		       85 3f		      sta	SET_BANK
    153  f857		       60		      rts
    154  f858
    155  f858							;---------------------------------------------------------------------------
    156  f858
      0  f858					      DEFINE_SUBROUTINE	ProcessObjStack	; @31✅ called from Vector
      1  f858		       00 1f	   BANK_ProcessObjStack =	_CURRENT_BANK
      2  f858					      SUBROUTINE
      3  f858				   ProcessObjStack
    158  f858							; 15 minimum segtime abort
    159  f858
    160  f858		       ad 84 02 	      lda	INTIM	; 4
    161  f85b		       c9 03		      cmp	#MINIMUM_SEGTIME	; 2
    162  f85d		       90 31		      bcc	EarlyAbort	; 2(3)= 8
    163  f85f							; => [31]+9+6rts = 46✅ on abort
    164  f85f							; @0✅
    165  f85f
    166  f85f		       a5 82		      lda	ObjStackNum	; 3
    167  f861		       49 01		      eor	#1	; 2
    168  f863		       aa		      tax		; 2 = 7✅
    169  f864
    170  f864		       a5 c3		      lda	ObjIterator	; 3
    171  f866		       d5 83		      cmp	ObjStackPtr,x	; 5
    172  f868		       b0 24		      bcs	nextPhase	; 2/3 = 10/11[+11] ==> @22✅ on exit
    173  f86a
    174  f86a							; @17✅
    175  f86a							; Process an object...
    176  f86a							; Actual object code (the handlers) starts 82 cycles after previous segtime check!
    177  f86a
    178  f86a		       bc 35 f9 	      ldy	BankObjStack,x	; 4
    179  f86d		       84 3e		      sty	SET_BANK_RAM	; 3 = 7
    180  f86f
    181  f86f		       aa		      tax		; 2
    182  f870		       bc 80 11 	      ldy	SortedObjPtr,x	; 4 = 6	      indirect object pointer list (sorted)
    183  f873
    184  f873		       b9 00 10 	      lda	ObjStackX,y	; 4
    185  f876		       85 87		      sta	POS_X	; 3
    186  f878		       b9 80 10 	      lda	ObjStackY,y	; 4
    187  f87b		       85 88		      sta	POS_Y	; 3
    188  f87d		       b9 00 11 	      lda	ObjStackVar,y	; 4
    189  f880		       85 8c		      sta	POS_VAR	; 3
    190  f882		       be 00 12 	      ldx	ObjStackType,y	; 4
    191  f885		       86 8b		      stx	POS_Type	; 3 = 28
    192  f887
    193  f887		       a9 11		      lda	#BANK_VectorProcess	; 2
    194  f889		       85 3f		      sta	SET_BANK	; 3
    195  f88b		       4c 87 f3 	      jmp	VectorProcess	; 3 = 8
    196  f88e
    197  f88e							; => [17]+7+6+28+8 = @64 entry to VectorProcess
    198  f88e							; + 31 minimum timeout return
    199  f88e							; = 95✅
    200  f88e
    201  f88e							;---------------------------------------------------------------------------
    202  f88e							; Now process the blank stack.  This stack holds all the recently blanked squares
    203  f88e							; and determines (and moves) BOXs or TARGETs into these squares.  The space vacated
    204  f88e							; by these objects are added again to the blank stack.
    205  f88e
    206  f88e				   nextPhase		; +11✅ for exit from here
    207  f88e
    208  f88e		       e6 86		      inc	ScreenDrawPhase	;5		 obj/blank finished -- let the draw stuff proceed
    209  f890		       60	   EarlyAbort rts		;6
    210  f891
    211  f891							;---------------------------------------------------------------------------
    212  f891
      0  f891					      DEFINE_SUBROUTINE	SwitchObjects	; = 31 ✅
      1  f891		       00 1f	   BANK_SwitchObjects =	_CURRENT_BANK
      2  f891					      SUBROUTINE
      3  f891				   SwitchObjects
    214  f891
    215  f891							; The game loop has come to an end. The only possible "still happening" thing is the sort, which runs
    216  f891							; in parallel with other processes (objects, draw stack, etc). We may or may not want to wait for the
    217  f891							; sort to complete.  This code does all the checks needed to switch to the next game frame.
    218  f891
    219  f891		       ad 84 02 	      lda	INTIM	; 4
    220  f894		       c9 03		      cmp	#SEGTIME_SWITCHOBJECTS	; 2
    221  f896		       90 f8		      bcc	EarlyAbort	; 2(3) => [31]+(9)+6rts = 46✅ on abort
    222  f898
    223  f898							; If we're undertime, then abort. The sort will continue to run, and that's great. Only when
    224  f898							; we're at the throttle cutoff do we switch game-frames.
    225  f898
    226  f898
    227  f898
    228  f898							;		  ;sec
    229  f898							;		  lda Throttle			  ;3
    230  f898							;		  sbc #MAX_THROTTLE		  ;2
    231  f898							;	      ;    bcc EarlyAbort		   ;2/3 	   plenty of time left!
    232  f898							;		  sta Throttle			  ;3 = 10	  save fractional 'left over' bit
    233  f898
    234  f898
    235  f898							; Now that we have completed processing the object stack, we switch
    236  f898							; the stack bank pointers for the next time around.
    237  f898
    238  f898		       a5 82		      lda	ObjStackNum	;3
    239  f89a		       49 01		      eor	#1	;2
    240  f89c		       aa		      tax		;2
    241  f89d		       86 82		      stx	ObjStackNum	;3 = 10	 swap stacks @here
    242  f89f
    243  f89f							; Initialise the iterator and stack pointer for next time around.
    244  f89f							; Previously the stack pointer auto-initialised by popping the stack. Now we have an iterator it's
    245  f89f							; necessary to initialise both.
    246  f89f
    247  f89f		       a0 00		      ldy	#0	;2
    248  f8a1		       84 c3		      sty	ObjIterator	;3
    249  f8a3		       94 83		      sty	ObjStackPtr,x	;4
    250  f8a5
    251  f8a5		       84 86		      sty	ScreenDrawPhase	;3
    252  f8a7		       60		      rts		;6
    253  f8a8
    254  f8a8							;---------------------------------------------------------------------------
    255  f8a8
    256  f8a8		       60	   EarlyAbort4 rts
    257  f8a9
      0  f8a9					      DEFINE_SUBROUTINE	PROCESS_MAN
      1  f8a9		       00 1f	   BANK_PROCESS_MAN =	_CURRENT_BANK
      2  f8a9					      SUBROUTINE
      3  f8a9				   PROCESS_MAN
    259  f8a9
    260  f8a9		       ad 84 02 	      lda	INTIM	; 3
    261  f8ac		       c9 16		      cmp	#SEGTIME_MAN	; 2
    262  f8ae		       90 f8		      bcc	EarlyAbort4	; 2/3 = 7 + 6rts = 13✅ on abort
    263  f8b0
    264  f8b0		       a9 11		      lda	#BANK_ManProcess
    265  f8b2		       85 bf		      sta	ROM_Bank
    266  f8b4		       85 3f		      sta	SET_BANK
    267  f8b6		       20 73 f1 	      jsr	ManProcess
    268  f8b9
    269  f8b9
    270  f8b9		       a9 ff		      lda	#-1
    271  f8bb		       85 91		      sta	TB_CHAR	; pre-set box takeback to NONE
    272  f8bd							;sta BufferedJoystick
    273  f8bd
    274  f8bd		       20 37 f9 	      jsr	MovePlayer
    275  f8c0
    276  f8c0		       a5 a1	   DoNothing  lda	ManMode
    277  f8c2		       c9 07		      cmp	#MANMODE_NEXTLEVEL	; kludge
    278  f8c4		       b0 08		      bcs	notComplete
    279  f8c6		       a5 b5		      lda	BCD_targetsRequired
    280  f8c8		       d0 04		      bne	notComplete
    281  f8ca		       a9 07		      lda	#MANMODE_NEXTLEVEL
    282  f8cc		       85 a1		      sta	ManMode
    283  f8ce				   notComplete
    284  f8ce
    285  f8ce		       a9 03		      lda	#BANK_TrackPlayer	;
    286  f8d0		       85 3f		      sta	SET_BANK	;
    287  f8d2		       20 e1 f2 	      jsr	TrackPlayer	;11+145
    288  f8d5
    289  f8d5		       a9 00		      lda	#TYPE_MAN	; 2
    290  f8d7		       85 8b		      sta	POS_Type	; 3
    291  f8d9
    292  f8d9		       20 07 f9 	      jsr	InsertObjectStack	; 6+76(B)	    re-insert man (POS X/Y DOESN'T MATTER)
    293  f8dc
    294  f8dc		       a9 ff		      lda	#$FF
    295  f8de		       85 92		      sta	BufferedJoystick
    296  f8e0
    297  f8e0		       4c fc f8    gnobj      jmp	NextObject
    298  f8e3
    299  f8e3							;---------------------------------------------------------------------------
    300  f8e3
      0  f8e3					      DEFINE_SUBROUTINE	PutCharacterAtXY
      1  f8e3		       00 1f	   BANK_PutCharacterAtXY =	_CURRENT_BANK
      2  f8e3					      SUBROUTINE
      3  f8e3				   PutCharacterAtXY
    302  f8e3
    303  f8e3							; POS_X	 character location
    304  f8e3							; POS_Y
    305  f8e3							; POS_VAR	 character to put on board
    306  f8e3							; ROM_Bank	 ROM bank to return to
    307  f8e3
    308  f8e3		       a4 88		      ldy	POS_Y
    309  f8e5
    310  f8e5		       a9 11		      lda	#BANK_GetBoardAddressW
    311  f8e7		       85 3f		      sta	SET_BANK
    312  f8e9		       20 cc f0 	      jsr	GetBoardAddressW
    313  f8ec		       86 3e		      stx	SET_BANK_RAM
    314  f8ee
    315  f8ee		       a4 87		      ldy	POS_X
    316  f8f0		       a5 8c		      lda	POS_VAR
    317  f8f2		       91 bd		      sta	(Board_AddressW),y
    318  f8f4
    319  f8f4		       a5 bf		      lda	ROM_Bank
    320  f8f6		       85 3f		      sta	SET_BANK
    321  f8f8		       60		      rts
    322  f8f9
    323  f8f9							;---------------------------------------------------------------------------
    324  f8f9
    325  f8f9							; IF the creature runs out of time to do stuff, then rts HOWEVER the creature must eventually do something
    326  f8f9							;  as it will be continually called in available time-slices until it does. This can lockup the system.
    327  f8f9
    328  f8f9							; if the creature is done, and is alive next cycle, then jump ReInsertObject
    329  f8f9
    330  f8f9							; if the creature dies then jump NextObject
    331  f8f9
    332  f8f9
    333  f8f9		       20 07 f9    ReInsertObject jsr	InsertObjectStack	; 6+76(B)  = 98 (if jumping here)	  place on stack so it keeps moving
    334  f8fc
    335  f8fc		       e6 c3	   NextObject inc	ObjIterator	; 5
    336  f8fe							;		  dec ObjStackPtr,x		  ; 6
    337  f8fe		       60		      rts		;jmp ProcessObjStack		  ; 3 = 16	 ; DON'T chain, instead return
    338  f8ff							; let the segtime stuff do its job!
    339  f8ff
    340  f8ff							;---------------------------------------------------------------------------
    341  f8ff
      0  f8ff					      DEFINE_SUBROUTINE	InsertObjectStackFromRAM	;=94(B)
      1  f8ff		       00 1f	   BANK_InsertObjectStackFromRAM =	_CURRENT_BANK
      2  f8ff					      SUBROUTINE
      3  f8ff				   InsertObjectStackFromRAM
    343  f8ff
    344  f8ff		       20 07 f9 	      jsr	InsertObjectStack	;6+76(B)
    345  f902		       a5 c0		      lda	RAM_Bank	;3
    346  f904		       85 3e		      sta	SET_BANK_RAM	;3
    347  f906
    348  f906		       60	   NotEnoughTime rts		;6
    349  f907
    350  f907							;---------------------------------------------------------------------------
    351  f907
      0  f907					      DEFINE_SUBROUTINE	InsertObjectStack	;=81(B)
      1  f907		       00 1f	   BANK_InsertObjectStack =	_CURRENT_BANK
      2  f907					      SUBROUTINE
      3  f907				   InsertObjectStack
    353  f907							; POS_X     x position
    354  f907							; POS_Y     y position
    355  f907							; POS_VAR   direction or other variable
    356  f907							; POS_Type  type of object
    357  f907
    358  f907		       a6 82		      ldx	ObjStackNum	; 3
    359  f909		       bc 35 f9 	      ldy	BankObjStack,x	; 4
    360  f90c		       84 3e		      sty	SET_BANK_RAM	; 3
    361  f90e		       b4 83		      ldy	ObjStackPtr,x	; 4 = 14
    362  f910
    363  f910
    364  f910		       a5 88		      lda	POS_Y	; 3
    365  f912		       99 80 14 	      sta	ObjStackY+RAM_WRITE,y	; 5
    366  f915		       a5 87		      lda	POS_X	; 3
    367  f917		       99 00 14 	      sta	ObjStackX+RAM_WRITE,y	; 5
    368  f91a		       a5 8c		      lda	POS_VAR	; 3
    369  f91c		       99 00 15 	      sta	ObjStackVar+RAM_WRITE,y	; 5
    370  f91f		       a5 8b		      lda	POS_Type	; 3
    371  f921		       99 00 16 	      sta	ObjStackType+RAM_WRITE,y	; 5 = 32
    372  f924
    373  f924							; Nice addition limits overflow of the stack, BUT always reserves a spot for the man.
    374  f924							; Objects are unceremoniously dumped when there's not enough space.  This is just trying to cater
    375  f924							; for a no-win situation. Try and preserve the player at the cost of correct gameplay. Avoid crashing.
    376  f924
    377  f924
    378  f924				  -	      IF	TYPE_MAN != 0
    379  f924				  -	      cmp	#TYPE_MAN	; 2
    380  f924					      ENDIF
    381  f924		       f0 04		      beq	alwaysAllowMan	; 2/3
    382  f926
    383  f926		       c0 7e		      cpy	#OBJ_STACK_SIZE-2	; 2	     reserve 1 last-gasp slot for man only
    384  f928		       b0 06		      bcs	insertDone	; 2/3= 6    no room -- drop object
    385  f92a				   alwaysAllowMan
    386  f92a
    387  f92a		       98		      tya		; 2
    388  f92b		       99 80 15 	      sta	SortedObjPtr+RAM_WRITE,y	; 5	     indirection pointer for later sorting
    389  f92e
    390  f92e		       f6 83		      inc	ObjStackPtr,x	; 7	     overflow is assumed not to happen!
    391  f930
    392  f930		       a4 bf	   insertDone ldy	ROM_Bank	; 3
    393  f932		       84 3f		      sty	SET_BANK	; 3
    394  f934
    395  f934				   ManIsDead2
    396  f934
    397  f934
    398  f934
    399  f934		       60		      rts		; 6 = 29
    400  f935
    401  f935							;---------------------------------------------------------------------------
    402  f935
    403  f935		       0b 0c	   BankObjStack .byte.b	BANK_OBJSTACK, BANK_OBJSTACK2
    404  f937
    405  f937							;---------------------------------------------------------------------------
    406  f937
      0  f937					      DEFINE_SUBROUTINE	MovePlayer
      1  f937		       00 1f	   BANK_MovePlayer =	_CURRENT_BANK
      2  f937					      SUBROUTINE
      3  f937				   MovePlayer
    408  f937
    409  f937		       a4 8a		      ldy	POS_Y_NEW
    410  f939
    411  f939		       a9 11		      lda	#BANK_GetBoardAddressRW	;2
    412  f93b		       85 3f		      sta	SET_BANK	;3
    413  f93d		       20 ac f0 	      jsr	GetBoardAddressRW	;6+32[-2]
    414  f940							;    IF MULTI_BANK_BOARD = YES
    415  f940							;		  stx RAM_Bank
    416  f940							;    ENDIF
    417  f940		       86 3e		      stx	SET_BANK_RAM	; 3
    418  f942
    419  f942		       a4 89		      ldy	POS_X_NEW
    420  f944		       b3 bb		      lax	(Board_AddressR),y
    421  f946
    422  f946		       a9 11		      lda	#BANK_MoveVecLO
    423  f948		       85 3f		      sta	SET_BANK
    424  f94a
    425  f94a		       bd 96 f3 	      lda	MoveVecLO,x
    426  f94d		       85 da		      sta	MAN_Move
    427  f94f		       bd a4 f3 	      lda	MoveVecHI,x
    428  f952		       85 db		      sta	MAN_Move+1
    429  f954
    430  f954							;    IF MULTI_BANK_BOARD = YES
    431  f954							;		  lda RAM_Bank
    432  f954							;    ELSE
    433  f954		       a9 0d		      lda	#BANK_BOARD
    434  f956							;    ENDIF
    435  f956		       85 3e		      sta	SET_BANK_RAM
    436  f958		       6c da 00 	      jmp	(MAN_Move)
    437  f95b
    438  f95b							;---------------------------------------------------------------------------
    439  f95b
      0  f95b					      DEFINE_SUBROUTINE	RecordTakeBackPosition
      1  f95b		       00 1f	   BANK_RecordTakeBackPosition =	_CURRENT_BANK
      2  f95b					      SUBROUTINE
      3  f95b				   RecordTakeBackPosition
    441  f95b
    442  f95b							; Pass...
    443  f95b							; TB_X 	 the man's position before he moved
    444  f95b							; TB_Y
    445  f95b							; TB_CHAR	 if -1 then there is no box push involved, else..
    446  f95b							;		 holds the character that was under the box in its new position
    447  f95b							; TB_PUSHX	 Position of pushed box AFTER it is pushed
    448  f95b							; TB_PUSHY
    449  f95b
    450  f95b							; On making a move,
    451  f95b							; man's position before move --> TB_X,TB_Y
    452  f95b							; TB_CHAR = -1
    453  f95b							; IF a box was pushed,
    454  f95b							;   TB_CHAR = character under the box's new position (i.e., restoration char)
    455  f95b							;   box's new position --> TB_PUSHX, TB_PUSHY
    456  f95b							; ENDIF
    457  f95b							; BCD_moveCounter++
    458  f95b
    459  f95b		       a5 ba		      lda	TakebackInhibit
    460  f95d		       d0 2e		      bne	noLog
    461  f95f
    462  f95f		       a9 0e		      lda	#BANK_TAKEBACK
    463  f961		       85 3e		      sta	SET_BANK_RAM
    464  f963
    465  f963		       a6 b8		      ldx	takebackIndex
    466  f965
    467  f965		       a5 8d		      lda	TB_X
    468  f967		       9d 00 14 	      sta	RAM_WRITE+TakeBackPreviousX,x
    469  f96a		       a5 8e		      lda	TB_Y
    470  f96c		       9d 40 14 	      sta	RAM_WRITE+TakeBackPreviousY,x
    471  f96f		       a5 91		      lda	TB_CHAR
    472  f971		       9d 00 15 	      sta	RAM_WRITE+TakeBackPushChar,x
    473  f974
    474  f974							; if TB_CHAR is -1 that means there is no box component, and the following values are random
    475  f974
    476  f974		       a5 8f		      lda	TB_PUSHX
    477  f976		       9d 80 14 	      sta	RAM_WRITE+TakeBackPushX,x
    478  f979		       a5 90		      lda	TB_PUSHY
    479  f97b		       9d c0 14 	      sta	RAM_WRITE+TakeBackPushY,x
    480  f97e
    481  f97e		       a5 bf		      lda	ROM_Bank
    482  f980		       85 3f		      sta	SET_BANK
    483  f982
    484  f982							; fall through
    485  f982
      0  f982					      DEFINE_SUBROUTINE	IncrementMoveCount
      1  f982		       00 1f	   BANK_IncrementMoveCount =	_CURRENT_BANK
      2  f982					      SUBROUTINE
      3  f982				   IncrementMoveCount
    487  f982		       a9 11		      lda	#BANK_IMC
    488  f984		       85 3f		      sta	SET_BANK
    489  f986		       20 64 f3 	      jsr	IMC
    490  f989		       a5 bf		      lda	ROM_Bank
    491  f98b		       85 3f		      sta	SET_BANK
    492  f98d
    493  f98d		       a9 00	   noLog      lda	#0
    494  f98f		       85 ba		      sta	TakebackInhibit
    495  f991		       60		      rts
    496  f992
    497  f992							;---------------------------------------------------------------------------
    498  f992
      0  f992					      DEFINE_SUBROUTINE	MOVE_BLANK
      1  f992		       00 1f	   BANK_MOVE_BLANK =	_CURRENT_BANK
      2  f992					      SUBROUTINE
      3  f992				   MOVE_BLANK
      0  f992					      DEFINE_SUBROUTINE	MOVE_SOIL
      1  f992		       00 1f	   BANK_MOVE_SOIL =	_CURRENT_BANK
      2  f992					      SUBROUTINE
      3  f992				   MOVE_SOIL
      0  f992					      DEFINE_SUBROUTINE	MOVE_TARGET
      1  f992		       00 1f	   BANK_MOVE_TARGET =	_CURRENT_BANK
      2  f992					      SUBROUTINE
      3  f992				   MOVE_TARGET
    502  f992
    503  f992		       8a		      txa		; character man will be standing on
    504  f993		       48		      pha
    505  f994
    506  f994		       a9 ff		      lda	#$FF
    507  f996		       85 92		      sta	BufferedJoystick
    508  f998
    509  f998
    510  f998		       a5 a6		      lda	ManAnimationID
    511  f99a		       c9 08		      cmp	#ANIMATION_PUSH_ID
    512  f99c		       d0 0c		      bne	immediate
    513  f99e
    514  f99e		       e6 a8		      inc	idleCount
    515  f9a0		       a5 a8		      lda	idleCount
    516  f9a2		       c9 0a		      cmp	#10
    517  f9a4		       90 22		      bcc	walkingOK
    518  f9a6		       a9 00		      lda	#0
    519  f9a8		       85 a8		      sta	idleCount
    520  f9aa
    521  f9aa				   immediate
    522  f9aa		       a5 a6		      lda	ManAnimationID
    523  f9ac		       c9 00		      cmp	#ANIMATION_WALK_ID
    524  f9ae		       f0 18		      beq	walkingOK
    525  f9b0		       c9 0c		      cmp	#ANIMATION_WALK2_ID
    526  f9b2		       f0 14		      beq	walkingOK
    527  f9b4		       a9 00		      lda	#ANIMATION_WALK_ID
    528  f9b6		       85 a6		      sta	ManAnimationID
      0  f9b8					      LOAD_ANIMATION	WALK
      1  f9b8		       a9 12		      lda	#<Animation_WALK
      2  f9ba		       85 9a		      sta	animation
      3  f9bc		       a9 f0		      lda	#>Animation_WALK
      4  f9be		       85 9b		      sta	animation+1
      5  f9c0		       a9 00		      lda	#0
      6  f9c2		       85 9c		      sta	animation_delay
      7  f9c4		       a9 00		      lda	#ANIMATION_WALK_ID
      8  f9c6		       85 a6		      sta	ManAnimationID
    530  f9c8				   walkingOK
    531  f9c8
    532  f9c8		       a5 9d		      lda	ManX
    533  f9ca		       85 87		      sta	POS_X
    534  f9cc		       85 8d		      sta	TB_X
    535  f9ce		       a5 9e		      lda	ManY
    536  f9d0		       85 88		      sta	POS_Y
    537  f9d2		       85 8e		      sta	TB_Y
    538  f9d4		       20 e3 f8 	      jsr	PutCharacterAtXY	; RESTORE (previous XY) under-man character
    539  f9d7
    540  f9d7		       a5 89		      lda	POS_X_NEW
    541  f9d9		       85 9d		      sta	ManX
    542  f9db		       85 87		      sta	POS_X
    543  f9dd		       a5 8a		      lda	POS_Y_NEW
    544  f9df		       85 9e		      sta	ManY
    545  f9e1		       85 88		      sta	POS_Y
    546  f9e3		       a9 05		      lda	#CHARACTER_MANOCCUPIED
    547  f9e5		       85 8c		      sta	POS_VAR
    548  f9e7		       20 e3 f8 	      jsr	PutCharacterAtXY
    549  f9ea
    550  f9ea							; TB_X 	 the man's position before he moved
    551  f9ea							; TB_Y
    552  f9ea							; TB_CHAR	 if -1 then there is no box push involved, else..
    553  f9ea							;		 holds the character that was under the box in its new position
    554  f9ea							;		 this can be inferred by the box character (ONTARGET)
    555  f9ea							; TB_PUSHX	 Position of pushed box AFTER it is pushed
    556  f9ea							; TB_PUSHY
    557  f9ea
    558  f9ea		       20 5b f9 	      jsr	RecordTakeBackPosition
    559  f9ed
    560  f9ed		       68		      pla
    561  f9ee		       85 8c		      sta	POS_VAR	; save 'restore' character
    562  f9f0
    563  f9f0		       a9 00	   MOVE_GENERIC lda	#0	; 2
    564  f9f2		       85 a4		      sta	ManPushCounter	; 3
    565  f9f4		       60		      rts		; 6 = 11
    566  f9f5
    567  f9f5							;---------------------------------------------------------------------------
    568  f9f5							; takeback buffer empty - flash red
    569  f9f5
    570  f9f5		       a6 80	   noMovesToTake ldx	Platform
    571  f9f7		       bd 01 fa 	      lda	redColour,x
    572  f9fa		       85 b1		      sta	BGColour
    573  f9fc		       a9 08		      lda	#8
    574  f9fe		       85 c1		      sta	ColourTimer
    575  fa00		       60		      rts
    576  fa01
    577  fa01		       32 32 62 62 redColour  .byte.b	$32, $32, $62, $62
    578  fa05
    579  fa05							;---------------------------------------------------------------------------
    580  fa05
      0  fa05					      DEFINE_SUBROUTINE	MOVE_BOX
      1  fa05		       00 1f	   BANK_MOVE_BOX =	_CURRENT_BANK
      2  fa05					      SUBROUTINE
      3  fa05				   MOVE_BOX
    582  fa05
    583  fa05		       a2 00		      ldx	#CHARACTER_BLANK	; restoration character
    584  fa07		       a9 11		      lda	#BANK_PushBox
    585  fa09		       85 3f		      sta	SET_BANK
    586  fa0b		       4c dc f0 	      jmp	PushBox
    587  fa0e
      0  fa0e					      DEFINE_SUBROUTINE	MOVE_BOX_ON_TARGET
      1  fa0e		       00 1f	   BANK_MOVE_BOX_ON_TARGET =	_CURRENT_BANK
      2  fa0e					      SUBROUTINE
      3  fa0e				   MOVE_BOX_ON_TARGET
    589  fa0e
    590  fa0e		       a2 03		      ldx	#CHARACTER_TARGET	; restoration character
    591  fa10		       a9 11		      lda	#BANK_PushBox
    592  fa12		       85 3f		      sta	SET_BANK
    593  fa14		       4c dc f0 	      jmp	PushBox
    594  fa17
    595  fa17							;---------------------------------------------------------------------------
    596  fa17
      0  fa17					      DEFINE_SUBROUTINE	takebackRestoreEarlierPosition
      1  fa17		       00 1f	   BANK_takebackRestoreEarlierPosition =	_CURRENT_BANK
      2  fa17					      SUBROUTINE
      3  fa17				   takebackRestoreEarlierPosition
    598  fa17
    599  fa17		       e6 ba		      inc	TakebackInhibit	; non-zero
    600  fa19
    601  fa19							; on reverting a move
    602  fa19							; IF BCD_moveCounter > 0
    603  fa19							;   BCD_moveCounter--
    604  fa19							;   IF TakeBackPushChar != -1
    605  fa19							;	 //restore the character under box (and remove box)
    606  fa19							;	 board[TakeBackPreviousX,TakeBackPreviousY] = TakeBackPushChar
    607  fa19							;   ENDIF
    608  fa19							; // We will "fix" any box going back on the board through the man's restoration char
    609  fa19							; board[ManX,ManY] = POS_VAR
    610  fa19							; POS_VAR = board[TakeBackX,TakeBackY]
    611  fa19							; board[TakeBackX,TakeBackY] = MANOCCUPIED
    612  fa19							; ManX,ManY = TakeBackX, TakeBackY
    613  fa19
    614  fa19		       a6 b8		      ldx	takebackIndex
    615  fa1b		       e4 b9		      cpx	takebackBaseIndex
    616  fa1d		       f0 d6		      beq	noMovesToTake
    617  fa1f
    618  fa1f		       ca		      dex
    619  fa20		       8a		      txa
    620  fa21		       29 3f		      and	#TAKEBACK_MASK
    621  fa23		       85 b8		      sta	takebackIndex
    622  fa25		       aa		      tax
    623  fa26
    624  fa26		       f8		      sed
    625  fa27		       38		      sec
    626  fa28		       a5 b6		      lda	BCD_moveCounter
    627  fa2a		       e9 01		      sbc	#1
    628  fa2c		       85 b6		      sta	BCD_moveCounter
    629  fa2e		       a5 b7		      lda	BCD_moveCounter+1
    630  fa30		       e9 00		      sbc	#0
    631  fa32		       85 b7		      sta	BCD_moveCounter+1
    632  fa34		       d8		      cld
    633  fa35
    634  fa35				  -	      if	0
    635  fa35				  -	      lda	Platform
    636  fa35				  -	      clc
    637  fa35				  -	      adc	#8
    638  fa35				  -	      sta	BGColour	;ColourFlash		      ; yellow flash
    639  fa35				  -	      lda	#3
    640  fa35				  -	      sta	ColourTimer
    641  fa35					      endif
    642  fa35
    643  fa35		       a9 0e		      lda	#BANK_TAKEBACK
    644  fa37		       85 3e		      sta	SET_BANK_RAM
    645  fa39
    646  fa39							; TB_X 	 the man's position before he moved
    647  fa39							; TB_Y
    648  fa39							; TB_CHAR	 if -1 then there is no box push involved, else..
    649  fa39							;		 holds the character that was under the box in its new position
    650  fa39							; TB_PUSHX	 Position of pushed box AFTER it is pushed
    651  fa39							; TB_PUSHY
    652  fa39
    653  fa39							;	 //restore the character under box (and remove box)
    654  fa39							;	 board[TakeBackPreviousX,TakeBackPreviousY] = TakeBackPushChar
    655  fa39
    656  fa39		       a5 8c		      lda	POS_VAR
    657  fa3b		       48		      pha
    658  fa3c
    659  fa3c		       a6 b8		      ldx	takebackIndex
    660  fa3e		       bd 00 11 	      lda	TakeBackPushChar,x
    661  fa41		       30 29		      bmi	noPushInvolved	; -1 = no box
    662  fa43
    663  fa43		       85 8c		      sta	POS_VAR
    664  fa45		       c9 03		      cmp	#CHARACTER_TARGET
    665  fa47		       f0 04		      beq	isaTarget
    666  fa49		       c9 04		      cmp	#CHARACTER_TARGET2
    667  fa4b		       d0 03		      bne	notTarget1
    668  fa4d		       20 37 fd    isaTarget  jsr	RegisterTarget
    669  fa50				   notTarget1
    670  fa50
    671  fa50
    672  fa50		       bd 80 10 	      lda	TakeBackPushX,x
    673  fa53		       85 87		      sta	POS_X
    674  fa55		       bd c0 10 	      lda	TakeBackPushY,x
    675  fa58		       85 88		      sta	POS_Y
    676  fa5a
    677  fa5a		       20 e3 f8 	      jsr	PutCharacterAtXY	; fixup BOX!
    678  fa5d
    679  fa5d		       68		      pla
    680  fa5e		       f0 07		      beq	blnkre
    681  fa60		       20 41 fd 	      jsr	DeRegisterTarget
    682  fa63		       a9 08		      lda	#CHARACTER_BOX_ON_TARGET
    683  fa65		       d0 02		      bne	skls
    684  fa67		       a9 02	   blnkre     lda	#CHARACTER_BOX
    685  fa69		       85 8c	   skls       sta	POS_VAR
    686  fa6b
    687  fa6b		       48		      pha
    688  fa6c
    689  fa6c		       68	   noPushInvolved pla		; man's replacement char
    690  fa6d		       85 8c		      sta	POS_VAR
    691  fa6f
    692  fa6f							; // We will "fix" any box going back on the board through the man's restoration char
    693  fa6f							; board[ManX,ManY] = POS_VAR
    694  fa6f							; POS_VAR = board[TakeBackX,TakeBackY]
    695  fa6f							; board[TakeBackX,TakeBackY] = MANOCCUPIED
    696  fa6f							; ManX,ManY = TakeBackX, TakeBackY
    697  fa6f
    698  fa6f		       a5 9d		      lda	ManX
    699  fa71		       85 87		      sta	POS_X
    700  fa73		       a5 9e		      lda	ManY
    701  fa75		       85 88		      sta	POS_Y
    702  fa77		       20 e3 f8 	      jsr	PutCharacterAtXY	; put what man was on... back
    703  fa7a
    704  fa7a
    705  fa7a		       a9 0e		      lda	#BANK_TAKEBACK
    706  fa7c		       85 3e		      sta	SET_BANK_RAM
    707  fa7e
    708  fa7e		       a6 b8		      ldx	takebackIndex
    709  fa80		       bd 00 10 	      lda	TakeBackPreviousX,x
    710  fa83		       85 89		      sta	POS_X_NEW
    711  fa85		       85 9d		      sta	ManX
    712  fa87		       bd 40 10 	      lda	TakeBackPreviousY,x
    713  fa8a		       85 8a		      sta	POS_Y_NEW
    714  fa8c		       85 9e		      sta	ManY
    715  fa8e
    716  fa8e							; Grab the character from the board at man's location and use as "restore character" for man
    717  fa8e							; POS_VAR = board[takebackx,takebacky]
    718  fa8e
    719  fa8e		       a9 11		      lda	#BANK_GetBoardAddressR
    720  fa90		       85 3f		      sta	SET_BANK
    721  fa92		       a4 8a		      ldy	POS_Y_NEW
    722  fa94		       20 bf f0 	      jsr	GetBoardAddressR
    723  fa97		       85 3e		      sta	SET_BANK_RAM
    724  fa99
    725  fa99		       a4 89		      ldy	POS_X_NEW
    726  fa9b		       b1 bb		      lda	(Board_AddressR),y
    727  fa9d							;pha
    728  fa9d							;lda #CHARACTER_MANOCCUPIED
    729  fa9d							;sta POS_VAR
    730  fa9d							;jsr PutCharacterAtXY		 ????
    731  fa9d							;pla
    732  fa9d		       85 8c		      sta	POS_VAR
    733  fa9f
    734  fa9f		       a5 bf		      lda	ROM_Bank
    735  faa1		       85 3f		      sta	SET_BANK
    736  faa3
    737  faa3		       60	   timeExit   rts
    738  faa4
    739  faa4							;---------------------------------------------------------------------------
    740  faa4
      0  faa4					      DEFINE_SUBROUTINE	StealCharDraw	; in FIXED_BANK
      1  faa4		       00 1f	   BANK_StealCharDraw =	_CURRENT_BANK
      2  faa4					      SUBROUTINE
      3  faa4				   StealCharDraw
    742  faa4
    743  faa4		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
    744  faa6		       85 3e		      sta	SET_BANK_RAM	; 3
    745  faa8		       a4 81		      ldy	DrawStackPointer	; 3	     MUST have been set by BuildDrawStack!
    746  faaa		       10 35		      bpl	EnterStealCharDraw	; 2(3) = 10(11)
    747  faac
    748  faac				   ExitStealCharDraw
    749  faac
    750  faac							; fall through...
    751  faac
    752  faac							;---------------------------------------------------------------------------
    753  faac
      0  faac					      DEFINE_SUBROUTINE	TimeSlice
      1  faac		       00 1f	   BANK_TimeSlice =	_CURRENT_BANK
      2  faac					      SUBROUTINE
      3  faac				   TimeSlice
    755  faac
    756  faac							; FIRST check the time is sufficient for the smallest of the timeslices. Not much point
    757  faac							; going ahead if there's insufficient time. This allows the previous character drawing to
    758  faac							; be much smaller in time, as they don't have to include the timeslice code overhead.
    759  faac
    760  faac		       ad 84 02 	      lda	INTIM	; 4
    761  faaf		       c9 03		      cmp	#SEGTIME_MINIMUM_TIMESLICE	; 2
    762  fab1		       90 f0		      bcc	timeExit	; 2(3)
    763  fab3							; @0✅
    764  fab3
    765  fab3							; Uses the phase variable to vector to the correct processing code for the given timeslice
    766  fab3							; Code may be in any bank. Avoid the fixed bank at all costs!	Once a section is complete
    767  fab3							; it should increment ScreenDrawPhase.
    768  fab3
    769  fab3							; Switched-in bank(s) are undefined after this function is called!
    770  fab3
    771  fab3		       a9 03		      lda	#BANK_TS_PhaseVectorLO	; 2
    772  fab5		       85 3f		      sta	SET_BANK	; 3 = 5
    773  fab7
    774  fab7		       a6 86		      ldx	ScreenDrawPhase	; 3		 current phase of drawing
    775  fab9		       bd 1c f3 	      lda	TS_PhaseVectorLO,x	; 4
    776  fabc		       85 da		      sta	TS_Vector	; 3
    777  fabe		       bd 21 f3 	      lda	TS_PhaseVectorHI,x	; 4
    778  fac1		       85 db		      sta	TS_Vector+1	; 3 = 17
    779  fac3
    780  fac3		       bd 26 f3 	      lda	TS_PhaseBank,x	; 4
    781  fac6		       85 3f		      sta	SET_BANK	; 3 = 7	 switch bank
    782  fac8
    783  fac8		       6c da 00 	      jmp	(TS_Vector)	; 5 = 31✅	  vector to timeslice handler
    784  facb
    785  facb							;---------------------------------------------------------------------------
    786  facb
    787  facb
    788  facb				   DrawAnother		;344✅SCD_QUICK
    789  facb							;676✅SCD_SLOW
    790  facb
    791  facb
    792  facb							; add 44✅ cycles for the following in the case where there is something to draw
    793  facb							; but no time to do it. As this is executed after EVERY type of draw, then this
    794  facb							; is the base "extra" cost to add to each draw
    795  facb
    796  facb		       00 35	   CYCLES_DRAWANOTHER =	53	;✅
    797  facb
    798  facb		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2	     A = SCREEN_LINES
    799  facd		       85 3e		      sta	SET_BANK_RAM	; 3 =	5
    800  facf
    801  facf		       a4 81		      ldy	DrawStackPointer	; 3 =	3    MUST have been set by BuildDrawStack!
    802  fad1
    803  fad1		       be 00 f0 	      ldx	DrawStack,y	; 4	     in actuality a character index
    804  fad4		       bd a0 f0 	      lda	ScreenBuffer,x	; 4	     new character to draw
    805  fad7		       29 7f		      and	#~128	; 2
    806  fad9		       9d a0 f4 	      sta	ScreenBuffer+RAM_WRITE,x	; 4 = 14    clear hint bit
    807  fadc
    808  fadc		       88		      dey		; 2
    809  fadd		       84 81		      sty	DrawStackPointer	; 3	     one less to draw
    810  fadf		       30 cb		      bmi	ExitStealCharDraw	; 2(3)=7    NOTE1: (3)+(15exit) -->45✅ <CYCLES_DRAWANOTHER)
    811  fae1							; => 29
    812  fae1
    813  fae1				   EnterStealCharDraw		; @11✅ from initial StealCharDraw call
    814  fae1							; RAM bank MUST be at BANK_DRAW_BUFFERS
    815  fae1
    816  fae1		       ad 84 02 	      lda	INTIM	; 4
    817  fae4		       c9 04		      cmp	#SEGTIME_SCD_MIN	; 2
    818  fae6		       90 c4		      bcc	ExitStealCharDraw	; 2(3) = 8    ((9)+(15exit) IF EXITING HERE, from DrawAnother... 53✅)
    819  fae8							;		else exit from StealCharDraw ... 26✅
    820  fae8							; @0✅
    821  fae8
    822  fae8		       be 00 f0 	      ldx	DrawStack,y	; 4	     in actuality a character index
    823  faeb		       bc a0 f0 	      ldy	ScreenBuffer,x	; 4 =	8✅  new character to draw
    824  faee
    825  faee		       bd 00 f2 	      lda	ROW_BankChar,x	; 4	     A = 0..SCREEN_LINES-1
    826  faf1		       85 3e		      sta	SET_BANK_RAM	; 3
    827  faf3		       4c 29 f1 	      jmp	StealPart3	; 3 = 10✅  --> 18✅ cycles after check for SEGTIME_SCD_MIN
    828  faf6
    829  faf6							;---------------------------------------------------------------------------
    830  faf6
    831  faf6
      0  faf6					      DEFINE_SUBROUTINE	writePlayerFrame
      1  faf6		       00 1f	   BANK_writePlayerFrame =	_CURRENT_BANK
      2  faf6					      SUBROUTINE
      3  faf6				   writePlayerFrame
    833  faf6
    834  faf6		       a5 80		      lda	Platform
    835  faf8		       29 02		      and	#%10
    836  fafa		       0a		      asl
    837  fafb		       0a		      asl
    838  fafc		       65 c5		      adc	ethnic
    839  fafe		       85 df		      sta	ethnicity
    840  fb00
    841  fb00
    842  fb00							; todo - compare with last + frame and skip if same
    843  fb00
    844  fb00		       a9 0e		      lda	#PLAYER_FRAMES
    845  fb02		       85 3f		      sta	SET_BANK
    846  fb04
    847  fb04		       a5 9c		      lda	animation_delay
    848  fb06		       f0 0f		      beq	getDelay	; FIRST usage
    849  fb08		       c6 9c		      dec	animation_delay
    850  fb0a		       d0 11		      bne	nextAnimation2	; just get shape
    851  fb0c
    852  fb0c		       18	   nextAptr   clc
    853  fb0d		       a5 9a		      lda	animation
    854  fb0f		       69 02		      adc	#2
    855  fb11		       85 9a		      sta	animation
    856  fb13		       90 02		      bcc	ahiok
    857  fb15		       e6 9b		      inc	animation+1
    858  fb17				   ahiok
    859  fb17		       a0 01	   getDelay   ldy	#1
    860  fb19		       b1 9a		      lda	(animation),y
    861  fb1b		       85 9c		      sta	animation_delay
    862  fb1d		       a0 00	   nextAnimation2 ldy	#0
    863  fb1f		       b1 9a		      lda	(animation),y
    864  fb21		       c9 ff		      cmp	#JUMP
    865  fb23		       f0 0d		      beq	aJump
    866  fb25		       c9 fe		      cmp	#FLIP
    867  fb27		       d0 18		      bne	notFlip
    868  fb29
    869  fb29		       a5 a2		      lda	ManLastDirection
    870  fb2b		       49 08		      eor	#%1000
    871  fb2d		       85 a2		      sta	ManLastDirection
    872  fb2f		       4c 0c fb 	      jmp	nextAptr
    873  fb32
    874  fb32							; it's a jump
    875  fb32		       a4 9c	   aJump      ldy	animation_delay	; actually animation ID :)
    876  fb34		       b9 00 f0 	      lda	ANIM_TABLE,y
    877  fb37		       85 9a		      sta	animation
    878  fb39		       b9 01 f0 	      lda	ANIM_TABLE+1,y
    879  fb3c		       85 9b		      sta	animation+1
    880  fb3e		       4c 17 fb 	      jmp	getDelay
    881  fb41
    882  fb41		       a8	   notFlip    tay
    883  fb42
    884  fb42		       a5 a0		      lda	ManDrawY
    885  fb44		       30 44		      bmi	SkipFrameCopy
    886  fb46		       85 de		      sta	bank	; character line (and hence bank) of player position
    887  fb48		       85 3e		      sta	SET_BANK_RAM
    888  fb4a
    889  fb4a							; Now we have the frame #, we can see if that frame has already been drawn into
    890  fb4a							; the frame buffer of the relevant bank. If it has, then we don't need to repeat
    891  fb4a							; and can save the enormous cost of frame copying...
    892  fb4a
    893  fb4a		       cc 65 f3 	      cpy	ExistingFrame	; optimize - don't draw if same frame
    894  fb4d		       f0 3b		      beq	SkipFrameCopy
    895  fb4f		       8c 65 f7 	      sty	ExistingFrame + RAM_WRITE
    896  fb52
    897  fb52		       a9 0e		      lda	#PLAYER_FRAMES
    898  fb54		       85 3f		      sta	SET_BANK
    899  fb56		       b9 2c f5 	      lda	FRAME_PTR_LO,y
    900  fb59		       85 da		      sta	frame_ptr
    901  fb5b		       b9 43 f5 	      lda	FRAME_PTR_HI,y
    902  fb5e		       85 db		      sta	frame_ptr+1
    903  fb60
    904  fb60		       b9 5a f5 	      lda	COLOUR_PTR_LO,y
    905  fb63		       85 dc		      sta	colour_ptr
    906  fb65		       b9 71 f5 	      lda	COLOUR_PTR_HI,y
    907  fb68		       85 dd		      sta	colour_ptr+1
    908  fb6a
    909  fb6a
    910  fb6a
    911  fb6a		       a0 17		      ldy	#LINES_PER_CHAR-1
    912  fb6c		       18		      clc
    913  fb6d				   CopySpriteToBank		; 408
    914  fb6d
    915  fb6d							; The colours for the sprites are copied to the row bank's colour data. The frames contain
    916  fb6d							; colour *indexes*. These indexes are modified by the *base* which indicates both the
    917  fb6d							; system NTSC/PAL along with the "visual identity" (i.e., colour/race). That is used to
    918  fb6d							; lookup a colour conversion which FINALLY gives us the correct colour to use for the line.
    919  fb6d
    920  fb6d							; ethnicity * 16 + PALNTSC * 8
    921  fb6d
    922  fb6d		       a9 0e		      lda	#PLAYER_FRAMES
    923  fb6f		       85 3f		      sta	SET_BANK
    924  fb71
    925  fb71		       b1 dc		      lda	(colour_ptr),y
    926  fb73		       65 df		      adc	ethnicity	; colour base
    927  fb75		       aa		      tax
    928  fb76		       b1 da		      lda	(frame_ptr),y
    929  fb78		       48		      pha
    930  fb79		       a5 de		      lda	bank
    931  fb7b		       85 3e		      sta	SET_BANK_RAM
    932  fb7d		       bd a5 f2 	      lda	EthnicityColourPalette,x
    933  fb80		       99 4d f7 	      sta	PLAYER0_COLOUR+RAM_WRITE,y
    934  fb83		       68		      pla
    935  fb84		       99 35 f7 	      sta	PLAYER0_SHAPE+RAM_WRITE,y
    936  fb87		       88		      dey
    937  fb88		       10 e3		      bpl	CopySpriteToBank
    938  fb8a
    939  fb8a				   skipOffscreen
    940  fb8a		       60	   SkipFrameCopy rts
    941  fb8b
    942  fb8b							;---------------------------------------------------------------------------
    943  fb8b
    944  fb8b							;    DEFINE_SUBROUTINE DrawFullScreenMain ;=2484[-89]
    945  fb8b
    946  fb8b							; Check the screen for all those characters that need to be redrawn
    947  fb8b							; Just copies the mxn grid from the board to a DrawFlags array.  If the entry in
    948  fb8b							; the drawflags array is different to the ScreenBuffer array entry, then the
    949  fb8b							; screenbuffer will need redrawing.
    950  fb8b
    951  fb8b							; @59✅
    952  fb8b
    953  fb8b				   CopyRow2
    954  fb8b
    955  fb8b							;    IF MULTI_BANK_BOARD = YES
    956  fb8b							;		  lda BDF_BoardBank		  ; 3
    957  fb8b							;    ELSE
    958  fb8b		       a9 0d		      lda	#BANK_BOARD	; 2	 saves 5*8 = 40 cyles
    959  fb8d							;    ENDIF
    960  fb8d		       85 3e		      sta	SET_BANK_RAM	; 3
    961  fb8f		       b3 de		      lax	(BDF_BoardAddress),y	; 5
    962  fb91		       9a		      txs		; 2
    963  fb92		       b3 e0		      lax	(BDF_BoardAddress2),y	; 5 = 17✅
    964  fb94
    965  fb94		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
    966  fb96		       85 3e		      sta	SET_BANK_RAM	; 3
    967  fb98		       bd dc f1 	      lda	CharReplacement,x	; 4
    968  fb9b		       91 dc		      sta	(BDF_DrawFlagAddress2),y	; 6
    969  fb9d		       ba		      tsx		; 2
    970  fb9e		       bd dc f1 	      lda	CharReplacement,x	; 4
    971  fba1		       91 da		      sta	(BDF_DrawFlagAddress),y	; 6 = 27 @44✅
    972  fba3
    973  fba3		       88		      dey		; 2
    974  fba4		       10 e5		      bpl	CopyRow2	; 2/3 @48 (-1)
    975  fba6
      0  fba6					      CHECKPAGEX	CopyRow2, "CopyRow2 in BANK_FIXED"
      9  fba6					      LIST	ON
    977  fba6
    978  fba6							; cost = 5 (rows) x 48 - 1 = 239
    979  fba6							; @ (59) + 239 = @298✅
    980  fba6
    981  fba6		       a7 e3		      lax	DHS_Line	; 3
    982  fba8		       f0 07		      beq	.exitCopy	; 2/3= 5/6
    983  fbaa
    984  fbaa		       a0 11		      ldy	#BANK_DrawScreenRowPreparation	; 2
    985  fbac		       84 3f		      sty	SET_BANK	; 3
    986  fbae		       4c 16 f3 	      jmp	DrawScreenRowPreparation	; 3 = 8
    987  fbb1							; @298+8+5 = @311✅
    988  fbb1
    989  fbb1
    990  fbb1							; total: (244[-5]+5)*8 + 60[-7]*7 + 1 + 11 = 2424[-89]
    991  fbb1
    992  fbb1
      0  fbb1					      CHECKPAGEX	CopyRow2, "CopyRow2 in BANK_FIXED.asm"
      9  fbb1					      LIST	ON
    994  fbb1
    995  fbb1		       a6 e4	   .exitCopy  ldx	DHS_Stack	; 3
    996  fbb3		       9a		      txs		; 2
    997  fbb4
    998  fbb4							; fall through
    999  fbb4
      0  fbb4					      DEFINE_SUBROUTINE	BuildDrawStack	; @31✅
      1  fbb4		       00 1f	   BANK_BuildDrawStack =	_CURRENT_BANK
      2  fbb4					      SUBROUTINE
      3  fbb4				   BuildDrawStack
   1001  fbb4
   1002  fbb4		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
   1003  fbb6		       85 3e		      sta	SET_BANK_RAM	; 3
   1004  fbb8		       4c f1 f0 	      jmp	DrawStackUpdate	; 3
   1005  fbbb
   1006  fbbb							; => @39 at DrawStackUpdate
   1007  fbbb
   1008  fbbb							;---------------------------------------------------------------------------
   1009  fbbb
      0  fbbb					      DEFINE_SUBROUTINE	DrawAIntoStack	; @31✅
      1  fbbb		       00 1f	   BANK_DrawAIntoStack =	_CURRENT_BANK
      2  fbbb					      SUBROUTINE
      3  fbbb				   DrawAIntoStack
   1011  fbbb
   1012  fbbb		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
   1013  fbbd		       85 3e		      sta	SET_BANK_RAM	; 3
   1014  fbbf		       4c 29 f1 	      jmp	DrawIntoStack	; 3
   1015  fbc2
   1016  fbc2							; ==>39✅ @DrawIntoStack
   1017  fbc2
   1018  fbc2							;---------------------------------------------------------------------------
   1019  fbc2
   1020  fbc2
      0  fbc2					      DEFINE_SUBROUTINE	Reset
      1  fbc2		       00 1f	   BANK_Reset =	_CURRENT_BANK
      2  fbc2					      SUBROUTINE
      3  fbc2				   Reset
   1022  fbc2
      0  fbc2					      CLEAN_START
      1  fbc2		       78		      sei
      2  fbc3		       d8		      cld
      3  fbc4
      4  fbc4		       a2 00		      ldx	#0
      5  fbc6		       8a		      txa
      6  fbc7		       a8		      tay
      7  fbc8		       ca	   .CLEAR_STACK dex
      8  fbc9		       9a		      txs
      9  fbca		       48		      pha
     10  fbcb		       d0 fb		      bne	.CLEAR_STACK
     11  fbcd
   1024  fbcd
   1025  fbcd							;lda #2
   1026  fbcd							;sta VSYNC
   1027  fbcd							;lda #%01000010		  ; bit6 is not required
   1028  fbcd							;sta VBLANK			  ; end of screen - enter blanking
   1029  fbcd
   1030  fbcd							; Scoring bank is copied once (not per game, not per level...)
   1031  fbcd							; otherwise non-SaveKey high score gets zapped
   1032  fbcd
   1033  fbcd		       a2 02		      ldx	#ROM_SHADOW_OF_BANK_SCORING
   1034  fbcf		       a0 09		      ldy	#BANK_SCORING
   1035  fbd1		       20 2e fd 	      jsr	CopyROM2RAM_F000
   1036  fbd4
   1037  fbd4				   Restart		; go here on RESET + SELECT
   1038  fbd4
   1039  fbd4							; breakpoint was not hit/detected!!!
   1040  fbd4
      0  fbd4					      DEFINE_SUBROUTINE	Title
      1  fbd4		       00 1f	   BANK_Title =	_CURRENT_BANK
      2  fbd4					      SUBROUTINE
      3  fbd4				   Title
   1042  fbd4		       a2 ff		      ldx	#$ff	; adjust stack pointer after RESET + SELECT
   1043  fbd6		       9a		      txs
   1044  fbd7
   1045  fbd7							; temporary vars from title screen are used to init level
   1046  fbd7		       a9 03		      lda	#BANK_Cart_Init	; 2
   1047  fbd9		       85 3f		      sta	SET_BANK	; 3
   1048  fbdb		       20 fe f1 	      jsr	Cart_Init	; 6+x
   1049  fbde
   1050  fbde
   1051  fbde							;---------------------------------------------------------------------------
   1052  fbde
   1053  fbde
   1054  fbde		       f0 00	   SEGMENT_DECODE_LEVEL_SHADOW =	$F000	; if not = $F000, this will cause an assertion failure
   1055  fbde
   1056  fbde		       a2 03		      ldx	#BANK_DECODE_LEVEL_SHADOW
   1057  fbe0		       a0 0a		      ldy	#BANK_DECODE_LEVEL
   1058  fbe2		       20 2e fd 	      jsr	CopyROM2RAM_F000
   1059  fbe5
   1060  fbe5
   1061  fbe5							;---------------------------------------------------------------------------
   1062  fbe5							; Once-only game initialisation goes here...
   1063  fbe5							; now we have two players so things get a bit tricky
   1064  fbe5
   1065  fbe5		       a9 09		      lda	#BANK_SCORING
   1066  fbe7		       85 3e		      sta	SET_BANK_RAM
   1067  fbe9		       20 63 f3 	      jsr	GameInitialise
   1068  fbec
   1069  fbec
   1070  fbec							;---------------------------------------------------------------------------
   1071  fbec
------- FILE sound/intro1_init.asm LEVEL 3 PASS 3
      0  fbec					      include	"sound/intro1_init.asm"
      1  fbec							; TIATracker music player
      2  fbec							; Copyright 2016 Andre "Kylearan" Wichmann
      3  fbec							; Website: https://bitbucket.org/kylearan/tiatracker
      4  fbec							; Email: andre.wichmann@gmx.de
      5  fbec							;
      6  fbec							; Licensed under the Apache License, Version 2.0 (the "License");
      7  fbec							; you may not use this file except in compliance with the License.
      8  fbec							; You may obtain a copy of the License at
      9  fbec							;
     10  fbec							;   http://www.apache.org/licenses/LICENSE-2.0
     11  fbec							;
     12  fbec							; Unless required by applicable law or agreed to in writing, software
     13  fbec							; distributed under the License is distributed on an "AS IS" BASIS,
     14  fbec							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15  fbec							; See the License for the specific language governing permissions and
     16  fbec							; limitations under the License.
     17  fbec
     18  fbec							; Song author: 
     19  fbec							; Song name: 
     20  fbec
     21  fbec							; @com.wudsn.ide.asm.hardware=ATARI2600
     22  fbec
     23  fbec							; =====================================================================
     24  fbec							; Initialize music.
     25  fbec							; Set tt_cur_pat_index_c0/1 to the indexes of the first patterns from
     26  fbec							; tt_SequenceTable for each channel.
     27  fbec							; Set tt_timer and tt_cur_note_index_c0/1 to 0.
     28  fbec							; All other variables can start with any value.
     29  fbec							; =====================================================================
     30  fbec		       a9 00		      lda	#0
     31  fbee		       85 d0		      sta	tt_cur_pat_index_c0
     32  fbf0		       a9 05		      lda	#5
     33  fbf2		       85 d1		      sta	tt_cur_pat_index_c1
     34  fbf4							; the rest should be 0 already from startup code. If not,
     35  fbf4							; set the following variables to 0 manually:
     36  fbf4							; - tt_timer
     37  fbf4							; - tt_cur_pat_index_c0
     38  fbf4							; - tt_cur_pat_index_c1
     39  fbf4							; - tt_cur_note_index_c0
     40  fbf4							; - tt_cur_note_index_c1
     41  fbf4
------- FILE BANK_FIXED.asm
   1073  fbf4
      0  fbf4					      SET_PLATFORM
      1  fbf4
      2  fbf4
      3  fbf4
      4  fbf4
      5  fbf4		       ad 82 02 	      lda	SWCHB
      6  fbf7		       2a		      rol
      7  fbf8		       2a		      rol
      8  fbf9		       2a		      rol
      9  fbfa		       29 03		      and	#%11
     10  fbfc		       49 02		      eor	#PAL
     11  fbfe		       85 80		      sta	Platform
   1075  fc00
   1076  fc00		       a9 0f		      lda	#BANK_TitleScreen
   1077  fc02		       85 3f		      sta	SET_BANK
   1078  fc04		       20 00 f0 	      jsr	TitleSequence
   1079  fc07
   1080  fc07		       4c 19 fc 	      jmp	NextLevelLevel
   1081  fc0a
   1082  fc0a				   RestartLevelNextPlayer
   1083  fc0a
   1084  fc0a		       a9 03		      lda	#BANK_SwapPlayersGeneric
   1085  fc0c		       85 3f		      sta	SET_BANK
   1086  fc0e		       20 45 f2 	      jsr	SwapPlayersGeneric
   1087  fc11
   1088  fc11
   1089  fc11		       a2 10		      ldx	#BANK_LevelScreen
   1090  fc13		       86 3f		      stx	SET_BANK
   1091  fc15
   1092  fc15		       a9 01		      lda	#1
   1093  fc17		       d0 06		      bne	selectLeveler
   1094  fc19
      0  fc19					      DEFINE_SUBROUTINE	NextLevelLevel
      1  fc19		       00 1f	   BANK_NextLevelLevel =	_CURRENT_BANK
      2  fc19					      SUBROUTINE
      3  fc19				   NextLevelLevel
   1096  fc19
   1097  fc19
   1098  fc19		       a2 10		      ldx	#BANK_LevelScreen
   1099  fc1b		       86 3f		      stx	SET_BANK
   1100  fc1d
   1101  fc1d		       a9 00		      lda	#0
   1102  fc1f		       20 53 f0    selectLeveler jsr	LevelScreen
   1103  fc22
   1104  fc22							; Initialise all in-game variables; those that must be re-initialised at the start of each level,
   1105  fc22							; including those for general systems function. But NOT those which do not need re-initialising between
   1106  fc22							; levels.
   1107  fc22		       a9 03		      lda	#BANK_LevelInit	; 2
   1108  fc24		       85 3f		      sta	SET_BANK	; 3
   1109  fc26		       20 8d f2 	      jsr	LevelInit	; 6+x
   1110  fc29
   1111  fc29
   1112  fc29							; Setup the various digit and display pointers
   1113  fc29							; Grab current player's score/level from backup
   1114  fc29
   1115  fc29		       a9 09		      lda	#BANK_SCORING
   1116  fc2b		       85 3e		      sta	SET_BANK_RAM
   1117  fc2d		       20 83 f2 	      jsr	GeneralScoringSetups
   1118  fc30
   1119  fc30							; copy the screen draw ROM shadow to RAM
   1120  fc30
   1121  fc30		       a0 07		      ldy	#SCREEN_LINES-1
   1122  fc32		       a2 00	   CopyScreenBanks ldx	#ROM_SHADOW_OF_RAMBANK_CODE
   1123  fc34		       20 2e fd 	      jsr	CopyROM2RAM_F000	; copy draw ROMShadow to RAM
   1124  fc37		       20 77 f0 	      jsr	SetPlatformColours	; set NTSC or PAL RGB values for draw + index
   1125  fc3a		       88		      dey
   1126  fc3b		       10 f5		      bpl	CopyScreenBanks
   1127  fc3d
   1128  fc3d		       a2 01		      ldx	#ROM_SHADOW_OF_BANK_DRAW_BUFFERS
   1129  fc3f		       a0 08		      ldy	#BANK_DRAW_BUFFERS
   1130  fc41		       20 43 f0 	      jsr	CopyROMShadowToRAM_F000
   1131  fc44
   1132  fc44
   1133  fc44		       a9 04		      lda	#BANK_LevelInfoLO
   1134  fc46		       85 3f		      sta	SET_BANK
   1135  fc48
   1136  fc48		       a6 b2		      ldx	levelX
   1137  fc4a		       bd 00 f0 	      lda	LevelInfoLO,x
   1138  fc4d		       85 bb		      sta	Board_AddressR
   1139  fc4f		       bd fa f0 	      lda	LevelInfoHI,x
   1140  fc52		       85 bc		      sta	Board_AddressR+1
   1141  fc54		       bd f4 f1 	      lda	LevelInfoBANK,x
   1142  fc57		       85 ab		      sta	LEVEL_bank
   1143  fc59
   1144  fc59		       a9 0a		      lda	#BANK_DECODE_LEVEL
   1145  fc5b		       85 3e		      sta	SET_BANK_RAM
   1146  fc5d		       20 95 f0 	      jsr	UnpackLevel
   1147  fc60
   1148  fc60		       a9 28		      lda	#SIZE_BOARD_X
   1149  fc62		       85 94		      sta	BoardLimit_Width
   1150  fc64		       a9 16		      lda	#SIZE_BOARD_Y
   1151  fc66		       85 95		      sta	BoardLimit_Height
   1152  fc68
   1153  fc68							; Setup player animation and scroll limits.
   1154  fc68							; Mangle the board colours based on level
   1155  fc68
   1156  fc68		       a9 03		      lda	#BANK_CreateCreatures	; 2
   1157  fc6a		       85 3f		      sta	SET_BANK	; 3
   1158  fc6c		       20 4e f2 	      jsr	CreateCreatures	; 6+x
   1159  fc6f
   1160  fc6f							;---------------------------------------------------------------------------
   1161  fc6f
   1162  fc6f					      IF	WAIT_FOR_INITIAL_DRAW
   1163  fc6f		       a9 02		      lda	#%10
   1164  fc71		       85 ae		      sta	blankState
   1165  fc73					      ENDIF
   1166  fc73
   1167  fc73		       a9 03		      lda	#BANK_Resync	; 2
   1168  fc75		       85 3f		      sta	SET_BANK	; 3
   1169  fc77		       20 bd f2 	      jsr	Resync	; 6+x
   1170  fc7a
   1171  fc7a				   NewFrameStart
   1172  fc7a
   1173  fc7a		       24 c2		      bit	NextLevelTrigger
   1174  fc7c		       70 8c		      bvs	RestartLevelNextPlayer	; loss of life (=SELECT)
   1175  fc7e		       10 99		      bpl	NextLevelLevel	; game-triggered next level (=RESET/COMPLETED)
   1176  fc80
   1177  fc80							; Note: VSYNC must NOT be on when starting a new level! Else you get annoying TV signals.
   1178  fc80
   1179  fc80		       a9 0e		      lda	#%1110	; VSYNC ON
   1180  fc82		       85 42	   .loopVSync sta	WSYNC
   1181  fc84		       85 40		      sta	VSYNC
   1182  fc86		       4a		      lsr
   1183  fc87		       d0 f9		      bne	.loopVSync	; branch until VYSNC has been reset
   1184  fc89
   1185  fc89							; moved *after* the loop since this allows to *increase* timer values by 1!
   1186  fc89
   1187  fc89		       a6 80		      ldx	Platform
   1188  fc8b		       bc ef fc 	      ldy	VBlankTime,x
   1189  fc8e		       8c 96 02 	      sty	TIM64T
   1190  fc91
   1191  fc91		       a9 11		      lda	#BANK_SoundFX
   1192  fc93		       85 3f		      sta	SET_BANK
   1193  fc95		       20 b2 f3 	      jsr	SoundFX
   1194  fc98
   1195  fc98		       20 a4 fa 	      jsr	StealCharDraw	; 6 NOTE THIS IS THE *ONLY* AREA BIG ENOUGH FOR > 30 INTIM NEEDS
   1196  fc9b
   1197  fc9b							;---------------------------------------------------------------------------
   1198  fc9b
   1199  fc9b		       a9 09		      lda	#BANK_SCORING	; 2
   1200  fc9d		       85 3e		      sta	SET_BANK_RAM	; 3
   1201  fc9f		       20 e8 f1 	      jsr	DrawDigits	; 6 = 11
   1202  fca2
   1203  fca2							;---------------------------------------------------------------------------
   1204  fca2							; A 42-cycle timing window in the screen draw code.  Perform any general
   1205  fca2							; per-frame code here, provided it takes exactly 42 cycles to execute.
   1206  fca2							; TJ: Well, not exactly 42 cycles, but it works! :)
   1207  fca2
   1208  fca2		       a9 00		      lda	#BANK_SCREENMARKII1	; 2
   1209  fca4		       85 3f		      sta	SET_BANK	; testing
   1210  fca6		       85 3e		      sta	SET_BANK_RAM	; 3
   1211  fca8		       20 00 f0 	      jsr	DrawTheScreen	; 6	 @57 from RAM, no less!!
   1212  fcab							;	 @66
   1213  fcab		       a9 03		      lda	#BANK_PostScreenCleanup	; 2
   1214  fcad		       85 3f		      sta	SET_BANK	; 3
   1215  fcaf		       20 33 f3 	      jsr	PostScreenCleanup	; 6+x
   1216  fcb2
   1217  fcb2		       a9 00		      lda	#BANK_SelfModDrawPlayers	; 2
   1218  fcb4		       85 3f		      sta	SET_BANK	; 3
   1219  fcb6		       20 74 f2 	      jsr	SelfModDrawPlayers	; 6+x
   1220  fcb9
   1221  fcb9				   SkipSc
   1222  fcb9
   1223  fcb9
   1224  fcb9		       a5 cd		      lda	FadeOutComplete
   1225  fcbb		       30 0e		      bmi	FadeInPossible
   1226  fcbd		       c6 ce		      dec	fadeslow
   1227  fcbf		       10 20		      bpl	FadeNotRequired
   1228  fcc1		       a9 02		      lda	#2
   1229  fcc3		       85 ce		      sta	fadeslow
   1230  fcc5		       20 57 fd 	      jsr	FadeOut
   1231  fcc8		       4c e1 fc 	      jmp	FadeNotRequired
   1232  fccb				   FadeInPossible
   1233  fccb
   1234  fccb		       a9 00		      lda	#0
   1235  fccd		       85 3e		      sta	SET_BANK_RAM
   1236  fccf		       20 ab f3 	      jsr	FixColours
   1237  fcd2
   1238  fcd2		       a5 cc		      lda	FadeComplete
   1239  fcd4		       f0 0b		      beq	FadeNotRequired
   1240  fcd6
   1241  fcd6		       c6 ce		      dec	fadeslow
   1242  fcd8		       10 07		      bpl	FadeNotRequired
   1243  fcda		       a9 03		      lda	#3
   1244  fcdc		       85 ce		      sta	fadeslow
   1245  fcde		       20 83 fd 	      jsr	FadeIn
   1246  fce1				   FadeNotRequired
   1247  fce1
   1248  fce1
   1249  fce1
   1250  fce1		       20 f6 fa 	      jsr	writePlayerFrame
   1251  fce4		       20 a4 fa 	      jsr	StealCharDraw	; 6
   1252  fce7
   1253  fce7		       ad 84 02    OverscanBD lda	INTIM	;4
   1254  fcea		       d0 fb		      bne	OverscanBD	;2/3
   1255  fcec
   1256  fcec		       4c 7a fc 	      jmp	NewFrameStart
   1257  fcef				   VBlankTime
   1258  fcef		       30 30		      .byte.b	VBLANK_TIM_NTSC, VBLANK_TIM_NTSC
   1259  fcf1		       55 55		      .byte.b	VBLANK_TIM_PAL, VBLANK_TIM_PAL
   1260  fcf3
   1261  fcf3							;---------------------------------------------------------------------------
   1262  fcf3
      0  fcf3					      DEFINE_SUBROUTINE	nextLevelMan
      1  fcf3		       00 1f	   BANK_nextLevelMan =	_CURRENT_BANK
      2  fcf3					      SUBROUTINE
      3  fcf3				   nextLevelMan
   1264  fcf3
   1265  fcf3		       a9 11		      lda	#BANK_EndOfLevel
   1266  fcf5		       85 3f		      sta	SET_BANK
   1267  fcf7		       4c 3c f3 	      jmp	EndOfLevel
   1268  fcfa
   1269  fcfa
      0  fcfa					      DEFINE_SUBROUTINE	switchLevels2
      1  fcfa		       00 1f	   BANK_switchLevels2 =	_CURRENT_BANK
      2  fcfa					      SUBROUTINE
      3  fcfa				   switchLevels2
   1271  fcfa
   1272  fcfa							; SELECT used, so we want to get back to selection
   1273  fcfa
   1274  fcfa		       a5 c2		      lda	NextLevelTrigger
   1275  fcfc		       09 40		      ora	#$40	; #<(~BIT_NEXTLEVEL)
   1276  fcfe		       85 c2		      sta	NextLevelTrigger
   1277  fd00		       60		      rts
   1278  fd01
      0  fd01					      DEFINE_SUBROUTINE	nextLevelMan2
      1  fd01		       00 1f	   BANK_nextLevelMan2 =	_CURRENT_BANK
      2  fd01					      SUBROUTINE
      3  fd01				   nextLevelMan2
   1280  fd01
   1281  fd01		       c6 a9		      dec	DelayEndOfLevel
   1282  fd03		       d0 3b		      bne	genericRTS
   1283  fd05
   1284  fd05		       a9 00		      lda	#0
   1285  fd07		       85 cd		      sta	FadeOutComplete	; start fading OUT
   1286  fd09		       a9 00		      lda	#0
   1287  fd0b		       85 cc		      sta	FadeComplete	; stop fade IN
   1288  fd0d
   1289  fd0d		       a9 05		      lda	#5
   1290  fd0f		       85 a9		      sta	DelayEndOfLevel
   1291  fd11
   1292  fd11		       a9 0d		      lda	#MANMODE_NEXTLEVEL3
   1293  fd13		       85 a1		      sta	ManMode
   1294  fd15							;		  jmp nextLevelMan3
   1295  fd15							;		  rts
   1296  fd15
   1297  fd15
      0  fd15					      DEFINE_SUBROUTINE	nextLevelMan3
      1  fd15		       00 1f	   BANK_nextLevelMan3 =	_CURRENT_BANK
      2  fd15					      SUBROUTINE
      3  fd15				   nextLevelMan3
   1299  fd15
   1300  fd15		       c6 a9		      dec	DelayEndOfLevel
   1301  fd17		       d0 27		      bne	genericRTS
   1302  fd19
   1303  fd19		       a9 09		      lda	#MANMODE_SWITCH
   1304  fd1b		       85 a1		      sta	ManMode
   1305  fd1d
      0  fd1d					      DEFINE_SUBROUTINE	switchLevels
      1  fd1d		       00 1f	   BANK_switchLevels =	_CURRENT_BANK
      2  fd1d					      SUBROUTINE
      3  fd1d				   switchLevels
   1307  fd1d
   1308  fd1d							; Now do the actual switching
   1309  fd1d
   1310  fd1d							;		 lda NextLevelTrigger
   1311  fd1d							;		 and #<(~BIT_NEXTLEVEL)
   1312  fd1d		       a9 00		      lda	#$00
   1313  fd1f		       85 c2		      sta	NextLevelTrigger
   1314  fd21
   1315  fd21							; Next level is due. Point to the next level, but if we're at the end of playable levels,
   1316  fd21							; then increment the level number. This is completely circular, so we eventually wrap
   1317  fd21							; the level back to 0 and start afresh.
   1318  fd21
   1319  fd21		       e6 b2		      inc	levelX
   1320  fd23		       a5 b2		      lda	levelX
   1321  fd25		       c9 fa		      cmp	#MAX_LEVEL_NUMBER
   1322  fd27		       90 02		      bcc	.level_ok
   1323  fd29		       a9 00		      lda	#0
   1324  fd2b		       85 b2	   .level_ok  sta	levelX
   1325  fd2d		       60		      rts
   1326  fd2e
   1327  fd2e							;---------------------------------------------------------------------------
   1328  fd2e
   1329  fd2e
      0  fd2e					      DEFINE_SUBROUTINE	CopyROM2RAM_F000
      1  fd2e		       00 1f	   BANK_CopyROM2RAM_F000 =	_CURRENT_BANK
      2  fd2e					      SUBROUTINE
      3  fd2e				   CopyROM2RAM_F000
   1331  fd2e
   1332  fd2e		       a9 11		      lda	#BANK_CopyROMShadowToRAM
   1333  fd30		       85 3f		      sta	SET_BANK
   1334  fd32		       85 bf		      sta	ROM_Bank
   1335  fd34		       4c 43 f0 	      jmp	CopyROMShadowToRAM_F000
   1336  fd37
   1337  fd37
   1338  fd37							;---------------------------------------------------------------------------
   1339  fd37
      0  fd37					      DEFINE_SUBROUTINE	RegisterTarget
      1  fd37		       00 1f	   BANK_RegisterTarget =	_CURRENT_BANK
      2  fd37					      SUBROUTINE
      3  fd37				   RegisterTarget
   1341  fd37
   1342  fd37		       f8		      sed
   1343  fd38		       18		      clc
   1344  fd39		       a5 b5		      lda	BCD_targetsRequired
   1345  fd3b		       69 01		      adc	#1
   1346  fd3d		       85 b5		      sta	BCD_targetsRequired
   1347  fd3f		       d8		      cld
   1348  fd40		       60	   genericRTS rts
   1349  fd41
      0  fd41					      DEFINE_SUBROUTINE	DeRegisterTarget
      1  fd41		       00 1f	   BANK_DeRegisterTarget =	_CURRENT_BANK
      2  fd41					      SUBROUTINE
      3  fd41				   DeRegisterTarget
   1351  fd41
   1352  fd41		       f8		      sed
   1353  fd42		       38		      sec
   1354  fd43		       a5 b5		      lda	BCD_targetsRequired
   1355  fd45		       e9 01		      sbc	#1
   1356  fd47		       85 b5		      sta	BCD_targetsRequired
   1357  fd49		       d8		      cld
   1358  fd4a		       60		      rts
   1359  fd4b
   1360  fd4b
      0  fd4b					      DEFINE_SUBROUTINE	Random
      1  fd4b		       00 1f	   BANK_Random =	_CURRENT_BANK
      2  fd4b					      SUBROUTINE
      3  fd4b				   Random
      0  fd4b					      NEXT_RANDOM
      1  fd4b
      2  fd4b		       a5 c8		      lda	rnd
      3  fd4d		       4a		      lsr
      4  fd4e					      IFCONST	rndHi
      5  fd4e		       66 c7		      ror	rndHi
      6  fd50					      ENDIF
      7  fd50		       90 02		      bcc	.skipEOR
      8  fd52		       49 b4		      eor	#RND_EOR_VAL
      9  fd54				   .skipEOR
     10  fd54		       85 c8		      sta	rnd
   1363  fd56		       60		      rts
   1364  fd57
   1365  fd57
      0  fd57					      DEFINE_SUBROUTINE	FadeOut
      1  fd57		       00 1f	   BANK_FadeOut =	_CURRENT_BANK
      2  fd57					      SUBROUTINE
      3  fd57				   FadeOut
   1367  fd57
   1368  fd57		       a0 07		      ldy	#SCREEN_LINES-1
   1369  fd59		       84 3e	   ZeroColours sty	SET_BANK_RAM
   1370  fd5b
   1371  fd5b		       af 1d f0 	      lax	Colour_A_Actual
   1372  fd5e		       29 0f		      and	#$F
   1373  fd60		       f0 02		      beq	AisZero
   1374  fd62		       ca		      dex
   1375  fd63		       8a		      txa
   1376  fd64		       8d 1d f4    AisZero    sta	Colour_A_Actual+RAM_WRITE
   1377  fd67
   1378  fd67		       af 86 f0 	      lax	Colour_B_Actual
   1379  fd6a		       29 0f		      and	#$F
   1380  fd6c		       f0 02		      beq	BisZero
   1381  fd6e		       ca		      dex
   1382  fd6f		       8a		      txa
   1383  fd70		       8d 86 f4    BisZero    sta	Colour_B_Actual+RAM_WRITE
   1384  fd73
   1385  fd73		       af 53 f0 	      lax	Colour_C_Actual
   1386  fd76		       29 0f		      and	#$F
   1387  fd78		       f0 02		      beq	CisZero
   1388  fd7a		       ca		      dex
   1389  fd7b		       8a		      txa
   1390  fd7c		       8d 53 f4    CisZero    sta	Colour_C_Actual+RAM_WRITE
   1391  fd7f
   1392  fd7f		       88		      dey
   1393  fd80		       10 d7		      bpl	ZeroColours
   1394  fd82		       60		      rts
   1395  fd83
   1396  fd83
   1397  fd83
   1398  fd83
      0  fd83					      DEFINE_SUBROUTINE	FadeIn
      1  fd83		       00 1f	   BANK_FadeIn =	_CURRENT_BANK
      2  fd83					      SUBROUTINE
      3  fd83				   FadeIn
   1400  fd83
   1401  fd83		       a9 00		      lda	#0
   1402  fd85		       85 cc		      sta	FadeComplete
   1403  fd87
   1404  fd87		       a0 07		      ldy	#SCREEN_LINES-1
   1405  fd89		       84 3e	   CopyAcols  sty	SET_BANK_RAM
   1406  fd8b
   1407  fd8b		       af 1d f0 	      lax	Colour_A_Actual
   1408  fd8e		       d0 0a		      bne	notFirstA
   1409  fd90		       ad 68 f3 	      lda	Colour_A
   1410  fd93		       29 f0		      and	#$F0
   1411  fd95		       aa		      tax
   1412  fd96		       e8		      inx
   1413  fd97		       4c a0 fd 	      jmp	FirstA
   1414  fd9a		       ec 68 f3    notFirstA  cpx	Colour_A
   1415  fd9d		       f0 06		      beq	AOK
   1416  fd9f		       e8		      inx
   1417  fda0		       8e 1d f4    FirstA     stx	Colour_A_Actual+RAM_WRITE
   1418  fda3		       e6 cc		      inc	FadeComplete	; NOT complete
   1419  fda5				   AOK
   1420  fda5		       af 86 f0 	      lax	Colour_B_Actual
   1421  fda8		       d0 0a		      bne	notFirstB
   1422  fdaa		       ad 69 f3 	      lda	Colour_B
   1423  fdad		       29 f0		      and	#$F0
   1424  fdaf		       aa		      tax
   1425  fdb0		       e8		      inx
   1426  fdb1		       4c ba fd 	      jmp	FirstB
   1427  fdb4		       ec 69 f3    notFirstB  cpx	Colour_B
   1428  fdb7		       f0 06		      beq	BOK
   1429  fdb9		       e8		      inx
   1430  fdba		       8e 86 f4    FirstB     stx	Colour_B_Actual+RAM_WRITE
   1431  fdbd		       e6 cc		      inc	FadeComplete	; NOT complete
   1432  fdbf				   BOK
   1433  fdbf		       af 53 f0 	      lax	Colour_C_Actual
   1434  fdc2		       d0 0a		      bne	notFirstC
   1435  fdc4		       ad 6a f3 	      lda	Colour_C
   1436  fdc7		       29 f0		      and	#$F0
   1437  fdc9		       aa		      tax
   1438  fdca		       e8		      inx
   1439  fdcb		       4c d4 fd 	      jmp	FirstC
   1440  fdce		       ec 6a f3    notFirstC  cpx	Colour_C
   1441  fdd1		       f0 06		      beq	COK
   1442  fdd3		       e8		      inx
   1443  fdd4		       8e 53 f4    FirstC     stx	Colour_C_Actual+RAM_WRITE
   1444  fdd7		       e6 cc		      inc	FadeComplete	; NOT complete
   1445  fdd9				   COK
   1446  fdd9
   1447  fdd9		       88		      dey
   1448  fdda		       10 ad		      bpl	CopyAcols
   1449  fddc		       60		      rts
   1450  fddd
   1451  fddd
      0  fddd					      DEFINE_SUBROUTINE	CopyColoursToScreenLines
      1  fddd		       00 1f	   BANK_CopyColoursToScreenLines =	_CURRENT_BANK
      2  fddd					      SUBROUTINE
      3  fddd				   CopyColoursToScreenLines
   1453  fddd
   1454  fddd		       a2 07		      ldx	#SCREEN_LINES-1
   1455  fddf		       86 3e	   setPlat    stx	SET_BANK_RAM
   1456  fde1
   1457  fde1		       a5 c9		      lda	icc_colour
   1458  fde3		       8d 68 f7 	      sta	Colour_A + RAM_WRITE
   1459  fde6		       a5 ca		      lda	icc_colour+1
   1460  fde8		       8d 69 f7 	      sta	Colour_B + RAM_WRITE
   1461  fdeb		       a5 cb		      lda	icc_colour+2
   1462  fded		       8d 6a f7 	      sta	Colour_C + RAM_WRITE
   1463  fdf0
   1464  fdf0		       ca		      dex
   1465  fdf1		       10 ec		      bpl	setPlat
   1466  fdf3
   1467  fdf3		       a5 bf		      lda	ROM_Bank
   1468  fdf5		       85 3f		      sta	SET_BANK
   1469  fdf7		       60		      rts
   1470  fdf8
   1471  fdf8							;---------------------------------------------------------------------------
   1472  fdf8
------- FILE charset/CHARACTERSHAPE_TARGET.asm LEVEL 3 PASS 3
      0  fdf8					      include	"charset/CHARACTERSHAPE_TARGET.asm"
      0  fdf8					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET", LINES_PER_CHAR
 PAGE BREAK INSERTED FOR  CHARACTERSHAPE_TARGET
 REQUESTED SIZE =  $18
 WASTED SPACE =  $8
 PAGEBREAK LOCATION =  $fe00
     10  fe00					      LIST	ON
      2  fe00				   CHARACTERSHAPE_TARGET
      3  fe00		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      4  fe08		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      5  fe10		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      0  fe18					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET_MIRRORED", LINES_PER_CHAR
     10  fe18					      LIST	ON
      7  fe18				   CHARACTERSHAPE_TARGET_MIRRORED
      8  fe18		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      9  fe20		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
     10  fe28		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET1.asm LEVEL 3 PASS 3
      0  fe30					      include	"charset/CHARACTERSHAPE_TARGET1.asm"
      0  fe30					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET1", LINES_PER_CHAR
     10  fe30					      LIST	ON
      2  fe30				   CHARACTERSHAPE_TARGET1
      3  fe30		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      4  fe38		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      5  fe40		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      0  fe48					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET1_MIRRORED", LINES_PER_CHAR
     10  fe48					      LIST	ON
      7  fe48				   CHARACTERSHAPE_TARGET1_MIRRORED
      8  fe48		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      9  fe50		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
     10  fe58		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET3.asm LEVEL 3 PASS 3
      0  fe60					      include	"charset/CHARACTERSHAPE_TARGET3.asm"
      0  fe60					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET3", LINES_PER_CHAR
     10  fe60					      LIST	ON
      2  fe60				   CHARACTERSHAPE_TARGET3
      3  fe60		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      4  fe68		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      5  fe70		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      0  fe78					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET3_MIRRORED", LINES_PER_CHAR
     10  fe78					      LIST	ON
      7  fe78				   CHARACTERSHAPE_TARGET3_MIRRORED
      8  fe78		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      9  fe80		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
     10  fe88		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET5.asm LEVEL 3 PASS 3
      0  fe90					      include	"charset/CHARACTERSHAPE_TARGET5.asm"
      0  fe90					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET5", LINES_PER_CHAR
     10  fe90					      LIST	ON
      2  fe90				   CHARACTERSHAPE_TARGET5
      3  fe90		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      4  fe98		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      5  fea0		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      0  fea8					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET5_MIRRORED", LINES_PER_CHAR
     10  fea8					      LIST	ON
      7  fea8				   CHARACTERSHAPE_TARGET5_MIRRORED
      8  fea8		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      9  feb0		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
     10  feb8		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET7.asm LEVEL 3 PASS 3
      0  fec0					      include	"charset/CHARACTERSHAPE_TARGET7.asm"
      0  fec0					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET7", LINES_PER_CHAR
     10  fec0					      LIST	ON
      2  fec0				   CHARACTERSHAPE_TARGET7
      3  fec0		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      4  fec8		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      5  fed0		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      0  fed8					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET7_MIRRORED", LINES_PER_CHAR
     10  fed8					      LIST	ON
      7  fed8				   CHARACTERSHAPE_TARGET7_MIRRORED
      8  fed8		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      9  fee0		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
     10  fee8		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_STEEL.asm LEVEL 3 PASS 3
      0  fef0					      include	"charset/CHARACTERSHAPE_STEEL.asm"
      0  fef0					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_STEEL", LINES_PER_CHAR
 PAGE BREAK INSERTED FOR  CHARACTERSHAPE_STEEL
 REQUESTED SIZE =  $18
 WASTED SPACE =  $10
 PAGEBREAK LOCATION =  $ff00
     10  ff00					      LIST	ON
      2  ff00				   CHARACTERSHAPE_STEEL
      3  ff00		       00 88 00 88*	      .byte.b	0,136,0,136,0,34,0,34
      4  ff08		       ff 77 77 ff*	      .byte.b	255,119,119,255,255,221,221,255
      5  ff10		       ff 77 77 ff*	      .byte.b	255,119,119,255,255,221,221,255
      0  ff18					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_STEEL_MIRRORED", LINES_PER_CHAR
     10  ff18					      LIST	ON
      7  ff18				   CHARACTERSHAPE_STEEL_MIRRORED
      8  ff18		       00 11 00 11*	      .byte.b	0,17,0,17,0,68,0,68
      9  ff20		       ff ee ee ff*	      .byte.b	255,238,238,255,255,187,187,255
     10  ff28		       ff ee ee ff*	      .byte.b	255,238,238,255,255,187,187,255
------- FILE BANK_FIXED.asm
   1479  ff30							;    include "charset/CHARACTERSHAPE_RIVET.asm"
------- FILE characterset/character_SOIL.asm LEVEL 3 PASS 3
      0  ff30					      include	"characterset/character_SOIL.asm"
      1  ff30							;    Sokoboo - a Sokoban implementation
      2  ff30							;    using a generic tile-based display engine for the Atari 2600
      3  ff30							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  ff30							;
      5  ff30							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  ff30							;
      7  ff30							;    Code related to the generic tile-based display engine was developed by
      8  ff30							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  ff30							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  ff30							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  ff30							;
     12  ff30							;    Code related to music and sound effects uses the TIATracker music player
     13  ff30							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  ff30							;    directory for Apache licensing details.
     15  ff30							;
     16  ff30							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  ff30							;    See the copyright notices in the License directory for a list of level
     18  ff30							;    contributors.
     19  ff30							;
     20  ff30							;    Except where otherwise indicated, this software is released under the
     21  ff30							;    following licensing arrangement...
     22  ff30							;
     23  ff30							;    This program is free software: you can redistribute it and/or modify
     24  ff30							;    it under the terms of the GNU General Public License as published by
     25  ff30							;    the Free Software Foundation, either version 3 of the License, or
     26  ff30							;    (at your option) any later version.
     27  ff30							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  ff30
     29  ff30							;    This program is distributed in the hope that it will be useful,
     30  ff30							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  ff30							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  ff30							;    GNU General Public License for more details.
     33  ff30
      0  ff30					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_SOIL", LINES_PER_CHAR
     10  ff30					      LIST	ON
     35  ff30				   CHARACTERSHAPE_SOIL
     36  ff30				   CHARACTERSHAPE_SOIL_MIRRORED
     37  ff30		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
     38  ff38		       ff ff ff ff*	      .byte.b	%11111111,%11111111,%11111111,%11111111,%11111111,%11111111,%11111111,%11111111
     39  ff40		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_BOX.asm LEVEL 3 PASS 3
      0  ff48					      include	"charset/CHARACTERSHAPE_BOX.asm"
      0  ff48					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX", LINES_PER_CHAR
     10  ff48					      LIST	ON
      2  ff48				   CHARACTERSHAPE_BOX
      3  ff48		       ff ff 99 99*	      .byte.b	255,255,153,153,153,0,0,0
      4  ff50		       ff ff 99 99*	      .byte.b	255,255,153,153,153,0,0,0
      5  ff58		       00 00 00 00*	      .byte.b	0,0,0,0,0,255,255,0
      0  ff60					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX_MIRRORED", LINES_PER_CHAR
     10  ff60					      LIST	ON
      7  ff60				   CHARACTERSHAPE_BOX_MIRRORED
      8  ff60		       ff ff 99 99*	      .byte.b	255,255,153,153,153,0,0,0
      9  ff68		       ff ff 99 99*	      .byte.b	255,255,153,153,153,0,0,0
     10  ff70		       00 00 00 00*	      .byte.b	0,0,0,0,0,255,255,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_BOX_ON_TARGET.asm LEVEL 3 PASS 3
      0  ff78					      include	"charset/CHARACTERSHAPE_BOX_ON_TARGET.asm"
      0  ff78					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX_ON_TARGET", LINES_PER_CHAR
     10  ff78					      LIST	ON
      2  ff78				   CHARACTERSHAPE_BOX_ON_TARGET
      3  ff78		       ff ff 99 99*	      .byte.b	255,255,153,153,153,0,0,0
      4  ff80		       ff ff ff ff*	      .byte.b	255,255,255,255,255,0,0,0
      5  ff88		       00 00 66 66*	      .byte.b	0,0,102,102,102,255,255,0
      0  ff90					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED", LINES_PER_CHAR
     10  ff90					      LIST	ON
      7  ff90				   CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED
      8  ff90		       ff ff 99 99*	      .byte.b	255,255,153,153,153,0,0,0
      9  ff98		       ff ff ff ff*	      .byte.b	255,255,255,255,255,0,0,0
     10  ffa0		       00 00 66 66*	      .byte.b	0,0,102,102,102,255,255,0
------- FILE BANK_FIXED.asm
   1483  ffa8							;include "charset/CHARACTERSHAPE_BOX_ON_TARGET2.asm"
------- FILE charset/CHARACTERSHAPE_WALL.asm LEVEL 3 PASS 3
      0  ffa8					      include	"charset/CHARACTERSHAPE_WALL.asm"
      0  ffa8					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_WALL", LINES_PER_CHAR
     10  ffa8					      LIST	ON
      2  ffa8				   CHARACTERSHAPE_WALL
      3  ffa8		       77 77 77 00*	      .byte.b	119,119,119,0,221,221,221,0
      4  ffb0		       77 77 77 00*	      .byte.b	119,119,119,0,221,221,221,0
      5  ffb8		       ff ff ff ff*	      .byte.b	255,255,255,255,255,255,255,255
      0  ffc0					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_WALL_MIRRORED", LINES_PER_CHAR
     10  ffc0					      LIST	ON
      7  ffc0				   CHARACTERSHAPE_WALL_MIRRORED
      8  ffc0		       ee ee ee 00*	      .byte.b	238,238,238,0,187,187,187,0
      9  ffc8		       ee ee ee 00*	      .byte.b	238,238,238,0,187,187,187,0
     10  ffd0		       ff ff ff ff*	      .byte.b	255,255,255,255,255,255,255,255
------- FILE BANK_FIXED.asm
   1485  ffd8
   1486  ffd8				  -	      if	DIGITS
   1487  ffd8				  -	      include	"characterset/character_9.asm"
   1488  ffd8				  -	      include	"characterset/character_8.asm"
   1489  ffd8				  -	      include	"characterset/character_7.asm"
   1490  ffd8				  -	      include	"characterset/character_6.asm"
   1491  ffd8				  -	      include	"characterset/character_5.asm"
   1492  ffd8				  -	      include	"characterset/character_4.asm"
   1493  ffd8				  -	      include	"characterset/character_3.asm"
   1494  ffd8				  -	      include	"characterset/character_2.asm"
   1495  ffd8				  -	      include	"characterset/character_1.asm"
   1496  ffd8				  -	      include	"characterset/character_0.asm"
   1497  ffd8					      endif
   1498  ffd8
   1499  ffd8
 FREE BYTES IN FIXED BANK =  $23
   1500  ffd8					      ECHO	"FREE BYTES IN FIXED BANK = ", $FFFB - *
   1501  ffd8
   1502  ffd8							;---------------------------------------------------------------------------
   1503  ffd8							; The reset vectors
   1504  ffd8							; these must live in the fixed bank (last 2K of any ROM image in TigerVision)
   1505  ffd8
   1506  10000 ????				       SEG	InterruptVectors
   1507  fffc					      ORG	FIXED_BANK + $7FC
   1508  fffc					      RORG	$7ffC
   1509  fffc
   1510  fffc							;		 .word Reset	       ; NMI	    (not used)
   1511  fffc		       c2 fb		      .word.w	Reset	; RESET
   1512  fffe		       c2 fb		      .word.w	Reset	; IRQ	      (not used)
   1513  10000
   1514  10000							;---------------------------------------------------------------------------
------- FILE ./sokoboo.asm
    821  10000
    822  10000							;END
