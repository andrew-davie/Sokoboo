------- FILE ./sokoboo.asm LEVEL 1 PASS 3
      1  8000 ????						;    Sokoboo - a Sokoban implementation
      2  8000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  8000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  8000 ????						;
      5  8000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  8000 ????						;
      7  8000 ????						;    Code related to the generic tile-based display engine was developed by
      8  8000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  8000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  8000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  8000 ????						;
     12  8000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  8000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  8000 ????						;    directory for Apache licensing details.
     15  8000 ????						;
     16  8000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  8000 ????						;    See the copyright notices in the License directory for a list of level
     18  8000 ????						;    contributors.
     19  8000 ????						;
     20  8000 ????						;    Except where otherwise indicated, this software is released under the
     21  8000 ????						;    following licensing arrangement...
     22  8000 ????						;
     23  8000 ????						;    This program is free software: you can redistribute it and/or modify
     24  8000 ????						;    it under the terms of the GNU General Public License as published by
     25  8000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  8000 ????						;    (at your option) any later version.
     27  8000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  8000 ????
     29  8000 ????						;    This program is distributed in the hope that it will be useful,
     30  8000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  8000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  8000 ????						;    GNU General Public License for more details.
     33  8000 ????
     34  8000 ????
     35  8000 ????
     36  8000 ????	       00 40	   TIA_BASE_ADDRESS =	$40
     37  8000 ????
     38  8000 ????				      processor	6502
------- FILE vcs.h LEVEL 2 PASS 3
      0  8000 ????				      include	"vcs.h"
      1  8000 ????						; VCS.H
      2  8000 ????						; Version 1.05, 13/November/2003
      3  8000 ????
      4  8000 ????	       00 69	   VERSION_VCS =	105
      5  8000 ????
      6  8000 ????						; This file defines hardware registers and memory mapping for the
      7  8000 ????						; Atari 2600. It is distributed as a companion machine-specific support package
      8  8000 ????						; for the DASM compiler. Updates to this file, DASM, and associated tools are
      9  8000 ????						; available at at http://www.atari2600.org/dasm
     10  8000 ????						;
     11  8000 ????						; Many thanks to the original author(s) of this file, and to everyone who has
     12  8000 ????						; contributed to understanding the Atari 2600.  If you take issue with the
     13  8000 ????						; contents, or naming of registers, please write to me (atari2600@taswegian.com)
     14  8000 ????						; with your views.  Please contribute, if you think you can improve this
     15  8000 ????						; file!
     16  8000 ????						;
     17  8000 ????						; Latest Revisions...
     18  8000 ????						; 1.05  13/NOV/2003	  - Correction to 1.04 - now functions as requested by MR.
     19  8000 ????						;			  - Added VERSION_VCS equate (which will reflect 100x version #)
     20  8000 ????						;			    This will allow conditional code to verify VCS.H being
     21  8000 ????						;			    used for code assembly.
     22  8000 ????						; 1.04  12/NOV/2003	 Added TIA_BASE_WRITE_ADDRESS and TIA_BASE_READ_ADDRESS for
     23  8000 ????						;			 convenient disassembly/reassembly compatibility for hardware
     24  8000 ????						;			 mirrored reading/writing differences.	This is more a
     25  8000 ????						;			 readability issue, and binary compatibility with disassembled
     26  8000 ????						;			 and reassembled sources.  Per Manuel Rotschkar's suggestion.
     27  8000 ????						; 1.03  12/MAY/2003	 Added SEG segment at end of file to fix old-code compatibility
     28  8000 ????						;			 which was broken by the use of segments in this file, as
     29  8000 ????						;			 reported by Manuel Polik on [stella] 11/MAY/2003
     30  8000 ????						; 1.02  22/MAR/2003	 Added TIMINT($285)
     31  8000 ????						; 1.01				Constant offset added to allow use for 3F-style bankswitching
     32  8000 ????						;						 - define TIA_BASE_ADDRESS as $40 for Tigervision carts, otherwise
     33  8000 ????						;						   it is safe to leave it undefined, and the base address will
     34  8000 ????						;						   be set to 0.  Thanks to Eckhard Stolberg for the suggestion.
     35  8000 ????						;			    Note, may use -DLABEL=EXPRESSION to define TIA_BASE_ADDRESS
     36  8000 ????						;			  - register definitions are now generated through assignment
     37  8000 ????						;			    in uninitialised segments.	This allows a changeable base
     38  8000 ????						;			    address architecture.
     39  8000 ????						; 1.0	22/MAR/2003		Initial release
     40  8000 ????
     41  8000 ????
     42  8000 ????						;-------------------------------------------------------------------------------
     43  8000 ????
     44  8000 ????						; TIA_BASE_ADDRESS
     45  8000 ????						; The TIA_BASE_ADDRESS defines the base address of access to TIA registers.
     46  8000 ????						; Normally 0, the base address should (externally, before including this file)
     47  8000 ????						; be set to $40 when creating 3F-bankswitched (and other?) cartridges.
     48  8000 ????						; The reason is that this bankswitching scheme treats any access to locations
     49  8000 ????						; < $40 as a bankswitch.
     50  8000 ????
     51  8000 ????			  -	      IFNCONST	TIA_BASE_ADDRESS
     52  8000 ????			  -TIA_BASE_ADDRESS =	0
     53  8000 ????				      ENDIF
     54  8000 ????
     55  8000 ????						; Note: The address may be defined on the command-line using the -D switch, eg:
     56  8000 ????						; dasm.exe code.asm -DTIA_BASE_ADDRESS=$40 -f3 -v5 -ocode.bin
     57  8000 ????						; *OR* by declaring the label before including this file, eg:
     58  8000 ????						; TIA_BASE_ADDRESS = $40
     59  8000 ????						;   include "vcs.h"
     60  8000 ????
     61  8000 ????						; Alternate read/write address capability - allows for some disassembly compatibility
     62  8000 ????						; usage ; to allow reassembly to binary perfect copies).  This is essentially catering
     63  8000 ????						; for the mirrored ROM hardware registers.
     64  8000 ????
     65  8000 ????						; Usage: As per above, define the TIA_BASE_READ_ADDRESS and/or TIA_BASE_WRITE_ADDRESS
     66  8000 ????						; using the -D command-line switch, as required.  If the addresses are not defined,
     67  8000 ????						; they defaut to the TIA_BASE_ADDRESS.
     68  8000 ????
     69  8000 ????			  -	      IFNCONST	TIA_BASE_READ_ADDRESS
     70  8000 ????			  -TIA_BASE_READ_ADDRESS =	TIA_BASE_ADDRESS
     71  8000 ????				      ENDIF
     72  8000 ????
     73  8000 ????			  -	      IFNCONST	TIA_BASE_WRITE_ADDRESS
     74  8000 ????			  -TIA_BASE_WRITE_ADDRESS =	TIA_BASE_ADDRESS
     75  8000 ????				      ENDIF
     76  8000 ????
     77  8000 ????						;-------------------------------------------------------------------------------
     78  8000 ????
     79 U006d ????				      SEG.U	TIA_REGISTERS_WRITE
     80 U0040					      ORG	TIA_BASE_WRITE_ADDRESS
     81 U0040
     82 U0040							; DO NOT CHANGE THE RELATIVE ORDERING OF REGISTERS!
     83 U0040
     84 U0040		       00	   VSYNC      ds	1	; $00	 0000 00x0   Vertical Sync Set-Clear
     85 U0041		       00	   VBLANK     ds	1	; $01	 xx00 00x0   Vertical Blank Set-Clear
     86 U0042		       00	   WSYNC      ds	1	; $02	 ---- ----   Wait for Horizontal Blank
     87 U0043		       00	   RSYNC      ds	1	; $03	 ---- ----   Reset Horizontal Sync Counter
     88 U0044		       00	   NUSIZ0     ds	1	; $04	 00xx 0xxx   Number-Size player/missle 0
     89 U0045		       00	   NUSIZ1     ds	1	; $05	 00xx 0xxx   Number-Size player/missle 1
     90 U0046		       00	   COLUP0     ds	1	; $06	 xxxx xxx0   Color-Luminance Player 0
     91 U0047		       00	   COLUP1     ds	1	; $07	 xxxx xxx0   Color-Luminance Player 1
     92 U0048		       00	   COLUPF     ds	1	; $08	 xxxx xxx0   Color-Luminance Playfield
     93 U0049		       00	   COLUBK     ds	1	; $09	 xxxx xxx0   Color-Luminance Background
     94 U004a		       00	   CTRLPF     ds	1	; $0A	 00xx 0xxx   Control Playfield, Ball, Collisions
     95 U004b		       00	   REFP0      ds	1	; $0B	 0000 x000   Reflection Player 0
     96 U004c		       00	   REFP1      ds	1	; $0C	 0000 x000   Reflection Player 1
     97 U004d		       00	   PF0	      ds	1	; $0D	 xxxx 0000   Playfield Register Byte 0
     98 U004e		       00	   PF1	      ds	1	; $0E	 xxxx xxxx   Playfield Register Byte 1
     99 U004f		       00	   PF2	      ds	1	; $0F	 xxxx xxxx   Playfield Register Byte 2
    100 U0050		       00	   RESP0      ds	1	; $10	 ---- ----   Reset Player 0
    101 U0051		       00	   RESP1      ds	1	; $11	 ---- ----   Reset Player 1
    102 U0052		       00	   RESM0      ds	1	; $12	 ---- ----   Reset Missle 0
    103 U0053		       00	   RESM1      ds	1	; $13	 ---- ----   Reset Missle 1
    104 U0054		       00	   RESBL      ds	1	; $14	 ---- ----   Reset Ball
    105 U0055		       00	   AUDC0      ds	1	; $15	 0000 xxxx   Audio Control 0
    106 U0056		       00	   AUDC1      ds	1	; $16	 0000 xxxx   Audio Control 1
    107 U0057		       00	   AUDF0      ds	1	; $17	 000x xxxx   Audio Frequency 0
    108 U0058		       00	   AUDF1      ds	1	; $18	 000x xxxx   Audio Frequency 1
    109 U0059		       00	   AUDV0      ds	1	; $19	 0000 xxxx   Audio Volume 0
    110 U005a		       00	   AUDV1      ds	1	; $1A	 0000 xxxx   Audio Volume 1
    111 U005b		       00	   GRP0       ds	1	; $1B	 xxxx xxxx   Graphics Register Player 0
    112 U005c		       00	   GRP1       ds	1	; $1C	 xxxx xxxx   Graphics Register Player 1
    113 U005d		       00	   ENAM0      ds	1	; $1D	 0000 00x0   Graphics Enable Missle 0
    114 U005e		       00	   ENAM1      ds	1	; $1E	 0000 00x0   Graphics Enable Missle 1
    115 U005f		       00	   ENABL      ds	1	; $1F	 0000 00x0   Graphics Enable Ball
    116 U0060		       00	   HMP0       ds	1	; $20	 xxxx 0000   Horizontal Motion Player 0
    117 U0061		       00	   HMP1       ds	1	; $21	 xxxx 0000   Horizontal Motion Player 1
    118 U0062		       00	   HMM0       ds	1	; $22	 xxxx 0000   Horizontal Motion Missle 0
    119 U0063		       00	   HMM1       ds	1	; $23	 xxxx 0000   Horizontal Motion Missle 1
    120 U0064		       00	   HMBL       ds	1	; $24	 xxxx 0000   Horizontal Motion Ball
    121 U0065		       00	   VDELP0     ds	1	; $25	 0000 000x   Vertical Delay Player 0
    122 U0066		       00	   VDELP1     ds	1	; $26	 0000 000x   Vertical Delay Player 1
    123 U0067		       00	   VDELBL     ds	1	; $27	 0000 000x   Vertical Delay Ball
    124 U0068		       00	   RESMP0     ds	1	; $28	 0000 00x0   Reset Missle 0 to Player 0
    125 U0069		       00	   RESMP1     ds	1	; $29	 0000 00x0   Reset Missle 1 to Player 1
    126 U006a		       00	   HMOVE      ds	1	; $2A	 ---- ----   Apply Horizontal Motion
    127 U006b		       00	   HMCLR      ds	1	; $2B	 ---- ----   Clear Horizontal Move Registers
    128 U006c		       00	   CXCLR      ds	1	; $2C	 ---- ----   Clear Collision Latches
    129 U006d
    130 U006d							;-------------------------------------------------------------------------------
    131 U006d
    132 U004e ????				      SEG.U	TIA_REGISTERS_READ
    133 U0040					      ORG	TIA_BASE_READ_ADDRESS
    134 U0040
    135 U0040							;											bit 7	 bit 6
    136 U0040		       00	   CXM0P      ds	1	; $00	     xx00 0000	     Read Collision  M0-P1   M0-P0
    137 U0041		       00	   CXM1P      ds	1	; $01	     xx00 0000			     M1-P0   M1-P1
    138 U0042		       00	   CXP0FB     ds	1	; $02	     xx00 0000			     P0-PF   P0-BL
    139 U0043		       00	   CXP1FB     ds	1	; $03	     xx00 0000			     P1-PF   P1-BL
    140 U0044		       00	   CXM0FB     ds	1	; $04	     xx00 0000			     M0-PF   M0-BL
    141 U0045		       00	   CXM1FB     ds	1	; $05	     xx00 0000			     M1-PF   M1-BL
    142 U0046		       00	   CXBLPF     ds	1	; $06	     x000 0000			     BL-PF   -----
    143 U0047		       00	   CXPPMM     ds	1	; $07	     xx00 0000			     P0-P1   M0-M1
    144 U0048		       00	   INPT0      ds	1	; $08	     x000 0000	     Read Pot Port 0
    145 U0049		       00	   INPT1      ds	1	; $09	     x000 0000	     Read Pot Port 1
    146 U004a		       00	   INPT2      ds	1	; $0A	     x000 0000	     Read Pot Port 2
    147 U004b		       00	   INPT3      ds	1	; $0B	     x000 0000	     Read Pot Port 3
    148 U004c		       00	   INPT4      ds	1	; $0C		x000 0000	 Read Input (Trigger) 0
    149 U004d		       00	   INPT5      ds	1	; $0D		x000 0000	 Read Input (Trigger) 1
    150 U004e
    151 U004e							;-------------------------------------------------------------------------------
    152 U004e
    153 U0298 ????				      SEG.U	RIOT
    154 U0280					      ORG	$280
    155 U0280
    156 U0280							; RIOT MEMORY MAP
    157 U0280
    158 U0280		       00	   SWCHA      ds	1	; $280      Port A data register for joysticks:
    159 U0281							;			Bits 4-7 for player 1.  Bits 0-3 for player 2.
    160 U0281
    161 U0281		       00	   SWACNT     ds	1	; $281      Port A data direction register (DDR)
    162 U0282		       00	   SWCHB      ds	1	; $282		Port B data (console switches)
    163 U0283		       00	   SWBCNT     ds	1	; $283      Port B DDR
    164 U0284		       00	   INTIM      ds	1	; $284		Timer output
    165 U0285
    166 U0285		       00	   TIMINT     ds	1	; $285
    167 U0286
    168 U0286							; Unused/undefined registers ($285-$294)
    169 U0286
    170 U0286		       00		      ds	1	; $286
    171 U0287		       00		      ds	1	; $287
    172 U0288		       00		      ds	1	; $288
    173 U0289		       00		      ds	1	; $289
    174 U028a		       00		      ds	1	; $28A
    175 U028b		       00		      ds	1	; $28B
    176 U028c		       00		      ds	1	; $28C
    177 U028d		       00		      ds	1	; $28D
    178 U028e		       00		      ds	1	; $28E
    179 U028f		       00		      ds	1	; $28F
    180 U0290		       00		      ds	1	; $290
    181 U0291		       00		      ds	1	; $291
    182 U0292		       00		      ds	1	; $292
    183 U0293		       00		      ds	1	; $293
    184 U0294
    185 U0294		       00	   TIM1T      ds	1	; $294		set 1 clock interval
    186 U0295		       00	   TIM8T      ds	1	; $295      set 8 clock interval
    187 U0296		       00	   TIM64T     ds	1	; $296      set 64 clock interval
    188 U0297		       00	   T1024T     ds	1	; $297      set 1024 clock interval
    189 U0298
    190 U0298							;-------------------------------------------------------------------------------
    191 U0298							; The following required for back-compatibility with code which does not use
    192 U0298							; segments.
    193 U0298
    194  0000 ????				      SEG
    195  0000 ????
    196  0000 ????						; EOF
------- FILE ./sokoboo.asm
------- FILE macro.h LEVEL 2 PASS 3
      0  0000 ????				      include	"macro.h"
      1  0000 ????
      2  0000 ????						; MACRO.H
      3  0000 ????						; Version 1.06, 3/SEPTEMBER/2004
      4  0000 ????
      5  0000 ????	       00 6a	   VERSION_MACRO =	106
      6  0000 ????
      7  0000 ????						;
      8  0000 ????						; THIS FILE IS EXPLICITLY SUPPORTED AS A DASM-PREFERRED COMPANION FILE
      9  0000 ????						; PLEASE DO *NOT* REDISTRIBUTE MODIFIED VERSIONS OF THIS FILE!
     10  0000 ????						;
     11  0000 ????						; This file defines DASM macros useful for development for the Atari 2600.
     12  0000 ????						; It is distributed as a companion machine-specific support package
     13  0000 ????						; for the DASM compiler. Updates to this file, DASM, and associated tools are
     14  0000 ????						; available at at http://www.atari2600.org/dasm
     15  0000 ????						;
     16  0000 ????						; Many thanks to the people who have contributed.  If you take issue with the
     17  0000 ????						; contents, or would like to add something, please write to me
     18  0000 ????						; (atari2600@taswegian.com) with your contribution.
     19  0000 ????						;
     20  0000 ????						; Latest Revisions...
     21  0000 ????						;
     22  0000 ????						; 1.06  03/SEP/2004	 - nice revision of VERTICAL_BLANK (Edwin Blink)
     23  0000 ????						; 1.05  14/NOV/2003	 - Added VERSION_MACRO equate (which will reflect 100x version #)
     24  0000 ????						;			   This will allow conditional code to verify MACRO.H being
     25  0000 ????						;			   used for code assembly.
     26  0000 ????						; 1.04  13/NOV/2003	 - SET_POINTER macro added (16-bit address load)
     27  0000 ????						;
     28  0000 ????						; 1.03  23/JUN/2003	 - CLEAN_START macro added - clears TIA, RAM, registers
     29  0000 ????						;
     30  0000 ????						; 1.02  14/JUN/2003	 - VERTICAL_SYNC macro added
     31  0000 ????						;			   (standardised macro for vertical synch code)
     32  0000 ????						; 1.01  22/MAR/2003	 - SLEEP macro added.
     33  0000 ????						;			 - NO_ILLEGAL_OPCODES switch implemented
     34  0000 ????						; 1.0	22/MAR/2003		Initial release
     35  0000 ????
     36  0000 ????						; Note: These macros use illegal opcodes.  To disable illegal opcode usage,
     37  0000 ????						;   define the symbol NO_ILLEGAL_OPCODES (-DNO_ILLEGAL_OPCODES=1 on command-line).
     38  0000 ????						;   If you do not allow illegal opcode usage, you must include this file
     39  0000 ????						;   *after* including VCS.H (as the non-illegal opcodes access hardware
     40  0000 ????						;   registers and require them to be defined first).
     41  0000 ????
     42  0000 ????						; Available macros...
     43  0000 ????						;   SLEEP n		 - sleep for n cycles
     44  0000 ????						;   VERTICAL_SYNC	 - correct 3 scanline vertical synch code
     45  0000 ????						;   CLEAN_START	 - set machine to known state on startup
     46  0000 ????						;   SET_POINTER	 - load a 16-bit absolute to a 16-bit variable
     47  0000 ????
     48  0000 ????						;-------------------------------------------------------------------------------
     49  0000 ????						; SLEEP duration
     50  0000 ????						; Original author: Thomas Jentzsch
     51  0000 ????						; Inserts code which takes the specified number of cycles to execute.	This is
     52  0000 ????						; useful for code where precise timing is required.
     53  0000 ????						; ILLEGAL-OPCODE VERSION DOES NOT AFFECT FLAGS OR REGISTERS.
     54  0000 ????						; LEGAL OPCODE VERSION MAY AFFECT FLAGS
     55  0000 ????						; Uses illegal opcode (DASM 2.20.01 onwards).
     56  0000 ????
     57  0000 ????				      MAC	sleep
     58  0000 ????			   .CYCLES    SET	{1}
     59  0000 ????
     60  0000 ????				      IF	.CYCLES < 2
     61  0000 ????				      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
     62  0000 ????				      ERR
     63  0000 ????				      ENDIF
     64  0000 ????
     65  0000 ????				      IF	.CYCLES & 1
     66  0000 ????				      IFNCONST	NO_ILLEGAL_OPCODES
     67  0000 ????				      nop	0
     68  0000 ????				      ELSE
     69  0000 ????				      bit	VSYNC
     70  0000 ????				      ENDIF
     71  0000 ????			   .CYCLES    SET	.CYCLES - 3
     72  0000 ????				      ENDIF
     73  0000 ????
     74  0000 ????				      REPEAT	.CYCLES / 2
     75  0000 ????				      nop
     76  0000 ????				      REPEND
     77  0000 ????				      ENDM		;usage: SLEEP n (n>1)
     78  0000 ????
     79  0000 ????						;-------------------------------------------------------------------------------
     80  0000 ????						; VERTICAL_SYNC
     81  0000 ????						; revised version by Edwin Blink -- saves bytes!
     82  0000 ????						; Inserts the code required for a proper 3 scanline vertical sync sequence
     83  0000 ????						; Note: Alters the accumulator
     84  0000 ????
     85  0000 ????						; OUT: A = 0
     86  0000 ????
     87  0000 ????				      MAC	vertical_sync
     88  0000 ????				      lda	#%1110	; each '1' bits generate a VSYNC ON line (bits 1..3)
     89  0000 ????			   .VSLP1     sta	WSYNC	; 1st '0' bit resets Vsync, 2nd '0' bit exit loop
     90  0000 ????				      sta	VSYNC
     91  0000 ????				      lsr
     92  0000 ????				      bne	.VSLP1	; branch until VYSNC has been reset
     93  0000 ????				      ENDM
     94  0000 ????
     95  0000 ????						;-------------------------------------------------------------------------------
     96  0000 ????						; CLEAN_START
     97  0000 ????						; Original author: Andrew Davie
     98  0000 ????						; Standardised start-up code, clears stack, all TIA registers and RAM to 0
     99  0000 ????						; Sets stack pointer to $FF, and all registers to 0
    100  0000 ????						; Sets decimal mode off, sets interrupt flag (kind of un-necessary)
    101  0000 ????						; Use as very first section of code on boot (ie: at reset)
    102  0000 ????						; Code written to minimise total ROM usage - uses weird 6502 knowledge :)
    103  0000 ????
    104  0000 ????				      MAC	clean_start
    105  0000 ????				      sei
    106  0000 ????				      cld
    107  0000 ????
    108  0000 ????				      ldx	#0
    109  0000 ????				      txa
    110  0000 ????				      tay
    111  0000 ????			   .CLEAR_STACK dex
    112  0000 ????				      txs
    113  0000 ????				      pha
    114  0000 ????				      bne	.CLEAR_STACK	; SP=$FF, X = A = Y = 0
    115  0000 ????
    116  0000 ????				      ENDM
    117  0000 ????
    118  0000 ????						;-------------------------------------------------------
    119  0000 ????						; SET_POINTER
    120  0000 ????						; Original author: Manuel Rotschkar
    121  0000 ????						;
    122  0000 ????						; Sets a 2 byte RAM pointer to an absolute address.
    123  0000 ????						;
    124  0000 ????						; Usage: SET_POINTER pointer, address
    125  0000 ????						; Example: SET_POINTER SpritePTR, SpriteData
    126  0000 ????						;
    127  0000 ????						; Note: Alters the accumulator, NZ flags
    128  0000 ????						; IN 1: 2 byte RAM location reserved for pointer
    129  0000 ????						; IN 2: absolute address
    130  0000 ????
    131  0000 ????				      MAC	set_pointer
    132  0000 ????			   .POINTER   SET	{1}
    133  0000 ????			   .ADDRESS   SET	{2}
    134  0000 ????
    135  0000 ????				      LDA	#<.ADDRESS	; Get Lowbyte of Address
    136  0000 ????				      STA	.POINTER	; Store in pointer
    137  0000 ????				      LDA	#>.ADDRESS	; Get Hibyte of Address
    138  0000 ????				      STA	.POINTER+1	; Store in pointer+1
    139  0000 ????
    140  0000 ????				      ENDM
    141  0000 ????
    142  0000 ????						;-------------------------------------------------------
    143  0000 ????						; BOUNDARY byte#
    144  0000 ????						; Original author: Denis Debro (borrowed from Bob Smith / Thomas)
    145  0000 ????						;
    146  0000 ????						; Push data to a certain position inside a page and keep count of how
    147  0000 ????						; many free bytes the programmer will have.
    148  0000 ????						;
    149  0000 ????						; eg: BOUNDARY 5    ; position at byte #5 in page
    150  0000 ????
    151  0000 ????			   __DASM__TOTAL_FREE_MEMORY SET	0
    152  0000 ????			   .FREE_BYTES SET	0
    153  0000 ????				      MAC	boundary
    154  0000 ????				      REPEAT	256
    155  0000 ????				      IF	<. % {1} = 0
    156  0000 ????				      MEXIT
    157  0000 ????				      ELSE
    158  0000 ????			   .FREE_BYTES SET	.FREE_BYTES + 1
    159  0000 ????				      .byte	$00
    160  0000 ????				      ENDIF
    161  0000 ????				      REPEND
    162  0000 ????			   __DASM__TOTAL_FREE_MEMORY SET	__DASM__TOTAL_FREE_MEMORY + .FREE_BYTES
    163  0000 ????				      ENDM
    164  0000 ????
    165  0000 ????
    166  0000 ????						; EOF
------- FILE ./sokoboo.asm
     41  0000 ????
     42  0000 ????			   ORIGIN     SET	0
     43  0000 ????			   ORIGIN_RAM SET	0
     44  0000 ????
------- FILE segtime.asm LEVEL 2 PASS 3
      0  0000 ????				      include	"segtime.asm"
      1  0000 ????						;    Sokoboo - a Sokoban implementation
      2  0000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  0000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0000 ????						;
      5  0000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0000 ????						;
      7  0000 ????						;    Code related to the generic tile-based display engine was developed by
      8  0000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0000 ????						;
     12  0000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  0000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0000 ????						;    directory for Apache licensing details.
     15  0000 ????						;
     16  0000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0000 ????						;    See the copyright notices in the License directory for a list of level
     18  0000 ????						;    contributors.
     19  0000 ????						;
     20  0000 ????						;    Except where otherwise indicated, this software is released under the
     21  0000 ????						;    following licensing arrangement...
     22  0000 ????						;
     23  0000 ????						;    This program is free software: you can redistribute it and/or modify
     24  0000 ????						;    it under the terms of the GNU General Public License as published by
     25  0000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  0000 ????						;    (at your option) any later version.
     27  0000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0000 ????
     29  0000 ????						;    This program is distributed in the hope that it will be useful,
     30  0000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0000 ????						;    GNU General Public License for more details.
     33  0000 ????
     34  0000 ????						; segtime optimization (averages):
     35  0000 ????						;   lost time = segtime/2 * 64
     36  0000 ????						;   num-segments = (vblank + overscan time) (NTSC 276=62+51=113) / 2 / segtime
     37  0000 ????						;   overhead: num-segments * 8 (assuming minimal INTIM check only)
     38  0000 ????						;
     39  0000 ????						; segtime = 2:
     40  0000 ????						;   lost time = 64
     41  0000 ????						;   num-segments = 28
     42  0000 ????						;   overhead = 224!
     43  0000 ????						; segtime = 3:
     44  0000 ????						;   lost time = 96
     45  0000 ????						;   num-segments = 18
     46  0000 ????						;   overhead = 144!
     47  0000 ????						; segtime = 4: 	     <--!!!
     48  0000 ????						;   lost time = 128!
     49  0000 ????						;   num-segments = 28
     50  0000 ????						;   overhead = 112
     51  0000 ????						; segtime = 5:
     52  0000 ????						;   lost time = 160!
     53  0000 ????						;   num-segments = 11
     54  0000 ????						;   overhead = 88
     55  0000 ????						; segtime = 6:
     56  0000 ????						;   lost time = 192!
     57  0000 ????						;   num-segments = 9
     58  0000 ????						;   overhead = 72
     59  0000 ????						; segtime = 7:
     60  0000 ????						;   lost time = 224!
     61  0000 ????						;   num-segments = 8
     62  0000 ????						;   overhead = 64
     63  0000 ????						; segtime = 10:
     64  0000 ????						;   lost time = 320!
     65  0000 ????						;   num-segments = 5
     66  0000 ????						;   overhead = 40
     67  0000 ????						; segtime = 20:
     68  0000 ????						;   lost time = 640!
     69  0000 ????						;   num-segments = 2
     70  0000 ????						;   overhead = 16
     71  0000 ????						; segtime = 40:
     72  0000 ????						;   lost time = 1280!
     73  0000 ????						;   num-segments = 1
     74  0000 ????						;   overhead = 8
     75  0000 ????
     76  0000 ????						; optimal INTIM segtime is 4 + 1 = 5,
     77  0000 ????						; below wasted time increases rapidly, above only moderately
     78  0000 ????						; if the overhead becomes larger, optimal segtimes will increase too
     79  0000 ????						; also the lost time will become smaller, if smaller segments can be used instead,
     80  0000 ????						;  so larger segtimes are not that bad then
     81  0000 ????
     82  0000 ????
     83  0000 ????				      MAC	segtime
     84  0000 ????			   {1}	      SET	{2}
     85  0000 ????			   TEST_{1}   =	0
     86  0000 ????				      ENDM
     87  0000 ????
     88  0000 ????				      MAC	segtime_c
     89  0000 ????			   {1}	      SET	({2}+32)/64 + 2
     90  0000 ????			   TEST_{1}   =	0
     91  0000 ????				      ENDM
     92  0000 ????
     93  0000 ????
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_DIRECT, 361 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019
      1  0000 ????			   SEGTIME_SCD_DIRECT SET	(361 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_DIRECT =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_QUICK, 344 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019
      1  0000 ????			   SEGTIME_SCD_QUICK SET	(344 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_QUICK =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_SLOW, 676 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019
      1  0000 ????			   SEGTIME_SCD_SLOW SET	(676 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_SLOW =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SCD_PF0, 88 + CYCLES_DRAWANOTHER	;✅ @ 4/8/2019 ??
      1  0000 ????			   SEGTIME_SCD_PF0 SET	(88 + CYCLES_DRAWANOTHER+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SCD_PF0 =	0
     98  0000 ????
     99  0000 ????						;---------------------------------------------------------------------------------------------------
    100  0000 ????						; Pathways
    101  0000 ????						; StealPart3, not enough time for SCD_SLOW --> 79✅
    102  0000 ????						; if QuickDraw does immediate exit, 58✅
    103  0000 ????
    104  0000 ????
    105  0000 ????	       00 04	   SEGTIME_SCD_MIN =	SEGTIME_SCD_PF0
    106  0000 ????
    107  0000 ????						;    SEGTIME_C SEGTIME_SCD_MIN, SEGTIME_SCD_PF0
    108  0000 ????						;---------------------------------------------------------------------------------------------------
    109  0000 ????
      0  0000 ????				      SEGTIME_C	SEGTIME_BDF, 2512	;✅
      1  0000 ????			   SEGTIME_BDF SET	(2512+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_BDF =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_BDS, 68	;✅
      1  0000 ????			   SEGTIME_BDS SET	(68+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_BDS =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_DSL, 127	;✅
      1  0000 ????			   SEGTIME_DSL SET	(127+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_DSL =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_SWITCHOBJECTS,46	;✅
      1  0000 ????			   SEGTIME_SWITCHOBJECTS SET	(46+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_SWITCHOBJECTS =	0
    114  0000 ????
      0  0000 ????				      SEGTIME_C	MINIMUM_SEGTIME, 95	;✅ processing slice minimum requirement
      1  0000 ????			   MINIMUM_SEGTIME SET	(95+32)/64 + 2
      2  0000 ????	       00 00	   TEST_MINIMUM_SEGTIME =	0
      0  0000 ????				      SEGTIME_C	SEGTIME_MINIMUM_TIMESLICE, 54	;✅ abort time maximum requirement for timeslice
      1  0000 ????			   SEGTIME_MINIMUM_TIMESLICE SET	(54+32)/64 + 2
      2  0000 ????	       00 00	   TEST_SEGTIME_MINIMUM_TIMESLICE =	0
    117  0000 ????
    118  0000 ????						; Note: we add 1 to the minimum because there's a bit of overhead at the start of the timeslice code which vectors
    119  0000 ????						; to the appropriate timeslice.  That timeslice then checks the segtime again -- and in the case of the minimum we
    120  0000 ????						; will already have used 55 cycles of the available timeslice to get to the segtime check. Given that there are only
    121  0000 ????						; 9 spare cycles in the 'unit' left, it's probably more efficient to abort earlier and save those 55 cycles for other
    122  0000 ????						; uses ...
    123  0000 ????
    124  0000 ????
    125  0000 ????						; The following timings have been physicaly timed via code/debugger... the comment shows the worst observed time.
    126  0000 ????						; Generally the allocated segtime should be a bit bigger than the worst observed, to cater for the minor code
    127  0000 ????						; outside the creature itself which might otherwise cause screen time over-run.
    128  0000 ????
    129  0000 ????						; The following are NOT object-related and timing is a bit of manual guesswork/calculation
    130  0000 ????						; Comment may indicate at what value a glitch was DEFINITELY seen. These timings may not be optimal.
    131  0000 ????
      0  0000 ????				      SEGTIME	SEGTIME_MAN,22	;18 ;12	  ;NFI
      1  0000 ????			   SEGTIME_MAN SET	22
      2  0000 ????	       00 00	   TEST_SEGTIME_MAN =	0
------- FILE ./sokoboo.asm
     46  0000 ????
     47  0000 ????						;FIXED_BANK		 = 3 * 2048	      ;-->  8K ROM tested OK
     48  0000 ????						;FIXED_BANK		  = 7 * 2048	      ;-->  16K ROM tested OK
     49  0000 ????	       78 00	   FIXED_BANK =	15 * 2048	; ->> 32K
     50  0000 ????						;FIXED_BANK		 = 31 * 2048	       ; ->> 64K
     51  0000 ????						;FIXED_BANK		 = 239 * 2048	      ;--> 480K ROM tested OK (KK/CC2 compatibility)
     52  0000 ????						;FIXED_BANK		 = 127 * 2048	      ;--> 256K ROM tested OK
     53  0000 ????						;FIXED_BANK		 = 255 * 2048	      ;--> 512K ROM tested OK (CC2 can't handle this)
     54  0000 ????
     55  0000 ????	       00 01	   YES	      =	1
     56  0000 ????	       00 00	   NO	      =	0
     57  0000 ????
     58  0000 ????						;===================================
     59  0000 ????	       00 00	   FINAL_VERSION =	NO	; this OVERRIDES any selections below and sets everything correct for a final release
     60  0000 ????						;===================================
     61  0000 ????
     62  0000 ????						;-------------------------------------------------------------------------------
     63  0000 ????						; The following are optional YES/NO depending on phase of the moon
     64  0000 ????			   L276       SET	YES	; use 276 line display for NTSC
     65  0000 ????						;-------------------------------------------------------------------------------
     66  0000 ????						; DO NOT MODIFY THE BELOW SETTINGS -- USE THE ONES ABOVE!
     67  0000 ????						; Here we make sure everyting is OK based on the single switch -- less chance for accidents
     68  0000 ????			  -	      IF	FINAL_VERSION = YES
     69  0000 ????			  -L276       SET	YES	; use 276 line display for NTSC
     70  0000 ????				      ENDIF
     71  0000 ????
     72  0000 ????						;-------------------------------------------------------------------------------
     73  0000 ????
     74  0000 ????	       00 01	   COMPILE_ILLEGALOPCODES =	1
     75  0000 ????	       00 0c	   RESERVED_FOR_STACK =	12	; bytes guaranteed not overwritten by variable use
     76  0000 ????
     77  0000 ????	       00 02	   PALETTE_INTENSITY_ADJUST =	2
     78  0000 ????	       00 06	   PUSH_LIMIT =	6	; slowdown when pushing on a BOX
     79  0000 ????
     80  0000 ????						; time bonus countdown constants:
     81  0000 ????	       00 ff	   EXTRA_LIFE_TIMER =	255	; Cosmic Ark star effect on extra life. Should be 5 seconds like in original
     82  0000 ????	       00 3c	   SCORING_TIMER =	60	; ~1.0 second
     83  0000 ????	       00 96	   SCORING_TIMER_FIRST =	150	; begin level timer is long to show level/lives clearly
     84  0000 ????
     85  0000 ????	       00 07	   DIRECTION_BITS =	%111	; for ManLastDirection
     86  0000 ????
     87  0000 ????	       00 a0	   MAX_THROTTLE =	160	; must be small enough to allow ~2 * max add value overflow (<256 - 2*max throttle value!)
     88  0000 ????
     89  0000 ????						;scoring flags contants:
     90  0000 ????	       00 03	   DISPLAY_FLAGS =	%11
     91  0000 ????	       00 00	   DISPLAY_TIME =	%00
     92  0000 ????	       00 01	   DISPLAY_SCORE =	%01
     93  0000 ????	       00 02	   DISPLAY_LIVES =	%10
     94  0000 ????	       00 03	   DISPLAY_HIGH =	%11
     95  0000 ????
     96  0000 ????						;------------------------------------------------------------------------------
     97  0000 ????
     98  0000 ????	       00 00	   DIGITS     =	NO
     99  0000 ????	       00 01	   WAIT_FOR_INITIAL_DRAW =	YES	; blank until all initial tiles drawn
    100  0000 ????	       00 01	   PLUSCART   =	YES
    101  0000 ????
    102  0000 ????						;------------------------------------------------------------------------------
    103  0000 ????
    104  0000 ????	       00 0a	   SCREEN_WIDTH =	10	; board characters per line (DIFFICULT TO CHANGE)
    105  0000 ????
    106  0000 ????	       00 08	   SCREEN_LINES =	8	; number of scanlines in screen buffer
    107  0000 ????	       00 18	   LINES_PER_CHAR =	24	; MULTIPLE OF 3 SO RGB INTERFACES CHARS OK
    108  0000 ????
    109  0000 ????	       00 50	   SCREEN_ARRAY_SIZE =	SCREEN_WIDTH * SCREEN_LINES
    110  0000 ????
    111  0000 ????
    112  0000 ????	       00 3f	   SET_BANK   =	$3F	; write address to switch ROM banks
    113  0000 ????	       00 3e	   SET_BANK_RAM =	$3E	; write address to switch RAM banks
    114  0000 ????
    115  0000 ????
    116  0000 ????						; color constants:
    117  0000 ????	       00 0e	   WHITE      =	$0e	; bright white, for NTSC and PAL
    118  0000 ????
    119  0000 ????	       10 00	   RAM_3E     =	$1000
    120  0000 ????	       04 00	   RAM_SIZE   =	$400
    121  0000 ????	       04 00	   RAM_WRITE  =	$400	; add this to RAM address when doing writes
    122  0000 ????
    123  0000 ????	       00 b4	   RND_EOR_VAL =	$b4
    124  0000 ????
    125  0000 ????
    126  0000 ????						; Platform constants:
    127  0000 ????	       00 02	   PAL	      =	%10
    128  0000 ????	       00 02	   PAL_50     =	PAL|0
    129  0000 ????	       00 03	   PAL_60     =	PAL|1
    130  0000 ????
    131  0000 ????
    132  0000 ????				      IF	L276
    133  0000 ????	       00 30	   VBLANK_TIM_NTSC =	48	; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
    134  0000 ????			  -	      ELSE
    135  0000 ????			  -VBLANK_TIM_NTSC =	50	; NTSC 262
    136  0000 ????				      ENDIF
    137  0000 ????	       00 55	   VBLANK_TIM_PAL =	85	;85			    ; PAL 312 (we could increase this too, if we want to, but I suppose the used vertical screen size would become very small then)
    138  0000 ????
    139  0000 ????				      IF	L276
    140  0000 ????	       00 23	   OVERSCAN_TIM_NTSC =	35	;24 ;51			; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
    141  0000 ????			  -	      ELSE
    142  0000 ????			  -OVERSCAN_TIM_NTSC =	8	;51			    ; NTSC 262
    143  0000 ????				      ENDIF
    144  0000 ????	       00 29	   OVERSCAN_TIM_PAL =	41	; PAL 312 (we could increase this too, if we want to, but I suppose the used vertical screen size would become very small then)
    145  0000 ????
    146  0000 ????				      IF	L276
    147  0000 ????	       01 14	   SCANLINES_NTSC =	276	; NTSC 276 (Desert Falcon does 280, so this should be pretty safe)
    148  0000 ????			  -	      ELSE
    149  0000 ????			  -SCANLINES_NTSC =	262	; NTSC 262
    150  0000 ????				      ENDIF
    151  0000 ????	       01 38	   SCANLINES_PAL =	312
    152  0000 ????
    153  0000 ????
    154  0000 ????						;------------------------------------------------------------------------------
    155  0000 ????						; MACRO definitions
    156  0000 ????
------- FILE macro2.h LEVEL 2 PASS 3
      0  0000 ????				      include	"macro2.h"
      1  0000 ????						; macros
      2  0000 ????
      3  0000 ????				      MAC	ntsc_to_pal
      4  0000 ????				      IF	{1} = 0
      5  0000 ????				      .byte	{1}+{2}
      6  0000 ????				      ENDIF
      7  0000 ????				      IF	{1} = $10
      8  0000 ????				      .byte	$20+{2}
      9  0000 ????				      ENDIF
     10  0000 ????				      IF	{1} = $20
     11  0000 ????				      .byte	$40+{2}
     12  0000 ????				      ENDIF
     13  0000 ????				      IF	{1} = $30
     14  0000 ????				      .byte	$40+{2}
     15  0000 ????				      ENDIF
     16  0000 ????				      IF	{1} = $40
     17  0000 ????				      .byte	$60+{2}
     18  0000 ????				      ENDIF
     19  0000 ????				      IF	{1} = $50
     20  0000 ????				      .byte	$80+{2}
     21  0000 ????				      ENDIF
     22  0000 ????				      IF	{1} = $60
     23  0000 ????				      .byte	$C0+{2}
     24  0000 ????				      ENDIF
     25  0000 ????				      IF	{1} = $70
     26  0000 ????				      .byte	$D0+{2}
     27  0000 ????				      ENDIF
     28  0000 ????				      IF	{1} = $80
     29  0000 ????				      .byte	$B0+{2}
     30  0000 ????				      ENDIF
     31  0000 ????				      IF	{1} = $90
     32  0000 ????				      .byte	$90+{2}
     33  0000 ????				      ENDIF
     34  0000 ????				      IF	{1} = $A0
     35  0000 ????				      .byte	$70+{2}
     36  0000 ????				      ENDIF
     37  0000 ????				      IF	{1} = $B0
     38  0000 ????				      .byte	$50+{2}
     39  0000 ????				      ENDIF
     40  0000 ????				      IF	{1} = $C0
     41  0000 ????				      .byte	$30+{2}
     42  0000 ????				      ENDIF
     43  0000 ????				      IF	{1} = $D0
     44  0000 ????				      .byte	$30+{2}
     45  0000 ????				      ENDIF
     46  0000 ????				      IF	{1} = $E0
     47  0000 ????				      .byte	$20+{2}
     48  0000 ????				      ENDIF
     49  0000 ????				      IF	{1} = $F0
     50  0000 ????				      .byte	$40+{2}
     51  0000 ????				      ENDIF
     52  0000 ????				      ENDM		; {col} {intensity}
------- FILE ./sokoboo.asm
    158  0000 ????
    159  0000 ????	       08 00	   ROM_BANK_SIZE =	$800
    160  0000 ????
    161  0000 ????				      MAC	newbank
    162  0000 ????				      SEG	{1}
    163  0000 ????				      ORG	ORIGIN
    164  0000 ????				      RORG	$F000
    165  0000 ????			   BANK_START SET	*
    166  0000 ????			   {1}	      SET	ORIGIN / 2048
    167  0000 ????			   ORIGIN     SET	ORIGIN + 2048
    168  0000 ????			   _CURRENT_BANK SET	{1}
    169  0000 ????				      ENDM		; bank name
    170  0000 ????
    171  0000 ????				      MAC	define_1k_segment
    172  0000 ????				      ALIGN	$400
    173  0000 ????			   SEGMENT_{1} SET	*
    174  0000 ????			   BANK_{1}   SET	_CURRENT_BANK
    175  0000 ????				      ENDM		; {seg name}
    176  0000 ????
    177  0000 ????				      MAC	check_bank_size
    178  0000 ????			   .TEMP      =	* - BANK_START
    179  0000 ????				      ECHO	{1}, "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
    180  0000 ????				      if	( .TEMP ) > ROM_BANK_SIZE
    181  0000 ????				      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
    182  0000 ????				      ERR
    183  0000 ????				      endif
    184  0000 ????				      ENDM		; name
    185  0000 ????
    186  0000 ????
    187  0000 ????				      MAC	check_half_bank_size
    188  0000 ????						; This macro is for checking the first 1K of ROM bank data that is to be copied to RAM.
    189  0000 ????						; Note that these ROM banks can contain 2K, so this macro will generally go 'halfway'
    190  0000 ????			   .TEMP      =	* - BANK_START
    191  0000 ????				      ECHO	{1}, "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
    192  0000 ????				      if	( .TEMP ) > ROM_BANK_SIZE/2
    193  0000 ????				      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
    194  0000 ????				      ERR
    195  0000 ????				      endif
    196  0000 ????				      ENDM		; name
    197  0000 ????
    198  0000 ????
    199  0000 ????				      MAC	overlay
    200  0000 ????				      SEG.U	OVERLAY_{1}
    201  0000 ????				      org	Overlay
    202  0000 ????				      ENDM		; {name}
    203  0000 ????
    204  0000 ????						;--------------------------------------------------------------------------
    205  0000 ????
    206  0000 ????				      MAC	validate_overlay
    207  0000 ????				      LIST	OFF
    208  0000 ????				      if	* - Overlay > OVERLAY_SIZE
    209  0000 ????				      ECHO	"Overlay ", {1}, "too big"
    210  0000 ????				      ERR
    211  0000 ????				      endif
    212  0000 ????				      LIST	ON
    213  0000 ????				      ENDM
    214  0000 ????
    215  0000 ????						;--------------------------------------------------------------------------
    216  0000 ????						; Macro inserts a page break if the object would overlap a page
    217  0000 ????
    218  0000 ????				      MAC	optional_pagebreak
    219  0000 ????				      LIST	OFF
    220  0000 ????				      IF	(>( * + {2} -1 )) > ( >* )
    221  0000 ????			   EARLY_LOCATION SET	*
    222  0000 ????				      ALIGN	256
    223  0000 ????				      ECHO	"PAGE BREAK INSERTED FOR ", {1}
    224  0000 ????				      ECHO	"REQUESTED SIZE = ", {2}
    225  0000 ????				      ECHO	"WASTED SPACE = ", *-EARLY_LOCATION
    226  0000 ????				      ECHO	"PAGEBREAK LOCATION = ", *
    227  0000 ????				      ENDIF
    228  0000 ????				      LIST	ON
    229  0000 ????				      ENDM		; { string, size }
    230  0000 ????
    231  0000 ????
    232  0000 ????				      MAC	check_page_crossing
    233  0000 ????				      LIST	OFF
    234  0000 ????				      if	( >BLOCK_END != >BLOCK_START )
    235  0000 ????				      ECHO	"PAGE CROSSING @ ", BLOCK_START
    236  0000 ????				      endif
    237  0000 ????				      LIST	ON
    238  0000 ????				      ENDM
    239  0000 ????
    240  0000 ????				      MAC	checkpage
    241  0000 ????				      LIST	OFF
    242  0000 ????				      IF	>. != >{1}
    243  0000 ????				      ECHO	""
    244  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    245  0000 ????				      ECHO	""
    246  0000 ????				      ERR
    247  0000 ????				      ENDIF
    248  0000 ????				      LIST	ON
    249  0000 ????				      ENDM
    250  0000 ????
    251  0000 ????				      MAC	checkpagex
    252  0000 ????				      LIST	OFF
    253  0000 ????				      IF	>. != >{1}
    254  0000 ????				      ECHO	""
    255  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ") @ {0}"
    256  0000 ????				      ECHO	{2}
    257  0000 ????				      ECHO	""
    258  0000 ????				      ERR
    259  0000 ????				      ENDIF
    260  0000 ????				      LIST	ON
    261  0000 ????				      ENDM
    262  0000 ????
    263  0000 ????
    264  0000 ????				      MAC	checkpage_bne
    265  0000 ????				      LIST	OFF
    266  0000 ????				      IF	0	;>(. + 2) != >{1}
    267  0000 ????				      ECHO	""
    268  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    269  0000 ????				      ECHO	""
    270  0000 ????				      ERR
    271  0000 ????				      ENDIF
    272  0000 ????				      LIST	ON
    273  0000 ????				      bne	{1}
    274  0000 ????				      ENDM
    275  0000 ????
    276  0000 ????				      MAC	checkpage_bpl
    277  0000 ????				      LIST	OFF
    278  0000 ????				      IF	(>(.+2 )) != >{1}
    279  0000 ????				      ECHO	""
    280  0000 ????				      ECHO	"ERROR: different pages! (", {1}, ",", ., ")"
    281  0000 ????				      ECHO	""
    282  0000 ????				      ERR
    283  0000 ????				      ENDIF
    284  0000 ????				      LIST	ON
    285  0000 ????				      bpl	{1}
    286  0000 ????				      ENDM
    287  0000 ????
    288  0000 ????				      MAC	align_free
    289  0000 ????			   FREE       SET	FREE - .
    290  0000 ????				      align	{1}
    291  0000 ????			   FREE       SET	FREE + .
    292  0000 ????				      echo	"@", ., ":", FREE
    293  0000 ????				      ENDM
    294  0000 ????
    295  0000 ????						;--------------------------------------------------------------------------
    296  0000 ????
    297  0000 ????				      MAC	vector
    298  0000 ????				      .word	{1}
    299  0000 ????				      ENDM		; just a word pointer to code
    300  0000 ????
    301  0000 ????
    302  0000 ????				      MAC	define_subroutine
    303  0000 ????			   BANK_{1}   =	_CURRENT_BANK	; bank in which this subroutine resides
    304  0000 ????				      SUBROUTINE		; keep everything local
    305  0000 ????			   {1}			; entry point
    306  0000 ????				      ENDM		; name of subroutine
    307  0000 ????
    308  0000 ????
    309  0000 ????
    310  0000 ????						;--------------------------------------------------------------------------
    311  0000 ????
    312  0000 ????				      MAC	newrambank
    313  0000 ????				      SEG.U	{1}
    314  0000 ????				      ORG	ORIGIN_RAM
    315  0000 ????				      RORG	RAM_3E
    316  0000 ????			   BANK_START SET	*
    317  0000 ????			   {1}	      SET	ORIGIN_RAM / RAM_SIZE
    318  0000 ????			   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    319  0000 ????				      ENDM		; bank name
    320  0000 ????
    321  0000 ????				      MAC	validate_ram_size
    322  0000 ????				      if	* - RAM_3E > RAM_SIZE
    323  0000 ????				      ERR
    324  0000 ????				      endif
    325  0000 ????				      ENDM
    326  0000 ????
    327  0000 ????				      MAC	next_random
    328  0000 ????						; update random value:
    329  0000 ????				      lda	rnd	; 3
    330  0000 ????				      lsr		; 2
    331  0000 ????				      IFCONST	rndHi
    332  0000 ????				      ror	rndHi	; 5	 16 bit LFSR
    333  0000 ????				      ENDIF
    334  0000 ????				      bcc	.skipEOR	; 2/3
    335  0000 ????				      eor	#RND_EOR_VAL	; 2
    336  0000 ????			   .skipEOR
    337  0000 ????				      sta	rnd	; 3 = 14/19
    338  0000 ????				      ENDM
    339  0000 ????
    340  0000 ????				      MAC	resync
    341  0000 ????						; resync screen, X and Y == 0 afterwards
    342  0000 ????				      lda	#%10	; make sure VBLANK is ON
    343  0000 ????				      sta	VBLANK
    344  0000 ????
    345  0000 ????				      ldx	#8	; 5 or more RESYNC_FRAMES
    346  0000 ????			   .loopResync
    347  0000 ????				      VERTICAL_SYNC
    348  0000 ????
    349  0000 ????				      ldy	#SCANLINES_NTSC/2 - 2
    350  0000 ????				      lda	Platform
    351  0000 ????				      eor	#PAL_50	; PAL-50?
    352  0000 ????				      bne	.ntsc
    353  0000 ????				      ldy	#SCANLINES_PAL/2 - 2
    354  0000 ????			   .ntsc
    355  0000 ????			   .loopWait
    356  0000 ????				      sta	WSYNC
    357  0000 ????				      sta	WSYNC
    358  0000 ????				      dey
    359  0000 ????				      bne	.loopWait
    360  0000 ????				      dex
    361  0000 ????				      bne	.loopResync
    362  0000 ????				      ENDM
    363  0000 ????
    364  0000 ????				      MAC	set_platform
    365  0000 ????						; 00 = NTSC
    366  0000 ????						; 01 = NTSC
    367  0000 ????						; 10 = PAL-50
    368  0000 ????						; 11 = PAL-60
    369  0000 ????				      lda	SWCHB
    370  0000 ????				      rol
    371  0000 ????				      rol
    372  0000 ????				      rol
    373  0000 ????				      and	#%11
    374  0000 ????				      eor	#PAL
    375  0000 ????				      sta	Platform	; P1 difficulty --> TV system (0=NTSC, 1=PAL)
    376  0000 ????				      ENDM
    377  0000 ????
    378  0000 ????				      MAC	load_animation
    379  0000 ????				      lda	#<Animation_{1}
    380  0000 ????				      sta	animation
    381  0000 ????				      lda	#>Animation_{1}
    382  0000 ????				      sta	animation+1
    383  0000 ????				      lda	#0
    384  0000 ????				      sta	animation_delay
    385  0000 ????				      lda	#ANIMATION_{1}_ID
    386  0000 ????				      sta	ManAnimationID
    387  0000 ????				      ENDM
    388  0000 ????
    389  0000 ????
    390  0000 ????						;------------------------------------------------------------------------------
    391  0000 ????
    392  0000 ????
------- FILE zeropage.asm LEVEL 2 PASS 3
      0  0000 ????				      include	"zeropage.asm"
      1  0000 ????						;    Sokoboo - a Sokoban implementation
      2  0000 ????						;    using a generic tile-based display engine for the Atari 2600
      3  0000 ????						;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0000 ????						;
      5  0000 ????						;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0000 ????						;
      7  0000 ????						;    Code related to the generic tile-based display engine was developed by
      8  0000 ????						;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0000 ????						;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0000 ????						;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0000 ????						;
     12  0000 ????						;    Code related to music and sound effects uses the TIATracker music player
     13  0000 ????						;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0000 ????						;    directory for Apache licensing details.
     15  0000 ????						;
     16  0000 ????						;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0000 ????						;    See the copyright notices in the License directory for a list of level
     18  0000 ????						;    contributors.
     19  0000 ????						;
     20  0000 ????						;    Except where otherwise indicated, this software is released under the
     21  0000 ????						;    following licensing arrangement...
     22  0000 ????						;
     23  0000 ????						;    This program is free software: you can redistribute it and/or modify
     24  0000 ????						;    it under the terms of the GNU General Public License as published by
     25  0000 ????						;    the Free Software Foundation, either version 3 of the License, or
     26  0000 ????						;    (at your option) any later version.
     27  0000 ????						;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0000 ????
     29  0000 ????						;    This program is distributed in the hope that it will be useful,
     30  0000 ????						;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0000 ????						;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0000 ????						;    GNU General Public License for more details.
     33  0000 ????
     34 U00ff ????				      SEG.U	variables
     35 U0080					      ORG	$80
     36 U0080
     37 U0080
     38 U0080		       00	   Platform   ds	1	; TV system (%0x=NTSC, %10=PAL-50, %11=PAL-60)
     39 U0081
     40 U0081		       00	   DrawStackPointer ds	1	; points to start entry of drawing stack (-1 = nothing to draw)
     41 U0082		       00	   ObjStackNum ds	1	; which stack in use
     42 U0083		       00 00	   ObjStackPtr ds	2	; index to objects on object stack (0 = empty)
     43 U0085		       00	   BlankStackPtr ds	1	; index to blank object stack (0=empty)
     44 U0086		       00	   ScreenDrawPhase ds	1	; phase of screen drawing
     45 U0087
     46 U0087		       00	   POS_X      ds	1
     47 U0088		       00	   POS_Y      ds	1
     48 U0089		       00	   POS_X_NEW  ds	1
     49 U008a		       00	   POS_Y_NEW  ds	1
     50 U008b		       00	   POS_Type   ds	1
     51 U008c		       00	   POS_VAR    ds	1
     52 U008d
     53 U008d		       00	   TB_X       ds	1
     54 U008e		       00	   TB_Y       ds	1
     55 U008f		       00	   TB_PUSHX   ds	1
     56 U0090		       00	   TB_PUSHY   ds	1
     57 U0091		       00	   TB_CHAR    ds	1
     58 U0092
     59 U0092		       00	   BufferedJoystick ds	1	; player joystick input
     60 U0093		       00	   PreviousJoystick ds	1
     61 U0094
     62 U0094							; Scrolling is limited to only show board within the following area...
     63 U0094		       00	   BoardLimit_Width ds	1	; width of current playfield (only used in UnpackLevel)
     64 U0095		       00	   BoardLimit_Height ds	1	; height of current playfield (only used in UnpackLevel)
     65 U0096		       00	   BoardScrollY ds	1	; scroll position in board (Y)
     66 U0097		       00	   BoardScrollX ds	1	; scroll position in board (X)
     67 U0097		       00 94	   BoardEdge_Right =	BoardLimit_Width	; absolute rightmost scroll value
     68 U0097		       00 95	   BoardEdge_Bottom =	BoardLimit_Height	; absolute bottommost scroll value
     69 U0098		       00	   scrollBits ds	1
     70 U0099
     71 U0099		       00	   animation_index ds	1	; new
     72 U009a		       00 00	   animation  ds	2
     73 U009c		       00	   animation_delay ds	1
     74 U009d		       00	   ManX       ds	1
     75 U009e		       00	   ManY       ds	1
     76 U009f		       00	   ManDrawX   ds	1
     77 U00a0		       00	   ManDrawY   ds	1
     78 U00a1		       00	   ManMode    ds	1
     79 U00a2		       00	   ManLastDirection ds	1	; so we don't overwrite animations in-progress
     80 U00a3		       00	   ManTurnStart ds	1
     81 U00a4		       00	   ManPushCounter ds	1
     82 U00a5		       00	   LookingAround ds	1
     83 U00a6		       00	   ManAnimationID ds	1
     84 U00a7		       00	   ManNextAnimationID ds	1	; -1 for nothing
     85 U00a8		       00	   idleCount  ds	1
     86 U00a9
     87 U00a9		       00	   DelayEndOfLevel ds	1
     88 U00aa		       00	   jtoggle    ds	1	; 0/1 toggles joystick on player swapping
     89 U00ab
     90 U00ab		       00	   LEVEL_bank ds	1
     91 U00ac		       00 00	   levelPtr   ds	2
     92 U00ae
     93 U00ae					      IF	WAIT_FOR_INITIAL_DRAW
     94 U00ae		       00	   blankState ds	1
     95 U00af					      ENDIF
     96 U00af
     97 U00af							;---------------------------------------------------------------------------
     98 U00af							; 2 (shared) demo mode variables:
     99 U00af							;demoMode			  = jtoggle	  ; bit 7==1 => demo mode
    100 U00af							;moveLen			  = jtoggle	  ; bits 0..6
    101 U00af							;moveIdx			 ds 1
    102 U00af
    103 U00af		       00	   LastSpriteY ds	1
    104 U00b0
    105 U00b0							;timer 			  ds 1
    106 U00b0
    107 U00b0		       00	   BGColour   ds	1
    108 U00b1
    109 U00b1							; levelx and level have to be consecutive variables!
    110 U00b1		       00	   levelX     ds	1	; current player's level (other in scoring bank)
    111 U00b2		       00	   level      ds	1	; current player's level (other in scoring bank)
    112 U00b3							;levelDisplay			   ds 1 	   ; what to display as the level ID
    113 U00b3		       00	   Throttle   ds	1	; frame throttle to prevent super-speeds
    114 U00b4							;ThrottleSpeed 		  ds 1		  ; system-dependant throttle speed
    115 U00b4
    116 U00b4		       00	   BCD_targetsRequired ds	1	; number of un-targeted left to go
    117 U00b5		       00	   BCD_moveCounter ds	1	; BCD seconds for level
    118 U00b6		       00	   BCD_moveCounterHi ds	1
    119 U00b7
    120 U00b7		       00	   takebackIndex ds	1
    121 U00b8		       00	   takebackBaseIndex ds	1
    122 U00b9		       00	   TakebackInhibit ds	1
    123 U00ba
    124 U00ba		       00 00	   Board_AddressR ds	2
    125 U00bc		       00 00	   Board_AddressW ds	2
    126 U00be		       00	   ROM_Bank   ds	1	; last switched ROM bank (not accessible if RAM subsequently switched)
    127 U00bf		       00	   RAM_Bank   ds	1
    128 U00c0
    129 U00c0		       00	   ColourTimer ds	1	; colour of BG in scoring area to show level flash/complete
    130 U00c1							;ColourFlash			  ds 1		   ; colour of flash
    131 U00c1							;extraLifeTimer		  ds 1		  ; should be 5 seconds!
    132 U00c1
    133 U00c1							; extraLifeTimer:
    134 U00c1							;   When non-zero causes Cosmic Ark star effect in background. Used to indicate extra life.
    135 U00c1
    136 U00c1							;scoringTimer			  ds 1		  ; times the various score displays
    137 U00c1							;scoringFlags			  ds 1		  ; scoring flags are stored here
    138 U00c1
    139 U00c1							; scoringFlags:
    140 U00c1							; D7		 Extra TARGETs in effect (TARGETs collected over requirement score more) ASSUMED BPL/BMI usage
    141 U00c1							; D6		 unused
    142 U00c1							; D5		 unused
    143 U00c1							; D4		 unused
    144 U00c1							; D3		 unused
    145 U00c1							; D2		 unused
    146 U00c1							; D1	 D1-D0	 Which display kernel to use for scoring
    147 U00c1							; D0		 0 = 2x4     used for TARGETs/time
    148 U00c1							;		 1 = 1x6     used for score
    149 U00c1							;		 2 = 3x2     used for level/lives/player
    150 U00c1
    151 U00c1		       00	   NextLevelTrigger ds	1	; d7 -- next level.  d6 -- loss of life
    152 U00c1		       00 80	   BIT_NEXTLEVEL =	128
    153 U00c1		       00 40	   BIT_NEXTLIFE =	64
    154 U00c1		       00 20	   BIT_NEXTRESET =	32	; reset-triggered next level
    155 U00c2
    156 U00c2							;------------------------------------------------------------------------------
    157 U00c2
    158 U00c2		       00	   ObjIterator ds	1	; count UP iterator over objects
    159 U00c3		       00	   DSL	      ds	1	; stack line counter
    160 U00c4
    161 U00c4		       00	   ethnic     ds	1
    162 U00c5		       00	   animate_char_index ds	1
    163 U00c6
    164 U00c6		       00	   rndHi      ds	1
    165 U00c7		       00	   rnd	      ds	1
    166 U00c8		       00 00 00    icc_colour ds	3
    167 U00cb		       00	   FadeComplete ds	1
    168 U00cc		       00	   FadeOutComplete ds	1
    169 U00cd		       00	   fadeslow   ds	1
    170 U00ce
    171 U00ce		       00 00	   seconds    ds	2
    172 U00d0
------- FILE sound/intro1_variables.asm LEVEL 3 PASS 3
      0 U00d0					      include	"sound/intro1_variables.asm"
      1 U00d0							; TIATracker music player
      2 U00d0							; Copyright 2016 Andre "Kylearan" Wichmann
      3 U00d0							; Website: https://bitbucket.org/kylearan/tiatracker
      4 U00d0							; Email: andre.wichmann@gmx.de
      5 U00d0							;
      6 U00d0							; Licensed under the Apache License, Version 2.0 (the "License");
      7 U00d0							; you may not use this file except in compliance with the License.
      8 U00d0							; You may obtain a copy of the License at
      9 U00d0							;
     10 U00d0							;   http://www.apache.org/licenses/LICENSE-2.0
     11 U00d0							;
     12 U00d0							; Unless required by applicable law or agreed to in writing, software
     13 U00d0							; distributed under the License is distributed on an "AS IS" BASIS,
     14 U00d0							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15 U00d0							; See the License for the specific language governing permissions and
     16 U00d0							; limitations under the License.
     17 U00d0
     18 U00d0							; Song author: 
     19 U00d0							; Song name: 
     20 U00d0
     21 U00d0							; @com.wudsn.ide.asm.hardware=ATARI2600
     22 U00d0
     23 U00d0							; =====================================================================
     24 U00d0							; Flags
     25 U00d0							; =====================================================================
     26 U00d0
     27 U00d0							; 1: Global song speed, 0: Each pattern has individual speed
     28 U00d0		       00 01	   TT_GLOBAL_SPEED =	1
     29 U00d0							; duration (number of TV frames) of a note
     30 U00d0		       00 05	   TT_SPEED   =	5
     31 U00d0							; duration of odd frames (needs TT_USE_FUNKTEMPO)
     32 U00d0		       00 04	   TT_ODD_SPEED =	4
     33 U00d0
     34 U00d0							; 1: Overlay percussion, +40 bytes
     35 U00d0		       00 01	   TT_USE_OVERLAY =	1
     36 U00d0							; 1: Melodic instrument slide, +9 bytes
     37 U00d0		       00 00	   TT_USE_SLIDE =	0
     38 U00d0							; 1: Goto pattern, +8 bytes
     39 U00d0		       00 01	   TT_USE_GOTO =	1
     40 U00d0							; 1: Odd/even rows have different SPEED values, +7 bytes
     41 U00d0		       00 01	   TT_USE_FUNKTEMPO =	1
     42 U00d0							; If the very first notes played on each channel are not PAUSE, HOLD or
     43 U00d0							; SLIDE, i.e. if they start with an instrument or percussion, then set
     44 U00d0							; this flag to 0 to save 2 bytes.
     45 U00d0							; 0: +2 bytes
     46 U00d0		       00 01	   TT_STARTS_WITH_NOTES =	1
     47 U00d0
     48 U00d0
     49 U00d0							; =====================================================================
     50 U00d0							; Permanent variables. These are states needed by the player.
     51 U00d0							; =====================================================================
     52 U00d0		       00	   tt_timer   ds	1	; current music timer value
     53 U00d1		       00	   tt_cur_pat_index_c0 ds	1	; current pattern index into tt_SequenceTable
     54 U00d2		       00	   tt_cur_pat_index_c1 ds	1
     55 U00d3		       00	   tt_cur_note_index_c0 ds	1	; note index into current pattern
     56 U00d4		       00	   tt_cur_note_index_c1 ds	1
     57 U00d5		       00	   tt_envelope_index_c0 ds	1	; index into ADSR envelope
     58 U00d6		       00	   tt_envelope_index_c1 ds	1
     59 U00d7		       00	   tt_cur_ins_c0 ds	1	; current instrument
     60 U00d8		       00	   tt_cur_ins_c1 ds	1
     61 U00d9
     62 U00d9
     63 U00d9							; =====================================================================
     64 U00d9							; Temporary variables. These will be overwritten during a call to the
     65 U00d9							; player routine, but can be used between calls for other things.
     66 U00d9							; =====================================================================
     67 U00d9		       00 00	   tt_ptr     ds	2
------- FILE zeropage.asm
    174 U00db
    175 U00db
    176 U00db
    177 U00db				   OVERLAY_SIZE SET	24
    178 U00db
    179 U00db
    180 U00db
    181 U00db							; This overlay variable is used for the overlay variables.  That's OK.
    182 U00db							; However, it is positioned at the END of the variables so, if on the off chance we're overlapping
    183 U00db							; stack space and variable, it is LIKELY that that won't be a problem, as the temp variables
    184 U00db							; (especially the latter ones) are only used in rare occasions.
    185 U00db
    186 U00db							; FOR SAFETY, DO NOT USE THIS AREA DIRECTLY (ie: NEVER reference 'Overlay' in the code)
    187 U00db							; ADD AN OVERLAY FOR EACH ROUTINE'S USE, SO CLASHES CAN BE EASILY CHECKED
    188 U00db
    189 U00db		       00 00 00 00*Overlay    ds	OVERLAY_SIZE	;--> overlay (share) variables
      0 U00f3					      VALIDATE_OVERLAY	"DEFINITION"
      6 U00f3					      LIST	ON
    191 U00f3
    192 U00f3
    193 U00f3		       00 00 00 00*	      ds	RESERVED_FOR_STACK
    194 U00ff
 FREE BYTES IN ZERO PAGE =  $0
    195 U00ff					      ECHO	"FREE BYTES IN ZERO PAGE = ", $FF - *
    196 U00ff				  -	      IF	* > $FF
    197 U00ff				  -	      ERR
    198 U00ff					      ENDIF
------- FILE ./sokoboo.asm
    394 U00ff
    395 U00ff
    396 U00ff							;------------------------------------------------------------------------------
    397 U00ff							; OVERLAYS!
    398 U00ff							; These variables are overlays, and should be managed with care
    399 U00ff							; That is, variables are ALREADY DEFINED, and we're reusing RAM for other purposes
    400 U00ff
    401 U00ff							; EACH OF THESE ARE VARIABLES (TEMPORARY) USED BY ONE ROUTINE (AND IT'S SUBROUTINES)
    402 U00ff							; THAT IS, LOCAL VARIABLES.  USE 'EM FREELY, THEY COST NOTHING
    403 U00ff
    404 U00ff							; TOTAL SPACE USED BY ANY OVERLAY GROUP SHOULD BE <= SIZE OF 'Overlay'
    405 U00ff
    406 U00ff
    407 U00ff							;------------------------------------------------------------------------------
      0 U00ff					      OVERLAY	GenerateHighScoreCode
      1 U00ef ????				      SEG.U	OVERLAY_GenerateHighScoreCode
      2 U00db					      org	Overlay
    409 U00db
    410 U00db		       00 00 00 00*__decimal  ds	12	; MUST be 1st - same var as codeDigit
    411 U00e7		       00 00	   __binMoves ds	2
    412 U00e9		       00 00 00 00*__encoding ds	5
    413 U00ee		       00	   __randomiser ds	1
    414 U00ef
      0 U00ef					      VALIDATE_OVERLAY	"GenerateHighScoreCode"
      6 U00ef					      LIST	ON
    416 U00ef
    417 U00ef							;------------------------------------------------------------------------------
      0 U00ef					      OVERLAY	BuildDrawFlags
      1 U00e6 ????				      SEG.U	OVERLAY_BuildDrawFlags
      2 U00db					      org	Overlay
    419 U00db
    420 U00db		       00 00	   BDF_DrawFlagAddress ds	2	; destination address of draw flag (mirrors ScreenBuffer)
    421 U00dd		       00 00	   BDF_DrawFlagAddress2 ds	2	; dito + SCREEN_WIDTH/2
    422 U00df		       00 00	   BDF_BoardAddress ds	2	; source address from Board
    423 U00e1		       00 00	   BDF_BoardAddress2 ds	2	; dito + SCREEN_WIDTH/2
    424 U00e3							;  IF MULTI_BANK_BOARD = YES		      ; commented, else DASM freaks out because MULTI_BANK_BOARD is calculated below
    425 U00e3		       00	   BDF_BoardBank ds	1	; holds bank of current line
    426 U00e4							;  ENDIF
    427 U00e4		       00	   DHS_Line   ds	1
    428 U00e5		       00	   DHS_Stack  ds	1	; for restoring SP
    429 U00e6							;ECHO "FREE BYTES IN OVERLAY_BuildDrawFlags = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00e6					      VALIDATE_OVERLAY	"BuildDrawFlags"
      6 U00e6					      LIST	ON
    431 U00e6
    432 U00e6							;------------------------------------------------------------------------------
    433 U00e6
      0 U00e6					      OVERLAY	ColourFixer
      1 U00dd ????				      SEG.U	OVERLAY_ColourFixer
      2 U00db					      org	Overlay
    435 U00db
    436 U00db		       00	   PlatformBase ds	1
    437 U00dc		       00	   BandOffsetTemp ds	1
    438 U00dd
      0 U00dd					      VALIDATE_OVERLAY	"ColourFixer"
      6 U00dd					      LIST	ON
    440 U00dd
      0 U00dd					      OVERLAY	LevelLookup
      1 U00dd ????				      SEG.U	OVERLAY_LevelLookup
      2 U00db					      org	Overlay
    442 U00db		       00 00	   levelTable ds	2
      0 U00dd					      VALIDATE_OVERLAY	"LevelLookup"
      6 U00dd					      LIST	ON
    444 U00dd
    445 U00dd							;------------------------------------------------------------------------------
    446 U00dd
      0 U00dd					      OVERLAY	Animator
      1 U00e1 ????				      SEG.U	OVERLAY_Animator
      2 U00db					      org	Overlay
    448 U00db		       00 00	   frame_ptr  ds	2
    449 U00dd		       00 00	   colour_ptr ds	2
    450 U00df		       00	   bank       ds	1
    451 U00e0		       00	   ethnicity  ds	1
      0 U00e1					      VALIDATE_OVERLAY	"Animator"
      6 U00e1					      LIST	ON
    453 U00e1
    454 U00e1
      0 U00e1					      OVERLAY	Process
      1 U00de ????				      SEG.U	OVERLAY_Process
      2 U00db					      org	Overlay
    456 U00db
    457 U00db		       00	   BOXLeft    ds	1
    458 U00dc		       00	   BOXRight   ds	1
    459 U00dd		       00	   restorationCharacter ds	1
    460 U00de
      0 U00de					      VALIDATE_OVERLAY	"Process"
      6 U00de					      LIST	ON
    462 U00de
    463 U00de							;------------------------------------------------------------------------------
    464 U00de
    465 U00de
      0 U00de					      OVERLAY	Animate
      1 U00dc ????				      SEG.U	OVERLAY_Animate
      2 U00db					      org	Overlay
    467 U00db		       00	   halftimer  ds	1
      0 U00dc					      VALIDATE_OVERLAY	"Animate"
      6 U00dc					      LIST	ON
    469 U00dc
    470 U00dc							;------------------------------------------------------------------------------
    471 U00dc
      0 U00dc					      OVERLAY	LevelScreen
      1 U00f3 ????				      SEG.U	OVERLAY_LevelScreen
      2 U00db					      org	Overlay
    473 U00db		       00 00	   colour_table ds	2
    474 U00dd		       00 00	   digit1     ds	2
    475 U00df		       00 00	   digit2     ds	2
    476 U00e1		       00 00	   digitstar  ds	2
    477 U00e3		       00 00 00    digit      ds	3
    478 U00e6		       00	   digitick   ds	1
    479 U00e7		       00 00 00    targetDigit ds	3
    480 U00ea		       00	   endwait    ds	1
    481 U00eb							;colourindex		  ds 1
    482 U00eb		       00 00	   digitHundreds ds	2
    483 U00ed		       00	   selector   ds	1
    484 U00ee		       00	   walkSpeed  ds	1
    485 U00ef		       00 00	   manc       ds	2
    486 U00f1		       00	   wallColour ds	1
    487 U00f2		       00	   adjustColour ds	1
      0 U00f3					      VALIDATE_OVERLAY	"LevelScreen"
      6 U00f3					      LIST	ON
    489 U00f3
    490 U00f3
      0 U00f3					      OVERLAY	TitleScreen
      1 U00dd ????				      SEG.U	OVERLAY_TitleScreen
      2 U00db					      org	Overlay
    492 U00db		       00 00	   title_colour_table ds	2
      0 U00dd					      VALIDATE_OVERLAY	"TitleScreen"
      6 U00dd					      LIST	ON
    494 U00dd
    495 U00dd
    496 U00dd
      0 U00dd					      OVERLAY	CodeScreen
      1 U00f2 ????				      SEG.U	OVERLAY_CodeScreen
      2 U00db					      org	Overlay
    498 U00db		       00 00 00 00*codeDigit  ds	12	; MUST be 1st - same var as decimal
    499 U00e7		       00 00	   bigdigit0  ds	2
    500 U00e9		       00 00	   bigdigit1  ds	2
    501 U00eb		       00 00	   bigdigit2  ds	2
    502 U00ed		       00 00	   bigdigit3  ds	2
    503 U00ef		       00	   codeTemp   ds	1
    504 U00f0		       00 00	   codeDelay  ds	2
      0 U00f2					      VALIDATE_OVERLAY	"CodeScreen"
      6 U00f2					      LIST	ON
    506 U00f2
    507 U00f2
    508 U00f2							;------------------------------------------------------------------------------
    509 U00f2
      0 U00f2					      OVERLAY	TimeSlice
      1 U00dd ????				      SEG.U	OVERLAY_TimeSlice
      2 U00db					      org	Overlay
    511 U00db
    512 U00db		       00 00	   TS_Vector  ds	2	; vector to correct processing code
    513 U00dd							;ECHO "FREE BYTES IN OVERLAY_TimeSlice = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dd					      VALIDATE_OVERLAY	"TimeSlice"
      6 U00dd					      LIST	ON
    515 U00dd
    516 U00dd							;------------------------------------------------------------------------------
    517 U00dd
      0 U00dd					      OVERLAY	CopyROMShadowToRAM
      1 U00de ????				      SEG.U	OVERLAY_CopyROMShadowToRAM
      2 U00db					      org	Overlay
    519 U00db
    520 U00db		       00	   O_CopyCount ds	1
    521 U00dc		       00	   O_ROM_Source_Bank ds	1
    522 U00dd		       00	   O_Index    ds	1
    523 U00de							;ECHO "FREE BYTES IN OVERLAY_CopyROMShadowToRAM = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00de					      VALIDATE_OVERLAY	"CopyROMShadowToRAM"
      6 U00de					      LIST	ON
    525 U00de
    526 U00de							;------------------------------------------------------------------------------
    527 U00de
      0 U00de					      OVERLAY	Scoring
      1 U00dc ????				      SEG.U	OVERLAY_Scoring
      2 U00db					      org	Overlay
    529 U00db		       00	   tmpStack   ds	1
    530 U00db		       00 db	   newDisplay =	tmpStack
    531 U00dc							; also for UpdateTimer
    532 U00dc		       00 db	   tmpSound   =	tmpStack
      0 U00dc					      VALIDATE_OVERLAY	"Scoring"
      6 U00dc					      LIST	ON
    534 U00dc
    535 U00dc
    536 U00dc							;------------------------------------------------------------------------------
    537 U00dc
      0 U00dc					      OVERLAY	SaveKey
      1 U00e4 ????				      SEG.U	OVERLAY_SaveKey
      2 U00db					      org	Overlay
    539 U00db
    540 U00db		       00 00 00    dummySK    ds	3	; avoid getting overwritten by CopyROMShadowToRAM
    541 U00de		       00 00 00    highScoreSK ds	3
    542 U00e1		       00	   startingLevel ds	1	; levelx * 5
    543 U00e2		       00	   startLevel ds	1
    544 U00e3		       00	   offsetSK   ds	1	; for calculating the SK slot address
    545 U00e4
      0 U00e4					      VALIDATE_OVERLAY	"SaveKey"
      6 U00e4					      LIST	ON
    547 U00e4
    548 U00e4							;------------------------------------------------------------------------------
    549 U00e4
      0 U00e4					      OVERLAY	DrawMan
      1 U00dd ????				      SEG.U	OVERLAY_DrawMan
      2 U00db					      org	Overlay
    551 U00db
    552 U00db		       00 00	   MAN_Move   ds	2
    553 U00dd
    554 U00dd							;ECHO "FREE BYTES IN OVERLAY_DrawMan = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dd					      VALIDATE_OVERLAY	"DrawMan"
      6 U00dd					      LIST	ON
    556 U00dd
    557 U00dd							;------------------------------------------------------------------------------
    558 U00dd
      0 U00dd					      OVERLAY	ProcessObjStack
      1 U00dd ????				      SEG.U	OVERLAY_ProcessObjStack
      2 U00db					      org	Overlay
    560 U00db
    561 U00db		       00 00	   POS_Vector ds	2
    562 U00dd
    563 U00dd							;ECHO "FREE BYTES IN OVERLAY_ProcessObjStack = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00dd					      VALIDATE_OVERLAY	"ProcessObjStack"
      6 U00dd					      LIST	ON
    565 U00dd
    566 U00dd							;------------------------------------------------------------------------------
    567 U00dd
      0 U00dd					      OVERLAY	ScoreLineOverlay
      1 U00ea ????				      SEG.U	OVERLAY_ScoreLineOverlay
      2 U00db					      org	Overlay
    569 U00db
    570 U00db		       00 00	   S0	      ds	2	; used for addressing digits of score
    571 U00dd		       00 00	   S1	      ds	2
    572 U00df		       00 00	   S2	      ds	2
    573 U00e1		       00 00	   S3	      ds	2
    574 U00e3		       00 00	   S4	      ds	2
    575 U00e5		       00 00	   S5	      ds	2
    576 U00e7
    577 U00e7		       00	   stkp       ds	1
    578 U00e8		       00	   sreg       ds	1
    579 U00e9		       00	   loop       ds	1
    580 U00ea
    581 U00ea							;ECHO "FREE BYTES IN ScoreLineOverlay = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00ea					      VALIDATE_OVERLAY	"ScoreLineOverlay"
      6 U00ea					      LIST	ON
    583 U00ea
    584 U00ea							;------------------------------------------------------------------------------
    585 U00ea
    586 U00ea
      0 U00ea					      OVERLAY	UnpackLevelOverlay
      1 U00e1 ????				      SEG.U	OVERLAY_UnpackLevelOverlay
      2 U00db					      org	Overlay
    588 U00db
    589 U00db		       00	   base_x     ds	1
    590 U00dc		       00	   base_y     ds	1
    591 U00dd		       00	   upk_length ds	1
    592 U00de		       00	   upk_column ds	1
    593 U00df		       00	   upk_temp   ds	1
    594 U00e0		       00	   UnpackIndex ds	1
    595 U00e1
    596 U00e1							;icc_colour		  ds 3
    597 U00e1
    598 U00e1							;ECHO "FREE BYTES IN UnpackLevelOverlay = ", OVERLAY_SIZE - ( * - Overlay )
      0 U00e1					      VALIDATE_OVERLAY	"UnpackLevelOverlay"
      6 U00e1					      LIST	ON
    600 U00e1
    601 U00e1							;------------------------------------------------------------------------------
    602 U00e1
      0 U00e1					      OVERLAY	ManProcessing
      1 U00dd ????				      SEG.U	OVERLAY_ManProcessing
      2 U00db					      org	Overlay
    604 U00db		       00 00	   actionVector ds	2
      0 U00dd					      VALIDATE_OVERLAY	"ManProcessing"
      6 U00dd					      LIST	ON
    606 U00dd
      0 U00dd					      OVERLAY	DrawIntoStack
      1 U00dc ????				      SEG.U	OVERLAY_DrawIntoStack
      2 U00db					      org	Overlay
    608 U00db		       00	   save_SP    ds	1
      0 U00dc					      VALIDATE_OVERLAY	"DrawIntoStack"
      6 U00dc					      LIST	ON
    610 U00dc
    611 U00dc							;------------------------------------------------------------------------------
    612 U00dc							;##############################################################################
    613 U00dc							;------------------------------------------------------------------------------
    614 U00dc
    615 U00dc							; NOW THE VERY INTERESTING '3E' RAM BANKS
    616 U00dc							; EACH BANK HAS A READ-ADDRESS AND A WRITE-ADDRESS, WITH 2k TOTAL
    617 U00dc
      0 U00dc					      NEWRAMBANK	BANK_SCREENMARKII1
      1 U0000 ????				      SEG.U	BANK_SCREENMARKII1
      2 U0000					      ORG	ORIGIN_RAM
      3 U0000					      RORG	RAM_3E
      4 U0000				   BANK_START SET	*
      5 U0000				   BANK_SCREENMARKII1 SET	ORIGIN_RAM / RAM_SIZE
      6 U0000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    619 U0000
    620 U0000							; NOTE: THIS BANK JUST *LOOKS* EMPTY.
    621 U0000							; It actually contains everything copied from the ROM copy of the ROW RAM banks.
    622 U0000							; The variable definitions are also in that ROM bank (even though they're RAM :)
    623 U0000
    624 U0000		       00 60	   SCREEN_BITMAP_SIZE =	4 * LINES_PER_CHAR
    625 U0000
    626 U0000							; These banks (there are #SCREEN_LINES of them) hold a RAM copy of the screen draw
    627 U0000							; code.  This code is self-modifying, in that the colour values for each scanline
    628 U0000							; are set to NTSC or PAL values on startup -- thus, the single binary can run
    629 U0000							; on either format system.  The main purpose for copying the draw code to RAM,
    630 U0000							; though, is to free up space in the fixed bank (which is incredibly valuable).
    631 U0000
    632 U0000							; A neat feature of having multiple copies of the same code in different RAM banks
    633 U0000							; is that we can use that code to switch between banks, and the system will happily
    634 U0000							; execute the next instruction from the newly switched-in bank without a problem.
    635 U0000
    636 U0000							; Now we have the actual graphics data for each of the rows.  This consists of an
    637 U0000							; actual bitmap (in exact PF-style format, 6 bytes per line) into which the
    638 U0000							; character shapes are masked/copied. The depth of the character shapes may be
    639 U0000							; changed by changing the #LINES_PER_CHAR value.  Note that this depth should be
    640 U0000							; a multiple of 3, so that the RGB scanlines match at character joins.
    641 U0000
    642 U0000							; The next part of the graphics data is a bitmap sprite buffer -- space for two
    643 U0000							; sprites' graphics shape and colour data.  The shape and colour may be set as
    644 U0000							; part of the draw routine *every* scanline (though the system currently uses
    645 U0000							; one colour shared between both players).
    646 U0000
      0 U0000					      VALIDATE_RAM_SIZE
      1 U0000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0000				  -	      ERR
      3 U0000					      endif
    648 U0000
    649 U0000							; We have one bank for each screen row.  These banks are duplicates of the above,
    650 U0000							; accessed via the above labels but with the appropriate bank switched in.
    651 U0000
    652 U0000							;------------------------------------------------------------------------------
    653 U0000
    654 U0000					      REPEAT	SCREEN_LINES - 1
      0 U0000					      NEWRAMBANK	.DUMMY
      1 U1c00 ????				      SEG.U	.DUMMY
      2 U0400					      ORG	ORIGIN_RAM
      3 U0400					      RORG	RAM_3E
      4 U0400				   BANK_START SET	*
      5 U0400				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U0400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0400					      VALIDATE_RAM_SIZE
      1 U0400				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0400				  -	      ERR
      3 U0400					      endif
    654 U0400					      REPEND
      0 U0400					      NEWRAMBANK	.DUMMY
      1 U0400					      SEG.U	.DUMMY
      2 U0800					      ORG	ORIGIN_RAM
      3 U0800					      RORG	RAM_3E
      4 U0800				   BANK_START SET	*
      5 U0800				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U0800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0800					      VALIDATE_RAM_SIZE
      1 U0800				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0800				  -	      ERR
      3 U0800					      endif
    654 U0800					      REPEND
      0 U0800					      NEWRAMBANK	.DUMMY
      1 U0800					      SEG.U	.DUMMY
      2 U0c00					      ORG	ORIGIN_RAM
      3 U0c00					      RORG	RAM_3E
      4 U0c00				   BANK_START SET	*
      5 U0c00				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U0c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U0c00					      VALIDATE_RAM_SIZE
      1 U0c00				  -	      if	* - RAM_3E > RAM_SIZE
      2 U0c00				  -	      ERR
      3 U0c00					      endif
    654 U0c00					      REPEND
      0 U0c00					      NEWRAMBANK	.DUMMY
      1 U0c00					      SEG.U	.DUMMY
      2 U1000					      ORG	ORIGIN_RAM
      3 U1000					      RORG	RAM_3E
      4 U1000				   BANK_START SET	*
      5 U1000				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1000					      VALIDATE_RAM_SIZE
      1 U1000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1000				  -	      ERR
      3 U1000					      endif
    654 U1000					      REPEND
      0 U1000					      NEWRAMBANK	.DUMMY
      1 U1000					      SEG.U	.DUMMY
      2 U1400					      ORG	ORIGIN_RAM
      3 U1400					      RORG	RAM_3E
      4 U1400				   BANK_START SET	*
      5 U1400				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1400					      VALIDATE_RAM_SIZE
      1 U1400				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1400				  -	      ERR
      3 U1400					      endif
    654 U1400					      REPEND
      0 U1400					      NEWRAMBANK	.DUMMY
      1 U1400					      SEG.U	.DUMMY
      2 U1800					      ORG	ORIGIN_RAM
      3 U1800					      RORG	RAM_3E
      4 U1800				   BANK_START SET	*
      5 U1800				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1800					      VALIDATE_RAM_SIZE
      1 U1800				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1800				  -	      ERR
      3 U1800					      endif
    654 U1800					      REPEND
      0 U1800					      NEWRAMBANK	.DUMMY
      1 U1800					      SEG.U	.DUMMY
      2 U1c00					      ORG	ORIGIN_RAM
      3 U1c00					      RORG	RAM_3E
      4 U1c00				   BANK_START SET	*
      5 U1c00				   .DUMMY     SET	ORIGIN_RAM / RAM_SIZE
      6 U1c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
      0 U1c00					      VALIDATE_RAM_SIZE
      1 U1c00				  -	      if	* - RAM_3E > RAM_SIZE
      2 U1c00				  -	      ERR
      3 U1c00					      endif
    657 U1c00					      REPEND
    658 U1c00
    659 U1c00							;------------------------------------------------------------------------------
    660 U1c00							;##############################################################################
    661 U1c00							;------------------------------------------------------------------------------
    662 U1c00
      0 U1c00					      NEWRAMBANK	BANK_DRAW_BUFFERS
      1 U2000 ????				      SEG.U	BANK_DRAW_BUFFERS
      2 U2000					      ORG	ORIGIN_RAM
      3 U2000					      RORG	RAM_3E
      4 U2000				   BANK_START SET	*
      5 U2000				   BANK_DRAW_BUFFERS SET	ORIGIN_RAM / RAM_SIZE
      6 U2000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    664 U2000							; VARS DEFINED IN ROM_SHADOW_OF_BANK_DRAW_BUFFERS
    665 U2000							; SELF-MODIFYING SUBROUTINES MAY BE PRESENT IN THIS BANK TOO!
      0 U2000					      VALIDATE_RAM_SIZE
      1 U2000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2000				  -	      ERR
      3 U2000					      endif
    667 U2000
    668 U2000							;------------------------------------------------------------------------------
    669 U2000							;##############################################################################
    670 U2000							;------------------------------------------------------------------------------
    671 U2000
      0 U2000					      NEWRAMBANK	BANK_SCORING
      1 U2400 ????				      SEG.U	BANK_SCORING
      2 U2400					      ORG	ORIGIN_RAM
      3 U2400					      RORG	RAM_3E
      4 U2400				   BANK_START SET	*
      5 U2400				   BANK_SCORING SET	ORIGIN_RAM / RAM_SIZE
      6 U2400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    673 U2400							; VARS DEFINED IN ROM_SHADOW_OF_BANK_SCORING
    674 U2400							; SELF-MODIFYING SUBROUTINES MAY BE PRESENT IN THIS BANK TOO!
      0 U2400					      VALIDATE_RAM_SIZE
      1 U2400				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2400				  -	      ERR
      3 U2400					      endif
    676 U2400
    677 U2400							;------------------------------------------------------------------------------
    678 U2400							;##############################################################################
    679 U2400							;------------------------------------------------------------------------------
    680 U2400
      0 U2400					      NEWRAMBANK	BANK_DECODE_LEVEL
      1 U2800 ????				      SEG.U	BANK_DECODE_LEVEL
      2 U2800					      ORG	ORIGIN_RAM
      3 U2800					      RORG	RAM_3E
      4 U2800				   BANK_START SET	*
      5 U2800				   BANK_DECODE_LEVEL SET	ORIGIN_RAM / RAM_SIZE
      6 U2800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    682 U2800							; VARS DEFINED IN BANK_DECODE_LEVEL_SHADOW
    683 U2800							; SELF-MODIFYING SUBROUTINES MAY BE PRESENT IN THIS BANK TOO!
      0 U2800					      VALIDATE_RAM_SIZE
      1 U2800				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2800				  -	      ERR
      3 U2800					      endif
    685 U2800
    686 U2800							;------------------------------------------------------------------------------
    687 U2800							;##############################################################################
    688 U2800							;------------------------------------------------------------------------------
    689 U2800
      0 U2800					      NEWRAMBANK	BANK_OBJSTACK
      1 U2e80 ????				      SEG.U	BANK_OBJSTACK
      2 U2c00					      ORG	ORIGIN_RAM
      3 U2c00					      RORG	RAM_3E
      4 U2c00				   BANK_START SET	*
      5 U2c00				   BANK_OBJSTACK SET	ORIGIN_RAM / RAM_SIZE
      6 U2c00				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    691 U2c00
    692 U2c00							; The objects are a list of X,Y positions into the BOARD.  Each of these is a board
    693 U2c00							; position of something that needs to be processed.  These things include anything
    694 U2c00							; that animates.  Objects which no longer need processing do not re-add themselves
    695 U2c00							; to the object stack.  There are two stacks -- the one being processed, and the
    696 U2c00							; one for the next processing iteration.
    697 U2c00
    698 U2c00							; Note: These are referenced by ObjStackNum, as is the BLANK_STACK paired bank set.
    699 U2c00
    700 U2c00		       00 80	   OBJ_STACK_SIZE =	128
    701 U2c00
    702 U2c00							; WARNING: THESE MUST NOT CROSS PAGE BOUNDARIES!!!
    703 U2c00
    704 U2c00		       00 00 00 00*ObjStackX  ds	OBJ_STACK_SIZE
    705 U2c80		       00 00 00 00*ObjStackY  ds	OBJ_STACK_SIZE
    706 U2d00		       00 00 00 00*ObjStackVar ds	OBJ_STACK_SIZE	; for general use
    707 U2d80
    708 U2d80							; SortedObjPtr is now in the middle of a page, thus allowing to address with -1
    709 U2d80		       00 00 00 00*SortedObjPtr ds	OBJ_STACK_SIZE	; list of indexes of objects (sorted)
    710 U2e00
    711 U2e00		       00 00 00 00*ObjStackType ds	OBJ_STACK_SIZE	; type of object
    712 U2e80
 FREE RAM IN BANK_OBJSTACK =  $180
    713 U2e80					      ECHO	"FREE RAM IN BANK_OBJSTACK = ", RAM_SIZE - ( * - BANK_START )
    714 U2e80
      0 U2e80					      VALIDATE_RAM_SIZE
      1 U2e80				  -	      if	* - RAM_3E > RAM_SIZE
      2 U2e80				  -	      ERR
      3 U2e80					      endif
    716 U2e80
    717 U2e80							;------------------------------------------------------------------------------
    718 U2e80
      0 U2e80					      NEWRAMBANK	BANK_OBJSTACK2
      1 U3000 ????				      SEG.U	BANK_OBJSTACK2
      2 U3000					      ORG	ORIGIN_RAM
      3 U3000					      RORG	RAM_3E
      4 U3000				   BANK_START SET	*
      5 U3000				   BANK_OBJSTACK2 SET	ORIGIN_RAM / RAM_SIZE
      6 U3000				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    720 U3000							; THIS IS A MIRROR OF BANK_OBJSTACK -- DO NOT MODIFY OR USE!!
      0 U3000					      VALIDATE_RAM_SIZE
      1 U3000				  -	      if	* - RAM_3E > RAM_SIZE
      2 U3000				  -	      ERR
      3 U3000					      endif
    722 U3000
    723 U3000							;------------------------------------------------------------------------------
    724 U3000							;##############################################################################
    725 U3000							;------------------------------------------------------------------------------
    726 U3000
      0 U3000					      NEWRAMBANK	BANK_BOARD
      1 U3800 ????				      SEG.U	BANK_BOARD
      2 U3400					      ORG	ORIGIN_RAM
      3 U3400					      RORG	RAM_3E
      4 U3400				   BANK_START SET	*
      5 U3400				   BANK_BOARD SET	ORIGIN_RAM / RAM_SIZE
      6 U3400				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    728 U3400
    729 U3400							; Now the interesting 'BOARD' -- which in reality is a free-form system of M*N
    730 U3400							; rows and columns.  We need to reserve enough RAM for the board's entirety, but
    731 U3400							; don't really care much how it overlaps the 1K bank limit.  The code accessing
    732 U3400							; the board *MUST* calculate and take account of the correct RAM bank to switch
    733 U3400							; when accessing.
    734 U3400
    735 U3400							; The system is fairly free-form, in that it rearranges the memory and tables
    736 U3400							; automatically based on the sizes set in these constants. The board may overlay
    737 U3400							; MULTIPLE banks -- just as long as any particular LINE does not cross a bank
    738 U3400							; we're doing OK.
    739 U3400
    740 U3400							; NOTE: Assumption is that board lines CANNOT CROSS page boundaries.
    741 U3400
    742 U3400							; now fits into one single bank (if we don't reserve too much space for code)
    743 U3400
    744 U3400		       00 20	   SIZE_BOARD_X =	32	;
    745 U3400		       00 20	   SIZE_BOARD_Y =	32
    746 U3400
    747 U3400				  -	      IF	SIZE_BOARD_X * SIZE_BOARD_Y > RAM_SIZE
    748 U3400				  -	      ECHO	"ERROR: Board too big for single bank usage"
    749 U3400				  -	      ERR
    750 U3400					      ENDIF
    751 U3400
    752 U3400
    753 U3400
    754 U3400				  -	      IF	SIZE_BOARD > RAM_SIZE
    755 U3400				  -MULTI_BANK_BOARD =	YES
    756 U3400					      ELSE
    757 U3400		       00 00	   MULTI_BANK_BOARD =	NO	; timings: [-..]
    758 U3400					      ENDIF
    759 U3400
    760 U3400		       00 00 00 00*Board      ds	SIZE_BOARD	; Note, we can only access this in
    761 U3800							; 1024 byte chunks, switching RAM
    762 U3800							; banks as we go.  In other words,
    763 U3800							; this overlaps multiple banks!
    764 U3800
      0 U3800					      NEWRAMBANK	BANK_TAKEBACK
      1 U3940 ????				      SEG.U	BANK_TAKEBACK
      2 U3800					      ORG	ORIGIN_RAM
      3 U3800					      RORG	RAM_3E
      4 U3800				   BANK_START SET	*
      5 U3800				   BANK_TAKEBACK SET	ORIGIN_RAM / RAM_SIZE
      6 U3800				   ORIGIN_RAM SET	ORIGIN_RAM + RAM_SIZE
    766 U3800
    767 U3800		       00 3f	   TAKEBACK_MASK =	$3F
    768 U3800
    769 U3800		       00 00 00 00*TakeBackPreviousX ds	$40
    770 U3840		       00 00 00 00*TakeBackPreviousY ds	$40
    771 U3880		       00 00 00 00*TakeBackPushX ds	$40
    772 U38c0		       00 00 00 00*TakeBackPushY ds	$40
    773 U3900		       00 00 00 00*TakeBackPushChar ds	$40
    774 U3940
    775 U3940							; reverting...
    776 U3940							; A prevoius position
    777 U3940							;	     POS_VAR = board
    778 U3940							;	     board = MANOCCUPIED
    779 U3940							;	     manx,y = x,y
    780 U3940							; B current position (MANX,Y)
    781 U3940							;	     board = POS_VAR
    782 U3940							; C push position
    783 U3940							;	     BOARD = PREV_BOARD
    784 U3940							; TAKEBACK_PREV_X, TAKEBACK_PREV_Y, TAKEBACK_PUSH_X,PUSH_Y,TAKEBACK_PUSH_PREV
    785 U3940							;
    786 U3940
    787 U3940
    788 U3940							; free space here (but hard to use)
    789 U3940							; So we need to calculate where the next free bank is!
    790 U3940							; TODO: This looks dodgy.  Check..
    791 U3940
    792 U3940							;ORIGIN	  SET ( * + RAM_SIZE - 1 ) / RAM_SIZE
    793 U3940							;ORIGIN	  SET ORIGIN * RAM_SIZE
    794 U3940
    795 U3940
    796 U3940
    797 U3940							;------------------------------------------------------------------------------
    798 U3940							;##############################################################################
    799 U3940							;------------------------------------------------------------------------------
    800 U3940
    801 U3940							;------------------------------------------------------------------------------
    802 U3940
    803 U3940							;    IFNCONST MAX_LEVEL_SIZE
    804 U3940				   MAX_LEVEL_SIZE SET	0
    805 U3940							;    ENDIF
    806 U3940
    807 U3940
    808 U3940				   MAX_LEVEL_NUMBER SET	0
    809 U3940					      MAC	start_level
    810 U3940				   LEVEL_START SET	*
    811 U3940				   BANK_LEVEL_{1} =	_CURRENT_BANK
    812 U3940				   LEVEL_{1}  SUBROUTINE
    813 U3940				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
    814 U3940							; ECHO "current MAX_LEVEL_NUMBER = ", MAX_LEVEL_NUMBER
    815 U3940					      ENDM		; {name}
    816 U3940
    817 U3940
    818 U3940					      MAC	end_level
    819 U3940				   LEVEL_SIZE_{1} =	* - LEVEL_START
    820 U3940					      IF	LEVEL_SIZE_{1} > MAX_LEVEL_SIZE
    821 U3940				   MAX_LEVEL_SIZE SET	LEVEL_SIZE_{1}
    822 U3940					      ENDIF
    823 U3940					      ENDM		; {name}
    824 U3940
    825 U3940
    826 U3940					      MAC	defl
    827 U3940					      START_LEVEL	{1}
    828 U3940					      .byte	{2},0
    829 U3940					      END_LEVEL	{1}
    830 U3940					      ENDM
    831 U3940
    832 U3940							;--------------------------------------------------------------------------------
    833 U3940
    834 U3940							;ORIGIN      SET 0
    835 U3940
------- FILE BANK_GENERIC.asm LEVEL 2 PASS 3
      0 U3940					      include	"BANK_GENERIC.asm"
      1 U3940							;    Sokoboo - a Sokoban implementation
      2 U3940							;    using a generic tile-based display engine for the Atari 2600
      3 U3940							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4 U3940							;
      5 U3940							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6 U3940							;
      7 U3940							;    Code related to the generic tile-based display engine was developed by
      8 U3940							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9 U3940							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10 U3940							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11 U3940							;
     12 U3940							;    Code related to music and sound effects uses the TIATracker music player
     13 U3940							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14 U3940							;    directory for Apache licensing details.
     15 U3940							;
     16 U3940							;    Some level data incorporated in this program were created by Lee J Haywood.
     17 U3940							;    See the copyright notices in the License directory for a list of level
     18 U3940							;    contributors.
     19 U3940							;
     20 U3940							;    Except where otherwise indicated, this software is released under the
     21 U3940							;    following licensing arrangement...
     22 U3940							;
     23 U3940							;    This program is free software: you can redistribute it and/or modify
     24 U3940							;    it under the terms of the GNU General Public License as published by
     25 U3940							;    the Free Software Foundation, either version 3 of the License, or
     26 U3940							;    (at your option) any later version.
     27 U3940							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28 U3940
     29 U3940							;    This program is distributed in the hope that it will be useful,
     30 U3940							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31 U3940							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32 U3940							;    GNU General Public License for more details.
     33 U3940
     34 U3940							;------------------------------------------------------------------------------
     35 U3940							;##############################################################################
     36 U3940							;------------------------------------------------------------------------------
     37 U3940
      0 U3940					      NEWBANK	GENERIC_BANK_1
      1  079a ????				      SEG	GENERIC_BANK_1
      2  0000					      ORG	ORIGIN
      3  0000					      RORG	$F000
      4  0000				   BANK_START SET	*
      5  0000				   GENERIC_BANK_1 SET	ORIGIN / 2048
      6  0000				   ORIGIN     SET	ORIGIN + 2048
      7  0000				   _CURRENT_BANK SET	GENERIC_BANK_1
     39  0000
      0  0000					      DEFINE_1K_SEGMENT	DECODE_LEVEL_SHADOW
      1  0000					      ALIGN	$400
      2  0000				   SEGMENT_DECODE_LEVEL_SHADOW SET	*
      3  0000				   BANK_DECODE_LEVEL_SHADOW SET	_CURRENT_BANK
     41  0000
     42  0000					      IF	PLUSCART = YES
     43  0000		       53 6f 6b 6f*	      .byte.b	"SokobooAPI.php", #0
     44  000f		       70 6c 75 73*	      .byte.b	"pluscart.firmaplus.de", #0
     45  0025					      ENDIF
     46  0025
------- FILE DecodeLevel.asm LEVEL 3 PASS 3
      0  0025					      include	"DecodeLevel.asm"
      1  0025							;    Sokoboo - a Sokoban implementation
      2  0025							;    using a generic tile-based display engine for the Atari 2600
      3  0025							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0025							;
      5  0025							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0025							;
      7  0025							;    Code related to the generic tile-based display engine was developed by
      8  0025							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0025							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0025							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0025							;
     12  0025							;    Code related to music and sound effects uses the TIATracker music player
     13  0025							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0025							;    directory for Apache licensing details.
     15  0025							;
     16  0025							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0025							;    See the copyright notices in the License directory for a list of level
     18  0025							;    contributors.
     19  0025							;
     20  0025							;    Except where otherwise indicated, this software is released under the
     21  0025							;    following licensing arrangement...
     22  0025							;
     23  0025							;    This program is free software: you can redistribute it and/or modify
     24  0025							;    it under the terms of the GNU General Public License as published by
     25  0025							;    the Free Software Foundation, either version 3 of the License, or
     26  0025							;    (at your option) any later version.
     27  0025							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0025
     29  0025							;    This program is distributed in the hope that it will be useful,
     30  0025							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0025							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0025							;    GNU General Public License for more details.
     33  0025
     34  0025
     35  0025
     36  0025				   finX
     37  0025							; now put the soil in - fill from the outsides
     38  0025
     39  0025		       a9 01		      lda	#CHARACTER_SOIL
     40  0027		       85 8b		      sta	POS_Type
     41  0029
     42  0029		       a9 1f		      lda	#SIZE_BOARD_Y-1
     43  002b		       85 88		      sta	POS_Y
     44  002d
     45  002d		       a9 1f	   xlin       lda	#SIZE_BOARD_X-1
     46  002f		       85 87		      sta	POS_X
     47  0031		       20 26 f8    zap1       jsr	GetBoardCharacter__CALL_FROM_RAM__
     48  0034		       c9 01		      cmp	#CHARACTER_SOIL
     49  0036		       f0 07		      beq	kg2a
     50  0038		       c9 00		      cmp	#0
     51  003a		       d0 07		      bne	endzap1
     52  003c		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     53  003f		       c6 87	   kg2a       dec	POS_X
     54  0041		       10 ee		      bpl	zap1
     55  0043
     56  0043		       a9 00	   endzap1    lda	#0
     57  0045		       85 87		      sta	POS_X
     58  0047		       20 26 f8    zap2       jsr	GetBoardCharacter__CALL_FROM_RAM__
     59  004a		       c9 01		      cmp	#CHARACTER_SOIL
     60  004c		       f0 07		      beq	kg2
     61  004e		       c9 00		      cmp	#0
     62  0050		       d0 0b		      bne	endzap2
     63  0052		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     64  0055		       e6 87	   kg2	      inc	POS_X
     65  0057		       a5 87		      lda	POS_X
     66  0059		       c9 20		      cmp	#SIZE_BOARD_X
     67  005b		       d0 ea		      bne	zap2
     68  005d
     69  005d		       c6 88	   endzap2    dec	POS_Y
     70  005f		       10 cc		      bpl	xlin
     71  0061
     72  0061
     73  0061		       a9 1f		      lda	#SIZE_BOARD_X-1
     74  0063		       85 87		      sta	POS_X
     75  0065
     76  0065		       a9 1f	   ylin       lda	#SIZE_BOARD_Y-1
     77  0067		       85 88		      sta	POS_Y
     78  0069		       20 26 f8    zapy1      jsr	GetBoardCharacter__CALL_FROM_RAM__
     79  006c		       c9 01		      cmp	#CHARACTER_SOIL
     80  006e		       f0 07		      beq	kg3
     81  0070		       c9 00		      cmp	#0
     82  0072		       d0 07		      bne	endzapy1
     83  0074		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     84  0077		       c6 88	   kg3	      dec	POS_Y
     85  0079		       10 ee		      bpl	zapy1
     86  007b
     87  007b		       a9 00	   endzapy1   lda	#0
     88  007d		       85 88		      sta	POS_Y
     89  007f		       20 26 f8    zapy2      jsr	GetBoardCharacter__CALL_FROM_RAM__
     90  0082		       c9 01		      cmp	#CHARACTER_SOIL
     91  0084		       f0 07		      beq	kg3b
     92  0086		       c9 00		      cmp	#0
     93  0088		       d0 0b		      bne	endzapy2
     94  008a		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
     95  008d		       e6 88	   kg3b       inc	POS_Y
     96  008f		       a5 88		      lda	POS_Y
     97  0091		       c9 20		      cmp	#SIZE_BOARD_Y
     98  0093		       d0 ea		      bne	zapy2
     99  0095
    100  0095		       c6 87	   endzapy2   dec	POS_X
    101  0097		       10 cc		      bpl	ylin
    102  0099		       60		      rts
    103  009a
    104  009a							;A	 steel wall
    105  009a							;B	 soil (surround)
    106  009a							;C	 box
    107  009a
    108  009a					      MAC	ntscpal
    109  009a					      .byte	{1}+{2}
    110  009a					      NTSC_TO_PAL	{1},{2}
    111  009a					      ENDM		; {col} {intensity}
    112  009a
    113  009a
    114  009a
    115  009a				   t16
    116  009a		       00		      .byte.b	$00
    117  009b		       20		      .byte.b	$20	; don't use "10"!
    118  009c		       20		      .byte.b	$20
    119  009d		       30		      .byte.b	$30
    120  009e		       40		      .byte.b	$40
    121  009f		       50		      .byte.b	$50
    122  00a0		       60		      .byte.b	$60
    123  00a1		       70		      .byte.b	$70
    124  00a2		       80		      .byte.b	$80
    125  00a3		       90		      .byte.b	$90
    126  00a4		       a0		      .byte.b	$A0
    127  00a5		       b0		      .byte.b	$B0
    128  00a6		       c0		      .byte.b	$C0
    129  00a7		       d0		      .byte.b	$D0
    130  00a8		       e0		      .byte.b	$E0
    131  00a9		       f0		      .byte.b	$F0
    132  00aa
    133  00aa				   inten
    134  00aa		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    135  00ab		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    136  00ac		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    137  00ad		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    138  00ae		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    139  00af		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    140  00b0		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    141  00b1		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    142  00b2		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST	; deep blue
    143  00b3		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    144  00b4		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    145  00b5		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    146  00b6		       0a		      .byte.b	$08+PALETTE_INTENSITY_ADJUST
    147  00b7		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    148  00b8		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    149  00b9		       0c		      .byte.b	$0A+PALETTE_INTENSITY_ADJUST
    150  00ba
    151  00ba
    152  00ba
      0  00ba					      DEFINE_SUBROUTINE	UnpackLevel
      1  00ba		       00 00	   BANK_UnpackLevel =	_CURRENT_BANK
      2  00ba					      SUBROUTINE
      3  00ba				   UnpackLevel
    154  00ba
    155  00ba		       85 bf		      sta	RAM_Bank
    156  00bc
    157  00bc		       a9 00		      lda	#BANK_UnpackLevel	; the *ROM* bank of this routine (NOT RAM)
    158  00be		       85 be		      sta	ROM_Bank	; GetROMByte returns to this bank
    159  00c0
    160  00c0		       a9 01		      lda	#CHARACTER_SOIL
    161  00c2		       85 8b		      sta	POS_Type
    162  00c4
    163  00c4		       a9 1f		      lda	#SIZE_BOARD_Y-1
    164  00c6		       85 88		      sta	POS_Y
    165  00c8		       a9 1f	   xyLine     lda	#SIZE_BOARD_X-1
    166  00ca		       85 87		      sta	POS_X
    167  00cc		       20 3a f8    xyClear    jsr	PutBoardCharacterFromRAM
    168  00cf		       c6 87		      dec	POS_X
    169  00d1		       10 f9		      bpl	xyClear
    170  00d3		       c6 88		      dec	POS_Y
    171  00d5		       10 f1		      bpl	xyLine
    172  00d7
    173  00d7		       a9 04		      lda	#4
    174  00d9		       85 db		      sta	base_x
    175  00db		       a9 04		      lda	#4
    176  00dd		       85 dc		      sta	base_y
    177  00df
    178  00df		       a5 c1		      lda	NextLevelTrigger
    179  00e1		       09 80		      ora	#BIT_NEXTLEVEL
    180  00e3		       85 c1		      sta	NextLevelTrigger
    181  00e5
    182  00e5
    183  00e5		       20 52 fd 	      jsr	Random
    184  00e8		       29 0f		      and	#$F
    185  00ea		       aa		      tax
    186  00eb		       bd 9a f0 	      lda	t16,x
    187  00ee		       1d aa f0 	      ora	inten,x
    188  00f1		       85 c8		      sta	icc_colour
    189  00f3
    190  00f3		       20 52 fd    ranother   jsr	Random
    191  00f6		       29 0f		      and	#$F
    192  00f8		       aa		      tax
    193  00f9		       bd 9a f0 	      lda	t16,x
    194  00fc		       1d aa f0 	      ora	inten,x
    195  00ff		       38		      sec
    196  0100		       e9 02		      sbc	#2
    197  0102		       85 ca		      sta	icc_colour+2	; mortar, lid
    198  0104
    199  0104							;sec
    200  0104		       e5 c8		      sbc	icc_colour
    201  0106		       b0 04		      bcs	posicc
    202  0108		       49 ff		      eor	#$FF
    203  010a		       69 01		      adc	#1
    204  010c		       c9 31	   posicc     cmp	#$31
    205  010e		       90 e3		      bcc	ranother	; don't allow similar colours
    206  0110
    207  0110
    208  0110
    209  0110							; Update the level colours (self-modifying) in each of the character line banks
    210  0110
    211  0110		       20 18 fe 	      jsr	CopyColoursToScreenLines
    212  0113
    213  0113		       a9 00		      lda	#$00
    214  0115		       85 b5		      sta	BCD_moveCounter
    215  0117		       85 b6		      sta	BCD_moveCounterHi
    216  0119		       85 b7		      sta	takebackIndex
    217  011b		       85 b8		      sta	takebackBaseIndex
    218  011d		       85 b4		      sta	BCD_targetsRequired	; # of targets that do NOT have boxes on them
    219  011f
    220  011f		       85 87		      sta	POS_X
    221  0121		       85 88		      sta	POS_Y
    222  0123		       85 94		      sta	BoardLimit_Width
    223  0125		       85 95		      sta	BoardLimit_Height
    224  0127
    225  0127							; Copy the ROM definition to the RAM buffer, and then use the RAM buffer for unpacking
    226  0127							; This facilitates downloading PlusCart levels into the RAM buffer in the future
    227  0127
    228  0127		       a2 00		      ldx	#0
    229  0129		       86 e0		      stx	UnpackIndex
    230  012b
    231  012b				   CopyLevelDefinition
    232  012b
    233  012b		       e6 ba		      inc	Board_AddressR
    234  012d		       d0 02		      bne	NoPageX
    235  012f		       e6 bb		      inc	Board_AddressR+1
    236  0131				   NoPageX
    237  0131
    238  0131		       a5 ab		      lda	LEVEL_bank
    239  0133		       a0 00		      ldy	#0
    240  0135		       20 0f f8 	      jsr	GetROMByte
    241  0138
    242  0138		       a2 0a		      ldx	#BANK_DECODE_LEVEL
    243  013a		       86 3e		      stx	SET_BANK_RAM
    244  013c		       a6 e0		      ldx	UnpackIndex
    245  013e		       9d 92 f6 	      sta	LevelDecodeBuffer + RAM_WRITE,x
    246  0141
    247  0141		       e6 e0		      inc	UnpackIndex
    248  0143
    249  0143		       c9 00		      cmp	#0	; the fetched byte
    250  0145		       d0 e4		      bne	CopyLevelDefinition
    251  0147
    252  0147
    253  0147					      IF	PLUSCART = YES
    254  0147
    255  0147		       a9 44		      lda	#$44
    256  0149		       85 49		      sta	COLUBK
    257  014b
    258  014b		       ad f0 7f 	      lda	PLUSCART_IO
    259  014e		       c9 aa		      cmp	#PLUS0
    260  0150		       d0 15		      bne	isplus0
    261  0152		       ad f1 7f 	      lda	PLUSCART_IO+1
    262  0155		       c9 19		      cmp	#PLUS1
    263  0157		       d0 0e		      bne	isplus0
    264  0159		       ad f2 7f 	      lda	PLUSCART_IO+2
    265  015c		       c9 af		      cmp	#PLUS2
    266  015e		       d0 07		      bne	isplus0
    267  0160		       ad f3 7f 	      lda	PLUSCART_IO+3
    268  0163		       c9 36		      cmp	#PLUS3
    269  0165		       f0 26		      beq	noPlusCart0
    270  0167				   isplus0
    271  0167
    272  0167
    273  0167							; Request level 0
    274  0167		       a9 00		      lda	#0	; the level id from DB you want to download
    275  0169		       8d f0 1f 	      sta	$1ff0	; first byte for send buffer
    276  016c		       8d f1 1f 	      sta	$1ff1	; last byte (should be used for function select at backend)
    277  016f
    278  016f							; A kludged "long wait" for $1FF3 to be zero
    279  016f
    280  016f
    281  016f		       a2 00	   startAgain ldx	#0
    282  0171		       a0 00		      ldy	#0
    283  0173		       ad f3 1f    Cdtimer    lda	$1ff3
    284  0176		       f0 f7		      beq	startAgain	; zero means we restart the wait
    285  0178		       e8		      inx
    286  0179		       d0 f8		      bne	Cdtimer
    287  017b		       c8		      iny
    288  017c		       d0 f5		      bne	Cdtimer	; we exit when it's been non-zero for quite a while
    289  017e
    290  017e							; 1FF3 has been non-zero for some time, so... grab the level data to the buffer
    291  017e
    292  017e				   FillBufferFromInternet
    293  017e		       ad f2 1f 	      lda	$1FF2
    294  0181		       9d 92 f6 	      sta	LevelDecodeBuffer + RAM_WRITE,x
    295  0184		       e8		      inx
    296  0185		       ad f3 1f 	      lda	$1FF3
    297  0188		       d0 f4		      bne	FillBufferFromInternet
    298  018a		       9d 92 f6 	      sta	LevelDecodeBuffer + RAM_WRITE,x	; zero terminate
    299  018d
    300  018d				   noPlusCart0
    301  018d		       a9 00		      lda	#0
    302  018f		       85 49		      sta	COLUBK
    303  0191
    304  0191					      ENDIF
    305  0191
    306  0191
    307  0191		       a9 91		      lda	#<(LevelDecodeBuffer-1)
    308  0193		       85 ba		      sta	Board_AddressR
    309  0195		       a9 f2		      lda	#>(LevelDecodeBuffer-1)
    310  0197		       85 bb		      sta	Board_AddressR+1
    311  0199
    312  0199
    313  0199				   GetNextItem
    314  0199
    315  0199							; At this point we are proceeding with the unpack
    316  0199							; We have the level stored in the RAM buffer "LevelDecodeBuffer"
    317  0199
    318  0199		       a9 01		      lda	#1
    319  019b		       85 dd		      sta	upk_length
    320  019d		       a9 00		      lda	#0
    321  019f		       85 de		      sta	upk_column	; reuse var - this flags a digit already
    322  01a1
    323  01a1		       e6 ba	   Get2       inc	Board_AddressR
    324  01a3		       d0 02		      bne	addrOK
    325  01a5		       e6 bb		      inc	Board_AddressR+1
    326  01a7				   addrOK
    327  01a7
    328  01a7							;lda LEVEL_bank
    329  01a7		       a0 00		      ldy	#0
    330  01a9		       b1 ba		      lda	(Board_AddressR),y
    331  01ab							;jsr GetROMByte
    332  01ab		       85 df		      sta	upk_temp	;scratch
    333  01ad
    334  01ad							;cmp #0
    335  01ad		       d0 03		      bne	parse
    336  01af		       4c 25 f0 	      jmp	finX
    337  01b2				   parse
    338  01b2		       c9 3a		      cmp	#"9"+1
    339  01b4		       b0 1e		      bcs	notDigit
    340  01b6		       c9 30		      cmp	#"0"
    341  01b8		       90 1a		      bcc	notDigit
    342  01ba
    343  01ba		       a5 de		      lda	upk_column
    344  01bc		       f0 09		      beq	firstDig
    345  01be
    346  01be		       a5 dd		      lda	upk_length
    347  01c0		       0a		      asl
    348  01c1		       0a		      asl
    349  01c2		       0a		      asl
    350  01c3		       65 dd		      adc	upk_length
    351  01c5		       65 dd		      adc	upk_length
    352  01c7
    353  01c7		       18	   firstDig   clc
    354  01c8		       65 df		      adc	upk_temp
    355  01ca		       38		      sec
    356  01cb		       e9 30		      sbc	#"0"
    357  01cd		       85 dd		      sta	upk_length
    358  01cf		       e6 de		      inc	upk_column	; flag we have seen a digit
    359  01d1		       4c a1 f1 	      jmp	Get2
    360  01d4
    361  01d4		       c9 7c	   notDigit   cmp	#"|"	; newline
    362  01d6		       d0 11		      bne	checkWall
    363  01d8
    364  01d8							; Handle new-line
    365  01d8		       a9 00		      lda	#0
    366  01da		       85 87		      sta	POS_X
    367  01dc		       e6 88		      inc	POS_Y
    368  01de
    369  01de
    370  01de		       a5 88		      lda	POS_Y
    371  01e0		       c5 95		      cmp	BoardLimit_Height
    372  01e2		       90 02		      bcc	wOK2
    373  01e4		       85 95		      sta	BoardLimit_Height	;???^^^
    374  01e6				   wOK2
    375  01e6
    376  01e6		       4c 99 f1 	      jmp	GetNextItem
    377  01e9
    378  01e9		       c9 23	   checkWall  cmp	#"#"	; wall
    379  01eb		       d0 09		      bne	checkForGap
    380  01ed
    381  01ed		       a5 c7		      lda	rnd
    382  01ef		       29 03		      and	#3
    383  01f1		       18		      clc
    384  01f2		       69 06		      adc	#CHARACTER_STEEL
    385  01f4		       d0 62		      bne	WriteChars
    386  01f6
    387  01f6		       c9 20	   checkForGap cmp	#32
    388  01f8		       f0 08		      beq	writeGap
    389  01fa		       c9 2d		      cmp	#"-"
    390  01fc		       f0 04		      beq	writeGap
    391  01fe		       c9 5f		      cmp	#"_"
    392  0200		       d0 05		      bne	checkForMan
    393  0202
    394  0202		       a9 00	   writeGap   lda	#CHARACTER_BLANK
    395  0204		       4c 58 f2 	      jmp	WriteChars
    396  0207
    397  0207				   checkForMan
    398  0207		       c9 2b		      cmp	#"+"	; player on goal square
    399  0209		       d0 07		      bne	notPlayerGoal
    400  020b
    401  020b		       20 3e fd 	      jsr	RegisterTarget
    402  020e
    403  020e							; put goal square, init player with POS_VAR = CHARACTER_TARGET
    404  020e
    405  020e		       a9 03		      lda	#CHARACTER_TARGET
    406  0210		       d0 06		      bne	genPlayer
    407  0212
    408  0212				   notPlayerGoal
    409  0212		       c9 40		      cmp	#"@"	; player on normal square
    410  0214		       d0 29		      bne	checkBox
    411  0216
    412  0216		       a9 00		      lda	#CHARACTER_BLANK
    413  0218
    414  0218				   genPlayer
    415  0218
    416  0218		       85 8c		      sta	POS_VAR	; character man is on
    417  021a
    418  021a		       18		      clc
    419  021b		       a5 87		      lda	POS_X
    420  021d		       48		      pha
    421  021e		       65 db		      adc	base_x
    422  0220		       85 87		      sta	POS_X
    423  0222		       85 9d		      sta	ManX
    424  0224
    425  0224		       a5 88		      lda	POS_Y
    426  0226		       48		      pha
    427  0227		       65 dc		      adc	base_y
    428  0229		       85 88		      sta	POS_Y
    429  022b		       85 9e		      sta	ManY
    430  022d
    431  022d							; POS_X     x position
    432  022d							; POS_Y     y position
    433  022d							; POS_VAR   CHARACTER UNDER MAN TO RESTORE
    434  022d							; POS_Type  type of object
    435  022d
    436  022d		       a9 00		      lda	#TYPE_MAN
    437  022f		       85 8b		      sta	POS_Type	;	 creature TYPE
    438  0231		       20 ff f8 	      jsr	InsertObjectStackFromRAM	;6+94(B)
    439  0234
    440  0234		       68		      pla
    441  0235		       85 88		      sta	POS_Y
    442  0237		       68		      pla
    443  0238		       85 87		      sta	POS_X
    444  023a
    445  023a		       a9 05		      lda	#CHARACTER_MANOCCUPIED
    446  023c		       4c 58 f2 	      jmp	WriteChars
    447  023f
    448  023f		       c9 24	   checkBox   cmp	#"$"
    449  0241		       d0 04		      bne	checkBoxTarget
    450  0243
    451  0243		       a9 02		      lda	#CHARACTER_BOX
    452  0245		       d0 11		      bne	WriteChars
    453  0247
    454  0247		       c9 2a	   checkBoxTarget cmp	#"*"
    455  0249		       d0 04		      bne	checkTarget
    456  024b
    457  024b		       a9 0a		      lda	#CHARACTER_BOX_ON_TARGET
    458  024d		       d0 09		      bne	WriteChars
    459  024f
    460  024f		       c9 2e	   checkTarget cmp	#"."
    461  0251		       f0 03		      beq	targ
    462  0253		       4c 99 f1 	      jmp	GetNextItem
    463  0256				   targ
    464  0256
    465  0256		       a9 03		      lda	#CHARACTER_TARGET
    466  0258
    467  0258		       85 8b	   WriteChars sta	POS_Type
    468  025a
    469  025a		       18	   Wc2x       clc
    470  025b		       a5 87		      lda	POS_X
    471  025d		       48		      pha
    472  025e		       65 db		      adc	base_x
    473  0260		       85 87		      sta	POS_X
    474  0262
    475  0262		       a5 88		      lda	POS_Y
    476  0264		       48		      pha
    477  0265		       65 dc		      adc	base_y
    478  0267		       c9 20		      cmp	#SIZE_BOARD_Y
    479  0269		       b0 05		      bcs	whoops
    480  026b		       85 88		      sta	POS_Y
    481  026d
    482  026d
    483  026d		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
    484  0270
    485  0270		       a5 8b	   whoops     lda	POS_Type
    486  0272		       c9 03		      cmp	#CHARACTER_TARGET
    487  0274		       d0 03		      bne	notargdet
    488  0276		       20 3e fd 	      jsr	RegisterTarget
    489  0279				   notargdet
    490  0279
    491  0279		       68		      pla
    492  027a		       85 88		      sta	POS_Y
    493  027c		       68		      pla
    494  027d		       85 87		      sta	POS_X
    495  027f
    496  027f		       18		      clc
    497  0280		       69 01		      adc	#1
    498  0282		       85 87		      sta	POS_X
    499  0284
    500  0284		       c5 94		      cmp	BoardLimit_Width
    501  0286		       90 02		      bcc	wOK
    502  0288		       85 94		      sta	BoardLimit_Width
    503  028a				   wOK
    504  028a
    505  028a		       c6 dd		      dec	upk_length
    506  028c		       d0 cc		      bne	Wc2x
    507  028e		       4c 99 f1 	      jmp	GetNextItem
    508  0291
    509  0291				   finishedUnpack
    510  0291
    511  0291		       60		      rts
    512  0291					      endif
    513  0292
    514  0292
    515  0292
    516  0292		       00 00 00 00*LevelDecodeBuffer ds	256
------- FILE BANK_GENERIC.asm
     48  0392
      0  0392					      CHECK_HALF_BANK_SIZE	"GENERIC_BANK_1 (DECODE_LEVEL)"
      1  0392
      2  0392
      3  0392		       03 92	   .TEMP      =	* - BANK_START
 GENERIC_BANK_1 (DECODE_LEVEL) (1K) SIZE =  $392 , FREE= $6e
      4  0392					      ECHO	"GENERIC_BANK_1 (DECODE_LEVEL)", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  0392				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  0392				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  0392				  -	      ERR
      8  0392					      endif
     50  0392
     51  0392							;------------------------------------------------------------------------------
     52  0392							; ... the above is a RAM-copied section -- the following is ROM-only.	Note that
     53  0392							; we do not configure a 1K boundary, as we con't really care when the above 'RAM'
     54  0392							; bank finishes.  Just continue on from where it left off...
     55  0392							;------------------------------------------------------------------------------
     56  0392
      0  0392					      DEFINE_SUBROUTINE	Cart_Init	; in GENERIC_BANK_1
      1  0392		       00 00	   BANK_Cart_Init =	_CURRENT_BANK
      2  0392					      SUBROUTINE
      3  0392				   Cart_Init
     58  0392
     59  0392							; Note the variables from the title selection are incredibly transient an can be stomped
     60  0392							; at any time.  So they need to be used immediately.
     61  0392
     62  0392
     63  0392							; odd usage below is to prevent any possibility of variable stomping/assumptions
     64  0392
     65  0392		       a9 01		      lda	#1
     66  0394		       a2 00		      ldx	#0	;sLevel				      ; level # from title select
     67  0396		       a0 00		      ldy	#0	;sJoysticks
     68  0398		       84 aa		      sty	jtoggle
     69  039a		       86 b2		      stx	level
     70  039c		       a9 00		      lda	#0
     71  039e		       85 e1		      sta	startingLevel
     72  03a0
     73  03a0		       85 b1		      sta	levelX
     74  03a2							;		  sta levelX+1
     75  03a2
      0  03a2					      LOAD_ANIMATION	IDLE
      1  03a2		       a9 4a		      lda	#<Animation_IDLE
      2  03a4		       85 9a		      sta	animation
      3  03a6		       a9 f0		      lda	#>Animation_IDLE
      4  03a8		       85 9b		      sta	animation+1
      5  03aa		       a9 00		      lda	#0
      6  03ac		       85 9c		      sta	animation_delay
      7  03ae		       a9 02		      lda	#ANIMATION_IDLE_ID
      8  03b0		       85 a6		      sta	ManAnimationID
     77  03b2
     78  03b2		       a9 00		      lda	#0
     79  03b4		       8d 83 02 	      sta	SWBCNT	; console I/O always set to INPUT
     80  03b7		       8d 81 02 	      sta	SWACNT	; set controller I/O to INPUT
     81  03ba		       85 6b		      sta	HMCLR
     82  03bc
     83  03bc							; cleanup remains of title screen
     84  03bc		       85 5b		      sta	GRP0
     85  03be		       85 5c		      sta	GRP1
     86  03c0							;?		   sta GRP0
     87  03c0
     88  03c0		       a9 10		      lda	#%00010000	; 2	 double width missile, double width player
     89  03c2		       85 44		      sta	NUSIZ0	; 3
     90  03c4		       85 45		      sta	NUSIZ1
     91  03c6
     92  03c6		       85 86		      sta	ScreenDrawPhase	; sequences the sections of gameplay/screen drawing
     93  03c8		       85 c4		      sta	ethnic
     94  03ca
     95  03ca		       a9 04		      lda	#%100	; players/missiles BEHIND BG
     96  03cc		       85 4a		      sta	CTRLPF
     97  03ce
     98  03ce		       a9 ff		      lda	#$FF
     99  03d0		       85 81		      sta	DrawStackPointer
    100  03d2		       85 92		      sta	BufferedJoystick
    101  03d4
    102  03d4							;lda #DIRECTION_BITS		  ;???
    103  03d4							;sta ManLastDirection
    104  03d4
    105  03d4							;lda #0
    106  03d4							;		  sta ObjStackPtr		  ; object stack index of last entry
    107  03d4							;		  sta ObjStackPtr+1
    108  03d4							;		  sta ObjStackNum
    109  03d4							;		  sta ObjIterator
    110  03d4
    111  03d4							;sta sortPtr
    112  03d4							;lda #<(-1)
    113  03d4							;sta sortRequired
    114  03d4
    115  03d4							; read high score from SaveKey and store in highScoreSK,
    116  03d4							; which is transferred to high score variable in RAM by GeneralScoringSetups
    117  03d4
    118  03d4		       4c 6f f5 	      jmp	ReadSaveKey
    119  03d7
    120  03d7							;------------------------------------------------------------------------------
    121  03d7
      0  03d7					      DEFINE_SUBROUTINE	SwapPlayersGeneric
      1  03d7		       00 00	   BANK_SwapPlayersGeneric =	_CURRENT_BANK
      2  03d7					      SUBROUTINE
      3  03d7				   SwapPlayersGeneric
    123  03d7
    124  03d7							; at the start of a level (or player, doesn't matter) we grab the current state of the colour/B&W switch
    125  03d7							; into the gameMode variable.
    126  03d7
    127  03d7							;		  lda gameMode
    128  03d7							;		  and #~(BW_SWITCH|GAMEMODE_PAUSED)
    129  03d7							;		  sta gameMode
    130  03d7							;		  lda SWCHB
    131  03d7							;		  and #BW_SWITCH
    132  03d7							;		  ora gameMode			  ; COLOR/B&W @start of level stored in gameMode -- so now we just detect a CHANGE is pause
    133  03d7							;		  sta gameMode			  ; also, BIT7=0 -- system is NOT paused
    134  03d7
    135  03d7
    136  03d7							; restart level
    137  03d7		       a5 c1		      lda	NextLevelTrigger
    138  03d9		       29 bf		      and	#<(~BIT_NEXTLIFE)
    139  03db		       85 c1		      sta	NextLevelTrigger
    140  03dd
    141  03dd							; if new high score was set by SwapPlayers, update it:
    142  03dd
    143  03dd		       4c 95 f5 	      jmp	WriteSaveKey
    144  03e0
    145  03e0
    146  03e0							;------------------------------------------------------------------------------
    147  03e0
      0  03e0					      DEFINE_SUBROUTINE	CreateCreatures
      1  03e0		       00 00	   BANK_CreateCreatures =	_CURRENT_BANK
      2  03e0					      SUBROUTINE
      3  03e0				   CreateCreatures
    149  03e0
    150  03e0							; Calculate rightmost value for scrolling edge.  .
    151  03e0
    152  03e0		       85 be		      sta	ROM_Bank
    153  03e2
    154  03e2		       38		      sec
    155  03e3		       a5 94		      lda	BoardLimit_Width
    156  03e5		       e9 09		      sbc	#SCREEN_WIDTH-1
    157  03e7		       85 94		      sta	BoardEdge_Right	; absolute rightmost scroll value
    158  03e9
    159  03e9							;		  sec			     already set
    160  03e9		       a5 95		      lda	BoardLimit_Height
    161  03eb		       e9 07		      sbc	#SCREEN_LINES-1
    162  03ed		       85 95		      sta	BoardEdge_Bottom	; absolute bottommost scroll value
    163  03ef
    164  03ef							; kludge position scroll roughly at player
    165  03ef
    166  03ef							;		  sec			 already set
    167  03ef		       a5 9d		      lda	ManX
    168  03f1		       e9 05		      sbc	#5
    169  03f3		       b0 02		      bcs	notL0
    170  03f5		       a9 00		      lda	#0
    171  03f7		       85 97	   notL0      sta	BoardScrollX
    172  03f9
    173  03f9		       38		      sec
    174  03fa		       a5 9e		      lda	ManY
    175  03fc		       e9 04		      sbc	#4
    176  03fe		       b0 02		      bcs	notU0
    177  0400		       a9 00		      lda	#0
    178  0402		       85 96	   notU0      sta	BoardScrollY
    179  0404
    180  0404		       a9 00		      lda	#0
    181  0406		       85 a1		      sta	ManMode
    182  0408							;sta ManDelayCount
    183  0408		       85 b9		      sta	TakebackInhibit
    184  040a		       85 db		      sta	base_x
    185  040c		       85 dc		      sta	base_y
    186  040e		       85 a4		      sta	ManPushCounter
    187  0410
    188  0410
    189  0410		       a9 ff		      lda	#$FF
    190  0412		       85 af		      sta	LastSpriteY
    191  0414		       85 a6		      sta	ManAnimationID
    192  0416		       85 cb		      sta	FadeComplete	; start fading
    193  0418		       85 cc		      sta	FadeOutComplete	; flags "not fading out"
    194  041a
    195  041a		       a9 14		      lda	#20
    196  041c		       85 cd		      sta	fadeslow
    197  041e
    198  041e							;lda #DIRECTION_BITS		  ;????
    199  041e							;sta ManLastDirection		  ; duplicate?
    200  041e
    201  041e		       60		      rts
    202  041f
    203  041f							;-------------------------------------------------------------------------------------
    204  041f
      0  041f					      DEFINE_SUBROUTINE	LevelInit	; in GENERIC_BANK_1
      1  041f		       00 00	   BANK_LevelInit =	_CURRENT_BANK
      2  041f					      SUBROUTINE
      3  041f				   LevelInit
    206  041f
    207  041f		       a9 00		      lda	#0
    208  0421		       85 83		      sta	ObjStackPtr
    209  0423		       85 84		      sta	ObjStackPtr+1	; kill all creatures
    210  0425		       85 82		      sta	ObjStackNum
    211  0427		       85 c2		      sta	ObjIterator
    212  0429
    213  0429		       85 98		      sta	scrollBits
    214  042b		       85 86		      sta	ScreenDrawPhase
    215  042d
    216  042d		       85 b0		      sta	BGColour
    217  042f		       85 c0		      sta	ColourTimer
    218  0431		       85 a5		      sta	LookingAround
    219  0433
    220  0433		       a9 ff		      lda	#255
    221  0435		       85 b3		      sta	Throttle
    222  0437		       85 92		      sta	BufferedJoystick
    223  0439
    224  0439		       a9 00		      lda	#0
    225  043b		       85 59		      sta	AUDV0
    226  043d
    227  043d		       85 5a		      sta	AUDV1	; turn off music while levels init
    228  043f
    229  043f		       85 ce		      sta	seconds
    230  0441		       85 cf		      sta	seconds+1
    231  0443
    232  0443
    233  0443							;		  sta AUDC0
    234  0443
    235  0443							;		  sta VBLANK
    236  0443
    237  0443
    238  0443		       85 81		      sta	DrawStackPointer
    239  0445
    240  0445							;lda #DISPLAY_TIME ;DISPLAY_SCORE
    241  0445							;sta scoringFlags
    242  0445							;lda #0 ;SCORING_TIMER_FIRST		      ; We want the first timer display to be long, to show level and lives
    243  0445							;sta scoringTimer
    244  0445
    245  0445		       18		      clc
    246  0446		       a5 c4		      lda	ethnic
    247  0448		       69 10		      adc	#16
    248  044a		       c9 40		      cmp	#4*16
    249  044c		       90 02		      bcc	ethOK
    250  044e		       a9 00		      lda	#0
    251  0450		       85 c4	   ethOK      sta	ethnic
    252  0452
    253  0452		       60		      rts
    254  0453
    255  0453							;-------------------------------------------------------------------------------------
    256  0453
      0  0453					      DEFINE_SUBROUTINE	Resync
      1  0453		       00 00	   BANK_Resync =	_CURRENT_BANK
      2  0453					      SUBROUTINE
      3  0453				   Resync
      0  0453					      RESYNC
      1  0453
      2  0453		       a9 02		      lda	#%10
      3  0455		       85 41		      sta	VBLANK
      4  0457
      5  0457		       a2 08		      ldx	#8
      6  0459				   .loopResync
      0  0459					      VERTICAL_SYNC
      1  0459		       a9 0e		      lda	#%1110
      2  045b		       85 42	   .VSLP1     sta	WSYNC
      3  045d		       85 40		      sta	VSYNC
      4  045f		       4a		      lsr
      5  0460		       d0 f9		      bne	.VSLP1
      8  0462
      9  0462		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  0464		       a5 80		      lda	Platform
     11  0466		       49 02		      eor	#PAL_50
     12  0468		       d0 02		      bne	.ntsc
     13  046a		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  046c				   .ntsc
     15  046c				   .loopWait
     16  046c		       85 42		      sta	WSYNC
     17  046e		       85 42		      sta	WSYNC
     18  0470		       88		      dey
     19  0471		       d0 f9		      bne	.loopWait
     20  0473		       ca		      dex
     21  0474		       d0 e3		      bne	.loopResync
    259  0476		       60	   Ret	      rts
    260  0477
    261  0477							;---------------------------------------------------------------------------
    262  0477
      0  0477					      DEFINE_SUBROUTINE	TrackPlayer	; =76
      1  0477		       00 00	   BANK_TrackPlayer =	_CURRENT_BANK
      2  0477					      SUBROUTINE
      3  0477				   TrackPlayer
    264  0477
    265  0477		       a5 a5		      lda	LookingAround	; 3
    266  0479		       d0 36		      bne	EarlyAbortx	; 2/3	     don't track when looking around
    267  047b
    268  047b		       00 02	   .SCRL_START_LEFT =	2
    269  047b		       00 08	   .SCRL_START_RIGHT =	SCREEN_WIDTH-.SCRL_START_LEFT
    270  047b		       00 02	   .SCRL_START_UP =	2
    271  047b		       00 06	   .SCRL_START_DOWN =	SCREEN_LINES-.SCRL_START_UP
    272  047b
    273  047b		       a5 9d		      lda	ManX	; 3
    274  047d		       38		      sec		; 2
    275  047e		       e5 97		      sbc	BoardScrollX	; 3
    276  0480		       a8		      tay		; 2 = 10	  for later use
    277  0481
    278  0481		       a9 ff		      lda	#-1	; 2
    279  0483		       c0 02		      cpy	#.SCRL_START_LEFT	; 2
    280  0485		       30 06		      bmi	.startXScroll	; 2/3
    281  0487		       c0 08		      cpy	#.SCRL_START_RIGHT	; 2
    282  0489		       30 0b		      bmi	.skipXScroll	; 2/3
    283  048b		       a9 01		      lda	#1	; 2 = 12
    284  048d
    285  048d		       18	   .startXScroll clc		; 2
    286  048e		       65 97		      adc	BoardScrollX	; 3
    287  0490		       c5 94		      cmp	BoardEdge_Right	; 3
    288  0492		       b0 02		      bcs	.skipXScroll	; 2/3
    289  0494		       85 97		      sta	BoardScrollX	; 3 = 13
    290  0496
    291  0496				   .skipXScroll
    292  0496
    293  0496							; = 35 worst
    294  0496
    295  0496		       a5 9e		      lda	ManY	; 3
    296  0498		       38		      sec		; 2
    297  0499		       e5 96		      sbc	BoardScrollY	; 3
    298  049b		       a8		      tay		; 2 = 10	  for later use
    299  049c
    300  049c		       a9 ff		      lda	#-1	; 2
    301  049e		       c0 02		      cpy	#.SCRL_START_UP	; 2
    302  04a0		       30 06		      bmi	.startYScroll	; 2/3
    303  04a2		       c0 06		      cpy	#.SCRL_START_DOWN	; 2
    304  04a4		       30 0b		      bmi	.skipYScroll	; 2/3
    305  04a6		       a9 01		      lda	#1	; 2 = 12
    306  04a8
    307  04a8		       18	   .startYScroll clc		; 2
    308  04a9		       65 96		      adc	BoardScrollY	; 3
    309  04ab		       c5 95		      cmp	BoardEdge_Bottom	; 3
    310  04ad		       b0 02		      bcs	.skipYScroll	; 2/3
    311  04af		       85 96		      sta	BoardScrollY	; 3 = 13
    312  04b1
    313  04b1				   .skipYScroll
    314  04b1
    315  04b1							; = 35 worst
    316  04b1
    317  04b1		       60	   EarlyAbortx rts		; 6 =	6
    318  04b2
    319  04b2
    320  04b2							;------------------------------------------------------------------------------
    321  04b2
    322  04b2							; This is a GOOD home for these tables.
    323  04b2
      0  04b2					      DEFINE_SUBROUTINE	TS_PhaseVectorLO
      1  04b2		       00 00	   BANK_TS_PhaseVectorLO =	_CURRENT_BANK
      2  04b2					      SUBROUTINE
      3  04b2				   TS_PhaseVectorLO
    325  04b2
    326  04b2							; Gives LO byte of addresses of subroutines for timeslice processing
    327  04b2							; note +31✅ cycles at start of the function called
    328  04b2
    329  04b2		       58		      .byte.b	<ProcessObjStack	; abort = 46✅
    330  04b3		       5d		      .byte.b	<DrawFullScreen	; abort = 46✅
    331  04b4		       b4		      .byte.b	<BuildDrawStack	; abort = 54✅
    332  04b5		       bb		      .byte.b	<DrawAIntoStack	; abort = 54✅
    333  04b6		       91		      .byte.b	<SwitchObjects	; abort = 46✅
    334  04b7
    335  04b7				   TS_PhaseVectorHI
    336  04b7
    337  04b7							; Gives HI byte of addresses of subroutines for timeslice processing
    338  04b7
    339  04b7		       f8		      .byte.b	>ProcessObjStack
    340  04b8		       f3		      .byte.b	>DrawFullScreen
    341  04b9		       fb		      .byte.b	>BuildDrawStack
    342  04ba		       fb		      .byte.b	>DrawAIntoStack
    343  04bb		       f8		      .byte.b	>SwitchObjects
    344  04bc
    345  04bc				   TS_PhaseBank
    346  04bc
    347  04bc							; Gives bank of subroutines for timeslice processing
    348  04bc
    349  04bc		       0f		      .byte.b	BANK_ProcessObjStack
    350  04bd		       0e		      .byte.b	BANK_DrawFullScreen
    351  04be		       08		      .byte.b	BANK_DRAW_BUFFERS	;BANK_BuildDrawStack
    352  04bf		       08		      .byte.b	BANK_DRAW_BUFFERS	;BANK_BuildDrawStack2
    353  04c0		       0f		      .byte.b	BANK_SwitchObjects
    354  04c1
    355  04c1							;------------------------------------------------------------------------------
    356  04c1
    357  04c1				   OverscanTime
    358  04c1		       23 23		      .byte.b	OVERSCAN_TIM_NTSC, OVERSCAN_TIM_NTSC
    359  04c3		       29 23		      .byte.b	OVERSCAN_TIM_PAL, OVERSCAN_TIM_NTSC
    360  04c5
    361  04c5
    362  04c5		       00 12	   THROT_BASE =	18
    363  04c5				   theThrottler
    364  04c5		       12 12 15 12	      .byte.b	THROT_BASE, THROT_BASE, THROT_BASE*60/50, THROT_BASE
    365  04c9
      0  04c9					      DEFINE_SUBROUTINE	PostScreenCleanup
      1  04c9		       00 00	   BANK_PostScreenCleanup =	_CURRENT_BANK
      2  04c9					      SUBROUTINE
      3  04c9				   PostScreenCleanup
    367  04c9
    368  04c9		       c8		      iny		; --> 0
    369  04ca
    370  04ca		       84 49		      sty	COLUBK	; starts colour change bottom score area, wraps to top score area
    371  04cc							; + moved here so we don't see a minor colour artefact bottom of screen when look-arounding
    372  04cc
    373  04cc		       84 4d		      sty	PF0	; why wasn't this here?  I saw colour glitching in score area!
    374  04ce							; TJ: no idea why, but you had removed it in revision 758 ;)
    375  04ce							; completely accidental -- one of our cats may have deleted it.
    376  04ce		       84 4e		      sty	PF1
    377  04d0		       84 4f		      sty	PF2
    378  04d2		       84 5d		      sty	ENAM0
    379  04d4		       84 5b		      sty	GRP0	; when look-scrolling, we can see feet at the top if these aren't here
    380  04d6		       84 5c		      sty	GRP1	; 30/12/2011 -- fix dots @ top!
    381  04d8
    382  04d8							; D1 VBLANK turns off beam
    383  04d8
    384  04d8		       a9 42		      lda	#%01000010	; bit6 is not required
    385  04da		       85 41		      sta	VBLANK	; end of screen - enter blanking
    386  04dc
    387  04dc							;------------------------------------------------------------------------------
    388  04dc							; This is where the PAL system has a bit of extra time on a per-frame basis.
    389  04dc
    390  04dc		       a6 80		      ldx	Platform
    391  04de		       bd c1 f4 	      lda	OverscanTime,x
    392  04e1		       8d 96 02 	      sta	TIM64T
    393  04e4
    394  04e4							; Background colour priorities. Increasing order of priority...
    395  04e4							;	black -- nothing happening
    396  04e4							;	looking around			     lookingAround<0		     BLUE
    397  04e4							;	when paused			     gameMode... BIT7		     RED
    398  04e4							;	when the door opens (flash)	     ColourTimer>0		     WHITE
    399  04e4
    400  04e4		       a6 80		      ldx	Platform
    401  04e6		       bd c5 f4 	      lda	theThrottler,x
    402  04e9		       18		      clc
    403  04ea		       65 b3		      adc	Throttle
    404  04ec		       b0 02		      bcs	noVerflo
    405  04ee		       85 b3		      sta	Throttle
    406  04f0				   noVerflo
    407  04f0
    408  04f0							;----------------------------------------------------------------------------------------------
    409  04f0
    410  04f0							; has to be done AFTER screen display, because it disables the effect!
    411  04f0							;SLEEP 6
    412  04f0							;lda rnd		      ; 3     randomly reposition the Cosmic Ark missile
    413  04f0							;sta HMM0		      ; 3     this assumes that HMOVE is called at least once/frame
    414  04f0
    415  04f0							; "Flash" has highest BG colour priority
    416  04f0
    417  04f0		       a5 c0		      lda	ColourTimer
    418  04f2		       f0 08		      beq	noFlashBG
    419  04f4		       c6 c0		      dec	ColourTimer
    420  04f6		       d0 04		      bne	noFlashBG
    421  04f8		       a9 00		      lda	#0
    422  04fa		       85 b0		      sta	BGColour
    423  04fc							;lda ColourFlash
    424  04fc							;lda FlashColour,x
    425  04fc				   noFlashBG
    426  04fc							;	 sta BGColour
    427  04fc
    428  04fc							; Create a 'standardised' joystick with D4-D7 having bits CLEAR if the appropriate direction is chosen.
    429  04fc
    430  04fc		       ad 80 02 	      lda	SWCHA
    431  04ff		       25 92		      and	BufferedJoystick
    432  0501		       85 92		      sta	BufferedJoystick
    433  0503
    434  0503		       60		      rts
    435  0504
    436  0504							;------------------------------------------------------------------------------
    437  0504
------- FILE i2c_v2.2.inc LEVEL 3 PASS 3
      0  0504					      include	"i2c_v2.2.inc"
      1  0504							;
      2  0504							; i2c_v2.2.inc
      3  0504							;
      4  0504							;
      5  0504							; AtariVox EEPROM Driver
      6  0504							;
      7  0504							; By Alex Herbert, 2004
      8  0504							;
      9  0504							; Optimisations by Thomas Jentzsch, 2006/2008
     10  0504							;
     11  0504
     12  0504
     13  0504							; I/O Constants
     14  0504
     15  0504		       00 04	   I2C_SDA_MASK equ	$04
     16  0504		       00 08	   I2C_SCL_MASK equ	$08
     17  0504
     18  0504
     19  0504							; Signalling Macros
     20  0504
     21  0504							;  MAC     I2C_SCL_0
     22  0504							;    lda     #$00
     23  0504							;    sta     SWCHA
     24  0504							;  ENDM
     25  0504
     26  0504							;  MAC     I2C_SCL_1
     27  0504							;    lda     #I2C_SCL_MASK
     28  0504							;    sta     SWCHA
     29  0504							;  ENDM
     30  0504
     31  0504							;  MAC     I2C_SDA_IN
     32  0504							;    lda     #I2C_SCL_MASK
     33  0504							;    sta     SWACNT
     34  0504							;  ENDM
     35  0504
     36  0504							;  MAC     I2C_SDA_OUT
     37  0504							;    lda     #I2C_SCL_MASK|I2C_SDA_MASK
     38  0504							;    sta     SWACNT
     39  0504							;  ENDM
     40  0504
     41  0504
     42  0504					      MAC	i2c_start
     43  0504							; I2C_SCL_1
     44  0504					      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)*2	; 2	     I2C_SCL_MASK
     45  0504					      sta	SWCHA	; 4
     46  0504							; I2C_SDA_OUT
     47  0504					      lsr		; 2	     I2C_SCL_MASK|I2C_SDA_MASK
     48  0504					      sta	SWACNT	; 4
     49  0504							; total: 12 cycles
     50  0504					      ENDM
     51  0504
     52  0504
     53  0504					      MAC	i2c_txbit
     54  0504							; I2C_SCL_0
     55  0504					      lda	#%0011	; 2
     56  0504					      sta	SWCHA	; 4
     57  0504							; set bit
     58  0504					      adc	#%1000	; 2
     59  0504					      sta	SWACNT	; 4	     SDA = !C (a = %1000 / %1100)
     60  0504							; I2C_SCL_1
     61  0504					      lda	#I2C_SCL_MASK	; 2
     62  0504					      sta	SWCHA	; 4
     63  0504							; total: 18 cycles
     64  0504					      ENDM
     65  0504
     66  0504
     67  0504					      MAC	i2c_txnack
     68  0504							; I2C_SCL_0
     69  0504					      lda	#I2C_SCL_MASK*2	; 2	     $00
     70  0504					      sta	SWCHA	; 4
     71  0504							; I2C_SDA_IN
     72  0504					      lsr		; 2	     I2C_SCL_MASK
     73  0504					      sta	SWACNT	; 4
     74  0504							; I2C_SCL_1
     75  0504					      nop		; 2	     required for timing!
     76  0504					      sta	SWCHA	; 4	     I2C_SCL_MASK
     77  0504							; total: 18 cycles
     78  0504					      ENDM
     79  0504
     80  0504
     81  0504							; Subroutine Macros
     82  0504
     83  0504					      MAC	i2c_subs
     84  0504
     85  0504				   i2c_startread
     86  0504							; use V to flag if previous byte needs ACK
     87  0504					      ldy	#%10100001	; 2	     eeprom read command
     88  0504					      .byte	$2c	; 2
     89  0504				   i2c_startwrite
     90  0504					      ldy	#%10100000	; 2	     eeprom write command
     91  0504					      I2C_START		;12	     start signal (clears V flag)
     92  0504					      tya		; 2 = 16
     93  0504				   i2c_txbyte
     94  0504					      eor	#$ff	; 2	     invert data byte
     95  0504					      sec		; 2
     96  0504					      rol		; 2 =	6    shift loop bit into a
     97  0504				   i2c_txbyteloop
     98  0504					      tay		; 2
     99  0504					      I2C_TXBIT		;18	     transmit
    100  0504					      tya		; 2
    101  0504					      asl		; 2	     shift next bit into C
    102  0504					      bne	i2c_txbyteloop	; 2= 26/27
    103  0504
    104  0504							; receive acknowledge bit
    105  0504
    106  0504					      beq	i2c_rxbit	;43 = 43
    107  0504							; i2c_txbyte: 264 cycles
    108  0504							;-------------------------------------------------------------------------------
    109  0504
    110  0504				   i2c_rxbyte
    111  0504					      bvc	i2c_rxskipack	; 2	     previous byte needs acknowledge?
    112  0504					      jsr	i2c_txack	;24	     transmit acknowledge bit
    113  0504
    114  0504				   i2c_rxskipack
    115  0504					      bit	i2c_rxbyte	; 4	     set V - next byte(s) require acknowledge
    116  0504
    117  0504					      lda	#1	; 2
    118  0504				   i2c_rxbyteloop
    119  0504					      tay		; 2 =	2
    120  0504				   i2c_rxbit		;	     receive bit in C
    121  0504					      I2C_TXNACK		;18 = 18
    122  0504
    123  0504					      lda	SWCHA	; 4
    124  0504					      lsr		; 2
    125  0504					      lsr		; 2
    126  0504					      lsr		; 2 = 10    C = SDA
    127  0504
    128  0504					      tya		; 2
    129  0504					      rol		; 2	     rotate into Y
    130  0504					      bcc	i2c_rxbyteloop	; 2=	6/7
    131  0504
    132  0504							; received byte in A
    133  0504					      rts		; 6 =	6
    134  0504							; i2c_rxbit:  40 cycles
    135  0504							; i2c_rxbyte: 310/333 cycles
    136  0504							;-------------------------------------------------------------------------------
    137  0504
    138  0504				   i2c_stopread
    139  0504					      bvc	i2c_stopwrite	; 2
    140  0504					      ldy	#$80	; 2
    141  0504					      jsr	i2c_rxbit	;46	     transmit no-acknowledge
    142  0504
    143  0504				   i2c_stopwrite
    144  0504					      jsr	i2c_txack	;30
    145  0504
    146  0504							; return port to input mode
    147  0504					      lda	#0	; 2	     0
    148  0504					      sta	SWACNT	; 4
    149  0504					      rts		; 6 = 12
    150  0504							; i2c_stopread:  45/92
    151  0504							; i2c_stopwrite: 42
    152  0504							;-------------------------------------------------------------------------------
    153  0504
    154  0504				   i2c_txack
    155  0504							; I2C_SCL_0
    156  0504					      lda	#0	; 2	     $00
    157  0504					      sta	SWCHA	; 4
    158  0504							; I2C_SDA_OUT
    159  0504					      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)	; 2	     I2C_SCL_MASK|I2C_SDA_MASK
    160  0504					      sta	SWACNT	; 4
    161  0504							; I2C_SCL_1
    162  0504					      asl		; 2	     I2C_SCL_MASK
    163  0504					      sta	SWCHA	; 4
    164  0504
    165  0504					      rts		; 6
    166  0504							; total: 24 cycles
    167  0504							;-------------------------------------------------------------------------------
    168  0504
    169  0504					      ENDM
    170  0504
    171  0504
    172  0504
------- FILE BANK_GENERIC.asm
    439  0504
      0  0504					      i2c_subs
      1  0504
      2  0504				   i2c_startread
      3  0504
      4  0504		       a0 a1		      ldy	#%10100001
      5  0506		       2c		      .byte.b	$2c
      6  0507				   i2c_startwrite
      7  0507		       a0 a0		      ldy	#%10100000
      0  0509					      I2C_START
      1  0509
      2  0509		       a9 18		      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)*2
      3  050b		       8d 80 02 	      sta	SWCHA
      4  050e
      5  050e		       4a		      lsr
      6  050f		       8d 81 02 	      sta	SWACNT
      7  0512
      9  0512		       98		      tya
     10  0513				   i2c_txbyte
     11  0513		       49 ff		      eor	#$ff
     12  0515		       38		      sec
     13  0516		       2a		      rol
     14  0517				   i2c_txbyteloop
     15  0517		       a8		      tay
      0  0518					      I2C_TXBIT
      1  0518
      2  0518		       a9 03		      lda	#%0011
      3  051a		       8d 80 02 	      sta	SWCHA
      4  051d
      5  051d		       69 08		      adc	#%1000
      6  051f		       8d 81 02 	      sta	SWACNT
      7  0522
      8  0522		       a9 08		      lda	#I2C_SCL_MASK
      9  0524		       8d 80 02 	      sta	SWCHA
     10  0527
     17  0527		       98		      tya
     18  0528		       0a		      asl
     19  0529		       d0 ec		      bne	i2c_txbyteloop
     20  052b
     21  052b
     22  052b
     23  052b		       f0 0b		      beq	i2c_rxbit
     24  052d
     25  052d
     26  052d
     27  052d				   i2c_rxbyte
     28  052d		       50 03		      bvc	i2c_rxskipack
     29  052f		       20 60 f5 	      jsr	i2c_txack
     30  0532
     31  0532				   i2c_rxskipack
     32  0532		       2c 2d f5 	      bit	i2c_rxbyte
     33  0535
     34  0535		       a9 01		      lda	#1
     35  0537				   i2c_rxbyteloop
     36  0537		       a8		      tay
     37  0538				   i2c_rxbit
      0  0538					      I2C_TXNACK
      1  0538
      2  0538		       a9 10		      lda	#I2C_SCL_MASK*2
      3  053a		       8d 80 02 	      sta	SWCHA
      4  053d
      5  053d		       4a		      lsr
      6  053e		       8d 81 02 	      sta	SWACNT
      7  0541
      8  0541		       ea		      nop
      9  0542		       8d 80 02 	      sta	SWCHA
     10  0545
     39  0545
     40  0545		       ad 80 02 	      lda	SWCHA
     41  0548		       4a		      lsr
     42  0549		       4a		      lsr
     43  054a		       4a		      lsr
     44  054b
     45  054b		       98		      tya
     46  054c		       2a		      rol
     47  054d		       90 e8		      bcc	i2c_rxbyteloop
     48  054f
     49  054f
     50  054f		       60		      rts
     51  0550
     52  0550
     53  0550
     54  0550
     55  0550				   i2c_stopread
     56  0550		       50 05		      bvc	i2c_stopwrite
     57  0552		       a0 80		      ldy	#$80
     58  0554		       20 38 f5 	      jsr	i2c_rxbit
     59  0557
     60  0557				   i2c_stopwrite
     61  0557		       20 60 f5 	      jsr	i2c_txack
     62  055a
     63  055a
     64  055a		       a9 00		      lda	#0
     65  055c		       8d 81 02 	      sta	SWACNT
     66  055f		       60		      rts
     67  0560
     68  0560
     69  0560
     70  0560
     71  0560				   i2c_txack
     72  0560
     73  0560		       a9 00		      lda	#0
     74  0562		       8d 80 02 	      sta	SWCHA
     75  0565
     76  0565		       a9 0c		      lda	#(I2C_SCL_MASK|I2C_SDA_MASK)
     77  0567		       8d 81 02 	      sta	SWACNT
     78  056a
     79  056a		       0a		      asl
     80  056b		       8d 80 02 	      sta	SWCHA
     81  056e
     82  056e		       60		      rts
     83  056f
     84  056f
     85  056f
    441  056f
    442  056f				   HandleSaveKey SUBROUTINE
    443  056f
    444  056f		       2f 00	   SAVEKEY_ADR =	$2F00	;	     tentative address for Sokoban (64 bytes)
    445  056f
    446  056f							;------------------------------------------------------------------------------
      0  056f					      DEFINE_SUBROUTINE	ReadSaveKey	; = 2371
      1  056f		       00 00	   BANK_ReadSaveKey =	_CURRENT_BANK
      2  056f					      SUBROUTINE
      3  056f				   ReadSaveKey
    448  056f
    449  056f							; assume no SaveKey found:
    450  056f		       a9 ff		      lda	#$ff	; 2	     return $ff if no SaveKey found
    451  0571		       85 e0		      sta	highScoreSK+2	; 3
    452  0573
    453  0573							; setup SaveKey:
    454  0573		       a5 e1		      lda	startingLevel	; 3	     load start levelX*5 and level
    455  0575		       a6 b2		      ldx	level	; 3
    456  0577		       20 b0 f5 	      jsr	SetupSaveKey	;6+853
    457  057a		       90 52		      bcc	NoSKfound	; 2/3
    458  057c
    459  057c							;    lda     #$34
    460  057c							;    sta     COLUBK
    461  057c
    462  057c							; start read
    463  057c		       20 57 f5 	      jsr	i2c_stopwrite	;6+42	     end of "fake" write
    464  057f		       20 04 f5 	      jsr	i2c_startread	;6+284      Start signal and $a1 command byte
    465  0582
    466  0582							; read high score:
    467  0582		       a2 02		      ldx	#3-1	; 2 = 1187
    468  0584				   .loopRead
    469  0584		       20 2d f5 	      jsr	i2c_rxbyte	;6+333      read byte from EEPROM
    470  0587		       c9 ff		      cmp	#$ff	; 2	     EEPROM slot empty?
    471  0589		       d0 02		      bne	.skipEmpty	; 2/3	      no, skip clear
    472  058b		       a9 00		      lda	#0	; 2	     clear EEPROM slot
    473  058d				   .skipEmpty
    474  058d		       95 de		      sta	highScoreSK,x	; 4
    475  058f		       ca		      dex		; 2
    476  0590		       10 f2		      bpl	.loopRead	; 2/3= 354
    477  0592
    478  0592							; stop read:
    479  0592		       4c 50 f5 	      jmp	i2c_stopread	;3+92=95    terminate read
    480  0595
    481  0595							;------------------------------------------------------------------------------
      0  0595					      DEFINE_SUBROUTINE	WriteSaveKey	; = 1751
      1  0595		       00 00	   BANK_WriteSaveKey =	_CURRENT_BANK
      2  0595					      SUBROUTINE
      3  0595				   WriteSaveKey
    483  0595
    484  0595							; check if new high score:
    485  0595		       a6 de		      ldx	highScoreSK	; 3
    486  0597		       e8		      inx		; 2
    487  0598		       f0 34		      beq	NoSKfound	; 2/3	     no new high score, abort
    488  059a
    489  059a							; setup SaveKey:
    490  059a		       a5 e1		      lda	startingLevel	; 3	     load start levelX*5 and level
    491  059c		       a6 e2		      ldx	startLevel	; 3
    492  059e		       20 b0 f5 	      jsr	SetupSaveKey	; 6+853
    493  05a1		       90 2b		      bcc	NoSKfound	; 2/3
    494  05a3
    495  05a3							;    lda     #$64
    496  05a3							;    sta     COLUBK
    497  05a3
    498  05a3							; write high score:
    499  05a3		       a2 02		      ldx	#3-1	; 2 = 841
    500  05a5				   .loopWrite
    501  05a5		       b5 de		      lda	highScoreSK,x	; 4
    502  05a7		       20 13 f5 	      jsr	i2c_txbyte	;6+264      transmit to EEPROM
    503  05aa		       ca		      dex		; 2
    504  05ab		       10 f8		      bpl	.loopWrite	; 2/3= 837
    505  05ad
    506  05ad							; stop write:
    507  05ad		       4c 57 f5 	      jmp	i2c_stopwrite	; 3+42= 45  terminate write and commit to memory
    508  05b0
    509  05b0
    510  05b0							;------------------------------------------------------------------------------
    511  05b0
      0  05b0					      DEFINE_SUBROUTINE	SetupSaveKey	; = 853
      1  05b0		       00 00	   BANK_SetupSaveKey =	_CURRENT_BANK
      2  05b0					      SUBROUTINE
      3  05b0				   SetupSaveKey
    513  05b0
    514  05b0							; calculate slot;
    515  05b0							; a = levelX
    516  05b0							; x = level (0..4)
    517  05b0		       85 e3		      sta	offsetSK	; 3
    518  05b2		       8a		      txa		; 2
    519  05b3		       18		      clc		; 2
    520  05b4		       65 e3		      adc	offsetSK	; 3
    521  05b6		       85 e3		      sta	offsetSK	; 3
    522  05b8		       0a		      asl		; 2	     multiply by 3
    523  05b9		       65 e3		      adc	offsetSK	; 3
    524  05bb		       69 00		      adc	#<SAVEKEY_ADR	; 2
    525  05bd		       aa		      tax		; 2 = 22
    526  05be							; detect SaveKey:
    527  05be		       20 07 f5 	      jsr	i2c_startwrite	;6+280
    528  05c1		       d0 0a		      bne	.exitSK	; 2/3
    529  05c3
    530  05c3							; setup address:
    531  05c3		       b8		      clv		; 2
    532  05c4		       a9 2f		      lda	#>SAVEKEY_ADR	; 2	     upper byte of address
    533  05c6		       20 13 f5 	      jsr	i2c_txbyte	;6+264
    534  05c9		       8a		      txa		; 2	     x = lower byte offset
    535  05ca		       4c 13 f5 	      jmp	i2c_txbyte	;3+264      returns C==1
    536  05cd
    537  05cd				   .exitSK
    538  05cd		       18		      clc
    539  05ce				   NoSKfound
    540  05ce		       60		      rts
    541  05ce					      ENDIF
    542  05cf
    543  05cf							;----------------------------------------------------------------------
    544  05cf
    545  05cf
      0  05cf					      DEFINE_SUBROUTINE	GenerateHighScoreCode
      1  05cf		       00 00	   BANK_GenerateHighScoreCode =	_CURRENT_BANK
      2  05cf					      SUBROUTINE
      3  05cf				   GenerateHighScoreCode
    547  05cf
    548  05cf							;rdm = random.randint(1,3)
    549  05cf							;__encoding = [
    550  05cf							;    (rdm << 5) | (seconds >> 8),
    551  05cf							;    seconds & 0xFF,
    552  05cf							;    level,
    553  05cf							;    moves >> 8,
    554  05cf							;    moves & 0xFF
    555  05cf							;]
    556  05cf
    557  05cf
    558  05cf
    559  05cf
    560  05cf		       1f ff	   MAX_SECOND_COUNT =	%1111111111111
    561  05cf
    562  05cf		       a5 cf		      lda	seconds+1
    563  05d1		       c9 1f		      cmp	#>MAX_SECOND_COUNT
    564  05d3		       90 10		      bcc	secRangeOK
    565  05d5		       d0 06		      bne	secAdjust
    566  05d7		       a5 ce		      lda	seconds
    567  05d9		       c9 ff		      cmp	#<MAX_SECOND_COUNT
    568  05db		       90 08		      bcc	secRangeOK
    569  05dd
    570  05dd		       a9 ff	   secAdjust  lda	#<MAX_SECOND_COUNT
    571  05df		       85 ce		      sta	seconds
    572  05e1		       a9 1f		      lda	#>MAX_SECOND_COUNT
    573  05e3		       85 cf		      sta	seconds+1
    574  05e5
    575  05e5				   secRangeOK
    576  05e5
    577  05e5
    578  05e5
    579  05e5		       20 52 fd    rerandom   jsr	Random
    580  05e8		       29 03		      and	#%11
    581  05ea		       f0 f9		      beq	rerandom
    582  05ec
    583  05ec							;__randomiser = (rdm << 6) | (rdm << 4) | (rdm << 2) | rdm
    584  05ec
    585  05ec		       aa		      tax
    586  05ed		       bd 64 f7 	      lda	RandomMaskByte,x
    587  05f0		       85 ee		      sta	__randomiser
    588  05f2
    589  05f2		       a5 cf		      lda	seconds+1
    590  05f4		       85 e9		      sta	__encoding+0	;    (rdm << 5) | (seconds >> 8),
    591  05f6		       a5 ce		      lda	seconds
    592  05f8		       85 ea		      sta	__encoding+1	;    seconds & 0xFF,
    593  05fa
    594  05fa		       a5 b1		      lda	levelX
    595  05fc		       85 eb		      sta	__encoding+2	;    level, should be < 128
    596  05fe
    597  05fe							; f'n ugly convert 2 byte (4-digit) BCD into 2 byte binary...
    598  05fe
    599  05fe		       a5 b6	   rangedOK   lda	BCD_moveCounter+1
    600  0600		       4a		      lsr
    601  0601		       4a		      lsr
    602  0602		       4a		      lsr
    603  0603		       4a		      lsr		; THOUSANDS 0-9
    604  0604		       0a		      asl
    605  0605		       aa		      tax
    606  0606		       bd 86 f7 	      lda	Times1000,x
    607  0609		       85 e7		      sta	__binMoves
    608  060b		       bd 87 f7 	      lda	Times1000+1,x
    609  060e		       85 e8		      sta	__binMoves+1
    610  0610
    611  0610		       a5 b6		      lda	BCD_moveCounter+1
    612  0612		       29 0f		      and	#$F	; HUNDREDS 0-9
    613  0614		       0a		      asl
    614  0615		       aa		      tax
    615  0616
    616  0616		       a5 e7		      lda	__binMoves
    617  0618		       7d 72 f7 	      adc	Times100,x
    618  061b		       85 e7		      sta	__binMoves
    619  061d		       a5 e8		      lda	__binMoves+1
    620  061f		       7d 73 f7 	      adc	Times100+1,x
    621  0622		       85 e8		      sta	__binMoves+1
    622  0624
    623  0624		       a5 b5		      lda	BCD_moveCounter
    624  0626		       29 0f		      and	#$F	;   UNITS 0-9
    625  0628		       18		      clc
    626  0629		       65 e7		      adc	__binMoves
    627  062b		       85 e7		      sta	__binMoves
    628  062d		       a5 e8		      lda	__binMoves+1
    629  062f		       69 00		      adc	#0
    630  0631		       85 e8		      sta	__binMoves+1
    631  0633
    632  0633		       a5 b5		      lda	BCD_moveCounter
    633  0635		       4a		      lsr
    634  0636		       4a		      lsr
    635  0637		       4a		      lsr
    636  0638		       4a		      lsr		; tens
    637  0639		       aa		      tax
    638  063a		       18		      clc
    639  063b		       a5 e7		      lda	__binMoves
    640  063d		       7d 68 f7 	      adc	Times10,x
    641  0640		       85 e7		      sta	__binMoves
    642  0642		       a5 e8		      lda	__binMoves+1
    643  0644		       69 00		      adc	#0
    644  0646		       85 e8		      sta	__binMoves+1
    645  0648
    646  0648		       0f ff	   MAX_MOVE_COUNT =	$FFF
    647  0648
    648  0648		       a5 e8		      lda	__binMoves+1
    649  064a		       c9 0f		      cmp	#>MAX_MOVE_COUNT
    650  064c		       90 10		      bcc	movRangeOK
    651  064e		       d0 06		      bne	movAdjust
    652  0650		       a5 e7		      lda	__binMoves
    653  0652		       c9 ff		      cmp	#<MAX_MOVE_COUNT
    654  0654		       90 08		      bcc	movRangeOK
    655  0656
    656  0656		       a9 ff	   movAdjust  lda	#<MAX_MOVE_COUNT
    657  0658		       85 e7		      sta	__binMoves
    658  065a		       a9 0f		      lda	#>MAX_MOVE_COUNT
    659  065c		       85 e8		      sta	__binMoves+1
    660  065e
    661  065e				   movRangeOK
    662  065e
    663  065e		       a5 e7		      lda	__binMoves
    664  0660		       85 ed		      sta	__encoding+4
    665  0662		       a5 e8		      lda	__binMoves+1
    666  0664		       85 ec		      sta	__encoding+3
    667  0666
    668  0666							; generate a checksum
    669  0666
    670  0666		       18		      clc
    671  0667		       a5 e9		      lda	__encoding
    672  0669		       65 ea		      adc	__encoding+1
    673  066b		       18		      clc
    674  066c		       65 eb		      adc	__encoding+2
    675  066e		       18		      clc
    676  066f		       65 ec		      adc	__encoding+3
    677  0671		       18		      clc
    678  0672		       65 ed		      adc	__encoding+4	;checksum = sum(__encoding) & 0xF
    679  0674		       0a		      asl
    680  0675		       0a		      asl
    681  0676		       0a		      asl
    682  0677		       0a		      asl
    683  0678		       05 ec		      ora	__encoding+3
    684  067a		       85 ec		      sta	__encoding+3	;__encoding[3] |= (checksum << 4)
    685  067c
    686  067c				   CompletedPlainEncode
    687  067c
    688  067c							;for i in range(len(__encoding)):
    689  067c							;    __encoding[i] ^= __randomiser
    690  067c
    691  067c		       a2 04		      ldx	#4
    692  067e		       b5 e9	   xorencode  lda	__encoding,x
    693  0680		       45 ee		      eor	__randomiser
    694  0682		       95 e9		      sta	__encoding,x
    695  0684		       ca		      dex
    696  0685		       10 f7		      bpl	xorencode
    697  0687
    698  0687							; put __randomiser in D6,D5 of __encoding[0]
    699  0687
    700  0687		       a5 ee		      lda	__randomiser
    701  0689		       4a		      lsr
    702  068a		       29 60		      and	#%01100000
    703  068c		       85 ee		      sta	__randomiser
    704  068e
    705  068e		       a5 e9		      lda	__encoding
    706  0690		       29 1f		      and	#%00011111
    707  0692		       05 ee		      ora	__randomiser
    708  0694		       85 e9		      sta	__encoding
    709  0696
    710  0696
    711  0696							; because they were 0, and have now been xor'd with __randomiser...
    712  0696							; for top 3 bits, D7D6 now hold the relevant __randomiser value. D5 is same as D7 for what it's worth
    713  0696							; write the encoded bytes for 6502.ts emulator to intercept for web triggering
    714  0696
    715  0696		       a2 00		      ldx	#0
    716  0698		       b5 e9	   emulNotify lda	__encoding,x
    717  069a		       85 48		      sta	INPT0	; for web interface triggering
    718  069c		       e8		      inx
    719  069d		       e0 05		      cpx	#5
    720  069f		       90 f7		      bcc	emulNotify
    721  06a1		       86 49		      stx	INPT1	; for web interface triggering
    722  06a3
    723  06a3					      IF	PLUSCART = YES
    724  06a3							; write the digits for the PlusCart
    725  06a3
    726  06a3		       ad f0 7f 	      lda	PLUSCART_IO
    727  06a6		       c9 aa		      cmp	#PLUS0
    728  06a8		       d0 15		      bne	isplus
    729  06aa		       ad f1 7f 	      lda	PLUSCART_IO+1
    730  06ad		       c9 19		      cmp	#PLUS1
    731  06af		       d0 0e		      bne	isplus
    732  06b1		       ad f2 7f 	      lda	PLUSCART_IO+2
    733  06b4		       c9 af		      cmp	#PLUS2
    734  06b6		       d0 07		      bne	isplus
    735  06b8		       ad f3 7f 	      lda	PLUSCART_IO+3
    736  06bb		       c9 36		      cmp	#PLUS3
    737  06bd		       f0 0b		      beq	noPlusCart
    738  06bf				   isplus
    739  06bf
    740  06bf
    741  06bf		       a2 00		      ldx	#0
    742  06c1		       b5 e9	   sendCodeToPlus lda	__encoding,x
    743  06c3							;sta $1ff0				; write to request buffer
    744  06c3		       e8		      inx
    745  06c4		       e0 04		      cpx	#4
    746  06c6		       90 f9		      bcc	sendCodeToPlus
    747  06c8		       b5 e9		      lda	__encoding,x
    748  06ca							;sta $1ff1				; send request buffer to Backend..
    749  06ca
    750  06ca				   noPlusCart
    751  06ca
    752  06ca					      ENDIF
    753  06ca
    754  06ca
    755  06ca							; we now have a binary version of the __encoding.
    756  06ca							; Convert this into 12 decimal digits
    757  06ca
    758  06ca		       a0 37		      ldy	#55	; --> high byte of 10^11
    759  06cc		       a2 00		      ldx	#0
    760  06ce				   decimalise
    761  06ce		       a9 00		      lda	#0
    762  06d0		       95 db		      sta	__decimal,x
    763  06d2
    764  06d2		       38		      sec
    765  06d3				   subonedecdigit
    766  06d3				   .OFFSET    SET	4
    767  06d3					      REPEAT	5
    768  06d3		       a5 ed		      lda	__encoding + .OFFSET
    769  06d5		       f9 2c f7 	      sbc	DecimalDigit + .OFFSET,y
    770  06d8		       85 ed		      sta	__encoding + .OFFSET
    771  06d8				   .OFFSET    SET	.OFFSET - 1
    767  06d8					      REPEND
    768  06da		       a5 ec		      lda	__encoding + .OFFSET
    769  06dc		       f9 2b f7 	      sbc	DecimalDigit + .OFFSET,y
    770  06df		       85 ec		      sta	__encoding + .OFFSET
    771  06df				   .OFFSET    SET	.OFFSET - 1
    767  06df					      REPEND
    768  06e1		       a5 eb		      lda	__encoding + .OFFSET
    769  06e3		       f9 2a f7 	      sbc	DecimalDigit + .OFFSET,y
    770  06e6		       85 eb		      sta	__encoding + .OFFSET
    771  06e6				   .OFFSET    SET	.OFFSET - 1
    767  06e6					      REPEND
    768  06e8		       a5 ea		      lda	__encoding + .OFFSET
    769  06ea		       f9 29 f7 	      sbc	DecimalDigit + .OFFSET,y
    770  06ed		       85 ea		      sta	__encoding + .OFFSET
    771  06ed				   .OFFSET    SET	.OFFSET - 1
    767  06ed					      REPEND
    768  06ef		       a5 e9		      lda	__encoding + .OFFSET
    769  06f1		       f9 28 f7 	      sbc	DecimalDigit + .OFFSET,y
    770  06f4		       85 e9		      sta	__encoding + .OFFSET
    771  06f4				   .OFFSET    SET	.OFFSET - 1
    772  06f6					      REPEND
    773  06f6		       f6 db		      inc	__decimal,x
    774  06f8		       b0 d9		      bcs	subonedecdigit
    775  06fa
    776  06fa							; add back on the 'overshoot'
    777  06fa				   .OFFSET    SET	4
    778  06fa					      REPEAT	5
    779  06fa		       a5 ed		      lda	__encoding + .OFFSET
    780  06fc		       79 2c f7 	      adc	DecimalDigit + .OFFSET,y
    781  06ff		       85 ed		      sta	__encoding + .OFFSET
    782  06ff				   .OFFSET    SET	.OFFSET - 1
    778  06ff					      REPEND
    779  0701		       a5 ec		      lda	__encoding + .OFFSET
    780  0703		       79 2b f7 	      adc	DecimalDigit + .OFFSET,y
    781  0706		       85 ec		      sta	__encoding + .OFFSET
    782  0706				   .OFFSET    SET	.OFFSET - 1
    778  0706					      REPEND
    779  0708		       a5 eb		      lda	__encoding + .OFFSET
    780  070a		       79 2a f7 	      adc	DecimalDigit + .OFFSET,y
    781  070d		       85 eb		      sta	__encoding + .OFFSET
    782  070d				   .OFFSET    SET	.OFFSET - 1
    778  070d					      REPEND
    779  070f		       a5 ea		      lda	__encoding + .OFFSET
    780  0711		       79 29 f7 	      adc	DecimalDigit + .OFFSET,y
    781  0714		       85 ea		      sta	__encoding + .OFFSET
    782  0714				   .OFFSET    SET	.OFFSET - 1
    778  0714					      REPEND
    779  0716		       a5 e9		      lda	__encoding + .OFFSET
    780  0718		       79 28 f7 	      adc	DecimalDigit + .OFFSET,y
    781  071b		       85 e9		      sta	__encoding + .OFFSET
    782  071b				   .OFFSET    SET	.OFFSET - 1
    783  071d					      REPEND
    784  071d
    785  071d		       d6 db		      dec	__decimal,x
    786  071f
    787  071f		       e8		      inx
    788  0720
    789  0720		       88		      dey
    790  0721		       88		      dey
    791  0722		       88		      dey
    792  0723		       88		      dey
    793  0724		       88		      dey		; point to previous 10^x
    794  0725
    795  0725		       10 a7		      bpl	decimalise
    796  0727
    797  0727							; on exit, the 12 decimal digits are in '__decimal'
    798  0727
    799  0727		       60		      rts
    800  0728
    801  0728		       00 00 00 00*DecimalDigit .byte.b	%00000000,%00000000,%00000000,%00000000,%00000001	; 10^0
    802  072d		       00 00 00 00*	      .byte.b	%00000000,%00000000,%00000000,%00000000,%00001010	; 10^1
    803  0732		       00 00 00 00*	      .byte.b	%00000000,%00000000,%00000000,%00000000,%01100100	; 10^2
    804  0737		       00 00 00 03*	      .byte.b	%00000000,%00000000,%00000000,%00000011,%11101000	; 10^3
    805  073c		       00 00 00 27*	      .byte.b	%00000000,%00000000,%00000000,%00100111,%00010000	; 10^4
    806  0741		       00 00 01 86*	      .byte.b	%00000000,%00000000,%00000001,%10000110,%10100000	; 10^5
    807  0746		       00 00 0f 42*	      .byte.b	%00000000,%00000000,%00001111,%01000010,%01000000	; 10^6
    808  074b		       00 00 98 96*	      .byte.b	%00000000,%00000000,%10011000,%10010110,%10000000	; 10^7
    809  0750		       00 05 f5 e1*	      .byte.b	%00000000,%00000101,%11110101,%11100001,%00000000	; 10^8
    810  0755		       00 3b 9a ca*	      .byte.b	%00000000,%00111011,%10011010,%11001010,%00000000	; 10^9
    811  075a		       02 54 0b e4*	      .byte.b	%00000010,%01010100,%00001011,%11100100,%00000000	; 10^10
    812  075f		       17 48 76 e8*	      .byte.b	%00010111,%01001000,%01110110,%11101000,%00000000	; 10^11
    813  0764							;.byte %11101000,%11010100,%10100101,%00010000,%00000000     ; 10^12
    814  0764
    815  0764
    816  0764
    817  0764		       00 55 aa ff RandomMaskByte .byte.b	0, %01010101, %10101010, %11111111
    818  0768		       00 0a 14 1e*Times10    .byte.b	0, 10, 20, 30, 40, 50, 60, 70, 80, 90
    819  0772		       00 00 64 00*Times100   .word.w	0, 100, 200, 300, 400, 500, 600, 700, 800, 900
    820  0786		       00 00 e8 03*Times1000  .word.w	0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000
    821  079a
    822  079a
    823  079a
    824  079a
    825  079a
    826  079a
    827  079a
    828  079a
    829  079a
      0  079a					      CHECK_BANK_SIZE	"GENERIC_BANK_1 -- full 2K"
      1  079a		       07 9a	   .TEMP      =	* - BANK_START
 GENERIC_BANK_1 -- full 2K (2K) SIZE =  $79a , FREE= $66
      2  079a					      ECHO	"GENERIC_BANK_1 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  079a				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  079a				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  079a				  -	      ERR
      6  079a					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_ROM_SHADOW_RAMBANK.asm LEVEL 2 PASS 3
      0  079a					      include	"BANK_ROM_SHADOW_RAMBANK.asm"
      1  079a							;    Sokoboo - a Sokoban implementation
      2  079a							;    using a generic tile-based display engine for the Atari 2600
      3  079a							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  079a							;
      5  079a							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  079a							;
      7  079a							;    Code related to the generic tile-based display engine was developed by
      8  079a							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  079a							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  079a							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  079a							;
     12  079a							;    Code related to music and sound effects uses the TIATracker music player
     13  079a							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  079a							;    directory for Apache licensing details.
     15  079a							;
     16  079a							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  079a							;    See the copyright notices in the License directory for a list of level
     18  079a							;    contributors.
     19  079a							;
     20  079a							;    Except where otherwise indicated, this software is released under the
     21  079a							;    following licensing arrangement...
     22  079a							;
     23  079a							;    This program is free software: you can redistribute it and/or modify
     24  079a							;    it under the terms of the GNU General Public License as published by
     25  079a							;    the Free Software Foundation, either version 3 of the License, or
     26  079a							;    (at your option) any later version.
     27  079a							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  079a
     29  079a							;    This program is distributed in the hope that it will be useful,
     30  079a							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  079a							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  079a							;    GNU General Public License for more details.
     33  079a
     34  079a							;------------------------------------------------------------------------------
     35  079a							;##############################################################################
     36  079a							;------------------------------------------------------------------------------
      0  079a					      NEWBANK	ROM_SHADOW_OF_RAMBANK_CODE
      1  0bfe ????				      SEG	ROM_SHADOW_OF_RAMBANK_CODE
      2  0800					      ORG	ORIGIN
      3  0800					      RORG	$F000
      4  0800				   BANK_START SET	*
      5  0800				   ROM_SHADOW_OF_RAMBANK_CODE SET	ORIGIN / 2048
      6  0800				   ORIGIN     SET	ORIGIN + 2048
      7  0800				   _CURRENT_BANK SET	ROM_SHADOW_OF_RAMBANK_CODE
     38  0800
     39  0800							; This is essentially a ROM mirror of a RAM bank.
     40  0800							; The contents of this bank are copied to each of the ROW banks on startup, and
     41  0800							; this gives a 1:1 correspondence between the data/addresses defined here, and
     42  0800							; the addresses in the switched-in RAM bank.
     43  0800
     44  0800							; Note: Bankswitching code between any of these banks guarantees the code can
     45  0800							; continue to run -- because, of course, the same code is still at the same
     46  0800							; memory address.
     47  0800
      0  0800					      DEFINE_SUBROUTINE	DrawTheScreen
      1  0800		       00 01	   BANK_DrawTheScreen =	_CURRENT_BANK
      2  0800					      SUBROUTINE
      3  0800				   DrawTheScreen
     49  0800
     50  0800							; Thomas Jentzsch strikes again.  And Andrew Davie too ;)
     51  0800							; A refactor of the kernel to improve the timing.
     52  0800							; Experimental refactor to remove the blank line...
     53  0800
     54  0800							; adjust here so that the first line of the kernel starts exactly at cycle 67
     55  0800							; (since TJ said it could start up to 5 cycles earlier than #67).
     56  0800
     57  0800							; TODO: remove GRP1 and COLUP1 access (or use higher resolution player)
     58  0800							;	     @57
      0  0800					      SLEEP	6	; 3
      1  0800				   .CYCLES    SET	6
      2  0800
      3  0800				  -	      IF	.CYCLES < 2
      4  0800				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0800				  -	      ERR
      6  0800					      ENDIF
      7  0800
      8  0800				  -	      IF	.CYCLES & 1
      9  0800				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  0800				  -	      nop	0
     11  0800				  -	      ELSE
     12  0800				  -	      bit	VSYNC
     13  0800				  -	      ENDIF
     14  0800				  -.CYCLES    SET	.CYCLES - 3
     15  0800					      ENDIF
     16  0800
     17  0800					      REPEAT	.CYCLES / 2
     18  0800		       ea		      nop
     17  0800					      REPEND
     18  0801		       ea		      nop
     17  0801					      REPEND
     18  0802		       ea		      nop
     19  0803					      REPEND
     60  0803
     61  0803		       a2 00		      ldx	#<(BANK_SCREENMARKII1)	; 2		     == 0!!!
     62  0805		       10 3d		      bpl	NextALineStart	; 3 =	8    @65     unconditional
     63  0807
     64  0807				   Proc2		; 5
      0  0807					      SLEEP	3	; 3	     @64
      1  0807				   .CYCLES    SET	3
      2  0807
      3  0807				  -	      IF	.CYCLES < 2
      4  0807				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0807				  -	      ERR
      6  0807					      ENDIF
      7  0807
      8  0807					      IF	.CYCLES & 1
      9  0807					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0807		       04 00		      nop	0
     11  0809				  -	      ELSE
     12  0809				  -	      bit	VSYNC
     13  0809					      ENDIF
     14  0809				   .CYCLES    SET	.CYCLES - 3
     15  0809					      ENDIF
     16  0809
     17  0809				  -	      REPEAT	.CYCLES / 2
     18  0809				  -	      nop
     19  0809					      REPEND
     66  0809		       10 3b		      bpl	ScanBLUEBD	; 3 = 11    @67     unconditional
     67  080b
      0  080b					      DEFINE_SUBROUTINE	ScanRED	;	     @60
      1  080b		       00 01	   BANK_ScanRED =	_CURRENT_BANK
      2  080b					      SUBROUTINE
      3  080b				   ScanRED
     69  080b		       b9 35 f3    SM_PF0_REDl lda	CHARACTERSHAPE_BLANK,y	; 4
     70  080e		       85 4d		      sta	PF0	; 3	     @67
     71  0810		       b9 14 f2 	      lda	ScreenBitmapRED+0*LINES_PER_CHAR,y	; 4
     72  0813		       85 4e		      sta	PF1	; 3 = 14    @74
     73  0815							;SELFMOD_PLAYERCOL_RED
     74  0815		       b9 65 f3 	      lda	PLAYER0_COLOUR,y	; 4
     75  0818							;lda #$66
     76  0818							;nop
     77  0818		       85 46		      sta	COLUP0	; 3	     @05
      0  081a					      SLEEP	3
      1  081a				   .CYCLES    SET	3
      2  081a
      3  081a				  -	      IF	.CYCLES < 2
      4  081a				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  081a				  -	      ERR
      6  081a					      ENDIF
      7  081a
      8  081a					      IF	.CYCLES & 1
      9  081a					      IFNCONST	NO_ILLEGAL_OPCODES
     10  081a		       04 00		      nop	0
     11  081c				  -	      ELSE
     12  081c				  -	      bit	VSYNC
     13  081c					      ENDIF
     14  081c				   .CYCLES    SET	.CYCLES - 3
     15  081c					      ENDIF
     16  081c
     17  081c				  -	      REPEAT	.CYCLES / 2
     18  081c				  -	      nop
     19  081c					      REPEND
     79  081c							;sta COLUP1				      ; 3 = 10	  @08
     80  081c
     81  081c							; TIMING COUNTS ARE WRONG FROM HERE, DUE TO ABOVE CYCLE LOSS
     82  081c
     83  081c		       f0 1d	   Colour_A_Actual =	* + 1
     84  081c				   SELFMOD_RED
     85  081c		       a9 00		      lda	#0	; 2
     86  081e		       85 48		      sta	COLUPF	; 3 =	5    @13
     87  0820
     88  0820				   SELFMOD_PLAYER0_RED
     89  0820		       b9 4d f3 	      lda	ShapePlayerRED,y	; 4
     90  0823		       85 5b		      sta	GRP0	; 3 =	7    @20
     91  0825
     92  0825		       b9 2c f2 	      lda	ScreenBitmapRED+1*LINES_PER_CHAR,y	; 4
     93  0828		       85 4f		      sta	PF2	; 3 =	7    @27
     94  082a
     95  082a		       b9 35 f3    SM_PF0_REDr lda	#CHARACTERSHAPE_BLANK,y	; 4
     96  082d		       85 4d		      sta	PF0	; 3	     @34
     97  082f		       b9 44 f2 	      lda	ScreenBitmapRED+2*LINES_PER_CHAR,y	; 4
     98  0832		       85 4e		      sta	PF1	; 3	     @41
     99  0834		       b9 5c f2 	      lda	ScreenBitmapRED+3*LINES_PER_CHAR,y	; 4
    100  0837		       85 4f		      sta	PF2	; 3 = 21    @48     must be >=48! :-)
    101  0839
    102  0839				   SELFMOD_PLAYER1_RED
    103  0839		       b9 4d f3 	      lda	ShapePlayerRED,y	; 4
    104  083c							;sta.w GRP1				      ; 4 =  8	  @56	VDELed!
      0  083c					      SLEEP	4
      1  083c				   .CYCLES    SET	4
      2  083c
      3  083c				  -	      IF	.CYCLES < 2
      4  083c				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  083c				  -	      ERR
      6  083c					      ENDIF
      7  083c
      8  083c				  -	      IF	.CYCLES & 1
      9  083c				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  083c				  -	      nop	0
     11  083c				  -	      ELSE
     12  083c				  -	      bit	VSYNC
     13  083c				  -	      ENDIF
     14  083c				  -.CYCLES    SET	.CYCLES - 3
     15  083c					      ENDIF
     16  083c
     17  083c					      REPEAT	.CYCLES / 2
     18  083c		       ea		      nop
     17  083c					      REPEND
     18  083d		       ea		      nop
     19  083e					      REPEND
    106  083e
    107  083e		       88		      dey		; 2
    108  083f		       10 c6		      bpl	Proc2	; 2(3)      --> 61 if taken
    109  0841
    110  0841		       e8	   SELFMOD_X  inx		; 2
    111  0842		       86 3e		      stx	SET_BANK_RAM	; 3	     SWITCH TO CORRECT ROW BANK (OR EXIT BANK)
    112  0844							;EXIT_RETURN_HERE
    113  0844				   NextALineStart
    114  0844		       a0 07		      ldy	#LINES_PER_CHAR/3-1	; 2 = 11    @67
    115  0846				   ScanBLUEBD		;	     @67     let's start as late as possible
    116  0846
    117  0846							;------------------------------------------------------------------------------
    118  0846
    119  0846		       b9 35 f3    SM_PF0_BLUEl lda	CHARACTERSHAPE_BLANK,y	; 4
    120  0849		       85 4d		      sta	PF0	; 3 =	7    @74
    121  084b							;SELFMOD_PLAYERCOL_BLUE
    122  084b		       b9 75 f3 	      lda	PLAYER0_COLOUR+2*LINES_PER_CHAR/3,y	; 4
    123  084e							;lda #$66
    124  084e							;nop
    125  084e							;sta COLUP1				      ; 3	  @05
      0  084e					      SLEEP	3
      1  084e				   .CYCLES    SET	3
      2  084e
      3  084e				  -	      IF	.CYCLES < 2
      4  084e				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  084e				  -	      ERR
      6  084e					      ENDIF
      7  084e
      8  084e					      IF	.CYCLES & 1
      9  084e					      IFNCONST	NO_ILLEGAL_OPCODES
     10  084e		       04 00		      nop	0
     11  0850				  -	      ELSE
     12  0850				  -	      bit	VSYNC
     13  0850					      ENDIF
     14  0850				   .CYCLES    SET	.CYCLES - 3
     15  0850					      ENDIF
     16  0850
     17  0850				  -	      REPEAT	.CYCLES / 2
     18  0850				  -	      nop
     19  0850					      REPEND
    127  0850		       85 46		      sta	COLUP0	; 3 = 10    @08
    128  0852
    129  0852		       f0 53	   Colour_C_Actual =	* + 1
    130  0852				   SELFMOD_BLUE
    131  0852		       a9 00		      lda	#0	; 2
    132  0854		       85 48		      sta	COLUPF	; 3 =	5    @13
    133  0856
    134  0856				   SELFMOD_PLAYER0_BLUE
    135  0856		       b9 4d f3 	      lda	ShapePlayerBLUE,y	; 4
    136  0859		       85 5b		      sta	GRP0	; 3 =	7    @20
    137  085b
    138  085b		       b9 24 f2 	      lda	ScreenBitmapBLUE+0*LINES_PER_CHAR,y	; 4
    139  085e		       85 4e		      sta	PF1	; 3	     @27     <=27! :-)
    140  0860		       b9 3c f2 	      lda	ScreenBitmapBLUE+1*LINES_PER_CHAR,y	; 4
    141  0863		       85 4f		      sta	PF2	; 3 = 14    @34
    142  0865
    143  0865		       b9 35 f3    SM_PF0_BLUEr lda	CHARACTERSHAPE_BLANK,y	; 4
    144  0868		       85 4d		      sta	PF0	; 3	     @41
    145  086a		       b9 54 f2 	      lda	ScreenBitmapBLUE+2*LINES_PER_CHAR,y	; 4
    146  086d		       85 4e		      sta	PF1	; 3	     @48
    147  086f		       b9 6c f2 	      lda	ScreenBitmapBLUE+3*LINES_PER_CHAR,y	; 4
    148  0872		       85 4f		      sta	PF2	; 3 = 21    @55
    149  0874
    150  0874				   SELFMOD_PLAYER1_BLUE
    151  0874		       b9 4d f3 	      lda	ShapePlayerBLUE,y	; 4
    152  0877							;sta GRP1				      ; 3 =  7	  VDELed! @62
      0  0877					      SLEEP	3
      1  0877				   .CYCLES    SET	3
      2  0877
      3  0877				  -	      IF	.CYCLES < 2
      4  0877				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0877				  -	      ERR
      6  0877					      ENDIF
      7  0877
      8  0877					      IF	.CYCLES & 1
      9  0877					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0877		       04 00		      nop	0
     11  0879				  -	      ELSE
     12  0879				  -	      bit	VSYNC
     13  0879					      ENDIF
     14  0879				   .CYCLES    SET	.CYCLES - 3
     15  0879					      ENDIF
     16  0879
     17  0879				  -	      REPEAT	.CYCLES / 2
     18  0879				  -	      nop
     19  0879					      REPEND
    154  0879
    155  0879							;------------------------------------------------------------------------------
    156  0879
    157  0879				   ScanGREEN		;	     @62
    158  0879		       b9 35 f3    SM_PF0_GREENl lda	CHARACTERSHAPE_BLANK,y	; 4
    159  087c		       85 4d		      sta	PF0	; 3 =	7    @69
    160  087e							;SELFMOD_PLAYERCOL_GREEN
    161  087e		       b9 6d f3 	      lda	PLAYER0_COLOUR+LINES_PER_CHAR/3,y	; 4
    162  0881							;lda #$66
    163  0881							;nop
    164  0881							;sta COLUP1				      ; 3	  @00
      0  0881					      SLEEP	3
      1  0881				   .CYCLES    SET	3
      2  0881
      3  0881				  -	      IF	.CYCLES < 2
      4  0881				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  0881				  -	      ERR
      6  0881					      ENDIF
      7  0881
      8  0881					      IF	.CYCLES & 1
      9  0881					      IFNCONST	NO_ILLEGAL_OPCODES
     10  0881		       04 00		      nop	0
     11  0883				  -	      ELSE
     12  0883				  -	      bit	VSYNC
     13  0883					      ENDIF
     14  0883				   .CYCLES    SET	.CYCLES - 3
     15  0883					      ENDIF
     16  0883
     17  0883				  -	      REPEAT	.CYCLES / 2
     18  0883				  -	      nop
     19  0883					      REPEND
    166  0883		       85 46		      sta	COLUP0	; 3 = 10    @03
    167  0885
    168  0885		       f0 86	   Colour_B_Actual =	* + 1
    169  0885				   SELFMOD_GREEN
    170  0885		       a9 00		      lda	#0	; 2
    171  0887		       85 48		      sta	COLUPF	; 3 =	5    @08
    172  0889
    173  0889				   SELFMOD_PLAYER0_GREEN
    174  0889		       b9 4d f3 	      lda	ShapePlayerGREEN,y	; 4
    175  088c		       85 5b		      sta	GRP0	; 3 =	7    @15
    176  088e
    177  088e		       b9 1c f2 	      lda	ScreenBitmapGREEN+0*LINES_PER_CHAR,y	; 4
    178  0891		       85 4e		      sta	PF1	; 3	     @22
    179  0893		       b9 34 f2 	      lda	ScreenBitmapGREEN+1*LINES_PER_CHAR,y	; 4
    180  0896		       85 4f		      sta	PF2	; 3 = 14    @29
    181  0898
    182  0898		       b9 35 f3    SM_PF0_GREENr lda	CHARACTERSHAPE_BLANK,y	; 4
    183  089b		       85 4d		      sta	PF0	; 3	     @36
    184  089d		       b9 4c f2 	      lda	ScreenBitmapGREEN+2*LINES_PER_CHAR,y	; 4
    185  08a0		       85 4e		      sta	PF1	; 3	     @43
    186  08a2		       b9 64 f2 	      lda	ScreenBitmapGREEN+3*LINES_PER_CHAR,y	; 4
    187  08a5		       85 4f		      sta	PF2	; 3 = 21    @50
    188  08a7
    189  08a7				   SELFMOD_PLAYER1_GREEN
    190  08a7		       b9 4d f3 	      lda	ShapePlayerGREEN,y	; 4
    191  08aa							;sta GRP1				      ; 3 =  7	  @57	  VDELed!
      0  08aa					      SLEEP	3
      1  08aa				   .CYCLES    SET	3
      2  08aa
      3  08aa				  -	      IF	.CYCLES < 2
      4  08aa				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  08aa				  -	      ERR
      6  08aa					      ENDIF
      7  08aa
      8  08aa					      IF	.CYCLES & 1
      9  08aa					      IFNCONST	NO_ILLEGAL_OPCODES
     10  08aa		       04 00		      nop	0
     11  08ac				  -	      ELSE
     12  08ac				  -	      bit	VSYNC
     13  08ac					      ENDIF
     14  08ac				   .CYCLES    SET	.CYCLES - 3
     15  08ac					      ENDIF
     16  08ac
     17  08ac				  -	      REPEAT	.CYCLES / 2
     18  08ac				  -	      nop
     19  08ac					      REPEND
    193  08ac
    194  08ac		       4c 0b f0 	      jmp	ScanRED	; 3	     @60
    195  08af
    196  08af							;------------------------------------------------------------------------------
    197  08af
    198  08af							;------------------------------------------------------------------------------
    199  08af
    200  08af							;*** Ideas: ***
    201  08af							; - separate data for left and right nibble (saves 88 cycles, 63 cycles or
    202  08af							;   13.5% on average), also unrolling would be more effective than now
    203  08af							; - use CharacterDataVecHI for mirrored/unmirrored (saves cycles and bytes,
    204  08af							;   see EXPERIMENTAL)
    205  08af							; - special QuickDraw routine for PF0 (~165 cycles, but only ~2% usage)
    206  08af							; - stack AI (reordering for less setup code and cycle usage, maybe better use
    207  08af							;   bidirectional linked list instead)
    208  08af							; - calculate mirrored gfx data into RAM (saves ROM)
    209  08af
    210  08af							;*** average cycle calculation (10% blanks, all columns equally frequent): ***
    211  08af							;currently:
    212  08af							; 72%*539 (!unrolled)
    213  08af							;+ 8%*304 (unrolled)
    214  08af							;+20%*269 (unrolled)
    215  08af							;--------
    216  08af							;=   ~466.2 cycles on average
    217  08af
    218  08af							;alternative #1:
    219  08af							; 72%*522 (unrolled)
    220  08af							;+ 8%*352 (!unrolled)
    221  08af							;+20%*307 (!unrolled)
    222  08af							;--------
    223  08af							;=   ~465.4 cycles on average
    224  08af
    225  08af
    226  08af		       00 01	   MIRROR     =	1
    227  08af		       00 80	   DIRECT     =	$80
    228  08af
    229  08af							;------------------------------------------------------------------------------
    230  08af							; Here we don't draw into a buffer, but directly patch the kernel
    231  08af							; VERY fast!
    232  08af							;
    233  08af							; TODO: check if DirectDraw for PF1/2 can be handle efficiently like this too
    234  08af							; Problem: SlowDraw cannot assume that the other nibble is set correctly anymore
    235  08af
    236  08af				   PF0Draw		; 25✅ cycles until here
    237  08af
    238  08af		       ae 84 02 	      ldx	INTIM	; 4
    239  08b2		       e0 04		      cpx	#SEGTIME_SCD_PF0	; 2
    240  08b4		       90 72		      bcc	ExitDraw	; 2(3)=8✅
    241  08b6
    242  08b6		       29 7f		      and	#<(~DIRECT)	; 2
    243  08b8		       aa		      tax		; 2 =	4✅
    244  08b9
    245  08b9		       98		      tya		; 2
    246  08ba		       0a		      asl		; 2	     no mirrored chars in PF0
    247  08bb		       a8		      tay		; 2 =	6✅
    248  08bc							;		  clc				  ; 2
    249  08bc
    250  08bc		       b9 15 f3 	      lda	CharacterDataVecHI,y	; 4
    251  08bf		       9d 0d f4 	      sta	SM_PF0_REDl +RAM_WRITE+2,x	; 5
    252  08c2		       9d 7b f4 	      sta	SM_PF0_GREENl+RAM_WRITE+2,x	; 5
    253  08c5		       9d 48 f4 	      sta	SM_PF0_BLUEl +RAM_WRITE+2,x	; 5 = 19✅
    254  08c8
    255  08c8		       b9 b5 f2 	      lda	CharacterDataVecLO,y	; 4
    256  08cb		       9d 0c f4 	      sta	SM_PF0_REDl +RAM_WRITE+1,x	; 5
    257  08ce		       69 07		      adc	#LINES_PER_CHAR/3-1	; 2	     CF is set!
    258  08d0		       9d 7a f4 	      sta	SM_PF0_GREENl+RAM_WRITE+1,x	; 5
    259  08d3		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    260  08d5		       9d 47 f4 	      sta	SM_PF0_BLUEl +RAM_WRITE+1,x	; 5 = 23✅
    261  08d8
    262  08d8		       4c cb fa 	      jmp	DrawAnother	; 3 =	[25]+8+4+6+19+24+3 = 88✅ entering DrawAnother
    263  08db
    264  08db							; Timing for PF0Draw
    265  08db							; 88
    266  08db							; total: 37+70+6 = 113 => 113/64 + 1.4 = 3.17 = 4 (or 3?)
    267  08db
    268  08db
    269  08db							;------------------------------------------------------------------------------
    270  08db							; Direct draw draws to PF0, which only has one active member of the character
    271  08db							; pair -- so it can be a direct copy.	Quicker still!
    272  08db
    273  08db				   DirectDraw		; 37✅ cycles until here
    274  08db
    275  08db		       ad 84 02 	      lda	INTIM	; 4
    276  08de		       c9 08		      cmp	#SEGTIME_SCD_DIRECT	; 2
    277  08e0		       90 46		      bcc	ExitDraw	; 2(3)=8
    278  08e2							; => [37]+(9)+6rts = 51 cycles if draw exits
    279  08e2
    280  08e2							; @ [37]+8 =45✅
    281  08e2
    282  08e2		       b9 15 f3 	      lda	CharacterDataVecHI,y	; 4
    283  08e5		       8d 12 f5 	      sta	SM3LOAD+RAM_WRITE+2	; 4
    284  08e8		       8d 18 f5 	      sta	SM3LOADb+RAM_WRITE+2	; 4
    285  08eb		       8d 1e f5 	      sta	SM3LOADc+RAM_WRITE+2	; 4 = 16
    286  08ee
    287  08ee		       b9 b5 f2 	      lda	CharacterDataVecLO,y	; 4
    288  08f1		       8d 11 f5 	      sta	SM3LOAD+RAM_WRITE+1	; 4
    289  08f4		       69 07		      adc	#LINES_PER_CHAR/3 - 1	; 2	     CF is set!
    290  08f6		       8d 17 f5 	      sta	SM3LOADb+RAM_WRITE+1	; 4
    291  08f9		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    292  08fb		       8d 1d f5 	      sta	SM3LOADc+RAM_WRITE+1	; 4 = 20
    293  08fe
    294  08fe		       bd b2 f1 	      lda	CharAddressLO,x	; 4	     ScreenBitmap(COL) LO byte
    295  0901		       8d 14 f5 	      sta	SM3STORE+RAM_WRITE+1	; 4
    296  0904		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    297  0906		       8d 1a f5 	      sta	SM3STOREb+RAM_WRITE+1	; 4
    298  0909		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    299  090b		       8d 20 f5 	      sta	SM3STOREc+RAM_WRITE+1	; 4 = 20
    300  090e
    301  090e		       a0 07		      ldy	#LINES_PER_CHAR/3 - 1	; 2 =	2
    302  0910
    303  0910							; @45+16+20+20+2 = @103
    304  0910				   TSFill3		; 8*{...
    305  0910		       b9 00 f0    SM3LOAD    lda	$F000,y	; 4+
    306  0913		       99 14 f6    SM3STORE   sta	ScreenBitmap+RAM_WRITE,y	; 5
    307  0916		       b9 00 f0    SM3LOADb   lda	$F000,y	; 4+
    308  0919		       99 14 f6    SM3STOREb  sta	ScreenBitmap+RAM_WRITE,y	; 5
    309  091c		       b9 00 f0    SM3LOADc   lda	$F000,y	; 4+
    310  091f		       99 14 f6    SM3STOREc  sta	ScreenBitmap+RAM_WRITE,y	; 5 = 27
    311  0922
    312  0922		       88		      dey		; 2
      0  0923					      CHECKPAGE_BPL	TSFill3	; 3(2)=5 ...32✅} = 8*32-1 = 255
      8  0923					      LIST	ON
      9  0923		       10 eb		      bpl	TSFill3
    314  0925
    315  0925		       4c cb fa 	      jmp	DrawAnother	; 3
    316  0928							; => @103+255+3 = 361✅ entering DrawAnother
    317  0928
    318  0928		       60	   ExitDraw   rts		; 6
    319  0929
    320  0929							;------------------------------------------------------------------------------
    321  0929
      0  0929					      DEFINE_SUBROUTINE	StealPart3	; [18]✅ CYCLES TO HERE
      1  0929		       00 01	   BANK_StealPart3 =	_CURRENT_BANK
      2  0929					      SUBROUTINE
      3  0929				   StealPart3
    323  0929
    324  0929		       bd c4 f1 	      lda	MOD10,x	; 4
    325  092c		       30 81		      bmi	PF0Draw	; 2/3 --> 25 cycles entering PF0Draw
    326  092e
    327  092e		       4a		      lsr		; 2
    328  092f		       aa		      tax		; 2
    329  0930		       98		      tya		; 2
    330  0931		       2a		      rol		; 2	       allows for mirrored char = * | 1
    331  0932		       a8		      tay		; 2
    332  0933		       b0 a6		      bcs	DirectDraw	; 2(3) = 18✅ when draw stack was built, bit 7 flags direct-drawn character
    333  0935							; ==> [18]+{19) = 37 @ start of DirectDraw
    334  0935
    335  0935		       b9 15 f3 	      lda	CharacterDataVecHI,y	; 4
    336  0938		       10 38		      bpl	QuickDraw	; 2(3) = 6(7)	 special-case blank characters for extra speed
    337  093a							; => [18]+18+(7) = 43✅ starting QuickDraw
    338  093a							; +15 => 58✅ if QuickDraw exits
    339  093a
    340  093a							; @ 24
    341  093a
    342  093a		       8d 63 f5 	      sta	SMEOR1+RAM_WRITE+2	; 4
    343  093d
    344  093d		       ad 84 02 	      lda	INTIM	; 4
    345  0940		       c9 0d		      cmp	#SEGTIME_SCD_SLOW	; 2
    346  0942		       90 e4		      bcc	ExitDraw	; 2(3) = 8
    347  0944							; => [18]+55+6rts=79✅ cycles if we decline
    348  0944
    349  0944							; @36
    350  0944							; [18]+36 = @54
    351  0944
    352  0944		       b9 b5 f2 	      lda	CharacterDataVecLO,y	; 4
    353  0947		       8d 62 f5 	      sta	SMEOR1+RAM_WRITE+1	; 4 =	8
    354  094a
    355  094a		       bd b2 f1 	      lda	CharAddressLO,x	; 4	     ScreenBitmap(COL) LO byte
    356  094d		       8d 5f f5 	      sta	SMLOAD+RAM_WRITE+1	; 4
    357  0950		       8d 67 f5 	      sta	SMEOR2+RAM_WRITE+1	; 4
    358  0953		       8d 6a f5 	      sta	SMSTORE+RAM_WRITE+1	; 4 = 16
    359  0956
    360  0956		       bd bc f1 	      lda	CharMaskNeg,x	; 4	     masks out left or right
    361  0959		       8d 65 f5 	      sta	SMMASK+RAM_WRITE+1	; 4 =	8
    362  095c
    363  095c		       a0 17	   SlowDraw   ldy	#LINES_PER_CHAR - 1	; 2 =	2 => @88+
    364  095e
    365  095e							; A very nice bit of Thomas Jentzsch replacement magic giving 77 cycle savings.
    366  095e							; Rewrite for self-modification by Andrew Davie giving another 90 cycles :)
    367  095e
    368  095e				   TSFill		; 24*{...✅
    369  095e
    370  095e		       b9 14 f2    SMLOAD     lda	ScreenBitmap,y	; 4
    371  0961		       59 00 f0    SMEOR1     eor	$F000,y	; 4
    372  0964		       29 00	   SMMASK     and	#0	; 2
    373  0966		       59 14 f2    SMEOR2     eor	ScreenBitmap,y	; 4	     using ScreenBitmap here avoids setting high-pointer
    374  0969		       99 14 f6    SMSTORE    sta	ScreenBitmap+RAM_WRITE,y	; 5 = 19
    375  096c
    376  096c		       88		      dey		; 2
      0  096d					      CHECKPAGE_BPL	TSFill	; 3(2)=5  ...24}-1 = 575✅
      8  096d					      LIST	ON
      9  096d		       10 ef		      bpl	TSFill
    378  096f
    379  096f		       4c cb fa 	      jmp	DrawAnother	; 3 = @88+575+3 = @676✅
    380  0972
    381  0972
    382  0972							;------------------------------------------------------------------------------
    383  0972							; QuickDraw is for drawing BLANK characters.  It just has to mask out the
    384  0972							; existing character data, so can be special-cased from the normal character
    385  0972							; draw, saving roughly 230 cycles.
    386  0972
    387  0972				   QuickDraw		; [43]✅ cycles until here
    388  0972
    389  0972		       ad 84 02 	      lda	INTIM	; 4
    390  0975		       c9 08		      cmp	#SEGTIME_SCD_QUICK	; 2
    391  0977		       90 af		      bcc	ExitDraw	; 2(3)=8(9)
    392  0979							; =>[43]+(9)+6rts =58✅ if exit
    393  0979							;@[43]+8=51✅
    394  0979
    395  0979		       bd b2 f1 	      lda	CharAddressLO,x	; 4	     ScreenBitmap(COL) LO byte
    396  097c		       8d 99 f5 	      sta	SM2LOAD+RAM_WRITE+1	; 4
    397  097f		       8d 9c f5 	      sta	SM2STORE+RAM_WRITE+1	; 4
    398  0982		       69 07		      adc	#LINES_PER_CHAR/3 - 1	; 2	     CF is set!
    399  0984		       8d a0 f5 	      sta	SM2LOADb+RAM_WRITE+1	; 4
    400  0987		       8d a3 f5 	      sta	SM2STOREb+RAM_WRITE+1	; 4
    401  098a		       69 08		      adc	#LINES_PER_CHAR/3	; 2
    402  098c		       8d a7 f5 	      sta	SM2LOADc+RAM_WRITE+1	; 4
    403  098f		       8d aa f5 	      sta	SM2STOREc+RAM_WRITE+1	; 4 = 32✅
    404  0992
    405  0992		       bc ba f1 	      ldy	CharMask,x	; 4	     masks out left or right
    406  0995
    407  0995		       a2 07		      ldx	#LINES_PER_CHAR/3 - 1	; 2	     =32+4+2+8*{...✅
    408  0997				   TSFill2
    409  0997		       98		      tya		; 2
    410  0998		       3d 14 f2    SM2LOAD    and	ScreenBitmap,x	; 4+
    411  099b		       9d 14 f6    SM2STORE   sta	ScreenBitmap+RAM_WRITE,x	; 5
    412  099e		       98		      tya		; 2
    413  099f		       3d 14 f2    SM2LOADb   and	ScreenBitmap,x	; 4+
    414  09a2		       9d 14 f6    SM2STOREb  sta	ScreenBitmap+RAM_WRITE,x	; 5
    415  09a5		       98		      tya		; 2
    416  09a6		       3d 14 f2    SM2LOADc   and	ScreenBitmap,x	; 4+
    417  09a9		       9d 14 f6    SM2STOREc  sta	ScreenBitmap+RAM_WRITE,x	; 5 = 33✅
    418  09ac
    419  09ac		       ca		      dex		; 2
      0  09ad					      CHECKPAGE_BPL	TSFill2	; 3(2) = 5  ...} = 32+4+2+8*38-1
      8  09ad					      LIST	ON
      9  09ad		       10 e8		      bpl	TSFill2
    421  09af							;		  => 341✅
    422  09af
    423  09af		       4c cb fa 	      jmp	DrawAnother	; 3 = 344
    424  09b2
    425  09b2							;------------------------------------------------------------------------------
    426  09b2
      0  09b2					      DEFINE_SUBROUTINE	CharAddressLO	;[abs char location % 10]
      1  09b2		       00 01	   BANK_CharAddressLO =	_CURRENT_BANK
      2  09b2					      SUBROUTINE
      3  09b2				   CharAddressLO
    428  09b2
    429  09b2							; Gives the absolute screen buffer address of the first line of the given character
    430  09b2							; Where character number is 0-9
    431  09b2
    432  09b2		       14		      .byte.b	< ( ScreenBitmap + ( 0 * LINES_PER_CHAR ))	; 1
    433  09b3		       14		      .byte.b	< ( ScreenBitmap + ( 0 * LINES_PER_CHAR ))	; 2
    434  09b4		       2c		      .byte.b	< ( ScreenBitmap + ( 1 * LINES_PER_CHAR ))	; 3
    435  09b5		       2c		      .byte.b	< ( ScreenBitmap + ( 1 * LINES_PER_CHAR ))	; 4
    436  09b6		       44		      .byte.b	< ( ScreenBitmap + ( 2 * LINES_PER_CHAR ))	; 6
    437  09b7		       44		      .byte.b	< ( ScreenBitmap + ( 2 * LINES_PER_CHAR ))	; 7
    438  09b8		       5c		      .byte.b	< ( ScreenBitmap + ( 3 * LINES_PER_CHAR ))	; 8
    439  09b9		       5c		      .byte.b	< ( ScreenBitmap + ( 3 * LINES_PER_CHAR ))	; 9
    440  09ba
      0  09ba					      CHECKPAGEX	CharAddressLO, "CharAddressLO crosses page"
      9  09ba					      LIST	ON
    442  09ba
      0  09ba					      DEFINE_SUBROUTINE	CharMask	; [abs char location % 10]
      1  09ba		       00 01	   BANK_CharMask =	_CURRENT_BANK
      2  09ba					      SUBROUTINE
      3  09ba				   CharMask
    444  09ba
    445  09ba							; Gives the mask for any char of the screen (per row)
    446  09ba							; Note, this is hardwired to the screen format of 6 bytes/line
    447  09ba
    448  09ba		       0f		      .byte.b	$0F	; 1
    449  09bb		       f0		      .byte.b	$F0	; 2
    450  09bc				   CharMaskNeg
    451  09bc		       f0		      .byte.b	$F0	; 3/1
    452  09bd		       0f		      .byte.b	$0F	; 4/2
    453  09be		       0f		      .byte.b	$0F	; 6/3
    454  09bf		       f0		      .byte.b	$F0	; 7/4
    455  09c0		       f0		      .byte.b	$F0	; 8/6
    456  09c1		       0f		      .byte.b	$0F	; 9/7
    457  09c2		       0f		      .byte.b	$0F	; -/8
    458  09c3		       f0		      .byte.b	$F0	; -/9
    459  09c4
      0  09c4					      CHECKPAGEX	CharMask, "CharMask crosses page"
      9  09c4					      LIST	ON
    461  09c4
      0  09c4					      DEFINE_SUBROUTINE	MOD10
      1  09c4		       00 01	   BANK_MOD10 =	_CURRENT_BANK
      2  09c4					      SUBROUTINE
      3  09c4				   MOD10
    463  09c4
    464  09c4				   MOD10
    465  09c4					      REPEAT	SCREEN_LINES
    466  09c4							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  09c4							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  09c4		       80		      .byte.b	DIRECT
    469  09c5		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  09c9		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  09ca		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  09ca					      REPEND
    466  09ce							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  09ce							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  09ce		       80		      .byte.b	DIRECT
    469  09cf		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  09d3		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  09d4		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  09d4					      REPEND
    466  09d8							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  09d8							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  09d8		       80		      .byte.b	DIRECT
    469  09d9		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  09dd		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  09de		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  09de					      REPEND
    466  09e2							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  09e2							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  09e2		       80		      .byte.b	DIRECT
    469  09e3		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  09e7		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  09e8		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  09e8					      REPEND
    466  09ec							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  09ec							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  09ec		       80		      .byte.b	DIRECT
    469  09ed		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  09f1		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  09f2		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  09f2					      REPEND
    466  09f6							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  09f6							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  09f6		       80		      .byte.b	DIRECT
    469  09f7		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  09fb		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  09fc		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  09fc					      REPEND
    466  0a00							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  0a00							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  0a00		       80		      .byte.b	DIRECT
    469  0a01		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  0a05		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  0a06		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    465  0a06					      REPEND
    466  0a0a							;	  .byte (8*2), MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    467  0a0a							;	  .byte (9*2), MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    468  0a0a		       80		      .byte.b	DIRECT
    469  0a0b		       01 03 04 06	      .byte.b	MIRROR+0*2, MIRROR+1*2, 2*2, 3*2
    470  0a0f		       9f		      .byte.b	DIRECT+SM_PF0_BLUEr-SM_PF0_BLUEl	; works only if distances between PF= writes are identical!
    471  0a10		       09 0b 0c 0e	      .byte.b	MIRROR+4*2, MIRROR+5*2, 6*2, 7*2
    472  0a14					      REPEND
    473  0a14
    474  0a14							;CHECKPAGEX MOD10, "MOD10 crosses page"
    475  0a14
    476  0a14							;------------------------------------------------------------------------------
    477  0a14
      0  0a14					      OPTIONAL_PAGEBREAK	"SCREEN_BITMAP", SCREEN_BITMAP_SIZE
     10  0a14					      LIST	ON
    479  0a14
    480  0a14		       00 00 00 00*ScreenBitmap ds	SCREEN_BITMAP_SIZE,0	; character bitmap row (10 chars wide)
    481  0a14		       f2 14	   ScreenBitmapRED =	ScreenBitmap + LINES_PER_CHAR/3*0
    482  0a14		       f2 1c	   ScreenBitmapGREEN =	ScreenBitmap + LINES_PER_CHAR/3*1
    483  0a14		       f2 24	   ScreenBitmapBLUE =	ScreenBitmap + LINES_PER_CHAR/3*2
    484  0a74
      0  0a74					      CHECKPAGEX	ScreenBitmap, "ScreenBitmap"
      9  0a74					      LIST	ON
    486  0a74
    487  0a74
      0  0a74					      DEFINE_SUBROUTINE	DoColours
      1  0a74		       00 01	   BANK_DoColours =	_CURRENT_BANK
      2  0a74					      SUBROUTINE
      3  0a74				   DoColours
    489  0a74
    490  0a74
    491  0a74		       a5 c8		      lda	icc_colour
    492  0a76		       8d fb f7 	      sta	Colour_A + RAM_WRITE
    493  0a79		       a5 c9		      lda	icc_colour+1
    494  0a7b		       8d fc f7 	      sta	Colour_B + RAM_WRITE
    495  0a7e		       a5 ca		      lda	icc_colour+2
    496  0a80		       8d fd f7 	      sta	Colour_C + RAM_WRITE
    497  0a83
    498  0a83		       60		      rts
    499  0a84
    500  0a84							;--------------------------------------------------------------------------
    501  0a84
      0  0a84					      DEFINE_SUBROUTINE	SelfModDrawPlayers	; copied to ROW RAM BANKS
      1  0a84		       00 01	   BANK_SelfModDrawPlayers =	_CURRENT_BANK
      2  0a84					      SUBROUTINE
      3  0a84				   SelfModDrawPlayers
    503  0a84
    504  0a84							; Update the appropriate shape pointers in the draw code.
    505  0a84							; First, set the shape to a blank player -- effectively erasing
    506  0a84
    507  0a84		       a6 af		      ldx	LastSpriteY
    508  0a86		       30 15		      bmi	erased	; offscreen
    509  0a88		       e4 a0		      cpx	ManDrawY
    510  0a8a		       f0 28		      beq	NoMod	; same line, so all should be OK already
    511  0a8c
    512  0a8c		       86 3e		      stx	SET_BANK_RAM	; switch old bank in (this code too!!!!)
    513  0a8e
    514  0a8e		       a9 35		      lda	#<PLAYER_BLANK	; "erase"
    515  0a90		       8d 21 f4 	      sta	SELFMOD_PLAYER0_RED+RAM_WRITE+1
    516  0a93		       a9 3d		      lda	#<PLAYER_BLANK + LINES_PER_CHAR/3
    517  0a95		       8d 8a f4 	      sta	SELFMOD_PLAYER0_GREEN+RAM_WRITE+1
    518  0a98		       a9 45		      lda	#<PLAYER_BLANK + 2*LINES_PER_CHAR/3
    519  0a9a		       8d 57 f4 	      sta	SELFMOD_PLAYER0_BLUE+RAM_WRITE+1
    520  0a9d
    521  0a9d							; Now we've erased, we write the new shape
    522  0a9d
    523  0a9d		       a6 a0	   erased     ldx	ManDrawY
    524  0a9f		       86 af		      stx	LastSpriteY
    525  0aa1		       30 11		      bmi	NoMod
    526  0aa3
    527  0aa3		       86 3e		      stx	SET_BANK_RAM	; switch new bank in (this code too!!!!)
    528  0aa5
    529  0aa5		       a9 4d		      lda	#<PLAYER0_SHAPE	; draw buffer holding the new frame shape
    530  0aa7		       8d 21 f4 	      sta	SELFMOD_PLAYER0_RED+RAM_WRITE+1
    531  0aaa		       a9 55		      lda	#<PLAYER0_SHAPE + LINES_PER_CHAR/3
    532  0aac		       8d 8a f4 	      sta	SELFMOD_PLAYER0_GREEN+RAM_WRITE+1
    533  0aaf		       a9 5d		      lda	#<PLAYER0_SHAPE + 2*LINES_PER_CHAR/3
    534  0ab1		       8d 57 f4 	      sta	SELFMOD_PLAYER0_BLUE+RAM_WRITE+1
    535  0ab4
    536  0ab4		       60	   NoMod      rts
    537  0ab5
    538  0ab5
    539  0ab5
    540  0ab5							;------------------------------------------------------------------------------
    541  0ab5
    542  0ab5							;ECHO "TOTAL ROW-BANK CODE REQUIREMENT = ", * - BANK_START
    543  0ab5
    544  0ab5							;------------------------------------------------------------------------------
    545  0ab5
    546  0ab5
    547  0ab5
    548  0ab5
    549  0ab5				   OBJTYPE    SET	0
    550  0ab5					      MAC	define_character
    551  0ab5				   CHARACTER_{1} =	OBJTYPE
    552  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
    553  0ab5					      ENDM
    554  0ab5
    555  0ab5							; Modifications to character #/order must also ensure the following are correct...
    556  0ab5							;   CharacterDataVecLO/HI	   in this file
    557  0ab5							;   MoveVecLO/HI		   in BANK_INITBANK
    558  0ab5							;   CharReplacement		   in BANK_ROM_SHADOW_DRAWBUFFERS
    559  0ab5
      0  0ab5					      DEFINE_CHARACTER	BLANK
      1  0ab5		       00 00	   CHARACTER_BLANK =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	SOIL
      1  0ab5		       00 01	   CHARACTER_SOIL =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	BOX
      1  0ab5		       00 02	   CHARACTER_BOX =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	TARGET
      1  0ab5		       00 03	   CHARACTER_TARGET =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	TARGET2
      1  0ab5		       00 04	   CHARACTER_TARGET2 =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	MANOCCUPIED
      1  0ab5		       00 05	   CHARACTER_MANOCCUPIED =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	STEEL
      1  0ab5		       00 06	   CHARACTER_STEEL =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	RIVET
      1  0ab5		       00 07	   CHARACTER_RIVET =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	WALL
      1  0ab5		       00 08	   CHARACTER_WALL =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	STRIPE
      1  0ab5		       00 09	   CHARACTER_STRIPE =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	BOX_ON_TARGET
      1  0ab5		       00 0a	   CHARACTER_BOX_ON_TARGET =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
    571  0ab5							;DEFINE_CHARACTER BOX_ON_TARGET2
      0  0ab5					      DEFINE_CHARACTER	NOGO
      1  0ab5		       00 0b	   CHARACTER_NOGO =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	TARGET1
      1  0ab5		       00 0c	   CHARACTER_TARGET1 =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	TARGET3
      1  0ab5		       00 0d	   CHARACTER_TARGET3 =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	TARGET5
      1  0ab5		       00 0e	   CHARACTER_TARGET5 =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
      0  0ab5					      DEFINE_CHARACTER	TARGET7
      1  0ab5		       00 0f	   CHARACTER_TARGET7 =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
    577  0ab5
    578  0ab5				  -	      if	DIGITS
    579  0ab5				  -	      DEFINE_CHARACTER	0
    580  0ab5				  -	      DEFINE_CHARACTER	1
    581  0ab5				  -	      DEFINE_CHARACTER	2
    582  0ab5				  -	      DEFINE_CHARACTER	3
    583  0ab5				  -	      DEFINE_CHARACTER	4
    584  0ab5				  -	      DEFINE_CHARACTER	5
    585  0ab5				  -	      DEFINE_CHARACTER	6
    586  0ab5				  -	      DEFINE_CHARACTER	7
    587  0ab5				  -	      DEFINE_CHARACTER	8
    588  0ab5				  -	      DEFINE_CHARACTER	9
    589  0ab5					      endif
    590  0ab5
      0  0ab5					      DEFINE_CHARACTER	MAXIMUM
      1  0ab5		       00 10	   CHARACTER_MAXIMUM =	OBJTYPE
      2  0ab5				   OBJTYPE    .SET	OBJTYPE + 1
    592  0ab5
    593  0ab5
      0  0ab5					      DEFINE_SUBROUTINE	CharacterDataVecLO
      1  0ab5		       00 01	   BANK_CharacterDataVecLO =	_CURRENT_BANK
      2  0ab5					      SUBROUTINE
      3  0ab5				   CharacterDataVecLO
    595  0ab5
    596  0ab5							; Two entries per character.  2nd is ptr to mirrored character
    597  0ab5							; Characters don't have to be mirrored, obviously -- use the same pointer for both!
    598  0ab5
    599  0ab5		       35		      .byte.b	<CHARACTERSHAPE_BLANK
    600  0ab6		       35		      .byte.b	<CHARACTERSHAPE_BLANK
    601  0ab7		       48		      .byte.b	<CHARACTERSHAPE_SOIL
    602  0ab8		       48		      .byte.b	<CHARACTERSHAPE_SOIL_MIRRORED
    603  0ab9		       60		      .byte.b	<CHARACTERSHAPE_BOX
    604  0aba		       78		      .byte.b	<CHARACTERSHAPE_BOX_MIRRORED
    605  0abb		       27		      .byte.b	<CHARACTERSHAPE_TARGET1
    606  0abc		       3f		      .byte.b	<CHARACTERSHAPE_TARGET1_MIRRORED
    607  0abd		       35		      .byte.b	<CHARACTERSHAPE_BLANK
    608  0abe		       35		      .byte.b	<CHARACTERSHAPE_BLANK
    609  0abf		       35		      .byte.b	<CHARACTERSHAPE_BLANK	; man occupied
    610  0ac0		       35		      .byte.b	<CHARACTERSHAPE_BLANK
    611  0ac1		       e4		      .byte.b	<CHARACTERSHAPE_STEEL
    612  0ac2		       00		      .byte.b	<CHARACTERSHAPE_STEEL_MIRRORED
    613  0ac3		       e7		      .byte.b	<CHARACTERSHAPE_RIVET
    614  0ac4		       00		      .byte.b	<CHARACTERSHAPE_RIVET_MIRRORED
    615  0ac5		       c0		      .byte.b	<CHARACTERSHAPE_WALL
    616  0ac6		       d8		      .byte.b	<CHARACTERSHAPE_WALL_MIRRORED
    617  0ac7		       18		      .byte.b	<CHARACTERSHAPE_STRIPE
    618  0ac8		       30		      .byte.b	<CHARACTERSHAPE_STRIPE_MIRRORED
    619  0ac9		       90		      .byte.b	<CHARACTERSHAPE_BOX_ON_TARGET
    620  0aca		       a8		      .byte.b	<CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED
    621  0acb							;  .byte <CHARACTERSHAPE_BOX_ON_TARGET2
    622  0acb							;  .byte <CHARACTERSHAPE_BOX_ON_TARGET2_MIRRORED
    623  0acb		       35		      .byte.b	<CHARACTERSHAPE_BLANK	; unkillable man
    624  0acc		       35		      .byte.b	<CHARACTERSHAPE_BLANK	; unkillable man
    625  0acd		       27		      .byte.b	<CHARACTERSHAPE_TARGET1
    626  0ace		       3f		      .byte.b	<CHARACTERSHAPE_TARGET1_MIRRORED
    627  0acf		       57		      .byte.b	<CHARACTERSHAPE_TARGET3
    628  0ad0		       6f		      .byte.b	<CHARACTERSHAPE_TARGET3_MIRRORED
    629  0ad1		       87		      .byte.b	<CHARACTERSHAPE_TARGET5
    630  0ad2		       9f		      .byte.b	<CHARACTERSHAPE_TARGET5_MIRRORED
    631  0ad3		       b7		      .byte.b	<CHARACTERSHAPE_TARGET7
    632  0ad4		       cf		      .byte.b	<CHARACTERSHAPE_TARGET7_MIRRORED
    633  0ad5
    634  0ad5				  -	      if	DIGITS
    635  0ad5				  -	      .byte	<CHARACTERSHAPE_0, <CHARACTERSHAPE_0_MIRRORED
    636  0ad5				  -	      .byte	<CHARACTERSHAPE_1, <CHARACTERSHAPE_1_MIRRORED
    637  0ad5				  -	      .byte	<CHARACTERSHAPE_2, <CHARACTERSHAPE_2_MIRRORED
    638  0ad5				  -	      .byte	<CHARACTERSHAPE_3, <CHARACTERSHAPE_3_MIRRORED
    639  0ad5				  -	      .byte	<CHARACTERSHAPE_4, <CHARACTERSHAPE_4_MIRRORED
    640  0ad5				  -	      .byte	<CHARACTERSHAPE_5, <CHARACTERSHAPE_5_MIRRORED
    641  0ad5				  -	      .byte	<CHARACTERSHAPE_6, <CHARACTERSHAPE_6_MIRRORED
    642  0ad5				  -	      .byte	<CHARACTERSHAPE_7, <CHARACTERSHAPE_7_MIRRORED
    643  0ad5				  -	      .byte	<CHARACTERSHAPE_8, <CHARACTERSHAPE_8_MIRRORED
    644  0ad5				  -	      .byte	<CHARACTERSHAPE_9, <CHARACTERSHAPE_9_MIRRORED
    645  0ad5					      endif
    646  0ad5
    647  0ad5
    648  0ad5				  -	      IF	* - CharacterDataVecLO != CHARACTER_MAXIMUM*2
    649  0ad5				  -	      ECHO	"ERROR: Incorrect CharacterDataVecLO table!"
    650  0ad5				  -	      ERR
    651  0ad5					      ENDIF
    652  0ad5
      0  0ad5					      CHECKPAGEX	CharacterDataVecLO, "CharacterDataVecLO crosses page"
      9  0ad5					      LIST	ON
    654  0ad5
    655  0ad5
    656  0ad5							;------------------------------------------------------------------------------
    657  0ad5
    658  0ad5							; The acutal colour palette to use for the player. The player may be any "ethnicity" which refers
    659  0ad5							; to the colours for a frame. The skin could be asian/black/caucasian, the cloting could be anything.
    660  0ad5							; Each ethnicity is defined as first 8 bytes for NTSC and then 8 bytes for PAL. The 8 bytes refer
    661  0ad5							; to the "CL#" index values defined in the player COLOUR frames. So, an index is grabbed from the
    662  0ad5							; player frame, it is adjusted to add the base ethnicity and the NTSC/PAL, and that gives the base
    663  0ad5							; for reading 8 successive bytes for CL0..CL7 from the frame definitions.
    664  0ad5
    665  0ad5				   EthnicityColourPalette
    666  0ad5
    667  0ad5							; CL0	   = BLACK
    668  0ad5							; CL1	   = HAT
    669  0ad5							; CL2	   = SKIN
    670  0ad5							; CL3	   = CUFFS/TRIM
    671  0ad5							; CL4	   = JUMPER
    672  0ad5							; CL5	   = PANTS
    673  0ad5							; CL6	   = SHOES
    674  0ad5							; CL7	   = UNUSED
    675  0ad5
    676  0ad5							; CL7 = NOT USABLE
    677  0ad5
    678  0ad5							; (*) = unchecked/converted
    679  0ad5
    680  0ad5					      MAC	colour_group
    681  0ad5							; NTSC...
    682  0ad5					      .byte	0
    683  0ad5					      .byte	{1}+{2}-2+PALETTE_INTENSITY_ADJUST
    684  0ad5					      .byte	{3}+{4}-2+PALETTE_INTENSITY_ADJUST
    685  0ad5					      .byte	{5}+{6}-2+PALETTE_INTENSITY_ADJUST
    686  0ad5					      .byte	{7}+{8}-2+PALETTE_INTENSITY_ADJUST
    687  0ad5					      .byte	{9}+{10}-2+PALETTE_INTENSITY_ADJUST
    688  0ad5					      .byte	{11}+{12}-2+PALETTE_INTENSITY_ADJUST
    689  0ad5					      .byte	0
    690  0ad5
    691  0ad5							; PAL...
    692  0ad5					      .byte	0
    693  0ad5					      NTSC_TO_PAL	{1}, {2}-2+PALETTE_INTENSITY_ADJUST
    694  0ad5					      NTSC_TO_PAL	{3}, {4}-2+PALETTE_INTENSITY_ADJUST
    695  0ad5					      NTSC_TO_PAL	{5}, {6}-2+PALETTE_INTENSITY_ADJUST
    696  0ad5					      NTSC_TO_PAL	{7}, {8}-2+PALETTE_INTENSITY_ADJUST
    697  0ad5					      NTSC_TO_PAL	{9}, {10}-2+PALETTE_INTENSITY_ADJUST
    698  0ad5					      NTSC_TO_PAL	{11}, {12}-2+PALETTE_INTENSITY_ADJUST
    699  0ad5					      .byte	0
    700  0ad5					      ENDM
    701  0ad5
    702  0ad5							; USE NTSC COLOUR+INTENSITY. WILL AUTO-ADD PAL EQUIVALENT...
    703  0ad5							;		 HAT	 FACE	 TRIM	 JUMPER  PANTS	SHOES
      0  0ad5					      COLOUR_GROUP	$10,$A, $40,$8, $00,$A, $80,$8, $90,6, $10,6	; 0
      1  0ad5
      2  0ad5		       00		      .byte.b	0
      3  0ad6		       1a		      .byte.b	$10+$A-2+PALETTE_INTENSITY_ADJUST
      4  0ad7		       48		      .byte.b	$40+$8-2+PALETTE_INTENSITY_ADJUST
      5  0ad8		       0a		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      6  0ad9		       88		      .byte.b	$80+$8-2+PALETTE_INTENSITY_ADJUST
      7  0ada		       96		      .byte.b	$90+6-2+PALETTE_INTENSITY_ADJUST
      8  0adb		       16		      .byte.b	$10+6-2+PALETTE_INTENSITY_ADJUST
      9  0adc		       00		      .byte.b	0
     10  0add
     11  0add
     12  0add		       00		      .byte.b	0
      0  0ade					      NTSC_TO_PAL	$10, $A-2+PALETTE_INTENSITY_ADJUST
      1  0ade				  -	      IF	$10 = 0
      2  0ade				  -	      .byte	$10+$A-2+PALETTE_INTENSITY_ADJUST
      3  0ade					      ENDIF
      4  0ade					      IF	$10 = $10
      5  0ade		       2a		      .byte.b	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0adf					      ENDIF
      7  0adf				  -	      IF	$10 = $20
      8  0adf				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0adf					      ENDIF
     10  0adf				  -	      IF	$10 = $30
     11  0adf				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0adf					      ENDIF
     13  0adf				  -	      IF	$10 = $40
     14  0adf				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0adf					      ENDIF
     16  0adf				  -	      IF	$10 = $50
     17  0adf				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0adf					      ENDIF
     19  0adf				  -	      IF	$10 = $60
     20  0adf				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0adf					      ENDIF
     22  0adf				  -	      IF	$10 = $70
     23  0adf				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0adf					      ENDIF
     25  0adf				  -	      IF	$10 = $80
     26  0adf				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0adf					      ENDIF
     28  0adf				  -	      IF	$10 = $90
     29  0adf				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0adf					      ENDIF
     31  0adf				  -	      IF	$10 = $A0
     32  0adf				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0adf					      ENDIF
     34  0adf				  -	      IF	$10 = $B0
     35  0adf				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0adf					      ENDIF
     37  0adf				  -	      IF	$10 = $C0
     38  0adf				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0adf					      ENDIF
     40  0adf				  -	      IF	$10 = $D0
     41  0adf				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0adf					      ENDIF
     43  0adf				  -	      IF	$10 = $E0
     44  0adf				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0adf					      ENDIF
     46  0adf				  -	      IF	$10 = $F0
     47  0adf				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0adf					      ENDIF
      0  0adf					      NTSC_TO_PAL	$40, $8-2+PALETTE_INTENSITY_ADJUST
      1  0adf				  -	      IF	$40 = 0
      2  0adf				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      3  0adf					      ENDIF
      4  0adf				  -	      IF	$40 = $10
      5  0adf				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  0adf					      ENDIF
      7  0adf				  -	      IF	$40 = $20
      8  0adf				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  0adf					      ENDIF
     10  0adf				  -	      IF	$40 = $30
     11  0adf				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  0adf					      ENDIF
     13  0adf					      IF	$40 = $40
     14  0adf		       68		      .byte.b	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  0ae0					      ENDIF
     16  0ae0				  -	      IF	$40 = $50
     17  0ae0				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  0ae0					      ENDIF
     19  0ae0				  -	      IF	$40 = $60
     20  0ae0				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  0ae0					      ENDIF
     22  0ae0				  -	      IF	$40 = $70
     23  0ae0				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  0ae0					      ENDIF
     25  0ae0				  -	      IF	$40 = $80
     26  0ae0				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  0ae0					      ENDIF
     28  0ae0				  -	      IF	$40 = $90
     29  0ae0				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  0ae0					      ENDIF
     31  0ae0				  -	      IF	$40 = $A0
     32  0ae0				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  0ae0					      ENDIF
     34  0ae0				  -	      IF	$40 = $B0
     35  0ae0				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  0ae0					      ENDIF
     37  0ae0				  -	      IF	$40 = $C0
     38  0ae0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  0ae0					      ENDIF
     40  0ae0				  -	      IF	$40 = $D0
     41  0ae0				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  0ae0					      ENDIF
     43  0ae0				  -	      IF	$40 = $E0
     44  0ae0				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  0ae0					      ENDIF
     46  0ae0				  -	      IF	$40 = $F0
     47  0ae0				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  0ae0					      ENDIF
      0  0ae0					      NTSC_TO_PAL	$00, $A-2+PALETTE_INTENSITY_ADJUST
      1  0ae0					      IF	$00 = 0
      2  0ae0		       0a		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      3  0ae1					      ENDIF
      4  0ae1				  -	      IF	$00 = $10
      5  0ae1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0ae1					      ENDIF
      7  0ae1				  -	      IF	$00 = $20
      8  0ae1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0ae1					      ENDIF
     10  0ae1				  -	      IF	$00 = $30
     11  0ae1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0ae1					      ENDIF
     13  0ae1				  -	      IF	$00 = $40
     14  0ae1				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0ae1					      ENDIF
     16  0ae1				  -	      IF	$00 = $50
     17  0ae1				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0ae1					      ENDIF
     19  0ae1				  -	      IF	$00 = $60
     20  0ae1				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0ae1					      ENDIF
     22  0ae1				  -	      IF	$00 = $70
     23  0ae1				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0ae1					      ENDIF
     25  0ae1				  -	      IF	$00 = $80
     26  0ae1				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0ae1					      ENDIF
     28  0ae1				  -	      IF	$00 = $90
     29  0ae1				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0ae1					      ENDIF
     31  0ae1				  -	      IF	$00 = $A0
     32  0ae1				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0ae1					      ENDIF
     34  0ae1				  -	      IF	$00 = $B0
     35  0ae1				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0ae1					      ENDIF
     37  0ae1				  -	      IF	$00 = $C0
     38  0ae1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0ae1					      ENDIF
     40  0ae1				  -	      IF	$00 = $D0
     41  0ae1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0ae1					      ENDIF
     43  0ae1				  -	      IF	$00 = $E0
     44  0ae1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0ae1					      ENDIF
     46  0ae1				  -	      IF	$00 = $F0
     47  0ae1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0ae1					      ENDIF
      0  0ae1					      NTSC_TO_PAL	$80, $8-2+PALETTE_INTENSITY_ADJUST
      1  0ae1				  -	      IF	$80 = 0
      2  0ae1				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
      3  0ae1					      ENDIF
      4  0ae1				  -	      IF	$80 = $10
      5  0ae1				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  0ae1					      ENDIF
      7  0ae1				  -	      IF	$80 = $20
      8  0ae1				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  0ae1					      ENDIF
     10  0ae1				  -	      IF	$80 = $30
     11  0ae1				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  0ae1					      ENDIF
     13  0ae1				  -	      IF	$80 = $40
     14  0ae1				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  0ae1					      ENDIF
     16  0ae1				  -	      IF	$80 = $50
     17  0ae1				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  0ae1					      ENDIF
     19  0ae1				  -	      IF	$80 = $60
     20  0ae1				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  0ae1					      ENDIF
     22  0ae1				  -	      IF	$80 = $70
     23  0ae1				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  0ae1					      ENDIF
     25  0ae1					      IF	$80 = $80
     26  0ae1		       b8		      .byte.b	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  0ae2					      ENDIF
     28  0ae2				  -	      IF	$80 = $90
     29  0ae2				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  0ae2					      ENDIF
     31  0ae2				  -	      IF	$80 = $A0
     32  0ae2				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  0ae2					      ENDIF
     34  0ae2				  -	      IF	$80 = $B0
     35  0ae2				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  0ae2					      ENDIF
     37  0ae2				  -	      IF	$80 = $C0
     38  0ae2				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  0ae2					      ENDIF
     40  0ae2				  -	      IF	$80 = $D0
     41  0ae2				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  0ae2					      ENDIF
     43  0ae2				  -	      IF	$80 = $E0
     44  0ae2				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  0ae2					      ENDIF
     46  0ae2				  -	      IF	$80 = $F0
     47  0ae2				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  0ae2					      ENDIF
      0  0ae2					      NTSC_TO_PAL	$90, 6-2+PALETTE_INTENSITY_ADJUST
      1  0ae2				  -	      IF	$90 = 0
      2  0ae2				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
      3  0ae2					      ENDIF
      4  0ae2				  -	      IF	$90 = $10
      5  0ae2				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0ae2					      ENDIF
      7  0ae2				  -	      IF	$90 = $20
      8  0ae2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0ae2					      ENDIF
     10  0ae2				  -	      IF	$90 = $30
     11  0ae2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0ae2					      ENDIF
     13  0ae2				  -	      IF	$90 = $40
     14  0ae2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0ae2					      ENDIF
     16  0ae2				  -	      IF	$90 = $50
     17  0ae2				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0ae2					      ENDIF
     19  0ae2				  -	      IF	$90 = $60
     20  0ae2				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0ae2					      ENDIF
     22  0ae2				  -	      IF	$90 = $70
     23  0ae2				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0ae2					      ENDIF
     25  0ae2				  -	      IF	$90 = $80
     26  0ae2				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0ae2					      ENDIF
     28  0ae2					      IF	$90 = $90
     29  0ae2		       96		      .byte.b	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0ae3					      ENDIF
     31  0ae3				  -	      IF	$90 = $A0
     32  0ae3				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0ae3					      ENDIF
     34  0ae3				  -	      IF	$90 = $B0
     35  0ae3				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0ae3					      ENDIF
     37  0ae3				  -	      IF	$90 = $C0
     38  0ae3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0ae3					      ENDIF
     40  0ae3				  -	      IF	$90 = $D0
     41  0ae3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0ae3					      ENDIF
     43  0ae3				  -	      IF	$90 = $E0
     44  0ae3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0ae3					      ENDIF
     46  0ae3				  -	      IF	$90 = $F0
     47  0ae3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0ae3					      ENDIF
      0  0ae3					      NTSC_TO_PAL	$10, 6-2+PALETTE_INTENSITY_ADJUST
      1  0ae3				  -	      IF	$10 = 0
      2  0ae3				  -	      .byte	$10+6-2+PALETTE_INTENSITY_ADJUST
      3  0ae3					      ENDIF
      4  0ae3					      IF	$10 = $10
      5  0ae3		       26		      .byte.b	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0ae4					      ENDIF
      7  0ae4				  -	      IF	$10 = $20
      8  0ae4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0ae4					      ENDIF
     10  0ae4				  -	      IF	$10 = $30
     11  0ae4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0ae4					      ENDIF
     13  0ae4				  -	      IF	$10 = $40
     14  0ae4				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0ae4					      ENDIF
     16  0ae4				  -	      IF	$10 = $50
     17  0ae4				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0ae4					      ENDIF
     19  0ae4				  -	      IF	$10 = $60
     20  0ae4				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0ae4					      ENDIF
     22  0ae4				  -	      IF	$10 = $70
     23  0ae4				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0ae4					      ENDIF
     25  0ae4				  -	      IF	$10 = $80
     26  0ae4				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0ae4					      ENDIF
     28  0ae4				  -	      IF	$10 = $90
     29  0ae4				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0ae4					      ENDIF
     31  0ae4				  -	      IF	$10 = $A0
     32  0ae4				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0ae4					      ENDIF
     34  0ae4				  -	      IF	$10 = $B0
     35  0ae4				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0ae4					      ENDIF
     37  0ae4				  -	      IF	$10 = $C0
     38  0ae4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0ae4					      ENDIF
     40  0ae4				  -	      IF	$10 = $D0
     41  0ae4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0ae4					      ENDIF
     43  0ae4				  -	      IF	$10 = $E0
     44  0ae4				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0ae4					      ENDIF
     46  0ae4				  -	      IF	$10 = $F0
     47  0ae4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0ae4					      ENDIF
     19  0ae4		       00		      .byte.b	0
      0  0ae5					      COLOUR_GROUP	$10,$A, $F0,$8, $60,$A, $50,$4, $70,6, $40,6	; 1
      1  0ae5
      2  0ae5		       00		      .byte.b	0
      3  0ae6		       1a		      .byte.b	$10+$A-2+PALETTE_INTENSITY_ADJUST
      4  0ae7		       f8		      .byte.b	$F0+$8-2+PALETTE_INTENSITY_ADJUST
      5  0ae8		       6a		      .byte.b	$60+$A-2+PALETTE_INTENSITY_ADJUST
      6  0ae9		       54		      .byte.b	$50+$4-2+PALETTE_INTENSITY_ADJUST
      7  0aea		       76		      .byte.b	$70+6-2+PALETTE_INTENSITY_ADJUST
      8  0aeb		       46		      .byte.b	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0aec		       00		      .byte.b	0
     10  0aed
     11  0aed
     12  0aed		       00		      .byte.b	0
      0  0aee					      NTSC_TO_PAL	$10, $A-2+PALETTE_INTENSITY_ADJUST
      1  0aee				  -	      IF	$10 = 0
      2  0aee				  -	      .byte	$10+$A-2+PALETTE_INTENSITY_ADJUST
      3  0aee					      ENDIF
      4  0aee					      IF	$10 = $10
      5  0aee		       2a		      .byte.b	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0aef					      ENDIF
      7  0aef				  -	      IF	$10 = $20
      8  0aef				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0aef					      ENDIF
     10  0aef				  -	      IF	$10 = $30
     11  0aef				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0aef					      ENDIF
     13  0aef				  -	      IF	$10 = $40
     14  0aef				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0aef					      ENDIF
     16  0aef				  -	      IF	$10 = $50
     17  0aef				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0aef					      ENDIF
     19  0aef				  -	      IF	$10 = $60
     20  0aef				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0aef					      ENDIF
     22  0aef				  -	      IF	$10 = $70
     23  0aef				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0aef					      ENDIF
     25  0aef				  -	      IF	$10 = $80
     26  0aef				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0aef					      ENDIF
     28  0aef				  -	      IF	$10 = $90
     29  0aef				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0aef					      ENDIF
     31  0aef				  -	      IF	$10 = $A0
     32  0aef				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0aef					      ENDIF
     34  0aef				  -	      IF	$10 = $B0
     35  0aef				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0aef					      ENDIF
     37  0aef				  -	      IF	$10 = $C0
     38  0aef				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0aef					      ENDIF
     40  0aef				  -	      IF	$10 = $D0
     41  0aef				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0aef					      ENDIF
     43  0aef				  -	      IF	$10 = $E0
     44  0aef				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0aef					      ENDIF
     46  0aef				  -	      IF	$10 = $F0
     47  0aef				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0aef					      ENDIF
      0  0aef					      NTSC_TO_PAL	$F0, $8-2+PALETTE_INTENSITY_ADJUST
      1  0aef				  -	      IF	$F0 = 0
      2  0aef				  -	      .byte	$F0+$8-2+PALETTE_INTENSITY_ADJUST
      3  0aef					      ENDIF
      4  0aef				  -	      IF	$F0 = $10
      5  0aef				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  0aef					      ENDIF
      7  0aef				  -	      IF	$F0 = $20
      8  0aef				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  0aef					      ENDIF
     10  0aef				  -	      IF	$F0 = $30
     11  0aef				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  0aef					      ENDIF
     13  0aef				  -	      IF	$F0 = $40
     14  0aef				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  0aef					      ENDIF
     16  0aef				  -	      IF	$F0 = $50
     17  0aef				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  0aef					      ENDIF
     19  0aef				  -	      IF	$F0 = $60
     20  0aef				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  0aef					      ENDIF
     22  0aef				  -	      IF	$F0 = $70
     23  0aef				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  0aef					      ENDIF
     25  0aef				  -	      IF	$F0 = $80
     26  0aef				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  0aef					      ENDIF
     28  0aef				  -	      IF	$F0 = $90
     29  0aef				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  0aef					      ENDIF
     31  0aef				  -	      IF	$F0 = $A0
     32  0aef				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  0aef					      ENDIF
     34  0aef				  -	      IF	$F0 = $B0
     35  0aef				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  0aef					      ENDIF
     37  0aef				  -	      IF	$F0 = $C0
     38  0aef				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  0aef					      ENDIF
     40  0aef				  -	      IF	$F0 = $D0
     41  0aef				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  0aef					      ENDIF
     43  0aef				  -	      IF	$F0 = $E0
     44  0aef				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  0aef					      ENDIF
     46  0aef					      IF	$F0 = $F0
     47  0aef		       48		      .byte.b	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  0af0					      ENDIF
      0  0af0					      NTSC_TO_PAL	$60, $A-2+PALETTE_INTENSITY_ADJUST
      1  0af0				  -	      IF	$60 = 0
      2  0af0				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
      3  0af0					      ENDIF
      4  0af0				  -	      IF	$60 = $10
      5  0af0				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0af0					      ENDIF
      7  0af0				  -	      IF	$60 = $20
      8  0af0				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0af0					      ENDIF
     10  0af0				  -	      IF	$60 = $30
     11  0af0				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0af0					      ENDIF
     13  0af0				  -	      IF	$60 = $40
     14  0af0				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0af0					      ENDIF
     16  0af0				  -	      IF	$60 = $50
     17  0af0				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0af0					      ENDIF
     19  0af0					      IF	$60 = $60
     20  0af0		       ca		      .byte.b	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0af1					      ENDIF
     22  0af1				  -	      IF	$60 = $70
     23  0af1				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0af1					      ENDIF
     25  0af1				  -	      IF	$60 = $80
     26  0af1				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0af1					      ENDIF
     28  0af1				  -	      IF	$60 = $90
     29  0af1				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0af1					      ENDIF
     31  0af1				  -	      IF	$60 = $A0
     32  0af1				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0af1					      ENDIF
     34  0af1				  -	      IF	$60 = $B0
     35  0af1				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0af1					      ENDIF
     37  0af1				  -	      IF	$60 = $C0
     38  0af1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0af1					      ENDIF
     40  0af1				  -	      IF	$60 = $D0
     41  0af1				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0af1					      ENDIF
     43  0af1				  -	      IF	$60 = $E0
     44  0af1				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0af1					      ENDIF
     46  0af1				  -	      IF	$60 = $F0
     47  0af1				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0af1					      ENDIF
      0  0af1					      NTSC_TO_PAL	$50, $4-2+PALETTE_INTENSITY_ADJUST
      1  0af1				  -	      IF	$50 = 0
      2  0af1				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
      3  0af1					      ENDIF
      4  0af1				  -	      IF	$50 = $10
      5  0af1				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
      6  0af1					      ENDIF
      7  0af1				  -	      IF	$50 = $20
      8  0af1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      9  0af1					      ENDIF
     10  0af1				  -	      IF	$50 = $30
     11  0af1				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     12  0af1					      ENDIF
     13  0af1				  -	      IF	$50 = $40
     14  0af1				  -	      .byte	$60+$4-2+PALETTE_INTENSITY_ADJUST
     15  0af1					      ENDIF
     16  0af1					      IF	$50 = $50
     17  0af1		       84		      .byte.b	$80+$4-2+PALETTE_INTENSITY_ADJUST
     18  0af2					      ENDIF
     19  0af2				  -	      IF	$50 = $60
     20  0af2				  -	      .byte	$C0+$4-2+PALETTE_INTENSITY_ADJUST
     21  0af2					      ENDIF
     22  0af2				  -	      IF	$50 = $70
     23  0af2				  -	      .byte	$D0+$4-2+PALETTE_INTENSITY_ADJUST
     24  0af2					      ENDIF
     25  0af2				  -	      IF	$50 = $80
     26  0af2				  -	      .byte	$B0+$4-2+PALETTE_INTENSITY_ADJUST
     27  0af2					      ENDIF
     28  0af2				  -	      IF	$50 = $90
     29  0af2				  -	      .byte	$90+$4-2+PALETTE_INTENSITY_ADJUST
     30  0af2					      ENDIF
     31  0af2				  -	      IF	$50 = $A0
     32  0af2				  -	      .byte	$70+$4-2+PALETTE_INTENSITY_ADJUST
     33  0af2					      ENDIF
     34  0af2				  -	      IF	$50 = $B0
     35  0af2				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
     36  0af2					      ENDIF
     37  0af2				  -	      IF	$50 = $C0
     38  0af2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     39  0af2					      ENDIF
     40  0af2				  -	      IF	$50 = $D0
     41  0af2				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     42  0af2					      ENDIF
     43  0af2				  -	      IF	$50 = $E0
     44  0af2				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
     45  0af2					      ENDIF
     46  0af2				  -	      IF	$50 = $F0
     47  0af2				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     48  0af2					      ENDIF
      0  0af2					      NTSC_TO_PAL	$70, 6-2+PALETTE_INTENSITY_ADJUST
      1  0af2				  -	      IF	$70 = 0
      2  0af2				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
      3  0af2					      ENDIF
      4  0af2				  -	      IF	$70 = $10
      5  0af2				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0af2					      ENDIF
      7  0af2				  -	      IF	$70 = $20
      8  0af2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0af2					      ENDIF
     10  0af2				  -	      IF	$70 = $30
     11  0af2				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0af2					      ENDIF
     13  0af2				  -	      IF	$70 = $40
     14  0af2				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0af2					      ENDIF
     16  0af2				  -	      IF	$70 = $50
     17  0af2				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0af2					      ENDIF
     19  0af2				  -	      IF	$70 = $60
     20  0af2				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0af2					      ENDIF
     22  0af2					      IF	$70 = $70
     23  0af2		       d6		      .byte.b	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0af3					      ENDIF
     25  0af3				  -	      IF	$70 = $80
     26  0af3				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0af3					      ENDIF
     28  0af3				  -	      IF	$70 = $90
     29  0af3				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0af3					      ENDIF
     31  0af3				  -	      IF	$70 = $A0
     32  0af3				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0af3					      ENDIF
     34  0af3				  -	      IF	$70 = $B0
     35  0af3				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0af3					      ENDIF
     37  0af3				  -	      IF	$70 = $C0
     38  0af3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0af3					      ENDIF
     40  0af3				  -	      IF	$70 = $D0
     41  0af3				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0af3					      ENDIF
     43  0af3				  -	      IF	$70 = $E0
     44  0af3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0af3					      ENDIF
     46  0af3				  -	      IF	$70 = $F0
     47  0af3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0af3					      ENDIF
      0  0af3					      NTSC_TO_PAL	$40, 6-2+PALETTE_INTENSITY_ADJUST
      1  0af3				  -	      IF	$40 = 0
      2  0af3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      3  0af3					      ENDIF
      4  0af3				  -	      IF	$40 = $10
      5  0af3				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0af3					      ENDIF
      7  0af3				  -	      IF	$40 = $20
      8  0af3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0af3					      ENDIF
     10  0af3				  -	      IF	$40 = $30
     11  0af3				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0af3					      ENDIF
     13  0af3					      IF	$40 = $40
     14  0af3		       66		      .byte.b	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0af4					      ENDIF
     16  0af4				  -	      IF	$40 = $50
     17  0af4				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0af4					      ENDIF
     19  0af4				  -	      IF	$40 = $60
     20  0af4				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0af4					      ENDIF
     22  0af4				  -	      IF	$40 = $70
     23  0af4				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0af4					      ENDIF
     25  0af4				  -	      IF	$40 = $80
     26  0af4				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0af4					      ENDIF
     28  0af4				  -	      IF	$40 = $90
     29  0af4				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0af4					      ENDIF
     31  0af4				  -	      IF	$40 = $A0
     32  0af4				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0af4					      ENDIF
     34  0af4				  -	      IF	$40 = $B0
     35  0af4				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0af4					      ENDIF
     37  0af4				  -	      IF	$40 = $C0
     38  0af4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0af4					      ENDIF
     40  0af4				  -	      IF	$40 = $D0
     41  0af4				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0af4					      ENDIF
     43  0af4				  -	      IF	$40 = $E0
     44  0af4				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0af4					      ENDIF
     46  0af4				  -	      IF	$40 = $F0
     47  0af4				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0af4					      ENDIF
     19  0af4		       00		      .byte.b	0
      0  0af5					      COLOUR_GROUP	$40,$6, $30,$8, $00,$A, $90,$4, $A0,6, $20,6	; 2
      1  0af5
      2  0af5		       00		      .byte.b	0
      3  0af6		       46		      .byte.b	$40+$6-2+PALETTE_INTENSITY_ADJUST
      4  0af7		       38		      .byte.b	$30+$8-2+PALETTE_INTENSITY_ADJUST
      5  0af8		       0a		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      6  0af9		       94		      .byte.b	$90+$4-2+PALETTE_INTENSITY_ADJUST
      7  0afa		       a6		      .byte.b	$A0+6-2+PALETTE_INTENSITY_ADJUST
      8  0afb		       26		      .byte.b	$20+6-2+PALETTE_INTENSITY_ADJUST
      9  0afc		       00		      .byte.b	0
     10  0afd
     11  0afd
     12  0afd		       00		      .byte.b	0
      0  0afe					      NTSC_TO_PAL	$40, $6-2+PALETTE_INTENSITY_ADJUST
      1  0afe				  -	      IF	$40 = 0
      2  0afe				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
      3  0afe					      ENDIF
      4  0afe				  -	      IF	$40 = $10
      5  0afe				  -	      .byte	$20+$6-2+PALETTE_INTENSITY_ADJUST
      6  0afe					      ENDIF
      7  0afe				  -	      IF	$40 = $20
      8  0afe				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
      9  0afe					      ENDIF
     10  0afe				  -	      IF	$40 = $30
     11  0afe				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
     12  0afe					      ENDIF
     13  0afe					      IF	$40 = $40
     14  0afe		       66		      .byte.b	$60+$6-2+PALETTE_INTENSITY_ADJUST
     15  0aff					      ENDIF
     16  0aff				  -	      IF	$40 = $50
     17  0aff				  -	      .byte	$80+$6-2+PALETTE_INTENSITY_ADJUST
     18  0aff					      ENDIF
     19  0aff				  -	      IF	$40 = $60
     20  0aff				  -	      .byte	$C0+$6-2+PALETTE_INTENSITY_ADJUST
     21  0aff					      ENDIF
     22  0aff				  -	      IF	$40 = $70
     23  0aff				  -	      .byte	$D0+$6-2+PALETTE_INTENSITY_ADJUST
     24  0aff					      ENDIF
     25  0aff				  -	      IF	$40 = $80
     26  0aff				  -	      .byte	$B0+$6-2+PALETTE_INTENSITY_ADJUST
     27  0aff					      ENDIF
     28  0aff				  -	      IF	$40 = $90
     29  0aff				  -	      .byte	$90+$6-2+PALETTE_INTENSITY_ADJUST
     30  0aff					      ENDIF
     31  0aff				  -	      IF	$40 = $A0
     32  0aff				  -	      .byte	$70+$6-2+PALETTE_INTENSITY_ADJUST
     33  0aff					      ENDIF
     34  0aff				  -	      IF	$40 = $B0
     35  0aff				  -	      .byte	$50+$6-2+PALETTE_INTENSITY_ADJUST
     36  0aff					      ENDIF
     37  0aff				  -	      IF	$40 = $C0
     38  0aff				  -	      .byte	$30+$6-2+PALETTE_INTENSITY_ADJUST
     39  0aff					      ENDIF
     40  0aff				  -	      IF	$40 = $D0
     41  0aff				  -	      .byte	$30+$6-2+PALETTE_INTENSITY_ADJUST
     42  0aff					      ENDIF
     43  0aff				  -	      IF	$40 = $E0
     44  0aff				  -	      .byte	$20+$6-2+PALETTE_INTENSITY_ADJUST
     45  0aff					      ENDIF
     46  0aff				  -	      IF	$40 = $F0
     47  0aff				  -	      .byte	$40+$6-2+PALETTE_INTENSITY_ADJUST
     48  0aff					      ENDIF
      0  0aff					      NTSC_TO_PAL	$30, $8-2+PALETTE_INTENSITY_ADJUST
      1  0aff				  -	      IF	$30 = 0
      2  0aff				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
      3  0aff					      ENDIF
      4  0aff				  -	      IF	$30 = $10
      5  0aff				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  0aff					      ENDIF
      7  0aff				  -	      IF	$30 = $20
      8  0aff				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  0aff					      ENDIF
     10  0aff					      IF	$30 = $30
     11  0aff		       48		      .byte.b	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  0b00					      ENDIF
     13  0b00				  -	      IF	$30 = $40
     14  0b00				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  0b00					      ENDIF
     16  0b00				  -	      IF	$30 = $50
     17  0b00				  -	      .byte	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  0b00					      ENDIF
     19  0b00				  -	      IF	$30 = $60
     20  0b00				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  0b00					      ENDIF
     22  0b00				  -	      IF	$30 = $70
     23  0b00				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  0b00					      ENDIF
     25  0b00				  -	      IF	$30 = $80
     26  0b00				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  0b00					      ENDIF
     28  0b00				  -	      IF	$30 = $90
     29  0b00				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  0b00					      ENDIF
     31  0b00				  -	      IF	$30 = $A0
     32  0b00				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  0b00					      ENDIF
     34  0b00				  -	      IF	$30 = $B0
     35  0b00				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  0b00					      ENDIF
     37  0b00				  -	      IF	$30 = $C0
     38  0b00				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  0b00					      ENDIF
     40  0b00				  -	      IF	$30 = $D0
     41  0b00				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  0b00					      ENDIF
     43  0b00				  -	      IF	$30 = $E0
     44  0b00				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  0b00					      ENDIF
     46  0b00				  -	      IF	$30 = $F0
     47  0b00				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  0b00					      ENDIF
      0  0b00					      NTSC_TO_PAL	$00, $A-2+PALETTE_INTENSITY_ADJUST
      1  0b00					      IF	$00 = 0
      2  0b00		       0a		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      3  0b01					      ENDIF
      4  0b01				  -	      IF	$00 = $10
      5  0b01				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0b01					      ENDIF
      7  0b01				  -	      IF	$00 = $20
      8  0b01				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0b01					      ENDIF
     10  0b01				  -	      IF	$00 = $30
     11  0b01				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0b01					      ENDIF
     13  0b01				  -	      IF	$00 = $40
     14  0b01				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0b01					      ENDIF
     16  0b01				  -	      IF	$00 = $50
     17  0b01				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0b01					      ENDIF
     19  0b01				  -	      IF	$00 = $60
     20  0b01				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0b01					      ENDIF
     22  0b01				  -	      IF	$00 = $70
     23  0b01				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0b01					      ENDIF
     25  0b01				  -	      IF	$00 = $80
     26  0b01				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0b01					      ENDIF
     28  0b01				  -	      IF	$00 = $90
     29  0b01				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0b01					      ENDIF
     31  0b01				  -	      IF	$00 = $A0
     32  0b01				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0b01					      ENDIF
     34  0b01				  -	      IF	$00 = $B0
     35  0b01				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0b01					      ENDIF
     37  0b01				  -	      IF	$00 = $C0
     38  0b01				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0b01					      ENDIF
     40  0b01				  -	      IF	$00 = $D0
     41  0b01				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0b01					      ENDIF
     43  0b01				  -	      IF	$00 = $E0
     44  0b01				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0b01					      ENDIF
     46  0b01				  -	      IF	$00 = $F0
     47  0b01				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0b01					      ENDIF
      0  0b01					      NTSC_TO_PAL	$90, $4-2+PALETTE_INTENSITY_ADJUST
      1  0b01				  -	      IF	$90 = 0
      2  0b01				  -	      .byte	$90+$4-2+PALETTE_INTENSITY_ADJUST
      3  0b01					      ENDIF
      4  0b01				  -	      IF	$90 = $10
      5  0b01				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
      6  0b01					      ENDIF
      7  0b01				  -	      IF	$90 = $20
      8  0b01				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      9  0b01					      ENDIF
     10  0b01				  -	      IF	$90 = $30
     11  0b01				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     12  0b01					      ENDIF
     13  0b01				  -	      IF	$90 = $40
     14  0b01				  -	      .byte	$60+$4-2+PALETTE_INTENSITY_ADJUST
     15  0b01					      ENDIF
     16  0b01				  -	      IF	$90 = $50
     17  0b01				  -	      .byte	$80+$4-2+PALETTE_INTENSITY_ADJUST
     18  0b01					      ENDIF
     19  0b01				  -	      IF	$90 = $60
     20  0b01				  -	      .byte	$C0+$4-2+PALETTE_INTENSITY_ADJUST
     21  0b01					      ENDIF
     22  0b01				  -	      IF	$90 = $70
     23  0b01				  -	      .byte	$D0+$4-2+PALETTE_INTENSITY_ADJUST
     24  0b01					      ENDIF
     25  0b01				  -	      IF	$90 = $80
     26  0b01				  -	      .byte	$B0+$4-2+PALETTE_INTENSITY_ADJUST
     27  0b01					      ENDIF
     28  0b01					      IF	$90 = $90
     29  0b01		       94		      .byte.b	$90+$4-2+PALETTE_INTENSITY_ADJUST
     30  0b02					      ENDIF
     31  0b02				  -	      IF	$90 = $A0
     32  0b02				  -	      .byte	$70+$4-2+PALETTE_INTENSITY_ADJUST
     33  0b02					      ENDIF
     34  0b02				  -	      IF	$90 = $B0
     35  0b02				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
     36  0b02					      ENDIF
     37  0b02				  -	      IF	$90 = $C0
     38  0b02				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     39  0b02					      ENDIF
     40  0b02				  -	      IF	$90 = $D0
     41  0b02				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     42  0b02					      ENDIF
     43  0b02				  -	      IF	$90 = $E0
     44  0b02				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
     45  0b02					      ENDIF
     46  0b02				  -	      IF	$90 = $F0
     47  0b02				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     48  0b02					      ENDIF
      0  0b02					      NTSC_TO_PAL	$A0, 6-2+PALETTE_INTENSITY_ADJUST
      1  0b02				  -	      IF	$A0 = 0
      2  0b02				  -	      .byte	$A0+6-2+PALETTE_INTENSITY_ADJUST
      3  0b02					      ENDIF
      4  0b02				  -	      IF	$A0 = $10
      5  0b02				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0b02					      ENDIF
      7  0b02				  -	      IF	$A0 = $20
      8  0b02				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0b02					      ENDIF
     10  0b02				  -	      IF	$A0 = $30
     11  0b02				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0b02					      ENDIF
     13  0b02				  -	      IF	$A0 = $40
     14  0b02				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0b02					      ENDIF
     16  0b02				  -	      IF	$A0 = $50
     17  0b02				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0b02					      ENDIF
     19  0b02				  -	      IF	$A0 = $60
     20  0b02				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0b02					      ENDIF
     22  0b02				  -	      IF	$A0 = $70
     23  0b02				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0b02					      ENDIF
     25  0b02				  -	      IF	$A0 = $80
     26  0b02				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0b02					      ENDIF
     28  0b02				  -	      IF	$A0 = $90
     29  0b02				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0b02					      ENDIF
     31  0b02					      IF	$A0 = $A0
     32  0b02		       76		      .byte.b	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0b03					      ENDIF
     34  0b03				  -	      IF	$A0 = $B0
     35  0b03				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0b03					      ENDIF
     37  0b03				  -	      IF	$A0 = $C0
     38  0b03				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0b03					      ENDIF
     40  0b03				  -	      IF	$A0 = $D0
     41  0b03				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0b03					      ENDIF
     43  0b03				  -	      IF	$A0 = $E0
     44  0b03				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0b03					      ENDIF
     46  0b03				  -	      IF	$A0 = $F0
     47  0b03				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0b03					      ENDIF
      0  0b03					      NTSC_TO_PAL	$20, 6-2+PALETTE_INTENSITY_ADJUST
      1  0b03				  -	      IF	$20 = 0
      2  0b03				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      3  0b03					      ENDIF
      4  0b03				  -	      IF	$20 = $10
      5  0b03				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0b03					      ENDIF
      7  0b03					      IF	$20 = $20
      8  0b03		       46		      .byte.b	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0b04					      ENDIF
     10  0b04				  -	      IF	$20 = $30
     11  0b04				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0b04					      ENDIF
     13  0b04				  -	      IF	$20 = $40
     14  0b04				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0b04					      ENDIF
     16  0b04				  -	      IF	$20 = $50
     17  0b04				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0b04					      ENDIF
     19  0b04				  -	      IF	$20 = $60
     20  0b04				  -	      .byte	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0b04					      ENDIF
     22  0b04				  -	      IF	$20 = $70
     23  0b04				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0b04					      ENDIF
     25  0b04				  -	      IF	$20 = $80
     26  0b04				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0b04					      ENDIF
     28  0b04				  -	      IF	$20 = $90
     29  0b04				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0b04					      ENDIF
     31  0b04				  -	      IF	$20 = $A0
     32  0b04				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0b04					      ENDIF
     34  0b04				  -	      IF	$20 = $B0
     35  0b04				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0b04					      ENDIF
     37  0b04				  -	      IF	$20 = $C0
     38  0b04				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0b04					      ENDIF
     40  0b04				  -	      IF	$20 = $D0
     41  0b04				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0b04					      ENDIF
     43  0b04				  -	      IF	$20 = $E0
     44  0b04				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0b04					      ENDIF
     46  0b04				  -	      IF	$20 = $F0
     47  0b04				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0b04					      ENDIF
     19  0b04		       00		      .byte.b	0
      0  0b05					      COLOUR_GROUP	$30,$A, $50,$8, $00,$A, $40,$4, $60,6, $E0,8	; 3
      1  0b05
      2  0b05		       00		      .byte.b	0
      3  0b06		       3a		      .byte.b	$30+$A-2+PALETTE_INTENSITY_ADJUST
      4  0b07		       58		      .byte.b	$50+$8-2+PALETTE_INTENSITY_ADJUST
      5  0b08		       0a		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      6  0b09		       44		      .byte.b	$40+$4-2+PALETTE_INTENSITY_ADJUST
      7  0b0a		       66		      .byte.b	$60+6-2+PALETTE_INTENSITY_ADJUST
      8  0b0b		       e8		      .byte.b	$E0+8-2+PALETTE_INTENSITY_ADJUST
      9  0b0c		       00		      .byte.b	0
     10  0b0d
     11  0b0d
     12  0b0d		       00		      .byte.b	0
      0  0b0e					      NTSC_TO_PAL	$30, $A-2+PALETTE_INTENSITY_ADJUST
      1  0b0e				  -	      IF	$30 = 0
      2  0b0e				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
      3  0b0e					      ENDIF
      4  0b0e				  -	      IF	$30 = $10
      5  0b0e				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0b0e					      ENDIF
      7  0b0e				  -	      IF	$30 = $20
      8  0b0e				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0b0e					      ENDIF
     10  0b0e					      IF	$30 = $30
     11  0b0e		       4a		      .byte.b	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0b0f					      ENDIF
     13  0b0f				  -	      IF	$30 = $40
     14  0b0f				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0b0f					      ENDIF
     16  0b0f				  -	      IF	$30 = $50
     17  0b0f				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0b0f					      ENDIF
     19  0b0f				  -	      IF	$30 = $60
     20  0b0f				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0b0f					      ENDIF
     22  0b0f				  -	      IF	$30 = $70
     23  0b0f				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0b0f					      ENDIF
     25  0b0f				  -	      IF	$30 = $80
     26  0b0f				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0b0f					      ENDIF
     28  0b0f				  -	      IF	$30 = $90
     29  0b0f				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0b0f					      ENDIF
     31  0b0f				  -	      IF	$30 = $A0
     32  0b0f				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0b0f					      ENDIF
     34  0b0f				  -	      IF	$30 = $B0
     35  0b0f				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0b0f					      ENDIF
     37  0b0f				  -	      IF	$30 = $C0
     38  0b0f				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0b0f					      ENDIF
     40  0b0f				  -	      IF	$30 = $D0
     41  0b0f				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0b0f					      ENDIF
     43  0b0f				  -	      IF	$30 = $E0
     44  0b0f				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0b0f					      ENDIF
     46  0b0f				  -	      IF	$30 = $F0
     47  0b0f				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0b0f					      ENDIF
      0  0b0f					      NTSC_TO_PAL	$50, $8-2+PALETTE_INTENSITY_ADJUST
      1  0b0f				  -	      IF	$50 = 0
      2  0b0f				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
      3  0b0f					      ENDIF
      4  0b0f				  -	      IF	$50 = $10
      5  0b0f				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
      6  0b0f					      ENDIF
      7  0b0f				  -	      IF	$50 = $20
      8  0b0f				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
      9  0b0f					      ENDIF
     10  0b0f				  -	      IF	$50 = $30
     11  0b0f				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     12  0b0f					      ENDIF
     13  0b0f				  -	      IF	$50 = $40
     14  0b0f				  -	      .byte	$60+$8-2+PALETTE_INTENSITY_ADJUST
     15  0b0f					      ENDIF
     16  0b0f					      IF	$50 = $50
     17  0b0f		       88		      .byte.b	$80+$8-2+PALETTE_INTENSITY_ADJUST
     18  0b10					      ENDIF
     19  0b10				  -	      IF	$50 = $60
     20  0b10				  -	      .byte	$C0+$8-2+PALETTE_INTENSITY_ADJUST
     21  0b10					      ENDIF
     22  0b10				  -	      IF	$50 = $70
     23  0b10				  -	      .byte	$D0+$8-2+PALETTE_INTENSITY_ADJUST
     24  0b10					      ENDIF
     25  0b10				  -	      IF	$50 = $80
     26  0b10				  -	      .byte	$B0+$8-2+PALETTE_INTENSITY_ADJUST
     27  0b10					      ENDIF
     28  0b10				  -	      IF	$50 = $90
     29  0b10				  -	      .byte	$90+$8-2+PALETTE_INTENSITY_ADJUST
     30  0b10					      ENDIF
     31  0b10				  -	      IF	$50 = $A0
     32  0b10				  -	      .byte	$70+$8-2+PALETTE_INTENSITY_ADJUST
     33  0b10					      ENDIF
     34  0b10				  -	      IF	$50 = $B0
     35  0b10				  -	      .byte	$50+$8-2+PALETTE_INTENSITY_ADJUST
     36  0b10					      ENDIF
     37  0b10				  -	      IF	$50 = $C0
     38  0b10				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     39  0b10					      ENDIF
     40  0b10				  -	      IF	$50 = $D0
     41  0b10				  -	      .byte	$30+$8-2+PALETTE_INTENSITY_ADJUST
     42  0b10					      ENDIF
     43  0b10				  -	      IF	$50 = $E0
     44  0b10				  -	      .byte	$20+$8-2+PALETTE_INTENSITY_ADJUST
     45  0b10					      ENDIF
     46  0b10				  -	      IF	$50 = $F0
     47  0b10				  -	      .byte	$40+$8-2+PALETTE_INTENSITY_ADJUST
     48  0b10					      ENDIF
      0  0b10					      NTSC_TO_PAL	$00, $A-2+PALETTE_INTENSITY_ADJUST
      1  0b10					      IF	$00 = 0
      2  0b10		       0a		      .byte.b	$00+$A-2+PALETTE_INTENSITY_ADJUST
      3  0b11					      ENDIF
      4  0b11				  -	      IF	$00 = $10
      5  0b11				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
      6  0b11					      ENDIF
      7  0b11				  -	      IF	$00 = $20
      8  0b11				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
      9  0b11					      ENDIF
     10  0b11				  -	      IF	$00 = $30
     11  0b11				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     12  0b11					      ENDIF
     13  0b11				  -	      IF	$00 = $40
     14  0b11				  -	      .byte	$60+$A-2+PALETTE_INTENSITY_ADJUST
     15  0b11					      ENDIF
     16  0b11				  -	      IF	$00 = $50
     17  0b11				  -	      .byte	$80+$A-2+PALETTE_INTENSITY_ADJUST
     18  0b11					      ENDIF
     19  0b11				  -	      IF	$00 = $60
     20  0b11				  -	      .byte	$C0+$A-2+PALETTE_INTENSITY_ADJUST
     21  0b11					      ENDIF
     22  0b11				  -	      IF	$00 = $70
     23  0b11				  -	      .byte	$D0+$A-2+PALETTE_INTENSITY_ADJUST
     24  0b11					      ENDIF
     25  0b11				  -	      IF	$00 = $80
     26  0b11				  -	      .byte	$B0+$A-2+PALETTE_INTENSITY_ADJUST
     27  0b11					      ENDIF
     28  0b11				  -	      IF	$00 = $90
     29  0b11				  -	      .byte	$90+$A-2+PALETTE_INTENSITY_ADJUST
     30  0b11					      ENDIF
     31  0b11				  -	      IF	$00 = $A0
     32  0b11				  -	      .byte	$70+$A-2+PALETTE_INTENSITY_ADJUST
     33  0b11					      ENDIF
     34  0b11				  -	      IF	$00 = $B0
     35  0b11				  -	      .byte	$50+$A-2+PALETTE_INTENSITY_ADJUST
     36  0b11					      ENDIF
     37  0b11				  -	      IF	$00 = $C0
     38  0b11				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     39  0b11					      ENDIF
     40  0b11				  -	      IF	$00 = $D0
     41  0b11				  -	      .byte	$30+$A-2+PALETTE_INTENSITY_ADJUST
     42  0b11					      ENDIF
     43  0b11				  -	      IF	$00 = $E0
     44  0b11				  -	      .byte	$20+$A-2+PALETTE_INTENSITY_ADJUST
     45  0b11					      ENDIF
     46  0b11				  -	      IF	$00 = $F0
     47  0b11				  -	      .byte	$40+$A-2+PALETTE_INTENSITY_ADJUST
     48  0b11					      ENDIF
      0  0b11					      NTSC_TO_PAL	$40, $4-2+PALETTE_INTENSITY_ADJUST
      1  0b11				  -	      IF	$40 = 0
      2  0b11				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      3  0b11					      ENDIF
      4  0b11				  -	      IF	$40 = $10
      5  0b11				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
      6  0b11					      ENDIF
      7  0b11				  -	      IF	$40 = $20
      8  0b11				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
      9  0b11					      ENDIF
     10  0b11				  -	      IF	$40 = $30
     11  0b11				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     12  0b11					      ENDIF
     13  0b11					      IF	$40 = $40
     14  0b11		       64		      .byte.b	$60+$4-2+PALETTE_INTENSITY_ADJUST
     15  0b12					      ENDIF
     16  0b12				  -	      IF	$40 = $50
     17  0b12				  -	      .byte	$80+$4-2+PALETTE_INTENSITY_ADJUST
     18  0b12					      ENDIF
     19  0b12				  -	      IF	$40 = $60
     20  0b12				  -	      .byte	$C0+$4-2+PALETTE_INTENSITY_ADJUST
     21  0b12					      ENDIF
     22  0b12				  -	      IF	$40 = $70
     23  0b12				  -	      .byte	$D0+$4-2+PALETTE_INTENSITY_ADJUST
     24  0b12					      ENDIF
     25  0b12				  -	      IF	$40 = $80
     26  0b12				  -	      .byte	$B0+$4-2+PALETTE_INTENSITY_ADJUST
     27  0b12					      ENDIF
     28  0b12				  -	      IF	$40 = $90
     29  0b12				  -	      .byte	$90+$4-2+PALETTE_INTENSITY_ADJUST
     30  0b12					      ENDIF
     31  0b12				  -	      IF	$40 = $A0
     32  0b12				  -	      .byte	$70+$4-2+PALETTE_INTENSITY_ADJUST
     33  0b12					      ENDIF
     34  0b12				  -	      IF	$40 = $B0
     35  0b12				  -	      .byte	$50+$4-2+PALETTE_INTENSITY_ADJUST
     36  0b12					      ENDIF
     37  0b12				  -	      IF	$40 = $C0
     38  0b12				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     39  0b12					      ENDIF
     40  0b12				  -	      IF	$40 = $D0
     41  0b12				  -	      .byte	$30+$4-2+PALETTE_INTENSITY_ADJUST
     42  0b12					      ENDIF
     43  0b12				  -	      IF	$40 = $E0
     44  0b12				  -	      .byte	$20+$4-2+PALETTE_INTENSITY_ADJUST
     45  0b12					      ENDIF
     46  0b12				  -	      IF	$40 = $F0
     47  0b12				  -	      .byte	$40+$4-2+PALETTE_INTENSITY_ADJUST
     48  0b12					      ENDIF
      0  0b12					      NTSC_TO_PAL	$60, 6-2+PALETTE_INTENSITY_ADJUST
      1  0b12				  -	      IF	$60 = 0
      2  0b12				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
      3  0b12					      ENDIF
      4  0b12				  -	      IF	$60 = $10
      5  0b12				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
      6  0b12					      ENDIF
      7  0b12				  -	      IF	$60 = $20
      8  0b12				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
      9  0b12					      ENDIF
     10  0b12				  -	      IF	$60 = $30
     11  0b12				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     12  0b12					      ENDIF
     13  0b12				  -	      IF	$60 = $40
     14  0b12				  -	      .byte	$60+6-2+PALETTE_INTENSITY_ADJUST
     15  0b12					      ENDIF
     16  0b12				  -	      IF	$60 = $50
     17  0b12				  -	      .byte	$80+6-2+PALETTE_INTENSITY_ADJUST
     18  0b12					      ENDIF
     19  0b12					      IF	$60 = $60
     20  0b12		       c6		      .byte.b	$C0+6-2+PALETTE_INTENSITY_ADJUST
     21  0b13					      ENDIF
     22  0b13				  -	      IF	$60 = $70
     23  0b13				  -	      .byte	$D0+6-2+PALETTE_INTENSITY_ADJUST
     24  0b13					      ENDIF
     25  0b13				  -	      IF	$60 = $80
     26  0b13				  -	      .byte	$B0+6-2+PALETTE_INTENSITY_ADJUST
     27  0b13					      ENDIF
     28  0b13				  -	      IF	$60 = $90
     29  0b13				  -	      .byte	$90+6-2+PALETTE_INTENSITY_ADJUST
     30  0b13					      ENDIF
     31  0b13				  -	      IF	$60 = $A0
     32  0b13				  -	      .byte	$70+6-2+PALETTE_INTENSITY_ADJUST
     33  0b13					      ENDIF
     34  0b13				  -	      IF	$60 = $B0
     35  0b13				  -	      .byte	$50+6-2+PALETTE_INTENSITY_ADJUST
     36  0b13					      ENDIF
     37  0b13				  -	      IF	$60 = $C0
     38  0b13				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     39  0b13					      ENDIF
     40  0b13				  -	      IF	$60 = $D0
     41  0b13				  -	      .byte	$30+6-2+PALETTE_INTENSITY_ADJUST
     42  0b13					      ENDIF
     43  0b13				  -	      IF	$60 = $E0
     44  0b13				  -	      .byte	$20+6-2+PALETTE_INTENSITY_ADJUST
     45  0b13					      ENDIF
     46  0b13				  -	      IF	$60 = $F0
     47  0b13				  -	      .byte	$40+6-2+PALETTE_INTENSITY_ADJUST
     48  0b13					      ENDIF
      0  0b13					      NTSC_TO_PAL	$E0, 8-2+PALETTE_INTENSITY_ADJUST
      1  0b13				  -	      IF	$E0 = 0
      2  0b13				  -	      .byte	$E0+8-2+PALETTE_INTENSITY_ADJUST
      3  0b13					      ENDIF
      4  0b13				  -	      IF	$E0 = $10
      5  0b13				  -	      .byte	$20+8-2+PALETTE_INTENSITY_ADJUST
      6  0b13					      ENDIF
      7  0b13				  -	      IF	$E0 = $20
      8  0b13				  -	      .byte	$40+8-2+PALETTE_INTENSITY_ADJUST
      9  0b13					      ENDIF
     10  0b13				  -	      IF	$E0 = $30
     11  0b13				  -	      .byte	$40+8-2+PALETTE_INTENSITY_ADJUST
     12  0b13					      ENDIF
     13  0b13				  -	      IF	$E0 = $40
     14  0b13				  -	      .byte	$60+8-2+PALETTE_INTENSITY_ADJUST
     15  0b13					      ENDIF
     16  0b13				  -	      IF	$E0 = $50
     17  0b13				  -	      .byte	$80+8-2+PALETTE_INTENSITY_ADJUST
     18  0b13					      ENDIF
     19  0b13				  -	      IF	$E0 = $60
     20  0b13				  -	      .byte	$C0+8-2+PALETTE_INTENSITY_ADJUST
     21  0b13					      ENDIF
     22  0b13				  -	      IF	$E0 = $70
     23  0b13				  -	      .byte	$D0+8-2+PALETTE_INTENSITY_ADJUST
     24  0b13					      ENDIF
     25  0b13				  -	      IF	$E0 = $80
     26  0b13				  -	      .byte	$B0+8-2+PALETTE_INTENSITY_ADJUST
     27  0b13					      ENDIF
     28  0b13				  -	      IF	$E0 = $90
     29  0b13				  -	      .byte	$90+8-2+PALETTE_INTENSITY_ADJUST
     30  0b13					      ENDIF
     31  0b13				  -	      IF	$E0 = $A0
     32  0b13				  -	      .byte	$70+8-2+PALETTE_INTENSITY_ADJUST
     33  0b13					      ENDIF
     34  0b13				  -	      IF	$E0 = $B0
     35  0b13				  -	      .byte	$50+8-2+PALETTE_INTENSITY_ADJUST
     36  0b13					      ENDIF
     37  0b13				  -	      IF	$E0 = $C0
     38  0b13				  -	      .byte	$30+8-2+PALETTE_INTENSITY_ADJUST
     39  0b13					      ENDIF
     40  0b13				  -	      IF	$E0 = $D0
     41  0b13				  -	      .byte	$30+8-2+PALETTE_INTENSITY_ADJUST
     42  0b13					      ENDIF
     43  0b13					      IF	$E0 = $E0
     44  0b13		       28		      .byte.b	$20+8-2+PALETTE_INTENSITY_ADJUST
     45  0b14					      ENDIF
     46  0b14				  -	      IF	$E0 = $F0
     47  0b14				  -	      .byte	$40+8-2+PALETTE_INTENSITY_ADJUST
     48  0b14					      ENDIF
     19  0b14		       00		      .byte.b	0
    708  0b15
    709  0b15							;---------------------------------------------------------------------------
    710  0b15
      0  0b15					      DEFINE_SUBROUTINE	CharacterDataVecHI
      1  0b15		       00 01	   BANK_CharacterDataVecHI =	_CURRENT_BANK
      2  0b15					      SUBROUTINE
      3  0b15				   CharacterDataVecHI
    712  0b15
    713  0b15		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    714  0b16		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    715  0b17		       ff		      .byte.b	>CHARACTERSHAPE_SOIL
    716  0b18		       ff		      .byte.b	>CHARACTERSHAPE_SOIL_MIRRORED
    717  0b19		       ff		      .byte.b	>CHARACTERSHAPE_BOX
    718  0b1a		       ff		      .byte.b	>CHARACTERSHAPE_BOX_MIRRORED
    719  0b1b		       fe		      .byte.b	>CHARACTERSHAPE_TARGET1
    720  0b1c		       fe		      .byte.b	>CHARACTERSHAPE_TARGET1_MIRRORED
    721  0b1d		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    722  0b1e		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    723  0b1f		       f3		      .byte.b	>CHARACTERSHAPE_BLANK	; man occupied
    724  0b20		       f3		      .byte.b	>CHARACTERSHAPE_BLANK
    725  0b21		       fd		      .byte.b	>CHARACTERSHAPE_STEEL
    726  0b22		       fe		      .byte.b	>CHARACTERSHAPE_STEEL_MIRRORED
    727  0b23		       fe		      .byte.b	>CHARACTERSHAPE_RIVET
    728  0b24		       ff		      .byte.b	>CHARACTERSHAPE_RIVET_MIRRORED
    729  0b25		       ff		      .byte.b	>CHARACTERSHAPE_WALL
    730  0b26		       ff		      .byte.b	>CHARACTERSHAPE_WALL_MIRRORED
    731  0b27		       ff		      .byte.b	>CHARACTERSHAPE_STRIPE
    732  0b28		       ff		      .byte.b	>CHARACTERSHAPE_STRIPE_MIRRORED
    733  0b29		       ff		      .byte.b	>CHARACTERSHAPE_BOX_ON_TARGET
    734  0b2a		       ff		      .byte.b	>CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED
    735  0b2b							;    .byte >CHARACTERSHAPE_BOX_ON_TARGET2
    736  0b2b							;    .byte >CHARACTERSHAPE_BOX_ON_TARGET2_MIRRORED
    737  0b2b		       f3		      .byte.b	>CHARACTERSHAPE_BLANK	; unkillable man
    738  0b2c		       f3		      .byte.b	>CHARACTERSHAPE_BLANK	; unkillable man
    739  0b2d		       fe		      .byte.b	>CHARACTERSHAPE_TARGET1
    740  0b2e		       fe		      .byte.b	>CHARACTERSHAPE_TARGET1_MIRRORED
    741  0b2f		       fe		      .byte.b	>CHARACTERSHAPE_TARGET3
    742  0b30		       fe		      .byte.b	>CHARACTERSHAPE_TARGET3_MIRRORED
    743  0b31		       fe		      .byte.b	>CHARACTERSHAPE_TARGET5
    744  0b32		       fe		      .byte.b	>CHARACTERSHAPE_TARGET5_MIRRORED
    745  0b33		       fe		      .byte.b	>CHARACTERSHAPE_TARGET7
    746  0b34		       fe		      .byte.b	>CHARACTERSHAPE_TARGET7_MIRRORED
    747  0b35
    748  0b35				  -	      if	DIGITS
    749  0b35				  -	      .byte	>CHARACTERSHAPE_0, >CHARACTERSHAPE_0_MIRRORED
    750  0b35				  -	      .byte	>CHARACTERSHAPE_1, >CHARACTERSHAPE_1_MIRRORED
    751  0b35				  -	      .byte	>CHARACTERSHAPE_2, >CHARACTERSHAPE_2_MIRRORED
    752  0b35				  -	      .byte	>CHARACTERSHAPE_3, >CHARACTERSHAPE_3_MIRRORED
    753  0b35				  -	      .byte	>CHARACTERSHAPE_4, >CHARACTERSHAPE_4_MIRRORED
    754  0b35				  -	      .byte	>CHARACTERSHAPE_5, >CHARACTERSHAPE_5_MIRRORED
    755  0b35				  -	      .byte	>CHARACTERSHAPE_6, >CHARACTERSHAPE_6_MIRRORED
    756  0b35				  -	      .byte	>CHARACTERSHAPE_7, >CHARACTERSHAPE_7_MIRRORED
    757  0b35				  -	      .byte	>CHARACTERSHAPE_8, >CHARACTERSHAPE_8_MIRRORED
    758  0b35				  -	      .byte	>CHARACTERSHAPE_9, >CHARACTERSHAPE_9_MIRRORED
    759  0b35					      endif
    760  0b35
    761  0b35				  -	      IF	* - CharacterDataVecHI != CHARACTER_MAXIMUM*2
    762  0b35				  -	      ECHO	"ERROR: Incorrect CharacterDataVecHI table!"
    763  0b35				  -	      ERR
    764  0b35					      ENDIF
    765  0b35
      0  0b35					      CHECKPAGEX	CharacterDataVecHI, "CharacterDataVecHI crosses page"
      9  0b35					      LIST	ON
    767  0b35
    768  0b35
    769  0b35							;OPTIONAL_PAGEBREAK "PLAYER BLANK SHAPE", LINES_PER_CHAR
    770  0b35
    771  0b35		       f3 4d	   ShapePlayer =	PLAYER0_SHAPE	;BLANK
    772  0b35		       f3 4d	   ShapePlayerBLUE =	ShapePlayer	; low adresses patched
    773  0b35		       f3 4d	   ShapePlayerGREEN =	ShapePlayer	; low adresses patched
    774  0b35		       f3 4d	   ShapePlayerRED =	ShapePlayer	; low adresses patched
    775  0b35
    776  0b35		       f3 35	   CHARACTERSHAPE_MANOCCUPIED =	PLAYER_BLANK
    777  0b35		       f3 35	   CHARACTERSHAPE_BLANK =	PLAYER_BLANK
    778  0b35
    779  0b35
    780  0b35							; The following are the RAM buffers into which the player shape and colour data are copied
    781  0b35							; The self-mod draw vectors point to this OR to a **blank** shape.
    782  0b35
      0  0b35					      OPTIONAL_PAGEBREAK	"PLAYER_BLANK", LINES_PER_CHAR
     10  0b35					      LIST	ON
    784  0b35				   PLAYER_BLANK
    785  0b35		       00 00 00 00*	      ds	LINES_PER_CHAR, 0	; P1
      0  0b4d					      CHECKPAGEX	PLAYER_BLANK, "PLAYER_BLANK in BANK_ROM_SHADOW_RAMBANK.asm"
      9  0b4d					      LIST	ON
    787  0b4d
      0  0b4d					      OPTIONAL_PAGEBREAK	"PLAYER0_SHAPE", LINES_PER_CHAR
     10  0b4d					      LIST	ON
    789  0b4d				   PLAYER0_SHAPE
    790  0b4d		       00 00 00 00*	      ds	LINES_PER_CHAR,0
      0  0b65					      CHECKPAGEX	PLAYER0_SHAPE, "PLAYER0_SHAPE in BANK_ROM_SHADOW_RAMBANK.asm"
      9  0b65					      LIST	ON
    792  0b65
      0  0b65					      OPTIONAL_PAGEBREAK	"PLAYER0_COLOUR", LINES_PER_CHAR	; BOTH on same page
     10  0b65					      LIST	ON
    794  0b65				   PLAYER0_COLOUR
    795  0b65		       00 00 00 00*	      ds	LINES_PER_CHAR,0
      0  0b7d					      CHECKPAGEX	PLAYER0_COLOUR, "PLAYER0_COLOUR in BANK_ROM_SHADOW_RAMBANK.asm"
      9  0b7d					      LIST	ON
    797  0b7d
    798  0b7d
    799  0b7d
    800  0b7d
    801  0b7d
    802  0b7d
    803  0b7d				   ColourBandsGreen
    804  0b7d
    805  0b7d							; NTSC...
    806  0b7d
    807  0b7d		       14 14		      ds	2,$16-4+PALETTE_INTENSITY_ADJUST
    808  0b7f		       f6 f6		      ds	2,$F8-4+PALETTE_INTENSITY_ADJUST
    809  0b81		       26 26		      ds	2,$28-4+PALETTE_INTENSITY_ADJUST	; brown
    810  0b83		       36 36		      ds	2,$38-4+PALETTE_INTENSITY_ADJUST
    811  0b85		       46 46		      ds	2,$48-4+PALETTE_INTENSITY_ADJUST
    812  0b87		       56 56		      ds	2,$58-4+PALETTE_INTENSITY_ADJUST
    813  0b89		       68 68 68 	      ds	3,$6A-4+PALETTE_INTENSITY_ADJUST
    814  0b8c		       78 78		      ds	2,$7A-4+PALETTE_INTENSITY_ADJUST
    815  0b8e		       88 88		      ds	2,$8A-4+PALETTE_INTENSITY_ADJUST	; deep blue
    816  0b90		       96 96 96 	      ds	3,$98-4+PALETTE_INTENSITY_ADJUST
    817  0b93		       a6 a6		      ds	2,$A8-4+PALETTE_INTENSITY_ADJUST
    818  0b95		       b6 b6		      ds	2,$B8-4+PALETTE_INTENSITY_ADJUST
    819  0b97		       c6 c6		      ds	2,$C8-4+PALETTE_INTENSITY_ADJUST
    820  0b99		       d6 d6		      ds	2,$D8-4+PALETTE_INTENSITY_ADJUST
    821  0b9b		       e6 e6		      ds	2,$E8-4+PALETTE_INTENSITY_ADJUST
    822  0b9d
    823  0b9d							; PAL...
    824  0b9d
    825  0b9d		       26 26 26 	      ds	3,$28-4+PALETTE_INTENSITY_ADJUST
    826  0ba0		       46 46		      ds	2,$48-4+PALETTE_INTENSITY_ADJUST
    827  0ba2		       66 66 66 	      ds	3,$68-4+PALETTE_INTENSITY_ADJUST
    828  0ba5		       86 86		      ds	2,$88-4+PALETTE_INTENSITY_ADJUST
    829  0ba7		       a6 a6		      ds	2,$A8-4+PALETTE_INTENSITY_ADJUST
    830  0ba9		       c6 c6 c6 	      ds	3,$C8-4+PALETTE_INTENSITY_ADJUST
    831  0bac		       d6 d6 d6 	      ds	3,$D8-4+PALETTE_INTENSITY_ADJUST
    832  0baf		       b6 b6 b6 	      ds	3,$B8-4+PALETTE_INTENSITY_ADJUST
    833  0bb2		       96 96 96 	      ds	3,$98-4+PALETTE_INTENSITY_ADJUST
    834  0bb5		       76 76		      ds	2,$78-4+PALETTE_INTENSITY_ADJUST
    835  0bb7		       56 56 56 	      ds	3,$58-4+PALETTE_INTENSITY_ADJUST
    836  0bba		       36 36 36 	      ds	3,$38-4+PALETTE_INTENSITY_ADJUST
    837  0bbd
    838  0bbd
    839  0bbd
    840  0bbd
    841  0bbd
      0  0bbd					      DEFINE_SUBROUTINE	FixColours
      1  0bbd		       00 01	   BANK_FixColours =	_CURRENT_BANK
      2  0bbd					      SUBROUTINE
      3  0bbd				   FixColours
    843  0bbd							; USES OVERLAY "ColourFixer"
    844  0bbd
    845  0bbd		       a4 96		      ldy	BoardScrollY
    846  0bbf		       cc fa f3 	      cpy	LastYScroll
    847  0bc2		       f0 33		      beq	BandsNotChanged
    848  0bc4		       8c fa f7 	      sty	LastYScroll+RAM_WRITE
    849  0bc7
    850  0bc7		       a5 80		      lda	Platform
    851  0bc9		       29 02		      and	#%10
    852  0bcb		       0a		      asl
    853  0bcc		       0a		      asl
    854  0bcd		       0a		      asl
    855  0bce		       0a		      asl
    856  0bcf		       85 db		      sta	PlatformBase
    857  0bd1
    858  0bd1		       ad f8 f3 	      lda	BandOffset
    859  0bd4		       65 96		      adc	BoardScrollY
    860  0bd6		       85 dc		      sta	BandOffsetTemp
    861  0bd8
    862  0bd8
    863  0bd8		       a2 07		      ldx	#SCREEN_LINES-1
    864  0bda		       86 3e	   LoopBankLines stx	SET_BANK_RAM
    865  0bdc
    866  0bdc		       8a		      txa
    867  0bdd		       18		      clc
    868  0bde		       65 dc		      adc	BandOffsetTemp
    869  0be0		       29 1f		      and	#31
    870  0be2		       65 db		      adc	PlatformBase
    871  0be4		       a8		      tay
    872  0be5
    873  0be5		       b9 7d f3 	      lda	ColourBandsGreen,y
    874  0be8		       8d fc f7 	      sta	Colour_B + RAM_WRITE
    875  0beb
    876  0beb		       a4 cb		      ldy	FadeComplete
    877  0bed		       f0 02		      beq	writeActualCol
    878  0bef		       a9 00		      lda	#0
    879  0bf1		       8d 86 f4    writeActualCol sta	Colour_B_Actual + RAM_WRITE
    880  0bf4
    881  0bf4		       ca		      dex
    882  0bf5		       10 e3		      bpl	LoopBankLines
    883  0bf7		       60	   BandsNotChanged rts
    884  0bf8
    885  0bf8		       14	   BandOffset .byte.b	20
    886  0bf9		       ff	   ExistingFrame .byte.b	-1
    887  0bfa		       ff	   LastYScroll .byte.b	-1
    888  0bfb
    889  0bfb
    890  0bfb
    891  0bfb
    892  0bfb		       00	   Colour_A   .byte.b	0
    893  0bfc		       00	   Colour_B   .byte.b	0
    894  0bfd		       00	   Colour_C   .byte.b	0
    895  0bfe
    896  0bfe							; WARNING: DO NOT ALLOW A RTS AS LAST BYTE OF BANK, as it triggers a write at F400 access
    897  0bfe
      0  0bfe					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_OF_RAMBANK_CODE -- 1K"
      1  0bfe
      2  0bfe
      3  0bfe		       03 fe	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_RAMBANK_CODE -- 1K (1K) SIZE =  $3fe , FREE= $2
      4  0bfe					      ECHO	"ROM_SHADOW_OF_RAMBANK_CODE -- 1K", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  0bfe				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  0bfe				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  0bfe				  -	      ERR
      8  0bfe					      endif
    899  0bfe
    900  0bfe							; Here there's another 1K of usable ROM....
    901  0bfe							; Anything here is ONLY accessible if the bank is switched in as a ROM bank
    902  0bfe							; WE CAN'T HAVE ANYTHING REQUIRED IN THE ROM_SHADOW (IN RAM) IN THIS HALF
    903  0bfe
      0  0bfe					      CHECK_BANK_SIZE	"ROM_SHADOW_OF_RAMBANK_CODE -- full 2K"
      1  0bfe		       03 fe	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_RAMBANK_CODE -- full 2K (2K) SIZE =  $3fe , FREE= $402
      2  0bfe					      ECHO	"ROM_SHADOW_OF_RAMBANK_CODE -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  0bfe				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  0bfe				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  0bfe				  -	      ERR
      6  0bfe					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_ROM_SHADOW_DRAWBUFFERS.asm LEVEL 2 PASS 3
      0  0bfe					      include	"BANK_ROM_SHADOW_DRAWBUFFERS.asm"
      1  0bfe							;    Sokoboo - a Sokoban implementation
      2  0bfe							;    using a generic tile-based display engine for the Atari 2600
      3  0bfe							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  0bfe							;
      5  0bfe							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  0bfe							;
      7  0bfe							;    Code related to the generic tile-based display engine was developed by
      8  0bfe							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  0bfe							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  0bfe							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  0bfe							;
     12  0bfe							;    Code related to music and sound effects uses the TIATracker music player
     13  0bfe							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  0bfe							;    directory for Apache licensing details.
     15  0bfe							;
     16  0bfe							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  0bfe							;    See the copyright notices in the License directory for a list of level
     18  0bfe							;    contributors.
     19  0bfe							;
     20  0bfe							;    Except where otherwise indicated, this software is released under the
     21  0bfe							;    following licensing arrangement...
     22  0bfe							;
     23  0bfe							;    This program is free software: you can redistribute it and/or modify
     24  0bfe							;    it under the terms of the GNU General Public License as published by
     25  0bfe							;    the Free Software Foundation, either version 3 of the License, or
     26  0bfe							;    (at your option) any later version.
     27  0bfe							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  0bfe
     29  0bfe							;    This program is distributed in the hope that it will be useful,
     30  0bfe							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  0bfe							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  0bfe							;    GNU General Public License for more details.
     33  0bfe
     34  0bfe							;------------------------------------------------------------------------------
     35  0bfe							;##############################################################################
     36  0bfe							;------------------------------------------------------------------------------
     37  0bfe
      0  0bfe					      NEWBANK	ROM_SHADOW_OF_BANK_DRAW_BUFFERS
      1  1250 ????				      SEG	ROM_SHADOW_OF_BANK_DRAW_BUFFERS
      2  1000					      ORG	ORIGIN
      3  1000					      RORG	$F000
      4  1000				   BANK_START SET	*
      5  1000				   ROM_SHADOW_OF_BANK_DRAW_BUFFERS SET	ORIGIN / 2048
      6  1000				   ORIGIN     SET	ORIGIN + 2048
      7  1000				   _CURRENT_BANK SET	ROM_SHADOW_OF_BANK_DRAW_BUFFERS
     39  1000
     40  1000							; NOTE: Access to these buffers must NOT overlap pages...
     41  1000							; NOTE: We get auto-initialisation of these variables from the ROM values by
     42  1000							; copying the whole bank into the RAM bank.  Neato.
     43  1000
     44  1000		       00 50	   DRAW_STACK_SIZE =	SCREEN_ARRAY_SIZE	; <-- TJ TRY CHANGING THIS TO (SAY) 15  (!!)
     45  1000
     46  1000
     47  1000
     48  1000		       00 00 00 00*DrawStack  ds	DRAW_STACK_SIZE,0	; a stack of character #'s to draw
     49  1050		       00 00 00 00*DrawFlag   ds	SCREEN_ARRAY_SIZE,0	; holds new character to draw at position
     50  10a0
      0  10a0					      OPTIONAL_PAGEBREAK	"ScreenBuffer", SCREEN_ARRAY_SIZE
     10  10a0					      LIST	ON
     52  10a0
     53  10a0							; D7 of ScreenBuffer indicates if a DirectDraw is to be used to draw this character
     54  10a0							; Note: this may actually cause two characters to be drawn -- for the price of one.  This is *exactly*
     55  10a0							; what we want to happen!
     56  10a0
     57  10a0		       00 00 00 00*ScreenBuffer ds	SCREEN_ARRAY_SIZE,0	; the char buffer for delta-drawing
      0  10f0					      CHECKPAGEX	ScreenBuffer, "ScreenBuffer"
      9  10f0					      LIST	ON
     59  10f0
     60  10f0							;------------------------------------------------------------------------------
     61  10f0							; RAM-BASED SUBROUTINES...
     62  10f0							; NOTE: When calling these routines, remember you are actually calling the ROM routine
     63  10f0							; as it is the ROM bank that is switched in.  The first thing to do to access the RAM
     64  10f0							; is to switch the appropriate RAM bank in.  It would be nicer to be able to direct-call
     65  10f0							; the RAM-based routine.
     66  10f0
     67  10f0
     68  10f0
     69  10f0							;------------------------------------------------------------------------------
     70  10f0
     71  10f0
     72  10f0		       60	   waitForDraw rts		; 6
     73  10f1
     74  10f1							;------------------------------------------------------------------------------
     75  10f1
      0  10f1					      DEFINE_SUBROUTINE	DrawStackUpdate	; @39✅
      1  10f1		       00 02	   BANK_DrawStackUpdate =	_CURRENT_BANK
      2  10f1					      SUBROUTINE
      3  10f1				   DrawStackUpdate
     77  10f1
     78  10f1							; Parse the DrawFlags buffer and create a draw stack
     79  10f1							; so that the actual draw doesn't need to scan for characters to draw.
     80  10f1
     81  10f1
     82  10f1							;@TJ -- let's see if we see any bad lag/shear in screen drawing without this wait in.
     83  10f1							; symptoms would be missing parts of screen when scrolling.
     84  10f1							; Gameplay (not visual) lag noticed - re-enabled 11/8/11
     85  10f1							; disabled for sokoban 27/7/2019
     86  10f1
     87  10f1							;lda DrawStackPointer
     88  10f1							;bpl waitForDraw		  ; Wait for previously not-drawn characters to be drawn
     89  10f1
     90  10f1		       ad 84 02 	      lda	INTIM	;4
     91  10f4		       c9 03		      cmp	#SEGTIME_BDS	;2
     92  10f6		       90 f8		      bcc	waitForDraw	;2/3
     93  10f8							; =>[39]+(9)+6rts = 54✅ when exit
     94  10f8
     95  10f8							; Now that all characters are drawn, recalculate/move sprite. Doing this here prevents the player
     96  10f8							; moving into the middle of dirt, or BOXs when pushing, or TARGETs when grabbing.
     97  10f8
     98  10f8							;		  sec		 already set
     99  10f8		       a5 9e		      lda	ManY	;3
    100  10fa		       e5 96		      sbc	BoardScrollY	;3
    101  10fc		       c9 08		      cmp	#SCREEN_LINES
    102  10fe		       b0 0b		      bcs	offy
    103  1100		       85 a0		      sta	ManDrawY	;3 = 9✅
    104  1102
    105  1102		       38		      sec		;2
    106  1103		       a5 9d		      lda	ManX	;3
    107  1105		       e5 97		      sbc	BoardScrollX	;3
    108  1107		       c9 0a		      cmp	#SCREEN_WIDTH	;2
    109  1109		       90 06		      bcc	onsc	;2/3 = 12(13)✅
    110  110b
    111  110b							; if the man is offscreen, we have a timing issue between the horizontal positioning code and the player
    112  110b							; draw code.  The following gets around this by setting the Y offscreen (causing the player draw code to
    113  110b							; blank the graphic) and leaving the X alone (so we don't see a brief flash in left of screen).
    114  110b
    115  110b		       a9 ff	   offy       lda	#-1	;SCREEN_LINES		     ;2
    116  110d		       85 a0		      sta	ManDrawY	;3
    117  110f		       d0 02		      bne	offsc
    118  1111
    119  1111		       85 9f	   onsc       sta	ManDrawX	;3
    120  1113				   offsc
    121  1113
    122  1113							;32✅ worst
    123  1113
      0  1113					      DEFINE_SUBROUTINE	AnimateCharReplacements2	; =38
      1  1113		       00 02	   BANK_AnimateCharReplacements2 =	_CURRENT_BANK
      2  1113					      SUBROUTINE
      3  1113				   AnimateCharReplacements2
    125  1113
    126  1113							; This manages character animation on a per-object basis.  Morph/animate these characters
    127  1113							; individually or as required.  Change will affect all characters of the same type in the
    128  1113							; visible display.
    129  1113
    130  1113		       e6 c5		      inc	animate_char_index	; 5
    131  1115		       a5 c5		      lda	animate_char_index	; 3
    132  1117		       4a		      lsr		; 2
    133  1118		       4a		      lsr
    134  1119		       29 03		      and	#3	; 2
    135  111b		       aa		      tax		; 2 = 14
    136  111c
    137  111c		       bd ec f1 	      lda	targetReplaceChar,x	; 4
    138  111f		       8d df f5 	      sta	ANIM_TARGET + RAM_WRITE	; 4 = 8
    139  1122							;lda targetReplaceChar2,x	      ; 4
    140  1122							;sta ANIM_TARGET2 + RAM_WRITE	      ; 4
    141  1122
    142  1122							;@54 worst
    143  1122
    144  1122		       a9 4f		      lda	#SCREEN_ARRAY_SIZE-1	;2
    145  1124		       85 c3		      sta	DSL	;3
    146  1126
    147  1126		       e6 86		      inc	ScreenDrawPhase	;5
    148  1128		       60		      rts		; 6 TEST allows segtime test to be smaller on next part
    149  1129							; ==> @70 worst
    150  1129
    151  1129							;---------------------------------------------------------------------------
    152  1129
      0  1129					      DEFINE_SUBROUTINE	DrawIntoStack	; @39✅
      1  1129		       00 02	   BANK_DrawIntoStack =	_CURRENT_BANK
      2  1129					      SUBROUTINE
      3  1129				   DrawIntoStack
    154  1129
    155  1129		       ba		      tsx		; 2
    156  112a		       86 db		      stx	save_SP	; 3
    157  112c		       a6 81		      ldx	DrawStackPointer	; 3
    158  112e		       9a		      txs		; 2 = 10
    159  112f
    160  112f		       a4 c3		      ldy	DSL	; 3
    161  1131
    162  1131							; @ 52✅
    163  1131
    164  1131							; worst-case DrawStackOne loop = 61 cycles per character (+11 for first one)
    165  1131							; + exit cost which is +10 cycles
    166  1131							; TJ: I count 63
    167  1131							;   + 14 for the wtf2 exit
    168  1131							;   + 22 for the end of loop exit
    169  1131
    170  1131							; This loops 80 times/frame and is called 1-2 times/frame, so any saving inside the loop will make up for a lot of overhead outside
    171  1131							; For 80 iterations that is 640 cycles, just for checking INTIM
    172  1131							; Worst case we would have ~5000. Though that will most likely never happen, we have to optimize for it, since
    173  1131							; it also will require a lot of CPU time for updating the screen data.
    174  1131
    175  1131							; TODO: optimize!
    176  1131							;
    177  1131							; idea #4: the mixed draw idea (two different characters have to be redrawn),
    178  1131							; first do a QuickDraw and then a SlowDraw, faster than two SlowDraws
    179  1131							; costs some detection time here, but saves ~240 cylces for drawing the two
    180  1131
    181  1131				   .loopDrawStack		; @100✅ from bottom of loop
    182  1131
    183  1131		       ad 84 02 	      lda	INTIM	; 4
    184  1134		       c9 04		      cmp	#SEGTIME_DSL	; 2
    185  1136		       90 4b		      bcc	.exitDrawStack	; 2(3)  + [costs 18 more to exit fully at .exit..]
    186  1138							; => full exit on 1st pass = 78✅ cycles
    187  1138							; => full exit on a single loop = 127✅ cycles
    188  1138
    189  1138							; @0✅
    190  1138
    191  1138		       b9 50 f0 	      lda	DrawFlag,y	; 4
    192  113b		       d9 a0 f0 	      cmp	ScreenBuffer,y	; 4		  Is the character already there the same as the new one?
    193  113e		       f0 16		      beq	.next0	; 2/3=10/11	  yes, so we don't draw anything
    194  1140							; @10✅
    195  1140
    196  1140							; Character is NOT the same. Figure out how it should be drawn.
    197  1140							; If it is in column 0 or 5 then it can be DirectDrawn (indirectly found by a A:A compare)
    198  1140							; If it is the same as its paired character (sharing same PF byte) then it can be DirectDrawn
    199  1140							; The top bit of the ScreenBuffer character indicates the DirectDrawn hint
    200  1140
    201  1140		       be 8c f1 	      ldx	PairedCharacter,y	; 4		  the "paired" character for this one
    202  1143		       dd 50 f0 	      cmp	DrawFlag,x	; 4		  same as partner character in new drawn screen?
    203  1146		       d0 05		      bne	.notPaired0	; 2(3)
    204  1148							; @20✅
    205  1148
    206  1148							; Consider two 'paired' characters. Either A:A or A:B
    207  1148							; When we're scanning, and we check the first, if they are NOT paired, then the second character
    208  1148							; can be considered in isolation -- its check comes later, will determine itself if the pair can be written
    209  1148							; If, however, the first character IS paired, then the write below will cause the second check to FAIL
    210  1148							; on the comparison, so the character will not be added to the draw stack. So our first character will
    211  1148							; do the job of drawing BOTH characters to the screen.
    212  1148
    213  1148		       9d a0 f4 	      sta	ScreenBuffer+RAM_WRITE,x	; 5		  mark paired character as drawn already (!!)
    214  114b		       09 80		      ora	#$80	; 2 =	7	  DirectDraw this character 'pair'
    215  114d							; @27✅
    216  114d							; In the case of columns 0 and 5, the X and Y registers will be the same -- no problemo, because
    217  114d							; the last write(below) marks the character as to be direct-drawn.
    218  114d
    219  114d				   .notPaired0		; @27✅ worst
    220  114d
    221  114d		       99 a0 f4 	      sta	ScreenBuffer+RAM_WRITE,y	; 5		  NEW character to draw + DirectDraw flag (128)
    222  1150
    223  1150							; The following 'pla' really just increments the draw-stack pointer.  Value is unimportant. Unusual!
    224  1150
    225  1150		       68		      pla		; 4		  ASSUMPTION IS WE DON'T OvERFLOW DRAW STACK
    226  1151		       98		      tya		; 2
    227  1152		       ba		      tsx		; 2		  << now X holds drawstackpointer
    228  1153		       9d 00 f4 	      sta	DrawStack+RAM_WRITE,x	; 5 = 18	  index of character to draw
    229  1156
    230  1156		       88	   .next0     dey		; 2
    231  1157		       30 21		      bmi	.finishedDrawStack	; 2(3)= 4/5
    232  1159							; @50✅
    233  1159							; unrolled 2nd loop:
    234  1159		       b9 50 f0 	      lda	DrawFlag,y	; 4
    235  115c		       d9 a0 f0 	      cmp	ScreenBuffer,y	; 4		  Is the character already there the same as the new one?
    236  115f		       f0 16		      beq	.next1	; 2(3) 	  yes, so we don't draw anything
    237  1161
    238  1161		       be 8c f1 	      ldx	PairedCharacter,y	; 4		  the "paired" character for this one
    239  1164		       dd 50 f0 	      cmp	DrawFlag,x	; 4		  same as partner character in new drawn screen?
    240  1167		       d0 05		      bne	.notPaired1	; 2(3)
    241  1169
    242  1169		       9d a0 f4 	      sta	ScreenBuffer+RAM_WRITE,x	; 5		  mark paired character as drawn already (!!)
    243  116c		       09 80		      ora	#$80	; 2 =	7	  DirectDraw this character 'pair'
    244  116e
    245  116e				   .notPaired1		; @77✅ worst
    246  116e
    247  116e		       99 a0 f4 	      sta	ScreenBuffer+RAM_WRITE,y	; 5		  NEW character to draw + DirectDraw flag (128)
    248  1171
    249  1171		       68		      pla		; 4		  ASSUMPTION IS WE DON'T OvERFLOW DRAW STACK
    250  1172		       98		      tya		; 2
    251  1173		       ba		      tsx		; 2
    252  1174		       9d 00 f4 	      sta	DrawStack+RAM_WRITE,x	; 5 = 18	  index of character to draw
    253  1177							; @95✅
    254  1177
    255  1177		       88	   .next1     dey		; 2
    256  1178		       10 b7		      bpl	.loopDrawStack	; 2(3)
    257  117a							; @100✅ --> @.loopDrawStack
    258  117a
    259  117a							;worst case: 111-4
    260  117a							;40 loops(-4), max. 2 calls(+20) -> -160+40=-120, +8 bytes
    261  117a
    262  117a							; THE FOLLOWING OPTIMISATION IS STUFFED IF PROCESSOBJSTACK is not first in the vector processor!
    263  117a
    264  117a				   .finishedDrawStack
    265  117a		       e6 86		      inc	ScreenDrawPhase	;5 =  5
    266  117c		       ba		      tsx		;2
    267  117d		       86 81		      stx	DrawStackPointer	;3
    268  117f
    269  117f		       a6 db		      ldx	save_SP	;3
    270  1181		       9a		      txs		;2 = 10
    271  1182		       60		      rts		;6 =  6
    272  1183
    273  1183				   .exitDrawStack
    274  1183		       84 c3		      sty	DSL	;3 =  3
    275  1185		       ba		      tsx		;2
    276  1186		       86 81		      stx	DrawStackPointer	;3
    277  1188		       a6 db		      ldx	save_SP	;3
    278  118a		       9a		      txs		;2 = 10
    279  118b		       60		      rts		;6 =  6
    280  118c
    281  118c				   PairedCharacter
    282  118c
    283  118c				   SOFF       SET	0
    284  118c					      REPEAT	SCREEN_LINES
    285  118c		       00 02 01 04*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  118c				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  118c					      REPEND
    285  1196		       0a 0c 0b 0e*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  1196				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  1196					      REPEND
    285  11a0		       14 16 15 18*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  11a0				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  11a0					      REPEND
    285  11aa		       1e 20 1f 22*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  11aa				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  11aa					      REPEND
    285  11b4		       28 2a 29 2c*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  11b4				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  11b4					      REPEND
    285  11be		       32 34 33 36*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  11be				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  11be					      REPEND
    285  11c8		       3c 3e 3d 40*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  11c8				   SOFF       SET	SOFF + SCREEN_WIDTH
    284  11c8					      REPEND
    285  11d2		       46 48 47 4a*	      .byte.b	SOFF,SOFF+2,SOFF+1,SOFF+4,SOFF+3,SOFF+5,SOFF+7,SOFF+6,SOFF+9,SOFF+8
    286  11d2				   SOFF       SET	SOFF + SCREEN_WIDTH
    287  11dc					      REPEND
    288  11dc
    289  11dc							;------------------------------------------------------------------------------
    290  11dc							; Gives character replacements used during screen drawing.
    291  11dc							; The character from the board is morphed via this array into an actual character
    292  11dc							; to draw.  This allows global animation and replacment of characters without
    293  11dc							; individual objects needing to do this.  Note, the draw-time replacement happens,
    294  11dc							; not board-time.
    295  11dc
      0  11dc					      DEFINE_SUBROUTINE	CharReplacement	; in RAM -- BANK_DRAW_BUFFERS
      1  11dc		       00 02	   BANK_CharReplacement =	_CURRENT_BANK
      2  11dc					      SUBROUTINE
      3  11dc				   CharReplacement
    297  11dc
    298  11dc							; Converts a character # to an animated creature type
    299  11dc							; The array is indexed by CHARACTER_...
    300  11dc
    301  11dc		       00		      .byte.b	CHARACTER_BLANK	;  0
    302  11dd		       01		      .byte.b	CHARACTER_SOIL	;  1
    303  11de		       02		      .byte.b	CHARACTER_BOX	;  2
    304  11df		       03	   ANIM_TARGET .byte.b	CHARACTER_TARGET	;  3  XOR'd to give flashing target squares
    305  11e0		       04		      .byte.b	CHARACTER_TARGET2	;  4
    306  11e1		       05		      .byte.b	CHARACTER_MANOCCUPIED	;  5
    307  11e2		       06		      .byte.b	CHARACTER_STEEL	;  6
    308  11e3		       07		      .byte.b	CHARACTER_RIVET	;  7
    309  11e4		       08		      .byte.b	CHARACTER_WALL	;  8
    310  11e5		       09		      .byte.b	CHARACTER_STRIPE
    311  11e6		       0a	   ANIM_TARGET2 .byte.b	CHARACTER_BOX_ON_TARGET	;  8	 box on target
    312  11e7							;		  .byte CHARACTER_BOX_ON_TARGET2
    313  11e7		       00		      .byte.b	CHARACTER_BLANK	;  9
    314  11e8		       0c		      .byte.b	CHARACTER_TARGET1
    315  11e9		       0d		      .byte.b	CHARACTER_TARGET3
    316  11ea		       0e		      .byte.b	CHARACTER_TARGET5
    317  11eb		       0f		      .byte.b	CHARACTER_TARGET7
    318  11ec
    319  11ec				  -	      if	DIGITS
    320  11ec				  -	      .byte	CHARACTER_0
    321  11ec				  -	      .byte	CHARACTER_1
    322  11ec				  -	      .byte	CHARACTER_2
    323  11ec				  -	      .byte	CHARACTER_3
    324  11ec				  -	      .byte	CHARACTER_4
    325  11ec				  -	      .byte	CHARACTER_5
    326  11ec				  -	      .byte	CHARACTER_6
    327  11ec				  -	      .byte	CHARACTER_7
    328  11ec				  -	      .byte	CHARACTER_8
    329  11ec				  -	      .byte	CHARACTER_9
    330  11ec					      endif
    331  11ec
    332  11ec				  -	      IF	(* - CharReplacement != CHARACTER_MAXIMUM)
    333  11ec				  -	      ECHO	"ERROR: Incorrect CharReplacement table!"
    334  11ec				  -	      ERR
    335  11ec					      ENDIF
      0  11ec					      CHECKPAGEX	CharReplacement, "CharReplacement in BANK_ROM_SHADOW_DRAWBUFFERS"
      9  11ec					      LIST	ON
    337  11ec
    338  11ec
    339  11ec
    340  11ec				   targetReplaceChar
    341  11ec		       0c		      .byte.b	CHARACTER_TARGET1
    342  11ed		       0d		      .byte.b	CHARACTER_TARGET3
    343  11ee		       0e		      .byte.b	CHARACTER_TARGET5
    344  11ef		       0f		      .byte.b	CHARACTER_TARGET7
    345  11f0
    346  11f0							;targetReplaceChar2
    347  11f0							;    .byte CHARACTER_BOX
    348  11f0							;    .byte CHARACTER_BOX
    349  11f0							;    .byte CHARACTER_BOX_ON_TARGET
    350  11f0							;    .byte CHARACTER_BOX_ON_TARGET
    351  11f0
    352  11f0							;------------------------------------------------------------------------------
    353  11f0
    354  11f0
      0  11f0					      OPTIONAL_PAGEBREAK	"ROW_BankChar", SCREEN_LINES * SCREEN_WIDTH
 PAGE BREAK INSERTED FOR  ROW_BankChar
 REQUESTED SIZE =  $50
 WASTED SPACE =  $10
 PAGEBREAK LOCATION =  $f200
     10  1200					      LIST	ON
      0  1200					      DEFINE_SUBROUTINE	ROW_BankChar
      1  1200		       00 02	   BANK_ROW_BankChar =	_CURRENT_BANK
      2  1200					      SUBROUTINE
      3  1200				   ROW_BankChar
    357  1200
    358  1200				   .BANK      SET	BANK_SCREENMARKII1
    359  1200					      REPEAT	SCREEN_LINES
    360  1200					      REPEAT	SCREEN_WIDTH
    361  1200		       00		      .byte.b	.BANK
    360  1200					      REPEND
    361  1201		       00		      .byte.b	.BANK
    360  1201					      REPEND
    361  1202		       00		      .byte.b	.BANK
    360  1202					      REPEND
    361  1203		       00		      .byte.b	.BANK
    360  1203					      REPEND
    361  1204		       00		      .byte.b	.BANK
    360  1204					      REPEND
    361  1205		       00		      .byte.b	.BANK
    360  1205					      REPEND
    361  1206		       00		      .byte.b	.BANK
    360  1206					      REPEND
    361  1207		       00		      .byte.b	.BANK
    360  1207					      REPEND
    361  1208		       00		      .byte.b	.BANK
    360  1208					      REPEND
    361  1209		       00		      .byte.b	.BANK
    362  120a					      REPEND
    363  120a				   .BANK      SET	.BANK + 1
    359  120a					      REPEND
    360  120a					      REPEAT	SCREEN_WIDTH
    361  120a		       01		      .byte.b	.BANK
    360  120a					      REPEND
    361  120b		       01		      .byte.b	.BANK
    360  120b					      REPEND
    361  120c		       01		      .byte.b	.BANK
    360  120c					      REPEND
    361  120d		       01		      .byte.b	.BANK
    360  120d					      REPEND
    361  120e		       01		      .byte.b	.BANK
    360  120e					      REPEND
    361  120f		       01		      .byte.b	.BANK
    360  120f					      REPEND
    361  1210		       01		      .byte.b	.BANK
    360  1210					      REPEND
    361  1211		       01		      .byte.b	.BANK
    360  1211					      REPEND
    361  1212		       01		      .byte.b	.BANK
    360  1212					      REPEND
    361  1213		       01		      .byte.b	.BANK
    362  1214					      REPEND
    363  1214				   .BANK      SET	.BANK + 1
    359  1214					      REPEND
    360  1214					      REPEAT	SCREEN_WIDTH
    361  1214		       02		      .byte.b	.BANK
    360  1214					      REPEND
    361  1215		       02		      .byte.b	.BANK
    360  1215					      REPEND
    361  1216		       02		      .byte.b	.BANK
    360  1216					      REPEND
    361  1217		       02		      .byte.b	.BANK
    360  1217					      REPEND
    361  1218		       02		      .byte.b	.BANK
    360  1218					      REPEND
    361  1219		       02		      .byte.b	.BANK
    360  1219					      REPEND
    361  121a		       02		      .byte.b	.BANK
    360  121a					      REPEND
    361  121b		       02		      .byte.b	.BANK
    360  121b					      REPEND
    361  121c		       02		      .byte.b	.BANK
    360  121c					      REPEND
    361  121d		       02		      .byte.b	.BANK
    362  121e					      REPEND
    363  121e				   .BANK      SET	.BANK + 1
    359  121e					      REPEND
    360  121e					      REPEAT	SCREEN_WIDTH
    361  121e		       03		      .byte.b	.BANK
    360  121e					      REPEND
    361  121f		       03		      .byte.b	.BANK
    360  121f					      REPEND
    361  1220		       03		      .byte.b	.BANK
    360  1220					      REPEND
    361  1221		       03		      .byte.b	.BANK
    360  1221					      REPEND
    361  1222		       03		      .byte.b	.BANK
    360  1222					      REPEND
    361  1223		       03		      .byte.b	.BANK
    360  1223					      REPEND
    361  1224		       03		      .byte.b	.BANK
    360  1224					      REPEND
    361  1225		       03		      .byte.b	.BANK
    360  1225					      REPEND
    361  1226		       03		      .byte.b	.BANK
    360  1226					      REPEND
    361  1227		       03		      .byte.b	.BANK
    362  1228					      REPEND
    363  1228				   .BANK      SET	.BANK + 1
    359  1228					      REPEND
    360  1228					      REPEAT	SCREEN_WIDTH
    361  1228		       04		      .byte.b	.BANK
    360  1228					      REPEND
    361  1229		       04		      .byte.b	.BANK
    360  1229					      REPEND
    361  122a		       04		      .byte.b	.BANK
    360  122a					      REPEND
    361  122b		       04		      .byte.b	.BANK
    360  122b					      REPEND
    361  122c		       04		      .byte.b	.BANK
    360  122c					      REPEND
    361  122d		       04		      .byte.b	.BANK
    360  122d					      REPEND
    361  122e		       04		      .byte.b	.BANK
    360  122e					      REPEND
    361  122f		       04		      .byte.b	.BANK
    360  122f					      REPEND
    361  1230		       04		      .byte.b	.BANK
    360  1230					      REPEND
    361  1231		       04		      .byte.b	.BANK
    362  1232					      REPEND
    363  1232				   .BANK      SET	.BANK + 1
    359  1232					      REPEND
    360  1232					      REPEAT	SCREEN_WIDTH
    361  1232		       05		      .byte.b	.BANK
    360  1232					      REPEND
    361  1233		       05		      .byte.b	.BANK
    360  1233					      REPEND
    361  1234		       05		      .byte.b	.BANK
    360  1234					      REPEND
    361  1235		       05		      .byte.b	.BANK
    360  1235					      REPEND
    361  1236		       05		      .byte.b	.BANK
    360  1236					      REPEND
    361  1237		       05		      .byte.b	.BANK
    360  1237					      REPEND
    361  1238		       05		      .byte.b	.BANK
    360  1238					      REPEND
    361  1239		       05		      .byte.b	.BANK
    360  1239					      REPEND
    361  123a		       05		      .byte.b	.BANK
    360  123a					      REPEND
    361  123b		       05		      .byte.b	.BANK
    362  123c					      REPEND
    363  123c				   .BANK      SET	.BANK + 1
    359  123c					      REPEND
    360  123c					      REPEAT	SCREEN_WIDTH
    361  123c		       06		      .byte.b	.BANK
    360  123c					      REPEND
    361  123d		       06		      .byte.b	.BANK
    360  123d					      REPEND
    361  123e		       06		      .byte.b	.BANK
    360  123e					      REPEND
    361  123f		       06		      .byte.b	.BANK
    360  123f					      REPEND
    361  1240		       06		      .byte.b	.BANK
    360  1240					      REPEND
    361  1241		       06		      .byte.b	.BANK
    360  1241					      REPEND
    361  1242		       06		      .byte.b	.BANK
    360  1242					      REPEND
    361  1243		       06		      .byte.b	.BANK
    360  1243					      REPEND
    361  1244		       06		      .byte.b	.BANK
    360  1244					      REPEND
    361  1245		       06		      .byte.b	.BANK
    362  1246					      REPEND
    363  1246				   .BANK      SET	.BANK + 1
    359  1246					      REPEND
    360  1246					      REPEAT	SCREEN_WIDTH
    361  1246		       07		      .byte.b	.BANK
    360  1246					      REPEND
    361  1247		       07		      .byte.b	.BANK
    360  1247					      REPEND
    361  1248		       07		      .byte.b	.BANK
    360  1248					      REPEND
    361  1249		       07		      .byte.b	.BANK
    360  1249					      REPEND
    361  124a		       07		      .byte.b	.BANK
    360  124a					      REPEND
    361  124b		       07		      .byte.b	.BANK
    360  124b					      REPEND
    361  124c		       07		      .byte.b	.BANK
    360  124c					      REPEND
    361  124d		       07		      .byte.b	.BANK
    360  124d					      REPEND
    361  124e		       07		      .byte.b	.BANK
    360  124e					      REPEND
    361  124f		       07		      .byte.b	.BANK
    362  1250					      REPEND
    363  1250				   .BANK      SET	.BANK + 1
    364  1250					      REPEND
    365  1250
      0  1250					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS"
      1  1250
      2  1250
      3  1250		       02 50	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_DRAW_BUFFERS (1K) SIZE =  $250 , FREE= $1b0
      4  1250					      ECHO	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  1250				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  1250				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  1250				  -	      ERR
      8  1250					      endif
    367  1250
    368  1250
      0  1250					      CHECK_BANK_SIZE	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS -- full 2K"
      1  1250		       02 50	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_DRAW_BUFFERS -- full 2K (2K) SIZE =  $250 , FREE= $5b0
      2  1250					      ECHO	"ROM_SHADOW_OF_BANK_DRAW_BUFFERS -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  1250				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  1250				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  1250				  -	      ERR
      6  1250					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_ROM_SHADOW_SCORING.asm LEVEL 2 PASS 3
      0  1250					      include	"BANK_ROM_SHADOW_SCORING.asm"
      1  1250							;    Sokoboo - a Sokoban implementation
      2  1250							;    using a generic tile-based display engine for the Atari 2600
      3  1250							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  1250							;
      5  1250							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  1250							;
      7  1250							;    Code related to the generic tile-based display engine was developed by
      8  1250							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  1250							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  1250							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  1250							;
     12  1250							;    Code related to music and sound effects uses the TIATracker music player
     13  1250							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  1250							;    directory for Apache licensing details.
     15  1250							;
     16  1250							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  1250							;    See the copyright notices in the License directory for a list of level
     18  1250							;    contributors.
     19  1250							;
     20  1250							;    Except where otherwise indicated, this software is released under the
     21  1250							;    following licensing arrangement...
     22  1250							;
     23  1250							;    This program is free software: you can redistribute it and/or modify
     24  1250							;    it under the terms of the GNU General Public License as published by
     25  1250							;    the Free Software Foundation, either version 3 of the License, or
     26  1250							;    (at your option) any later version.
     27  1250							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  1250
     29  1250							;    This program is distributed in the hope that it will be useful,
     30  1250							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  1250							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  1250							;    GNU General Public License for more details.
     33  1250
     34  1250							;------------------------------------------------------------------------------
     35  1250							;##############################################################################
     36  1250							;------------------------------------------------------------------------------
      0  1250					      NEWBANK	ROM_SHADOW_OF_BANK_SCORING
      1  1bc0 ????				      SEG	ROM_SHADOW_OF_BANK_SCORING
      2  1800					      ORG	ORIGIN
      3  1800					      RORG	$F000
      4  1800				   BANK_START SET	*
      5  1800				   ROM_SHADOW_OF_BANK_SCORING SET	ORIGIN / 2048
      6  1800				   ORIGIN     SET	ORIGIN + 2048
      7  1800				   _CURRENT_BANK SET	ROM_SHADOW_OF_BANK_SCORING
     38  1800
     39  1800
     40  1800		       00 9a	   SCORE_COL  =	$9a	;WHITE ;-2
     41  1800		       00 44	   SCORE_COL_HIGH_NTSC =	$44	; works for SECAM and NTSC
     42  1800		       00 66	   SCORE_COL_HIGH_PAL =	$66
     43  1800
     44  1800
     45  1800				   DigitVectorLOr
     46  1800		       31 3f 4d 38*	      .byte.b	<ZeroR-1, <OneR-1, <TwoR-1, <ThreeR-1, <FourR-1, <FiveR-1, <SixR-1, <SevenR-1, <EightR-1, <NineR-1
     47  180a		       00 07 0e 15	      .byte.b	<BLANKR-1, <DequalsR-1, <DplusR-1, <ClockR-1
     48  180e				   DigitVectorLO
     49  180e		       53 61 6e 5a*	      .byte.b	<ZeroL-1, <OneL-1, <TwoL-1, <ThreeL-1, <FourL-1, <FiveL-1, <SixL-1, <SevenL-1, <EightL-1, <NineL-1
     50  1818		       37		      .byte.b	<BLANKL-1
     51  1819
     52  1819
     53  1819		       00 0a	   ID_BLANK   =	10	; DO NOT MAKE 0
     54  1819		       00 0b	   ID_TARGET  =	11
     55  1819		       00 0c	   ID_EXTRA   =	12
     56  1819		       00 0d	   ID_CLOCK   =	13
     57  1819		       00 1b	   ID_HEAD    =	ID_BLANK+16+1
     58  1819
     59  1819							; score patch adresses:
     60  1819				   SMTblLSB
     61  1819				   SMTblTargets
     62  1819		       52 48		      .byte.b	SM_TARGET0+1-SM_BASE, SM_TARGET2+1-SM_BASE
     63  181b				   SMTblTime
     64  181b		       6e 60		      .byte.b	SM_Time0+1-SM_BASE, SM_Time2+1-SM_BASE
     65  181d				   SMTblScore
     66  181d		       1c 20 12 	      .byte.b	SMDIGIT5+1-SM_BASE, SMDIGIT3+1-SM_BASE, SMDIGIT1+1-SM_BASE
     67  1820				   SMTblMSB
     68  1820		       4d 43		      .byte.b	SM_TARGET1+1-SM_BASE, SM_TARGET3+1-SM_BASE
     69  1822		       65 59		      .byte.b	SM_Time1+1-SM_BASE, SM_Time3+1-SM_BASE
     70  1824		       23 17 07 	      .byte.b	SMDIGIT4+1-SM_BASE, SMDIGIT2+1-SM_BASE, SMDIGIT0+1-SM_BASE
     71  1827
     72  1827		       00 00	   SM_OFS_TARGETS =	SMTblTargets - SMTblLSB
     73  1827		       00 02	   SM_OFS_TIME =	SMTblTime - SMTblLSB
     74  1827		       00 04	   SM_OFS_SCORE =	SMTblScore - SMTblLSB
     75  1827
     76  1827				   CharVectorLO
     77  1827		       37		      .byte.b	<BLANKL-1
     78  1828		       c2 c2 c2 c2	      .byte.b	<CharA-1, <CharB-1, <CharC-1, <CharD-1
     79  182c		       c2 c2 c2 c2	      .byte.b	<CharE-1, <CharF-1, <CharG-1, <CharH-1
     80  1830		       c2 c2 b4 ad	      .byte.b	<CharI-1, <CharJ-1, <CharK-1, <CharL-1
     81  1834		       c2 c2 bb c2	      .byte.b	<CharM-1, <CharN-1, <CharO-1, <CharP-1
     82  1838							;    .byte   <OneL-1,	<TwoL-1,  <ThreeL-1,<FourL-1
     83  1838
     84  1838							; Digit shape definitions are at start of bank so that we don't have page boundary
     85  1838							; crossing issues.
     86  1838
     87  1838							;	  .byte 0	      ; required!
     88  1838
     89  1838		       00 07	   DIGIT_H    =	7	; height of a score digit
     90  1838
     91  1838		       00 00 00 00*BLANKL     ds	7,0
     92  183f
     93  183f
     94  183f
     95  183f				   NineL
     96  183f		       1e		      .byte.b	%00011110
     97  1840		       02		      .byte.b	%00000010
     98  1841		       02		      .byte.b	%00000010
     99  1842		       fe		      .byte.b	%11111110
    100  1843		       82		      .byte.b	%10000010
    101  1844		       82		      .byte.b	%10000010
    102  1845		       fe		      .byte.b	%11111110
    103  1846
    104  1846				   SixL
    105  1846		       fe		      .byte.b	%11111110
    106  1847		       82		      .byte.b	%10000010
    107  1848		       82		      .byte.b	%10000010
    108  1849		       fe		      .byte.b	%11111110
    109  184a		       80		      .byte.b	%10000000
    110  184b		       80		      .byte.b	%10000000
    111  184c		       f0		      .byte.b	%11110000
    112  184d
    113  184d							;    .byte %01111100
    114  184d							;    .byte %11000010
    115  184d							;    .byte %11000010
    116  184d							;    .byte %11111100
    117  184d							;    .byte %11000000
    118  184d							;    .byte %01100000
    119  184d							;    .byte %00111000
    120  184d				   EightL
    121  184d
    122  184d
    123  184d		       fe		      .byte.b	%11111110
    124  184e		       82		      .byte.b	%10000010
    125  184f		       82		      .byte.b	%10000010
    126  1850		       fe		      .byte.b	%11111110
    127  1851		       82		      .byte.b	%10000010
    128  1852		       82		      .byte.b	%10000010
    129  1853		       fe		      .byte.b	%11111110
    130  1854
    131  1854							;  .byte %01111100
    132  1854							;  .byte %10000110
    133  1854							;  .byte %10000110
    134  1854							;  .byte %01111100
    135  1854							;  .byte %01000110
    136  1854							;  .byte %01000110
    137  1854							;  .byte %00111100
    138  1854				   ZeroL
    139  1854							;  .byte %01111100
    140  1854							;  .byte %10000110
    141  1854							;  .byte %10000110
    142  1854							;  .byte %10000110
    143  1854							;  .byte %10000110
    144  1854							;  .byte %01000110
    145  1854							;  .byte %00111100
    146  1854
    147  1854		       fe		      .byte.b	%11111110
    148  1855		       82		      .byte.b	%10000010
    149  1856		       82		      .byte.b	%10000010
    150  1857		       82		      .byte.b	%10000010
    151  1858		       82		      .byte.b	%10000010
    152  1859		       82		      .byte.b	%10000010
    153  185a		       fe		      .byte.b	%11111110
    154  185b
    155  185b				   ThreeL
    156  185b		       fe		      .byte.b	%11111110
    157  185c		       02		      .byte.b	%00000010
    158  185d		       02		      .byte.b	%00000010
    159  185e		       1e		      .byte.b	%00011110
    160  185f		       02		      .byte.b	%00000010
    161  1860		       02		      .byte.b	%00000010
    162  1861		       fe		      .byte.b	%11111110
    163  1862				   OneL
    164  1862		       10		      .byte.b	%00010000
    165  1863		       10		      .byte.b	%00010000
    166  1864		       10		      .byte.b	%00010000
    167  1865		       10		      .byte.b	%00010000
    168  1866		       10		      .byte.b	%00010000
    169  1867		       10		      .byte.b	%00010000
    170  1868		       10		      .byte.b	%00010000
    171  1869
    172  1869				   SevenL
    173  1869
    174  1869		       10		      .byte.b	%00010000
    175  186a		       10		      .byte.b	%00010000
    176  186b		       10		      .byte.b	%00010000
    177  186c		       1e		      .byte.b	%00011110
    178  186d		       02		      .byte.b	%00000010
    179  186e		       02		      .byte.b	%00000010
    180  186f							;  .byte %11111110
    181  186f
    182  186f							;    .byte %00010000
    183  186f							;    .byte %00010000
    184  186f							;    .byte %00010000
    185  186f							;    .byte %00011000
    186  186f							;    .byte %00001100
    187  186f							;    .byte %10000110
    188  186f							;    ;.byte %11111110
    189  186f				   TwoL
    190  186f		       fe		      .byte.b	%11111110
    191  1870		       80		      .byte.b	%10000000
    192  1871		       80		      .byte.b	%10000000
    193  1872		       fe		      .byte.b	%11111110
    194  1873		       02		      .byte.b	%00000010
    195  1874		       02		      .byte.b	%00000010
    196  1875		       fe		      .byte.b	%11111110
    197  1876
    198  1876				   FiveL
    199  1876		       fe		      .byte.b	%11111110
    200  1877		       02		      .byte.b	%00000010
    201  1878		       02		      .byte.b	%00000010
    202  1879		       fe		      .byte.b	%11111110
    203  187a		       80		      .byte.b	%10000000
    204  187b		       80		      .byte.b	%10000000
    205  187c		       f0		      .byte.b	%11110000
    206  187d
    207  187d				   FourL
    208  187d		       10		      .byte.b	%00010000
    209  187e		       10		      .byte.b	%00010000
    210  187f		       10		      .byte.b	%00010000
    211  1880		       fe		      .byte.b	%11111110
    212  1881		       90		      .byte.b	%10010000
    213  1882		       90		      .byte.b	%10010000
    214  1883		       90		      .byte.b	%10010000
    215  1884
    216  1884
    217  1884				   ZL
    218  1884		       7f		      .byte.b	%01111111
    219  1885		       40		      .byte.b	%01000000
    220  1886		       40		      .byte.b	%01000000
    221  1887		       7f		      .byte.b	%01111111
    222  1888		       01		      .byte.b	%00000001
    223  1889		       01		      .byte.b	%00000001
    224  188a		       0f		      .byte.b	%00001111
    225  188b
    226  188b				   EL
    227  188b		       7f		      .byte.b	%01111111
    228  188c		       40		      .byte.b	%01000000
    229  188d		       40		      .byte.b	%01000000
    230  188e		       78		      .byte.b	%01111000
    231  188f		       40		      .byte.b	%01000000
    232  1890		       40		      .byte.b	%01000000
    233  1891		       7f		      .byte.b	%01111111
    234  1892
    235  1892				   RL
    236  1892		       48		      .byte.b	%01001000
    237  1893		       48		      .byte.b	%01001000
    238  1894		       48		      .byte.b	%01001000
    239  1895		       7f		      .byte.b	%01111111
    240  1896		       41		      .byte.b	%01000001
    241  1897		       41		      .byte.b	%01000001
    242  1898		       7f		      .byte.b	%01111111
    243  1899
    244  1899				   PL
    245  1899		       40		      .byte.b	%01000000
    246  189a		       40		      .byte.b	%01000000
    247  189b		       40		      .byte.b	%01000000
    248  189c		       7f		      .byte.b	%01111111
    249  189d		       41		      .byte.b	%01000001
    250  189e		       41		      .byte.b	%01000001
    251  189f		       7f		      .byte.b	%01111111
    252  18a0
    253  18a0				   AL
    254  18a0		       41		      .byte.b	%01000001
    255  18a1		       41		      .byte.b	%01000001
    256  18a2		       41		      .byte.b	%01000001
    257  18a3		       7f		      .byte.b	%01111111
    258  18a4		       41		      .byte.b	%01000001
    259  18a5		       41		      .byte.b	%01000001
    260  18a6		       7f		      .byte.b	%01111111
    261  18a7
    262  18a7				   GL
    263  18a7		       7f		      .byte.b	%01111111
    264  18a8		       41		      .byte.b	%01000001
    265  18a9		       41		      .byte.b	%01000001
    266  18aa		       4f		      .byte.b	%01001111
    267  18ab		       40		      .byte.b	%01000000
    268  18ac		       40		      .byte.b	%01000000
    269  18ad		       7f		      .byte.b	%01111111
    270  18ae
    271  18ae
    272  18ae				   CharL
    273  18ae		       7f		      .byte.b	%01111111
    274  18af		       40		      .byte.b	%01000000
    275  18b0		       41		      .byte.b	%01000001
    276  18b1		       40		      .byte.b	%01000000
    277  18b2		       40		      .byte.b	%01000000
    278  18b3		       40		      .byte.b	%01000000
    279  18b4		       40		      .byte.b	%01000000
    280  18b5
    281  18b5				   CharK
    282  18b5		       41		      .byte.b	%01000001
    283  18b6		       41		      .byte.b	%01000001
    284  18b7		       41		      .byte.b	%01000001
    285  18b8		       7f		      .byte.b	%01111111
    286  18b9		       48		      .byte.b	%01001000
    287  18ba		       48		      .byte.b	%01001000
    288  18bb		       48		      .byte.b	%01001000
    289  18bc
    290  18bc				   CharO
    291  18bc		       7f		      .byte.b	%01111111
    292  18bd		       41		      .byte.b	%01000001
    293  18be		       41		      .byte.b	%01000001
    294  18bf		       41		      .byte.b	%01000001
    295  18c0		       41		      .byte.b	%01000001
    296  18c1		       41		      .byte.b	%01000001
    297  18c2		       7f		      .byte.b	%01111111
    298  18c3
    299  18c3
    300  18c3							; level "name" characters (left only!):
    301  18c3
    302  18c3				   CharN
    303  18c3				   kCharK
    304  18c3				   CharH
    305  18c3				   CharA
    306  18c3				   CharJ
    307  18c3				   CharP
    308  18c3				   CharB
    309  18c3							;CharO
    310  18c3				   CharC
    311  18c3				   CharI
    312  18c3				   CharD
    313  18c3				   CharG
    314  18c3				   CharE
    315  18c3							;CharL:
    316  18c3				   CharF
    317  18c3				   CharM
    318  18c3		       00 00 00 00*	      ds	7,0
    319  18ca
    320  18ca				   charPlace
    321  18ca		       0c		      .byte.b	%00001100
    322  18cb		       0c		      .byte.b	%00001100
    323  18cc		       0c		      .byte.b	%00001100
    324  18cd		       0c		      .byte.b	%00001100
    325  18ce		       0c		      .byte.b	%00001100
    326  18cf		       00		      .byte.b	%00000000
    327  18d0		       0c		      .byte.b	%00001100
    328  18d1
    329  18d1							;-------------------------------------------------------------------------------------
    330  18d1				   PosTbl
    331  18d1		       40		      .byte.b	$40
    332  18d2		       31 22 13 04*	      .byte.b	$31, $22, $13, $04, $f5, $e6, $d7, $c8
    333  18da		       b9		      .byte.b	$b9
    334  18db
    335  18db
    336  18db							;------------------------------------------------------------------------------
    337  18db							; RAM-BASED SUBROUTINES...
    338  18db							; NOTE: When calling these routines, remember you are actually calling the ROM routine
    339  18db							; as it is the ROM bank that is switched in.  The first thing to do to access the RAM
    340  18db							; is to switch the appropriate RAM bank in.  It would be nicer to be able to direct-call
    341  18db							; the RAM-based routine.
    342  18db
    343  1900		       00 00 00 00*	      ALIGN	256	; so SM code needs no HI table
    344  1900
    345  1900		       f1 00	   SM_BASE    =	.
    346  1900
    347  1900							;#IF 0 ;{
    348  1900							;    DEFINE_SUBROUTINE Score3x3
    349  1900							;
    350  1900							;	  sta	  RESP0
    351  1900							;	   sta	   RESP1
    352  1900							;	   lda	   #$$000
    353  1900							;	    sta     GRP0
    354  1900							;	    lda     #$$009
    355  1900							;	    sta     GRP1
    356  1900							;	    lda     #$$202
    357  1900							;	    sta     ENABL
    358  1900							;	    nop
    359  1900							;	    nop
    360  1900							;	    nop
    361  1900							;	    lda     #$$016
    362  1900							;	    ldy     #$$100
    363  1900							;	    ldx     #$$109
    364  1900							;	    sta     GRP0    ; Critical time is right here
    365  1900							;	    stx     GRP1
    366  1900							;	    sty     GRP0
    367  1900							;	    sta     RESP0
    368  1900							;	    sta     RESP1
    369  1900							;	    ldx     #$$116
    370  1900							;	    lda     #$$209
    371  1900							;	    stx     GRP0
    372  1900							;	    sta     GRP1
    373  1900							;	    lda     #$$200
    374  1900							;	    sta     GRP0
    375  1900							;	    sta     RESP0
    376  1900							;	    sta     RESP1
    377  1900							;	    lda     #$$216
    378  1900							;	    nop
    379  1900							;	    sta     GRP0
    380  1900							;
    381  1900							;	      rts
    382  1900							;#ENDIF ;}
    383  1900
    384  1900
    385  1900							;------------------------------------------------------------------------------
    386  1900				   Score1x6Fix SUBROUTINE
      0  1900					      DEFINE_SUBROUTINE	DrawDigits1x6
      1  1900		       00 03	   BANK_DrawDigits1x6 =	_CURRENT_BANK
      2  1900					      SUBROUTINE
      3  1900				   DrawDigits1x6
    388  1900							;					     @07
    389  1900		       ba		      tsx		; 2
    390  1901
    391  1901		       20 02 f2 	      jsr	PrepareDrawDigits	;56 = 58    @65
    392  1904
    393  1904		       86 db		      stx	tmpStack	; 3 =	3
    394  1906
    395  1906				   LoopDraw1x6		;
    396  1906				   SMDIGIT0
    397  1906		       b9 31 f3 	      lda	ZeroR-1,y	; 4
    398  1909		       85 42		      sta	WSYNC	; 3
    399  190b							;---------------------------------------------------------------
    400  190b		       85 6a		      sta	HMOVE	; 3
      0  190d					      SLEEP	3	; 3 =	6
      1  190d				   .CYCLES    SET	3
      2  190d
      3  190d				  -	      IF	.CYCLES < 2
      4  190d				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  190d				  -	      ERR
      6  190d					      ENDIF
      7  190d
      8  190d					      IF	.CYCLES & 1
      9  190d					      IFNCONST	NO_ILLEGAL_OPCODES
     10  190d		       04 00		      nop	0
     11  190f				  -	      ELSE
     12  190f				  -	      bit	VSYNC
     13  190f					      ENDIF
     14  190f				   .CYCLES    SET	.CYCLES - 3
     15  190f					      ENDIF
     16  190f
     17  190f				  -	      REPEAT	.CYCLES / 2
     18  190f				  -	      nop
     19  190f					      REPEND
    402  190f		       85 5b		      sta	GRP0	; 3
    403  1911				   SMDIGIT1
    404  1911		       b9 53 f0 	      lda	ZeroL-1,y	; 4
    405  1914		       85 5c		      sta	GRP1	; 3
    406  1916				   SMDIGIT2
    407  1916		       b9 31 f3 	      lda	ZeroR-1,y	; 4
    408  1919		       85 5b		      sta	GRP0	; 3 = 17
    409  191b				   SMDIGIT5
    410  191b		       be 53 f0 	      ldx	ZeroL-1,y	; 4
    411  191e		       9a		      txs		; 2
    412  191f				   SMDIGIT3
    413  191f		       be 53 f0 	      ldx	ZeroL-1,y	; 4
    414  1922				   SMDIGIT4
    415  1922		       b9 31 f3 	      lda	ZeroR-1,y	; 4
    416  1925		       85 6b		      sta	HMCLR	; 3
    417  1927		       86 5c		      stx	GRP1	; 3
    418  1929		       85 5b		      sta	GRP0	; 3 = 23
    419  192b
    420  192b		       ba		      tsx		; 2
    421  192c		       86 5c		      stx	GRP1	; 3
    422  192e		       85 5b		      sta	GRP0	; 3 =	8
    423  1930
    424  1930		       88		      dey		; 2
      0  1931					      CHECKPAGE_BNE	LoopDraw1x6	;2/3= 5    @58/59
      8  1931					      LIST	ON
      9  1931		       d0 d3		      bne	LoopDraw1x6
    426  1933
    427  1933		       a6 db		      ldx	tmpStack	; 3
    428  1935		       9a		      txs		; 2
    429  1936				   ExitDigitKernel6
      0  1936					      SLEEP	3	; 3
      1  1936				   .CYCLES    SET	3
      2  1936
      3  1936				  -	      IF	.CYCLES < 2
      4  1936				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  1936				  -	      ERR
      6  1936					      ENDIF
      7  1936
      8  1936					      IF	.CYCLES & 1
      9  1936					      IFNCONST	NO_ILLEGAL_OPCODES
     10  1936		       04 00		      nop	0
     11  1938				  -	      ELSE
     12  1938				  -	      bit	VSYNC
     13  1938					      ENDIF
     14  1938				   .CYCLES    SET	.CYCLES - 3
     15  1938					      ENDIF
     16  1938
     17  1938				  -	      REPEAT	.CYCLES / 2
     18  1938				  -	      nop
     19  1938					      REPEND
    431  1938		       4c 77 f1 	      jmp	ExitDigitKernel	; 3 = 11    @69
    432  193b
    433  193b
    434  193b							;------------------------------------------------------------------------------
    435  193b				   Score2x4Fix SUBROUTINE
      0  193b					      DEFINE_SUBROUTINE	DrawDigits2x4
      1  193b		       00 03	   BANK_DrawDigits2x4 =	_CURRENT_BANK
      2  193b					      SUBROUTINE
      3  193b				   DrawDigits2x4
    437  193b
    438  193b
    439  193b							; Subroutine by Thomas Jentzsch.  Magic!
    440  193b							; This subroutine draws two 4-digit scores on the screen, side-by-side. Amazing!
    441  193b
    442  193b							;sta COLUBK
    443  193b
    444  193b		       20 02 f2 	      jsr	PrepareDrawDigits	;56 = 56    @63
    445  193e
    446  193e		       85 6a		      sta	HMOVE	; 3
      0  1940					      SLEEP	4	; 4  =  7
      1  1940				   .CYCLES    SET	4
      2  1940
      3  1940				  -	      IF	.CYCLES < 2
      4  1940				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  1940				  -	      ERR
      6  1940					      ENDIF
      7  1940
      8  1940				  -	      IF	.CYCLES & 1
      9  1940				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  1940				  -	      nop	0
     11  1940				  -	      ELSE
     12  1940				  -	      bit	VSYNC
     13  1940				  -	      ENDIF
     14  1940				  -.CYCLES    SET	.CYCLES - 3
     15  1940					      ENDIF
     16  1940
     17  1940					      REPEAT	.CYCLES / 2
     18  1940		       ea		      nop
     17  1940					      REPEND
     18  1941		       ea		      nop
     19  1942					      REPEND
    448  1942
    449  1942				   LoopDraw2x4		;	     @70
    450  1942				   SM_TARGET3
    451  1942		       b9 07 f3 	      lda	DequalsR-1,y	; 4		     G
    452  1945							;---------------------------------------------------------------
    453  1945		       85 5b		      sta	GRP0	; 3
    454  1947				   SM_TARGET2
    455  1947		       b9 53 f0 	      lda	ZeroL-1,y	; 4		     A
    456  194a		       85 5c		      sta	GRP1	; 3
    457  194c				   SM_TARGET1
    458  194c		       b9 31 f3 	      lda	ZeroR-1,y	; 4		     M
    459  194f		       85 5b		      sta	GRP0	; 3
    460  1951				   SM_TARGET0
    461  1951		       be 53 f0 	      ldx	ZeroL-1,y	; 4		     E
    462  1954		       85 50		      sta	RESP0	; 3 = 28    @22
    463  1956		       85 51		      sta	RESP1	; 3 =	3    @25
    464  1958				   SM_Time3
    465  1958		       b9 15 f3 	      lda	ClockR-1,y	; 4		     O
    466  195b		       86 5c		      stx	GRP1	; 3
    467  195d		       85 5b		      sta	GRP0	; 3
    468  195f				   SM_Time2
    469  195f		       b9 53 f0 	      lda	ZeroL-1,y	; 4		     V
    470  1962		       85 5c		      sta	GRP1	; 3
    471  1964				   SM_Time1
    472  1964		       b9 31 f3 	      lda	ZeroR-1,y	; 4		     E
    473  1967		       85 5b		      sta	GRP0	; 3
    474  1969		       85 50		      sta	RESP0	; 3 = 27    @52 (was 54)
    475  196b		       85 51		      sta	RESP1	; 3 =	3    @55
    476  196d				   SM_Time0
    477  196d		       b9 53 f0 	      lda	ZeroL-1,y	; 4		     R
    478  1970		       85 5c		      sta	GRP1	; 3
    479  1972		       85 5b		      sta	GRP0	; 3
    480  1974		       88		      dey		; 2
      0  1975					      CHECKPAGE_BNE	LoopDraw2x4	;2/3=15    @70
      8  1975					      LIST	ON
      9  1975		       d0 cb		      bne	LoopDraw2x4
    482  1977
    483  1977				   ExitDigitKernel		;	     @69
    484  1977		       84 5b		      sty	GRP0	; 3
    485  1979		       84 5c		      sty	GRP1	; 3
    486  197b							;---------------------------------------------------------------
    487  197b		       84 5b		      sty	GRP0	; 3	     @02
    488  197d
    489  197d							; Contribution by Thomas Jentzsch
    490  197d							; Rewrite/Optimised for single sprite AD
    491  197d
    492  197d		       a6 9f		      ldx	ManDrawX	; 3
    493  197f		       bd d1 f0 	      lda	PosTbl,x	; 4
    494  1982		       85 60		      sta	HMP0	; 3
    495  1984		       29 0f		      and	#$0f	; 2
    496  1986		       f0 04		      beq	.zeroPos	; 2/3=15
    497  1988		       aa		      tax		; 2
    498  1989				   .loopWait
    499  1989		       ca		      dex		; 2
    500  198a		       d0 fd		      bne	.loopWait	; 2/3= 6
    501  198c				   .zeroPos
    502  198c		       a2 70		      ldx	#$70	; 2	     magic value #1 for Cosmic Ark stars
    503  198e		       85 50		      sta	RESP0	; 3 =	5    @22..67 (@look around!)
    504  1990
    505  1990		       85 42		      sta	WSYNC
    506  1992		       85 6a		      sta	HMOVE	; 3
    507  1994
    508  1994		       a5 b0		      lda	BGColour	; 3
    509  1996		       85 49		      sta	COLUBK	;3
    510  1998
    511  1998		       86 62		      stx	HMM0	; 3	     for extra life stars!
    512  199a
    513  199a		       a9 15		      lda	#%00010101	; 2	 double width missile, double width player
    514  199c		       85 44		      sta	NUSIZ0	; 3
    515  199e		       85 45		      sta	NUSIZ1
    516  19a0		       84 65		      sty	VDELP0	; 3	 y = 0!
    517  19a2
      0  19a2					      SLEEP	5
      1  19a2				   .CYCLES    SET	5
      2  19a2
      3  19a2				  -	      IF	.CYCLES < 2
      4  19a2				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  19a2				  -	      ERR
      6  19a2					      ENDIF
      7  19a2
      8  19a2					      IF	.CYCLES & 1
      9  19a2					      IFNCONST	NO_ILLEGAL_OPCODES
     10  19a2		       04 00		      nop	0
     11  19a4				  -	      ELSE
     12  19a4				  -	      bit	VSYNC
     13  19a4					      ENDIF
     14  19a4				   .CYCLES    SET	.CYCLES - 3
     15  19a4					      ENDIF
     16  19a4
     17  19a4					      REPEAT	.CYCLES / 2
     18  19a4		       ea		      nop
     19  19a5					      REPEND
    519  19a5
    520  19a5		       a5 a2		      lda	ManLastDirection	; 3
    521  19a7		       85 4b		      sta	REFP0	; 3
    522  19a9
    523  19a9							;sta WSYNC		  ; 3
    524  19a9		       60		      rts		; 6	     @21
    525  19aa
    526  19aa							;------------------------------------------------------------------------------
    527  19aa				   Score3x2Fix SUBROUTINE
      0  19aa					      DEFINE_SUBROUTINE	DrawDigits3x2
      1  19aa		       00 03	   BANK_DrawDigits3x2 =	_CURRENT_BANK
      2  19aa					      SUBROUTINE
      3  19aa				   DrawDigits3x2
    529  19aa							;					     @07
    530  19aa		       a9 16		      lda	#%010110	; 2
    531  19ac		       a0 ef		      ldy	#$f0-1	; 2		     moved slightly out of center to match 1x6 display position
    532  19ae		       20 08 f2 	      jsr	PrepareDrawDigits2	;49 = 53    @60
    533  19b1
    534  19b1		       a9 00		      lda	#0
    535  19b3		       85 66		      sta	VDELP1
    536  19b5				   LoopDraw3x2		;
    537  19b5		       85 42		      sta	WSYNC	; 3
    538  19b7							;---------------------------------------------------------------
    539  19b7		       85 6a		      sta	HMOVE	; 3 =	3
    540  19b9		       b9 c2 f0 	      lda	CharP-1,y	; 4
    541  19bc		       85 5b		      sta	GRP0	; 3
    542  19be				   SMPLAYER
    543  19be		       b9 3f f3 	      lda	OneR-1,y	; 4
    544  19c1		       85 5c		      sta	GRP1	; 3 = 14    @17
    545  19c3		       b9 c9 f0 	      lda	charPlace-1,y	; 4
    546  19c6				   SMMEN
    547  19c6		       be 38 f3 	      ldx	ThreeR-1,y	; 4 =	8
      0  19c9					      SLEEP	5	;   =	5
      1  19c9				   .CYCLES    SET	5
      2  19c9
      3  19c9				  -	      IF	.CYCLES < 2
      4  19c9				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  19c9				  -	      ERR
      6  19c9					      ENDIF
      7  19c9
      8  19c9					      IF	.CYCLES & 1
      9  19c9					      IFNCONST	NO_ILLEGAL_OPCODES
     10  19c9		       04 00		      nop	0
     11  19cb				  -	      ELSE
     12  19cb				  -	      bit	VSYNC
     13  19cb					      ENDIF
     14  19cb				   .CYCLES    SET	.CYCLES - 3
     15  19cb					      ENDIF
     16  19cb
     17  19cb					      REPEAT	.CYCLES / 2
     18  19cb		       ea		      nop
     19  19cc					      REPEND
    549  19cc		       85 5b		      sta	GRP0	; 3
    550  19ce				   SMLEVELX
    551  19ce		       b9 c2 f0 	      lda	CharA-1,y	; 4
    552  19d1		       85 6b		      sta	HMCLR	; 3 = 10    @40
    553  19d3		       86 5c		      stx	GRP1	; 3 =	3    @43
    554  19d5		       85 5b		      sta	GRP0	; 3
    555  19d7				   SMLEVEL
    556  19d7		       b9 3f f3 	      lda	OneR-1,y	; 4
    557  19da		       85 5c		      sta	GRP1	; 3 = 10    @53
    558  19dc
    559  19dc		       88		      dey		; 2
      0  19dd					      CHECKPAGE_BNE	LoopDraw3x2	;2/3= 5    @58
      8  19dd					      LIST	ON
      9  19dd		       d0 d6		      bne	LoopDraw3x2
    561  19df							;					     @57
      0  19df					      SLEEP	3	; 3
      1  19df				   .CYCLES    SET	3
      2  19df
      3  19df				  -	      IF	.CYCLES < 2
      4  19df				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  19df				  -	      ERR
      6  19df					      ENDIF
      7  19df
      8  19df					      IF	.CYCLES & 1
      9  19df					      IFNCONST	NO_ILLEGAL_OPCODES
     10  19df		       04 00		      nop	0
     11  19e1				  -	      ELSE
     12  19e1				  -	      bit	VSYNC
     13  19e1					      ENDIF
     14  19e1				   .CYCLES    SET	.CYCLES - 3
     15  19e1					      ENDIF
     16  19e1
     17  19e1				  -	      REPEAT	.CYCLES / 2
     18  19e1				  -	      nop
     19  19e1					      REPEND
    563  19e1		       4c 36 f1 	      jmp	ExitDigitKernel6	; 9 = 12    @69  'BEQ' WAS A DANGEROUS ASSUMPTION OF STATUS FLAG!!
    564  19e4
    565  19e4
    566  19e4							;------------------------------------------------------------------------------
    567  19e4
    568  19e4				   ScoreKernelLo
    569  19e4		       3b		      .byte.b	<Score2x4Fix	; TARGETs, time
    570  19e5		       00		      .byte.b	<Score1x6Fix	; score
    571  19e6		       aa		      .byte.b	<Score3x2Fix	; player, lives, level
    572  19e7		       00		      .byte.b	<Score1x6Fix	; high score
    573  19e8
      0  19e8					      CHECKPAGE	DrawDigits1x6	; AD: the jump requires all in the same page, so let's enforce that
      8  19e8					      LIST	ON
    575  19e8
    576  19e8							;------------------------------------------------------------------------------
    577  19e8
      0  19e8					      DEFINE_SUBROUTINE	DrawDigits
      1  19e8		       00 03	   BANK_DrawDigits =	_CURRENT_BANK
      2  19e8					      SUBROUTINE
      3  19e8				   DrawDigits
    579  19e8
    580  19e8				   VblankLoopGame
    581  19e8		       ac 84 02 	      ldy	INTIM
    582  19eb		       d0 fb		      bne	VblankLoopGame
    583  19ed
    584  19ed					      IF	WAIT_FOR_INITIAL_DRAW
    585  19ed		       a4 ae		      ldy	blankState
    586  19ef		       f0 02		      beq	state0
    587  19f1		       a0 02		      ldy	#2
    588  19f3				   state0
    589  19f3					      ENDIF
    590  19f3		       84 41		      sty	VBLANK	; 3	     <-- 0
    591  19f5							;lda scoringFlags	  ; 3
    592  19f5							;and #DISPLAY_FLAGS		    ; 2
    593  19f5							;tax			  ; 2
    594  19f5
    595  19f5		       a2 00		      ldx	#0
    596  19f7
    597  19f7							;    DEFINE_SUBROUTINE DrawDigit2
    598  19f7							;
    599  19f7							;    ; Generic interface to scoring routine
    600  19f7
    601  19f7		       bd e4 f1 	      lda	ScoreKernelLo,x	; 4
    602  19fa
    603  19fa		       85 42		      sta	WSYNC	; 3
    604  19fc		       8d 00 f6 	      sta	SMJUMP+1+RAM_WRITE	; 4
    605  19ff				   SMJUMP
    606  19ff		       4c 00 f1 	      jmp	DrawDigits1x6	; 3 =	7    @07
    607  1a02
    608  1a02							;---------------------------------------------------------------
    609  1a02
      0  1a02					      DEFINE_SUBROUTINE	PrepareDrawDigits
      1  1a02		       00 03	   BANK_PrepareDrawDigits =	_CURRENT_BANK
      2  1a02					      SUBROUTINE
      3  1a02				   PrepareDrawDigits
    611  1a02							;					     @13
    612  1a02		       a0 d1		      ldy	#$d1	; 2
    613  1a04		       a9 13		      lda	#%010011	; 2
    614  1a06		       85 66		      sta	VDELP1	; 3 =	7
    615  1a08				   PrepareDrawDigits2		;	    @17/20
    616  1a08		       84 65		      sty	VDELP0	; 3 =	3
    617  1a0a
    618  1a0a		       85 45		      sta	NUSIZ1	; 3
    619  1a0c		       85 44		      sta	NUSIZ0	; 3 =	6
    620  1a0e
    621  1a0e		       8d 4b 00 	      sta.w	REFP0	; 4		     bit 3 is always clear
    622  1a11		       85 50		      sta	RESP0	; 3	     @33/36
    623  1a13		       85 51		      sta	RESP1	; 3 = 10    @36/39
    624  1a15
    625  1a15		       84 60		      sty	HMP0	; 3
    626  1a17		       c8		      iny		; 2
    627  1a18		       84 61		      sty	HMP1	; 3 =	8
    628  1a1a				   SMCOLOR
    629  1a1a		       a0 9a		      ldy	#SCORE_COL	; 2
    630  1a1c		       84 46		      sty	COLUP0	; 3
    631  1a1e		       84 47		      sty	COLUP1	; 3 =	8
    632  1a20
    633  1a20		       a0 07		      ldy	#DIGIT_H	; 2
    634  1a22		       60		      rts		; 6 =	8
    635  1a23							; total: 27
    636  1a23
    637  1a23
    638  1a23							;------------------------------------------------------------------------------
      0  1a23					      DEFINE_SUBROUTINE	UpdateScore
      1  1a23		       00 03	   BANK_UpdateScore =	_CURRENT_BANK
      2  1a23					      SUBROUTINE
      3  1a23				   UpdateScore
    640  1a23							; a = added score value
    641  1a23
    642  1a23							; initially switch to score:
    643  1a23		       a0 01		      ldy	#DISPLAY_SCORE
    644  1a25		       84 db		      sty	newDisplay
    645  1a27
    646  1a27		       18		      clc
    647  1a28		       f8		      sed
    648  1a29		       a0 04		      ldy	#SM_OFS_SCORE
    649  1a2b				   .loopScore
    650  1a2b		       79 8f f3 	      adc	ScoreCurrent-SM_OFS_SCORE,y
    651  1a2e		       99 8f f7 	      sta	ScoreCurrent-SM_OFS_SCORE+RAM_WRITE,y
    652  1a31		       08		      php
    653  1a32							; *** bonus life every 500 points: ***
    654  1a32							;	  cpy #SM_OFS_SCORE+1
    655  1a32							;	  bne .skipBonusLife
    656  1a32							;	  tax
    657  1a32
    658  1a32							;	  and #$0f
    659  1a32							;	  beq .bonusLife		      ; 000?
    660  1a32							;	  cmp #$05
    661  1a32							;	  bne .noBonusLife		      ; 500?
    662  1a32							;.bonusLife:
    663  1a32							; add extra life, limited to 9
    664  1a32
    665  1a32							;	  lda ManCount
    666  1a32							;	  and #$0f
    667  1a32							;	  cmp #9
    668  1a32							;	  bcs .noBonusLife
    669  1a32							;	  inc ManCount
    670  1a32
    671  1a32							; bonus life has priority over score:
    672  1a32							;	  lda #DISPLAY_LIVES
    673  1a32							;	  sta newDisplay
    674  1a32							;lda #EXTRA_LIFE_TIMER
    675  1a32							;sta extraLifeTimer
    676  1a32
    677  1a32				   .noBonusLife
    678  1a32		       8a		      txa
    679  1a33				   .skipBonusLife
    680  1a33		       20 ae f2 	      jsr	SetupBCDPtr
    681  1a36		       28		      plp
    682  1a37		       a9 00		      lda	#0
    683  1a39		       b0 f0		      bcs	.loopScore
    684  1a3b		       d8		      cld
    685  1a3c
    686  1a3c							; switch display
    687  1a3c							;lda scoringFlags
    688  1a3c							;and #DISPLAY_FLAGS
    689  1a3c							;cmp newDisplay		      ; lower priority than current?
    690  1a3c							;beq .restartTime
    691  1a3c							;bcs .skipNew
    692  1a3c							;eor scoringFlags		      ; remove existing score mode
    693  1a3c							;ora newDisplay		      ; switch to new score mode
    694  1a3c							;sta scoringFlags
    695  1a3c				   .restartTime
    696  1a3c							;lda #SCORING_TIMER		      ; maybe always restart timer?
    697  1a3c							;sta scoringTimer
    698  1a3c				   .skipNew
    699  1a3c
    700  1a3c		       60		      rts
    701  1a3d
    702  1a3d							;---------------------------------------------------------------------------
    703  1a3d
      0  1a3d					      DEFINE_SUBROUTINE	SwapPlayers
      1  1a3d		       00 03	   BANK_SwapPlayers =	_CURRENT_BANK
      2  1a3d					      SUBROUTINE
      3  1a3d				   SwapPlayers
    705  1a3d
    706  1a3d							; assume no new high score:
    707  1a3d		       a0 ff		      ldy	#-1
    708  1a3f		       84 de		      sty	highScoreSK
    709  1a41
    710  1a41							; update highscore after last live:
    711  1a41							;lda ManCount
    712  1a41							;and #$0f			      ; player has lives left?
    713  1a41							;bne .playerAlive		      ; YES, so we don't check high score
    714  1a41
    715  1a41							; check for a new high score:
    716  1a41							;	  ldy #-1
    717  1a41		       18		      clc		; score has to be at least 1 bigger!
    718  1a42				   .loopCheckHighScore
    719  1a42		       c8		      iny
    720  1a43		       b9 93 f3 	      lda	ScoreCurrent,y
    721  1a46		       f9 9d f3 	      sbc	HighScore,y
    722  1a49		       98		      tya
    723  1a4a		       49 02		      eor	#2
    724  1a4c		       d0 f4		      bne	.loopCheckHighScore
    725  1a4e		       90 0d		      bcc	.noHighScore
    726  1a50
    727  1a50							; new high score, update:
    728  1a50		       a2 04		      ldx	#5-1
    729  1a52				   .loopSetHighScore
    730  1a52		       bd 93 f3 	      lda	ScoreCurrent,x
    731  1a55		       9d 9d f7 	      sta	HighScore+RAM_WRITE,x
    732  1a58		       95 de		      sta	highScoreSK,x
    733  1a5a		       ca		      dex
    734  1a5b		       10 f5		      bpl	.loopSetHighScore
    735  1a5d				   .noHighScore
    736  1a5d
    737  1a5d				   .playerAlive
    738  1a5d							;lda ManCount
    739  1a5d							;and #$f0			      ; other player has lives left?
    740  1a5d							;beq .otherPlayerDead		      ; NO, so we don't swap scores
    741  1a5d
    742  1a5d							; save the current player variables to the player's backup:
    743  1a5d		       a0 02		      ldy	#3-1
    744  1a5f				   .swapScore
    745  1a5f		       be 98 f3 	      ldx	PlayerScores,y
    746  1a62		       b9 93 f3 	      lda	ScoreCurrent,y
    747  1a65		       99 98 f7 	      sta	PlayerScores+RAM_WRITE,y
    748  1a68		       8a		      txa
    749  1a69		       99 93 f7 	      sta	ScoreCurrent+RAM_WRITE,y
    750  1a6c		       88		      dey
    751  1a6d		       10 f0		      bpl	.swapScore
    752  1a6f
    753  1a6f							; swap levelx and level:
    754  1a6f		       a2 01		      ldx	#1
    755  1a71				   .loopLevelXLevel
    756  1a71		       bc 9b f3 	      ldy	PlayerLevelX,x
    757  1a74		       b5 b1		      lda	levelX,x
    758  1a76		       9d 9b f7 	      sta	PlayerLevelX+RAM_WRITE,x
    759  1a79		       94 b1		      sty	levelX,x
    760  1a7b		       ca		      dex
    761  1a7c		       10 f3		      bpl	.loopLevelXLevel
    762  1a7e
    763  1a7e				   .otherPlayerDead
    764  1a7e		       60		      rts
    765  1a7f
    766  1a7f							;---------------------------------------------------------------------------
    767  1a7f
    768  1a7f				   HighScoreColTbl
    769  1a7f		       44 44		      .byte.b	SCORE_COL_HIGH_NTSC, SCORE_COL_HIGH_NTSC
    770  1a81		       66 66		      .byte.b	SCORE_COL_HIGH_PAL, SCORE_COL_HIGH_PAL
    771  1a83
      0  1a83					      DEFINE_SUBROUTINE	GeneralScoringSetups
      1  1a83		       00 03	   BANK_GeneralScoringSetups =	_CURRENT_BANK
      2  1a83					      SUBROUTINE
      3  1a83				   GeneralScoringSetups
    773  1a83
    774  1a83		       a0 04		      ldy	#SM_OFS_SCORE
    775  1a85				   .loopScore2
    776  1a85							;lda scoringFlags
    777  1a85							;and #DISPLAY_FLAGS
    778  1a85							;cmp #DISPLAY_HIGH
    779  1a85							;ldx Platform
    780  1a85							;lda HighScoreColTbl,x
    781  1a85							;tax
    782  1a85							;lda HighScore-SM_OFS_SCORE,y
    783  1a85							;bcs .showHighScore
    784  1a85		       a2 9a		      ldx	#SCORE_COL
    785  1a87		       b9 8f f3 	      lda	ScoreCurrent-SM_OFS_SCORE,y
    786  1a8a				   .showHighScore
    787  1a8a		       8e 1b f6 	      stx	SMCOLOR+1+RAM_WRITE
    788  1a8d		       20 ae f2 	      jsr	SetupBCDPtr
    789  1a90		       c0 07		      cpy	#SM_OFS_SCORE+3
    790  1a92		       90 f1		      bcc	.loopScore2
    791  1a94
    792  1a94							; display number of lives in leftmost digit of middle score XX nX XX
    793  1a94
    794  1a94							;lda ManCount
    795  1a94							;and #$0f
    796  1a94							;tay
    797  1a94							;lda DigitVectorLOr,y
    798  1a94							;sta SMMEN+1+RAM_WRITE
    799  1a94
    800  1a94							; modify player number pointer (Xp XX XX)
    801  1a94
    802  1a94							;ldy whichPlayer
    803  1a94							;lda DigitVectorLOr+1,y
    804  1a94							;sta SMPLAYER+1+RAM_WRITE
    805  1a94
    806  1a94							; fall through
    807  1a94
    808  1a94							;    ;---------------------------------------------------------------------------
    809  1a94
    810  1a94							; modify levelx character pointer (XX XX cX)
    811  1a94
    812  1a94							;ldx #<charPlace-1
    813  1a94							;lda levelDisplay
    814  1a94							;cmp #$80
    815  1a94							;and #$1f
    816  1a94							;tay
    817  1a94							;bcs .intermission
    818  1a94							;ldx CharVectorLO,y
    819  1a94							;ldy level
    820  1a94							;.intermission
    821  1a94							;stx SMLEVELX+1+RAM_WRITE
    822  1a94
    823  1a94							; modify level number pointer (XX XX Xl)
    824  1a94
    825  1a94							;lda DigitVectorLOr+1,y
    826  1a94							;sta SMLEVEL+1+RAM_WRITE
    827  1a94
    828  1a94							;---------------------------------------------------------------------------
    829  1a94
    830  1a94		       4c a5 f2 	      jmp	SetupTimePtr	; modify time pointers
    831  1a97
    832  1a97							;------------------------------------------------------------------------------
    833  1a97							;    DEFINE_SUBROUTINE SetupGameOverPtr
    834  1a97
    835  1a97							;		  ldy #8-1
    836  1a97							;.loopGameOver:
    837  1a97							;		  ldx SMGameOverOfs,y
    838  1a97							;		  lda SMGameOverPtr,y
    839  1a97							;		  sta SM_BASE+1+RAM_WRITE,x
    840  1a97							;		  dey
    841  1a97							;		  bpl .loopGameOver
    842  1a97
    843  1a97							;		  rts
    844  1a97
    845  1a97							;SMGameOverOfs:
    846  1a97							;		  .byte <SM_TARGET3-SM_BASE, <SM_TARGET2-SM_BASE
    847  1a97							;		  .byte <SM_TARGET1-SM_BASE, <SM_TARGET0-SM_BASE
    848  1a97							;		  .byte <SM_Time3-SM_BASE, <SM_Time2-SM_BASE
    849  1a97							;		  .byte <SM_Time1-SM_BASE, <SM_Time0-SM_BASE
    850  1a97							;SMGameOverPtr:
    851  1a97							;		  .byte <CharG-1, <CharAL-1, <CharM-1, <CharEL-1
    852  1a97							;		  .byte <CharO-1, <CharVL-1, <CharE-1, <CharRL-1
    853  1a97
    854  1a97							;------------------------------------------------------------------------------
    855  1a97
      0  1a97					      DEFINE_SUBROUTINE	DrawBCD_targetsRequired
      1  1a97		       00 03	   BANK_DrawBCD_targetsRequired =	_CURRENT_BANK
      2  1a97					      SUBROUTINE
      3  1a97				   DrawBCD_targetsRequired
    857  1a97							; Show current TARGET counter in the top left
    858  1a97
    859  1a97		       a0 00		      ldy	#SM_OFS_TARGETS
    860  1a99		       a5 b4		      lda	BCD_targetsRequired
    861  1a9b		       20 ae f2 	      jsr	SetupBCDPtr
    862  1a9e
    863  1a9e		       a9 b0		      lda	#ID_TARGET<<4	; if no extra targets, display the normal icon
    864  1aa0							;bit scoringFlags		      ;
    865  1aa0		       4c ae f2 	      jmp	SetupBCDPtr
    866  1aa3							;lda #ID_EXTRA<<4		      ; otherwise, display the extra icon
    867  1aa3							;bvc SetupBCDPtr
    868  1aa3							;ora #1			      ; display 1xx targets
    869  1aa3							;bne SetupBCDPtr		      ; unconditional
    870  1aa3
    871  1aa3							;------------------------------------------------------------------------------
      0  1aa3					      DEFINE_SUBROUTINE	DrawTime
      1  1aa3		       00 03	   BANK_DrawTime =	_CURRENT_BANK
      2  1aa3					      SUBROUTINE
      3  1aa3				   DrawTime
    873  1aa3
    874  1aa3							; mid-digit-change, but we may be required to flash/display
    875  1aa3		       a0 02		      ldy	#SM_OFS_TIME
    876  1aa5							;------------------------------------------------------------------------------
      0  1aa5					      DEFINE_SUBROUTINE	SetupTimePtr
      1  1aa5		       00 03	   BANK_SetupTimePtr =	_CURRENT_BANK
      2  1aa5					      SUBROUTINE
      3  1aa5				   SetupTimePtr
    878  1aa5
    879  1aa5		       a5 b5		      lda	BCD_moveCounter
    880  1aa7		       20 ae f2 	      jsr	SetupBCDPtr
    881  1aaa		       a5 b6		      lda	BCD_moveCounter+1
    882  1aac		       09 d0		      ora	#ID_CLOCK<<4
    883  1aae
    884  1aae							; fall through
    885  1aae
    886  1aae							;------------------------------------------------------------------------------
      0  1aae					      DEFINE_SUBROUTINE	SetupBCDPtr
      1  1aae		       00 03	   BANK_SetupBCDPtr =	_CURRENT_BANK
      2  1aae					      SUBROUTINE
      3  1aae				   SetupBCDPtr
    888  1aae
    889  1aae							; a = BCD value
    890  1aae							; y = SM table offset
    891  1aae
    892  1aae		       48		      pha
    893  1aaf		       29 0f		      and	#$0f
    894  1ab1		       aa		      tax
    895  1ab2		       bd 0e f0 	      lda	DigitVectorLO,x	; low nibble: left aligned chars
    896  1ab5		       be 19 f0 	      ldx	SMTblLSB,y
    897  1ab8		       9d 00 f5 	      sta	SM_BASE+RAM_WRITE,x
    898  1abb		       68		      pla
    899  1abc		       4a		      lsr
    900  1abd		       4a		      lsr
    901  1abe		       4a		      lsr
    902  1abf		       4a		      lsr
    903  1ac0		       aa		      tax
    904  1ac1		       bd 00 f0 	      lda	DigitVectorLOr,x	; high nibble: right aligned chars
    905  1ac4		       be 20 f0 	      ldx	SMTblMSB,y
    906  1ac7		       9d 00 f5 	      sta	SM_BASE+RAM_WRITE,x
    907  1aca
    908  1aca		       c8		      iny
    909  1acb
    910  1acb		       a5 be		      lda	ROM_Bank
    911  1acd				   RTS
    912  1acd		       60		      rts
    913  1ace
      0  1ace					      OPTIONAL_PAGEBREAK	"LeftDigits", (DIGIT_H*13)	; cannot index across page!
 PAGE BREAK INSERTED FOR  LeftDigits
 REQUESTED SIZE =  $5b
 WASTED SPACE =  $32
 PAGEBREAK LOCATION =  $f300
     10  1b00					      LIST	ON
    915  1b00
    916  1b00					      IF	<. = 0
    917  1b00		       00		      .byte.b	0	; required!
    918  1b01					      ENDIF
    919  1b01
    920  1b01				   BLANKR
    921  1b01		       00 00 00 00*	      .ds	DIGIT_H, 0
    922  1b08
    923  1b08				   DequalsR
    924  1b08		       00		      .byte.b	%00000000
    925  1b09		       00		      .byte.b	%00000000
    926  1b0a		       f0		      .byte.b	%11110000
    927  1b0b		       00		      .byte.b	%00000000
    928  1b0c		       f0		      .byte.b	%11110000
    929  1b0d		       00		      .byte.b	%00000000
    930  1b0e		       f0		      .byte.b	%11110000
    931  1b0f				   DplusR
    932  1b0f		       10		      .byte.b	%00010000
    933  1b10		       28		      .byte.b	%00101000
    934  1b11		       6c		      .byte.b	%01101100
    935  1b12		       c6		      .byte.b	%11000110
    936  1b13		       6c		      .byte.b	%01101100
    937  1b14		       28		      .byte.b	%00101000
    938  1b15		       10		      .byte.b	%00010000
    939  1b16
    940  1b16				   ClockR
    941  1b16		       00		      .byte.b	%00000000
    942  1b17		       48		      .byte.b	%01001000
    943  1b18		       fc		      .byte.b	%11111100
    944  1b19		       48		      .byte.b	%01001000
    945  1b1a		       48		      .byte.b	%01001000
    946  1b1b		       fc		      .byte.b	%11111100
    947  1b1c		       48		      .byte.b	%01001000
    948  1b1d				   NineR
    949  1b1d		       0f		      .byte.b	%00001111
    950  1b1e		       01		      .byte.b	%00000001
    951  1b1f		       01		      .byte.b	%00000001
    952  1b20		       7f		      .byte.b	%01111111
    953  1b21		       41		      .byte.b	%01000001
    954  1b22		       41		      .byte.b	%01000001
    955  1b23		       7f		      .byte.b	%01111111
    956  1b24				   SixR
    957  1b24		       7f		      .byte.b	%01111111
    958  1b25		       41		      .byte.b	%01000001
    959  1b26		       41		      .byte.b	%01000001
    960  1b27		       7f		      .byte.b	%01111111
    961  1b28		       40		      .byte.b	%01000000
    962  1b29		       40		      .byte.b	%01000000
    963  1b2a		       78		      .byte.b	%01111000
    964  1b2b				   EightR
    965  1b2b							;  .byte %00111110
    966  1b2b							;  .byte %01000011
    967  1b2b							;  .byte %01000011
    968  1b2b							;  .byte %00111110
    969  1b2b							;  .byte %00100011
    970  1b2b							;  .byte %00100011
    971  1b2b							;  .byte %00011110
    972  1b2b
    973  1b2b
    974  1b2b		       7f		      .byte.b	%01111111
    975  1b2c		       41		      .byte.b	%01000001
    976  1b2d		       41		      .byte.b	%01000001
    977  1b2e		       7f		      .byte.b	%01111111
    978  1b2f		       41		      .byte.b	%01000001
    979  1b30		       41		      .byte.b	%01000001
    980  1b31		       7f		      .byte.b	%01111111
    981  1b32
    982  1b32				   ZeroR
    983  1b32		       7f		      .byte.b	%01111111
    984  1b33		       41		      .byte.b	%01000001
    985  1b34		       41		      .byte.b	%01000001
    986  1b35		       41		      .byte.b	%01000001
    987  1b36		       41		      .byte.b	%01000001
    988  1b37		       41		      .byte.b	%01000001
    989  1b38		       7f		      .byte.b	%01111111
    990  1b39
    991  1b39							;	  .byte %00111110
    992  1b39							;	  .byte %01000011
    993  1b39							;	  .byte %01000011
    994  1b39							;	  .byte %01000011
    995  1b39							;	  .byte %01000011
    996  1b39							;	  .byte %00100011
    997  1b39							;	  .byte %00011110
    998  1b39				   ThreeR
    999  1b39		       7f		      .byte.b	%01111111
   1000  1b3a		       01		      .byte.b	%00000001
   1001  1b3b		       01		      .byte.b	%00000001
   1002  1b3c		       0f		      .byte.b	%00001111
   1003  1b3d		       01		      .byte.b	%00000001
   1004  1b3e		       01		      .byte.b	%00000001
   1005  1b3f		       7f		      .byte.b	%01111111
   1006  1b40				   OneR
   1007  1b40		       08		      .byte.b	%00001000
   1008  1b41		       08		      .byte.b	%00001000
   1009  1b42		       08		      .byte.b	%00001000
   1010  1b43		       08		      .byte.b	%00001000
   1011  1b44		       08		      .byte.b	%00001000
   1012  1b45		       08		      .byte.b	%00001000
   1013  1b46		       08		      .byte.b	%00001000
   1014  1b47
   1015  1b47				   SevenR
   1016  1b47		       08		      .byte.b	%00001000
   1017  1b48		       08		      .byte.b	%00001000
   1018  1b49		       08		      .byte.b	%00001000
   1019  1b4a		       0f		      .byte.b	%00001111
   1020  1b4b		       01		      .byte.b	%00000001
   1021  1b4c		       01		      .byte.b	%00000001
   1022  1b4d		       7f		      .byte.b	%01111111
   1023  1b4e
   1024  1b4e				   TwoR
   1025  1b4e		       7f		      .byte.b	%01111111
   1026  1b4f		       40		      .byte.b	%01000000
   1027  1b50		       40		      .byte.b	%01000000
   1028  1b51		       7f		      .byte.b	%01111111
   1029  1b52		       01		      .byte.b	%00000001
   1030  1b53		       01		      .byte.b	%00000001
   1031  1b54		       7f		      .byte.b	%01111111
   1032  1b55				   FiveR
   1033  1b55		       7f		      .byte.b	%01111111
   1034  1b56		       01		      .byte.b	%00000001
   1035  1b57		       01		      .byte.b	%00000001
   1036  1b58		       7f		      .byte.b	%01111111
   1037  1b59		       40		      .byte.b	%01000000
   1038  1b5a		       40		      .byte.b	%01000000
   1039  1b5b		       78		      .byte.b	%01111000
   1040  1b5c				   FourR
   1041  1b5c		       08		      .byte.b	%00001000
   1042  1b5d		       08		      .byte.b	%00001000
   1043  1b5e		       08		      .byte.b	%00001000
   1044  1b5f		       7f		      .byte.b	%01111111
   1045  1b60		       48		      .byte.b	%01001000
   1046  1b61		       48		      .byte.b	%01001000
   1047  1b62		       48		      .byte.b	%01001000
   1048  1b63
   1049  1b63							;CharAL:
   1050  1b63							;    .byte %11100110
   1051  1b63							;    .byte %11100110
   1052  1b63							;    .byte %11111110
   1053  1b63							;    .byte %11100110
   1054  1b63							;    .byte %11100110
   1055  1b63							;    .byte %01111100
   1056  1b63							;    .byte %00111000
   1057  1b63							;CharEL:
   1058  1b63							;    .byte %11111110
   1059  1b63							;    .byte %11111110
   1060  1b63							;    .byte %11100000
   1061  1b63							;    .byte %11100000
   1062  1b63							;    .byte %11111100
   1063  1b63							;    .byte %11100000
   1064  1b63							;    .byte %11111110
   1065  1b63							;CharRL:
   1066  1b63							;    .byte %11100110
   1067  1b63							;    .byte %11100110
   1068  1b63							;    .byte %11111100
   1069  1b63							;    .byte %11111100
   1070  1b63							;    .byte %11100110
   1071  1b63							;    .byte %11100110
   1072  1b63							;    .byte %11111100
   1073  1b63							;CharVL:
   1074  1b63							;    .byte %00111000
   1075  1b63							;    .byte %01111100
   1076  1b63							;    .byte %11100110
   1077  1b63							;    .byte %11100110
   1078  1b63							;    .byte %11100110
   1079  1b63							;    .byte %11100110
   1080  1b63							;    .byte %11100110
   1081  1b63
      0  1b63					      CHECKPAGE	BLANKR
      8  1b63					      LIST	ON
   1083  1b63
   1084  1b63							;---------------------------------------------------------------------------
   1085  1b63
      0  1b63					      DEFINE_SUBROUTINE	GameInitialise
      1  1b63		       00 03	   BANK_GameInitialise =	_CURRENT_BANK
      2  1b63					      SUBROUTINE
      3  1b63				   GameInitialise
   1087  1b63
   1088  1b63							; copy loaded SK high score into scoring RAM:
   1089  1b63		       a2 02		      ldx	#3-1
   1090  1b65				   .loopCopyHighScore
   1091  1b65		       b5 de		      lda	highScoreSK,x
   1092  1b67		       c9 ff		      cmp	#$ff
   1093  1b69		       f0 06		      beq	.noSaveKey
   1094  1b6b		       9d 9d f7 	      sta	HighScore+RAM_WRITE,x
   1095  1b6e		       ca		      dex
   1096  1b6f		       10 f4		      bpl	.loopCopyHighScore
   1097  1b71				   .noSaveKey
   1098  1b71
   1099  1b71							; clear both players scores
   1100  1b71		       a0 05		      ldy	#2*3-1
   1101  1b73		       a9 00		      lda	#0
   1102  1b75				   .loopClearScore
   1103  1b75		       99 93 f7 	      sta	ScoreCurrent+RAM_WRITE,y
   1104  1b78		       88		      dey
   1105  1b79		       10 fa		      bpl	.loopClearScore
   1106  1b7b
   1107  1b7b							; copy levelX and level for other player and SaveKey:
   1108  1b7b		       a5 b1		      lda	levelX
   1109  1b7d		       8d 9b f7 	      sta	PlayerLevelX+RAM_WRITE
   1110  1b80		       a5 e1		      lda	startingLevel
   1111  1b82		       8d 96 f7 	      sta	StartLevelX+RAM_WRITE
   1112  1b85		       a5 b2		      lda	level
   1113  1b87		       8d 9c f7 	      sta	PlayerLevel+RAM_WRITE
   1114  1b8a		       8d 97 f7 	      sta	StartLevel+RAM_WRITE
   1115  1b8d
   1116  1b8d
   1117  1b8d		       a9 00		      lda	#0
   1118  1b8f		       8d a2 f3 	      sta	SecondFrac
   1119  1b92
   1120  1b92		       60		      rts
   1121  1b93
   1122  1b93							;---------------------------------------------------------------------------
   1123  1b93
   1124  1b93		       00 00 00    ScoreCurrent ds	3, 0
   1125  1b96							; start levelx and level have to be after ScoreCurrent!
   1126  1b96		       00	   StartLevelX .byte.b	0
   1127  1b97		       00	   StartLevel .byte.b	0
   1128  1b98		       00 00 00    PlayerScores ds	3, 0
   1129  1b9b							; levelx and level have to be consecutive variables!
   1130  1b9b		       00	   PlayerLevelX .byte.b	0
   1131  1b9c		       00	   PlayerLevel .byte.b	0
   1132  1b9d		       00 00 00 00*HighScore  ds	3+2, 0	; two extra bytes to save code
   1133  1ba2
   1134  1ba2
   1135  1ba2		       00	   SecondFrac ds	1
   1136  1ba3
      0  1ba3					      DEFINE_SUBROUTINE	NotchTime
      1  1ba3		       00 03	   BANK_NotchTime =	_CURRENT_BANK
      2  1ba3					      SUBROUTINE
      3  1ba3				   NotchTime
   1138  1ba3
   1139  1ba3		       a6 80		      ldx	Platform
   1140  1ba5
   1141  1ba5		       18		      clc
   1142  1ba6		       ad a2 f3 	      lda	SecondFrac
   1143  1ba9		       69 01		      adc	#1
   1144  1bab		       dd bc f3 	      cmp	Notch,x
   1145  1bae		       90 08		      bcc	notched
   1146  1bb0
   1147  1bb0		       a9 00		      lda	#0
   1148  1bb2
   1149  1bb2		       e6 ce		      inc	seconds
   1150  1bb4		       d0 02		      bne	notched
   1151  1bb6		       e6 cf		      inc	seconds+1
   1152  1bb8
   1153  1bb8		       8d a2 f7    notched    sta	SecondFrac + RAM_WRITE
   1154  1bbb		       60		      rts
   1155  1bbc
   1156  1bbc		       39 39 39 32 Notch      .byte.b	57, 57, 57, 50
   1157  1bc0
   1158  1bc0							;------------------------------------------------------------------------------
   1159  1bc0
      0  1bc0					      CHECK_HALF_BANK_SIZE	"ROM_SHADOW_OF_BANK_SCORING"
      1  1bc0
      2  1bc0
      3  1bc0		       03 c0	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_SCORING (1K) SIZE =  $3c0 , FREE= $40
      4  1bc0					      ECHO	"ROM_SHADOW_OF_BANK_SCORING", "(1K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE/2 - .TEMP
      5  1bc0				  -	      if	( .TEMP ) > ROM_BANK_SIZE/2
      6  1bc0				  -	      ECHO	"HALF-BANK OVERFLOW @ ", * - ORIGIN
      7  1bc0				  -	      ERR
      8  1bc0					      endif
   1161  1bc0
   1162  1bc0							;------------------------------------------------------------------------------
   1163  1bc0
   1164  1bc0							; LEVEL DATA banks can go anywhere - *EXCEPT* for the same bank as the level
   1165  1bc0							; decoder.  Ironic, isn't it?	They calculate a constant -- MAX_LEVEL_SIZE
   1166  1bc0							; which is used as a buffer size inside UnpackLevel.  It's not important if
   1167  1bc0							; this is defined before or after, as once the levels have processed it will be
   1168  1bc0							; correct. Note, that levels should all be defined BEFORE *OR* AFTER the
   1169  1bc0							; UnpackLevel code -- but that they should not be both, nor in the same bank.
   1170  1bc0							; TODO: verify above is still valid
   1171  1bc0
   1172  1bc0
      0  1bc0					      CHECK_BANK_SIZE	"ROM_SHADOW_OF_BANK_SCORING -- full 2K"
      1  1bc0		       03 c0	   .TEMP      =	* - BANK_START
 ROM_SHADOW_OF_BANK_SCORING -- full 2K (2K) SIZE =  $3c0 , FREE= $440
      2  1bc0					      ECHO	"ROM_SHADOW_OF_BANK_SCORING -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  1bc0				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  1bc0				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  1bc0				  -	      ERR
      6  1bc0					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS_TABLES.asm LEVEL 2 PASS 3
      0  1bc0					      include	"BANK_LEVELS_TABLES.asm"
      1  1bc0							;    Sokoboo - a Sokoban implementation
      2  1bc0							;    using a generic tile-based display engine for the Atari 2600
      3  1bc0							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  1bc0							;
      5  1bc0							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  1bc0							;
      7  1bc0							;    Code related to the generic tile-based display engine was developed by
      8  1bc0							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  1bc0							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  1bc0							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  1bc0							;
     12  1bc0							;    Code related to music and sound effects uses the TIATracker music player
     13  1bc0							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  1bc0							;    directory for Apache licensing details.
     15  1bc0							;
     16  1bc0							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  1bc0							;    See the copyright notices in the License directory for a list of level
     18  1bc0							;    contributors.
     19  1bc0							;
     20  1bc0							;    Except where otherwise indicated, this software is released under the
     21  1bc0							;    following licensing arrangement...
     22  1bc0							;
     23  1bc0							;    This program is free software: you can redistribute it and/or modify
     24  1bc0							;    it under the terms of the GNU General Public License as published by
     25  1bc0							;    the Free Software Foundation, either version 3 of the License, or
     26  1bc0							;    (at your option) any later version.
     27  1bc0							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  1bc0
     29  1bc0							;    This program is distributed in the hope that it will be useful,
     30  1bc0							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  1bc0							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  1bc0							;    GNU General Public License for more details.
     33  1bc0
     34  1bc0							; level definitions
     35  1bc0							; Sample level definitions.
     36  1bc0							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  1bc0							; have as many banks as you like.
     38  1bc0
      0  1bc0					      NEWBANK	LEVELS_TABLES
      1  2284 ????				      SEG	LEVELS_TABLES
      2  2000					      ORG	ORIGIN
      3  2000					      RORG	$F000
      4  2000				   BANK_START SET	*
      5  2000				   LEVELS_TABLES SET	ORIGIN / 2048
      6  2000				   ORIGIN     SET	ORIGIN + 2048
      7  2000				   _CURRENT_BANK SET	LEVELS_TABLES
     40  2000
     41  2000
     42  2000							; The ordering here corresponds to the ordering when playing...
     43  2000
     44  2000					      align	256
      0  2000					      DEFINE_SUBROUTINE	LevelInfoLO
      1  2000		       00 04	   BANK_LevelInfoLO =	_CURRENT_BANK
      2  2000					      SUBROUTINE
      3  2000				   LevelInfoLO
     46  2000		       ff		      .byte.b	<(LEVEL__001_L-1)
     47  2001		       11		      .byte.b	<(LEVEL__001_R-1)
     48  2002		       1d		      .byte.b	<(LEVEL__002_L-1)
     49  2003		       36		      .byte.b	<(LEVEL__002_R-1)
     50  2004		       5e		      .byte.b	<(LEVEL__003_L-1)
     51  2005		       8a		      .byte.b	<(LEVEL__003_R-1)
     52  2006		       b4		      .byte.b	<(LEVEL__004_L-1)
     53  2007		       d7		      .byte.b	<(LEVEL__004_R-1)
     54  2008		       f3		      .byte.b	<(LEVEL__005_L-1)
     55  2009		       25		      .byte.b	<(LEVEL__005_R-1)
     56  200a		       64		      .byte.b	<(LEVEL__006_L-1)
     57  200b		       9f		      .byte.b	<(LEVEL__006_R-1)
     58  200c		       dd		      .byte.b	<(LEVEL__007_L-1)
     59  200d		       0a		      .byte.b	<(LEVEL__007_R-1)
     60  200e		       3d		      .byte.b	<(LEVEL__008_L-1)
     61  200f		       73		      .byte.b	<(LEVEL__008_R-1)
     62  2010		       a4		      .byte.b	<(LEVEL__009_L-1)
     63  2011		       d6		      .byte.b	<(LEVEL__009_R-1)
     64  2012		       06		      .byte.b	<(LEVEL__010_L-1)
     65  2013		       40		      .byte.b	<(LEVEL__010_R-1)
     66  2014		       73		      .byte.b	<(LEVEL__011_L-1)
     67  2015		       a6		      .byte.b	<(LEVEL__011_R-1)
     68  2016		       e0		      .byte.b	<(LEVEL__012_L-1)
     69  2017		       10		      .byte.b	<(LEVEL__012_R-1)
     70  2018		       4c		      .byte.b	<(LEVEL__013_L-1)
     71  2019		       8b		      .byte.b	<(LEVEL__013_R-1)
     72  201a		       be		      .byte.b	<(LEVEL__014_L-1)
     73  201b		       01		      .byte.b	<(LEVEL__014_R-1)
     74  201c		       44		      .byte.b	<(LEVEL__015_L-1)
     75  201d		       79		      .byte.b	<(LEVEL__015_R-1)
     76  201e		       be		      .byte.b	<(LEVEL__016_L-1)
     77  201f		       f5		      .byte.b	<(LEVEL__016_R-1)
     78  2020		       28		      .byte.b	<(LEVEL__017_L-1)
     79  2021		       72		      .byte.b	<(LEVEL__017_R-1)
     80  2022		       b5		      .byte.b	<(LEVEL__018_L-1)
     81  2023		       e9		      .byte.b	<(LEVEL__018_R-1)
     82  2024		       25		      .byte.b	<(LEVEL__019_L-1)
     83  2025		       60		      .byte.b	<(LEVEL__019_R-1)
     84  2026		       ff		      .byte.b	<(LEVEL__020_L-1)
     85  2027		       3e		      .byte.b	<(LEVEL__020_R-1)
     86  2028		       7e		      .byte.b	<(LEVEL__021_L-1)
     87  2029		       d4		      .byte.b	<(LEVEL__021_R-1)
     88  202a		       08		      .byte.b	<(LEVEL__022_L-1)
     89  202b		       4e		      .byte.b	<(LEVEL__022_R-1)
     90  202c		       8a		      .byte.b	<(LEVEL__023_L-1)
     91  202d		       cb		      .byte.b	<(LEVEL__023_R-1)
     92  202e		       0d		      .byte.b	<(LEVEL__024_L-1)
     93  202f		       5d		      .byte.b	<(LEVEL__024_R-1)
     94  2030		       a5		      .byte.b	<(LEVEL__025_L-1)
     95  2031		       e8		      .byte.b	<(LEVEL__025_R-1)
     96  2032		       27		      .byte.b	<(LEVEL__026_L-1)
     97  2033		       60		      .byte.b	<(LEVEL__026_R-1)
     98  2034		       a1		      .byte.b	<(LEVEL__027_L-1)
     99  2035		       df		      .byte.b	<(LEVEL__027_R-1)
    100  2036		       1d		      .byte.b	<(LEVEL__028_L-1)
    101  2037		       69		      .byte.b	<(LEVEL__028_R-1)
    102  2038		       b7		      .byte.b	<(LEVEL__029_L-1)
    103  2039		       fc		      .byte.b	<(LEVEL__029_R-1)
    104  203a		       40		      .byte.b	<(LEVEL__030_L-1)
    105  203b		       90		      .byte.b	<(LEVEL__030_R-1)
    106  203c		       e3		      .byte.b	<(LEVEL__031_L-1)
    107  203d		       29		      .byte.b	<(LEVEL__031_R-1)
    108  203e		       68		      .byte.b	<(LEVEL__032_L-1)
    109  203f		       a0		      .byte.b	<(LEVEL__032_R-1)
    110  2040		       e4		      .byte.b	<(LEVEL__033_L-1)
    111  2041		       2e		      .byte.b	<(LEVEL__033_R-1)
    112  2042		       6e		      .byte.b	<(LEVEL__034_L-1)
    113  2043		       ff		      .byte.b	<(LEVEL__034_R-1)
    114  2044		       48		      .byte.b	<(LEVEL__035_L-1)
    115  2045		       8d		      .byte.b	<(LEVEL__035_R-1)
    116  2046		       cd		      .byte.b	<(LEVEL__036_L-1)
    117  2047		       03		      .byte.b	<(LEVEL__036_R-1)
    118  2048		       49		      .byte.b	<(LEVEL__037_L-1)
    119  2049		       86		      .byte.b	<(LEVEL__037_R-1)
    120  204a		       cf		      .byte.b	<(LEVEL__038_L-1)
    121  204b		       17		      .byte.b	<(LEVEL__038_R-1)
    122  204c		       66		      .byte.b	<(LEVEL__039_L-1)
    123  204d		       b5		      .byte.b	<(LEVEL__039_R-1)
    124  204e		       0f		      .byte.b	<(LEVEL__040_L-1)
    125  204f		       56		      .byte.b	<(LEVEL__040_R-1)
    126  2050
    127  2050		       9d		      .byte.b	<(LEVEL__041_L-1)
    128  2051		       e7		      .byte.b	<(LEVEL__041_R-1)
    129  2052		       2e		      .byte.b	<(LEVEL__042_L-1)
    130  2053		       7c		      .byte.b	<(LEVEL__042_R-1)
    131  2054		       d4		      .byte.b	<(LEVEL__043_L-1)
    132  2055		       21		      .byte.b	<(LEVEL__043_R-1)
    133  2056		       6d		      .byte.b	<(LEVEL__044_L-1)
    134  2057		       a5		      .byte.b	<(LEVEL__044_R-1)
    135  2058		       f5		      .byte.b	<(LEVEL__045_L-1)
    136  2059		       43		      .byte.b	<(LEVEL__045_R-1)
    137  205a		       8d		      .byte.b	<(LEVEL__046_L-1)
    138  205b		       da		      .byte.b	<(LEVEL__046_R-1)
    139  205c		       1f		      .byte.b	<(LEVEL__047_L-1)
    140  205d		       75		      .byte.b	<(LEVEL__047_R-1)
    141  205e				  -	      if	0
    142  205e				  -	      .byte	<(LEVEL__048_L-1)
    143  205e				  -	      .byte	<(LEVEL__048_R-1)
    144  205e				  -	      .byte	<(LEVEL__049_L-1)
    145  205e				  -	      .byte	<(LEVEL__049_R-1)
    146  205e				  -
    147  205e				  -	      .byte	<(LEVEL__050_L-1)
    148  205e				  -	      .byte	<(LEVEL__050_R-1)
    149  205e				  -	      .byte	<(LEVEL__051_L-1)
    150  205e				  -	      .byte	<(LEVEL__051_R-1)
    151  205e				  -	      .byte	<(LEVEL__052_L-1)
    152  205e				  -	      .byte	<(LEVEL__052_R-1)
    153  205e				  -	      .byte	<(LEVEL__053_L-1)
    154  205e				  -	      .byte	<(LEVEL__053_R-1)
    155  205e				  -	      .byte	<(LEVEL__054_L-1)
    156  205e				  -	      .byte	<(LEVEL__054_R-1)
    157  205e				  -	      .byte	<(LEVEL__055_L-1)
    158  205e				  -	      .byte	<(LEVEL__055_R-1)
    159  205e				  -	      .byte	<(LEVEL__056_L-1)
    160  205e				  -	      .byte	<(LEVEL__056_R-1)
    161  205e				  -	      .byte	<(LEVEL__057_L-1)
    162  205e				  -	      .byte	<(LEVEL__057_R-1)
    163  205e				  -	      .byte	<(LEVEL__058_L-1)
    164  205e				  -	      .byte	<(LEVEL__058_R-1)
    165  205e				  -	      .byte	<(LEVEL__059_L-1)
    166  205e				  -	      .byte	<(LEVEL__059_R-1)
    167  205e				  -
    168  205e				  -	      .byte	<(LEVEL__060_R-1)
    169  205e				  -	      .byte	<(LEVEL__061_R-1)
    170  205e				  -	      .byte	<(LEVEL__061_L-1)
    171  205e				  -	      .byte	<(LEVEL__062_L-1)
    172  205e				  -	      .byte	<(LEVEL__062_R-1)
    173  205e				  -	      .byte	<(LEVEL__063_L-1)
    174  205e				  -	      .byte	<(LEVEL__063_R-1)
    175  205e				  -	      .byte	<(LEVEL__064_R-1)
    176  205e				  -	      .byte	<(LEVEL__064_L-1)
    177  205e				  -	      .byte	<(LEVEL__065_R-1)
    178  205e				  -	      .byte	<(LEVEL__065_L-1)
    179  205e				  -	      .byte	<(LEVEL__066_R-1)
    180  205e				  -	      .byte	<(LEVEL__066_L-1)
    181  205e					      endif
    182  205e		       6d		      .byte.b	<(LEVEL__067_R-1)
    183  205f		       20		      .byte.b	<(LEVEL__067_L-1)
    184  2060		       26		      .byte.b	<(LEVEL__068_R-1)
    185  2061		       d2		      .byte.b	<(LEVEL__068_L-1)
    186  2062		       ca		      .byte.b	<(LEVEL__069_R-1)
    187  2063		       7c		      .byte.b	<(LEVEL__069_L-1)
    188  2064
    189  2064				  -	      if	0
    190  2064				  -	      .byte	<(LEVEL__103_Arielle-1)
    191  2064				  -	      .byte	<(LEVEL__103_Ajalae-1)
    192  2064				  -	      .byte	<(LEVEL__103_Adin-1)
    193  2064				  -	      .byte	<(LEVEL__102_Raven-1)
    194  2064				  -	      .byte	<(LEVEL__102_Oralia-1)
    195  2064				  -	      .byte	<(LEVEL__102_Natalie-1)
    196  2064				  -	      .byte	<(LEVEL__102_Mirabel-1)
    197  2064				  -	      .byte	<(LEVEL__1XJH_Tara_Gelson-1)
    198  2064				  -	      .byte	<(LEVEL__1R7X_Alison-1)
    199  2064				  -	      .byte	<(LEVEL__1KWD_Cecile_Clayworth-1)
    200  2064				  -	      .byte	<(LEVEL__1EKT_Samantha_Gelson-1)
    201  2064				  -	      .byte	<(LEVEL__0VM5_Andrea_Wadd-1)
    202  2064				  -	      .byte	<(LEVEL__0PAL_Jill_Leatherby-1)
    203  2064				  -	      .byte	<(LEVEL__0IZ1_Sophia-1)
    204  2064				  -	      .byte	<(LEVEL__0CNH_Alice-1)
    205  2064				  -	      .byte	<(LEVEL__122_Maya-1)
    206  2064					      endif
    207  2064				  -	      if	0
    208  2064				  -
    209  2064				  -	      .byte	<(LEVEL_Thomas_Reinke16-1)
    210  2064				  -
    211  2064				  -	      .byte	<(LEVEL__Hof_0-1)
    212  2064				  -	      .byte	<(LEVEL__Hof_1-1)
    213  2064				  -	      .byte	<(LEVEL__Hof_2-1)
    214  2064				  -	      .byte	<(LEVEL__Hof_3-1)
    215  2064				  -	      .byte	<(LEVEL__Hof_4-1)
    216  2064				  -	      .byte	<(LEVEL__Hof_5-1)
    217  2064				  -	      .byte	<(LEVEL__Hof_6-1)
    218  2064				  -	      .byte	<(LEVEL__Hof_7-1)
    219  2064				  -	      .byte	<(LEVEL__Hof_8-1)
    220  2064				  -	      .byte	<(LEVEL__Hof_9-1)
    221  2064				  -
    222  2064				  -	      .byte	<(LEVEL_Zone_26_0-1)
    223  2064				  -	      .byte	<(LEVEL_Zone_26_1-1)
    224  2064				  -	      .byte	<(LEVEL_Zone_26_2-1)
    225  2064				  -	      .byte	<(LEVEL_Zone_26_3-1)
    226  2064				  -	      .byte	<(LEVEL_Zone_26_4-1)
    227  2064				  -	      .byte	<(LEVEL_Zone_26_5-1)
    228  2064				  -	      .byte	<(LEVEL_Zone_26_6-1)
    229  2064				  -	      .byte	<(LEVEL_Zone_26_7-1)
    230  2064				  -	      .byte	<(LEVEL_Zone_26_8-1)
    231  2064				  -	      .byte	<(LEVEL_Zone_26_9-1)
    232  2064				  -
    233  2064				  -	      .byte	<(LEVEL_Zone_26_10-1)
    234  2064				  -	      .byte	<(LEVEL_Zone_26_11-1)
    235  2064				  -	      .byte	<(LEVEL_Zone_26_12-1)
    236  2064				  -	      .byte	<(LEVEL_Zone_26_13-1)
    237  2064				  -	      .byte	<(LEVEL_Zone_26_14-1)
    238  2064				  -	      .byte	<(LEVEL_Zone_26_15-1)
    239  2064				  -	      .byte	<(LEVEL_Zone_26_16-1)
    240  2064				  -	      .byte	<(LEVEL_Zone_26_17-1)
    241  2064				  -	      .byte	<(LEVEL_Zone_26_18-1)
    242  2064				  -	      .byte	<(LEVEL_Zone_26_19-1)
    243  2064				  -
    244  2064				  -	      .byte	<(LEVEL_Zone_26_20-1)
    245  2064				  -	      .byte	<(LEVEL_Zone_26_21-1)
    246  2064				  -	      .byte	<(LEVEL_Zone_26_22-1)
    247  2064				  -	      .byte	<(LEVEL_Zone_26_23-1)
    248  2064				  -	      .byte	<(LEVEL_Zone_26_24-1)
    249  2064				  -	      .byte	<(LEVEL_Zone_26_25-1)
    250  2064				  -	      .byte	<(LEVEL_Zone_26_26-1)
    251  2064				  -	      .byte	<(LEVEL_Zone_26_27-1)
    252  2064				  -	      .byte	<(LEVEL_Zone_26_28-1)
    253  2064				  -	      .byte	<(LEVEL_Zone_26_29-1)
    254  2064				  -
    255  2064				  -	      .byte	<(LEVEL_Zone_26_30-1)
    256  2064				  -	      .byte	<(LEVEL_Zone_26_31-1)
    257  2064				  -	      .byte	<(LEVEL_Zone_26_32-1)
    258  2064				  -	      .byte	<(LEVEL_Zone_26_33-1)
    259  2064				  -	      .byte	<(LEVEL_Zone_26_34-1)
    260  2064				  -	      .byte	<(LEVEL_Zone_26_35-1)
    261  2064					      endif
    262  2064				  -	      if	0
    263  2064				  -	      .byte	<(LEVEL_Zone_26_36-1)
    264  2064				  -	      .byte	<(LEVEL_Zone_26_37-1)
    265  2064				  -	      .byte	<(LEVEL_Zone_26_38-1)
    266  2064				  -	      .byte	<(LEVEL_Zone_26_39-1)
    267  2064				  -
    268  2064				  -	      .byte	<(LEVEL_Zone_26_40-1)
    269  2064				  -	      .byte	<(LEVEL_Zone_26_41-1)
    270  2064				  -	      .byte	<(LEVEL_Zone_26_42-1)
    271  2064				  -	      .byte	<(LEVEL_Zone_26_43-1)
    272  2064				  -	      .byte	<(LEVEL_Zone_26_44-1)
    273  2064				  -	      .byte	<(LEVEL_Zone_26_45-1)
    274  2064				  -	      .byte	<(LEVEL_Zone_26_46-1)
    275  2064				  -	      .byte	<(LEVEL_Zone_26_47-1)
    276  2064				  -	      .byte	<(LEVEL_Zone_26_48-1)
    277  2064				  -	      .byte	<(LEVEL_Zone_26_49-1)
    278  2064				  -
    279  2064				  -	      .byte	<(LEVEL_Zone_26_50-1)
    280  2064				  -	      .byte	<(LEVEL_Zone_26_51-1)
    281  2064				  -	      .byte	<(LEVEL_Zone_26_52-1)
    282  2064				  -	      .byte	<(LEVEL_Zone_26_53-1)
    283  2064				  -	      .byte	<(LEVEL_Zone_26_54-1)
    284  2064				  -	      .byte	<(LEVEL_Zone_26_55-1)
    285  2064				  -	      .byte	<(LEVEL_Zone_26_56-1)
    286  2064				  -	      .byte	<(LEVEL_Zone_26_57-1)
    287  2064				  -	      .byte	<(LEVEL_Zone_26_58-1)
    288  2064				  -	      .byte	<(LEVEL_Zone_26_59-1)
    289  2064				  -
    290  2064				  -	      .byte	<(LEVEL_Zone_26_60-1)
    291  2064				  -	      .byte	<(LEVEL_Zone_26_61-1)
    292  2064				  -	      .byte	<(LEVEL_Zone_26_62-1)
    293  2064				  -	      .byte	<(LEVEL_Zone_26_63-1)
    294  2064				  -	      .byte	<(LEVEL_Zone_26_64-1)
    295  2064				  -	      .byte	<(LEVEL_Zone_26_65-1)
    296  2064				  -	      .byte	<(LEVEL_Zone_26_66-1)
    297  2064				  -	      .byte	<(LEVEL_Zone_26_67-1)
    298  2064					      endif
    299  2064				  -	      if	0
    300  2064				  -	      .byte	<(LEVEL_Zone_26_68-1)
    301  2064				  -	      .byte	<(LEVEL_Zone_26_69-1)
    302  2064				  -
    303  2064				  -	      .byte	<(LEVEL_Zone_26_70-1)
    304  2064				  -	      .byte	<(LEVEL_Zone_26_71-1)
    305  2064				  -	      .byte	<(LEVEL_Zone_26_72-1)
    306  2064				  -	      .byte	<(LEVEL_Zone_26_73-1)
    307  2064				  -	      .byte	<(LEVEL_Zone_26_74-1)
    308  2064				  -	      .byte	<(LEVEL_Zone_26_75-1)
    309  2064				  -	      .byte	<(LEVEL_Zone_26_76-1)
    310  2064				  -	      .byte	<(LEVEL_Zone_26_77-1)
    311  2064				  -	      .byte	<(LEVEL_Zone_26_78-1)
    312  2064				  -	      .byte	<(LEVEL_Zone_26_79-1)
    313  2064				  -
    314  2064				  -	      .byte	<(LEVEL_Zone_26_80-1)
    315  2064				  -	      .byte	<(LEVEL_Zone_26_81-1)
    316  2064				  -	      .byte	<(LEVEL_Zone_26_82-1)
    317  2064				  -	      .byte	<(LEVEL_Zone_26_83-1)
    318  2064				  -	      .byte	<(LEVEL_Zone_26_84-1)
    319  2064				  -	      .byte	<(LEVEL_Zone_26_85-1)
    320  2064				  -	      .byte	<(LEVEL_Zone_26_86-1)
    321  2064				  -	      .byte	<(LEVEL_Zone_26_87-1)
    322  2064				  -	      .byte	<(LEVEL_Zone_26_88-1)
    323  2064				  -	      .byte	<(LEVEL_Zone_26_89-1)
    324  2064				  -
    325  2064				  -	      .byte	<(LEVEL_Zone_26_90-1)
    326  2064				  -	      .byte	<(LEVEL_Zone_26_91-1)
    327  2064				  -	      .byte	<(LEVEL_Zone_26_92-1)
    328  2064				  -	      .byte	<(LEVEL_Zone_26_93-1)
    329  2064				  -	      .byte	<(LEVEL_Zone_26_94-1)
    330  2064				  -	      .byte	<(LEVEL_Zone_26_95-1)
    331  2064				  -	      .byte	<(LEVEL_Zone_26_96-1)
    332  2064				  -	      .byte	<(LEVEL_Zone_26_97-1)
    333  2064				  -	      .byte	<(LEVEL_Zone_26_98-1)
    334  2064				  -	      .byte	<(LEVEL_Zone_26_99-1)
    335  2064					      endif
    336  2064				  -	      if	0
    337  2064				  -	      .byte	<(LEVEL_Zone_26_100-1)
    338  2064				  -	      .byte	<(LEVEL_Zone_26_101-1)
    339  2064				  -	      .byte	<(LEVEL_Zone_26_102-1)
    340  2064				  -	      .byte	<(LEVEL_Zone_26_103-1)
    341  2064				  -	      .byte	<(LEVEL_Zone_26_104-1)
    342  2064				  -	      .byte	<(LEVEL_Zone_26_105-1)
    343  2064				  -	      .byte	<(LEVEL_Zone_26_106-1)
    344  2064				  -	      .byte	<(LEVEL_Zone_26_107-1)
    345  2064				  -	      .byte	<(LEVEL_Zone_26_108-1)
    346  2064				  -	      .byte	<(LEVEL_Zone_26_109-1)
    347  2064				  -
    348  2064				  -	      .byte	<(LEVEL_Zone_26_110-1)
    349  2064				  -	      .byte	<(LEVEL_Zone_26_111-1)
    350  2064				  -	      .byte	<(LEVEL_Zone_26_112-1)
    351  2064				  -	      .byte	<(LEVEL_Zone_26_113-1)
    352  2064				  -	      .byte	<(LEVEL_Zone_26_114-1)
    353  2064				  -	      .byte	<(LEVEL_Zone_26_115-1)
    354  2064				  -	      .byte	<(LEVEL_Zone_26_116-1)
    355  2064				  -
    356  2064				  -	      .byte	<(LEVEL_Rectangled_0-1)
    357  2064				  -	      .byte	<(LEVEL_Rectangled_1-1)
    358  2064				  -	      .byte	<(LEVEL_Rectangled_2-1)
    359  2064				  -	      .byte	<(LEVEL_Rectangled_3-1)
    360  2064				  -	      .byte	<(LEVEL_Rectangled_4-1)
    361  2064				  -	      .byte	<(LEVEL_Rectangled_5-1)
    362  2064				  -	      .byte	<(LEVEL_Rectangled_6-1)
    363  2064				  -	      .byte	<(LEVEL_Rectangled_7-1)
    364  2064				  -	      .byte	<(LEVEL_Rectangled_8-1)
    365  2064				  -	      .byte	<(LEVEL_Rectangled_9-1)
    366  2064				  -	      .byte	<(LEVEL_Rectangled_10-1)
    367  2064				  -
    368  2064				  -	      .byte	<(LEVEL_Scoria_3_0-1)
    369  2064				  -	      .byte	<(LEVEL_Scoria_3_1-1)
    370  2064				  -	      .byte	<(LEVEL_Scoria_3_2-1)
    371  2064				  -	      .byte	<(LEVEL_Scoria_3_3-1)
    372  2064				  -	      .byte	<(LEVEL_Scoria_3_4-1)
    373  2064				  -	      .byte	<(LEVEL_Scoria_3_5-1)
    374  2064				  -	      .byte	<(LEVEL_Scoria_3_6-1)
    375  2064				  -	      .byte	<(LEVEL_Scoria_3_7-1)
    376  2064				  -	      .byte	<(LEVEL_Scoria_3_8-1)
    377  2064				  -	      .byte	<(LEVEL_Scoria_3_9-1)
    378  2064				  -	      .byte	<(LEVEL_Scoria_3_10-1)
    379  2064				  -	      .byte	<(LEVEL_Scoria_3_11-1)
    380  2064				  -	      .byte	<(LEVEL_Scoria_3_12-1)
    381  2064				  -	      .byte	<(LEVEL_Scoria_3_13-1)
    382  2064				  -	      .byte	<(LEVEL_Scoria_3_14-1)
    383  2064				  -	      .byte	<(LEVEL_Scoria_3_15-1)
    384  2064				  -	      .byte	<(LEVEL_Scoria_3_16-1)
    385  2064				  -	      .byte	<(LEVEL_Scoria_3_17-1)
    386  2064				  -	      .byte	<(LEVEL_Scoria_3_18-1)
    387  2064				  -	      .byte	<(LEVEL_Scoria_3_19-1)
    388  2064				  -
    389  2064				  -	      .byte	<(LEVEL_Sokompact_0-1)
    390  2064				  -	      .byte	<(LEVEL_Sokompact_1-1)
    391  2064				  -	      .byte	<(LEVEL_Sokompact_2-1)
    392  2064				  -	      .byte	<(LEVEL_Sokompact_3-1)
    393  2064				  -	      .byte	<(LEVEL_Sokompact_4-1)
    394  2064				  -	      .byte	<(LEVEL_Sokompact_5-1)
    395  2064				  -	      .byte	<(LEVEL_Sokompact_6-1)
    396  2064				  -	      .byte	<(LEVEL_Sokompact_7-1)
    397  2064				  -	      .byte	<(LEVEL_Sokompact_8-1)
    398  2064				  -	      .byte	<(LEVEL_Sokompact_9-1)
    399  2064				  -	      .byte	<(LEVEL_Sokompact_10-1)
    400  2064				  -	      .byte	<(LEVEL_Sokompact_11-1)
    401  2064				  -	      .byte	<(LEVEL_Sokompact_12-1)
    402  2064				  -	      .byte	<(LEVEL_Sokompact_13-1)
    403  2064				  -	      .byte	<(LEVEL_Sokompact_14-1)
    404  2064				  -	      .byte	<(LEVEL_Sokompact_15-1)
    405  2064				  -	      .byte	<(LEVEL_Sokompact_16-1)
    406  2064				  -	      .byte	<(LEVEL_Sokompact_17-1)
    407  2064				  -	      .byte	<(LEVEL_Sokompact_18-1)
    408  2064				  -	      .byte	<(LEVEL_Sokompact_19-1)
    409  2064				  -	      .byte	<(LEVEL_Sokompact_20-1)
    410  2064				  -	      .byte	<(LEVEL_Sokompact_21-1)
    411  2064				  -	      .byte	<(LEVEL_Sokompact_22-1)
    412  2064				  -	      .byte	<(LEVEL_Sokompact_23-1)
    413  2064				  -	      .byte	<(LEVEL_Sokompact_24-1)
    414  2064				  -	      .byte	<(LEVEL_Sokompact_25-1)
    415  2064				  -	      .byte	<(LEVEL_Sokompact_26-1)
    416  2064				  -	      .byte	<(LEVEL_Sokompact_27-1)
    417  2064				  -	      .byte	<(LEVEL_Sokompact_28-1)
    418  2064				  -	      .byte	<(LEVEL_Sokompact_29-1)
    419  2064				  -	      .byte	<(LEVEL_Sokompact_30-1)
    420  2064				  -	      .byte	<(LEVEL_Sokompact_31-1)
    421  2064				  -	      .byte	<(LEVEL_Sokompact_32-1)
    422  2064				  -	      .byte	<(LEVEL_Sokompact_33-1)
    423  2064				  -	      .byte	<(LEVEL_Sokompact_34-1)
    424  2064				  -	      .byte	<(LEVEL_Sokompact_35-1)
    425  2064				  -	      .byte	<(LEVEL_Sokompact_36-1)
    426  2064				  -	      .byte	<(LEVEL_Sokompact_37-1)
    427  2064				  -	      .byte	<(LEVEL_Sokompact_38-1)
    428  2064				  -	      .byte	<(LEVEL_Sokompact_39-1)
    429  2064				  -	      .byte	<(LEVEL_Sokompact_40-1)
    430  2064				  -	      .byte	<(LEVEL_Sokompact_41-1)
    431  2064				  -	      .byte	<(LEVEL_Sokompact_42-1)
    432  2064				  -	      .byte	<(LEVEL_Sokompact_43-1)
    433  2064				  -	      .byte	<(LEVEL_Sokompact_44-1)
    434  2064				  -	      .byte	<(LEVEL_Sokompact_45-1)
    435  2064				  -	      .byte	<(LEVEL_Sokompact_46-1)
    436  2064				  -	      .byte	<(LEVEL_Sokompact_47-1)
    437  2064				  -	      .byte	<(LEVEL_Sokompact_48-1)
    438  2064				  -	      .byte	<(LEVEL_Sokompact_49-1)
    439  2064				  -	      .byte	<(LEVEL_Sokompact_50-1)
    440  2064				  -
    441  2064				  -
    442  2064				  -	      .byte	<(LEVEL_SokoStation_0-1)
    443  2064				  -	      .byte	<(LEVEL_SokoStation_1-1)
    444  2064				  -	      .byte	<(LEVEL_SokoStation_2-1)
    445  2064				  -	      .byte	<(LEVEL_SokoStation_3-1)
    446  2064				  -	      .byte	<(LEVEL_SokoStation_4-1)
    447  2064				  -	      .byte	<(LEVEL_SokoStation_5-1)
    448  2064				  -	      .byte	<(LEVEL_SokoStation_6-1)
    449  2064				  -	      .byte	<(LEVEL_SokoStation_7-1)
    450  2064				  -	      .byte	<(LEVEL_SokoStation_8-1)
    451  2064				  -	      .byte	<(LEVEL_SokoStation_9-1)
    452  2064				  -	      .byte	<(LEVEL_SokoStation_10-1)
    453  2064				  -	      .byte	<(LEVEL_SokoStation_11-1)
    454  2064				  -	      .byte	<(LEVEL_SokoStation_12-1)
    455  2064				  -	      .byte	<(LEVEL_SokoStation_13-1)
    456  2064				  -	      .byte	<(LEVEL_SokoStation_14-1)
    457  2064				  -	      .byte	<(LEVEL_SokoStation_15-1)
    458  2064				  -	      .byte	<(LEVEL_SokoStation_16-1)
    459  2064				  -	      .byte	<(LEVEL_SokoStation_17-1)
    460  2064				  -	      .byte	<(LEVEL_SokoStation_18-1)
    461  2064				  -	      .byte	<(LEVEL_SokoStation_19-1)
    462  2064				  -	      .byte	<(LEVEL_SokoStation_20-1)
    463  2064				  -	      .byte	<(LEVEL_SokoStation_21-1)
    464  2064				  -			;.byte <(LEVEL_SokoStation_22-1)
    465  2064				  -	      .byte	<(LEVEL_SokoStation_23-1)
    466  2064				  -	      .byte	<(LEVEL_SokoStation_24-1)
    467  2064				  -	      .byte	<(LEVEL_SokoStation_25-1)
    468  2064				  -	      .byte	<(LEVEL_SokoStation_26-1)
    469  2064				  -	      .byte	<(LEVEL_SokoStation_27-1)
    470  2064				  -	      .byte	<(LEVEL_SokoStation_28-1)
    471  2064				  -	      .byte	<(LEVEL_SokoStation_29-1)
    472  2064				  -	      .byte	<(LEVEL_SokoStation_30-1)
    473  2064				  -	      .byte	<(LEVEL_SokoStation_31-1)
    474  2064				  -	      .byte	<(LEVEL_SokoStation_32-1)
    475  2064				  -	      .byte	<(LEVEL_SokoStation_33-1)
    476  2064				  -	      .byte	<(LEVEL_SokoStation_34-1)
    477  2064				  -	      .byte	<(LEVEL_SokoStation_35-1)
    478  2064				  -	      .byte	<(LEVEL_SokoStation_36-1)
    479  2064				  -	      .byte	<(LEVEL_SokoStation_37-1)
    480  2064				  -	      .byte	<(LEVEL_SokoStation_38-1)
    481  2064				  -	      .byte	<(LEVEL_SokoStation_39-1)
    482  2064				  -	      .byte	<(LEVEL_SokoStation_40-1)
    483  2064				  -	      .byte	<(LEVEL_SokoStation_41-1)
    484  2064				  -	      .byte	<(LEVEL_SokoStation_42-1)
    485  2064				  -	      .byte	<(LEVEL_SokoStation_43-1)
    486  2064				  -	      .byte	<(LEVEL_SokoStation_44-1)
    487  2064				  -	      .byte	<(LEVEL_SokoStation_45-1)
    488  2064				  -	      .byte	<(LEVEL_SokoStation_46-1)
    489  2064				  -	      .byte	<(LEVEL_SokoStation_47-1)
    490  2064				  -	      .byte	<(LEVEL_SokoStation_48-1)
    491  2064				  -	      .byte	<(LEVEL_SokoStation_49-1)
    492  2064				  -	      .byte	<(LEVEL_SokoStation_50-1)
    493  2064				  -	      .byte	<(LEVEL_SokoStation_51-1)
    494  2064				  -	      .byte	<(LEVEL_SokoStation_52-1)
    495  2064				  -	      .byte	<(LEVEL_SokoStation_53-1)
    496  2064				  -	      .byte	<(LEVEL_SokoStation_54-1)
    497  2064				  -	      .byte	<(LEVEL_SokoStation_55-1)
    498  2064				  -	      .byte	<(LEVEL_SokoStation_56-1)
    499  2064				  -	      .byte	<(LEVEL_SokoStation_57-1)
    500  2064				  -	      .byte	<(LEVEL_SokoStation_58-1)
    501  2064				  -	      .byte	<(LEVEL_SokoStation_59-1)
    502  2064				  -	      .byte	<(LEVEL_SokoStation_60-1)
    503  2064				  -	      .byte	<(LEVEL_SokoStation_61-1)
    504  2064				  -	      .byte	<(LEVEL_SokoStation_62-1)
    505  2064				  -	      .byte	<(LEVEL_SokoStation_63-1)
    506  2064				  -	      .byte	<(LEVEL_SokoStation_64-1)
    507  2064				  -	      .byte	<(LEVEL_SokoStation_65-1)
    508  2064				  -	      .byte	<(LEVEL_SokoStation_66-1)
    509  2064				  -	      .byte	<(LEVEL_SokoStation_67-1)
    510  2064				  -	      .byte	<(LEVEL_SokoStation_68-1)
    511  2064				  -	      .byte	<(LEVEL_SokoStation_69-1)
    512  2064				  -	      .byte	<(LEVEL_SokoStation_70-1)
    513  2064				  -	      .byte	<(LEVEL_SokoStation_71-1)
    514  2064				  -	      .byte	<(LEVEL_SokoStation_72-1)
    515  2064				  -	      .byte	<(LEVEL_SokoStation_73-1)
    516  2064				  -	      .byte	<(LEVEL_SokoStation_74-1)
    517  2064				  -	      .byte	<(LEVEL_SokoStation_75-1)
    518  2064				  -	      .byte	<(LEVEL_SokoStation_76-1)
    519  2064				  -	      .byte	<(LEVEL_SokoStation_77-1)
    520  2064				  -	      .byte	<(LEVEL_SokoStation_78-1)
    521  2064				  -	      .byte	<(LEVEL_SokoStation_79-1)
    522  2064				  -	      .byte	<(LEVEL_SokoStation_80-1)
    523  2064				  -	      .byte	<(LEVEL_SokoStation_81-1)
    524  2064				  -	      .byte	<(LEVEL_SokoStation_82-1)
    525  2064				  -	      .byte	<(LEVEL_SokoStation_83-1)
    526  2064				  -	      .byte	<(LEVEL_SokoStation_84-1)
    527  2064				  -	      .byte	<(LEVEL_SokoStation_85-1)
    528  2064				  -	      .byte	<(LEVEL_SokoStation_86-1)
    529  2064				  -	      .byte	<(LEVEL_SokoStation_87-1)
    530  2064				  -	      .byte	<(LEVEL_SokoStation_88-1)
    531  2064				  -	      .byte	<(LEVEL_SokoStation_89-1)
    532  2064				  -	      .byte	<(LEVEL_SokoStation_90-1)
    533  2064				  -	      .byte	<(LEVEL_SokoStation_91-1)
    534  2064				  -
    535  2064				  -	      .byte	<(LEVEL_SokoStation_92-1)
    536  2064				  -	      .byte	<(LEVEL_SokoStation_93-1)
    537  2064				  -	      .byte	<(LEVEL_SokoStation_94-1)
    538  2064				  -	      .byte	<(LEVEL_SokoStation_95-1)
    539  2064				  -	      .byte	<(LEVEL_SokoStation_96-1)
    540  2064				  -	      .byte	<(LEVEL_SokoStation_97-1)
    541  2064				  -	      .byte	<(LEVEL_SokoStation_98-1)
    542  2064				  -	      .byte	<(LEVEL_SokoStation_99-1)
    543  2064				  -			; .byte <(LEVEL_SokoStation_100-1)
    544  2064				  -			; .byte <(LEVEL_SokoStation_101-1)
    545  2064				  -			; .byte <(LEVEL_SokoStation_102-1)
    546  2064				  -	      .byte	<(LEVEL_SokoStation_103-1)
    547  2064				  -	      .byte	<(LEVEL_SokoStation_104-1)
    548  2064					      endif
    549  2064				  -	      if	0
    550  2064				  -	      .byte	<(LEVEL_SokoStation_105-1)
    551  2064				  -	      .byte	<(LEVEL_SokoStation_106-1)
    552  2064				  -	      .byte	<(LEVEL_SokoStation_107-1)
    553  2064				  -	      .byte	<(LEVEL_SokoStation_108-1)
    554  2064				  -	      .byte	<(LEVEL_SokoStation_109-1)
    555  2064					      endif
    556  2064
    557  2064
    558  2064		       00 64	   MAX_LEVEL  =	* - LevelInfoLO
 $64 LEVELS INSTALLED
    559  2064					      ECHO	MAX_LEVEL, "LEVELS INSTALLED"
    560  2064
    561  2100		       00 00 00 00*	      align	256
      0  2100					      DEFINE_SUBROUTINE	LevelInfoHI
      1  2100		       00 04	   BANK_LevelInfoHI =	_CURRENT_BANK
      2  2100					      SUBROUTINE
      3  2100				   LevelInfoHI
    563  2100
    564  2100		       ef		      .byte.b	>(LEVEL__001_L-1)
    565  2101		       f0		      .byte.b	>(LEVEL__001_R-1)
    566  2102		       f0		      .byte.b	>(LEVEL__002_L-1)
    567  2103		       f0		      .byte.b	>(LEVEL__002_R-1)
    568  2104		       f0		      .byte.b	>(LEVEL__003_L-1)
    569  2105		       f0		      .byte.b	>(LEVEL__003_R-1)
    570  2106		       f0		      .byte.b	>(LEVEL__004_L-1)
    571  2107		       f0		      .byte.b	>(LEVEL__004_R-1)
    572  2108		       f0		      .byte.b	>(LEVEL__005_L-1)
    573  2109		       f1		      .byte.b	>(LEVEL__005_R-1)
    574  210a		       f1		      .byte.b	>(LEVEL__006_L-1)
    575  210b		       f1		      .byte.b	>(LEVEL__006_R-1)
    576  210c		       f1		      .byte.b	>(LEVEL__007_L-1)
    577  210d		       f2		      .byte.b	>(LEVEL__007_R-1)
    578  210e		       f2		      .byte.b	>(LEVEL__008_L-1)
    579  210f		       f2		      .byte.b	>(LEVEL__008_R-1)
    580  2110		       f2		      .byte.b	>(LEVEL__009_L-1)
    581  2111		       f2		      .byte.b	>(LEVEL__009_R-1)
    582  2112		       f3		      .byte.b	>(LEVEL__010_L-1)
    583  2113		       f3		      .byte.b	>(LEVEL__010_R-1)
    584  2114		       f3		      .byte.b	>(LEVEL__011_L-1)
    585  2115		       f3		      .byte.b	>(LEVEL__011_R-1)
    586  2116		       f3		      .byte.b	>(LEVEL__012_L-1)
    587  2117		       f4		      .byte.b	>(LEVEL__012_R-1)
    588  2118		       f4		      .byte.b	>(LEVEL__013_L-1)
    589  2119		       f4		      .byte.b	>(LEVEL__013_R-1)
    590  211a		       f4		      .byte.b	>(LEVEL__014_L-1)
    591  211b		       f5		      .byte.b	>(LEVEL__014_R-1)
    592  211c		       f5		      .byte.b	>(LEVEL__015_L-1)
    593  211d		       f5		      .byte.b	>(LEVEL__015_R-1)
    594  211e		       f5		      .byte.b	>(LEVEL__016_L-1)
    595  211f		       f5		      .byte.b	>(LEVEL__016_R-1)
    596  2120		       f6		      .byte.b	>(LEVEL__017_L-1)
    597  2121		       f6		      .byte.b	>(LEVEL__017_R-1)
    598  2122		       f6		      .byte.b	>(LEVEL__018_L-1)
    599  2123		       f6		      .byte.b	>(LEVEL__018_R-1)
    600  2124		       f7		      .byte.b	>(LEVEL__019_L-1)
    601  2125		       f7		      .byte.b	>(LEVEL__019_R-1)
    602  2126		       ef		      .byte.b	>(LEVEL__020_L-1)
    603  2127		       f0		      .byte.b	>(LEVEL__020_R-1)
    604  2128		       f0		      .byte.b	>(LEVEL__021_L-1)
    605  2129		       f0		      .byte.b	>(LEVEL__021_R-1)
    606  212a		       f1		      .byte.b	>(LEVEL__022_L-1)
    607  212b		       f1		      .byte.b	>(LEVEL__022_R-1)
    608  212c		       f1		      .byte.b	>(LEVEL__023_L-1)
    609  212d		       f1		      .byte.b	>(LEVEL__023_R-1)
    610  212e		       f2		      .byte.b	>(LEVEL__024_L-1)
    611  212f		       f2		      .byte.b	>(LEVEL__024_R-1)
    612  2130		       f2		      .byte.b	>(LEVEL__025_L-1)
    613  2131		       f2		      .byte.b	>(LEVEL__025_R-1)
    614  2132		       f3		      .byte.b	>(LEVEL__026_L-1)
    615  2133		       f3		      .byte.b	>(LEVEL__026_R-1)
    616  2134		       f3		      .byte.b	>(LEVEL__027_L-1)
    617  2135		       f3		      .byte.b	>(LEVEL__027_R-1)
    618  2136		       f4		      .byte.b	>(LEVEL__028_L-1)
    619  2137		       f4		      .byte.b	>(LEVEL__028_R-1)
    620  2138		       f4		      .byte.b	>(LEVEL__029_L-1)
    621  2139		       f4		      .byte.b	>(LEVEL__029_R-1)
    622  213a		       f5		      .byte.b	>(LEVEL__030_L-1)
    623  213b		       f5		      .byte.b	>(LEVEL__030_R-1)
    624  213c		       f5		      .byte.b	>(LEVEL__031_L-1)
    625  213d		       f6		      .byte.b	>(LEVEL__031_R-1)
    626  213e		       f6		      .byte.b	>(LEVEL__032_L-1)
    627  213f		       f6		      .byte.b	>(LEVEL__032_R-1)
    628  2140		       f6		      .byte.b	>(LEVEL__033_L-1)
    629  2141		       f7		      .byte.b	>(LEVEL__033_R-1)
    630  2142		       f7		      .byte.b	>(LEVEL__034_L-1)
    631  2143		       ef		      .byte.b	>(LEVEL__034_R-1)
    632  2144		       f0		      .byte.b	>(LEVEL__035_L-1)
    633  2145		       f0		      .byte.b	>(LEVEL__035_R-1)
    634  2146		       f0		      .byte.b	>(LEVEL__036_L-1)
    635  2147		       f1		      .byte.b	>(LEVEL__036_R-1)
    636  2148		       f1		      .byte.b	>(LEVEL__037_L-1)
    637  2149		       f1		      .byte.b	>(LEVEL__037_R-1)
    638  214a		       f1		      .byte.b	>(LEVEL__038_L-1)
    639  214b		       f2		      .byte.b	>(LEVEL__038_R-1)
    640  214c		       f2		      .byte.b	>(LEVEL__039_L-1)
    641  214d		       f2		      .byte.b	>(LEVEL__039_R-1)
    642  214e		       f3		      .byte.b	>(LEVEL__040_L-1)
    643  214f		       f3		      .byte.b	>(LEVEL__040_R-1)
    644  2150
    645  2150		       f3		      .byte.b	>(LEVEL__041_L-1)
    646  2151		       f3		      .byte.b	>(LEVEL__041_R-1)
    647  2152		       f4		      .byte.b	>(LEVEL__042_L-1)
    648  2153		       f4		      .byte.b	>(LEVEL__042_R-1)
    649  2154		       f4		      .byte.b	>(LEVEL__043_L-1)
    650  2155		       f5		      .byte.b	>(LEVEL__043_R-1)
    651  2156		       f5		      .byte.b	>(LEVEL__044_L-1)
    652  2157		       f5		      .byte.b	>(LEVEL__044_R-1)
    653  2158		       f5		      .byte.b	>(LEVEL__045_L-1)
    654  2159		       f6		      .byte.b	>(LEVEL__045_R-1)
    655  215a		       f6		      .byte.b	>(LEVEL__046_L-1)
    656  215b		       f6		      .byte.b	>(LEVEL__046_R-1)
    657  215c		       f7		      .byte.b	>(LEVEL__047_L-1)
    658  215d		       f7		      .byte.b	>(LEVEL__047_R-1)
    659  215e
    660  215e				  -	      if	0
    661  215e				  -	      .byte	>(LEVEL__048_L-1)
    662  215e				  -	      .byte	>(LEVEL__048_R-1)
    663  215e				  -	      .byte	>(LEVEL__049_L-1)
    664  215e				  -	      .byte	>(LEVEL__049_R-1)
    665  215e				  -
    666  215e				  -	      .byte	>(LEVEL__050_L-1)
    667  215e				  -	      .byte	>(LEVEL__050_R-1)
    668  215e				  -	      .byte	>(LEVEL__051_L-1)
    669  215e				  -	      .byte	>(LEVEL__051_R-1)
    670  215e				  -	      .byte	>(LEVEL__052_L-1)
    671  215e				  -	      .byte	>(LEVEL__052_R-1)
    672  215e				  -	      .byte	>(LEVEL__053_L-1)
    673  215e				  -	      .byte	>(LEVEL__053_R-1)
    674  215e				  -	      .byte	>(LEVEL__054_L-1)
    675  215e				  -	      .byte	>(LEVEL__054_R-1)
    676  215e				  -	      .byte	>(LEVEL__055_L-1)
    677  215e				  -	      .byte	>(LEVEL__055_R-1)
    678  215e				  -	      .byte	>(LEVEL__056_L-1)
    679  215e				  -	      .byte	>(LEVEL__056_R-1)
    680  215e				  -	      .byte	>(LEVEL__057_L-1)
    681  215e				  -	      .byte	>(LEVEL__057_R-1)
    682  215e				  -	      .byte	>(LEVEL__058_L-1)
    683  215e				  -	      .byte	>(LEVEL__058_R-1)
    684  215e				  -	      .byte	>(LEVEL__059_L-1)
    685  215e				  -	      .byte	>(LEVEL__059_R-1)
    686  215e				  -
    687  215e				  -	      .byte	>(LEVEL__060_R-1)
    688  215e				  -	      .byte	>(LEVEL__061_R-1)
    689  215e				  -	      .byte	>(LEVEL__061_L-1)
    690  215e				  -	      .byte	>(LEVEL__062_L-1)
    691  215e				  -	      .byte	>(LEVEL__062_R-1)
    692  215e				  -	      .byte	>(LEVEL__063_L-1)
    693  215e				  -	      .byte	>(LEVEL__063_R-1)
    694  215e				  -	      .byte	>(LEVEL__064_R-1)
    695  215e				  -	      .byte	>(LEVEL__064_L-1)
    696  215e				  -	      .byte	>(LEVEL__065_R-1)
    697  215e				  -	      .byte	>(LEVEL__065_L-1)
    698  215e				  -	      .byte	>(LEVEL__066_R-1)
    699  215e				  -	      .byte	>(LEVEL__066_L-1)
    700  215e					      endif
    701  215e		       f4		      .byte.b	>(LEVEL__067_R-1)
    702  215f		       f4		      .byte.b	>(LEVEL__067_L-1)
    703  2160		       f5		      .byte.b	>(LEVEL__068_R-1)
    704  2161		       f4		      .byte.b	>(LEVEL__068_L-1)
    705  2162		       f5		      .byte.b	>(LEVEL__069_R-1)
    706  2163		       f5		      .byte.b	>(LEVEL__069_L-1)
    707  2164				  -	      if	0
    708  2164				  -	      .byte	>(LEVEL__103_Arielle-1)
    709  2164				  -	      .byte	>(LEVEL__103_Ajalae-1)
    710  2164				  -	      .byte	>(LEVEL__103_Adin-1)
    711  2164				  -	      .byte	>(LEVEL__102_Raven-1)
    712  2164				  -	      .byte	>(LEVEL__102_Oralia-1)
    713  2164				  -	      .byte	>(LEVEL__102_Natalie-1)
    714  2164				  -	      .byte	>(LEVEL__102_Mirabel-1)
    715  2164				  -	      .byte	>(LEVEL__1XJH_Tara_Gelson-1)
    716  2164				  -	      .byte	>(LEVEL__1R7X_Alison-1)
    717  2164				  -	      .byte	>(LEVEL__1KWD_Cecile_Clayworth-1)
    718  2164				  -	      .byte	>(LEVEL__1EKT_Samantha_Gelson-1)
    719  2164				  -	      .byte	>(LEVEL__0VM5_Andrea_Wadd-1)
    720  2164				  -	      .byte	>(LEVEL__0PAL_Jill_Leatherby-1)
    721  2164				  -	      .byte	>(LEVEL__0IZ1_Sophia-1)
    722  2164				  -	      .byte	>(LEVEL__0CNH_Alice-1)
    723  2164				  -	      .byte	>(LEVEL__122_Maya-1)
    724  2164				  -
    725  2164				  -	      .byte	>(LEVEL_Thomas_Reinke16-1)
    726  2164				  -
    727  2164				  -	      .byte	>(LEVEL__Hof_0-1)
    728  2164				  -	      .byte	>(LEVEL__Hof_1-1)
    729  2164				  -	      .byte	>(LEVEL__Hof_2-1)
    730  2164				  -	      .byte	>(LEVEL__Hof_3-1)
    731  2164				  -	      .byte	>(LEVEL__Hof_4-1)
    732  2164				  -	      .byte	>(LEVEL__Hof_5-1)
    733  2164				  -	      .byte	>(LEVEL__Hof_6-1)
    734  2164				  -	      .byte	>(LEVEL__Hof_7-1)
    735  2164				  -	      .byte	>(LEVEL__Hof_8-1)
    736  2164				  -	      .byte	>(LEVEL__Hof_9-1)
    737  2164				  -
    738  2164				  -	      .byte	>(LEVEL_Zone_26_0-1)
    739  2164				  -	      .byte	>(LEVEL_Zone_26_1-1)
    740  2164				  -	      .byte	>(LEVEL_Zone_26_2-1)
    741  2164				  -	      .byte	>(LEVEL_Zone_26_3-1)
    742  2164				  -	      .byte	>(LEVEL_Zone_26_4-1)
    743  2164				  -	      .byte	>(LEVEL_Zone_26_5-1)
    744  2164				  -	      .byte	>(LEVEL_Zone_26_6-1)
    745  2164				  -	      .byte	>(LEVEL_Zone_26_7-1)
    746  2164				  -	      .byte	>(LEVEL_Zone_26_8-1)
    747  2164				  -	      .byte	>(LEVEL_Zone_26_9-1)
    748  2164				  -
    749  2164				  -	      .byte	>(LEVEL_Zone_26_10-1)
    750  2164				  -	      .byte	>(LEVEL_Zone_26_11-1)
    751  2164				  -	      .byte	>(LEVEL_Zone_26_12-1)
    752  2164				  -	      .byte	>(LEVEL_Zone_26_13-1)
    753  2164				  -	      .byte	>(LEVEL_Zone_26_14-1)
    754  2164				  -	      .byte	>(LEVEL_Zone_26_15-1)
    755  2164				  -	      .byte	>(LEVEL_Zone_26_16-1)
    756  2164				  -	      .byte	>(LEVEL_Zone_26_17-1)
    757  2164				  -	      .byte	>(LEVEL_Zone_26_18-1)
    758  2164				  -	      .byte	>(LEVEL_Zone_26_19-1)
    759  2164				  -
    760  2164				  -	      .byte	>(LEVEL_Zone_26_20-1)
    761  2164				  -	      .byte	>(LEVEL_Zone_26_21-1)
    762  2164				  -	      .byte	>(LEVEL_Zone_26_22-1)
    763  2164				  -	      .byte	>(LEVEL_Zone_26_23-1)
    764  2164				  -	      .byte	>(LEVEL_Zone_26_24-1)
    765  2164				  -	      .byte	>(LEVEL_Zone_26_25-1)
    766  2164				  -	      .byte	>(LEVEL_Zone_26_26-1)
    767  2164				  -	      .byte	>(LEVEL_Zone_26_27-1)
    768  2164				  -	      .byte	>(LEVEL_Zone_26_28-1)
    769  2164				  -	      .byte	>(LEVEL_Zone_26_29-1)
    770  2164				  -
    771  2164				  -	      .byte	>(LEVEL_Zone_26_30-1)
    772  2164				  -	      .byte	>(LEVEL_Zone_26_31-1)
    773  2164				  -	      .byte	>(LEVEL_Zone_26_32-1)
    774  2164				  -	      .byte	>(LEVEL_Zone_26_33-1)
    775  2164				  -	      .byte	>(LEVEL_Zone_26_34-1)
    776  2164				  -	      .byte	>(LEVEL_Zone_26_35-1)
    777  2164					      endif
    778  2164
    779  2164				  -	      if	0
    780  2164				  -
    781  2164				  -	      .byte	>(LEVEL_Zone_26_36-1)
    782  2164				  -	      .byte	>(LEVEL_Zone_26_37-1)
    783  2164				  -	      .byte	>(LEVEL_Zone_26_38-1)
    784  2164				  -	      .byte	>(LEVEL_Zone_26_39-1)
    785  2164				  -
    786  2164				  -	      .byte	>(LEVEL_Zone_26_40-1)
    787  2164				  -	      .byte	>(LEVEL_Zone_26_41-1)
    788  2164				  -	      .byte	>(LEVEL_Zone_26_42-1)
    789  2164				  -	      .byte	>(LEVEL_Zone_26_43-1)
    790  2164				  -	      .byte	>(LEVEL_Zone_26_44-1)
    791  2164				  -	      .byte	>(LEVEL_Zone_26_45-1)
    792  2164				  -	      .byte	>(LEVEL_Zone_26_46-1)
    793  2164				  -	      .byte	>(LEVEL_Zone_26_47-1)
    794  2164				  -	      .byte	>(LEVEL_Zone_26_48-1)
    795  2164				  -	      .byte	>(LEVEL_Zone_26_49-1)
    796  2164				  -
    797  2164				  -	      .byte	>(LEVEL_Zone_26_50-1)
    798  2164				  -	      .byte	>(LEVEL_Zone_26_51-1)
    799  2164				  -	      .byte	>(LEVEL_Zone_26_52-1)
    800  2164				  -	      .byte	>(LEVEL_Zone_26_53-1)
    801  2164				  -	      .byte	>(LEVEL_Zone_26_54-1)
    802  2164				  -	      .byte	>(LEVEL_Zone_26_55-1)
    803  2164				  -	      .byte	>(LEVEL_Zone_26_56-1)
    804  2164				  -	      .byte	>(LEVEL_Zone_26_57-1)
    805  2164				  -	      .byte	>(LEVEL_Zone_26_58-1)
    806  2164				  -	      .byte	>(LEVEL_Zone_26_59-1)
    807  2164				  -
    808  2164				  -	      .byte	>(LEVEL_Zone_26_60-1)
    809  2164				  -	      .byte	>(LEVEL_Zone_26_61-1)
    810  2164				  -	      .byte	>(LEVEL_Zone_26_62-1)
    811  2164				  -	      .byte	>(LEVEL_Zone_26_63-1)
    812  2164				  -	      .byte	>(LEVEL_Zone_26_64-1)
    813  2164				  -	      .byte	>(LEVEL_Zone_26_65-1)
    814  2164				  -	      .byte	>(LEVEL_Zone_26_66-1)
    815  2164				  -	      .byte	>(LEVEL_Zone_26_67-1)
    816  2164					      endif
    817  2164				  -	      if	0
    818  2164				  -	      .byte	>(LEVEL_Zone_26_68-1)
    819  2164				  -	      .byte	>(LEVEL_Zone_26_69-1)
    820  2164				  -
    821  2164				  -	      .byte	>(LEVEL_Zone_26_70-1)
    822  2164				  -	      .byte	>(LEVEL_Zone_26_71-1)
    823  2164				  -	      .byte	>(LEVEL_Zone_26_72-1)
    824  2164				  -	      .byte	>(LEVEL_Zone_26_73-1)
    825  2164				  -	      .byte	>(LEVEL_Zone_26_74-1)
    826  2164				  -	      .byte	>(LEVEL_Zone_26_75-1)
    827  2164				  -	      .byte	>(LEVEL_Zone_26_76-1)
    828  2164				  -	      .byte	>(LEVEL_Zone_26_77-1)
    829  2164				  -	      .byte	>(LEVEL_Zone_26_78-1)
    830  2164				  -	      .byte	>(LEVEL_Zone_26_79-1)
    831  2164				  -
    832  2164				  -	      .byte	>(LEVEL_Zone_26_80-1)
    833  2164				  -	      .byte	>(LEVEL_Zone_26_81-1)
    834  2164				  -	      .byte	>(LEVEL_Zone_26_82-1)
    835  2164				  -	      .byte	>(LEVEL_Zone_26_83-1)
    836  2164				  -	      .byte	>(LEVEL_Zone_26_84-1)
    837  2164				  -	      .byte	>(LEVEL_Zone_26_85-1)
    838  2164				  -	      .byte	>(LEVEL_Zone_26_86-1)
    839  2164				  -	      .byte	>(LEVEL_Zone_26_87-1)
    840  2164				  -	      .byte	>(LEVEL_Zone_26_88-1)
    841  2164				  -	      .byte	>(LEVEL_Zone_26_89-1)
    842  2164				  -
    843  2164				  -	      .byte	>(LEVEL_Zone_26_90-1)
    844  2164				  -	      .byte	>(LEVEL_Zone_26_91-1)
    845  2164				  -	      .byte	>(LEVEL_Zone_26_92-1)
    846  2164				  -	      .byte	>(LEVEL_Zone_26_93-1)
    847  2164				  -	      .byte	>(LEVEL_Zone_26_94-1)
    848  2164				  -	      .byte	>(LEVEL_Zone_26_95-1)
    849  2164				  -	      .byte	>(LEVEL_Zone_26_96-1)
    850  2164				  -	      .byte	>(LEVEL_Zone_26_97-1)
    851  2164				  -	      .byte	>(LEVEL_Zone_26_98-1)
    852  2164				  -	      .byte	>(LEVEL_Zone_26_99-1)
    853  2164					      endif
    854  2164				  -	      if	0
    855  2164				  -	      .byte	>(LEVEL_Zone_26_100-1)
    856  2164				  -	      .byte	>(LEVEL_Zone_26_101-1)
    857  2164				  -	      .byte	>(LEVEL_Zone_26_102-1)
    858  2164				  -	      .byte	>(LEVEL_Zone_26_103-1)
    859  2164				  -	      .byte	>(LEVEL_Zone_26_104-1)
    860  2164				  -	      .byte	>(LEVEL_Zone_26_105-1)
    861  2164				  -	      .byte	>(LEVEL_Zone_26_106-1)
    862  2164				  -	      .byte	>(LEVEL_Zone_26_107-1)
    863  2164				  -	      .byte	>(LEVEL_Zone_26_108-1)
    864  2164				  -	      .byte	>(LEVEL_Zone_26_109-1)
    865  2164				  -
    866  2164				  -	      .byte	>(LEVEL_Zone_26_110-1)
    867  2164				  -	      .byte	>(LEVEL_Zone_26_111-1)
    868  2164				  -	      .byte	>(LEVEL_Zone_26_112-1)
    869  2164				  -	      .byte	>(LEVEL_Zone_26_113-1)
    870  2164				  -	      .byte	>(LEVEL_Zone_26_114-1)
    871  2164				  -	      .byte	>(LEVEL_Zone_26_115-1)
    872  2164				  -	      .byte	>(LEVEL_Zone_26_116-1)
    873  2164				  -
    874  2164				  -	      .byte	>(LEVEL_Rectangled_0-1)
    875  2164				  -	      .byte	>(LEVEL_Rectangled_1-1)
    876  2164				  -	      .byte	>(LEVEL_Rectangled_2-1)
    877  2164				  -	      .byte	>(LEVEL_Rectangled_3-1)
    878  2164				  -	      .byte	>(LEVEL_Rectangled_4-1)
    879  2164				  -	      .byte	>(LEVEL_Rectangled_5-1)
    880  2164				  -	      .byte	>(LEVEL_Rectangled_6-1)
    881  2164				  -	      .byte	>(LEVEL_Rectangled_7-1)
    882  2164				  -	      .byte	>(LEVEL_Rectangled_8-1)
    883  2164				  -	      .byte	>(LEVEL_Rectangled_9-1)
    884  2164				  -	      .byte	>(LEVEL_Rectangled_10-1)
    885  2164				  -
    886  2164				  -	      .byte	>(LEVEL_Scoria_3_0-1)
    887  2164				  -	      .byte	>(LEVEL_Scoria_3_1-1)
    888  2164				  -	      .byte	>(LEVEL_Scoria_3_2-1)
    889  2164				  -	      .byte	>(LEVEL_Scoria_3_3-1)
    890  2164				  -	      .byte	>(LEVEL_Scoria_3_4-1)
    891  2164				  -	      .byte	>(LEVEL_Scoria_3_5-1)
    892  2164				  -	      .byte	>(LEVEL_Scoria_3_6-1)
    893  2164				  -	      .byte	>(LEVEL_Scoria_3_7-1)
    894  2164				  -	      .byte	>(LEVEL_Scoria_3_8-1)
    895  2164				  -	      .byte	>(LEVEL_Scoria_3_9-1)
    896  2164				  -	      .byte	>(LEVEL_Scoria_3_10-1)
    897  2164				  -	      .byte	>(LEVEL_Scoria_3_11-1)
    898  2164				  -	      .byte	>(LEVEL_Scoria_3_12-1)
    899  2164				  -	      .byte	>(LEVEL_Scoria_3_13-1)
    900  2164				  -	      .byte	>(LEVEL_Scoria_3_14-1)
    901  2164				  -	      .byte	>(LEVEL_Scoria_3_15-1)
    902  2164				  -	      .byte	>(LEVEL_Scoria_3_16-1)
    903  2164				  -	      .byte	>(LEVEL_Scoria_3_17-1)
    904  2164				  -	      .byte	>(LEVEL_Scoria_3_18-1)
    905  2164				  -	      .byte	>(LEVEL_Scoria_3_19-1)
    906  2164				  -
    907  2164				  -
    908  2164				  -	      .byte	>(LEVEL_Sokompact_0-1)
    909  2164				  -	      .byte	>(LEVEL_Sokompact_1-1)
    910  2164				  -	      .byte	>(LEVEL_Sokompact_2-1)
    911  2164				  -	      .byte	>(LEVEL_Sokompact_3-1)
    912  2164				  -	      .byte	>(LEVEL_Sokompact_4-1)
    913  2164				  -	      .byte	>(LEVEL_Sokompact_5-1)
    914  2164				  -	      .byte	>(LEVEL_Sokompact_6-1)
    915  2164				  -	      .byte	>(LEVEL_Sokompact_7-1)
    916  2164				  -	      .byte	>(LEVEL_Sokompact_8-1)
    917  2164				  -	      .byte	>(LEVEL_Sokompact_9-1)
    918  2164				  -	      .byte	>(LEVEL_Sokompact_10-1)
    919  2164				  -	      .byte	>(LEVEL_Sokompact_11-1)
    920  2164				  -	      .byte	>(LEVEL_Sokompact_12-1)
    921  2164				  -	      .byte	>(LEVEL_Sokompact_13-1)
    922  2164				  -	      .byte	>(LEVEL_Sokompact_14-1)
    923  2164				  -	      .byte	>(LEVEL_Sokompact_15-1)
    924  2164				  -	      .byte	>(LEVEL_Sokompact_16-1)
    925  2164				  -	      .byte	>(LEVEL_Sokompact_17-1)
    926  2164				  -	      .byte	>(LEVEL_Sokompact_18-1)
    927  2164				  -	      .byte	>(LEVEL_Sokompact_19-1)
    928  2164				  -	      .byte	>(LEVEL_Sokompact_20-1)
    929  2164				  -	      .byte	>(LEVEL_Sokompact_21-1)
    930  2164				  -	      .byte	>(LEVEL_Sokompact_22-1)
    931  2164				  -	      .byte	>(LEVEL_Sokompact_23-1)
    932  2164				  -	      .byte	>(LEVEL_Sokompact_24-1)
    933  2164				  -	      .byte	>(LEVEL_Sokompact_25-1)
    934  2164				  -	      .byte	>(LEVEL_Sokompact_26-1)
    935  2164				  -	      .byte	>(LEVEL_Sokompact_27-1)
    936  2164				  -	      .byte	>(LEVEL_Sokompact_28-1)
    937  2164				  -	      .byte	>(LEVEL_Sokompact_29-1)
    938  2164				  -	      .byte	>(LEVEL_Sokompact_30-1)
    939  2164				  -	      .byte	>(LEVEL_Sokompact_31-1)
    940  2164				  -	      .byte	>(LEVEL_Sokompact_32-1)
    941  2164				  -	      .byte	>(LEVEL_Sokompact_33-1)
    942  2164				  -	      .byte	>(LEVEL_Sokompact_34-1)
    943  2164				  -	      .byte	>(LEVEL_Sokompact_35-1)
    944  2164				  -	      .byte	>(LEVEL_Sokompact_36-1)
    945  2164				  -	      .byte	>(LEVEL_Sokompact_37-1)
    946  2164				  -	      .byte	>(LEVEL_Sokompact_38-1)
    947  2164				  -	      .byte	>(LEVEL_Sokompact_39-1)
    948  2164				  -	      .byte	>(LEVEL_Sokompact_40-1)
    949  2164				  -	      .byte	>(LEVEL_Sokompact_41-1)
    950  2164				  -	      .byte	>(LEVEL_Sokompact_42-1)
    951  2164				  -	      .byte	>(LEVEL_Sokompact_43-1)
    952  2164				  -	      .byte	>(LEVEL_Sokompact_44-1)
    953  2164				  -	      .byte	>(LEVEL_Sokompact_45-1)
    954  2164				  -	      .byte	>(LEVEL_Sokompact_46-1)
    955  2164				  -	      .byte	>(LEVEL_Sokompact_47-1)
    956  2164				  -	      .byte	>(LEVEL_Sokompact_48-1)
    957  2164				  -	      .byte	>(LEVEL_Sokompact_49-1)
    958  2164				  -	      .byte	>(LEVEL_Sokompact_50-1)
    959  2164				  -
    960  2164				  -
    961  2164				  -	      .byte	>(LEVEL_SokoStation_0-1)
    962  2164				  -	      .byte	>(LEVEL_SokoStation_1-1)
    963  2164				  -	      .byte	>(LEVEL_SokoStation_2-1)
    964  2164				  -	      .byte	>(LEVEL_SokoStation_3-1)
    965  2164				  -	      .byte	>(LEVEL_SokoStation_4-1)
    966  2164				  -	      .byte	>(LEVEL_SokoStation_5-1)
    967  2164				  -	      .byte	>(LEVEL_SokoStation_6-1)
    968  2164				  -	      .byte	>(LEVEL_SokoStation_7-1)
    969  2164				  -	      .byte	>(LEVEL_SokoStation_8-1)
    970  2164				  -	      .byte	>(LEVEL_SokoStation_9-1)
    971  2164				  -	      .byte	>(LEVEL_SokoStation_10-1)
    972  2164				  -	      .byte	>(LEVEL_SokoStation_11-1)
    973  2164				  -	      .byte	>(LEVEL_SokoStation_12-1)
    974  2164				  -	      .byte	>(LEVEL_SokoStation_13-1)
    975  2164				  -	      .byte	>(LEVEL_SokoStation_14-1)
    976  2164				  -	      .byte	>(LEVEL_SokoStation_15-1)
    977  2164				  -	      .byte	>(LEVEL_SokoStation_16-1)
    978  2164				  -	      .byte	>(LEVEL_SokoStation_17-1)
    979  2164				  -	      .byte	>(LEVEL_SokoStation_18-1)
    980  2164				  -	      .byte	>(LEVEL_SokoStation_19-1)
    981  2164				  -	      .byte	>(LEVEL_SokoStation_20-1)
    982  2164				  -	      .byte	>(LEVEL_SokoStation_21-1)
    983  2164				  -			;.byte >(LEVEL_SokoStation_22-1)
    984  2164				  -	      .byte	>(LEVEL_SokoStation_23-1)
    985  2164				  -	      .byte	>(LEVEL_SokoStation_24-1)
    986  2164				  -	      .byte	>(LEVEL_SokoStation_25-1)
    987  2164				  -	      .byte	>(LEVEL_SokoStation_26-1)
    988  2164				  -	      .byte	>(LEVEL_SokoStation_27-1)
    989  2164				  -	      .byte	>(LEVEL_SokoStation_28-1)
    990  2164				  -	      .byte	>(LEVEL_SokoStation_29-1)
    991  2164				  -	      .byte	>(LEVEL_SokoStation_30-1)
    992  2164				  -	      .byte	>(LEVEL_SokoStation_31-1)
    993  2164				  -	      .byte	>(LEVEL_SokoStation_32-1)
    994  2164				  -	      .byte	>(LEVEL_SokoStation_33-1)
    995  2164				  -	      .byte	>(LEVEL_SokoStation_34-1)
    996  2164				  -	      .byte	>(LEVEL_SokoStation_35-1)
    997  2164				  -	      .byte	>(LEVEL_SokoStation_36-1)
    998  2164				  -	      .byte	>(LEVEL_SokoStation_37-1)
    999  2164				  -	      .byte	>(LEVEL_SokoStation_38-1)
   1000  2164				  -	      .byte	>(LEVEL_SokoStation_39-1)
   1001  2164				  -	      .byte	>(LEVEL_SokoStation_40-1)
   1002  2164				  -	      .byte	>(LEVEL_SokoStation_41-1)
   1003  2164				  -	      .byte	>(LEVEL_SokoStation_42-1)
   1004  2164				  -	      .byte	>(LEVEL_SokoStation_43-1)
   1005  2164				  -	      .byte	>(LEVEL_SokoStation_44-1)
   1006  2164				  -	      .byte	>(LEVEL_SokoStation_45-1)
   1007  2164				  -	      .byte	>(LEVEL_SokoStation_46-1)
   1008  2164				  -	      .byte	>(LEVEL_SokoStation_47-1)
   1009  2164				  -	      .byte	>(LEVEL_SokoStation_48-1)
   1010  2164				  -	      .byte	>(LEVEL_SokoStation_49-1)
   1011  2164				  -	      .byte	>(LEVEL_SokoStation_50-1)
   1012  2164				  -	      .byte	>(LEVEL_SokoStation_51-1)
   1013  2164				  -	      .byte	>(LEVEL_SokoStation_52-1)
   1014  2164				  -	      .byte	>(LEVEL_SokoStation_53-1)
   1015  2164				  -	      .byte	>(LEVEL_SokoStation_54-1)
   1016  2164				  -	      .byte	>(LEVEL_SokoStation_55-1)
   1017  2164				  -	      .byte	>(LEVEL_SokoStation_56-1)
   1018  2164				  -	      .byte	>(LEVEL_SokoStation_57-1)
   1019  2164				  -	      .byte	>(LEVEL_SokoStation_58-1)
   1020  2164				  -	      .byte	>(LEVEL_SokoStation_59-1)
   1021  2164				  -	      .byte	>(LEVEL_SokoStation_60-1)
   1022  2164				  -	      .byte	>(LEVEL_SokoStation_61-1)
   1023  2164				  -	      .byte	>(LEVEL_SokoStation_62-1)
   1024  2164				  -	      .byte	>(LEVEL_SokoStation_63-1)
   1025  2164				  -	      .byte	>(LEVEL_SokoStation_64-1)
   1026  2164				  -	      .byte	>(LEVEL_SokoStation_65-1)
   1027  2164				  -	      .byte	>(LEVEL_SokoStation_66-1)
   1028  2164				  -	      .byte	>(LEVEL_SokoStation_67-1)
   1029  2164				  -	      .byte	>(LEVEL_SokoStation_68-1)
   1030  2164				  -	      .byte	>(LEVEL_SokoStation_69-1)
   1031  2164				  -	      .byte	>(LEVEL_SokoStation_70-1)
   1032  2164				  -	      .byte	>(LEVEL_SokoStation_71-1)
   1033  2164				  -	      .byte	>(LEVEL_SokoStation_72-1)
   1034  2164				  -	      .byte	>(LEVEL_SokoStation_73-1)
   1035  2164				  -	      .byte	>(LEVEL_SokoStation_74-1)
   1036  2164				  -	      .byte	>(LEVEL_SokoStation_75-1)
   1037  2164				  -	      .byte	>(LEVEL_SokoStation_76-1)
   1038  2164				  -	      .byte	>(LEVEL_SokoStation_77-1)
   1039  2164				  -	      .byte	>(LEVEL_SokoStation_78-1)
   1040  2164				  -	      .byte	>(LEVEL_SokoStation_79-1)
   1041  2164				  -	      .byte	>(LEVEL_SokoStation_80-1)
   1042  2164				  -	      .byte	>(LEVEL_SokoStation_81-1)
   1043  2164				  -	      .byte	>(LEVEL_SokoStation_82-1)
   1044  2164				  -	      .byte	>(LEVEL_SokoStation_83-1)
   1045  2164				  -	      .byte	>(LEVEL_SokoStation_84-1)
   1046  2164				  -	      .byte	>(LEVEL_SokoStation_85-1)
   1047  2164				  -	      .byte	>(LEVEL_SokoStation_86-1)
   1048  2164				  -	      .byte	>(LEVEL_SokoStation_87-1)
   1049  2164				  -	      .byte	>(LEVEL_SokoStation_88-1)
   1050  2164				  -	      .byte	>(LEVEL_SokoStation_89-1)
   1051  2164				  -	      .byte	>(LEVEL_SokoStation_90-1)
   1052  2164				  -	      .byte	>(LEVEL_SokoStation_91-1)
   1053  2164				  -
   1054  2164				  -	      .byte	>(LEVEL_SokoStation_92-1)
   1055  2164				  -	      .byte	>(LEVEL_SokoStation_93-1)
   1056  2164				  -	      .byte	>(LEVEL_SokoStation_94-1)
   1057  2164				  -	      .byte	>(LEVEL_SokoStation_95-1)
   1058  2164				  -	      .byte	>(LEVEL_SokoStation_96-1)
   1059  2164				  -	      .byte	>(LEVEL_SokoStation_97-1)
   1060  2164				  -	      .byte	>(LEVEL_SokoStation_98-1)
   1061  2164				  -	      .byte	>(LEVEL_SokoStation_99-1)
   1062  2164				  -			; .byte >(LEVEL_SokoStation_100-1)
   1063  2164				  -			; .byte >(LEVEL_SokoStation_101-1)
   1064  2164				  -			; .byte >(LEVEL_SokoStation_102-1)
   1065  2164				  -	      .byte	>(LEVEL_SokoStation_103-1)
   1066  2164				  -	      .byte	>(LEVEL_SokoStation_104-1)
   1067  2164					      endif
   1068  2164				  -	      if	0
   1069  2164				  -	      .byte	>(LEVEL_SokoStation_105-1)
   1070  2164				  -	      .byte	>(LEVEL_SokoStation_106-1)
   1071  2164				  -	      .byte	>(LEVEL_SokoStation_107-1)
   1072  2164				  -	      .byte	>(LEVEL_SokoStation_108-1)
   1073  2164				  -	      .byte	>(LEVEL_SokoStation_109-1)
   1074  2164					      endif
   1075  2164
   1076  2164				  -	      IF	(* - LevelInfoHI != MAX_LEVEL)
   1077  2164				  -	      ECHO	"ERROR: Incorrect LevelInfoHI table!"
   1078  2164				  -	      ERR
   1079  2164					      ENDIF
   1080  2164
   1081  2200		       00 00 00 00*	      align	256
      0  2200					      DEFINE_SUBROUTINE	LevelInfoBANK
      1  2200		       00 04	   BANK_LevelInfoBANK =	_CURRENT_BANK
      2  2200					      SUBROUTINE
      3  2200				   LevelInfoBANK
   1083  2200
   1084  2200		       05		      .byte.b	BANK_LEVEL__001_L
   1085  2201		       05		      .byte.b	BANK_LEVEL__001_R
   1086  2202		       05		      .byte.b	BANK_LEVEL__002_L
   1087  2203		       05		      .byte.b	BANK_LEVEL__002_R
   1088  2204		       05		      .byte.b	BANK_LEVEL__003_L
   1089  2205		       05		      .byte.b	BANK_LEVEL__003_R
   1090  2206		       05		      .byte.b	BANK_LEVEL__004_L
   1091  2207		       05		      .byte.b	BANK_LEVEL__004_R
   1092  2208		       05		      .byte.b	BANK_LEVEL__005_L
   1093  2209		       05		      .byte.b	BANK_LEVEL__005_R
   1094  220a		       05		      .byte.b	BANK_LEVEL__006_L
   1095  220b		       05		      .byte.b	BANK_LEVEL__006_R
   1096  220c		       05		      .byte.b	BANK_LEVEL__007_L
   1097  220d		       05		      .byte.b	BANK_LEVEL__007_R
   1098  220e		       05		      .byte.b	BANK_LEVEL__008_L
   1099  220f		       05		      .byte.b	BANK_LEVEL__008_R
   1100  2210		       05		      .byte.b	BANK_LEVEL__009_L
   1101  2211		       05		      .byte.b	BANK_LEVEL__009_R
   1102  2212		       05		      .byte.b	BANK_LEVEL__010_L
   1103  2213		       05		      .byte.b	BANK_LEVEL__010_R
   1104  2214		       05		      .byte.b	BANK_LEVEL__011_L
   1105  2215		       05		      .byte.b	BANK_LEVEL__011_R
   1106  2216		       05		      .byte.b	BANK_LEVEL__012_L
   1107  2217		       05		      .byte.b	BANK_LEVEL__012_R
   1108  2218		       05		      .byte.b	BANK_LEVEL__013_L
   1109  2219		       05		      .byte.b	BANK_LEVEL__013_R
   1110  221a		       05		      .byte.b	BANK_LEVEL__014_L
   1111  221b		       05		      .byte.b	BANK_LEVEL__014_R
   1112  221c		       05		      .byte.b	BANK_LEVEL__015_L
   1113  221d		       05		      .byte.b	BANK_LEVEL__015_R
   1114  221e		       05		      .byte.b	BANK_LEVEL__016_L
   1115  221f		       05		      .byte.b	BANK_LEVEL__016_R
   1116  2220		       05		      .byte.b	BANK_LEVEL__017_L
   1117  2221		       05		      .byte.b	BANK_LEVEL__017_R
   1118  2222		       05		      .byte.b	BANK_LEVEL__018_L
   1119  2223		       05		      .byte.b	BANK_LEVEL__018_R
   1120  2224		       05		      .byte.b	BANK_LEVEL__019_L
   1121  2225		       05		      .byte.b	BANK_LEVEL__019_R
   1122  2226		       06		      .byte.b	BANK_LEVEL__020_L
   1123  2227		       06		      .byte.b	BANK_LEVEL__020_R
   1124  2228		       06		      .byte.b	BANK_LEVEL__021_L
   1125  2229		       06		      .byte.b	BANK_LEVEL__021_R
   1126  222a		       06		      .byte.b	BANK_LEVEL__022_L
   1127  222b		       06		      .byte.b	BANK_LEVEL__022_R
   1128  222c		       06		      .byte.b	BANK_LEVEL__023_L
   1129  222d		       06		      .byte.b	BANK_LEVEL__023_R
   1130  222e		       06		      .byte.b	BANK_LEVEL__024_L
   1131  222f		       06		      .byte.b	BANK_LEVEL__024_R
   1132  2230		       06		      .byte.b	BANK_LEVEL__025_L
   1133  2231		       06		      .byte.b	BANK_LEVEL__025_R
   1134  2232		       06		      .byte.b	BANK_LEVEL__026_L
   1135  2233		       06		      .byte.b	BANK_LEVEL__026_R
   1136  2234		       06		      .byte.b	BANK_LEVEL__027_L
   1137  2235		       06		      .byte.b	BANK_LEVEL__027_R
   1138  2236		       06		      .byte.b	BANK_LEVEL__028_L
   1139  2237		       06		      .byte.b	BANK_LEVEL__028_R
   1140  2238		       06		      .byte.b	BANK_LEVEL__029_L
   1141  2239		       06		      .byte.b	BANK_LEVEL__029_R
   1142  223a		       06		      .byte.b	BANK_LEVEL__030_L
   1143  223b		       06		      .byte.b	BANK_LEVEL__030_R
   1144  223c		       06		      .byte.b	BANK_LEVEL__031_L
   1145  223d		       06		      .byte.b	BANK_LEVEL__031_R
   1146  223e		       06		      .byte.b	BANK_LEVEL__032_L
   1147  223f		       06		      .byte.b	BANK_LEVEL__032_R
   1148  2240		       06		      .byte.b	BANK_LEVEL__033_L
   1149  2241		       06		      .byte.b	BANK_LEVEL__033_R
   1150  2242		       06		      .byte.b	BANK_LEVEL__034_L
   1151  2243		       07		      .byte.b	BANK_LEVEL__034_R
   1152  2244		       07		      .byte.b	BANK_LEVEL__035_L
   1153  2245		       07		      .byte.b	BANK_LEVEL__035_R
   1154  2246		       07		      .byte.b	BANK_LEVEL__036_L
   1155  2247		       07		      .byte.b	BANK_LEVEL__036_R
   1156  2248		       07		      .byte.b	BANK_LEVEL__037_L
   1157  2249		       07		      .byte.b	BANK_LEVEL__037_R
   1158  224a		       07		      .byte.b	BANK_LEVEL__038_L
   1159  224b		       07		      .byte.b	BANK_LEVEL__038_R
   1160  224c		       07		      .byte.b	BANK_LEVEL__039_L
   1161  224d		       07		      .byte.b	BANK_LEVEL__039_R
   1162  224e		       07		      .byte.b	BANK_LEVEL__040_L
   1163  224f		       07		      .byte.b	BANK_LEVEL__040_R
   1164  2250
   1165  2250		       07		      .byte.b	BANK_LEVEL__041_L
   1166  2251		       07		      .byte.b	BANK_LEVEL__041_R
   1167  2252		       07		      .byte.b	BANK_LEVEL__042_L
   1168  2253		       07		      .byte.b	BANK_LEVEL__042_R
   1169  2254		       07		      .byte.b	BANK_LEVEL__043_L
   1170  2255		       07		      .byte.b	BANK_LEVEL__043_R
   1171  2256		       07		      .byte.b	BANK_LEVEL__044_L
   1172  2257		       07		      .byte.b	BANK_LEVEL__044_R
   1173  2258		       07		      .byte.b	BANK_LEVEL__045_L
   1174  2259		       07		      .byte.b	BANK_LEVEL__045_R
   1175  225a		       07		      .byte.b	BANK_LEVEL__046_L
   1176  225b		       07		      .byte.b	BANK_LEVEL__046_R
   1177  225c		       07		      .byte.b	BANK_LEVEL__047_L
   1178  225d		       07		      .byte.b	BANK_LEVEL__047_R
   1179  225e				  -	      if	0
   1180  225e				  -	      .byte	BANK_LEVEL__048_L
   1181  225e				  -	      .byte	BANK_LEVEL__048_R
   1182  225e				  -	      .byte	BANK_LEVEL__049_L
   1183  225e				  -	      .byte	BANK_LEVEL__049_R
   1184  225e				  -
   1185  225e				  -	      .byte	BANK_LEVEL__050_L
   1186  225e				  -	      .byte	BANK_LEVEL__050_R
   1187  225e				  -	      .byte	BANK_LEVEL__051_L
   1188  225e				  -	      .byte	BANK_LEVEL__051_R
   1189  225e				  -	      .byte	BANK_LEVEL__052_L
   1190  225e				  -	      .byte	BANK_LEVEL__052_R
   1191  225e				  -	      .byte	BANK_LEVEL__053_L
   1192  225e				  -	      .byte	BANK_LEVEL__053_R
   1193  225e				  -	      .byte	BANK_LEVEL__054_L
   1194  225e				  -	      .byte	BANK_LEVEL__054_R
   1195  225e				  -	      .byte	BANK_LEVEL__055_L
   1196  225e				  -	      .byte	BANK_LEVEL__055_R
   1197  225e				  -	      .byte	BANK_LEVEL__056_L
   1198  225e				  -	      .byte	BANK_LEVEL__056_R
   1199  225e				  -	      .byte	BANK_LEVEL__057_L
   1200  225e				  -	      .byte	BANK_LEVEL__057_R
   1201  225e				  -	      .byte	BANK_LEVEL__058_L
   1202  225e				  -	      .byte	BANK_LEVEL__058_R
   1203  225e				  -	      .byte	BANK_LEVEL__059_L
   1204  225e				  -	      .byte	BANK_LEVEL__059_R
   1205  225e				  -
   1206  225e				  -	      .byte	BANK_LEVEL__060_R
   1207  225e				  -	      .byte	BANK_LEVEL__061_R
   1208  225e				  -	      .byte	BANK_LEVEL__061_L
   1209  225e				  -	      .byte	BANK_LEVEL__062_L
   1210  225e				  -	      .byte	BANK_LEVEL__062_R
   1211  225e				  -	      .byte	BANK_LEVEL__063_L
   1212  225e				  -	      .byte	BANK_LEVEL__063_R
   1213  225e				  -	      .byte	BANK_LEVEL__064_R
   1214  225e				  -	      .byte	BANK_LEVEL__064_L
   1215  225e				  -	      .byte	BANK_LEVEL__065_R
   1216  225e				  -	      .byte	BANK_LEVEL__065_L
   1217  225e				  -	      .byte	BANK_LEVEL__066_R
   1218  225e				  -	      .byte	BANK_LEVEL__066_L
   1219  225e					      endif
   1220  225e		       09		      .byte.b	BANK_LEVEL__067_R
   1221  225f		       09		      .byte.b	BANK_LEVEL__067_L
   1222  2260		       09		      .byte.b	BANK_LEVEL__068_R
   1223  2261		       09		      .byte.b	BANK_LEVEL__068_L
   1224  2262		       09		      .byte.b	BANK_LEVEL__069_R
   1225  2263		       09		      .byte.b	BANK_LEVEL__069_L
   1226  2264
   1227  2264				  -	      if	0
   1228  2264				  -	      .byte	BANK_LEVEL__103_Arielle
   1229  2264				  -	      .byte	BANK_LEVEL__103_Ajalae
   1230  2264				  -	      .byte	BANK_LEVEL__103_Adin
   1231  2264				  -	      .byte	BANK_LEVEL__102_Raven
   1232  2264				  -	      .byte	BANK_LEVEL__102_Oralia
   1233  2264				  -	      .byte	BANK_LEVEL__102_Natalie
   1234  2264				  -	      .byte	BANK_LEVEL__102_Mirabel
   1235  2264				  -	      .byte	BANK_LEVEL__1XJH_Tara_Gelson
   1236  2264				  -	      .byte	BANK_LEVEL__1R7X_Alison
   1237  2264				  -	      .byte	BANK_LEVEL__1KWD_Cecile_Clayworth
   1238  2264				  -	      .byte	BANK_LEVEL__1EKT_Samantha_Gelson
   1239  2264				  -	      .byte	BANK_LEVEL__0VM5_Andrea_Wadd
   1240  2264				  -	      .byte	BANK_LEVEL__0PAL_Jill_Leatherby
   1241  2264				  -	      .byte	BANK_LEVEL__0IZ1_Sophia
   1242  2264				  -	      .byte	BANK_LEVEL__0CNH_Alice
   1243  2264				  -
   1244  2264				  -	      .byte	BANK_LEVEL__122_Maya
   1245  2264				  -
   1246  2264				  -	      .byte	BANK_LEVEL_Thomas_Reinke16
   1247  2264				  -
   1248  2264				  -	      .byte	BANK_LEVEL__Hof_0
   1249  2264				  -	      .byte	BANK_LEVEL__Hof_1
   1250  2264				  -	      .byte	BANK_LEVEL__Hof_2
   1251  2264				  -	      .byte	BANK_LEVEL__Hof_3
   1252  2264				  -	      .byte	BANK_LEVEL__Hof_4
   1253  2264				  -	      .byte	BANK_LEVEL__Hof_5
   1254  2264				  -	      .byte	BANK_LEVEL__Hof_6
   1255  2264				  -	      .byte	BANK_LEVEL__Hof_7
   1256  2264				  -	      .byte	BANK_LEVEL__Hof_8
   1257  2264				  -	      .byte	BANK_LEVEL__Hof_9
   1258  2264				  -
   1259  2264				  -	      .byte	BANK_LEVEL_Zone_26_0
   1260  2264				  -	      .byte	BANK_LEVEL_Zone_26_1
   1261  2264				  -	      .byte	BANK_LEVEL_Zone_26_2
   1262  2264				  -	      .byte	BANK_LEVEL_Zone_26_3
   1263  2264				  -	      .byte	BANK_LEVEL_Zone_26_4
   1264  2264				  -	      .byte	BANK_LEVEL_Zone_26_5
   1265  2264				  -	      .byte	BANK_LEVEL_Zone_26_6
   1266  2264				  -	      .byte	BANK_LEVEL_Zone_26_7
   1267  2264				  -	      .byte	BANK_LEVEL_Zone_26_8
   1268  2264				  -	      .byte	BANK_LEVEL_Zone_26_9
   1269  2264				  -
   1270  2264				  -	      .byte	BANK_LEVEL_Zone_26_10
   1271  2264				  -	      .byte	BANK_LEVEL_Zone_26_11
   1272  2264				  -	      .byte	BANK_LEVEL_Zone_26_12
   1273  2264				  -	      .byte	BANK_LEVEL_Zone_26_13
   1274  2264				  -	      .byte	BANK_LEVEL_Zone_26_14
   1275  2264				  -	      .byte	BANK_LEVEL_Zone_26_15
   1276  2264				  -	      .byte	BANK_LEVEL_Zone_26_16
   1277  2264				  -	      .byte	BANK_LEVEL_Zone_26_17
   1278  2264				  -	      .byte	BANK_LEVEL_Zone_26_18
   1279  2264				  -	      .byte	BANK_LEVEL_Zone_26_19
   1280  2264				  -
   1281  2264				  -	      .byte	BANK_LEVEL_Zone_26_20
   1282  2264				  -	      .byte	BANK_LEVEL_Zone_26_21
   1283  2264				  -	      .byte	BANK_LEVEL_Zone_26_22
   1284  2264				  -	      .byte	BANK_LEVEL_Zone_26_23
   1285  2264				  -	      .byte	BANK_LEVEL_Zone_26_24
   1286  2264				  -	      .byte	BANK_LEVEL_Zone_26_25
   1287  2264				  -	      .byte	BANK_LEVEL_Zone_26_26
   1288  2264				  -	      .byte	BANK_LEVEL_Zone_26_27
   1289  2264				  -	      .byte	BANK_LEVEL_Zone_26_28
   1290  2264				  -	      .byte	BANK_LEVEL_Zone_26_29
   1291  2264				  -
   1292  2264				  -	      .byte	BANK_LEVEL_Zone_26_30
   1293  2264				  -	      .byte	BANK_LEVEL_Zone_26_31
   1294  2264				  -	      .byte	BANK_LEVEL_Zone_26_32
   1295  2264				  -	      .byte	BANK_LEVEL_Zone_26_33
   1296  2264				  -	      .byte	BANK_LEVEL_Zone_26_34
   1297  2264				  -	      .byte	BANK_LEVEL_Zone_26_35
   1298  2264					      endif
   1299  2264				  -	      if	0
   1300  2264				  -	      .byte	BANK_LEVEL_Zone_26_36
   1301  2264				  -	      .byte	BANK_LEVEL_Zone_26_37
   1302  2264				  -	      .byte	BANK_LEVEL_Zone_26_38
   1303  2264				  -	      .byte	BANK_LEVEL_Zone_26_39
   1304  2264				  -
   1305  2264				  -	      .byte	BANK_LEVEL_Zone_26_40
   1306  2264				  -	      .byte	BANK_LEVEL_Zone_26_41
   1307  2264				  -	      .byte	BANK_LEVEL_Zone_26_42
   1308  2264				  -	      .byte	BANK_LEVEL_Zone_26_43
   1309  2264				  -	      .byte	BANK_LEVEL_Zone_26_44
   1310  2264				  -	      .byte	BANK_LEVEL_Zone_26_45
   1311  2264				  -	      .byte	BANK_LEVEL_Zone_26_46
   1312  2264				  -	      .byte	BANK_LEVEL_Zone_26_47
   1313  2264				  -	      .byte	BANK_LEVEL_Zone_26_48
   1314  2264				  -	      .byte	BANK_LEVEL_Zone_26_49
   1315  2264				  -
   1316  2264				  -	      .byte	BANK_LEVEL_Zone_26_50
   1317  2264				  -	      .byte	BANK_LEVEL_Zone_26_51
   1318  2264				  -	      .byte	BANK_LEVEL_Zone_26_52
   1319  2264				  -	      .byte	BANK_LEVEL_Zone_26_53
   1320  2264				  -	      .byte	BANK_LEVEL_Zone_26_54
   1321  2264				  -	      .byte	BANK_LEVEL_Zone_26_55
   1322  2264				  -	      .byte	BANK_LEVEL_Zone_26_56
   1323  2264				  -	      .byte	BANK_LEVEL_Zone_26_57
   1324  2264				  -	      .byte	BANK_LEVEL_Zone_26_58
   1325  2264				  -	      .byte	BANK_LEVEL_Zone_26_59
   1326  2264				  -
   1327  2264				  -	      .byte	BANK_LEVEL_Zone_26_60
   1328  2264				  -	      .byte	BANK_LEVEL_Zone_26_61
   1329  2264				  -	      .byte	BANK_LEVEL_Zone_26_62
   1330  2264				  -	      .byte	BANK_LEVEL_Zone_26_63
   1331  2264				  -	      .byte	BANK_LEVEL_Zone_26_64
   1332  2264				  -	      .byte	BANK_LEVEL_Zone_26_65
   1333  2264				  -	      .byte	BANK_LEVEL_Zone_26_66
   1334  2264				  -	      .byte	BANK_LEVEL_Zone_26_67
   1335  2264					      endif
   1336  2264				  -	      if	0
   1337  2264				  -	      .byte	BANK_LEVEL_Zone_26_68
   1338  2264				  -	      .byte	BANK_LEVEL_Zone_26_69
   1339  2264				  -
   1340  2264				  -	      .byte	BANK_LEVEL_Zone_26_70
   1341  2264				  -	      .byte	BANK_LEVEL_Zone_26_71
   1342  2264				  -	      .byte	BANK_LEVEL_Zone_26_72
   1343  2264				  -	      .byte	BANK_LEVEL_Zone_26_73
   1344  2264				  -	      .byte	BANK_LEVEL_Zone_26_74
   1345  2264				  -	      .byte	BANK_LEVEL_Zone_26_75
   1346  2264				  -	      .byte	BANK_LEVEL_Zone_26_76
   1347  2264				  -	      .byte	BANK_LEVEL_Zone_26_77
   1348  2264				  -	      .byte	BANK_LEVEL_Zone_26_78
   1349  2264				  -	      .byte	BANK_LEVEL_Zone_26_79
   1350  2264				  -
   1351  2264				  -	      .byte	BANK_LEVEL_Zone_26_80
   1352  2264				  -	      .byte	BANK_LEVEL_Zone_26_81
   1353  2264				  -	      .byte	BANK_LEVEL_Zone_26_82
   1354  2264				  -	      .byte	BANK_LEVEL_Zone_26_83
   1355  2264				  -	      .byte	BANK_LEVEL_Zone_26_84
   1356  2264				  -	      .byte	BANK_LEVEL_Zone_26_85
   1357  2264				  -	      .byte	BANK_LEVEL_Zone_26_86
   1358  2264				  -	      .byte	BANK_LEVEL_Zone_26_87
   1359  2264				  -	      .byte	BANK_LEVEL_Zone_26_88
   1360  2264				  -	      .byte	BANK_LEVEL_Zone_26_89
   1361  2264				  -
   1362  2264				  -	      .byte	BANK_LEVEL_Zone_26_90
   1363  2264				  -	      .byte	BANK_LEVEL_Zone_26_91
   1364  2264				  -	      .byte	BANK_LEVEL_Zone_26_92
   1365  2264				  -	      .byte	BANK_LEVEL_Zone_26_93
   1366  2264				  -	      .byte	BANK_LEVEL_Zone_26_94
   1367  2264				  -	      .byte	BANK_LEVEL_Zone_26_95
   1368  2264				  -	      .byte	BANK_LEVEL_Zone_26_96
   1369  2264				  -	      .byte	BANK_LEVEL_Zone_26_97
   1370  2264				  -	      .byte	BANK_LEVEL_Zone_26_98
   1371  2264				  -	      .byte	BANK_LEVEL_Zone_26_99
   1372  2264					      endif
   1373  2264				  -	      if	0
   1374  2264				  -	      .byte	BANK_LEVEL_Zone_26_100
   1375  2264				  -	      .byte	BANK_LEVEL_Zone_26_101
   1376  2264				  -	      .byte	BANK_LEVEL_Zone_26_102
   1377  2264				  -	      .byte	BANK_LEVEL_Zone_26_103
   1378  2264				  -	      .byte	BANK_LEVEL_Zone_26_104
   1379  2264				  -	      .byte	BANK_LEVEL_Zone_26_105
   1380  2264				  -	      .byte	BANK_LEVEL_Zone_26_106
   1381  2264				  -	      .byte	BANK_LEVEL_Zone_26_107
   1382  2264				  -	      .byte	BANK_LEVEL_Zone_26_108
   1383  2264				  -	      .byte	BANK_LEVEL_Zone_26_109
   1384  2264				  -
   1385  2264				  -	      .byte	BANK_LEVEL_Zone_26_110
   1386  2264				  -	      .byte	BANK_LEVEL_Zone_26_111
   1387  2264				  -	      .byte	BANK_LEVEL_Zone_26_112
   1388  2264				  -	      .byte	BANK_LEVEL_Zone_26_113
   1389  2264				  -	      .byte	BANK_LEVEL_Zone_26_114
   1390  2264				  -	      .byte	BANK_LEVEL_Zone_26_115
   1391  2264				  -	      .byte	BANK_LEVEL_Zone_26_116
   1392  2264				  -
   1393  2264				  -	      .byte	BANK_LEVEL_Rectangled_0
   1394  2264				  -	      .byte	BANK_LEVEL_Rectangled_1
   1395  2264				  -	      .byte	BANK_LEVEL_Rectangled_2
   1396  2264				  -	      .byte	BANK_LEVEL_Rectangled_3
   1397  2264				  -	      .byte	BANK_LEVEL_Rectangled_4
   1398  2264				  -	      .byte	BANK_LEVEL_Rectangled_5
   1399  2264				  -	      .byte	BANK_LEVEL_Rectangled_6
   1400  2264				  -	      .byte	BANK_LEVEL_Rectangled_7
   1401  2264				  -	      .byte	BANK_LEVEL_Rectangled_8
   1402  2264				  -	      .byte	BANK_LEVEL_Rectangled_9
   1403  2264				  -	      .byte	BANK_LEVEL_Rectangled_10
   1404  2264				  -
   1405  2264				  -	      .byte	BANK_LEVEL_Scoria_3_0
   1406  2264				  -	      .byte	BANK_LEVEL_Scoria_3_1
   1407  2264				  -	      .byte	BANK_LEVEL_Scoria_3_2
   1408  2264				  -	      .byte	BANK_LEVEL_Scoria_3_3
   1409  2264				  -	      .byte	BANK_LEVEL_Scoria_3_4
   1410  2264				  -	      .byte	BANK_LEVEL_Scoria_3_5
   1411  2264				  -	      .byte	BANK_LEVEL_Scoria_3_6
   1412  2264				  -	      .byte	BANK_LEVEL_Scoria_3_7
   1413  2264				  -	      .byte	BANK_LEVEL_Scoria_3_8
   1414  2264				  -	      .byte	BANK_LEVEL_Scoria_3_9
   1415  2264				  -	      .byte	BANK_LEVEL_Scoria_3_10
   1416  2264				  -	      .byte	BANK_LEVEL_Scoria_3_11
   1417  2264				  -	      .byte	BANK_LEVEL_Scoria_3_12
   1418  2264				  -	      .byte	BANK_LEVEL_Scoria_3_13
   1419  2264				  -	      .byte	BANK_LEVEL_Scoria_3_14
   1420  2264				  -	      .byte	BANK_LEVEL_Scoria_3_15
   1421  2264				  -	      .byte	BANK_LEVEL_Scoria_3_16
   1422  2264				  -	      .byte	BANK_LEVEL_Scoria_3_17
   1423  2264				  -	      .byte	BANK_LEVEL_Scoria_3_18
   1424  2264				  -	      .byte	BANK_LEVEL_Scoria_3_19
   1425  2264				  -
   1426  2264				  -	      .byte	BANK_LEVEL_Sokompact_0
   1427  2264				  -	      .byte	BANK_LEVEL_Sokompact_1
   1428  2264				  -	      .byte	BANK_LEVEL_Sokompact_2
   1429  2264				  -	      .byte	BANK_LEVEL_Sokompact_3
   1430  2264				  -	      .byte	BANK_LEVEL_Sokompact_4
   1431  2264				  -	      .byte	BANK_LEVEL_Sokompact_5
   1432  2264				  -	      .byte	BANK_LEVEL_Sokompact_6
   1433  2264				  -	      .byte	BANK_LEVEL_Sokompact_7
   1434  2264				  -	      .byte	BANK_LEVEL_Sokompact_8
   1435  2264				  -	      .byte	BANK_LEVEL_Sokompact_9
   1436  2264				  -	      .byte	BANK_LEVEL_Sokompact_10
   1437  2264				  -	      .byte	BANK_LEVEL_Sokompact_11
   1438  2264				  -	      .byte	BANK_LEVEL_Sokompact_12
   1439  2264				  -	      .byte	BANK_LEVEL_Sokompact_13
   1440  2264				  -	      .byte	BANK_LEVEL_Sokompact_14
   1441  2264				  -	      .byte	BANK_LEVEL_Sokompact_15
   1442  2264				  -	      .byte	BANK_LEVEL_Sokompact_16
   1443  2264				  -	      .byte	BANK_LEVEL_Sokompact_17
   1444  2264				  -	      .byte	BANK_LEVEL_Sokompact_18
   1445  2264				  -	      .byte	BANK_LEVEL_Sokompact_19
   1446  2264				  -	      .byte	BANK_LEVEL_Sokompact_20
   1447  2264				  -	      .byte	BANK_LEVEL_Sokompact_21
   1448  2264				  -	      .byte	BANK_LEVEL_Sokompact_22
   1449  2264				  -	      .byte	BANK_LEVEL_Sokompact_23
   1450  2264				  -	      .byte	BANK_LEVEL_Sokompact_24
   1451  2264				  -	      .byte	BANK_LEVEL_Sokompact_25
   1452  2264				  -	      .byte	BANK_LEVEL_Sokompact_26
   1453  2264				  -	      .byte	BANK_LEVEL_Sokompact_27
   1454  2264				  -	      .byte	BANK_LEVEL_Sokompact_28
   1455  2264				  -	      .byte	BANK_LEVEL_Sokompact_29
   1456  2264				  -	      .byte	BANK_LEVEL_Sokompact_30
   1457  2264				  -	      .byte	BANK_LEVEL_Sokompact_31
   1458  2264				  -	      .byte	BANK_LEVEL_Sokompact_32
   1459  2264				  -	      .byte	BANK_LEVEL_Sokompact_33
   1460  2264				  -	      .byte	BANK_LEVEL_Sokompact_34
   1461  2264				  -	      .byte	BANK_LEVEL_Sokompact_35
   1462  2264				  -	      .byte	BANK_LEVEL_Sokompact_36
   1463  2264				  -	      .byte	BANK_LEVEL_Sokompact_37
   1464  2264				  -	      .byte	BANK_LEVEL_Sokompact_38
   1465  2264				  -	      .byte	BANK_LEVEL_Sokompact_39
   1466  2264				  -	      .byte	BANK_LEVEL_Sokompact_40
   1467  2264				  -	      .byte	BANK_LEVEL_Sokompact_41
   1468  2264				  -	      .byte	BANK_LEVEL_Sokompact_42
   1469  2264				  -	      .byte	BANK_LEVEL_Sokompact_43
   1470  2264				  -	      .byte	BANK_LEVEL_Sokompact_44
   1471  2264				  -	      .byte	BANK_LEVEL_Sokompact_45
   1472  2264				  -	      .byte	BANK_LEVEL_Sokompact_46
   1473  2264				  -	      .byte	BANK_LEVEL_Sokompact_47
   1474  2264				  -	      .byte	BANK_LEVEL_Sokompact_48
   1475  2264				  -	      .byte	BANK_LEVEL_Sokompact_49
   1476  2264				  -	      .byte	BANK_LEVEL_Sokompact_50
   1477  2264				  -
   1478  2264				  -
   1479  2264				  -	      .byte	BANK_LEVEL_SokoStation_0
   1480  2264				  -	      .byte	BANK_LEVEL_SokoStation_1
   1481  2264				  -	      .byte	BANK_LEVEL_SokoStation_2
   1482  2264				  -	      .byte	BANK_LEVEL_SokoStation_3
   1483  2264				  -	      .byte	BANK_LEVEL_SokoStation_4
   1484  2264				  -	      .byte	BANK_LEVEL_SokoStation_5
   1485  2264				  -	      .byte	BANK_LEVEL_SokoStation_6
   1486  2264				  -	      .byte	BANK_LEVEL_SokoStation_7
   1487  2264				  -	      .byte	BANK_LEVEL_SokoStation_8
   1488  2264				  -	      .byte	BANK_LEVEL_SokoStation_9
   1489  2264				  -	      .byte	BANK_LEVEL_SokoStation_10
   1490  2264				  -	      .byte	BANK_LEVEL_SokoStation_11
   1491  2264				  -	      .byte	BANK_LEVEL_SokoStation_12
   1492  2264				  -	      .byte	BANK_LEVEL_SokoStation_13
   1493  2264				  -	      .byte	BANK_LEVEL_SokoStation_14
   1494  2264				  -	      .byte	BANK_LEVEL_SokoStation_15
   1495  2264				  -	      .byte	BANK_LEVEL_SokoStation_16
   1496  2264				  -	      .byte	BANK_LEVEL_SokoStation_17
   1497  2264				  -	      .byte	BANK_LEVEL_SokoStation_18
   1498  2264				  -	      .byte	BANK_LEVEL_SokoStation_19
   1499  2264				  -	      .byte	BANK_LEVEL_SokoStation_20
   1500  2264				  -	      .byte	BANK_LEVEL_SokoStation_21
   1501  2264				  -			;.byte BANK_LEVEL_SokoStation_22
   1502  2264				  -	      .byte	BANK_LEVEL_SokoStation_23
   1503  2264				  -	      .byte	BANK_LEVEL_SokoStation_24
   1504  2264				  -	      .byte	BANK_LEVEL_SokoStation_25
   1505  2264				  -	      .byte	BANK_LEVEL_SokoStation_26
   1506  2264				  -	      .byte	BANK_LEVEL_SokoStation_27
   1507  2264				  -	      .byte	BANK_LEVEL_SokoStation_28
   1508  2264				  -	      .byte	BANK_LEVEL_SokoStation_29
   1509  2264				  -	      .byte	BANK_LEVEL_SokoStation_30
   1510  2264				  -	      .byte	BANK_LEVEL_SokoStation_31
   1511  2264				  -	      .byte	BANK_LEVEL_SokoStation_32
   1512  2264				  -	      .byte	BANK_LEVEL_SokoStation_33
   1513  2264				  -	      .byte	BANK_LEVEL_SokoStation_34
   1514  2264				  -	      .byte	BANK_LEVEL_SokoStation_35
   1515  2264				  -	      .byte	BANK_LEVEL_SokoStation_36
   1516  2264				  -	      .byte	BANK_LEVEL_SokoStation_37
   1517  2264				  -	      .byte	BANK_LEVEL_SokoStation_38
   1518  2264				  -	      .byte	BANK_LEVEL_SokoStation_39
   1519  2264				  -	      .byte	BANK_LEVEL_SokoStation_40
   1520  2264				  -	      .byte	BANK_LEVEL_SokoStation_41
   1521  2264				  -	      .byte	BANK_LEVEL_SokoStation_42
   1522  2264				  -	      .byte	BANK_LEVEL_SokoStation_43
   1523  2264				  -	      .byte	BANK_LEVEL_SokoStation_44
   1524  2264				  -	      .byte	BANK_LEVEL_SokoStation_45
   1525  2264				  -	      .byte	BANK_LEVEL_SokoStation_46
   1526  2264				  -	      .byte	BANK_LEVEL_SokoStation_47
   1527  2264				  -	      .byte	BANK_LEVEL_SokoStation_48
   1528  2264				  -	      .byte	BANK_LEVEL_SokoStation_49
   1529  2264				  -	      .byte	BANK_LEVEL_SokoStation_50
   1530  2264				  -	      .byte	BANK_LEVEL_SokoStation_51
   1531  2264				  -	      .byte	BANK_LEVEL_SokoStation_52
   1532  2264				  -	      .byte	BANK_LEVEL_SokoStation_53
   1533  2264				  -	      .byte	BANK_LEVEL_SokoStation_54
   1534  2264				  -	      .byte	BANK_LEVEL_SokoStation_55
   1535  2264				  -	      .byte	BANK_LEVEL_SokoStation_56
   1536  2264				  -	      .byte	BANK_LEVEL_SokoStation_57
   1537  2264				  -	      .byte	BANK_LEVEL_SokoStation_58
   1538  2264				  -	      .byte	BANK_LEVEL_SokoStation_59
   1539  2264				  -	      .byte	BANK_LEVEL_SokoStation_60
   1540  2264				  -	      .byte	BANK_LEVEL_SokoStation_61
   1541  2264				  -	      .byte	BANK_LEVEL_SokoStation_62
   1542  2264				  -	      .byte	BANK_LEVEL_SokoStation_63
   1543  2264				  -	      .byte	BANK_LEVEL_SokoStation_64
   1544  2264				  -	      .byte	BANK_LEVEL_SokoStation_65
   1545  2264				  -	      .byte	BANK_LEVEL_SokoStation_66
   1546  2264				  -	      .byte	BANK_LEVEL_SokoStation_67
   1547  2264				  -	      .byte	BANK_LEVEL_SokoStation_68
   1548  2264				  -	      .byte	BANK_LEVEL_SokoStation_69
   1549  2264				  -	      .byte	BANK_LEVEL_SokoStation_70
   1550  2264				  -	      .byte	BANK_LEVEL_SokoStation_71
   1551  2264				  -	      .byte	BANK_LEVEL_SokoStation_72
   1552  2264				  -	      .byte	BANK_LEVEL_SokoStation_73
   1553  2264				  -	      .byte	BANK_LEVEL_SokoStation_74
   1554  2264				  -	      .byte	BANK_LEVEL_SokoStation_75
   1555  2264				  -	      .byte	BANK_LEVEL_SokoStation_76
   1556  2264				  -	      .byte	BANK_LEVEL_SokoStation_77
   1557  2264				  -	      .byte	BANK_LEVEL_SokoStation_78
   1558  2264				  -	      .byte	BANK_LEVEL_SokoStation_79
   1559  2264				  -	      .byte	BANK_LEVEL_SokoStation_80
   1560  2264				  -	      .byte	BANK_LEVEL_SokoStation_81
   1561  2264				  -	      .byte	BANK_LEVEL_SokoStation_82
   1562  2264				  -	      .byte	BANK_LEVEL_SokoStation_83
   1563  2264				  -	      .byte	BANK_LEVEL_SokoStation_84
   1564  2264				  -	      .byte	BANK_LEVEL_SokoStation_85
   1565  2264				  -	      .byte	BANK_LEVEL_SokoStation_86
   1566  2264				  -	      .byte	BANK_LEVEL_SokoStation_87
   1567  2264				  -	      .byte	BANK_LEVEL_SokoStation_88
   1568  2264				  -	      .byte	BANK_LEVEL_SokoStation_89
   1569  2264				  -	      .byte	BANK_LEVEL_SokoStation_90
   1570  2264				  -	      .byte	BANK_LEVEL_SokoStation_91
   1571  2264				  -	      .byte	BANK_LEVEL_SokoStation_92
   1572  2264				  -	      .byte	BANK_LEVEL_SokoStation_93
   1573  2264				  -	      .byte	BANK_LEVEL_SokoStation_94
   1574  2264				  -	      .byte	BANK_LEVEL_SokoStation_95
   1575  2264				  -	      .byte	BANK_LEVEL_SokoStation_96
   1576  2264				  -	      .byte	BANK_LEVEL_SokoStation_97
   1577  2264				  -	      .byte	BANK_LEVEL_SokoStation_98
   1578  2264				  -	      .byte	BANK_LEVEL_SokoStation_99
   1579  2264				  -			; .byte BANK_LEVEL_SokoStation_100
   1580  2264				  -			; .byte BANK_LEVEL_SokoStation_101
   1581  2264				  -			; .byte BANK_LEVEL_SokoStation_102
   1582  2264				  -	      .byte	BANK_LEVEL_SokoStation_103
   1583  2264				  -	      .byte	BANK_LEVEL_SokoStation_104
   1584  2264					      endif
   1585  2264				  -	      if	0
   1586  2264				  -	      .byte	BANK_LEVEL_SokoStation_105
   1587  2264				  -	      .byte	BANK_LEVEL_SokoStation_106
   1588  2264				  -	      .byte	BANK_LEVEL_SokoStation_107
   1589  2264				  -	      .byte	BANK_LEVEL_SokoStation_108
   1590  2264				  -	      .byte	BANK_LEVEL_SokoStation_109
   1591  2264					      endif
   1592  2264
   1593  2264
   1594  2264				  -	      IF	(* - LevelInfoBANK != MAX_LEVEL)
   1595  2264				  -	      ECHO	"ERROR: Incorrect LevelInfoBANK table!"
   1596  2264				  -	      ERR
   1597  2264					      ENDIF
   1598  2264
   1599  2264
      0  2264					      DEFINE_SUBROUTINE	GetLevelAddress
      1  2264		       00 04	   BANK_GetLevelAddress =	_CURRENT_BANK
      2  2264					      SUBROUTINE
      3  2264				   GetLevelAddress
   1601  2264							; returns address,bank of level #
   1602  2264							; Uses overlay LevelLookup
   1603  2264							; relies on tables being page-aligned
   1604  2264
   1605  2264		       18		      clc
   1606  2265		       a5 b1		      lda	levelX
   1607  2267		       85 db		      sta	levelTable
   1608  2269							;		  lda levelX+1
   1609  2269		       a9 f0		      lda	#>LevelInfoLO
   1610  226b		       85 dc		      sta	levelTable+1
   1611  226d
   1612  226d		       a0 00		      ldy	#0
   1613  226f		       b1 db		      lda	(levelTable),y
   1614  2271		       85 ba		      sta	Board_AddressR
   1615  2273
   1616  2273							;		  lda levelX+1
   1617  2273		       a9 f1		      lda	#>LevelInfoHI
   1618  2275		       85 dc		      sta	levelTable+1
   1619  2277
   1620  2277		       b1 db		      lda	(levelTable),y
   1621  2279		       85 bb		      sta	Board_AddressR+1
   1622  227b
   1623  227b							;lda levelX+1
   1624  227b		       a9 f2		      lda	#>LevelInfoBANK
   1625  227d		       85 dc		      sta	levelTable+1
   1626  227f
   1627  227f		       b1 db		      lda	(levelTable),y
   1628  2281		       85 ab		      sta	LEVEL_bank
   1629  2283
   1630  2283		       60		      rts
   1631  2284
   1632  2284
      0  2284					      CHECK_BANK_SIZE	"LEVELS_TABLES -- full 2K"
      1  2284		       02 84	   .TEMP      =	* - BANK_START
 LEVELS_TABLES -- full 2K (2K) SIZE =  $284 , FREE= $57c
      2  2284					      ECHO	"LEVELS_TABLES -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  2284				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  2284				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  2284				  -	      ERR
      6  2284					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS1.asm LEVEL 2 PASS 3
      0  2284					      include	"BANK_LEVELS1.asm"
      1  2284							;    Sokoboo - a Sokoban implementation
      2  2284							;    using a generic tile-based display engine for the Atari 2600
      3  2284							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  2284							;
      5  2284							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  2284							;
      7  2284							;    Code related to the generic tile-based display engine was developed by
      8  2284							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  2284							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  2284							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  2284							;
     12  2284							;    Code related to music and sound effects uses the TIATracker music player
     13  2284							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  2284							;    directory for Apache licensing details.
     15  2284							;
     16  2284							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  2284							;    See the copyright notices in the License directory for a list of level
     18  2284							;    contributors.
     19  2284							;
     20  2284							;    Except where otherwise indicated, this software is released under the
     21  2284							;    following licensing arrangement...
     22  2284							;
     23  2284							;    This program is free software: you can redistribute it and/or modify
     24  2284							;    it under the terms of the GNU General Public License as published by
     25  2284							;    the Free Software Foundation, either version 3 of the License, or
     26  2284							;    (at your option) any later version.
     27  2284							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  2284
     29  2284							;    This program is distributed in the hope that it will be useful,
     30  2284							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  2284							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  2284							;    GNU General Public License for more details.
     33  2284
      0  2284					      NEWBANK	LEVELS1
      1  2fb5 ????				      SEG	LEVELS1
      2  2800					      ORG	ORIGIN
      3  2800					      RORG	$F000
      4  2800				   BANK_START SET	*
      5  2800				   LEVELS1    SET	ORIGIN / 2048
      6  2800				   ORIGIN     SET	ORIGIN + 2048
      7  2800				   _CURRENT_BANK SET	LEVELS1
     35  2800
     36  2800
     37  2800							;  DEFL _000_SELECT, "12#|#@3-5$.#|10-|10-|12#"
     38  2800
     39  2800							; "SOKWHOLE" collection...
     40  2800
     41  2800
      0  2800					      DEFL	_001_L, "3#|#@#|#$#|#.#|3#"
      0  2800					      START_LEVEL	_001_L
      1  2800				   LEVEL_START SET	*
      2  2800		       00 05	   BANK_LEVEL__001_L =	_CURRENT_BANK
      3  2800				   LEVEL__001_L SUBROUTINE
      4  2800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2800
      2  2800		       33 23 7c 23*	      .byte.b	"3#|#@#|#$#|#.#|3#",0
      0  2812					      END_LEVEL	_001_L
      1  2812		       00 12	   LEVEL_SIZE__001_L =	* - LEVEL_START
      2  2812					      IF	LEVEL_SIZE__001_L > MAX_LEVEL_SIZE
      3  2812				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__001_L
      4  2812					      ENDIF
      0  2812					      DEFL	_001_R, "5#|#.$@#|5#"
      0  2812					      START_LEVEL	_001_R
      1  2812				   LEVEL_START SET	*
      2  2812		       00 05	   BANK_LEVEL__001_R =	_CURRENT_BANK
      3  2812				   LEVEL__001_R SUBROUTINE
      4  2812				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2812
      2  2812		       35 23 7c 23*	      .byte.b	"5#|#.$@#|5#",0
      0  281e					      END_LEVEL	_001_R
      1  281e		       00 0c	   LEVEL_SIZE__001_R =	* - LEVEL_START
      2  281e				  -	      IF	LEVEL_SIZE__001_R > MAX_LEVEL_SIZE
      3  281e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__001_R
      4  281e					      ENDIF
      0  281e					      DEFL	_002_L, "3#2-|#.3#|#*$-#|#2-@#|5#"
      0  281e					      START_LEVEL	_002_L
      1  281e				   LEVEL_START SET	*
      2  281e		       00 05	   BANK_LEVEL__002_L =	_CURRENT_BANK
      3  281e				   LEVEL__002_L SUBROUTINE
      4  281e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  281e
      2  281e		       33 23 32 2d*	      .byte.b	"3#2-|#.3#|#*$-#|#2-@#|5#",0
      0  2837					      END_LEVEL	_002_L
      1  2837		       00 19	   LEVEL_SIZE__002_L =	* - LEVEL_START
      2  2837					      IF	LEVEL_SIZE__002_L > MAX_LEVEL_SIZE
      3  2837				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__002_L
      4  2837					      ENDIF
      0  2837					      DEFL	_002_R, "2-5#-|3#3-2#|#.*-#@-#|2#$3#-#|-#5-#|-7#"
      0  2837					      START_LEVEL	_002_R
      1  2837				   LEVEL_START SET	*
      2  2837		       00 05	   BANK_LEVEL__002_R =	_CURRENT_BANK
      3  2837				   LEVEL__002_R SUBROUTINE
      4  2837				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2837
      2  2837		       32 2d 35 23*	      .byte.b	"2-5#-|3#3-2#|#.*-#@-#|2#$3#-#|-#5-#|-7#",0
      0  285f					      END_LEVEL	_002_R
      1  285f		       00 28	   LEVEL_SIZE__002_R =	* - LEVEL_START
      2  285f					      IF	LEVEL_SIZE__002_R > MAX_LEVEL_SIZE
      3  285f				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__002_R
      4  285f					      ENDIF
      0  285f					      DEFL	_003_L, "4-5#|2-3#3-#|3#.*-#-#|#@$.$#2-#|2#5-2#|-7#-"
      0  285f					      START_LEVEL	_003_L
      1  285f				   LEVEL_START SET	*
      2  285f		       00 05	   BANK_LEVEL__003_L =	_CURRENT_BANK
      3  285f				   LEVEL__003_L SUBROUTINE
      4  285f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  285f
      2  285f		       34 2d 35 23*	      .byte.b	"4-5#|2-3#3-#|3#.*-#-#|#@$.$#2-#|2#5-2#|-7#-",0
      0  288b					      END_LEVEL	_003_L
      1  288b		       00 2c	   LEVEL_SIZE__003_L =	* - LEVEL_START
      2  288b					      IF	LEVEL_SIZE__003_L > MAX_LEVEL_SIZE
      3  288b				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__003_L
      4  288b					      ENDIF
      0  288b					      DEFL	_003_R, "9#|#7-#|#-*2.2#-#|2#$#$#2-#|-#-@3-2#|-7#-"
      0  288b					      START_LEVEL	_003_R
      1  288b				   LEVEL_START SET	*
      2  288b		       00 05	   BANK_LEVEL__003_R =	_CURRENT_BANK
      3  288b				   LEVEL__003_R SUBROUTINE
      4  288b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  288b
      2  288b		       39 23 7c 23*	      .byte.b	"9#|#7-#|#-*2.2#-#|2#$#$#2-#|-#-@3-2#|-7#-",0
      0  28b5					      END_LEVEL	_003_R
      1  28b5		       00 2a	   LEVEL_SIZE__003_R =	* - LEVEL_START
      2  28b5				  -	      IF	LEVEL_SIZE__003_R > MAX_LEVEL_SIZE
      3  28b5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__003_R
      4  28b5					      ENDIF
      0  28b5					      DEFL	_004_L, "5#-|#3-2#|#-.*-#|#2-$@#|#2-3#|4#2-"
      0  28b5					      START_LEVEL	_004_L
      1  28b5				   LEVEL_START SET	*
      2  28b5		       00 05	   BANK_LEVEL__004_L =	_CURRENT_BANK
      3  28b5				   LEVEL__004_L SUBROUTINE
      4  28b5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  28b5
      2  28b5		       35 23 2d 7c*	      .byte.b	"5#-|#3-2#|#-.*-#|#2-$@#|#2-3#|4#2-",0
      0  28d8					      END_LEVEL	_004_L
      1  28d8		       00 23	   LEVEL_SIZE__004_L =	* - LEVEL_START
      2  28d8				  -	      IF	LEVEL_SIZE__004_L > MAX_LEVEL_SIZE
      3  28d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__004_L
      4  28d8					      ENDIF
      0  28d8					      DEFL	_004_R, "-6#|-#4-#|2#-$*$#|#@$3.#|7#"
      0  28d8					      START_LEVEL	_004_R
      1  28d8				   LEVEL_START SET	*
      2  28d8		       00 05	   BANK_LEVEL__004_R =	_CURRENT_BANK
      3  28d8				   LEVEL__004_R SUBROUTINE
      4  28d8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  28d8
      2  28d8		       2d 36 23 7c*	      .byte.b	"-6#|-#4-#|2#-$*$#|#@$3.#|7#",0
      0  28f4					      END_LEVEL	_004_R
      1  28f4		       00 1c	   LEVEL_SIZE__004_R =	* - LEVEL_START
      2  28f4				  -	      IF	LEVEL_SIZE__004_R > MAX_LEVEL_SIZE
      3  28f4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__004_R
      4  28f4					      ENDIF
      0  28f4					      DEFL	_005_L, "3-5#|3-#.$-#|3-#.$-#|4#.#-#|#@$-*2-#|2#3-3#|-5#2-"
      0  28f4					      START_LEVEL	_005_L
      1  28f4				   LEVEL_START SET	*
      2  28f4		       00 05	   BANK_LEVEL__005_L =	_CURRENT_BANK
      3  28f4				   LEVEL__005_L SUBROUTINE
      4  28f4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  28f4
      2  28f4		       33 2d 35 23*	      .byte.b	"3-5#|3-#.$-#|3-#.$-#|4#.#-#|#@$-*2-#|2#3-3#|-5#2-",0
      0  2926					      END_LEVEL	_005_L
      1  2926		       00 32	   LEVEL_SIZE__005_L =	* - LEVEL_START
      2  2926					      IF	LEVEL_SIZE__005_L > MAX_LEVEL_SIZE
      3  2926				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__005_L
      4  2926					      ENDIF
      0  2926					      DEFL	_005_R, "6#2-|#2-@-2#-|#-2#$-2#|#-2#.$-#|#-$3.-#|2#2-#$2#|-2#3-#-|2-5#-"
      0  2926					      START_LEVEL	_005_R
      1  2926				   LEVEL_START SET	*
      2  2926		       00 05	   BANK_LEVEL__005_R =	_CURRENT_BANK
      3  2926				   LEVEL__005_R SUBROUTINE
      4  2926				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2926
      2  2926		       36 23 32 2d*	      .byte.b	"6#2-|#2-@-2#-|#-2#$-2#|#-2#.$-#|#-$3.-#|2#2-#$2#|-2#3-#-|2-5#-",0
      0  2965					      END_LEVEL	_005_R
      1  2965		       00 3f	   LEVEL_SIZE__005_R =	* - LEVEL_START
      2  2965					      IF	LEVEL_SIZE__005_R > MAX_LEVEL_SIZE
      3  2965				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__005_R
      4  2965					      ENDIF
      0  2965					      DEFL	_006_L, "5#3-|#3-3#-|#-#-$.#-|#-#-$.#-|#-#-.*2#|#2-#-$@#|#4-3#|6#2-"
      0  2965					      START_LEVEL	_006_L
      1  2965				   LEVEL_START SET	*
      2  2965		       00 05	   BANK_LEVEL__006_L =	_CURRENT_BANK
      3  2965				   LEVEL__006_L SUBROUTINE
      4  2965				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2965
      2  2965		       35 23 33 2d*	      .byte.b	"5#3-|#3-3#-|#-#-$.#-|#-#-$.#-|#-#-.*2#|#2-#-$@#|#4-3#|6#2-",0
      0  29a0					      END_LEVEL	_006_L
      1  29a0		       00 3b	   LEVEL_SIZE__006_L =	* - LEVEL_START
      2  29a0				  -	      IF	LEVEL_SIZE__006_L > MAX_LEVEL_SIZE
      3  29a0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__006_L
      4  29a0					      ENDIF
      0  29a0					      DEFL	_006_R, "3#4-|#@5#|#$4-#|#2.$#-#|2#*.$-#|-#-.-2#|-2#$-#-|2-#2-#-|2-4#-"
      0  29a0					      START_LEVEL	_006_R
      1  29a0				   LEVEL_START SET	*
      2  29a0		       00 05	   BANK_LEVEL__006_R =	_CURRENT_BANK
      3  29a0				   LEVEL__006_R SUBROUTINE
      4  29a0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  29a0
      2  29a0		       33 23 34 2d*	      .byte.b	"3#4-|#@5#|#$4-#|#2.$#-#|2#*.$-#|-#-.-2#|-2#$-#-|2-#2-#-|2-4#-",0
      0  29de					      END_LEVEL	_006_R
      1  29de		       00 3e	   LEVEL_SIZE__006_R =	* - LEVEL_START
      2  29de				  -	      IF	LEVEL_SIZE__006_R > MAX_LEVEL_SIZE
      3  29de				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__006_R
      4  29de					      ENDIF
      0  29de					      DEFL	_007_L, "6#-|#4-#-|#@-*-#-|#-*.3#|2#-$2-#|-2#3-#|2-5#"
      0  29de					      START_LEVEL	_007_L
      1  29de				   LEVEL_START SET	*
      2  29de		       00 05	   BANK_LEVEL__007_L =	_CURRENT_BANK
      3  29de				   LEVEL__007_L SUBROUTINE
      4  29de				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  29de
      2  29de		       36 23 2d 7c*	      .byte.b	"6#-|#4-#-|#@-*-#-|#-*.3#|2#-$2-#|-2#3-#|2-5#",0
      0  2a0b					      END_LEVEL	_007_L
      1  2a0b		       00 2d	   LEVEL_SIZE__007_L =	* - LEVEL_START
      2  2a0b				  -	      IF	LEVEL_SIZE__007_L > MAX_LEVEL_SIZE
      3  2a0b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__007_L
      4  2a0b					      ENDIF
      0  2a0b					      DEFL	_007_R, "4#4-|#2-2#3-|#-$.2#2-|#2-*.3#|#2-2*$-#|3#3-@#|2-6#"
      0  2a0b					      START_LEVEL	_007_R
      1  2a0b				   LEVEL_START SET	*
      2  2a0b		       00 05	   BANK_LEVEL__007_R =	_CURRENT_BANK
      3  2a0b				   LEVEL__007_R SUBROUTINE
      4  2a0b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2a0b
      2  2a0b		       34 23 34 2d*	      .byte.b	"4#4-|#2-2#3-|#-$.2#2-|#2-*.3#|#2-2*$-#|3#3-@#|2-6#",0
      0  2a3e					      END_LEVEL	_007_R
      1  2a3e		       00 33	   LEVEL_SIZE__007_R =	* - LEVEL_START
      2  2a3e				  -	      IF	LEVEL_SIZE__007_R > MAX_LEVEL_SIZE
      3  2a3e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__007_R
      4  2a3e					      ENDIF
      0  2a3e					      DEFL	_008_L, "2-5#|2-#3-#|-2#.*-#|2#@$.2#|#-$2-#-|#-2#-#-|#4-#-|6#-"
      0  2a3e					      START_LEVEL	_008_L
      1  2a3e				   LEVEL_START SET	*
      2  2a3e		       00 05	   BANK_LEVEL__008_L =	_CURRENT_BANK
      3  2a3e				   LEVEL__008_L SUBROUTINE
      4  2a3e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2a3e
      2  2a3e		       32 2d 35 23*	      .byte.b	"2-5#|2-#3-#|-2#.*-#|2#@$.2#|#-$2-#-|#-2#-#-|#4-#-|6#-",0
      0  2a74					      END_LEVEL	_008_L
      1  2a74		       00 36	   LEVEL_SIZE__008_L =	* - LEVEL_START
      2  2a74				  -	      IF	LEVEL_SIZE__008_L > MAX_LEVEL_SIZE
      3  2a74				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__008_L
      4  2a74					      ENDIF
      0  2a74					      DEFL	_008_R, "-5#3-|2#3-2#2-|#-$-*-2#-|#2-*.$-2#|3#2.-$@#|2-7#"
      0  2a74					      START_LEVEL	_008_R
      1  2a74				   LEVEL_START SET	*
      2  2a74		       00 05	   BANK_LEVEL__008_R =	_CURRENT_BANK
      3  2a74				   LEVEL__008_R SUBROUTINE
      4  2a74				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2a74
      2  2a74		       2d 35 23 33*	      .byte.b	"-5#3-|2#3-2#2-|#-$-*-2#-|#2-*.$-2#|3#2.-$@#|2-7#",0
      0  2aa5					      END_LEVEL	_008_R
      1  2aa5		       00 31	   LEVEL_SIZE__008_R =	* - LEVEL_START
      2  2aa5				  -	      IF	LEVEL_SIZE__008_R > MAX_LEVEL_SIZE
      3  2aa5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__008_R
      4  2aa5					      ENDIF
      0  2aa5					      DEFL	_009_L, "-5#-|2#-$.2#|#@$-.-#|2#-$.$#|-#-$2.#|-2#-$.#|2-5#"
      0  2aa5					      START_LEVEL	_009_L
      1  2aa5				   LEVEL_START SET	*
      2  2aa5		       00 05	   BANK_LEVEL__009_L =	_CURRENT_BANK
      3  2aa5				   LEVEL__009_L SUBROUTINE
      4  2aa5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2aa5
      2  2aa5		       2d 35 23 2d*	      .byte.b	"-5#-|2#-$.2#|#@$-.-#|2#-$.$#|-#-$2.#|-2#-$.#|2-5#",0
      0  2ad7					      END_LEVEL	_009_L
      1  2ad7		       00 32	   LEVEL_SIZE__009_L =	* - LEVEL_START
      2  2ad7				  -	      IF	LEVEL_SIZE__009_L > MAX_LEVEL_SIZE
      3  2ad7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__009_L
      4  2ad7					      ENDIF
      0  2ad7					      DEFL	_009_R, "-3#3-|2#@4#|#-$3-#|#2-$2*#|2#2-*.#|-2#2-.#|2-5#"
      0  2ad7					      START_LEVEL	_009_R
      1  2ad7				   LEVEL_START SET	*
      2  2ad7		       00 05	   BANK_LEVEL__009_R =	_CURRENT_BANK
      3  2ad7				   LEVEL__009_R SUBROUTINE
      4  2ad7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2ad7
      2  2ad7		       2d 33 23 33*	      .byte.b	"-3#3-|2#@4#|#-$3-#|#2-$2*#|2#2-*.#|-2#2-.#|2-5#",0
      0  2b07					      END_LEVEL	_009_R
      1  2b07		       00 30	   LEVEL_SIZE__009_R =	* - LEVEL_START
      2  2b07				  -	      IF	LEVEL_SIZE__009_R > MAX_LEVEL_SIZE
      3  2b07				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__009_R
      4  2b07					      ENDIF
      0  2b07					      DEFL	_010_L, "2-3#-|2-#@#-|3#$#-|#2-.2#|#-$2.#|#-$.$#|#-$.-#|#-$.2#|5#-"
      0  2b07					      START_LEVEL	_010_L
      1  2b07				   LEVEL_START SET	*
      2  2b07		       00 05	   BANK_LEVEL__010_L =	_CURRENT_BANK
      3  2b07				   LEVEL__010_L SUBROUTINE
      4  2b07				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2b07
      2  2b07		       32 2d 33 23*	      .byte.b	"2-3#-|2-#@#-|3#$#-|#2-.2#|#-$2.#|#-$.$#|#-$.-#|#-$.2#|5#-",0
      0  2b41					      END_LEVEL	_010_L
      1  2b41		       00 3a	   LEVEL_SIZE__010_L =	* - LEVEL_START
      2  2b41				  -	      IF	LEVEL_SIZE__010_L > MAX_LEVEL_SIZE
      3  2b41				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__010_L
      4  2b41					      ENDIF
      0  2b41					      DEFL	_010_R, "4#2-|#2-#2-|#-$3#|#-$2.#|#2-*-#|#-$*-#|2#-+2#|-4#-"
      0  2b41					      START_LEVEL	_010_R
      1  2b41				   LEVEL_START SET	*
      2  2b41		       00 05	   BANK_LEVEL__010_R =	_CURRENT_BANK
      3  2b41				   LEVEL__010_R SUBROUTINE
      4  2b41				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2b41
      2  2b41		       34 23 32 2d*	      .byte.b	"4#2-|#2-#2-|#-$3#|#-$2.#|#2-*-#|#-$*-#|2#-+2#|-4#-",0
      0  2b74					      END_LEVEL	_010_R
      1  2b74		       00 33	   LEVEL_SIZE__010_R =	* - LEVEL_START
      2  2b74				  -	      IF	LEVEL_SIZE__010_R > MAX_LEVEL_SIZE
      3  2b74				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__010_R
      4  2b74					      ENDIF
      0  2b74					      DEFL	_011_L, "-4#2-|-#2.3#|2#$*2.#|#@$-$-#|2#-$2-#|-2#2-2#|2-4#-"
      0  2b74					      START_LEVEL	_011_L
      1  2b74				   LEVEL_START SET	*
      2  2b74		       00 05	   BANK_LEVEL__011_L =	_CURRENT_BANK
      3  2b74				   LEVEL__011_L SUBROUTINE
      4  2b74				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2b74
      2  2b74		       2d 34 23 32*	      .byte.b	"-4#2-|-#2.3#|2#$*2.#|#@$-$-#|2#-$2-#|-2#2-2#|2-4#-",0
      0  2ba7					      END_LEVEL	_011_L
      1  2ba7		       00 33	   LEVEL_SIZE__011_L =	* - LEVEL_START
      2  2ba7				  -	      IF	LEVEL_SIZE__011_L > MAX_LEVEL_SIZE
      3  2ba7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__011_L
      4  2ba7					      ENDIF
      0  2ba7					      DEFL	_011_R, "2-3#-|-2#@#-|2#-$#-|#-$-2#|#-.*.#|#-*2.#|#-$-$#|2#3-#|-5#"
      0  2ba7					      START_LEVEL	_011_R
      1  2ba7				   LEVEL_START SET	*
      2  2ba7		       00 05	   BANK_LEVEL__011_R =	_CURRENT_BANK
      3  2ba7				   LEVEL__011_R SUBROUTINE
      4  2ba7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2ba7
      2  2ba7		       32 2d 33 23*	      .byte.b	"2-3#-|-2#@#-|2#-$#-|#-$-2#|#-.*.#|#-*2.#|#-$-$#|2#3-#|-5#",0
      0  2be1					      END_LEVEL	_011_R
      1  2be1		       00 3a	   LEVEL_SIZE__011_R =	* - LEVEL_START
      2  2be1				  -	      IF	LEVEL_SIZE__011_R > MAX_LEVEL_SIZE
      3  2be1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__011_R
      4  2be1					      ENDIF
      0  2be1					      DEFL	_012_L, "7#3-|#5-2#2-|#-3$2.#2-|2#2-.*$3#|-3#2.-$@#|3-7#"
      0  2be1					      START_LEVEL	_012_L
      1  2be1				   LEVEL_START SET	*
      2  2be1		       00 05	   BANK_LEVEL__012_L =	_CURRENT_BANK
      3  2be1				   LEVEL__012_L SUBROUTINE
      4  2be1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2be1
      2  2be1		       37 23 33 2d*	      .byte.b	"7#3-|#5-2#2-|#-3$2.#2-|2#2-.*$3#|-3#2.-$@#|3-7#",0
      0  2c11					      END_LEVEL	_012_L
      1  2c11		       00 30	   LEVEL_SIZE__012_L =	* - LEVEL_START
      2  2c11				  -	      IF	LEVEL_SIZE__012_L > MAX_LEVEL_SIZE
      3  2c11				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__012_L
      4  2c11					      ENDIF
      0  2c11					      DEFL	_012_R, "-6#2-|2#2-.-2#-|#@$-*$-2#|2#-$.$2-#|-3#.*2-#|3-#.2-2#|3-5#-"
      0  2c11					      START_LEVEL	_012_R
      1  2c11				   LEVEL_START SET	*
      2  2c11		       00 05	   BANK_LEVEL__012_R =	_CURRENT_BANK
      3  2c11				   LEVEL__012_R SUBROUTINE
      4  2c11				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2c11
      2  2c11		       2d 36 23 32*	      .byte.b	"-6#2-|2#2-.-2#-|#@$-*$-2#|2#-$.$2-#|-3#.*2-#|3-#.2-2#|3-5#-",0
      0  2c4d					      END_LEVEL	_012_R
      1  2c4d		       00 3c	   LEVEL_SIZE__012_R =	* - LEVEL_START
      2  2c4d				  -	      IF	LEVEL_SIZE__012_R > MAX_LEVEL_SIZE
      3  2c4d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__012_R
      4  2c4d					      ENDIF
      0  2c4d					      DEFL	_013_L, "2-5#-|2-#3-2#|2-#-.2-#|3#2*2.#|#@$2-$-#|3#-$2-#|2-2#2-2#|3-4#-"
      0  2c4d					      START_LEVEL	_013_L
      1  2c4d				   LEVEL_START SET	*
      2  2c4d		       00 05	   BANK_LEVEL__013_L =	_CURRENT_BANK
      3  2c4d				   LEVEL__013_L SUBROUTINE
      4  2c4d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2c4d
      2  2c4d		       32 2d 35 23*	      .byte.b	"2-5#-|2-#3-2#|2-#-.2-#|3#2*2.#|#@$2-$-#|3#-$2-#|2-2#2-2#|3-4#-",0
      0  2c8c					      END_LEVEL	_013_L
      1  2c8c		       00 3f	   LEVEL_SIZE__013_L =	* - LEVEL_START
      2  2c8c				  -	      IF	LEVEL_SIZE__013_L > MAX_LEVEL_SIZE
      3  2c8c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__013_L
      4  2c8c					      ENDIF
      0  2c8c					      DEFL	_013_R, "-5#2-|2#3-2#-|#-$3-2#|#-.2*.-#|#3-$*-#|5#@2#|4-3#-"
      0  2c8c					      START_LEVEL	_013_R
      1  2c8c				   LEVEL_START SET	*
      2  2c8c		       00 05	   BANK_LEVEL__013_R =	_CURRENT_BANK
      3  2c8c				   LEVEL__013_R SUBROUTINE
      4  2c8c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2c8c
      2  2c8c		       2d 35 23 32*	      .byte.b	"-5#2-|2#3-2#-|#-$3-2#|#-.2*.-#|#3-$*-#|5#@2#|4-3#-",0
      0  2cbf					      END_LEVEL	_013_R
      1  2cbf		       00 33	   LEVEL_SIZE__013_R =	* - LEVEL_START
      2  2cbf				  -	      IF	LEVEL_SIZE__013_R > MAX_LEVEL_SIZE
      3  2cbf				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__013_R
      4  2cbf					      ENDIF
      0  2cbf					      DEFL	_014_L, "6#4-|#@3-2#3-|#-2#$-4#|#-#-$-*2-#|#-$-2.*2-#|5#2.$-#|4-2#.$-#|5-5#"
      0  2cbf					      START_LEVEL	_014_L
      1  2cbf				   LEVEL_START SET	*
      2  2cbf		       00 05	   BANK_LEVEL__014_L =	_CURRENT_BANK
      3  2cbf				   LEVEL__014_L SUBROUTINE
      4  2cbf				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2cbf
      2  2cbf		       36 23 34 2d*	      .byte.b	"6#4-|#@3-2#3-|#-2#$-4#|#-#-$-*2-#|#-$-2.*2-#|5#2.$-#|4-2#.$-#|5-5#",0
      0  2d02					      END_LEVEL	_014_L
      1  2d02		       00 43	   LEVEL_SIZE__014_L =	* - LEVEL_START
      2  2d02					      IF	LEVEL_SIZE__014_L > MAX_LEVEL_SIZE
      3  2d02				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__014_L
      4  2d02					      ENDIF
      0  2d02					      DEFL	_014_R, "6#3-|#4-4#|#2-#2-$@#|#-$.*-3#|2#-.*-#2-|-2#.$-#2-|2-#.$-#2-|2-5#2-"
      0  2d02					      START_LEVEL	_014_R
      1  2d02				   LEVEL_START SET	*
      2  2d02		       00 05	   BANK_LEVEL__014_R =	_CURRENT_BANK
      3  2d02				   LEVEL__014_R SUBROUTINE
      4  2d02				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2d02
      2  2d02		       36 23 33 2d*	      .byte.b	"6#3-|#4-4#|#2-#2-$@#|#-$.*-3#|2#-.*-#2-|-2#.$-#2-|2-#.$-#2-|2-5#2-",0
      0  2d45					      END_LEVEL	_014_R
      1  2d45		       00 43	   LEVEL_SIZE__014_R =	* - LEVEL_START
      2  2d45				  -	      IF	LEVEL_SIZE__014_R > MAX_LEVEL_SIZE
      3  2d45				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__014_R
      4  2d45					      ENDIF
      0  2d45					      DEFL	_015_L, "2-5#|3#3-#|#@#-$-#|#$*.-2#|#2.*$-#|2#-*2-#|-#4-#|-6#"
      0  2d45					      START_LEVEL	_015_L
      1  2d45				   LEVEL_START SET	*
      2  2d45		       00 05	   BANK_LEVEL__015_L =	_CURRENT_BANK
      3  2d45				   LEVEL__015_L SUBROUTINE
      4  2d45				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2d45
      2  2d45		       32 2d 35 23*	      .byte.b	"2-5#|3#3-#|#@#-$-#|#$*.-2#|#2.*$-#|2#-*2-#|-#4-#|-6#",0
      0  2d7a					      END_LEVEL	_015_L
      1  2d7a		       00 35	   LEVEL_SIZE__015_L =	* - LEVEL_START
      2  2d7a				  -	      IF	LEVEL_SIZE__015_L > MAX_LEVEL_SIZE
      3  2d7a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__015_L
      4  2d7a					      ENDIF
      0  2d7a					      DEFL	_015_R, "3-5#|2-2#3-#|2-#4-#|3#-$3#|#.*.*-#-|2#-*2-#-|-#2-$-#-|-3#@2#-|3-3#2-"
      0  2d7a					      START_LEVEL	_015_R
      1  2d7a				   LEVEL_START SET	*
      2  2d7a		       00 05	   BANK_LEVEL__015_R =	_CURRENT_BANK
      3  2d7a				   LEVEL__015_R SUBROUTINE
      4  2d7a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2d7a
      2  2d7a		       33 2d 35 23*	      .byte.b	"3-5#|2-2#3-#|2-#4-#|3#-$3#|#.*.*-#-|2#-*2-#-|-#2-$-#-|-3#@2#-|3-3#2-",0
      0  2dbf					      END_LEVEL	_015_R
      1  2dbf		       00 45	   LEVEL_SIZE__015_R =	* - LEVEL_START
      2  2dbf					      IF	LEVEL_SIZE__015_R > MAX_LEVEL_SIZE
      3  2dbf				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__015_R
      4  2dbf					      ENDIF
      0  2dbf					      DEFL	_016_L, "4-3#2-|5#.3#|#4.*2-#|#$#-*-$-#|#@$-2$-2#|2#4-2#-|-6#2-"
      0  2dbf					      START_LEVEL	_016_L
      1  2dbf				   LEVEL_START SET	*
      2  2dbf		       00 05	   BANK_LEVEL__016_L =	_CURRENT_BANK
      3  2dbf				   LEVEL__016_L SUBROUTINE
      4  2dbf				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2dbf
      2  2dbf		       34 2d 33 23*	      .byte.b	"4-3#2-|5#.3#|#4.*2-#|#$#-*-$-#|#@$-2$-2#|2#4-2#-|-6#2-",0
      0  2df6					      END_LEVEL	_016_L
      1  2df6		       00 37	   LEVEL_SIZE__016_L =	* - LEVEL_START
      2  2df6				  -	      IF	LEVEL_SIZE__016_L > MAX_LEVEL_SIZE
      3  2df6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__016_L
      4  2df6					      ENDIF
      0  2df6					      DEFL	_016_R, "5#-|#.2-#-|#.$-#-|#.*-2#|#*-$@#|#2-$-#|2#2-2#|-4#-"
      0  2df6					      START_LEVEL	_016_R
      1  2df6				   LEVEL_START SET	*
      2  2df6		       00 05	   BANK_LEVEL__016_R =	_CURRENT_BANK
      3  2df6				   LEVEL__016_R SUBROUTINE
      4  2df6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2df6
      2  2df6		       35 23 2d 7c*	      .byte.b	"5#-|#.2-#-|#.$-#-|#.*-2#|#*-$@#|#2-$-#|2#2-2#|-4#-",0
      0  2e29					      END_LEVEL	_016_R
      1  2e29		       00 33	   LEVEL_SIZE__016_R =	* - LEVEL_START
      2  2e29				  -	      IF	LEVEL_SIZE__016_R > MAX_LEVEL_SIZE
      3  2e29				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__016_R
      4  2e29					      ENDIF
      0  2e29					      DEFL	_017_L, "5#4-|#3-2#3-|#$3-2#2-|#2.*$-#2-|2#2*.-3#|-#.$2-$@#|-#2-#-3#|-#4-#2-|-6#2-"
      0  2e29					      START_LEVEL	_017_L
      1  2e29				   LEVEL_START SET	*
      2  2e29		       00 05	   BANK_LEVEL__017_L =	_CURRENT_BANK
      3  2e29				   LEVEL__017_L SUBROUTINE
      4  2e29				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2e29
      2  2e29		       35 23 34 2d*	      .byte.b	"5#4-|#3-2#3-|#$3-2#2-|#2.*$-#2-|2#2*.-3#|-#.$2-$@#|-#2-#-3#|-#4-#2-|-6#2-",0
      0  2e73					      END_LEVEL	_017_L
      1  2e73		       00 4a	   LEVEL_SIZE__017_L =	* - LEVEL_START
      2  2e73					      IF	LEVEL_SIZE__017_L > MAX_LEVEL_SIZE
      3  2e73				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__017_L
      4  2e73					      ENDIF
      0  2e73					      DEFL	_017_R, "3-4#-|3-#2-#-|-3#2-#-|-#.*.-#-|3#2*.#-|#3-2$2#|#-#2-$@#|#3-4#|5#3-"
      0  2e73					      START_LEVEL	_017_R
      1  2e73				   LEVEL_START SET	*
      2  2e73		       00 05	   BANK_LEVEL__017_R =	_CURRENT_BANK
      3  2e73				   LEVEL__017_R SUBROUTINE
      4  2e73				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2e73
      2  2e73		       33 2d 34 23*	      .byte.b	"3-4#-|3-#2-#-|-3#2-#-|-#.*.-#-|3#2*.#-|#3-2$2#|#-#2-$@#|#3-4#|5#3-",0
      0  2eb6					      END_LEVEL	_017_R
      1  2eb6		       00 43	   LEVEL_SIZE__017_R =	* - LEVEL_START
      2  2eb6				  -	      IF	LEVEL_SIZE__017_R > MAX_LEVEL_SIZE
      3  2eb6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__017_R
      4  2eb6					      ENDIF
      0  2eb6					      DEFL	_018_L, "6#3-|#4-2#2-|#-$2.-3#|2#-3*2.#|#-$2-$*$#|#4-#@-#|9#"
      0  2eb6					      START_LEVEL	_018_L
      1  2eb6				   LEVEL_START SET	*
      2  2eb6		       00 05	   BANK_LEVEL__018_L =	_CURRENT_BANK
      3  2eb6				   LEVEL__018_L SUBROUTINE
      4  2eb6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2eb6
      2  2eb6		       36 23 33 2d*	      .byte.b	"6#3-|#4-2#2-|#-$2.-3#|2#-3*2.#|#-$2-$*$#|#4-#@-#|9#",0
      0  2eea					      END_LEVEL	_018_L
      1  2eea		       00 34	   LEVEL_SIZE__018_L =	* - LEVEL_START
      2  2eea				  -	      IF	LEVEL_SIZE__018_L > MAX_LEVEL_SIZE
      3  2eea				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__018_L
      4  2eea					      ENDIF
      0  2eea					      DEFL	_018_R, "-4#3-|-#2-2#2-|2#-*.2#-|#-$.*@2#|#2-$2*-#|#4-#-#|3#4-#|2-6#"
      0  2eea					      START_LEVEL	_018_R
      1  2eea				   LEVEL_START SET	*
      2  2eea		       00 05	   BANK_LEVEL__018_R =	_CURRENT_BANK
      3  2eea				   LEVEL__018_R SUBROUTINE
      4  2eea				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2eea
      2  2eea		       2d 34 23 33*	      .byte.b	"-4#3-|-#2-2#2-|2#-*.2#-|#-$.*@2#|#2-$2*-#|#4-#-#|3#4-#|2-6#",0
      0  2f26					      END_LEVEL	_018_R
      1  2f26		       00 3c	   LEVEL_SIZE__018_R =	* - LEVEL_START
      2  2f26				  -	      IF	LEVEL_SIZE__018_R > MAX_LEVEL_SIZE
      3  2f26				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__018_R
      4  2f26					      ENDIF
      0  2f26					      DEFL	_019_L, "4-5#-|2-3#-*.#-|2-#-$-2.#-|3#-2$*$2#|#@$2-2.2-#|6#3-#|5-5#"
      0  2f26					      START_LEVEL	_019_L
      1  2f26				   LEVEL_START SET	*
      2  2f26		       00 05	   BANK_LEVEL__019_L =	_CURRENT_BANK
      3  2f26				   LEVEL__019_L SUBROUTINE
      4  2f26				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2f26
      2  2f26		       34 2d 35 23*	      .byte.b	"4-5#-|2-3#-*.#-|2-#-$-2.#-|3#-2$*$2#|#@$2-2.2-#|6#3-#|5-5#",0
      0  2f61					      END_LEVEL	_019_L
      1  2f61		       00 3b	   LEVEL_SIZE__019_L =	* - LEVEL_START
      2  2f61				  -	      IF	LEVEL_SIZE__019_L > MAX_LEVEL_SIZE
      3  2f61				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__019_L
      4  2f61					      ENDIF
      0  2f61					      DEFL	_019_R, "2-7#2-|2-#5-2#-|2-#-$*#$-#-|3#-$.*.*#-|#@$-3.$-2#|5#.$3-#|4-2#-2#-#|5-#4-#|5-6#"
      0  2f61					      START_LEVEL	_019_R
      1  2f61				   LEVEL_START SET	*
      2  2f61		       00 05	   BANK_LEVEL__019_R =	_CURRENT_BANK
      3  2f61				   LEVEL__019_R SUBROUTINE
      4  2f61				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  2f61
      2  2f61		       32 2d 37 23*	      .byte.b	"2-7#2-|2-#5-2#-|2-#-$*#$-#-|3#-$.*.*#-|#@$-3.$-2#|5#.$3-#|4-2#-2#-#|5-#4-#|5-6#",0
      0  2fb1					      END_LEVEL	_019_R
      1  2fb1		       00 50	   LEVEL_SIZE__019_R =	* - LEVEL_START
      2  2fb1					      IF	LEVEL_SIZE__019_R > MAX_LEVEL_SIZE
      3  2fb1				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__019_R
      4  2fb1					      ENDIF
     80  2fb1
     81  2fb1							;-----------------------------------------------------------
     82  2fb1							; Stella 3E autodetect signature, can live anywhere
     83  2fb1		       85 3e a9 00	      .byte.b	$85, $3E, $A9, $00
     84  2fb5							;-----------------------------------------------------------
     85  2fb5
      0  2fb5					      CHECK_BANK_SIZE	"LEVELS1"
      1  2fb5		       07 b5	   .TEMP      =	* - BANK_START
 LEVELS1 (2K) SIZE =  $7b5 , FREE= $4b
      2  2fb5					      ECHO	"LEVELS1", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  2fb5				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  2fb5				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  2fb5				  -	      ERR
      6  2fb5					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS2.asm LEVEL 2 PASS 3
      0  2fb5					      include	"BANK_LEVELS2.asm"
      1  2fb5							;    Sokoboo - a Sokoban implementation
      2  2fb5							;    using a generic tile-based display engine for the Atari 2600
      3  2fb5							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  2fb5							;
      5  2fb5							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  2fb5							;
      7  2fb5							;    Code related to the generic tile-based display engine was developed by
      8  2fb5							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  2fb5							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  2fb5							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  2fb5							;
     12  2fb5							;    Code related to music and sound effects uses the TIATracker music player
     13  2fb5							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  2fb5							;    directory for Apache licensing details.
     15  2fb5							;
     16  2fb5							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  2fb5							;    See the copyright notices in the License directory for a list of level
     18  2fb5							;    contributors.
     19  2fb5							;
     20  2fb5							;    Except where otherwise indicated, this software is released under the
     21  2fb5							;    following licensing arrangement...
     22  2fb5							;
     23  2fb5							;    This program is free software: you can redistribute it and/or modify
     24  2fb5							;    it under the terms of the GNU General Public License as published by
     25  2fb5							;    the Free Software Foundation, either version 3 of the License, or
     26  2fb5							;    (at your option) any later version.
     27  2fb5							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  2fb5
     29  2fb5							;    This program is distributed in the hope that it will be useful,
     30  2fb5							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  2fb5							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  2fb5							;    GNU General Public License for more details.
     33  2fb5
      0  2fb5					      NEWBANK	LEVELS2
      1  37be ????				      SEG	LEVELS2
      2  3000					      ORG	ORIGIN
      3  3000					      RORG	$F000
      4  3000				   BANK_START SET	*
      5  3000				   LEVELS2    SET	ORIGIN / 2048
      6  3000				   ORIGIN     SET	ORIGIN + 2048
      7  3000				   _CURRENT_BANK SET	LEVELS2
     35  3000
      0  3000					      DEFL	_020_L, "-6#-|-#4-#-|-#-2$-#-|2#-.$3#|#@$.3-#|3#*.*$#|#4-2.#|#3-4#|5#3-"
      0  3000					      START_LEVEL	_020_L
      1  3000				   LEVEL_START SET	*
      2  3000		       00 06	   BANK_LEVEL__020_L =	_CURRENT_BANK
      3  3000				   LEVEL__020_L SUBROUTINE
      4  3000				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3000
      2  3000		       2d 36 23 2d*	      .byte.b	"-6#-|-#4-#-|-#-2$-#-|2#-.$3#|#@$.3-#|3#*.*$#|#4-2.#|#3-4#|5#3-",0
      0  303f					      END_LEVEL	_020_L
      1  303f		       00 3f	   LEVEL_SIZE__020_L =	* - LEVEL_START
      2  303f				  -	      IF	LEVEL_SIZE__020_L > MAX_LEVEL_SIZE
      3  303f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__020_L
      4  303f					      ENDIF
      0  303f					      DEFL	_020_R, "5-4#|6#2-#|#3-#3-#|#-#$.*$-#|#2-3.-2#|#-2$*2-#-|2#@$.-2#-|-6#2-"
      0  303f					      START_LEVEL	_020_R
      1  303f				   LEVEL_START SET	*
      2  303f		       00 06	   BANK_LEVEL__020_R =	_CURRENT_BANK
      3  303f				   LEVEL__020_R SUBROUTINE
      4  303f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  303f
      2  303f		       35 2d 34 23*	      .byte.b	"5-4#|6#2-#|#3-#3-#|#-#$.*$-#|#2-3.-2#|#-2$*2-#-|2#@$.-2#-|-6#2-",0
      0  307f					      END_LEVEL	_020_R
      1  307f		       00 40	   LEVEL_SIZE__020_R =	* - LEVEL_START
      2  307f				  -	      IF	LEVEL_SIZE__020_R > MAX_LEVEL_SIZE
      3  307f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__020_R
      4  307f					      ENDIF
      0  307f					      DEFL	_021_L, "4-4#3-|4-#2-#3-|5#-$2#2-|#@$3.*.#2-|2#-#-$2.3#|-#-#2$*-$-#|-#-$2-.3-#|-4#-*2-2#|4-6#-"
      0  307f					      START_LEVEL	_021_L
      1  307f				   LEVEL_START SET	*
      2  307f		       00 06	   BANK_LEVEL__021_L =	_CURRENT_BANK
      3  307f				   LEVEL__021_L SUBROUTINE
      4  307f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  307f
      2  307f		       34 2d 34 23*	      .byte.b	"4-4#3-|4-#2-#3-|5#-$2#2-|#@$3.*.#2-|2#-#-$2.3#|-#-#2$*-$-#|-#-$2-.3-#|-4#-*2-2#|4-6#-",0
      0  30d5					      END_LEVEL	_021_L
      1  30d5		       00 56	   LEVEL_SIZE__021_L =	* - LEVEL_START
      2  30d5					      IF	LEVEL_SIZE__021_L > MAX_LEVEL_SIZE
      3  30d5				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__021_L
      4  30d5					      ENDIF
      0  30d5					      DEFL	_021_R, "-4#3-|2#@-4#|#-3$2-#|#.*.$2-#|#-.*2-2#|2#.3-#-|-6#-"
      0  30d5					      START_LEVEL	_021_R
      1  30d5				   LEVEL_START SET	*
      2  30d5		       00 06	   BANK_LEVEL__021_R =	_CURRENT_BANK
      3  30d5				   LEVEL__021_R SUBROUTINE
      4  30d5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  30d5
      2  30d5		       2d 34 23 33*	      .byte.b	"-4#3-|2#@-4#|#-3$2-#|#.*.$2-#|#-.*2-2#|2#.3-#-|-6#-",0
      0  3109					      END_LEVEL	_021_R
      1  3109		       00 34	   LEVEL_SIZE__021_R =	* - LEVEL_START
      2  3109				  -	      IF	LEVEL_SIZE__021_R > MAX_LEVEL_SIZE
      3  3109				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__021_R
      4  3109					      ENDIF
      0  3109					      DEFL	_022_L, "3-3#2-|3-#@2#-|2-2#$-2#|3#2.*-#|#2-2$.*#|#-#$-.-#|#3-$.-#|2#4-2#|-6#-"
      0  3109					      START_LEVEL	_022_L
      1  3109				   LEVEL_START SET	*
      2  3109		       00 06	   BANK_LEVEL__022_L =	_CURRENT_BANK
      3  3109				   LEVEL__022_L SUBROUTINE
      4  3109				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3109
      2  3109		       33 2d 33 23*	      .byte.b	"3-3#2-|3-#@2#-|2-2#$-2#|3#2.*-#|#2-2$.*#|#-#$-.-#|#3-$.-#|2#4-2#|-6#-",0
      0  314f					      END_LEVEL	_022_L
      1  314f		       00 46	   LEVEL_SIZE__022_L =	* - LEVEL_START
      2  314f				  -	      IF	LEVEL_SIZE__022_L > MAX_LEVEL_SIZE
      3  314f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__022_L
      4  314f					      ENDIF
      0  314f					      DEFL	_022_R, "-3#4-|-#@2#3-|2#$-4#|#2-2$2-#|#-$.*$-#|#2-3.-#|4#.3#|3-3#2-"
      0  314f					      START_LEVEL	_022_R
      1  314f				   LEVEL_START SET	*
      2  314f		       00 06	   BANK_LEVEL__022_R =	_CURRENT_BANK
      3  314f				   LEVEL__022_R SUBROUTINE
      4  314f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  314f
      2  314f		       2d 33 23 34*	      .byte.b	"-3#4-|-#@2#3-|2#$-4#|#2-2$2-#|#-$.*$-#|#2-3.-#|4#.3#|3-3#2-",0
      0  318b					      END_LEVEL	_022_R
      1  318b		       00 3c	   LEVEL_SIZE__022_R =	* - LEVEL_START
      2  318b				  -	      IF	LEVEL_SIZE__022_R > MAX_LEVEL_SIZE
      3  318b				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__022_R
      4  318b					      ENDIF
      0  318b					      DEFL	_023_L, "6#3-|#4-2#2-|#-$-$-2#-|2#-$.$+2#|-#-2.*.-#|-2#$#-#-#|2-#5-#|2-7#"
      0  318b					      START_LEVEL	_023_L
      1  318b				   LEVEL_START SET	*
      2  318b		       00 06	   BANK_LEVEL__023_L =	_CURRENT_BANK
      3  318b				   LEVEL__023_L SUBROUTINE
      4  318b				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  318b
      2  318b		       36 23 33 2d*	      .byte.b	"6#3-|#4-2#2-|#-$-$-2#-|2#-$.$+2#|-#-2.*.-#|-2#$#-#-#|2-#5-#|2-7#",0
      0  31cc					      END_LEVEL	_023_L
      1  31cc		       00 41	   LEVEL_SIZE__023_L =	* - LEVEL_START
      2  31cc				  -	      IF	LEVEL_SIZE__023_L > MAX_LEVEL_SIZE
      3  31cc				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__023_L
      4  31cc					      ENDIF
      0  31cc					      DEFL	_023_R, "7#2-|#5-#2-|#2-#2$#2-|#-$-$.3#|2#+2*.*.#|-2#3-3#|2-#2-2#2-|2-4#3-"
      0  31cc					      START_LEVEL	_023_R
      1  31cc				   LEVEL_START SET	*
      2  31cc		       00 06	   BANK_LEVEL__023_R =	_CURRENT_BANK
      3  31cc				   LEVEL__023_R SUBROUTINE
      4  31cc				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  31cc
      2  31cc		       37 23 32 2d*	      .byte.b	"7#2-|#5-#2-|#2-#2$#2-|#-$-$.3#|2#+2*.*.#|-2#3-3#|2-#2-2#2-|2-4#3-",0
      0  320e					      END_LEVEL	_023_R
      1  320e		       00 42	   LEVEL_SIZE__023_R =	* - LEVEL_START
      2  320e				  -	      IF	LEVEL_SIZE__023_R > MAX_LEVEL_SIZE
      3  320e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__023_R
      4  320e					      ENDIF
      0  320e					      DEFL	_024_L, "-9#|-#7-#|-#-#2-$#-#|-#-#.*.#-#|2#2-.*-#-#|#3-.2$2-#|#-$2#2-3#|2#@2#2-#2-|-7#2-"
      0  320e					      START_LEVEL	_024_L
      1  320e				   LEVEL_START SET	*
      2  320e		       00 06	   BANK_LEVEL__024_L =	_CURRENT_BANK
      3  320e				   LEVEL__024_L SUBROUTINE
      4  320e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  320e
      2  320e		       2d 39 23 7c*	      .byte.b	"-9#|-#7-#|-#-#2-$#-#|-#-#.*.#-#|2#2-.*-#-#|#3-.2$2-#|#-$2#2-3#|2#@2#2-#2-|-7#2-",0
      0  325e					      END_LEVEL	_024_L
      1  325e		       00 50	   LEVEL_SIZE__024_L =	* - LEVEL_START
      2  325e				  -	      IF	LEVEL_SIZE__024_L > MAX_LEVEL_SIZE
      3  325e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__024_L
      4  325e					      ENDIF
      0  325e					      DEFL	_024_R, "-8#|2#6-#|#-$-*-#-#|#-3.*$-#|#2-*.*.2#|#2-#$-$-#|4#-$2-#|3-2#@3#|4-3#2-"
      0  325e					      START_LEVEL	_024_R
      1  325e				   LEVEL_START SET	*
      2  325e		       00 06	   BANK_LEVEL__024_R =	_CURRENT_BANK
      3  325e				   LEVEL__024_R SUBROUTINE
      4  325e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  325e
      2  325e		       2d 38 23 7c*	      .byte.b	"-8#|2#6-#|#-$-*-#-#|#-3.*$-#|#2-*.*.2#|#2-#$-$-#|4#-$2-#|3-2#@3#|4-3#2-",0
      0  32a6					      END_LEVEL	_024_R
      1  32a6		       00 48	   LEVEL_SIZE__024_R =	* - LEVEL_START
      2  32a6				  -	      IF	LEVEL_SIZE__024_R > MAX_LEVEL_SIZE
      3  32a6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__024_R
      4  32a6					      ENDIF
      0  32a6					      DEFL	_025_L, "4-4#2-|5#@-2#-|#4-2$-2#|#-3#2-$-#|#-3.2*.-#|#-2$*$2.2#|2#6-#-|-8#-"
      0  32a6					      START_LEVEL	_025_L
      1  32a6				   LEVEL_START SET	*
      2  32a6		       00 06	   BANK_LEVEL__025_L =	_CURRENT_BANK
      3  32a6				   LEVEL__025_L SUBROUTINE
      4  32a6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  32a6
      2  32a6		       34 2d 34 23*	      .byte.b	"4-4#2-|5#@-2#-|#4-2$-2#|#-3#2-$-#|#-3.2*.-#|#-2$*$2.2#|2#6-#-|-8#-",0
      0  32e9					      END_LEVEL	_025_L
      1  32e9		       00 43	   LEVEL_SIZE__025_L =	* - LEVEL_START
      2  32e9				  -	      IF	LEVEL_SIZE__025_L > MAX_LEVEL_SIZE
      3  32e9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__025_L
      4  32e9					      ENDIF
      0  32e9					      DEFL	_025_R, "-6#-|2#.-$-#-|#.*$*-2#|#.*2.$-#|2#3-#@#|-#-$-$-#|-3#2-2#|3-4#-"
      0  32e9					      START_LEVEL	_025_R
      1  32e9				   LEVEL_START SET	*
      2  32e9		       00 06	   BANK_LEVEL__025_R =	_CURRENT_BANK
      3  32e9				   LEVEL__025_R SUBROUTINE
      4  32e9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  32e9
      2  32e9		       2d 36 23 2d*	      .byte.b	"-6#-|2#.-$-#-|#.*$*-2#|#.*2.$-#|2#3-#@#|-#-$-$-#|-3#2-2#|3-4#-",0
      0  3328					      END_LEVEL	_025_R
      1  3328		       00 3f	   LEVEL_SIZE__025_R =	* - LEVEL_START
      2  3328				  -	      IF	LEVEL_SIZE__025_R > MAX_LEVEL_SIZE
      3  3328				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__025_R
      4  3328					      ENDIF
      0  3328					      DEFL	_026_L, "-6#2-|2#-3.3#|#-$-2*.-#|#2-$-2*-#|#-$-$.$-#|#2-#-@2-#|9#"
      0  3328					      START_LEVEL	_026_L
      1  3328				   LEVEL_START SET	*
      2  3328		       00 06	   BANK_LEVEL__026_L =	_CURRENT_BANK
      3  3328				   LEVEL__026_L SUBROUTINE
      4  3328				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3328
      2  3328		       2d 36 23 32*	      .byte.b	"-6#2-|2#-3.3#|#-$-2*.-#|#2-$-2*-#|#-$-$.$-#|#2-#-@2-#|9#",0
      0  3361					      END_LEVEL	_026_L
      1  3361		       00 39	   LEVEL_SIZE__026_L =	* - LEVEL_START
      2  3361				  -	      IF	LEVEL_SIZE__026_L > MAX_LEVEL_SIZE
      3  3361				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__026_L
      4  3361					      ENDIF
      0  3361					      DEFL	_026_R, "5-4#|4-2#2-#|-4#3-#|2#2.-$2-#|#.3*$-2#|2#.$-$-#-|-3#-@2#-|3-4#2-"
      0  3361					      START_LEVEL	_026_R
      1  3361				   LEVEL_START SET	*
      2  3361		       00 06	   BANK_LEVEL__026_R =	_CURRENT_BANK
      3  3361				   LEVEL__026_R SUBROUTINE
      4  3361				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3361
      2  3361		       35 2d 34 23*	      .byte.b	"5-4#|4-2#2-#|-4#3-#|2#2.-$2-#|#.3*$-2#|2#.$-$-#-|-3#-@2#-|3-4#2-",0
      0  33a2					      END_LEVEL	_026_R
      1  33a2		       00 41	   LEVEL_SIZE__026_R =	* - LEVEL_START
      2  33a2				  -	      IF	LEVEL_SIZE__026_R > MAX_LEVEL_SIZE
      3  33a2				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__026_R
      4  33a2					      ENDIF
      0  33a2					      DEFL	_027_L, "8#-|#3-@2-#-|#-*4$2#|2#*.#3-#|-#3.$2-#|-3#*.$-#|3-#.4#|3-3#3-"
      0  33a2					      START_LEVEL	_027_L
      1  33a2				   LEVEL_START SET	*
      2  33a2		       00 06	   BANK_LEVEL__027_L =	_CURRENT_BANK
      3  33a2				   LEVEL__027_L SUBROUTINE
      4  33a2				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  33a2
      2  33a2		       38 23 2d 7c*	      .byte.b	"8#-|#3-@2-#-|#-*4$2#|2#*.#3-#|-#3.$2-#|-3#*.$-#|3-#.4#|3-3#3-",0
      0  33e0					      END_LEVEL	_027_L
      1  33e0		       00 3e	   LEVEL_SIZE__027_L =	* - LEVEL_START
      2  33e0				  -	      IF	LEVEL_SIZE__027_L > MAX_LEVEL_SIZE
      3  33e0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__027_L
      4  33e0					      ENDIF
      0  33e0					      DEFL	_027_R, "7#2-|#5-2#-|#$2*-$-#-|#-*2.2-2#|#2.*3$-#|3#.#3-#|2-4#-@#|5-4#"
      0  33e0					      START_LEVEL	_027_R
      1  33e0				   LEVEL_START SET	*
      2  33e0		       00 06	   BANK_LEVEL__027_R =	_CURRENT_BANK
      3  33e0				   LEVEL__027_R SUBROUTINE
      4  33e0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  33e0
      2  33e0		       37 23 32 2d*	      .byte.b	"7#2-|#5-2#-|#$2*-$-#-|#-*2.2-2#|#2.*3$-#|3#.#3-#|2-4#-@#|5-4#",0
      0  341e					      END_LEVEL	_027_R
      1  341e		       00 3e	   LEVEL_SIZE__027_R =	* - LEVEL_START
      2  341e				  -	      IF	LEVEL_SIZE__027_R > MAX_LEVEL_SIZE
      3  341e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__027_R
      4  341e					      ENDIF
      0  341e					      DEFL	_028_L, "3-3#4-|4#.#4-|#-$-.#4-|#@#.*5#|#-$.*.3-#|#-2$-*$#-#|#2-#-.$2-#|4#4-2#|3-6#-"
      0  341e					      START_LEVEL	_028_L
      1  341e				   LEVEL_START SET	*
      2  341e		       00 06	   BANK_LEVEL__028_L =	_CURRENT_BANK
      3  341e				   LEVEL__028_L SUBROUTINE
      4  341e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  341e
      2  341e		       33 2d 33 23*	      .byte.b	"3-3#4-|4#.#4-|#-$-.#4-|#@#.*5#|#-$.*.3-#|#-2$-*$#-#|#2-#-.$2-#|4#4-2#|3-6#-",0
      0  346a					      END_LEVEL	_028_L
      1  346a		       00 4c	   LEVEL_SIZE__028_L =	* - LEVEL_START
      2  346a				  -	      IF	LEVEL_SIZE__028_L > MAX_LEVEL_SIZE
      3  346a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__028_L
      4  346a					      ENDIF
      0  346a					      DEFL	_028_R, "9#-|#4-2#@#-|#-2#$#-$2#|#-.-.2$2-#|#-.*.2-#-#|#-#.#$3-#|#-#2*3-2#|#4-4#-|6#4-"
      0  346a					      START_LEVEL	_028_R
      1  346a				   LEVEL_START SET	*
      2  346a		       00 06	   BANK_LEVEL__028_R =	_CURRENT_BANK
      3  346a				   LEVEL__028_R SUBROUTINE
      4  346a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  346a
      2  346a		       39 23 2d 7c*	      .byte.b	"9#-|#4-2#@#-|#-2#$#-$2#|#-.-.2$2-#|#-.*.2-#-#|#-#.#$3-#|#-#2*3-2#|#4-4#-|6#4-",0
      0  34b8					      END_LEVEL	_028_R
      1  34b8		       00 4e	   LEVEL_SIZE__028_R =	* - LEVEL_START
      2  34b8				  -	      IF	LEVEL_SIZE__028_R > MAX_LEVEL_SIZE
      3  34b8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__028_R
      4  34b8					      ENDIF
      0  34b8					      DEFL	_029_L, "-5#3-|-#-@-2#2-|2#$*$-3#|#2.*.$2-#|#.*.$3-#|2#2-$-3#|-3#2-#2-|3-4#2-"
      0  34b8					      START_LEVEL	_029_L
      1  34b8				   LEVEL_START SET	*
      2  34b8		       00 06	   BANK_LEVEL__029_L =	_CURRENT_BANK
      3  34b8				   LEVEL__029_L SUBROUTINE
      4  34b8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  34b8
      2  34b8		       2d 35 23 33*	      .byte.b	"-5#3-|-#-@-2#2-|2#$*$-3#|#2.*.$2-#|#.*.$3-#|2#2-$-3#|-3#2-#2-|3-4#2-",0
      0  34fd					      END_LEVEL	_029_L
      1  34fd		       00 45	   LEVEL_SIZE__029_L =	* - LEVEL_START
      2  34fd				  -	      IF	LEVEL_SIZE__029_L > MAX_LEVEL_SIZE
      3  34fd				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__029_L
      4  34fd					      ENDIF
      0  34fd					      DEFL	_029_R, "-4#4-|-#@-4#-|2#$-$2-2#|#2.3$2-#|#.2*.*$-#|3#2-2.-#|2-#2-$.2#|2-6#-"
      0  34fd					      START_LEVEL	_029_R
      1  34fd				   LEVEL_START SET	*
      2  34fd		       00 06	   BANK_LEVEL__029_R =	_CURRENT_BANK
      3  34fd				   LEVEL__029_R SUBROUTINE
      4  34fd				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  34fd
      2  34fd		       2d 34 23 34*	      .byte.b	"-4#4-|-#@-4#-|2#$-$2-2#|#2.3$2-#|#.2*.*$-#|3#2-2.-#|2-#2-$.2#|2-6#-",0
      0  3541					      END_LEVEL	_029_R
      1  3541		       00 44	   LEVEL_SIZE__029_R =	* - LEVEL_START
      2  3541				  -	      IF	LEVEL_SIZE__029_R > MAX_LEVEL_SIZE
      3  3541				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__029_R
      4  3541					      ENDIF
      0  3541					      DEFL	_030_L, "6-5#|5#-#2-@#|#3-3#2$-#|#2-$-2.-$2#|3#-.*.*-2#|2-3#-.$2-#|4-#3-#-#|4-2#4-#|5-6#"
      0  3541					      START_LEVEL	_030_L
      1  3541				   LEVEL_START SET	*
      2  3541		       00 06	   BANK_LEVEL__030_L =	_CURRENT_BANK
      3  3541				   LEVEL__030_L SUBROUTINE
      4  3541				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3541
      2  3541		       36 2d 35 23*	      .byte.b	"6-5#|5#-#2-@#|#3-3#2$-#|#2-$-2.-$2#|3#-.*.*-2#|2-3#-.$2-#|4-#3-#-#|4-2#4-#|5-6#",0
      0  3591					      END_LEVEL	_030_L
      1  3591		       00 50	   LEVEL_SIZE__030_L =	* - LEVEL_START
      2  3591				  -	      IF	LEVEL_SIZE__030_L > MAX_LEVEL_SIZE
      3  3591				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__030_L
      4  3591					      ENDIF
      0  3591					      DEFL	_030_R, "-7#2-|2#-$2-.#2-|#-$-$#.#2-|#-#.$2.#2-|#-#3.$2#-|#2-$#*2-2#|3#2-*2$-#|2-#@5-#|2-8#"
      0  3591					      START_LEVEL	_030_R
      1  3591				   LEVEL_START SET	*
      2  3591		       00 06	   BANK_LEVEL__030_R =	_CURRENT_BANK
      3  3591				   LEVEL__030_R SUBROUTINE
      4  3591				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3591
      2  3591		       2d 37 23 32*	      .byte.b	"-7#2-|2#-$2-.#2-|#-$-$#.#2-|#-#.$2.#2-|#-#3.$2#-|#2-$#*2-2#|3#2-*2$-#|2-#@5-#|2-8#",0
      0  35e4					      END_LEVEL	_030_R
      1  35e4		       00 53	   LEVEL_SIZE__030_R =	* - LEVEL_START
      2  35e4				  -	      IF	LEVEL_SIZE__030_R > MAX_LEVEL_SIZE
      3  35e4				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__030_R
      4  35e4					      ENDIF
      0  35e4					      DEFL	_031_L, "-7#2-|-#3-@-3#|-#-2$*2$-#|3#2-*.2-#|#2.2*.*2-#|#$#2-.2-2#|#3-5#-|5#5-"
      0  35e4					      START_LEVEL	_031_L
      1  35e4				   LEVEL_START SET	*
      2  35e4		       00 06	   BANK_LEVEL__031_L =	_CURRENT_BANK
      3  35e4				   LEVEL__031_L SUBROUTINE
      4  35e4				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  35e4
      2  35e4		       2d 37 23 32*	      .byte.b	"-7#2-|-#3-@-3#|-#-2$*2$-#|3#2-*.2-#|#2.2*.*2-#|#$#2-.2-2#|#3-5#-|5#5-",0
      0  362a					      END_LEVEL	_031_L
      1  362a		       00 46	   LEVEL_SIZE__031_L =	* - LEVEL_START
      2  362a				  -	      IF	LEVEL_SIZE__031_L > MAX_LEVEL_SIZE
      3  362a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__031_L
      4  362a					      ENDIF
      0  362a					      DEFL	_031_R, "6#-|#2-#+#-|#2-$.2#|#2-2*.#|#-$-.$#|#-$-*.#|#-2$.-#|#-$-.-#|7#"
      0  362a					      START_LEVEL	_031_R
      1  362a				   LEVEL_START SET	*
      2  362a		       00 06	   BANK_LEVEL__031_R =	_CURRENT_BANK
      3  362a				   LEVEL__031_R SUBROUTINE
      4  362a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  362a
      2  362a		       36 23 2d 7c*	      .byte.b	"6#-|#2-#+#-|#2-$.2#|#2-2*.#|#-$-.$#|#-$-*.#|#-2$.-#|#-$-.-#|7#",0
      0  3669					      END_LEVEL	_031_R
      1  3669		       00 3f	   LEVEL_SIZE__031_R =	* - LEVEL_START
      2  3669				  -	      IF	LEVEL_SIZE__031_R > MAX_LEVEL_SIZE
      3  3669				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__031_R
      4  3669					      ENDIF
      0  3669					      DEFL	_032_L, "-4#2-|-#2-3#|2#2-2.#|#@2$*.#|#-$2-.#|#-$-#*#|3#3-#|2-5#"
      0  3669					      START_LEVEL	_032_L
      1  3669				   LEVEL_START SET	*
      2  3669		       00 06	   BANK_LEVEL__032_L =	_CURRENT_BANK
      3  3669				   LEVEL__032_L SUBROUTINE
      4  3669				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3669
      2  3669		       2d 34 23 32*	      .byte.b	"-4#2-|-#2-3#|2#2-2.#|#@2$*.#|#-$2-.#|#-$-#*#|3#3-#|2-5#",0
      0  36a1					      END_LEVEL	_032_L
      1  36a1		       00 38	   LEVEL_SIZE__032_L =	* - LEVEL_START
      2  36a1				  -	      IF	LEVEL_SIZE__032_L > MAX_LEVEL_SIZE
      3  36a1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__032_L
      4  36a1					      ENDIF
      0  36a1					      DEFL	_032_R, "9#-|#7-2#|#-$3#-$@#|#2-2.#.$-#|#-.*.2*$-#|#-$.*2-$-#|#2-#.$-3#|8#2-"
      0  36a1					      START_LEVEL	_032_R
      1  36a1				   LEVEL_START SET	*
      2  36a1		       00 06	   BANK_LEVEL__032_R =	_CURRENT_BANK
      3  36a1				   LEVEL__032_R SUBROUTINE
      4  36a1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  36a1
      2  36a1		       39 23 2d 7c*	      .byte.b	"9#-|#7-2#|#-$3#-$@#|#2-2.#.$-#|#-.*.2*$-#|#-$.*2-$-#|#2-#.$-3#|8#2-",0
      0  36e5					      END_LEVEL	_032_R
      1  36e5		       00 44	   LEVEL_SIZE__032_R =	* - LEVEL_START
      2  36e5				  -	      IF	LEVEL_SIZE__032_R > MAX_LEVEL_SIZE
      3  36e5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__032_R
      4  36e5					      ENDIF
      0  36e5					      DEFL	_033_L, "2-7#-|-2#2-#2-2#|-#2-.*-$-#|-#-$.$-$@#|2#$-2*-3#|#2-$*.*.#-|#3-2.3#-|7#3-"
      0  36e5					      START_LEVEL	_033_L
      1  36e5				   LEVEL_START SET	*
      2  36e5		       00 06	   BANK_LEVEL__033_L =	_CURRENT_BANK
      3  36e5				   LEVEL__033_L SUBROUTINE
      4  36e5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  36e5
      2  36e5		       32 2d 37 23*	      .byte.b	"2-7#-|-2#2-#2-2#|-#2-.*-$-#|-#-$.$-$@#|2#$-2*-3#|#2-$*.*.#-|#3-2.3#-|7#3-",0
      0  372f					      END_LEVEL	_033_L
      1  372f		       00 4a	   LEVEL_SIZE__033_L =	* - LEVEL_START
      2  372f				  -	      IF	LEVEL_SIZE__033_L > MAX_LEVEL_SIZE
      3  372f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__033_L
      4  372f					      ENDIF
      0  372f					      DEFL	_033_R, "-7#2-|2#2-#@-2#-|#-$-#3-2#|#-$2-$*$-#|#2-*.*.2-#|2#.*2.-$-#|-9#"
      0  372f					      START_LEVEL	_033_R
      1  372f				   LEVEL_START SET	*
      2  372f		       00 06	   BANK_LEVEL__033_R =	_CURRENT_BANK
      3  372f				   LEVEL__033_R SUBROUTINE
      4  372f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  372f
      2  372f		       2d 37 23 32*	      .byte.b	"-7#2-|2#2-#@-2#-|#-$-#3-2#|#-$2-$*$-#|#2-*.*.2-#|2#.*2.-$-#|-9#",0
      0  376f					      END_LEVEL	_033_R
      1  376f		       00 40	   LEVEL_SIZE__033_R =	* - LEVEL_START
      2  376f				  -	      IF	LEVEL_SIZE__033_R > MAX_LEVEL_SIZE
      3  376f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__033_R
      4  376f					      ENDIF
      0  376f					      DEFL	_034_L, "5-4#-|-5#2-#-|-#-$@$2-#-|2#-#*$.*2#|#3-.2*2.#|#2-$2-4#|4#2-#3-|3-#2-#3-|3-4#3-"
      0  376f					      START_LEVEL	_034_L
      1  376f				   LEVEL_START SET	*
      2  376f		       00 06	   BANK_LEVEL__034_L =	_CURRENT_BANK
      3  376f				   LEVEL__034_L SUBROUTINE
      4  376f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  376f
      2  376f		       35 2d 34 23*	      .byte.b	"5-4#-|-5#2-#-|-#-$@$2-#-|2#-#*$.*2#|#3-.2*2.#|#2-$2-4#|4#2-#3-|3-#2-#3-|3-4#3-",0
      0  37be					      END_LEVEL	_034_L
      1  37be		       00 4f	   LEVEL_SIZE__034_L =	* - LEVEL_START
      2  37be				  -	      IF	LEVEL_SIZE__034_L > MAX_LEVEL_SIZE
      3  37be				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__034_L
      4  37be					      ENDIF
     65  37be
      0  37be					      CHECK_BANK_SIZE	"LEVELS2"
      1  37be		       07 be	   .TEMP      =	* - BANK_START
 LEVELS2 (2K) SIZE =  $7be , FREE= $42
      2  37be					      ECHO	"LEVELS2", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  37be				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  37be				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  37be				  -	      ERR
      6  37be					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS3.asm LEVEL 2 PASS 3
      0  37be					      include	"BANK_LEVELS3.asm"
      1  37be							;    Sokoboo - a Sokoban implementation
      2  37be							;    using a generic tile-based display engine for the Atari 2600
      3  37be							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  37be							;
      5  37be							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  37be							;
      7  37be							;    Code related to the generic tile-based display engine was developed by
      8  37be							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  37be							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  37be							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  37be							;
     12  37be							;    Code related to music and sound effects uses the TIATracker music player
     13  37be							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  37be							;    directory for Apache licensing details.
     15  37be							;
     16  37be							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  37be							;    See the copyright notices in the License directory for a list of level
     18  37be							;    contributors.
     19  37be							;
     20  37be							;    Except where otherwise indicated, this software is released under the
     21  37be							;    following licensing arrangement...
     22  37be							;
     23  37be							;    This program is free software: you can redistribute it and/or modify
     24  37be							;    it under the terms of the GNU General Public License as published by
     25  37be							;    the Free Software Foundation, either version 3 of the License, or
     26  37be							;    (at your option) any later version.
     27  37be							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  37be
     29  37be							;    This program is distributed in the hope that it will be useful,
     30  37be							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  37be							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  37be							;    GNU General Public License for more details.
     33  37be
      0  37be					      NEWBANK	LEVELS3
      1  3fc7 ????				      SEG	LEVELS3
      2  3800					      ORG	ORIGIN
      3  3800					      RORG	$F000
      4  3800				   BANK_START SET	*
      5  3800				   LEVELS3    SET	ORIGIN / 2048
      6  3800				   ORIGIN     SET	ORIGIN + 2048
      7  3800				   _CURRENT_BANK SET	LEVELS3
     35  3800
      0  3800					      DEFL	_034_R, "-6#3-|-#4-#3-|2#-$.-3#-|#-2$*.$@#-|#-3.#2$2#|4#.4-#|3-3#-#-#|5-#3-#|5-5#"
      0  3800					      START_LEVEL	_034_R
      1  3800				   LEVEL_START SET	*
      2  3800		       00 07	   BANK_LEVEL__034_R =	_CURRENT_BANK
      3  3800				   LEVEL__034_R SUBROUTINE
      4  3800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3800
      2  3800		       2d 36 23 33*	      .byte.b	"-6#3-|-#4-#3-|2#-$.-3#-|#-2$*.$@#-|#-3.#2$2#|4#.4-#|3-3#-#-#|5-#3-#|5-5#",0
      0  3849					      END_LEVEL	_034_R
      1  3849		       00 49	   LEVEL_SIZE__034_R =	* - LEVEL_START
      2  3849				  -	      IF	LEVEL_SIZE__034_R > MAX_LEVEL_SIZE
      3  3849				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__034_R
      4  3849					      ENDIF
      0  3849					      DEFL	_035_L, "5-3#2-|6#.2#-|#@2-2#*.#-|#-3$2.-#-|2#2-$*.$2#|-#-$2-.2-#|-5#3-#|5-5#"
      0  3849					      START_LEVEL	_035_L
      1  3849				   LEVEL_START SET	*
      2  3849		       00 07	   BANK_LEVEL__035_L =	_CURRENT_BANK
      3  3849				   LEVEL__035_L SUBROUTINE
      4  3849				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3849
      2  3849		       35 2d 33 23*	      .byte.b	"5-3#2-|6#.2#-|#@2-2#*.#-|#-3$2.-#-|2#2-$*.$2#|-#-$2-.2-#|-5#3-#|5-5#",0
      0  388e					      END_LEVEL	_035_L
      1  388e		       00 45	   LEVEL_SIZE__035_L =	* - LEVEL_START
      2  388e				  -	      IF	LEVEL_SIZE__035_L > MAX_LEVEL_SIZE
      3  388e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__035_L
      4  388e					      ENDIF
      0  388e					      DEFL	_035_R, "-11#|-#4-@4-#|-#-2$3*$#-#|3#-*.$.-$-#|#3-.*.-4#|#3-2#.2#3-|8#4-"
      0  388e					      START_LEVEL	_035_R
      1  388e				   LEVEL_START SET	*
      2  388e		       00 07	   BANK_LEVEL__035_R =	_CURRENT_BANK
      3  388e				   LEVEL__035_R SUBROUTINE
      4  388e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  388e
      2  388e		       2d 31 31 23*	      .byte.b	"-11#|-#4-@4-#|-#-2$3*$#-#|3#-*.$.-$-#|#3-.*.-4#|#3-2#.2#3-|8#4-",0
      0  38ce					      END_LEVEL	_035_R
      1  38ce		       00 40	   LEVEL_SIZE__035_R =	* - LEVEL_START
      2  38ce				  -	      IF	LEVEL_SIZE__035_R > MAX_LEVEL_SIZE
      3  38ce				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__035_R
      4  38ce					      ENDIF
      0  38ce					      DEFL	_036_L, "5#2-|#3-3#|#*#-$@#|#.2-$-#|#.*2$-#|#2.#2-#|4#2-#|3-4#"
      0  38ce					      START_LEVEL	_036_L
      1  38ce				   LEVEL_START SET	*
      2  38ce		       00 07	   BANK_LEVEL__036_L =	_CURRENT_BANK
      3  38ce				   LEVEL__036_L SUBROUTINE
      4  38ce				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  38ce
      2  38ce		       35 23 32 2d*	      .byte.b	"5#2-|#3-3#|#*#-$@#|#.2-$-#|#.*2$-#|#2.#2-#|4#2-#|3-4#",0
      0  3904					      END_LEVEL	_036_L
      1  3904		       00 36	   LEVEL_SIZE__036_L =	* - LEVEL_START
      2  3904				  -	      IF	LEVEL_SIZE__036_L > MAX_LEVEL_SIZE
      3  3904				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__036_L
      4  3904					      ENDIF
      0  3904					      DEFL	_036_R, "2-5#2-|-2#.2-2#-|-#.*-$-2#|2#2.$-$-#|#.2*.-$@#|#2-$2-$2#|3#4-#-|2-6#-"
      0  3904					      START_LEVEL	_036_R
      1  3904				   LEVEL_START SET	*
      2  3904		       00 07	   BANK_LEVEL__036_R =	_CURRENT_BANK
      3  3904				   LEVEL__036_R SUBROUTINE
      4  3904				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3904
      2  3904		       32 2d 35 23*	      .byte.b	"2-5#2-|-2#.2-2#-|-#.*-$-2#|2#2.$-$-#|#.2*.-$@#|#2-$2-$2#|3#4-#-|2-6#-",0
      0  394a					      END_LEVEL	_036_R
      1  394a		       00 46	   LEVEL_SIZE__036_R =	* - LEVEL_START
      2  394a				  -	      IF	LEVEL_SIZE__036_R > MAX_LEVEL_SIZE
      3  394a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__036_R
      4  394a					      ENDIF
      0  394a					      DEFL	_037_L, "5-6#|6#4-#|#2-#@2.2$-#|#2-$.3*.-#|#3-$.$-$-#|2#2-#.3-2#|-9#-"
      0  394a					      START_LEVEL	_037_L
      1  394a				   LEVEL_START SET	*
      2  394a		       00 07	   BANK_LEVEL__037_L =	_CURRENT_BANK
      3  394a				   LEVEL__037_L SUBROUTINE
      4  394a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  394a
      2  394a		       35 2d 36 23*	      .byte.b	"5-6#|6#4-#|#2-#@2.2$-#|#2-$.3*.-#|#3-$.$-$-#|2#2-#.3-2#|-9#-",0
      0  3987					      END_LEVEL	_037_L
      1  3987		       00 3d	   LEVEL_SIZE__037_L =	* - LEVEL_START
      2  3987				  -	      IF	LEVEL_SIZE__037_L > MAX_LEVEL_SIZE
      3  3987				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__037_L
      4  3987					      ENDIF
      0  3987					      DEFL	_037_R, "9#2-|#7-3#|#-$2-.2*.-#|2#-*.*$3-#|-2#-2*.#2-#|2-2#@$-$-2#|3-3#3-#-|5-5#-"
      0  3987					      START_LEVEL	_037_R
      1  3987				   LEVEL_START SET	*
      2  3987		       00 07	   BANK_LEVEL__037_R =	_CURRENT_BANK
      3  3987				   LEVEL__037_R SUBROUTINE
      4  3987				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3987
      2  3987		       39 23 32 2d*	      .byte.b	"9#2-|#7-3#|#-$2-.2*.-#|2#-*.*$3-#|-2#-2*.#2-#|2-2#@$-$-2#|3-3#3-#-|5-5#-",0
      0  39d0					      END_LEVEL	_037_R
      1  39d0		       00 49	   LEVEL_SIZE__037_R =	* - LEVEL_START
      2  39d0				  -	      IF	LEVEL_SIZE__037_R > MAX_LEVEL_SIZE
      3  39d0				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__037_R
      4  39d0					      ENDIF
      0  39d0					      DEFL	_038_L, "6-4#2-|4-3#@-3#|3-2#2.*$2-#|4#.*.*3-#|#2-2$3-$2-#|#5-6#|3#2-2#5-|2-4#6-"
      0  39d0					      START_LEVEL	_038_L
      1  39d0				   LEVEL_START SET	*
      2  39d0		       00 07	   BANK_LEVEL__038_L =	_CURRENT_BANK
      3  39d0				   LEVEL__038_L SUBROUTINE
      4  39d0				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  39d0
      2  39d0		       36 2d 34 23*	      .byte.b	"6-4#2-|4-3#@-3#|3-2#2.*$2-#|4#.*.*3-#|#2-2$3-$2-#|#5-6#|3#2-2#5-|2-4#6-",0
      0  3a18					      END_LEVEL	_038_L
      1  3a18		       00 48	   LEVEL_SIZE__038_L =	* - LEVEL_START
      2  3a18				  -	      IF	LEVEL_SIZE__038_L > MAX_LEVEL_SIZE
      3  3a18				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__038_L
      4  3a18					      ENDIF
      0  3a18					      DEFL	_038_R, "6-6#|4-3#.#-@#|2-3#2.*#$-#|3#-.*2.-$-#|#2-2$2-#-3#|#-$2-#-$-#2-|2#5-3#2-|-7#4-"
      0  3a18					      START_LEVEL	_038_R
      1  3a18				   LEVEL_START SET	*
      2  3a18		       00 07	   BANK_LEVEL__038_R =	_CURRENT_BANK
      3  3a18				   LEVEL__038_R SUBROUTINE
      4  3a18				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3a18
      2  3a18		       36 2d 36 23*	      .byte.b	"6-6#|4-3#.#-@#|2-3#2.*#$-#|3#-.*2.-$-#|#2-2$2-#-3#|#-$2-#-$-#2-|2#5-3#2-|-7#4-",0
      0  3a67					      END_LEVEL	_038_R
      1  3a67		       00 4f	   LEVEL_SIZE__038_R =	* - LEVEL_START
      2  3a67				  -	      IF	LEVEL_SIZE__038_R > MAX_LEVEL_SIZE
      3  3a67				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__038_R
      4  3a67					      ENDIF
      0  3a67					      DEFL	_039_L, "-7#2-|-#5-#2-|2#-#-$-#2-|#.2*.-3#-|2#@3*2-2#|-2#-2.$2-#|2-2#$#-$-#|3-#5-#|3-7#"
      0  3a67					      START_LEVEL	_039_L
      1  3a67				   LEVEL_START SET	*
      2  3a67		       00 07	   BANK_LEVEL__039_L =	_CURRENT_BANK
      3  3a67				   LEVEL__039_L SUBROUTINE
      4  3a67				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3a67
      2  3a67		       2d 37 23 32*	      .byte.b	"-7#2-|-#5-#2-|2#-#-$-#2-|#.2*.-3#-|2#@3*2-2#|-2#-2.$2-#|2-2#$#-$-#|3-#5-#|3-7#",0
      0  3ab6					      END_LEVEL	_039_L
      1  3ab6		       00 4f	   LEVEL_SIZE__039_L =	* - LEVEL_START
      2  3ab6				  -	      IF	LEVEL_SIZE__039_L > MAX_LEVEL_SIZE
      3  3ab6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__039_L
      4  3ab6					      ENDIF
      0  3ab6					      DEFL	_039_R, "4-4#4-|3-2#2-3#2-|2-2#-$.2-#2-|3#-.2*-$3#|#-$-4.3-#|#@$3#-#-#-#|2#4-$2-$-#|-5#3-3#|5-5#2-"
      0  3ab6					      START_LEVEL	_039_R
      1  3ab6				   LEVEL_START SET	*
      2  3ab6		       00 07	   BANK_LEVEL__039_R =	_CURRENT_BANK
      3  3ab6				   LEVEL__039_R SUBROUTINE
      4  3ab6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3ab6
      2  3ab6		       34 2d 34 23*	      .byte.b	"4-4#4-|3-2#2-3#2-|2-2#-$.2-#2-|3#-.2*-$3#|#-$-4.3-#|#@$3#-#-#-#|2#4-$2-$-#|-5#3-3#|5-5#2-",0
      0  3b10					      END_LEVEL	_039_R
      1  3b10		       00 5a	   LEVEL_SIZE__039_R =	* - LEVEL_START
      2  3b10					      IF	LEVEL_SIZE__039_R > MAX_LEVEL_SIZE
      3  3b10				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__039_R
      4  3b10					      ENDIF
      0  3b10					      DEFL	_040_L, "6#3-|#3-@#3-|#2-$.3#-|3#$*$.2#|3#-.2*.#|#2-$-.3#|#2-$3-#-|4#3-#-|3-5#-"
      0  3b10					      START_LEVEL	_040_L
      1  3b10				   LEVEL_START SET	*
      2  3b10		       00 07	   BANK_LEVEL__040_L =	_CURRENT_BANK
      3  3b10				   LEVEL__040_L SUBROUTINE
      4  3b10				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3b10
      2  3b10		       36 23 33 2d*	      .byte.b	"6#3-|#3-@#3-|#2-$.3#-|3#$*$.2#|3#-.2*.#|#2-$-.3#|#2-$3-#-|4#3-#-|3-5#-",0
      0  3b57					      END_LEVEL	_040_L
      1  3b57		       00 47	   LEVEL_SIZE__040_L =	* - LEVEL_START
      2  3b57				  -	      IF	LEVEL_SIZE__040_L > MAX_LEVEL_SIZE
      3  3b57				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__040_L
      4  3b57					      ENDIF
      0  3b57					      DEFL	_040_R, "5-4#-|-5#2-2#|2#.-$2-$-#|#-2.*.$#@#|#-*-.2-$-#|2#-$*-4#|-#3-2#3-|-5#4-"
      0  3b57					      START_LEVEL	_040_R
      1  3b57				   LEVEL_START SET	*
      2  3b57		       00 07	   BANK_LEVEL__040_R =	_CURRENT_BANK
      3  3b57				   LEVEL__040_R SUBROUTINE
      4  3b57				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3b57
      2  3b57		       35 2d 34 23*	      .byte.b	"5-4#-|-5#2-2#|2#.-$2-$-#|#-2.*.$#@#|#-*-.2-$-#|2#-$*-4#|-#3-2#3-|-5#4-",0
      0  3b9e					      END_LEVEL	_040_R
      1  3b9e		       00 47	   LEVEL_SIZE__040_R =	* - LEVEL_START
      2  3b9e				  -	      IF	LEVEL_SIZE__040_R > MAX_LEVEL_SIZE
      3  3b9e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__040_R
      4  3b9e					      ENDIF
     49  3b9e
      0  3b9e					      DEFL	_041_L, "4-3#5-|4-#.4#2-|5#*.$-#2-|#4-3.-3#|#-3$-*.$2-#|2#-@2#.$-$-#|-5#4-2#|5-6#-"
      0  3b9e					      START_LEVEL	_041_L
      1  3b9e				   LEVEL_START SET	*
      2  3b9e		       00 07	   BANK_LEVEL__041_L =	_CURRENT_BANK
      3  3b9e				   LEVEL__041_L SUBROUTINE
      4  3b9e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3b9e
      2  3b9e		       34 2d 33 23*	      .byte.b	"4-3#5-|4-#.4#2-|5#*.$-#2-|#4-3.-3#|#-3$-*.$2-#|2#-@2#.$-$-#|-5#4-2#|5-6#-",0
      0  3be8					      END_LEVEL	_041_L
      1  3be8		       00 4a	   LEVEL_SIZE__041_L =	* - LEVEL_START
      2  3be8				  -	      IF	LEVEL_SIZE__041_L > MAX_LEVEL_SIZE
      3  3be8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__041_L
      4  3be8					      ENDIF
      0  3be8					      DEFL	_041_R, "-4#3-|2#2-3#-|#-@2$-#-|#-$-#.#-|2#$-2.2#|#2-$*2.#|#2-$-*2#|#3-#.#-|7#-"
      0  3be8					      START_LEVEL	_041_R
      1  3be8				   LEVEL_START SET	*
      2  3be8		       00 07	   BANK_LEVEL__041_R =	_CURRENT_BANK
      3  3be8				   LEVEL__041_R SUBROUTINE
      4  3be8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3be8
      2  3be8		       2d 34 23 33*	      .byte.b	"-4#3-|2#2-3#-|#-@2$-#-|#-$-#.#-|2#$-2.2#|#2-$*2.#|#2-$-*2#|#3-#.#-|7#-",0
      0  3c2f					      END_LEVEL	_041_R
      1  3c2f		       00 47	   LEVEL_SIZE__041_R =	* - LEVEL_START
      2  3c2f				  -	      IF	LEVEL_SIZE__041_R > MAX_LEVEL_SIZE
      3  3c2f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__041_R
      4  3c2f					      ENDIF
      0  3c2f					      DEFL	_042_L, "8#4-|#6-#4-|#-#-$*-#4-|#-#-#.3#3-|#3-#2.-3#-|#3-2*4-2#|5#.-3$-#|4-4#2-@#|7-5#"
      0  3c2f					      START_LEVEL	_042_L
      1  3c2f				   LEVEL_START SET	*
      2  3c2f		       00 07	   BANK_LEVEL__042_L =	_CURRENT_BANK
      3  3c2f				   LEVEL__042_L SUBROUTINE
      4  3c2f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3c2f
      2  3c2f		       38 23 34 2d*	      .byte.b	"8#4-|#6-#4-|#-#-$*-#4-|#-#-#.3#3-|#3-#2.-3#-|#3-2*4-2#|5#.-3$-#|4-4#2-@#|7-5#",0
      0  3c7d					      END_LEVEL	_042_L
      1  3c7d		       00 4e	   LEVEL_SIZE__042_L =	* - LEVEL_START
      2  3c7d				  -	      IF	LEVEL_SIZE__042_L > MAX_LEVEL_SIZE
      3  3c7d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__042_L
      4  3c7d					      ENDIF
      0  3c7d					      DEFL	_042_R, "3-5#4-|2-2#3-#4-|2-#-$-$#4-|3#-*.-2#3-|#@$-#.$-2#2-|#-$2-.*.-3#|3#2.*-$3-#|2-6#3-#|7-5#"
      0  3c7d					      START_LEVEL	_042_R
      1  3c7d				   LEVEL_START SET	*
      2  3c7d		       00 07	   BANK_LEVEL__042_R =	_CURRENT_BANK
      3  3c7d				   LEVEL__042_R SUBROUTINE
      4  3c7d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3c7d
      2  3c7d		       33 2d 35 23*	      .byte.b	"3-5#4-|2-2#3-#4-|2-#-$-$#4-|3#-*.-2#3-|#@$-#.$-2#2-|#-$2-.*.-3#|3#2.*-$3-#|2-6#3-#|7-5#",0
      0  3cd5					      END_LEVEL	_042_R
      1  3cd5		       00 58	   LEVEL_SIZE__042_R =	* - LEVEL_START
      2  3cd5				  -	      IF	LEVEL_SIZE__042_R > MAX_LEVEL_SIZE
      3  3cd5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__042_R
      4  3cd5					      ENDIF
      0  3cd5					      DEFL	_043_L, "-8#4-|-#@$.-.-5#|-#2$*.2*.3-#|2#2-$-.2-#$-#|#-$-2#.#3-2#|#3-8#-|#2-2#8-|4#9-"
      0  3cd5					      START_LEVEL	_043_L
      1  3cd5				   LEVEL_START SET	*
      2  3cd5		       00 07	   BANK_LEVEL__043_L =	_CURRENT_BANK
      3  3cd5				   LEVEL__043_L SUBROUTINE
      4  3cd5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3cd5
      2  3cd5		       2d 38 23 34*	      .byte.b	"-8#4-|-#@$.-.-5#|-#2$*.2*.3-#|2#2-$-.2-#$-#|#-$-2#.#3-2#|#3-8#-|#2-2#8-|4#9-",0
      0  3d22					      END_LEVEL	_043_L
      1  3d22		       00 4d	   LEVEL_SIZE__043_L =	* - LEVEL_START
      2  3d22				  -	      IF	LEVEL_SIZE__043_L > MAX_LEVEL_SIZE
      3  3d22				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__043_L
      4  3d22					      ENDIF
      0  3d22					      DEFL	_043_R, "2-6#-|-2#4-#-|2#@$-#-#-|#-$#$2.#-|#*.*2.*2#|#-$2-$2.#|#-$-$2-2#|#4-3#-|6#3-"
      0  3d22					      START_LEVEL	_043_R
      1  3d22				   LEVEL_START SET	*
      2  3d22		       00 07	   BANK_LEVEL__043_R =	_CURRENT_BANK
      3  3d22				   LEVEL__043_R SUBROUTINE
      4  3d22				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3d22
      2  3d22		       32 2d 36 23*	      .byte.b	"2-6#-|-2#4-#-|2#@$-#-#-|#-$#$2.#-|#*.*2.*2#|#-$2-$2.#|#-$-$2-2#|#4-3#-|6#3-",0
      0  3d6e					      END_LEVEL	_043_R
      1  3d6e		       00 4c	   LEVEL_SIZE__043_R =	* - LEVEL_START
      2  3d6e				  -	      IF	LEVEL_SIZE__043_R > MAX_LEVEL_SIZE
      3  3d6e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__043_R
      4  3d6e					      ENDIF
      0  3d6e					      DEFL	_044_L, "7#-|#@4-#-|#$-.2$#-|#3.*-2#|#*$2*2-#|#3-#2-#|#3-#2-#|8#"
      0  3d6e					      START_LEVEL	_044_L
      1  3d6e				   LEVEL_START SET	*
      2  3d6e		       00 07	   BANK_LEVEL__044_L =	_CURRENT_BANK
      3  3d6e				   LEVEL__044_L SUBROUTINE
      4  3d6e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3d6e
      2  3d6e		       37 23 2d 7c*	      .byte.b	"7#-|#@4-#-|#$-.2$#-|#3.*-2#|#*$2*2-#|#3-#2-#|#3-#2-#|8#",0
      0  3da6					      END_LEVEL	_044_L
      1  3da6		       00 38	   LEVEL_SIZE__044_L =	* - LEVEL_START
      2  3da6				  -	      IF	LEVEL_SIZE__044_L > MAX_LEVEL_SIZE
      3  3da6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__044_L
      4  3da6					      ENDIF
      0  3da6					      DEFL	_044_R, "4#-4#-|#2-3#2-#-|#@$2-#-$2#|#$*$5-#|#-*2.$2#-#|#3.#4-#|2#-.-$4#|-3#2-#3-|3-4#3-"
      0  3da6					      START_LEVEL	_044_R
      1  3da6				   LEVEL_START SET	*
      2  3da6		       00 07	   BANK_LEVEL__044_R =	_CURRENT_BANK
      3  3da6				   LEVEL__044_R SUBROUTINE
      4  3da6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3da6
      2  3da6		       34 23 2d 34*	      .byte.b	"4#-4#-|#2-3#2-#-|#@$2-#-$2#|#$*$5-#|#-*2.$2#-#|#3.#4-#|2#-.-$4#|-3#2-#3-|3-4#3-",0
      0  3df6					      END_LEVEL	_044_R
      1  3df6		       00 50	   LEVEL_SIZE__044_R =	* - LEVEL_START
      2  3df6				  -	      IF	LEVEL_SIZE__044_R > MAX_LEVEL_SIZE
      3  3df6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__044_R
      4  3df6					      ENDIF
      0  3df6					      DEFL	_045_L, "3-4#2-|3-#2.3#|4#$.$-#|#@-#-.*-#|#-$2-2*.#|2#-$-*2-#|-2#-$3-#|2-2#2-3#|3-4#2-"
      0  3df6					      START_LEVEL	_045_L
      1  3df6				   LEVEL_START SET	*
      2  3df6		       00 07	   BANK_LEVEL__045_L =	_CURRENT_BANK
      3  3df6				   LEVEL__045_L SUBROUTINE
      4  3df6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3df6
      2  3df6		       33 2d 34 23*	      .byte.b	"3-4#2-|3-#2.3#|4#$.$-#|#@-#-.*-#|#-$2-2*.#|2#-$-*2-#|-2#-$3-#|2-2#2-3#|3-4#2-",0
      0  3e44					      END_LEVEL	_045_L
      1  3e44		       00 4e	   LEVEL_SIZE__045_L =	* - LEVEL_START
      2  3e44				  -	      IF	LEVEL_SIZE__045_L > MAX_LEVEL_SIZE
      3  3e44				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__045_L
      4  3e44					      ENDIF
      0  3e44					      DEFL	_045_R, "3-6#2-|4#4-#2-|#-$-$2#-3#|#-2$-$-$2-#|#-5.#$-#|#-.*#$2.2-#|2#.-$@5#|-6#4-"
      0  3e44					      START_LEVEL	_045_R
      1  3e44				   LEVEL_START SET	*
      2  3e44		       00 07	   BANK_LEVEL__045_R =	_CURRENT_BANK
      3  3e44				   LEVEL__045_R SUBROUTINE
      4  3e44				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3e44
      2  3e44		       33 2d 36 23*	      .byte.b	"3-6#2-|4#4-#2-|#-$-$2#-3#|#-2$-$-$2-#|#-5.#$-#|#-.*#$2.2-#|2#.-$@5#|-6#4-",0
      0  3e8e					      END_LEVEL	_045_R
      1  3e8e		       00 4a	   LEVEL_SIZE__045_R =	* - LEVEL_START
      2  3e8e				  -	      IF	LEVEL_SIZE__045_R > MAX_LEVEL_SIZE
      3  3e8e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__045_R
      4  3e8e					      ENDIF
      0  3e8e					      DEFL	_046_L, "10#-|#@3-#3-2#|#-#*$2-2$-#|#-*.$-$3-#|3#.*$-#2-#|2-#.*.-4#|2-#2.-2#3-|2-5#4-"
      0  3e8e					      START_LEVEL	_046_L
      1  3e8e				   LEVEL_START SET	*
      2  3e8e		       00 07	   BANK_LEVEL__046_L =	_CURRENT_BANK
      3  3e8e				   LEVEL__046_L SUBROUTINE
      4  3e8e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3e8e
      2  3e8e		       31 30 23 2d*	      .byte.b	"10#-|#@3-#3-2#|#-#*$2-2$-#|#-*.$-$3-#|3#.*$-#2-#|2-#.*.-4#|2-#2.-2#3-|2-5#4-",0
      0  3edb					      END_LEVEL	_046_L
      1  3edb		       00 4d	   LEVEL_SIZE__046_L =	* - LEVEL_START
      2  3edb				  -	      IF	LEVEL_SIZE__046_L > MAX_LEVEL_SIZE
      3  3edb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__046_L
      4  3edb					      ENDIF
      0  3edb					      DEFL	_046_R, "8#3-|#3-4#3-|#-$2-$@3#-|#2-5$-#-|3#3.*2.2#|2-2#2-$3.#|3-#2-5#|3-4#4-"
      0  3edb					      START_LEVEL	_046_R
      1  3edb				   LEVEL_START SET	*
      2  3edb		       00 07	   BANK_LEVEL__046_R =	_CURRENT_BANK
      3  3edb				   LEVEL__046_R SUBROUTINE
      4  3edb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3edb
      2  3edb		       38 23 33 2d*	      .byte.b	"8#3-|#3-4#3-|#-$2-$@3#-|#2-5$-#-|3#3.*2.2#|2-2#2-$3.#|3-#2-5#|3-4#4-",0
      0  3f20					      END_LEVEL	_046_R
      1  3f20		       00 45	   LEVEL_SIZE__046_R =	* - LEVEL_START
      2  3f20				  -	      IF	LEVEL_SIZE__046_R > MAX_LEVEL_SIZE
      3  3f20				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__046_R
      4  3f20					      ENDIF
      0  3f20					      DEFL	_047_L, "5-3#5-|3-3#.#5-|2-2#2-.#5-|2-#-$#.6#|3#3-.2#3-#|#-$@2*.$-$#-#|#4-2#-$3-#|8#3-2#|7-5#-"
      0  3f20					      START_LEVEL	_047_L
      1  3f20				   LEVEL_START SET	*
      2  3f20		       00 07	   BANK_LEVEL__047_L =	_CURRENT_BANK
      3  3f20				   LEVEL__047_L SUBROUTINE
      4  3f20				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3f20
      2  3f20		       35 2d 33 23*	      .byte.b	"5-3#5-|3-3#.#5-|2-2#2-.#5-|2-#-$#.6#|3#3-.2#3-#|#-$@2*.$-$#-#|#4-2#-$3-#|8#3-2#|7-5#-",0
      0  3f76					      END_LEVEL	_047_L
      1  3f76		       00 56	   LEVEL_SIZE__047_L =	* - LEVEL_START
      2  3f76				  -	      IF	LEVEL_SIZE__047_L > MAX_LEVEL_SIZE
      3  3f76				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__047_L
      4  3f76					      ENDIF
      0  3f76					      DEFL	_047_R, "4-6#|3-2#3-@#|-3#-3$-#|-#.2-#-$-#|2#.*2-$2-#|#2.-2$#-2#|2#2.#-3#-|-#.3-#3-|-6#3-"
      0  3f76					      START_LEVEL	_047_R
      1  3f76				   LEVEL_START SET	*
      2  3f76		       00 07	   BANK_LEVEL__047_R =	_CURRENT_BANK
      3  3f76				   LEVEL__047_R SUBROUTINE
      4  3f76				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  3f76
      2  3f76		       34 2d 36 23*	      .byte.b	"4-6#|3-2#3-@#|-3#-3$-#|-#.2-#-$-#|2#.*2-$2-#|#2.-2$#-2#|2#2.#-3#-|-#.3-#3-|-6#3-",0
      0  3fc7					      END_LEVEL	_047_R
      1  3fc7		       00 51	   LEVEL_SIZE__047_R =	* - LEVEL_START
      2  3fc7				  -	      IF	LEVEL_SIZE__047_R > MAX_LEVEL_SIZE
      3  3fc7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__047_R
      4  3fc7					      ENDIF
     64  3fc7
     65  3fc7
     66  3fc7
      0  3fc7					      CHECK_BANK_SIZE	"LEVELS3 -- full 2K"
      1  3fc7		       07 c7	   .TEMP      =	* - BANK_START
 LEVELS3 -- full 2K (2K) SIZE =  $7c7 , FREE= $39
      2  3fc7					      ECHO	"LEVELS3 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  3fc7				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  3fc7				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  3fc7				  -	      ERR
      6  3fc7					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS4.asm LEVEL 2 PASS 3
      0  3fc7					      include	"BANK_LEVELS4.asm"
      1  3fc7							;    Sokoboo - a Sokoban implementation
      2  3fc7							;    using a generic tile-based display engine for the Atari 2600
      3  3fc7							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  3fc7							;
      5  3fc7							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  3fc7							;
      7  3fc7							;    Code related to the generic tile-based display engine was developed by
      8  3fc7							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  3fc7							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  3fc7							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  3fc7							;
     12  3fc7							;    Code related to music and sound effects uses the TIATracker music player
     13  3fc7							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  3fc7							;    directory for Apache licensing details.
     15  3fc7							;
     16  3fc7							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  3fc7							;    See the copyright notices in the License directory for a list of level
     18  3fc7							;    contributors.
     19  3fc7							;
     20  3fc7							;    Except where otherwise indicated, this software is released under the
     21  3fc7							;    following licensing arrangement...
     22  3fc7							;
     23  3fc7							;    This program is free software: you can redistribute it and/or modify
     24  3fc7							;    it under the terms of the GNU General Public License as published by
     25  3fc7							;    the Free Software Foundation, either version 3 of the License, or
     26  3fc7							;    (at your option) any later version.
     27  3fc7							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  3fc7
     29  3fc7							;    This program is distributed in the hope that it will be useful,
     30  3fc7							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  3fc7							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  3fc7							;    GNU General Public License for more details.
     33  3fc7
     34  3fc7							; level definitions
     35  3fc7							; Sample level definitions.
     36  3fc7							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  3fc7							; have as many banks as you like.
     38  3fc7
      0  3fc7					      NEWBANK	LEVELS4
      1  474a ????				      SEG	LEVELS4
      2  4000					      ORG	ORIGIN
      3  4000					      RORG	$F000
      4  4000				   BANK_START SET	*
      5  4000				   LEVELS4    SET	ORIGIN / 2048
      6  4000				   ORIGIN     SET	ORIGIN + 2048
      7  4000				   _CURRENT_BANK SET	LEVELS4
     40  4000
      0  4000					      DEFL	_048_L, "2-7#-|2-#5-2#|3#$2-#2-#|#-$.3-$-#|#.2*2-4#|#+.#-2#3-|2#$3-#3-|-#4-#3-|-6#3-"
      0  4000					      START_LEVEL	_048_L
      1  4000				   LEVEL_START SET	*
      2  4000		       00 08	   BANK_LEVEL__048_L =	_CURRENT_BANK
      3  4000				   LEVEL__048_L SUBROUTINE
      4  4000				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4000
      2  4000		       32 2d 37 23*	      .byte.b	"2-7#-|2-#5-2#|3#$2-#2-#|#-$.3-$-#|#.2*2-4#|#+.#-2#3-|2#$3-#3-|-#4-#3-|-6#3-",0
      0  404c					      END_LEVEL	_048_L
      1  404c		       00 4c	   LEVEL_SIZE__048_L =	* - LEVEL_START
      2  404c				  -	      IF	LEVEL_SIZE__048_L > MAX_LEVEL_SIZE
      3  404c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__048_L
      4  404c					      ENDIF
      0  404c					      DEFL	_048_R, "5-5#|2-4#3-#|3#-.$-$-#|#2-*3.3#|#2-*.-4#|2#2$*$3-#|-#@$.4-#|-4#2-3#|4-4#2-"
      0  404c					      START_LEVEL	_048_R
      1  404c				   LEVEL_START SET	*
      2  404c		       00 08	   BANK_LEVEL__048_R =	_CURRENT_BANK
      3  404c				   LEVEL__048_R SUBROUTINE
      4  404c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  404c
      2  404c		       35 2d 35 23*	      .byte.b	"5-5#|2-4#3-#|3#-.$-$-#|#2-*3.3#|#2-*.-4#|2#2$*$3-#|-#@$.4-#|-4#2-3#|4-4#2-",0
      0  4097					      END_LEVEL	_048_R
      1  4097		       00 4b	   LEVEL_SIZE__048_R =	* - LEVEL_START
      2  4097				  -	      IF	LEVEL_SIZE__048_R > MAX_LEVEL_SIZE
      3  4097				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__048_R
      4  4097					      ENDIF
      0  4097					      DEFL	_049_L, "4#7-|#2-4#4-|#2-$2-5#|#-$-#-4.#|2#-2$-.-.2#|-#$-#-*#-#-|-#-@#$-#-#-|-4#4-#-|4-6#-"
      0  4097					      START_LEVEL	_049_L
      1  4097				   LEVEL_START SET	*
      2  4097		       00 08	   BANK_LEVEL__049_L =	_CURRENT_BANK
      3  4097				   LEVEL__049_L SUBROUTINE
      4  4097				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4097
      2  4097		       34 23 37 2d*	      .byte.b	"4#7-|#2-4#4-|#2-$2-5#|#-$-#-4.#|2#-2$-.-.2#|-#$-#-*#-#-|-#-@#$-#-#-|-4#4-#-|4-6#-",0
      0  40e9					      END_LEVEL	_049_L
      1  40e9		       00 52	   LEVEL_SIZE__049_L =	* - LEVEL_START
      2  40e9				  -	      IF	LEVEL_SIZE__049_L > MAX_LEVEL_SIZE
      3  40e9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__049_L
      4  40e9					      ENDIF
      0  40e9					      DEFL	_049_R, "8#2-|#6-3#|#-$2#$.*-#|#-$-$2.*+#|#3-#2.$-#|#-2$#-.3#|2#5-#2-|-7#2-"
      0  40e9					      START_LEVEL	_049_R
      1  40e9				   LEVEL_START SET	*
      2  40e9		       00 08	   BANK_LEVEL__049_R =	_CURRENT_BANK
      3  40e9				   LEVEL__049_R SUBROUTINE
      4  40e9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  40e9
      2  40e9		       38 23 32 2d*	      .byte.b	"8#2-|#6-3#|#-$2#$.*-#|#-$-$2.*+#|#3-#2.$-#|#-2$#-.3#|2#5-#2-|-7#2-",0
      0  412c					      END_LEVEL	_049_R
      1  412c		       00 43	   LEVEL_SIZE__049_R =	* - LEVEL_START
      2  412c				  -	      IF	LEVEL_SIZE__049_R > MAX_LEVEL_SIZE
      3  412c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__049_R
      4  412c					      ENDIF
     45  412c
      0  412c					      DEFL	_050_L, "4-5#3-|4-#-@-#3-|4-#$.$2#2-|-4#-*2-#2-|2#4-*.*3#|#2-$-#2.-$-#|#3-3#4-#|5#-6#"
      0  412c					      START_LEVEL	_050_L
      1  412c				   LEVEL_START SET	*
      2  412c		       00 08	   BANK_LEVEL__050_L =	_CURRENT_BANK
      3  412c				   LEVEL__050_L SUBROUTINE
      4  412c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  412c
      2  412c		       34 2d 35 23*	      .byte.b	"4-5#3-|4-#-@-#3-|4-#$.$2#2-|-4#-*2-#2-|2#4-*.*3#|#2-$-#2.-$-#|#3-3#4-#|5#-6#",0
      0  4179					      END_LEVEL	_050_L
      1  4179		       00 4d	   LEVEL_SIZE__050_L =	* - LEVEL_START
      2  4179				  -	      IF	LEVEL_SIZE__050_L > MAX_LEVEL_SIZE
      3  4179				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__050_L
      4  4179					      ENDIF
      0  4179					      DEFL	_050_R, "8#|#4-@-#|#2-$*2$#|#-$*2.-#|#*2.$*.#|#2-*#2-#|#-$.3-#|8#"
      0  4179					      START_LEVEL	_050_R
      1  4179				   LEVEL_START SET	*
      2  4179		       00 08	   BANK_LEVEL__050_R =	_CURRENT_BANK
      3  4179				   LEVEL__050_R SUBROUTINE
      4  4179				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4179
      2  4179		       38 23 7c 23*	      .byte.b	"8#|#4-@-#|#2-$*2$#|#-$*2.-#|#*2.$*.#|#2-*#2-#|#-$.3-#|8#",0
      0  41b2					      END_LEVEL	_050_R
      1  41b2		       00 39	   LEVEL_SIZE__050_R =	* - LEVEL_START
      2  41b2				  -	      IF	LEVEL_SIZE__050_R > MAX_LEVEL_SIZE
      3  41b2				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__050_R
      4  41b2					      ENDIF
      0  41b2					      DEFL	_051_L, "-6#4-|-#2-@-#4-|-#$-*-2#3-|2#-3*.#3-|#2-.*.-#3-|#-#2$2.4#|#4-$-$2-#|3#2-2#3-#|2-9#"
      0  41b2					      START_LEVEL	_051_L
      1  41b2				   LEVEL_START SET	*
      2  41b2		       00 08	   BANK_LEVEL__051_L =	_CURRENT_BANK
      3  41b2				   LEVEL__051_L SUBROUTINE
      4  41b2				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  41b2
      2  41b2		       2d 36 23 34*	      .byte.b	"-6#4-|-#2-@-#4-|-#$-*-2#3-|2#-3*.#3-|#2-.*.-#3-|#-#2$2.4#|#4-$-$2-#|3#2-2#3-#|2-9#",0
      0  4205					      END_LEVEL	_051_L
      1  4205		       00 53	   LEVEL_SIZE__051_L =	* - LEVEL_START
      2  4205				  -	      IF	LEVEL_SIZE__051_L > MAX_LEVEL_SIZE
      3  4205				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__051_L
      4  4205					      ENDIF
      0  4205					      DEFL	_051_R, "-8#-|-#3-#2-#-|2#$-.$2-2#|#-$.*#$2-#|#-*.3-#-#|#3.#$3-#|3#-$@4#|2-#2-2#3-|2-4#4-"
      0  4205					      START_LEVEL	_051_R
      1  4205				   LEVEL_START SET	*
      2  4205		       00 08	   BANK_LEVEL__051_R =	_CURRENT_BANK
      3  4205				   LEVEL__051_R SUBROUTINE
      4  4205				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4205
      2  4205		       2d 38 23 2d*	      .byte.b	"-8#-|-#3-#2-#-|2#$-.$2-2#|#-$.*#$2-#|#-*.3-#-#|#3.#$3-#|3#-$@4#|2-#2-2#3-|2-4#4-",0
      0  4256					      END_LEVEL	_051_R
      1  4256		       00 51	   LEVEL_SIZE__051_R =	* - LEVEL_START
      2  4256				  -	      IF	LEVEL_SIZE__051_R > MAX_LEVEL_SIZE
      3  4256				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__051_R
      4  4256					      ENDIF
      0  4256					      DEFL	_052_L, "5#6-|#.*.2#5-|#@*2.6#|#-*-2$4-#|2#-$3-$2-#|-3#2-5#|3-4#4-"
      0  4256					      START_LEVEL	_052_L
      1  4256				   LEVEL_START SET	*
      2  4256		       00 08	   BANK_LEVEL__052_L =	_CURRENT_BANK
      3  4256				   LEVEL__052_L SUBROUTINE
      4  4256				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4256
      2  4256		       35 23 36 2d*	      .byte.b	"5#6-|#.*.2#5-|#@*2.6#|#-*-2$4-#|2#-$3-$2-#|-3#2-5#|3-4#4-",0
      0  4290					      END_LEVEL	_052_L
      1  4290		       00 3a	   LEVEL_SIZE__052_L =	* - LEVEL_START
      2  4290				  -	      IF	LEVEL_SIZE__052_L > MAX_LEVEL_SIZE
      3  4290				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__052_L
      4  4290					      ENDIF
      0  4290					      DEFL	_052_R, "2-7#|2-#4-@#|2-#-2$2-#|4#*.$-#|#3.*.$2#|#-#-#2-#-|#2-$3-#-|5#2-#-|4-4#-"
      0  4290					      START_LEVEL	_052_R
      1  4290				   LEVEL_START SET	*
      2  4290		       00 08	   BANK_LEVEL__052_R =	_CURRENT_BANK
      3  4290				   LEVEL__052_R SUBROUTINE
      4  4290				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4290
      2  4290		       32 2d 37 23*	      .byte.b	"2-7#|2-#4-@#|2-#-2$2-#|4#*.$-#|#3.*.$2#|#-#-#2-#-|#2-$3-#-|5#2-#-|4-4#-",0
      0  42d8					      END_LEVEL	_052_R
      1  42d8		       00 48	   LEVEL_SIZE__052_R =	* - LEVEL_START
      2  42d8				  -	      IF	LEVEL_SIZE__052_R > MAX_LEVEL_SIZE
      3  42d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__052_R
      4  42d8					      ENDIF
      0  42d8					      DEFL	_053_L, "6#6-|#4-4#3-|#2-2$-$-#3-|#2-#-#.-2#2-|2#$#-$.*.3#|-#@$2-.#2.-#|-4#6-#|4-4#2-2#|7-4#-"
      0  42d8					      START_LEVEL	_053_L
      1  42d8				   LEVEL_START SET	*
      2  42d8		       00 08	   BANK_LEVEL__053_L =	_CURRENT_BANK
      3  42d8				   LEVEL__053_L SUBROUTINE
      4  42d8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  42d8
      2  42d8		       36 23 36 2d*	      .byte.b	"6#6-|#4-4#3-|#2-2$-$-#3-|#2-#-#.-2#2-|2#$#-$.*.3#|-#@$2-.#2.-#|-4#6-#|4-4#2-2#|7-4#-",0
      0  432d					      END_LEVEL	_053_L
      1  432d		       00 55	   LEVEL_SIZE__053_L =	* - LEVEL_START
      2  432d				  -	      IF	LEVEL_SIZE__053_L > MAX_LEVEL_SIZE
      3  432d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__053_L
      4  432d					      ENDIF
      0  432d					      DEFL	_053_R, "5-5#|3-3#3-#|-3#3-#-#|2#.$.*2$-#|#2.*3.#-#|2#2$-.-$-#|-#-2$5#|-#@2-#4-|-5#4-"
      0  432d					      START_LEVEL	_053_R
      1  432d				   LEVEL_START SET	*
      2  432d		       00 08	   BANK_LEVEL__053_R =	_CURRENT_BANK
      3  432d				   LEVEL__053_R SUBROUTINE
      4  432d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  432d
      2  432d		       35 2d 35 23*	      .byte.b	"5-5#|3-3#3-#|-3#3-#-#|2#.$.*2$-#|#2.*3.#-#|2#2$-.-$-#|-#-2$5#|-#@2-#4-|-5#4-",0
      0  437a					      END_LEVEL	_053_R
      1  437a		       00 4d	   LEVEL_SIZE__053_R =	* - LEVEL_START
      2  437a				  -	      IF	LEVEL_SIZE__053_R > MAX_LEVEL_SIZE
      3  437a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__053_R
      4  437a					      ENDIF
      0  437a					      DEFL	_054_L, "-8#2-|2#@-.*.-#2-|#-2$#*2-3#|#3-$2.*2-#|3#2-$.$2-#|-#-$-#.4#|-#3-3#3-|-5#5-"
      0  437a					      START_LEVEL	_054_L
      1  437a				   LEVEL_START SET	*
      2  437a		       00 08	   BANK_LEVEL__054_L =	_CURRENT_BANK
      3  437a				   LEVEL__054_L SUBROUTINE
      4  437a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  437a
      2  437a		       2d 38 23 32*	      .byte.b	"-8#2-|2#@-.*.-#2-|#-2$#*2-3#|#3-$2.*2-#|3#2-$.$2-#|-#-$-#.4#|-#3-3#3-|-5#5-",0
      0  43c6					      END_LEVEL	_054_L
      1  43c6		       00 4c	   LEVEL_SIZE__054_L =	* - LEVEL_START
      2  43c6				  -	      IF	LEVEL_SIZE__054_L > MAX_LEVEL_SIZE
      3  43c6				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__054_L
      4  43c6					      ENDIF
      0  43c6					      DEFL	_054_R, "2-4#5-|3#2-6#|#-$-.#.-$-#|#2-$3.2$@#|#2-.*$.-$-#|3#$.-5#|2-#3-#4-|2-5#4-"
      0  43c6					      START_LEVEL	_054_R
      1  43c6				   LEVEL_START SET	*
      2  43c6		       00 08	   BANK_LEVEL__054_R =	_CURRENT_BANK
      3  43c6				   LEVEL__054_R SUBROUTINE
      4  43c6				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  43c6
      2  43c6		       32 2d 34 23*	      .byte.b	"2-4#5-|3#2-6#|#-$-.#.-$-#|#2-$3.2$@#|#2-.*$.-$-#|3#$.-5#|2-#3-#4-|2-5#4-",0
      0  440f					      END_LEVEL	_054_R
      1  440f		       00 49	   LEVEL_SIZE__054_R =	* - LEVEL_START
      2  440f				  -	      IF	LEVEL_SIZE__054_R > MAX_LEVEL_SIZE
      3  440f				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__054_R
      4  440f					      ENDIF
      0  440f					      DEFL	_055_L, "2-4#6-|2-#2-2#5-|3#2.-#-4#|#-$.*-#-#2-#|#-$*.*3#$-#|#2-$3.4-#|#3-2$#$3-#|4#-@#2-3#|3-7#2-"
      0  440f					      START_LEVEL	_055_L
      1  440f				   LEVEL_START SET	*
      2  440f		       00 08	   BANK_LEVEL__055_L =	_CURRENT_BANK
      3  440f				   LEVEL__055_L SUBROUTINE
      4  440f				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  440f
      2  440f		       32 2d 34 23*	      .byte.b	"2-4#6-|2-#2-2#5-|3#2.-#-4#|#-$.*-#-#2-#|#-$*.*3#$-#|#2-$3.4-#|#3-2$#$3-#|4#-@#2-3#|3-7#2-",0
      0  4469					      END_LEVEL	_055_L
      1  4469		       00 5a	   LEVEL_SIZE__055_L =	* - LEVEL_START
      2  4469				  -	      IF	LEVEL_SIZE__055_L > MAX_LEVEL_SIZE
      3  4469				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__055_L
      4  4469					      ENDIF
      0  4469					      DEFL	_055_R, "5-4#2-|5-#2-#2-|-5#2-2#-|-#2-$2-$-2#|2#$-.#4-#|#3-*#$#$-#|#2-*2.-$@2#|2#3.-4#-|-6#4-"
      0  4469					      START_LEVEL	_055_R
      1  4469				   LEVEL_START SET	*
      2  4469		       00 08	   BANK_LEVEL__055_R =	_CURRENT_BANK
      3  4469				   LEVEL__055_R SUBROUTINE
      4  4469				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4469
      2  4469		       35 2d 34 23*	      .byte.b	"5-4#2-|5-#2-#2-|-5#2-2#-|-#2-$2-$-2#|2#$-.#4-#|#3-*#$#$-#|#2-*2.-$@2#|2#3.-4#-|-6#4-",0
      0  44be					      END_LEVEL	_055_R
      1  44be		       00 55	   LEVEL_SIZE__055_R =	* - LEVEL_START
      2  44be				  -	      IF	LEVEL_SIZE__055_R > MAX_LEVEL_SIZE
      3  44be				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__055_R
      4  44be					      ENDIF
      0  44be					      DEFL	_056_L, "6-5#-|6-#3-#-|-6#$#-#-|2#.*.#2-#-2#|#2-3.*@$2-#|#2-*.#-2$2-#|#-2$-3#3-#|#2-3#-#3-#|4#3-5#"
      0  44be					      START_LEVEL	_056_L
      1  44be				   LEVEL_START SET	*
      2  44be		       00 08	   BANK_LEVEL__056_L =	_CURRENT_BANK
      3  44be				   LEVEL__056_L SUBROUTINE
      4  44be				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  44be
      2  44be		       36 2d 35 23*	      .byte.b	"6-5#-|6-#3-#-|-6#$#-#-|2#.*.#2-#-2#|#2-3.*@$2-#|#2-*.#-2$2-#|#-2$-3#3-#|#2-3#-#3-#|4#3-5#",0
      0  4518					      END_LEVEL	_056_L
      1  4518		       00 5a	   LEVEL_SIZE__056_L =	* - LEVEL_START
      2  4518				  -	      IF	LEVEL_SIZE__056_L > MAX_LEVEL_SIZE
      3  4518				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__056_L
      4  4518					      ENDIF
      0  4518					      DEFL	_056_R, "-4#-6#-|-#2-#-#4-#-|-#2-3#-2#$2#|-#$2-@#-2#2-#|2#-2$4.3-#|#2-#3-2.4#|#2-2$5#3-|#4-#7-|6#7-"
      0  4518					      START_LEVEL	_056_R
      1  4518				   LEVEL_START SET	*
      2  4518		       00 08	   BANK_LEVEL__056_R =	_CURRENT_BANK
      3  4518				   LEVEL__056_R SUBROUTINE
      4  4518				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4518
      2  4518		       2d 34 23 2d*	      .byte.b	"-4#-6#-|-#2-#-#4-#-|-#2-3#-2#$2#|-#$2-@#-2#2-#|2#-2$4.3-#|#2-#3-2.4#|#2-2$5#3-|#4-#7-|6#7-",0
      0  4573					      END_LEVEL	_056_R
      1  4573		       00 5b	   LEVEL_SIZE__056_R =	* - LEVEL_START
      2  4573					      IF	LEVEL_SIZE__056_R > MAX_LEVEL_SIZE
      3  4573				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__056_R
      4  4573					      ENDIF
      0  4573					      DEFL	_057_L, "5-6#|4#-#-.2-#|#2-#-#-2.-#|#2-3#2*.-#|#-$-#-*-$2#|#-$-@*.2-#-|#-2$-2#2-#-|#4-5#-|6#5-"
      0  4573					      START_LEVEL	_057_L
      1  4573				   LEVEL_START SET	*
      2  4573		       00 08	   BANK_LEVEL__057_L =	_CURRENT_BANK
      3  4573				   LEVEL__057_L SUBROUTINE
      4  4573				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4573
      2  4573		       35 2d 36 23*	      .byte.b	"5-6#|4#-#-.2-#|#2-#-#-2.-#|#2-3#2*.-#|#-$-#-*-$2#|#-$-@*.2-#-|#-2$-2#2-#-|#4-5#-|6#5-",0
      0  45c9					      END_LEVEL	_057_L
      1  45c9		       00 56	   LEVEL_SIZE__057_L =	* - LEVEL_START
      2  45c9				  -	      IF	LEVEL_SIZE__057_L > MAX_LEVEL_SIZE
      3  45c9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__057_L
      4  45c9					      ENDIF
      0  45c9					      DEFL	_057_R, "5#4-|#3-3#2-|#+2.2-3#|#.#*$-$-#|#.#.-#$-#|#-$2-$2-#|2#$2#3-#|-#5-2#|-7#-"
      0  45c9					      START_LEVEL	_057_R
      1  45c9				   LEVEL_START SET	*
      2  45c9		       00 08	   BANK_LEVEL__057_R =	_CURRENT_BANK
      3  45c9				   LEVEL__057_R SUBROUTINE
      4  45c9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  45c9
      2  45c9		       35 23 34 2d*	      .byte.b	"5#4-|#3-3#2-|#+2.2-3#|#.#*$-$-#|#.#.-#$-#|#-$2-$2-#|2#$2#3-#|-#5-2#|-7#-",0
      0  4612					      END_LEVEL	_057_R
      1  4612		       00 49	   LEVEL_SIZE__057_R =	* - LEVEL_START
      2  4612				  -	      IF	LEVEL_SIZE__057_R > MAX_LEVEL_SIZE
      3  4612				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__057_R
      4  4612					      ENDIF
      0  4612					      DEFL	_058_L, "-6#4-|-#-3.5#|-#-#.*2#2-#|2#-.*$4-#|#-2$*-$-$-#|#@2-2#4-#|7#3-#|6-5#"
      0  4612					      START_LEVEL	_058_L
      1  4612				   LEVEL_START SET	*
      2  4612		       00 08	   BANK_LEVEL__058_L =	_CURRENT_BANK
      3  4612				   LEVEL__058_L SUBROUTINE
      4  4612				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4612
      2  4612		       2d 36 23 34*	      .byte.b	"-6#4-|-#-3.5#|-#-#.*2#2-#|2#-.*$4-#|#-2$*-$-$-#|#@2-2#4-#|7#3-#|6-5#",0
      0  4657					      END_LEVEL	_058_L
      1  4657		       00 45	   LEVEL_SIZE__058_L =	* - LEVEL_START
      2  4657				  -	      IF	LEVEL_SIZE__058_L > MAX_LEVEL_SIZE
      3  4657				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__058_L
      4  4657					      ENDIF
      0  4657					      DEFL	_058_R, "4-5#-|3-2#3-#-|4#-.#$#-|#-$2-.#-#-|#@-3*.-2#|#-$.2-*2-#|3#*$#3-#|2-#4-3#|2-6#2-"
      0  4657					      START_LEVEL	_058_R
      1  4657				   LEVEL_START SET	*
      2  4657		       00 08	   BANK_LEVEL__058_R =	_CURRENT_BANK
      3  4657				   LEVEL__058_R SUBROUTINE
      4  4657				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4657
      2  4657		       34 2d 35 23*	      .byte.b	"4-5#-|3-2#3-#-|4#-.#$#-|#-$2-.#-#-|#@-3*.-2#|#-$.2-*2-#|3#*$#3-#|2-#4-3#|2-6#2-",0
      0  46a7					      END_LEVEL	_058_R
      1  46a7		       00 50	   LEVEL_SIZE__058_R =	* - LEVEL_START
      2  46a7				  -	      IF	LEVEL_SIZE__058_R > MAX_LEVEL_SIZE
      3  46a7				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__058_R
      4  46a7					      ENDIF
      0  46a7					      DEFL	_059_L, "6#5-|#4-#5-|#-$#-5#-|#4-.-$@#-|#-#-2*-#$2#|#-$.*-$3-#|2#$#.-2#2-#|-#-3.2#2-#|-10#"
      0  46a7					      START_LEVEL	_059_L
      1  46a7				   LEVEL_START SET	*
      2  46a7		       00 08	   BANK_LEVEL__059_L =	_CURRENT_BANK
      3  46a7				   LEVEL__059_L SUBROUTINE
      4  46a7				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  46a7
      2  46a7		       36 23 35 2d*	      .byte.b	"6#5-|#4-#5-|#-$#-5#-|#4-.-$@#-|#-#-2*-#$2#|#-$.*-$3-#|2#$#.-2#2-#|-#-3.2#2-#|-10#",0
      0  46f9					      END_LEVEL	_059_L
      1  46f9		       00 52	   LEVEL_SIZE__059_L =	* - LEVEL_START
      2  46f9				  -	      IF	LEVEL_SIZE__059_L > MAX_LEVEL_SIZE
      3  46f9				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__059_L
      4  46f9					      ENDIF
      0  46f9					      DEFL	_059_R, "7-3#-|8#.#-|#4-#-2.2#|#-#-2$*.$-#|#5-2.#-#|2#2-2#-2#-#|#2-$-2$2#-#|#3-2#3-@#|11#"
      0  46f9					      START_LEVEL	_059_R
      1  46f9				   LEVEL_START SET	*
      2  46f9		       00 08	   BANK_LEVEL__059_R =	_CURRENT_BANK
      3  46f9				   LEVEL__059_R SUBROUTINE
      4  46f9				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  46f9
      2  46f9		       37 2d 33 23*	      .byte.b	"7-3#-|8#.#-|#4-#-2.2#|#-#-2$*.$-#|#5-2.#-#|2#2-2#-2#-#|#2-$-2$2#-#|#3-2#3-@#|11#",0
      0  474a					      END_LEVEL	_059_R
      1  474a		       00 51	   LEVEL_SIZE__059_R =	* - LEVEL_START
      2  474a				  -	      IF	LEVEL_SIZE__059_R > MAX_LEVEL_SIZE
      3  474a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__059_R
      4  474a					      ENDIF
     66  474a
      0  474a					      CHECK_BANK_SIZE	"LEVELS4 -- full 2K"
      1  474a		       07 4a	   .TEMP      =	* - BANK_START
 LEVELS4 -- full 2K (2K) SIZE =  $74a , FREE= $b6
      2  474a					      ECHO	"LEVELS4 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  474a				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  474a				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  474a				  -	      ERR
      6  474a					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_LEVELS5.asm LEVEL 2 PASS 3
      0  474a					      include	"BANK_LEVELS5.asm"
      1  474a							;    Sokoboo - a Sokoban implementation
      2  474a							;    using a generic tile-based display engine for the Atari 2600
      3  474a							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  474a							;
      5  474a							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  474a							;
      7  474a							;    Code related to the generic tile-based display engine was developed by
      8  474a							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  474a							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  474a							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  474a							;
     12  474a							;    Code related to music and sound effects uses the TIATracker music player
     13  474a							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  474a							;    directory for Apache licensing details.
     15  474a							;
     16  474a							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  474a							;    See the copyright notices in the License directory for a list of level
     18  474a							;    contributors.
     19  474a							;
     20  474a							;    Except where otherwise indicated, this software is released under the
     21  474a							;    following licensing arrangement...
     22  474a							;
     23  474a							;    This program is free software: you can redistribute it and/or modify
     24  474a							;    it under the terms of the GNU General Public License as published by
     25  474a							;    the Free Software Foundation, either version 3 of the License, or
     26  474a							;    (at your option) any later version.
     27  474a							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  474a
     29  474a							;    This program is distributed in the hope that it will be useful,
     30  474a							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  474a							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  474a							;    GNU General Public License for more details.
     33  474a
     34  474a							; level definitions
     35  474a							; Sample level definitions.
     36  474a							; Any level can be in any bank.  System auto-calculates required bank buffer size in RAM.
     37  474a							; have as many banks as you like.
     38  474a
      0  474a					      NEWBANK	LEVELS5
      1  4e75 ????				      SEG	LEVELS5
      2  4800					      ORG	ORIGIN
      3  4800					      RORG	$F000
      4  4800				   BANK_START SET	*
      5  4800				   LEVELS5    SET	ORIGIN / 2048
      6  4800				   ORIGIN     SET	ORIGIN + 2048
      7  4800				   _CURRENT_BANK SET	LEVELS5
     40  4800
      0  4800					      DEFL	_060_R, "3-6#3-|3-#2.$-#3-|4#.*2-2#2-|#2-2$*3-3#|#3-.+#3$-#|5#.*4-#|4-4#3-#|7-5#"
      0  4800					      START_LEVEL	_060_R
      1  4800				   LEVEL_START SET	*
      2  4800		       00 09	   BANK_LEVEL__060_R =	_CURRENT_BANK
      3  4800				   LEVEL__060_R SUBROUTINE
      4  4800				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4800
      2  4800		       33 2d 36 23*	      .byte.b	"3-6#3-|3-#2.$-#3-|4#.*2-2#2-|#2-2$*3-3#|#3-.+#3$-#|5#.*4-#|4-4#3-#|7-5#",0
      0  4848					      END_LEVEL	_060_R
      1  4848		       00 48	   LEVEL_SIZE__060_R =	* - LEVEL_START
      2  4848				  -	      IF	LEVEL_SIZE__060_R > MAX_LEVEL_SIZE
      3  4848				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__060_R
      4  4848					      ENDIF
      0  4848					      DEFL	_061_L, "10#-|#2-#2-@2-#-|#2-#-$-#*2#|#-$-#2*-2.#|#4-$.*.$#|4#-2.$2-#|3-3#-$2-#|5-2#3-#|6-5#"
      0  4848					      START_LEVEL	_061_L
      1  4848				   LEVEL_START SET	*
      2  4848		       00 09	   BANK_LEVEL__061_L =	_CURRENT_BANK
      3  4848				   LEVEL__061_L SUBROUTINE
      4  4848				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4848
      2  4848		       31 30 23 2d*	      .byte.b	"10#-|#2-#2-@2-#-|#2-#-$-#*2#|#-$-#2*-2.#|#4-$.*.$#|4#-2.$2-#|3-3#-$2-#|5-2#3-#|6-5#",0
      0  489c					      END_LEVEL	_061_L
      1  489c		       00 54	   LEVEL_SIZE__061_L =	* - LEVEL_START
      2  489c				  -	      IF	LEVEL_SIZE__061_L > MAX_LEVEL_SIZE
      3  489c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__061_L
      4  489c					      ENDIF
      0  489c					      DEFL	_061_R, "4-5#4-|3-2#.2-#4-|4#.*#-4#-|#3-3.2-$@2#|#2-$-$.4$-#|6#.#4-#|5-5#2-#|9-4#"
      0  489c					      START_LEVEL	_061_R
      1  489c				   LEVEL_START SET	*
      2  489c		       00 09	   BANK_LEVEL__061_R =	_CURRENT_BANK
      3  489c				   LEVEL__061_R SUBROUTINE
      4  489c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  489c
      2  489c		       34 2d 35 23*	      .byte.b	"4-5#4-|3-2#.2-#4-|4#.*#-4#-|#3-3.2-$@2#|#2-$-$.4$-#|6#.#4-#|5-5#2-#|9-4#",0
      0  48e5					      END_LEVEL	_061_R
      1  48e5		       00 49	   LEVEL_SIZE__061_R =	* - LEVEL_START
      2  48e5				  -	      IF	LEVEL_SIZE__061_R > MAX_LEVEL_SIZE
      3  48e5				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__061_R
      4  48e5					      ENDIF
      0  48e5					      DEFL	_062_L, "-5#6-|-#3-5#2-|-#2$-#3-#2-|2#-#2-$2-2#-|#5-*#2-#-|#3-#-.#2.2#|5#$3*.-#|4-#@$-.2-#|4-8#"
      0  48e5					      START_LEVEL	_062_L
      1  48e5				   LEVEL_START SET	*
      2  48e5		       00 09	   BANK_LEVEL__062_L =	_CURRENT_BANK
      3  48e5				   LEVEL__062_L SUBROUTINE
      4  48e5				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  48e5
      2  48e5		       2d 35 23 36*	      .byte.b	"-5#6-|-#3-5#2-|-#2$-#3-#2-|2#-#2-$2-2#-|#5-*#2-#-|#3-#-.#2.2#|5#$3*.-#|4-#@$-.2-#|4-8#",0
      0  493c					      END_LEVEL	_062_L
      1  493c		       00 57	   LEVEL_SIZE__062_L =	* - LEVEL_START
      2  493c				  -	      IF	LEVEL_SIZE__062_L > MAX_LEVEL_SIZE
      3  493c				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__062_L
      4  493c					      ENDIF
      0  493c					      DEFL	_062_R, "5-5#|3-3#@2.#|-3#3-*2#|-#2-2$*.#-|2#2-$3.#-|#-$2-$-2#-|#2-$4#2-|#3-#5-|5#5-"
      0  493c					      START_LEVEL	_062_R
      1  493c				   LEVEL_START SET	*
      2  493c		       00 09	   BANK_LEVEL__062_R =	_CURRENT_BANK
      3  493c				   LEVEL__062_R SUBROUTINE
      4  493c				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  493c
      2  493c		       35 2d 35 23*	      .byte.b	"5-5#|3-3#@2.#|-3#3-*2#|-#2-2$*.#-|2#2-$3.#-|#-$2-$-2#-|#2-$4#2-|#3-#5-|5#5-",0
      0  4988					      END_LEVEL	_062_R
      1  4988		       00 4c	   LEVEL_SIZE__062_R =	* - LEVEL_START
      2  4988				  -	      IF	LEVEL_SIZE__062_R > MAX_LEVEL_SIZE
      3  4988				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__062_R
      4  4988					      ENDIF
      0  4988					      DEFL	_063_L, "2-5#6-|2-#3-7#|2-#2-$@2#3-#|4#$#*.#-#-#|#2-$.#.*2-#-#|#3-.*.3$2-#|3#.*7-#|2-11#"
      0  4988					      START_LEVEL	_063_L
      1  4988				   LEVEL_START SET	*
      2  4988		       00 09	   BANK_LEVEL__063_L =	_CURRENT_BANK
      3  4988				   LEVEL__063_L SUBROUTINE
      4  4988				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4988
      2  4988		       32 2d 35 23*	      .byte.b	"2-5#6-|2-#3-7#|2-#2-$@2#3-#|4#$#*.#-#-#|#2-$.#.*2-#-#|#3-.*.3$2-#|3#.*7-#|2-11#",0
      0  49d8					      END_LEVEL	_063_L
      1  49d8		       00 50	   LEVEL_SIZE__063_L =	* - LEVEL_START
      2  49d8				  -	      IF	LEVEL_SIZE__063_L > MAX_LEVEL_SIZE
      3  49d8				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__063_L
      4  49d8					      ENDIF
      0  49d8					      DEFL	_063_R, "2-6#3-|2-#-+.-#3-|2-#$*$-4#|-2#3.#3-#|2#-$.*.3-#|#-$-#$2#-2#|#-2$5-#-|#6-3#-|8#3-"
      0  49d8					      START_LEVEL	_063_R
      1  49d8				   LEVEL_START SET	*
      2  49d8		       00 09	   BANK_LEVEL__063_R =	_CURRENT_BANK
      3  49d8				   LEVEL__063_R SUBROUTINE
      4  49d8				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  49d8
      2  49d8		       32 2d 36 23*	      .byte.b	"2-6#3-|2-#-+.-#3-|2-#$*$-4#|-2#3.#3-#|2#-$.*.3-#|#-$-#$2#-2#|#-2$5-#-|#6-3#-|8#3-",0
      0  4a2a					      END_LEVEL	_063_R
      1  4a2a		       00 52	   LEVEL_SIZE__063_R =	* - LEVEL_START
      2  4a2a				  -	      IF	LEVEL_SIZE__063_R > MAX_LEVEL_SIZE
      3  4a2a				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__063_R
      4  4a2a					      ENDIF
      0  4a2a					      DEFL	_064_L, "-8#3-|2#2-2#2-#3-|#3-2#2-#3-|#-@-$.$.#3-|3#-$*2.4#|2-#$-#*.3-#|2-#2-$-.-$-#|2-#2-7#|2-4#6-"
      0  4a2a					      START_LEVEL	_064_L
      1  4a2a				   LEVEL_START SET	*
      2  4a2a		       00 09	   BANK_LEVEL__064_L =	_CURRENT_BANK
      3  4a2a				   LEVEL__064_L SUBROUTINE
      4  4a2a				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4a2a
      2  4a2a		       2d 38 23 33*	      .byte.b	"-8#3-|2#2-2#2-#3-|#3-2#2-#3-|#-@-$.$.#3-|3#-$*2.4#|2-#$-#*.3-#|2-#2-$-.-$-#|2-#2-7#|2-4#6-",0
      0  4a85					      END_LEVEL	_064_L
      1  4a85		       00 5b	   LEVEL_SIZE__064_L =	* - LEVEL_START
      2  4a85				  -	      IF	LEVEL_SIZE__064_L > MAX_LEVEL_SIZE
      3  4a85				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__064_L
      4  4a85					      ENDIF
      0  4a85					      DEFL	_064_R, "4#-6#|#2-#-#4-#|#2-3#4-#|#-$*-$-$-2#|#2-3.-#-#-|3#2.#3$#-|2-2#2.-$@#-|3-7#-"
      0  4a85					      START_LEVEL	_064_R
      1  4a85				   LEVEL_START SET	*
      2  4a85		       00 09	   BANK_LEVEL__064_R =	_CURRENT_BANK
      3  4a85				   LEVEL__064_R SUBROUTINE
      4  4a85				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4a85
      2  4a85		       34 23 2d 36*	      .byte.b	"4#-6#|#2-#-#4-#|#2-3#4-#|#-$*-$-$-2#|#2-3.-#-#-|3#2.#3$#-|2-2#2.-$@#-|3-7#-",0
      0  4ad1					      END_LEVEL	_064_R
      1  4ad1		       00 4c	   LEVEL_SIZE__064_R =	* - LEVEL_START
      2  4ad1				  -	      IF	LEVEL_SIZE__064_R > MAX_LEVEL_SIZE
      3  4ad1				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__064_R
      4  4ad1					      ENDIF
      0  4ad1					      DEFL	_065_L, "2-5#5-|3#3-#5-|#-3$-6#|#-.-#2.#2-@#|2#*2.*.3$-#|#2.$-#.$-$-#|2#.2-2#2-$-#|-6#3-2#|6-5#-"
      0  4ad1					      START_LEVEL	_065_L
      1  4ad1				   LEVEL_START SET	*
      2  4ad1		       00 09	   BANK_LEVEL__065_L =	_CURRENT_BANK
      3  4ad1				   LEVEL__065_L SUBROUTINE
      4  4ad1				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4ad1
      2  4ad1		       32 2d 35 23*	      .byte.b	"2-5#5-|3#3-#5-|#-3$-6#|#-.-#2.#2-@#|2#*2.*.3$-#|#2.$-#.$-$-#|2#.2-2#2-$-#|-6#3-2#|6-5#-",0
      0  4b29					      END_LEVEL	_065_L
      1  4b29		       00 58	   LEVEL_SIZE__065_L =	* - LEVEL_START
      2  4b29				  -	      IF	LEVEL_SIZE__065_L > MAX_LEVEL_SIZE
      3  4b29				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__065_L
      4  4b29					      ENDIF
      0  4b29					      DEFL	_065_R, "3-5#2-|4#.2-#2-|#2-#2.$#2-|#2-$*.-3#|#2-$2.*$-#|2#3$.3-#|-#@$-.*2-#|-9#"
      0  4b29					      START_LEVEL	_065_R
      1  4b29				   LEVEL_START SET	*
      2  4b29		       00 09	   BANK_LEVEL__065_R =	_CURRENT_BANK
      3  4b29				   LEVEL__065_R SUBROUTINE
      4  4b29				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4b29
      2  4b29		       33 2d 35 23*	      .byte.b	"3-5#2-|4#.2-#2-|#2-#2.$#2-|#2-$*.-3#|#2-$2.*$-#|2#3$.3-#|-#@$-.*2-#|-9#",0
      0  4b71					      END_LEVEL	_065_R
      1  4b71		       00 48	   LEVEL_SIZE__065_R =	* - LEVEL_START
      2  4b71				  -	      IF	LEVEL_SIZE__065_R > MAX_LEVEL_SIZE
      3  4b71				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__065_R
      4  4b71					      ENDIF
      0  4b71					      DEFL	_066_L, "10#3-|#5-#2-4#|#-$2#$*.*$2-#|#@-#-5.#-#|#-$#$2.-#3-#|#2-$2-7#|4#-$-$2-#2-|3-#6-#2-|3-8#2-"
      0  4b71					      START_LEVEL	_066_L
      1  4b71				   LEVEL_START SET	*
      2  4b71		       00 09	   BANK_LEVEL__066_L =	_CURRENT_BANK
      3  4b71				   LEVEL__066_L SUBROUTINE
      4  4b71				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4b71
      2  4b71		       31 30 23 33*	      .byte.b	"10#3-|#5-#2-4#|#-$2#$*.*$2-#|#@-#-5.#-#|#-$#$2.-#3-#|#2-$2-7#|4#-$-$2-#2-|3-#6-#2-|3-8#2-",0
      0  4bcb					      END_LEVEL	_066_L
      1  4bcb		       00 5a	   LEVEL_SIZE__066_L =	* - LEVEL_START
      2  4bcb				  -	      IF	LEVEL_SIZE__066_L > MAX_LEVEL_SIZE
      3  4bcb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__066_L
      4  4bcb					      ENDIF
      0  4bcb					      DEFL	_066_R, "2-5#5-|2-#3-2#4-|2-#4-#4-|2-#-*.$5#|2-#-2*2.-$-#|3#2$.#.2#-#|#2-@$.-$2#-#|#3-#6-#|12#"
      0  4bcb					      START_LEVEL	_066_R
      1  4bcb				   LEVEL_START SET	*
      2  4bcb		       00 09	   BANK_LEVEL__066_R =	_CURRENT_BANK
      3  4bcb				   LEVEL__066_R SUBROUTINE
      4  4bcb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4bcb
      2  4bcb		       32 2d 35 23*	      .byte.b	"2-5#5-|2-#3-2#4-|2-#4-#4-|2-#-*.$5#|2-#-2*2.-$-#|3#2$.#.2#-#|#2-@$.-$2#-#|#3-#6-#|12#",0
      0  4c21					      END_LEVEL	_066_R
      1  4c21		       00 56	   LEVEL_SIZE__066_R =	* - LEVEL_START
      2  4c21				  -	      IF	LEVEL_SIZE__066_R > MAX_LEVEL_SIZE
      3  4c21				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__066_R
      4  4c21					      ENDIF
      0  4c21					      DEFL	_067_L, "8#3-|#3-@2-#3-|#-2$-2$4#|#2-2#$-$-.#|#-$2#-.*#.#|#2-2#-*.*.#|#2-2#-.-.-#|11#"
      0  4c21					      START_LEVEL	_067_L
      1  4c21				   LEVEL_START SET	*
      2  4c21		       00 09	   BANK_LEVEL__067_L =	_CURRENT_BANK
      3  4c21				   LEVEL__067_L SUBROUTINE
      4  4c21				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4c21
      2  4c21		       38 23 33 2d*	      .byte.b	"8#3-|#3-@2-#3-|#-2$-2$4#|#2-2#$-$-.#|#-$2#-.*#.#|#2-2#-*.*.#|#2-2#-.-.-#|11#",0
      0  4c6e					      END_LEVEL	_067_L
      1  4c6e		       00 4d	   LEVEL_SIZE__067_L =	* - LEVEL_START
      2  4c6e				  -	      IF	LEVEL_SIZE__067_L > MAX_LEVEL_SIZE
      3  4c6e				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__067_L
      4  4c6e					      ENDIF
      0  4c6e					      DEFL	_067_R, "7#2-4#|#5-2#-#2-#|#-2$2-.3#$-#|2#2-#$*2.3-#|-2#2-*2.#$#-#|2-2#+*2.#-$-#|3-#-$-$3-2#|3-4#3-2#-|6-5#2-"
      0  4c6e					      START_LEVEL	_067_R
      1  4c6e				   LEVEL_START SET	*
      2  4c6e		       00 09	   BANK_LEVEL__067_R =	_CURRENT_BANK
      3  4c6e				   LEVEL__067_R SUBROUTINE
      4  4c6e				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4c6e
      2  4c6e		       37 23 32 2d*	      .byte.b	"7#2-4#|#5-2#-#2-#|#-2$2-.3#$-#|2#2-#$*2.3-#|-2#2-*2.#$#-#|2-2#+*2.#-$-#|3-#-$-$3-2#|3-4#3-2#-|6-5#2-",0
      0  4cd3					      END_LEVEL	_067_R
      1  4cd3		       00 65	   LEVEL_SIZE__067_R =	* - LEVEL_START
      2  4cd3					      IF	LEVEL_SIZE__067_R > MAX_LEVEL_SIZE
      3  4cd3				   MAX_LEVEL_SIZE SET	LEVEL_SIZE__067_R
      4  4cd3					      ENDIF
      0  4cd3					      DEFL	_068_L, "10#|#2-#5-#|#-$#$-$2-#|#-$2-$.2-#|#2-#.*.$2#|#-$#.2*-#-|2#@*3.2#-|-2#-*2-#2-|2-6#2-"
      0  4cd3					      START_LEVEL	_068_L
      1  4cd3				   LEVEL_START SET	*
      2  4cd3		       00 09	   BANK_LEVEL__068_L =	_CURRENT_BANK
      3  4cd3				   LEVEL__068_L SUBROUTINE
      4  4cd3				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4cd3
      2  4cd3		       31 30 23 7c*	      .byte.b	"10#|#2-#5-#|#-$#$-$2-#|#-$2-$.2-#|#2-#.*.$2#|#-$#.2*-#-|2#@*3.2#-|-2#-*2-#2-|2-6#2-",0
      0  4d27					      END_LEVEL	_068_L
      1  4d27		       00 54	   LEVEL_SIZE__068_L =	* - LEVEL_START
      2  4d27				  -	      IF	LEVEL_SIZE__068_L > MAX_LEVEL_SIZE
      3  4d27				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__068_L
      4  4d27					      ENDIF
      0  4d27					      DEFL	_068_R, "5-5#-|3-3#3-#-|3-#2-$2-#-|4#*-2$3#|#3.*.#3-#|#.#.*.#-$-#|#$#-$@$2-2#|#3-3#2-#-|5#-4#-"
      0  4d27					      START_LEVEL	_068_R
      1  4d27				   LEVEL_START SET	*
      2  4d27		       00 09	   BANK_LEVEL__068_R =	_CURRENT_BANK
      3  4d27				   LEVEL__068_R SUBROUTINE
      4  4d27				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4d27
      2  4d27		       35 2d 35 23*	      .byte.b	"5-5#-|3-3#3-#-|3-#2-$2-#-|4#*-2$3#|#3.*.#3-#|#.#.*.#-$-#|#$#-$@$2-2#|#3-3#2-#-|5#-4#-",0
      0  4d7d					      END_LEVEL	_068_R
      1  4d7d		       00 56	   LEVEL_SIZE__068_R =	* - LEVEL_START
      2  4d7d				  -	      IF	LEVEL_SIZE__068_R > MAX_LEVEL_SIZE
      3  4d7d				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__068_R
      4  4d7d					      ENDIF
      0  4d7d					      DEFL	_069_L, "-6#3-|-#2-$.3#-|-#2-*2.-#-|2#$#.-.-2#|#-$2-#2.-#|#@2$2#-$-#|#-$6-#|7#2-#|6-4#"
      0  4d7d					      START_LEVEL	_069_L
      1  4d7d				   LEVEL_START SET	*
      2  4d7d		       00 09	   BANK_LEVEL__069_L =	_CURRENT_BANK
      3  4d7d				   LEVEL__069_L SUBROUTINE
      4  4d7d				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4d7d
      2  4d7d		       2d 36 23 33*	      .byte.b	"-6#3-|-#2-$.3#-|-#2-*2.-#-|2#$#.-.-2#|#-$2-#2.-#|#@2$2#-$-#|#-$6-#|7#2-#|6-4#",0
      0  4dcb					      END_LEVEL	_069_L
      1  4dcb		       00 4e	   LEVEL_SIZE__069_L =	* - LEVEL_START
      2  4dcb				  -	      IF	LEVEL_SIZE__069_L > MAX_LEVEL_SIZE
      3  4dcb				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__069_L
      4  4dcb					      ENDIF
      0  4dcb					      DEFL	_069_R, "2-5#4-|-2#3-5#|2#@$-2$3-#|#-$#2-$.*.#|#2-#2-2*2.#|#-$2-#.-3#|4#2-.2#2-|3-5#3-"
      0  4dcb					      START_LEVEL	_069_R
      1  4dcb				   LEVEL_START SET	*
      2  4dcb		       00 09	   BANK_LEVEL__069_R =	_CURRENT_BANK
      3  4dcb				   LEVEL__069_R SUBROUTINE
      4  4dcb				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4dcb
      2  4dcb		       32 2d 35 23*	      .byte.b	"2-5#4-|-2#3-5#|2#@$-2$3-#|#-$#2-$.*.#|#2-#2-2*2.#|#-$2-#.-3#|4#2-.2#2-|3-5#3-",0
      0  4e19					      END_LEVEL	_069_R
      1  4e19		       00 4e	   LEVEL_SIZE__069_R =	* - LEVEL_START
      2  4e19				  -	      IF	LEVEL_SIZE__069_R > MAX_LEVEL_SIZE
      3  4e19				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__069_R
      4  4e19					      ENDIF
     60  4e19
      0  4e19					      DEFL	_122_Maya, "14#|4#3-3#2-2#|#-$-$2-2#3-2#|#.2-$4#$2-2#|#.*2-$3-$-3#|#*.#$*.$-#2$-#|#6.*-#-@-#|2#4-8#|14#"
      0  4e19					      START_LEVEL	_122_Maya
      1  4e19				   LEVEL_START SET	*
      2  4e19		       00 09	   BANK_LEVEL__122_Maya =	_CURRENT_BANK
      3  4e19				   LEVEL__122_Maya SUBROUTINE
      4  4e19				   MAX_LEVEL_NUMBER SET	MAX_LEVEL_NUMBER + 1
      5  4e19
      2  4e19		       31 34 23 7c*	      .byte.b	"14#|4#3-3#2-2#|#-$-$2-2#3-2#|#.2-$4#$2-2#|#.*2-$3-$-3#|#*.#$*.$-#2$-#|#6.*-#-@-#|2#4-8#|14#",0
      0  4e75					      END_LEVEL	_122_Maya
      1  4e75		       00 5c	   LEVEL_SIZE__122_Maya =	* - LEVEL_START
      2  4e75				  -	      IF	LEVEL_SIZE__122_Maya > MAX_LEVEL_SIZE
      3  4e75				  -MAX_LEVEL_SIZE SET	LEVEL_SIZE__122_Maya
      4  4e75					      ENDIF
     62  4e75
      0  4e75					      CHECK_BANK_SIZE	"LEVELS5 -- full 2K"
      1  4e75		       06 75	   .TEMP      =	* - BANK_START
 LEVELS5 -- full 2K (2K) SIZE =  $675 , FREE= $18b
      2  4e75					      ECHO	"LEVELS5 -- full 2K", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  4e75				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  4e75				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  4e75				  -	      ERR
      6  4e75					      endif
------- FILE ./sokoboo.asm
    846  4e75							;	      include "BANK_LEVELS6.asm"
    847  4e75							;	      include "BANK_LEVELS7.asm"
    848  4e75							;	      include "BANK_LEVELS8.asm"
    849  4e75							;	      include "BANK_LEVELS9.asm"
    850  4e75							;	      include "BANK_LEVELS10.asm"
    851  4e75							;	      include "BANK_LEVELS11.asm"
    852  4e75							;	      include "BANK_LEVELS12.asm"
    853  4e75							;	      include "BANK_LEVELS13.asm"
    854  4e75							;	      include "BANK_LEVELS14.asm"
    855  4e75							;	      include "BANK_LEVELS15.asm"
    856  4e75							;	      include "BANK_LEVELS16.asm"
    857  4e75							;	      include "BANK_LEVELS17.asm"
------- FILE BANK_PlayerFrames.asm LEVEL 2 PASS 3
      0  4e75					      include	"BANK_PlayerFrames.asm"
      1  4e75							;    Sokoboo - a Sokoban implementation
      2  4e75							;    using a generic tile-based display engine for the Atari 2600
      3  4e75							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  4e75							;
      5  4e75							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  4e75							;
      7  4e75							;    Code related to the generic tile-based display engine was developed by
      8  4e75							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  4e75							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  4e75							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  4e75							;
     12  4e75							;    Code related to music and sound effects uses the TIATracker music player
     13  4e75							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  4e75							;    directory for Apache licensing details.
     15  4e75							;
     16  4e75							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  4e75							;    See the copyright notices in the License directory for a list of level
     18  4e75							;    contributors.
     19  4e75							;
     20  4e75							;    Except where otherwise indicated, this software is released under the
     21  4e75							;    following licensing arrangement...
     22  4e75							;
     23  4e75							;    This program is free software: you can redistribute it and/or modify
     24  4e75							;    it under the terms of the GNU General Public License as published by
     25  4e75							;    the Free Software Foundation, either version 3 of the License, or
     26  4e75							;    (at your option) any later version.
     27  4e75							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  4e75
     29  4e75							;    This program is distributed in the hope that it will be useful,
     30  4e75							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  4e75							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  4e75							;    GNU General Public License for more details.
     33  4e75
      0  4e75					      NEWBANK	PLAYER_FRAMES
      1  5594 ????				      SEG	PLAYER_FRAMES
      2  5000					      ORG	ORIGIN
      3  5000					      RORG	$F000
      4  5000				   BANK_START SET	*
      5  5000				   PLAYER_FRAMES SET	ORIGIN / 2048
      6  5000				   ORIGIN     SET	ORIGIN + 2048
      7  5000				   _CURRENT_BANK SET	PLAYER_FRAMES
     35  5000
     36  5000							;CL0	  = $0
     37  5000							;CL1	  = $4C   ;yellow
     38  5000							;CL2	  = $68
     39  5000							;CL3	  = $0C   ; cuffs/trim
     40  5000							;CL4	  = $B8   ; jumper
     41  5000							;CL5	  = $b2
     42  5000							;CL6	  = $66
     43  5000
     44  5000		       00 00	   CL0	      =	$0
     45  5000		       00 01	   CL1	      =	1	;$2C	;yellow
     46  5000		       00 02	   CL2	      =	2	;$24
     47  5000		       00 03	   CL3	      =	3	;$6A	; cuffs/trim
     48  5000		       00 04	   CL4	      =	4	;$44
     49  5000		       00 05	   CL5	      =	5	;$B6	; pants
     50  5000		       00 06	   CL6	      =	6	;$64
     51  5000
     52  5000
     53  5000
     54  5000		       00 ff	   JUMP       =	$FF
     55  5000		       00 fe	   FLIP       =	$FE
     56  5000
     57  5000					      MAC	flip
     58  5000					      .byte	FLIP,0
     59  5000					      ENDM
     60  5000
     61  5000					      MAC	goto
     62  5000					      .byte	JUMP
     63  5000					      .byte	ANIMATION_{1}_ID
     64  5000					      ENDM
     65  5000
     66  5000					      MAC	show
     67  5000					      .byte	FRAME_{1},{2}
     68  5000					      ENDM
     69  5000
     70  5000
     71  5000				   ANIM_INDEX SET	0
     72  5000					      MAC	insert_animation
     73  5000				   ANIMATION_{1}_ID =	ANIM_INDEX
     74  5000					      .word	Animation_{1}
     75  5000				   ANIM_INDEX SET	ANIM_INDEX + 2
     76  5000					      ENDM		; {animation address}
     77  5000
     78  5000				   ANIM_TABLE
      0  5000					      INSERT_ANIMATION	WALK
      1  5000		       00 00	   ANIMATION_WALK_ID =	ANIM_INDEX
      2  5000		       18 f0		      .word.w	Animation_WALK
      3  5000				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5002					      INSERT_ANIMATION	IDLE
      1  5002		       00 02	   ANIMATION_IDLE_ID =	ANIM_INDEX
      2  5002		       4a f0		      .word.w	Animation_IDLE
      3  5002				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5004					      INSERT_ANIMATION	WIN
      1  5004		       00 04	   ANIMATION_WIN_ID =	ANIM_INDEX
      2  5004		       24 f0		      .word.w	Animation_WIN
      3  5004				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5006					      INSERT_ANIMATION	WIN2
      1  5006		       00 06	   ANIMATION_WIN2_ID =	ANIM_INDEX
      2  5006		       24 f0		      .word.w	Animation_WIN2
      3  5006				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5008					      INSERT_ANIMATION	PUSH
      1  5008		       00 08	   ANIMATION_PUSH_ID =	ANIM_INDEX
      2  5008		       ce f0		      .word.w	Animation_PUSH
      3  5008				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  500a					      INSERT_ANIMATION	PUSH0
      1  500a		       00 0a	   ANIMATION_PUSH0_ID =	ANIM_INDEX
      2  500a		       ce f0		      .word.w	Animation_PUSH0
      3  500a				   ANIM_INDEX SET	ANIM_INDEX + 2
     85  500c							;    INSERT_ANIMATION PUSHTRY
      0  500c					      INSERT_ANIMATION	PUSHUP
      1  500c		       00 0c	   ANIMATION_PUSHUP_ID =	ANIM_INDEX
      2  500c		       d8 f0		      .word.w	Animation_PUSHUP
      3  500c				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  500e					      INSERT_ANIMATION	PUSHUP2
      1  500e		       00 0e	   ANIMATION_PUSHUP2_ID =	ANIM_INDEX
      2  500e		       dc f0		      .word.w	Animation_PUSHUP2
      3  500e				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5010					      INSERT_ANIMATION	PUSHDOWN
      1  5010		       00 10	   ANIMATION_PUSHDOWN_ID =	ANIM_INDEX
      2  5010		       e6 f0		      .word.w	Animation_PUSHDOWN
      3  5010				   ANIM_INDEX SET	ANIM_INDEX + 2
     89  5012
      0  5012					      INSERT_ANIMATION	WALK2
      1  5012		       00 12	   ANIMATION_WALK2_ID =	ANIM_INDEX
      2  5012		       1a f0		      .word.w	Animation_WALK2
      3  5012				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5014					      INSERT_ANIMATION	TURNAROUND
      1  5014		       00 14	   ANIMATION_TURNAROUND_ID =	ANIM_INDEX
      2  5014		       ba f0		      .word.w	Animation_TURNAROUND
      3  5014				   ANIM_INDEX SET	ANIM_INDEX + 2
      0  5016					      INSERT_ANIMATION	YAWN
      1  5016		       00 16	   ANIMATION_YAWN_ID =	ANIM_INDEX
      2  5016		       c4 f0		      .word.w	Animation_YAWN
      3  5016				   ANIM_INDEX SET	ANIM_INDEX + 2
     93  5018							;    INSERT_ANIMATION PUSH_START
     94  5018
     95  5018
     96  5018				   Animation_WALK
     97  5018
      0  5018					      SHOW	WALK2, 4
      1  5018		       02 04		      .byte.b	FRAME_WALK2,4
     99  501a
    100  501a				   Animation_WALK2
      0  501a					      SHOW	WALK3, 8
      1  501a		       05 08		      .byte.b	FRAME_WALK3,8
      0  501c					      SHOW	WALK2, 8
      1  501c		       02 08		      .byte.b	FRAME_WALK2,8
      0  501e					      SHOW	WALK1, 8
      1  501e		       01 08		      .byte.b	FRAME_WALK1,8
      0  5020					      SHOW	WALK2, 8
      1  5020		       02 08		      .byte.b	FRAME_WALK2,8
      0  5022					      GOTO	WALK2
      1  5022		       ff		      .byte.b	JUMP
      2  5023		       12		      .byte.b	ANIMATION_WALK2_ID
    106  5024
    107  5024
    108  5024				   Animation_WIN
    109  5024
    110  5024				   Animation_WIN2
    111  5024
      0  5024					      SHOW	IDLE1,10
      1  5024		       0d 0a		      .byte.b	FRAME_IDLE1,10
      0  5026					      SHOW	IDLE2,10
      1  5026		       0b 0a		      .byte.b	FRAME_IDLE2,10
      0  5028					      SHOW	IDLE1,10
      1  5028		       0d 0a		      .byte.b	FRAME_IDLE1,10
      0  502a					      SHOW	IDLE2,15
      1  502a		       0b 0f		      .byte.b	FRAME_IDLE2,15
      0  502c					      SHOW	IDLE3,15
      1  502c		       0a 0f		      .byte.b	FRAME_IDLE3,15
      0  502e					      GOTO	WIN2
      1  502e		       ff		      .byte.b	JUMP
      2  502f		       06		      .byte.b	ANIMATION_WIN2_ID
    118  5030
    119  5030
    120  5030
    121  5030
    122  5030				   Animation_WOBBLE
    123  5030
    124  5030							; pretty cool little wobble
    125  5030					      REPEAT	4
      0  5030					      SHOW	WALK2, 10
      1  5030		       02 0a		      .byte.b	FRAME_WALK2,10
      0  5032					      FLIP
      1  5032		       fe 00		      .byte.b	FLIP,0
      0  5034					      SHOW	LOOK2, 10
      1  5034		       11 0a		      .byte.b	FRAME_LOOK2,10
    125  5034					      REPEND
      0  5036					      SHOW	WALK2, 10
      1  5036		       02 0a		      .byte.b	FRAME_WALK2,10
      0  5038					      FLIP
      1  5038		       fe 00		      .byte.b	FLIP,0
      0  503a					      SHOW	LOOK2, 10
      1  503a		       11 0a		      .byte.b	FRAME_LOOK2,10
    125  503a					      REPEND
      0  503c					      SHOW	WALK2, 10
      1  503c		       02 0a		      .byte.b	FRAME_WALK2,10
      0  503e					      FLIP
      1  503e		       fe 00		      .byte.b	FLIP,0
      0  5040					      SHOW	LOOK2, 10
      1  5040		       11 0a		      .byte.b	FRAME_LOOK2,10
    125  5040					      REPEND
      0  5042					      SHOW	WALK2, 10
      1  5042		       02 0a		      .byte.b	FRAME_WALK2,10
      0  5044					      FLIP
      1  5044		       fe 00		      .byte.b	FLIP,0
      0  5046					      SHOW	LOOK2, 10
      1  5046		       11 0a		      .byte.b	FRAME_LOOK2,10
    129  5048					      REPEND
      0  5048					      GOTO	IDLE
      1  5048		       ff		      .byte.b	JUMP
      2  5049		       02		      .byte.b	ANIMATION_IDLE_ID
    131  504a
    132  504a
    133  504a
    134  504a				   Animation_IDLE
    135  504a
    136  504a					      REPEAT	2
    137  504a					      REPEAT	2
      0  504a					      SHOW	BLINK, 2
      1  504a		       0f 02		      .byte.b	FRAME_BLINK,2
      0  504c					      SHOW	WALK2, 255
      1  504c		       02 ff		      .byte.b	FRAME_WALK2,255
    137  504c					      REPEND
      0  504e					      SHOW	BLINK, 2
      1  504e		       0f 02		      .byte.b	FRAME_BLINK,2
      0  5050					      SHOW	WALK2, 255
      1  5050		       02 ff		      .byte.b	FRAME_WALK2,255
    140  5052					      REPEND
    141  5052					      REPEAT	6
      0  5052					      SHOW	HANDLIP1, 20
      1  5052		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5054					      SHOW	HANDLIP2, 20
      1  5054		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5054					      REPEND
      0  5056					      SHOW	HANDLIP1, 20
      1  5056		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5058					      SHOW	HANDLIP2, 20
      1  5058		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5058					      REPEND
      0  505a					      SHOW	HANDLIP1, 20
      1  505a		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  505c					      SHOW	HANDLIP2, 20
      1  505c		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  505c					      REPEND
      0  505e					      SHOW	HANDLIP1, 20
      1  505e		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5060					      SHOW	HANDLIP2, 20
      1  5060		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5060					      REPEND
      0  5062					      SHOW	HANDLIP1, 20
      1  5062		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5064					      SHOW	HANDLIP2, 20
      1  5064		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5064					      REPEND
      0  5066					      SHOW	HANDLIP1, 20
      1  5066		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5068					      SHOW	HANDLIP2, 20
      1  5068		       14 14		      .byte.b	FRAME_HANDLIP2,20
    144  506a					      REPEND
    145  506a					      REPEAT	2
      0  506a					      SHOW	BLINK, 2
      1  506a		       0f 02		      .byte.b	FRAME_BLINK,2
      0  506c					      SHOW	WALK2, 255
      1  506c		       02 ff		      .byte.b	FRAME_WALK2,255
    145  506c					      REPEND
      0  506e					      SHOW	BLINK, 2
      1  506e		       0f 02		      .byte.b	FRAME_BLINK,2
      0  5070					      SHOW	WALK2, 255
      1  5070		       02 ff		      .byte.b	FRAME_WALK2,255
    148  5072					      REPEND
    149  5072					      REPEAT	3
      0  5072					      SHOW	TAPFOOT, 10
      1  5072		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  5074					      SHOW	WALK2, 5
      1  5074		       02 05		      .byte.b	FRAME_WALK2,5
    149  5074					      REPEND
      0  5076					      SHOW	TAPFOOT, 10
      1  5076		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  5078					      SHOW	WALK2, 5
      1  5078		       02 05		      .byte.b	FRAME_WALK2,5
    149  5078					      REPEND
      0  507a					      SHOW	TAPFOOT, 10
      1  507a		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  507c					      SHOW	WALK2, 5
      1  507c		       02 05		      .byte.b	FRAME_WALK2,5
    152  507e					      REPEND
    136  507e					      REPEND
    137  507e					      REPEAT	2
      0  507e					      SHOW	BLINK, 2
      1  507e		       0f 02		      .byte.b	FRAME_BLINK,2
      0  5080					      SHOW	WALK2, 255
      1  5080		       02 ff		      .byte.b	FRAME_WALK2,255
    137  5080					      REPEND
      0  5082					      SHOW	BLINK, 2
      1  5082		       0f 02		      .byte.b	FRAME_BLINK,2
      0  5084					      SHOW	WALK2, 255
      1  5084		       02 ff		      .byte.b	FRAME_WALK2,255
    140  5086					      REPEND
    141  5086					      REPEAT	6
      0  5086					      SHOW	HANDLIP1, 20
      1  5086		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5088					      SHOW	HANDLIP2, 20
      1  5088		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5088					      REPEND
      0  508a					      SHOW	HANDLIP1, 20
      1  508a		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  508c					      SHOW	HANDLIP2, 20
      1  508c		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  508c					      REPEND
      0  508e					      SHOW	HANDLIP1, 20
      1  508e		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5090					      SHOW	HANDLIP2, 20
      1  5090		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5090					      REPEND
      0  5092					      SHOW	HANDLIP1, 20
      1  5092		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5094					      SHOW	HANDLIP2, 20
      1  5094		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5094					      REPEND
      0  5096					      SHOW	HANDLIP1, 20
      1  5096		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  5098					      SHOW	HANDLIP2, 20
      1  5098		       14 14		      .byte.b	FRAME_HANDLIP2,20
    141  5098					      REPEND
      0  509a					      SHOW	HANDLIP1, 20
      1  509a		       16 14		      .byte.b	FRAME_HANDLIP1,20
      0  509c					      SHOW	HANDLIP2, 20
      1  509c		       14 14		      .byte.b	FRAME_HANDLIP2,20
    144  509e					      REPEND
    145  509e					      REPEAT	2
      0  509e					      SHOW	BLINK, 2
      1  509e		       0f 02		      .byte.b	FRAME_BLINK,2
      0  50a0					      SHOW	WALK2, 255
      1  50a0		       02 ff		      .byte.b	FRAME_WALK2,255
    145  50a0					      REPEND
      0  50a2					      SHOW	BLINK, 2
      1  50a2		       0f 02		      .byte.b	FRAME_BLINK,2
      0  50a4					      SHOW	WALK2, 255
      1  50a4		       02 ff		      .byte.b	FRAME_WALK2,255
    148  50a6					      REPEND
    149  50a6					      REPEAT	3
      0  50a6					      SHOW	TAPFOOT, 10
      1  50a6		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  50a8					      SHOW	WALK2, 5
      1  50a8		       02 05		      .byte.b	FRAME_WALK2,5
    149  50a8					      REPEND
      0  50aa					      SHOW	TAPFOOT, 10
      1  50aa		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  50ac					      SHOW	WALK2, 5
      1  50ac		       02 05		      .byte.b	FRAME_WALK2,5
    149  50ac					      REPEND
      0  50ae					      SHOW	TAPFOOT, 10
      1  50ae		       15 0a		      .byte.b	FRAME_TAPFOOT,10
      0  50b0					      SHOW	WALK2, 5
      1  50b0		       02 05		      .byte.b	FRAME_WALK2,5
    152  50b2					      REPEND
    153  50b2					      REPEND
    154  50b2
      0  50b2					      SHOW	LOOK3, 3
      1  50b2		       12 03		      .byte.b	FRAME_LOOK3,3
      0  50b4					      SHOW	LOOK2, 30
      1  50b4		       11 1e		      .byte.b	FRAME_LOOK2,30
      0  50b6					      SHOW	LOOK3, 3
      1  50b6		       12 03		      .byte.b	FRAME_LOOK3,3
    158  50b8
      0  50b8					      GOTO	YAWN
      1  50b8		       ff		      .byte.b	JUMP
      2  50b9		       16		      .byte.b	ANIMATION_YAWN_ID
    160  50ba
    161  50ba
    162  50ba				   Animation_TURNAROUND
    163  50ba
      0  50ba					      SHOW	LOOK3, 1
      1  50ba		       12 01		      .byte.b	FRAME_LOOK3,1
      0  50bc					      SHOW	LOOK2, 1
      1  50bc		       11 01		      .byte.b	FRAME_LOOK2,1
      0  50be					      SHOW	LOOK1, 1
      1  50be		       13 01		      .byte.b	FRAME_LOOK1,1
      0  50c0					      FLIP
      1  50c0		       fe 00		      .byte.b	FLIP,0
      0  50c2					      GOTO	IDLE
      1  50c2		       ff		      .byte.b	JUMP
      2  50c3		       02		      .byte.b	ANIMATION_IDLE_ID
    169  50c4
    170  50c4				   Animation_YAWN
    171  50c4
    172  50c4							;    SHOW WALK2, 50
      0  50c4					      SHOW	IDLE1, 10
      1  50c4		       0d 0a		      .byte.b	FRAME_IDLE1,10
      0  50c6					      SHOW	IDLE2, 20
      1  50c6		       0b 14		      .byte.b	FRAME_IDLE2,20
      0  50c8					      SHOW	IDLE3, 150
      1  50c8		       0a 96		      .byte.b	FRAME_IDLE3,150
      0  50ca					      SHOW	IDLE2, 20
      1  50ca		       0b 14		      .byte.b	FRAME_IDLE2,20
      0  50cc					      GOTO	IDLE
      1  50cc		       ff		      .byte.b	JUMP
      2  50cd		       02		      .byte.b	ANIMATION_IDLE_ID
    178  50ce
    179  50ce
    180  50ce							;Animation_PUSHTRY
    181  50ce							;    .byte FRAME_PUSH1,20
    182  50ce							;    .byte FRAME_PUSH2,20
    183  50ce							;    .byte JUMP,ANIMATION_PUSHTRY_ID
    184  50ce
    185  50ce							;Animation_PUSH_START
    186  50ce
    187  50ce							;    .byte FRAME_WALK2,2
    188  50ce
    189  50ce				   Animation_PUSH
    190  50ce
    191  50ce							;    SHOW LOOKUP, 10
    192  50ce
    193  50ce				   Animation_PUSH0
    194  50ce
      0  50ce					      SHOW	PUSH1, 10
      1  50ce		       0e 0a		      .byte.b	FRAME_PUSH1,10
      0  50d0					      SHOW	PUSH2, 10
      1  50d0		       0c 0a		      .byte.b	FRAME_PUSH2,10
      0  50d2					      SHOW	PUSH3, 10
      1  50d2		       09 0a		      .byte.b	FRAME_PUSH3,10
      0  50d4					      SHOW	PUSH2, 10
      1  50d4		       0c 0a		      .byte.b	FRAME_PUSH2,10
      0  50d6					      GOTO	PUSH0
      1  50d6		       ff		      .byte.b	JUMP
      2  50d7		       0a		      .byte.b	ANIMATION_PUSH0_ID
    200  50d8
    201  50d8				   Animation_PUSHUP
    202  50d8
      0  50d8					      SHOW	LOOKUP, 40
      1  50d8		       04 28		      .byte.b	FRAME_LOOKUP,40
      0  50da					      GOTO	PUSHUP
      1  50da		       ff		      .byte.b	JUMP
      2  50db		       0c		      .byte.b	ANIMATION_PUSHUP_ID
    205  50dc
    206  50dc				   Animation_PUSHUP2
      0  50dc					      SHOW	PUSH_UP_1, 10
      1  50dc		       06 0a		      .byte.b	FRAME_PUSH_UP_1,10
      0  50de					      SHOW	PUSH_UP_2, 10
      1  50de		       08 0a		      .byte.b	FRAME_PUSH_UP_2,10
      0  50e0					      SHOW	PUSH_UP_3, 10
      1  50e0		       07 0a		      .byte.b	FRAME_PUSH_UP_3,10
      0  50e2					      SHOW	PUSH_UP_2, 10
      1  50e2		       08 0a		      .byte.b	FRAME_PUSH_UP_2,10
      0  50e4					      GOTO	PUSHUP2
      1  50e4		       ff		      .byte.b	JUMP
      2  50e5		       0e		      .byte.b	ANIMATION_PUSHUP2_ID
    212  50e6
    213  50e6
    214  50e6				   Animation_PUSHDOWN
    215  50e6							;    SHOW LOOKUP, 20
      0  50e6					      GOTO	PUSH0
      1  50e6		       ff		      .byte.b	JUMP
      2  50e7		       0a		      .byte.b	ANIMATION_PUSH0_ID
    217  50e8
    218  50e8
------- FILE sprites/spriteData.asm LEVEL 3 PASS 3
      0  50e8					      include	"sprites/spriteData.asm"
      1  50e8				   FRAMEDATA_crouch1
      2  50e8		       26		      .byte.b	38	; 23
      3  50e9		       12		      .byte.b	18	; 20
      4  50ea		       5a		      .byte.b	90	; 17
      5  50eb		       fc		      .byte.b	252	; 14
      6  50ec		       18		      .byte.b	24	; 11
      7  50ed		       18		      .byte.b	24	; 8
      8  50ee		       04		      .byte.b	4	; 5
      9  50ef		       00		      .byte.b	0	; 2
     10  50f0		       40		      .byte.b	64	; 22
     11  50f1		       3e		      .byte.b	62	; 19
     12  50f2		       ba		      .byte.b	186	; 16
     13  50f3		       7c		      .byte.b	124	; 13
     14  50f4		       18		      .byte.b	24	; 10
     15  50f5		       0c		      .byte.b	12	; 7
     16  50f6		       1e		      .byte.b	30	; 4
     17  50f7		       00		      .byte.b	0	; 1
     18  50f8		       34		      .byte.b	52	; 21
     19  50f9		       52		      .byte.b	82	; 18
     20  50fa		       be		      .byte.b	190	; 15
     21  50fb		       38		      .byte.b	56	; 12
     22  50fc		       1c		      .byte.b	28	; 9
     23  50fd		       0a		      .byte.b	10	; 6
     24  50fe		       1d		      .byte.b	29	; 3
     25  50ff		       00		      .byte.b	0	; 0
     26  5100
     27  5100				   COLOURDATA_crouch1
     28  5100		       06		      .byte.b	CL6	; 23
     29  5101		       05		      .byte.b	CL5	; 20
     30  5102		       03		      .byte.b	CL3	; 17
     31  5103		       04		      .byte.b	CL4	; 14
     32  5104		       03		      .byte.b	CL3	; 11
     33  5105		       02		      .byte.b	CL2	; 8
     34  5106		       02		      .byte.b	CL2	; 5
     35  5107		       00		      .byte.b	CL0	; 2
     36  5108		       06		      .byte.b	CL6	; 22
     37  5109		       05		      .byte.b	CL5	; 19
     38  510a		       04		      .byte.b	CL4	; 16
     39  510b		       04		      .byte.b	CL4	; 13
     40  510c		       02		      .byte.b	CL2	; 10
     41  510d		       02		      .byte.b	CL2	; 7
     42  510e		       01		      .byte.b	CL1	; 4
     43  510f		       00		      .byte.b	CL0	; 1
     44  5110		       05		      .byte.b	CL5	; 21
     45  5111		       02		      .byte.b	CL2	; 18
     46  5112		       04		      .byte.b	CL4	; 15
     47  5113		       04		      .byte.b	CL4	; 12
     48  5114		       02		      .byte.b	CL2	; 9
     49  5115		       02		      .byte.b	CL2	; 6
     50  5116		       01		      .byte.b	CL1	; 3
     51  5117		       00		      .byte.b	CL0	; 0
     52  5118
     53  5118				   FRAMEDATA_walk1
     54  5118		       44		      .byte.b	68	; 23
     55  5119		       4c		      .byte.b	76	; 20
     56  511a		       28		      .byte.b	40	; 17
     57  511b		       ba		      .byte.b	186	; 14
     58  511c		       7c		      .byte.b	124	; 11
     59  511d		       18		      .byte.b	24	; 8
     60  511e		       0c		      .byte.b	12	; 5
     61  511f		       1e		      .byte.b	30	; 2
     62  5120		       82		      .byte.b	130	; 22
     63  5121		       1c		      .byte.b	28	; 19
     64  5122		       b2		      .byte.b	178	; 16
     65  5123		       bc		      .byte.b	188	; 13
     66  5124		       38		      .byte.b	56	; 10
     67  5125		       1c		      .byte.b	28	; 7
     68  5126		       0a		      .byte.b	10	; 4
     69  5127		       1d		      .byte.b	29	; 1
     70  5128		       6c		      .byte.b	108	; 21
     71  5129		       38		      .byte.b	56	; 18
     72  512a		       ba		      .byte.b	186	; 15
     73  512b		       fc		      .byte.b	252	; 12
     74  512c		       18		      .byte.b	24	; 9
     75  512d		       18		      .byte.b	24	; 6
     76  512e		       04		      .byte.b	4	; 3
     77  512f		       00		      .byte.b	0	; 0
     78  5130
     79  5130				   COLOURDATA_walk1
     80  5130		       06		      .byte.b	CL6	; 23
     81  5131		       05		      .byte.b	CL5	; 20
     82  5132		       05		      .byte.b	CL5	; 17
     83  5133		       04		      .byte.b	CL4	; 14
     84  5134		       04		      .byte.b	CL4	; 11
     85  5135		       02		      .byte.b	CL2	; 8
     86  5136		       02		      .byte.b	CL2	; 5
     87  5137		       01		      .byte.b	CL1	; 2
     88  5138		       06		      .byte.b	CL6	; 22
     89  5139		       05		      .byte.b	CL5	; 19
     90  513a		       02		      .byte.b	CL2	; 16
     91  513b		       04		      .byte.b	CL4	; 13
     92  513c		       04		      .byte.b	CL4	; 10
     93  513d		       02		      .byte.b	CL2	; 7
     94  513e		       02		      .byte.b	CL2	; 4
     95  513f		       01		      .byte.b	CL1	; 1
     96  5140		       05		      .byte.b	CL5	; 21
     97  5141		       05		      .byte.b	CL5	; 18
     98  5142		       03		      .byte.b	CL3	; 15
     99  5143		       04		      .byte.b	CL4	; 12
    100  5144		       03		      .byte.b	CL3	; 9
    101  5145		       02		      .byte.b	CL2	; 6
    102  5146		       02		      .byte.b	CL2	; 3
    103  5147		       00		      .byte.b	CL0	; 0
    104  5148
    105  5148				   FRAMEDATA_walk2
    106  5148		       34		      .byte.b	52	; 23
    107  5149		       28		      .byte.b	40	; 20
    108  514a		       38		      .byte.b	56	; 17
    109  514b		       ba		      .byte.b	186	; 14
    110  514c		       fc		      .byte.b	252	; 11
    111  514d		       18		      .byte.b	24	; 8
    112  514e		       18		      .byte.b	24	; 5
    113  514f		       04		      .byte.b	4	; 2
    114  5150		       00		      .byte.b	0	; 22
    115  5151		       28		      .byte.b	40	; 19
    116  5152		       18		      .byte.b	24	; 16
    117  5153		       ba		      .byte.b	186	; 13
    118  5154		       7c		      .byte.b	124	; 10
    119  5155		       18		      .byte.b	24	; 7
    120  5156		       0c		      .byte.b	12	; 4
    121  5157		       1e		      .byte.b	30	; 1
    122  5158		       28		      .byte.b	40	; 21
    123  5159		       28		      .byte.b	40	; 18
    124  515a		       b2		      .byte.b	178	; 15
    125  515b		       bc		      .byte.b	188	; 12
    126  515c		       38		      .byte.b	56	; 9
    127  515d		       1c		      .byte.b	28	; 6
    128  515e		       0a		      .byte.b	10	; 3
    129  515f		       1d		      .byte.b	29	; 0
    130  5160
    131  5160				   COLOURDATA_walk2
    132  5160		       06		      .byte.b	CL6	; 23
    133  5161		       05		      .byte.b	CL5	; 20
    134  5162		       05		      .byte.b	CL5	; 17
    135  5163		       03		      .byte.b	CL3	; 14
    136  5164		       04		      .byte.b	CL4	; 11
    137  5165		       03		      .byte.b	CL3	; 8
    138  5166		       02		      .byte.b	CL2	; 5
    139  5167		       02		      .byte.b	CL2	; 2
    140  5168		       00		      .byte.b	CL0	; 22
    141  5169		       05		      .byte.b	CL5	; 19
    142  516a		       05		      .byte.b	CL5	; 16
    143  516b		       04		      .byte.b	CL4	; 13
    144  516c		       04		      .byte.b	CL4	; 10
    145  516d		       02		      .byte.b	CL2	; 7
    146  516e		       02		      .byte.b	CL2	; 4
    147  516f		       01		      .byte.b	CL1	; 1
    148  5170		       05		      .byte.b	CL5	; 21
    149  5171		       05		      .byte.b	CL5	; 18
    150  5172		       02		      .byte.b	CL2	; 15
    151  5173		       04		      .byte.b	CL4	; 12
    152  5174		       04		      .byte.b	CL4	; 9
    153  5175		       02		      .byte.b	CL2	; 6
    154  5176		       02		      .byte.b	CL2	; 3
    155  5177		       01		      .byte.b	CL1	; 0
    156  5178
    157  5178				   FRAMEDATA_handlip
    158  5178		       2c		      .byte.b	44	; 23
    159  5179		       28		      .byte.b	40	; 20
    160  517a		       38		      .byte.b	56	; 17
    161  517b		       58		      .byte.b	88	; 14
    162  517c		       fc		      .byte.b	252	; 11
    163  517d		       1a		      .byte.b	26	; 8
    164  517e		       18		      .byte.b	24	; 5
    165  517f		       04		      .byte.b	4	; 2
    166  5180		       00		      .byte.b	0	; 22
    167  5181		       28		      .byte.b	40	; 19
    168  5182		       38		      .byte.b	56	; 16
    169  5183		       b8		      .byte.b	184	; 13
    170  5184		       7e		      .byte.b	126	; 10
    171  5185		       1a		      .byte.b	26	; 7
    172  5186		       0c		      .byte.b	12	; 4
    173  5187		       1e		      .byte.b	30	; 1
    174  5188		       28		      .byte.b	40	; 21
    175  5189		       28		      .byte.b	40	; 18
    176  518a		       28		      .byte.b	40	; 15
    177  518b		       b8		      .byte.b	184	; 12
    178  518c		       3a		      .byte.b	58	; 9
    179  518d		       1e		      .byte.b	30	; 6
    180  518e		       0a		      .byte.b	10	; 3
    181  518f		       1d		      .byte.b	29	; 0
    182  5190
    183  5190				   COLOURDATA_handlip
    184  5190		       01		      .byte.b	CL1	; 23
    185  5191		       02		      .byte.b	CL2	; 20
    186  5192		       02		      .byte.b	CL2	; 17
    187  5193		       06		      .byte.b	CL6	; 14
    188  5194		       03		      .byte.b	CL3	; 11
    189  5195		       06		      .byte.b	CL6	; 8
    190  5196		       04		      .byte.b	CL4	; 5
    191  5197		       04		      .byte.b	CL4	; 2
    192  5198		       00		      .byte.b	CL0	; 22
    193  5199		       02		      .byte.b	CL2	; 19
    194  519a		       02		      .byte.b	CL2	; 16
    195  519b		       03		      .byte.b	CL3	; 13
    196  519c		       03		      .byte.b	CL3	; 10
    197  519d		       04		      .byte.b	CL4	; 7
    198  519e		       04		      .byte.b	CL4	; 4
    199  519f		       05		      .byte.b	CL5	; 1
    200  51a0		       02		      .byte.b	CL2	; 21
    201  51a1		       02		      .byte.b	CL2	; 18
    202  51a2		       04		      .byte.b	CL4	; 15
    203  51a3		       03		      .byte.b	CL3	; 12
    204  51a4		       03		      .byte.b	CL3	; 9
    205  51a5		       04		      .byte.b	CL4	; 6
    206  51a6		       04		      .byte.b	CL4	; 3
    207  51a7		       05		      .byte.b	CL5	; 0
    208  51a8
    209  51a8				   FRAMEDATA_lookup
    210  51a8		       34		      .byte.b	52	; 23
    211  51a9		       28		      .byte.b	40	; 20
    212  51aa		       18		      .byte.b	24	; 17
    213  51ab		       b8		      .byte.b	184	; 14
    214  51ac		       7e		      .byte.b	126	; 11
    215  51ad		       32		      .byte.b	50	; 8
    216  51ae		       70		      .byte.b	112	; 5
    217  51af		       40		      .byte.b	64	; 2
    218  51b0		       00		      .byte.b	0	; 22
    219  51b1		       28		      .byte.b	40	; 19
    220  51b2		       b0		      .byte.b	176	; 16
    221  51b3		       b8		      .byte.b	184	; 13
    222  51b4		       7a		      .byte.b	122	; 10
    223  51b5		       36		      .byte.b	54	; 7
    224  51b6		       58		      .byte.b	88	; 4
    225  51b7		       78		      .byte.b	120	; 1
    226  51b8		       28		      .byte.b	40	; 21
    227  51b9		       28		      .byte.b	40	; 18
    228  51ba		       b8		      .byte.b	184	; 15
    229  51bb		       fc		      .byte.b	252	; 12
    230  51bc		       32		      .byte.b	50	; 9
    231  51bd		       60		      .byte.b	96	; 6
    232  51be		       30		      .byte.b	48	; 3
    233  51bf		       34		      .byte.b	52	; 0
    234  51c0
    235  51c0				   COLOURDATA_lookup
    236  51c0		       06		      .byte.b	CL6	; 23
    237  51c1		       05		      .byte.b	CL5	; 20
    238  51c2		       05		      .byte.b	CL5	; 17
    239  51c3		       04		      .byte.b	CL4	; 14
    240  51c4		       04		      .byte.b	CL4	; 11
    241  51c5		       02		      .byte.b	CL2	; 8
    242  51c6		       02		      .byte.b	CL2	; 5
    243  51c7		       01		      .byte.b	CL1	; 2
    244  51c8		       00		      .byte.b	CL0	; 22
    245  51c9		       05		      .byte.b	CL5	; 19
    246  51ca		       02		      .byte.b	CL2	; 16
    247  51cb		       04		      .byte.b	CL4	; 13
    248  51cc		       04		      .byte.b	CL4	; 10
    249  51cd		       02		      .byte.b	CL2	; 7
    250  51ce		       02		      .byte.b	CL2	; 4
    251  51cf		       01		      .byte.b	CL1	; 1
    252  51d0		       05		      .byte.b	CL5	; 21
    253  51d1		       05		      .byte.b	CL5	; 18
    254  51d2		       03		      .byte.b	CL3	; 15
    255  51d3		       04		      .byte.b	CL4	; 12
    256  51d4		       03		      .byte.b	CL3	; 9
    257  51d5		       02		      .byte.b	CL2	; 6
    258  51d6		       02		      .byte.b	CL2	; 3
    259  51d7		       01		      .byte.b	CL1	; 0
    260  51d8
    261  51d8				   FRAMEDATA_walk3
    262  51d8		       44		      .byte.b	68	; 23
    263  51d9		       74		      .byte.b	116	; 20
    264  51da		       28		      .byte.b	40	; 17
    265  51db		       ba		      .byte.b	186	; 14
    266  51dc		       7c		      .byte.b	124	; 11
    267  51dd		       18		      .byte.b	24	; 8
    268  51de		       0c		      .byte.b	12	; 5
    269  51df		       1e		      .byte.b	30	; 2
    270  51e0		       82		      .byte.b	130	; 22
    271  51e1		       34		      .byte.b	52	; 19
    272  51e2		       b2		      .byte.b	178	; 16
    273  51e3		       bc		      .byte.b	188	; 13
    274  51e4		       38		      .byte.b	56	; 10
    275  51e5		       1c		      .byte.b	28	; 7
    276  51e6		       0a		      .byte.b	10	; 4
    277  51e7		       1d		      .byte.b	29	; 1
    278  51e8		       64		      .byte.b	100	; 21
    279  51e9		       38		      .byte.b	56	; 18
    280  51ea		       ba		      .byte.b	186	; 15
    281  51eb		       fc		      .byte.b	252	; 12
    282  51ec		       18		      .byte.b	24	; 9
    283  51ed		       18		      .byte.b	24	; 6
    284  51ee		       04		      .byte.b	4	; 3
    285  51ef		       00		      .byte.b	0	; 0
    286  51f0
    287  51f0				   COLOURDATA_walk3
    288  51f0		       06		      .byte.b	CL6	; 23
    289  51f1		       05		      .byte.b	CL5	; 20
    290  51f2		       05		      .byte.b	CL5	; 17
    291  51f3		       04		      .byte.b	CL4	; 14
    292  51f4		       04		      .byte.b	CL4	; 11
    293  51f5		       02		      .byte.b	CL2	; 8
    294  51f6		       02		      .byte.b	CL2	; 5
    295  51f7		       01		      .byte.b	CL1	; 2
    296  51f8		       06		      .byte.b	CL6	; 22
    297  51f9		       05		      .byte.b	CL5	; 19
    298  51fa		       02		      .byte.b	CL2	; 16
    299  51fb		       04		      .byte.b	CL4	; 13
    300  51fc		       04		      .byte.b	CL4	; 10
    301  51fd		       02		      .byte.b	CL2	; 7
    302  51fe		       02		      .byte.b	CL2	; 4
    303  51ff		       01		      .byte.b	CL1	; 1
    304  5200		       05		      .byte.b	CL5	; 21
    305  5201		       05		      .byte.b	CL5	; 18
    306  5202		       03		      .byte.b	CL3	; 15
    307  5203		       04		      .byte.b	CL4	; 12
    308  5204		       03		      .byte.b	CL3	; 9
    309  5205		       02		      .byte.b	CL2	; 6
    310  5206		       02		      .byte.b	CL2	; 3
    311  5207		       00		      .byte.b	CL0	; 0
    312  5208
    313  5208				   FRAMEDATA_push_up_1
    314  5208		       00		      .byte.b	0	; 23
    315  5209		       08		      .byte.b	8	; 20
    316  520a		       28		      .byte.b	40	; 17
    317  520b		       38		      .byte.b	56	; 14
    318  520c		       38		      .byte.b	56	; 11
    319  520d		       38		      .byte.b	56	; 8
    320  520e		       ee		      .byte.b	238	; 5
    321  520f		       38		      .byte.b	56	; 2
    322  5210		       20		      .byte.b	32	; 22
    323  5211		       20		      .byte.b	32	; 19
    324  5212		       08		      .byte.b	8	; 16
    325  5213		       10		      .byte.b	16	; 13
    326  5214		       38		      .byte.b	56	; 10
    327  5215		       38		      .byte.b	56	; 7
    328  5216		       82		      .byte.b	130	; 4
    329  5217		       38		      .byte.b	56	; 1
    330  5218		       20		      .byte.b	32	; 21
    331  5219		       28		      .byte.b	40	; 18
    332  521a		       20		      .byte.b	32	; 15
    333  521b		       38		      .byte.b	56	; 12
    334  521c		       38		      .byte.b	56	; 9
    335  521d		       7c		      .byte.b	124	; 6
    336  521e		       aa		      .byte.b	170	; 3
    337  521f		       00		      .byte.b	0	; 0
    338  5220
    339  5220				   COLOURDATA_push_up_1
    340  5220		       00		      .byte.b	CL0	; 23
    341  5221		       06		      .byte.b	CL6	; 20
    342  5222		       05		      .byte.b	CL5	; 17
    343  5223		       05		      .byte.b	CL5	; 14
    344  5224		       02		      .byte.b	CL2	; 11
    345  5225		       04		      .byte.b	CL4	; 8
    346  5226		       04		      .byte.b	CL4	; 5
    347  5227		       01		      .byte.b	CL1	; 2
    348  5228		       06		      .byte.b	CL6	; 22
    349  5229		       05		      .byte.b	CL5	; 19
    350  522a		       05		      .byte.b	CL5	; 16
    351  522b		       05		      .byte.b	CL5	; 13
    352  522c		       03		      .byte.b	CL3	; 10
    353  522d		       04		      .byte.b	CL4	; 7
    354  522e		       03		      .byte.b	CL3	; 4
    355  522f		       01		      .byte.b	CL1	; 1
    356  5230		       06		      .byte.b	CL6	; 21
    357  5231		       05		      .byte.b	CL5	; 18
    358  5232		       05		      .byte.b	CL5	; 15
    359  5233		       06		      .byte.b	CL6	; 12
    360  5234		       04		      .byte.b	CL4	; 9
    361  5235		       04		      .byte.b	CL4	; 6
    362  5236		       02		      .byte.b	CL2	; 3
    363  5237		       00		      .byte.b	CL0	; 0
    364  5238
    365  5238				   FRAMEDATA_push_up_3
    366  5238		       00		      .byte.b	0	; 23
    367  5239		       20		      .byte.b	32	; 20
    368  523a		       28		      .byte.b	40	; 17
    369  523b		       38		      .byte.b	56	; 14
    370  523c		       38		      .byte.b	56	; 11
    371  523d		       38		      .byte.b	56	; 8
    372  523e		       ee		      .byte.b	238	; 5
    373  523f		       38		      .byte.b	56	; 2
    374  5240		       08		      .byte.b	8	; 22
    375  5241		       08		      .byte.b	8	; 19
    376  5242		       20		      .byte.b	32	; 16
    377  5243		       10		      .byte.b	16	; 13
    378  5244		       38		      .byte.b	56	; 10
    379  5245		       38		      .byte.b	56	; 7
    380  5246		       82		      .byte.b	130	; 4
    381  5247		       38		      .byte.b	56	; 1
    382  5248		       08		      .byte.b	8	; 21
    383  5249		       28		      .byte.b	40	; 18
    384  524a		       08		      .byte.b	8	; 15
    385  524b		       38		      .byte.b	56	; 12
    386  524c		       38		      .byte.b	56	; 9
    387  524d		       7c		      .byte.b	124	; 6
    388  524e		       aa		      .byte.b	170	; 3
    389  524f		       00		      .byte.b	0	; 0
    390  5250
    391  5250				   COLOURDATA_push_up_3
    392  5250		       00		      .byte.b	CL0	; 23
    393  5251		       06		      .byte.b	CL6	; 20
    394  5252		       05		      .byte.b	CL5	; 17
    395  5253		       05		      .byte.b	CL5	; 14
    396  5254		       02		      .byte.b	CL2	; 11
    397  5255		       04		      .byte.b	CL4	; 8
    398  5256		       04		      .byte.b	CL4	; 5
    399  5257		       01		      .byte.b	CL1	; 2
    400  5258		       06		      .byte.b	CL6	; 22
    401  5259		       05		      .byte.b	CL5	; 19
    402  525a		       05		      .byte.b	CL5	; 16
    403  525b		       05		      .byte.b	CL5	; 13
    404  525c		       03		      .byte.b	CL3	; 10
    405  525d		       04		      .byte.b	CL4	; 7
    406  525e		       03		      .byte.b	CL3	; 4
    407  525f		       01		      .byte.b	CL1	; 1
    408  5260		       06		      .byte.b	CL6	; 21
    409  5261		       05		      .byte.b	CL5	; 18
    410  5262		       05		      .byte.b	CL5	; 15
    411  5263		       06		      .byte.b	CL6	; 12
    412  5264		       04		      .byte.b	CL4	; 9
    413  5265		       04		      .byte.b	CL4	; 6
    414  5266		       02		      .byte.b	CL2	; 3
    415  5267		       00		      .byte.b	CL0	; 0
    416  5268
    417  5268				   FRAMEDATA_push_up_2
    418  5268		       00		      .byte.b	0	; 23
    419  5269		       00		      .byte.b	0	; 20
    420  526a		       28		      .byte.b	40	; 17
    421  526b		       38		      .byte.b	56	; 14
    422  526c		       38		      .byte.b	56	; 11
    423  526d		       38		      .byte.b	56	; 8
    424  526e		       ee		      .byte.b	238	; 5
    425  526f		       38		      .byte.b	56	; 2
    426  5270		       00		      .byte.b	0	; 22
    427  5271		       28		      .byte.b	40	; 19
    428  5272		       00		      .byte.b	0	; 16
    429  5273		       10		      .byte.b	16	; 13
    430  5274		       38		      .byte.b	56	; 10
    431  5275		       38		      .byte.b	56	; 7
    432  5276		       82		      .byte.b	130	; 4
    433  5277		       38		      .byte.b	56	; 1
    434  5278		       28		      .byte.b	40	; 21
    435  5279		       28		      .byte.b	40	; 18
    436  527a		       28		      .byte.b	40	; 15
    437  527b		       38		      .byte.b	56	; 12
    438  527c		       38		      .byte.b	56	; 9
    439  527d		       7c		      .byte.b	124	; 6
    440  527e		       aa		      .byte.b	170	; 3
    441  527f		       00		      .byte.b	0	; 0
    442  5280
    443  5280				   COLOURDATA_push_up_2
    444  5280		       00		      .byte.b	CL0	; 23
    445  5281		       00		      .byte.b	CL0	; 20
    446  5282		       05		      .byte.b	CL5	; 17
    447  5283		       05		      .byte.b	CL5	; 14
    448  5284		       02		      .byte.b	CL2	; 11
    449  5285		       04		      .byte.b	CL4	; 8
    450  5286		       04		      .byte.b	CL4	; 5
    451  5287		       01		      .byte.b	CL1	; 2
    452  5288		       00		      .byte.b	CL0	; 22
    453  5289		       05		      .byte.b	CL5	; 19
    454  528a		       00		      .byte.b	CL0	; 16
    455  528b		       05		      .byte.b	CL5	; 13
    456  528c		       03		      .byte.b	CL3	; 10
    457  528d		       04		      .byte.b	CL4	; 7
    458  528e		       03		      .byte.b	CL3	; 4
    459  528f		       01		      .byte.b	CL1	; 1
    460  5290		       06		      .byte.b	CL6	; 21
    461  5291		       05		      .byte.b	CL5	; 18
    462  5292		       05		      .byte.b	CL5	; 15
    463  5293		       06		      .byte.b	CL6	; 12
    464  5294		       04		      .byte.b	CL4	; 9
    465  5295		       04		      .byte.b	CL4	; 6
    466  5296		       02		      .byte.b	CL2	; 3
    467  5297		       00		      .byte.b	CL0	; 0
    468  5298
    469  5298				   FRAMEDATA_push3
    470  5298		       46		      .byte.b	70	; 23
    471  5299		       72		      .byte.b	114	; 20
    472  529a		       18		      .byte.b	24	; 17
    473  529b		       38		      .byte.b	56	; 14
    474  529c		       3e		      .byte.b	62	; 11
    475  529d		       19		      .byte.b	25	; 8
    476  529e		       0c		      .byte.b	12	; 5
    477  529f		       1e		      .byte.b	30	; 2
    478  52a0		       80		      .byte.b	128	; 22
    479  52a1		       3e		      .byte.b	62	; 19
    480  52a2		       30		      .byte.b	48	; 16
    481  52a3		       38		      .byte.b	56	; 13
    482  52a4		       3f		      .byte.b	63	; 10
    483  52a5		       1d		      .byte.b	29	; 7
    484  52a6		       0a		      .byte.b	10	; 4
    485  52a7		       1d		      .byte.b	29	; 1
    486  52a8		       64		      .byte.b	100	; 21
    487  52a9		       3c		      .byte.b	60	; 18
    488  52aa		       38		      .byte.b	56	; 15
    489  52ab		       3c		      .byte.b	60	; 12
    490  52ac		       19		      .byte.b	25	; 9
    491  52ad		       18		      .byte.b	24	; 6
    492  52ae		       04		      .byte.b	4	; 3
    493  52af		       00		      .byte.b	0	; 0
    494  52b0
    495  52b0				   COLOURDATA_push3
    496  52b0		       06		      .byte.b	CL6	; 23
    497  52b1		       05		      .byte.b	CL5	; 20
    498  52b2		       05		      .byte.b	CL5	; 17
    499  52b3		       04		      .byte.b	CL4	; 14
    500  52b4		       04		      .byte.b	CL4	; 11
    501  52b5		       02		      .byte.b	CL2	; 8
    502  52b6		       02		      .byte.b	CL2	; 5
    503  52b7		       01		      .byte.b	CL1	; 2
    504  52b8		       06		      .byte.b	CL6	; 22
    505  52b9		       05		      .byte.b	CL5	; 19
    506  52ba		       06		      .byte.b	CL6	; 16
    507  52bb		       04		      .byte.b	CL4	; 13
    508  52bc		       04		      .byte.b	CL4	; 10
    509  52bd		       02		      .byte.b	CL2	; 7
    510  52be		       02		      .byte.b	CL2	; 4
    511  52bf		       01		      .byte.b	CL1	; 1
    512  52c0		       05		      .byte.b	CL5	; 21
    513  52c1		       05		      .byte.b	CL5	; 18
    514  52c2		       03		      .byte.b	CL3	; 15
    515  52c3		       04		      .byte.b	CL4	; 12
    516  52c4		       03		      .byte.b	CL3	; 9
    517  52c5		       02		      .byte.b	CL2	; 6
    518  52c6		       02		      .byte.b	CL2	; 3
    519  52c7		       00		      .byte.b	CL0	; 0
    520  52c8
    521  52c8				   FRAMEDATA_idle3
    522  52c8		       2c		      .byte.b	44	; 23
    523  52c9		       28		      .byte.b	40	; 20
    524  52ca		       38		      .byte.b	56	; 17
    525  52cb		       38		      .byte.b	56	; 14
    526  52cc		       38		      .byte.b	56	; 11
    527  52cd		       b2		      .byte.b	178	; 8
    528  52ce		       30		      .byte.b	48	; 5
    529  52cf		       08		      .byte.b	8	; 2
    530  52d0		       00		      .byte.b	0	; 22
    531  52d1		       28		      .byte.b	40	; 19
    532  52d2		       38		      .byte.b	56	; 16
    533  52d3		       38		      .byte.b	56	; 13
    534  52d4		       fe		      .byte.b	254	; 10
    535  52d5		       ba		      .byte.b	186	; 7
    536  52d6		       18		      .byte.b	24	; 4
    537  52d7		       3c		      .byte.b	60	; 1
    538  52d8		       28		      .byte.b	40	; 21
    539  52d9		       28		      .byte.b	40	; 18
    540  52da		       28		      .byte.b	40	; 15
    541  52db		       38		      .byte.b	56	; 12
    542  52dc		       fe		      .byte.b	254	; 9
    543  52dd		       b2		      .byte.b	178	; 6
    544  52de		       14		      .byte.b	20	; 3
    545  52df		       3a		      .byte.b	58	; 0
    546  52e0
    547  52e0				   COLOURDATA_idle3
    548  52e0		       06		      .byte.b	CL6	; 23
    549  52e1		       05		      .byte.b	CL5	; 20
    550  52e2		       05		      .byte.b	CL5	; 17
    551  52e3		       03		      .byte.b	CL3	; 14
    552  52e4		       04		      .byte.b	CL4	; 11
    553  52e5		       03		      .byte.b	CL3	; 8
    554  52e6		       02		      .byte.b	CL2	; 5
    555  52e7		       02		      .byte.b	CL2	; 2
    556  52e8		       00		      .byte.b	CL0	; 22
    557  52e9		       05		      .byte.b	CL5	; 19
    558  52ea		       05		      .byte.b	CL5	; 16
    559  52eb		       04		      .byte.b	CL4	; 13
    560  52ec		       04		      .byte.b	CL4	; 10
    561  52ed		       02		      .byte.b	CL2	; 7
    562  52ee		       02		      .byte.b	CL2	; 4
    563  52ef		       01		      .byte.b	CL1	; 1
    564  52f0		       05		      .byte.b	CL5	; 21
    565  52f1		       05		      .byte.b	CL5	; 18
    566  52f2		       02		      .byte.b	CL2	; 15
    567  52f3		       04		      .byte.b	CL4	; 12
    568  52f4		       04		      .byte.b	CL4	; 9
    569  52f5		       02		      .byte.b	CL2	; 6
    570  52f6		       02		      .byte.b	CL2	; 3
    571  52f7		       01		      .byte.b	CL1	; 0
    572  52f8
    573  52f8				   FRAMEDATA_idle2
    574  52f8		       2c		      .byte.b	44	; 23
    575  52f9		       28		      .byte.b	40	; 20
    576  52fa		       38		      .byte.b	56	; 17
    577  52fb		       38		      .byte.b	56	; 14
    578  52fc		       fe		      .byte.b	254	; 11
    579  52fd		       b2		      .byte.b	178	; 8
    580  52fe		       30		      .byte.b	48	; 5
    581  52ff		       08		      .byte.b	8	; 2
    582  5300		       00		      .byte.b	0	; 22
    583  5301		       28		      .byte.b	40	; 19
    584  5302		       38		      .byte.b	56	; 16
    585  5303		       38		      .byte.b	56	; 13
    586  5304		       fe		      .byte.b	254	; 10
    587  5305		       ba		      .byte.b	186	; 7
    588  5306		       18		      .byte.b	24	; 4
    589  5307		       3c		      .byte.b	60	; 1
    590  5308		       28		      .byte.b	40	; 21
    591  5309		       28		      .byte.b	40	; 18
    592  530a		       28		      .byte.b	40	; 15
    593  530b		       38		      .byte.b	56	; 12
    594  530c		       ba		      .byte.b	186	; 9
    595  530d		       30		      .byte.b	48	; 6
    596  530e		       14		      .byte.b	20	; 3
    597  530f		       3a		      .byte.b	58	; 0
    598  5310
    599  5310				   COLOURDATA_idle2
    600  5310		       06		      .byte.b	CL6	; 23
    601  5311		       05		      .byte.b	CL5	; 20
    602  5312		       05		      .byte.b	CL5	; 17
    603  5313		       03		      .byte.b	CL3	; 14
    604  5314		       04		      .byte.b	CL4	; 11
    605  5315		       03		      .byte.b	CL3	; 8
    606  5316		       02		      .byte.b	CL2	; 5
    607  5317		       02		      .byte.b	CL2	; 2
    608  5318		       00		      .byte.b	CL0	; 22
    609  5319		       05		      .byte.b	CL5	; 19
    610  531a		       05		      .byte.b	CL5	; 16
    611  531b		       04		      .byte.b	CL4	; 13
    612  531c		       04		      .byte.b	CL4	; 10
    613  531d		       02		      .byte.b	CL2	; 7
    614  531e		       02		      .byte.b	CL2	; 4
    615  531f		       01		      .byte.b	CL1	; 1
    616  5320		       05		      .byte.b	CL5	; 21
    617  5321		       05		      .byte.b	CL5	; 18
    618  5322		       02		      .byte.b	CL2	; 15
    619  5323		       04		      .byte.b	CL4	; 12
    620  5324		       04		      .byte.b	CL4	; 9
    621  5325		       02		      .byte.b	CL2	; 6
    622  5326		       02		      .byte.b	CL2	; 3
    623  5327		       01		      .byte.b	CL1	; 0
    624  5328
    625  5328				   FRAMEDATA_push2
    626  5328		       26		      .byte.b	38	; 23
    627  5329		       14		      .byte.b	20	; 20
    628  532a		       3c		      .byte.b	60	; 17
    629  532b		       38		      .byte.b	56	; 14
    630  532c		       3c		      .byte.b	60	; 11
    631  532d		       19		      .byte.b	25	; 8
    632  532e		       18		      .byte.b	24	; 5
    633  532f		       04		      .byte.b	4	; 2
    634  5330		       40		      .byte.b	64	; 22
    635  5331		       14		      .byte.b	20	; 19
    636  5332		       28		      .byte.b	40	; 16
    637  5333		       38		      .byte.b	56	; 13
    638  5334		       3e		      .byte.b	62	; 10
    639  5335		       19		      .byte.b	25	; 7
    640  5336		       0c		      .byte.b	12	; 4
    641  5337		       1e		      .byte.b	30	; 1
    642  5338		       34		      .byte.b	52	; 21
    643  5339		       3c		      .byte.b	60	; 18
    644  533a		       30		      .byte.b	48	; 15
    645  533b		       38		      .byte.b	56	; 12
    646  533c		       3f		      .byte.b	63	; 9
    647  533d		       1d		      .byte.b	29	; 6
    648  533e		       0a		      .byte.b	10	; 3
    649  533f		       1d		      .byte.b	29	; 0
    650  5340
    651  5340				   COLOURDATA_push2
    652  5340		       06		      .byte.b	CL6	; 23
    653  5341		       05		      .byte.b	CL5	; 20
    654  5342		       05		      .byte.b	CL5	; 17
    655  5343		       03		      .byte.b	CL3	; 14
    656  5344		       04		      .byte.b	CL4	; 11
    657  5345		       03		      .byte.b	CL3	; 8
    658  5346		       02		      .byte.b	CL2	; 5
    659  5347		       02		      .byte.b	CL2	; 2
    660  5348		       06		      .byte.b	CL6	; 22
    661  5349		       05		      .byte.b	CL5	; 19
    662  534a		       05		      .byte.b	CL5	; 16
    663  534b		       04		      .byte.b	CL4	; 13
    664  534c		       04		      .byte.b	CL4	; 10
    665  534d		       02		      .byte.b	CL2	; 7
    666  534e		       02		      .byte.b	CL2	; 4
    667  534f		       01		      .byte.b	CL1	; 1
    668  5350		       05		      .byte.b	CL5	; 21
    669  5351		       05		      .byte.b	CL5	; 18
    670  5352		       06		      .byte.b	CL6	; 15
    671  5353		       04		      .byte.b	CL4	; 12
    672  5354		       04		      .byte.b	CL4	; 9
    673  5355		       02		      .byte.b	CL2	; 6
    674  5356		       02		      .byte.b	CL2	; 3
    675  5357		       01		      .byte.b	CL1	; 0
    676  5358
    677  5358				   FRAMEDATA_idle1
    678  5358		       34		      .byte.b	52	; 23
    679  5359		       28		      .byte.b	40	; 20
    680  535a		       38		      .byte.b	56	; 17
    681  535b		       ba		      .byte.b	186	; 14
    682  535c		       fc		      .byte.b	252	; 11
    683  535d		       18		      .byte.b	24	; 8
    684  535e		       18		      .byte.b	24	; 5
    685  535f		       04		      .byte.b	4	; 2
    686  5360		       00		      .byte.b	0	; 22
    687  5361		       28		      .byte.b	40	; 19
    688  5362		       18		      .byte.b	24	; 16
    689  5363		       ba		      .byte.b	186	; 13
    690  5364		       7c		      .byte.b	124	; 10
    691  5365		       18		      .byte.b	24	; 7
    692  5366		       0c		      .byte.b	12	; 4
    693  5367		       1e		      .byte.b	30	; 1
    694  5368		       28		      .byte.b	40	; 21
    695  5369		       28		      .byte.b	40	; 18
    696  536a		       b2		      .byte.b	178	; 15
    697  536b		       bc		      .byte.b	188	; 12
    698  536c		       38		      .byte.b	56	; 9
    699  536d		       1c		      .byte.b	28	; 6
    700  536e		       0a		      .byte.b	10	; 3
    701  536f		       1d		      .byte.b	29	; 0
    702  5370
    703  5370				   COLOURDATA_idle1
    704  5370		       06		      .byte.b	CL6	; 23
    705  5371		       05		      .byte.b	CL5	; 20
    706  5372		       05		      .byte.b	CL5	; 17
    707  5373		       03		      .byte.b	CL3	; 14
    708  5374		       04		      .byte.b	CL4	; 11
    709  5375		       03		      .byte.b	CL3	; 8
    710  5376		       02		      .byte.b	CL2	; 5
    711  5377		       02		      .byte.b	CL2	; 2
    712  5378		       00		      .byte.b	CL0	; 22
    713  5379		       05		      .byte.b	CL5	; 19
    714  537a		       05		      .byte.b	CL5	; 16
    715  537b		       04		      .byte.b	CL4	; 13
    716  537c		       04		      .byte.b	CL4	; 10
    717  537d		       02		      .byte.b	CL2	; 7
    718  537e		       02		      .byte.b	CL2	; 4
    719  537f		       01		      .byte.b	CL1	; 1
    720  5380		       05		      .byte.b	CL5	; 21
    721  5381		       05		      .byte.b	CL5	; 18
    722  5382		       02		      .byte.b	CL2	; 15
    723  5383		       04		      .byte.b	CL4	; 12
    724  5384		       04		      .byte.b	CL4	; 9
    725  5385		       02		      .byte.b	CL2	; 6
    726  5386		       02		      .byte.b	CL2	; 3
    727  5387		       01		      .byte.b	CL1	; 0
    728  5388
    729  5388				   FRAMEDATA_push1
    730  5388		       46		      .byte.b	70	; 23
    731  5389		       62		      .byte.b	98	; 20
    732  538a		       28		      .byte.b	40	; 17
    733  538b		       38		      .byte.b	56	; 14
    734  538c		       3e		      .byte.b	62	; 11
    735  538d		       19		      .byte.b	25	; 8
    736  538e		       0c		      .byte.b	12	; 5
    737  538f		       1e		      .byte.b	30	; 2
    738  5390		       80		      .byte.b	128	; 22
    739  5391		       1e		      .byte.b	30	; 19
    740  5392		       30		      .byte.b	48	; 16
    741  5393		       38		      .byte.b	56	; 13
    742  5394		       3f		      .byte.b	63	; 10
    743  5395		       1d		      .byte.b	29	; 7
    744  5396		       0a		      .byte.b	10	; 4
    745  5397		       1d		      .byte.b	29	; 1
    746  5398		       64		      .byte.b	100	; 21
    747  5399		       3c		      .byte.b	60	; 18
    748  539a		       38		      .byte.b	56	; 15
    749  539b		       3c		      .byte.b	60	; 12
    750  539c		       19		      .byte.b	25	; 9
    751  539d		       18		      .byte.b	24	; 6
    752  539e		       04		      .byte.b	4	; 3
    753  539f		       00		      .byte.b	0	; 0
    754  53a0
    755  53a0				   COLOURDATA_push1
    756  53a0		       06		      .byte.b	CL6	; 23
    757  53a1		       05		      .byte.b	CL5	; 20
    758  53a2		       05		      .byte.b	CL5	; 17
    759  53a3		       04		      .byte.b	CL4	; 14
    760  53a4		       04		      .byte.b	CL4	; 11
    761  53a5		       02		      .byte.b	CL2	; 8
    762  53a6		       02		      .byte.b	CL2	; 5
    763  53a7		       01		      .byte.b	CL1	; 2
    764  53a8		       06		      .byte.b	CL6	; 22
    765  53a9		       05		      .byte.b	CL5	; 19
    766  53aa		       06		      .byte.b	CL6	; 16
    767  53ab		       04		      .byte.b	CL4	; 13
    768  53ac		       04		      .byte.b	CL4	; 10
    769  53ad		       02		      .byte.b	CL2	; 7
    770  53ae		       02		      .byte.b	CL2	; 4
    771  53af		       01		      .byte.b	CL1	; 1
    772  53b0		       05		      .byte.b	CL5	; 21
    773  53b1		       05		      .byte.b	CL5	; 18
    774  53b2		       03		      .byte.b	CL3	; 15
    775  53b3		       04		      .byte.b	CL4	; 12
    776  53b4		       03		      .byte.b	CL3	; 9
    777  53b5		       02		      .byte.b	CL2	; 6
    778  53b6		       02		      .byte.b	CL2	; 3
    779  53b7		       00		      .byte.b	CL0	; 0
    780  53b8
    781  53b8				   FRAMEDATA_blink
    782  53b8		       34		      .byte.b	52	; 23
    783  53b9		       28		      .byte.b	40	; 20
    784  53ba		       38		      .byte.b	56	; 17
    785  53bb		       ba		      .byte.b	186	; 14
    786  53bc		       fc		      .byte.b	252	; 11
    787  53bd		       18		      .byte.b	24	; 8
    788  53be		       18		      .byte.b	24	; 5
    789  53bf		       04		      .byte.b	4	; 2
    790  53c0		       00		      .byte.b	0	; 22
    791  53c1		       28		      .byte.b	40	; 19
    792  53c2		       18		      .byte.b	24	; 16
    793  53c3		       ba		      .byte.b	186	; 13
    794  53c4		       7c		      .byte.b	124	; 10
    795  53c5		       18		      .byte.b	24	; 7
    796  53c6		       0c		      .byte.b	12	; 4
    797  53c7		       1e		      .byte.b	30	; 1
    798  53c8		       28		      .byte.b	40	; 21
    799  53c9		       28		      .byte.b	40	; 18
    800  53ca		       b2		      .byte.b	178	; 15
    801  53cb		       bc		      .byte.b	188	; 12
    802  53cc		       38		      .byte.b	56	; 9
    803  53cd		       1c		      .byte.b	28	; 6
    804  53ce		       0e		      .byte.b	14	; 3
    805  53cf		       1d		      .byte.b	29	; 0
    806  53d0
    807  53d0				   COLOURDATA_blink
    808  53d0		       06		      .byte.b	CL6	; 23
    809  53d1		       05		      .byte.b	CL5	; 20
    810  53d2		       05		      .byte.b	CL5	; 17
    811  53d3		       03		      .byte.b	CL3	; 14
    812  53d4		       04		      .byte.b	CL4	; 11
    813  53d5		       03		      .byte.b	CL3	; 8
    814  53d6		       02		      .byte.b	CL2	; 5
    815  53d7		       02		      .byte.b	CL2	; 2
    816  53d8		       00		      .byte.b	CL0	; 22
    817  53d9		       05		      .byte.b	CL5	; 19
    818  53da		       05		      .byte.b	CL5	; 16
    819  53db		       04		      .byte.b	CL4	; 13
    820  53dc		       04		      .byte.b	CL4	; 10
    821  53dd		       02		      .byte.b	CL2	; 7
    822  53de		       02		      .byte.b	CL2	; 4
    823  53df		       01		      .byte.b	CL1	; 1
    824  53e0		       05		      .byte.b	CL5	; 21
    825  53e1		       05		      .byte.b	CL5	; 18
    826  53e2		       02		      .byte.b	CL2	; 15
    827  53e3		       04		      .byte.b	CL4	; 12
    828  53e4		       04		      .byte.b	CL4	; 9
    829  53e5		       02		      .byte.b	CL2	; 6
    830  53e6		       02		      .byte.b	CL2	; 3
    831  53e7		       01		      .byte.b	CL1	; 0
    832  53e8
    833  53e8				   FRAMEDATA_yell
    834  53e8		       34		      .byte.b	52	; 23
    835  53e9		       28		      .byte.b	40	; 20
    836  53ea		       18		      .byte.b	24	; 17
    837  53eb		       b8		      .byte.b	184	; 14
    838  53ec		       7e		      .byte.b	126	; 11
    839  53ed		       32		      .byte.b	50	; 8
    840  53ee		       72		      .byte.b	114	; 5
    841  53ef		       40		      .byte.b	64	; 2
    842  53f0		       00		      .byte.b	0	; 22
    843  53f1		       28		      .byte.b	40	; 19
    844  53f2		       b0		      .byte.b	176	; 16
    845  53f3		       b8		      .byte.b	184	; 13
    846  53f4		       7a		      .byte.b	122	; 10
    847  53f5		       36		      .byte.b	54	; 7
    848  53f6		       58		      .byte.b	88	; 4
    849  53f7		       78		      .byte.b	120	; 1
    850  53f8		       28		      .byte.b	40	; 21
    851  53f9		       28		      .byte.b	40	; 18
    852  53fa		       b8		      .byte.b	184	; 15
    853  53fb		       fc		      .byte.b	252	; 12
    854  53fc		       32		      .byte.b	50	; 9
    855  53fd		       62		      .byte.b	98	; 6
    856  53fe		       30		      .byte.b	48	; 3
    857  53ff		       34		      .byte.b	52	; 0
    858  5400
    859  5400				   COLOURDATA_yell
    860  5400		       06		      .byte.b	CL6	; 23
    861  5401		       05		      .byte.b	CL5	; 20
    862  5402		       05		      .byte.b	CL5	; 17
    863  5403		       04		      .byte.b	CL4	; 14
    864  5404		       04		      .byte.b	CL4	; 11
    865  5405		       02		      .byte.b	CL2	; 8
    866  5406		       02		      .byte.b	CL2	; 5
    867  5407		       01		      .byte.b	CL1	; 2
    868  5408		       00		      .byte.b	CL0	; 22
    869  5409		       05		      .byte.b	CL5	; 19
    870  540a		       02		      .byte.b	CL2	; 16
    871  540b		       04		      .byte.b	CL4	; 13
    872  540c		       04		      .byte.b	CL4	; 10
    873  540d		       02		      .byte.b	CL2	; 7
    874  540e		       02		      .byte.b	CL2	; 4
    875  540f		       01		      .byte.b	CL1	; 1
    876  5410		       05		      .byte.b	CL5	; 21
    877  5411		       05		      .byte.b	CL5	; 18
    878  5412		       03		      .byte.b	CL3	; 15
    879  5413		       04		      .byte.b	CL4	; 12
    880  5414		       03		      .byte.b	CL3	; 9
    881  5415		       02		      .byte.b	CL2	; 6
    882  5416		       02		      .byte.b	CL2	; 3
    883  5417		       01		      .byte.b	CL1	; 0
    884  5418
    885  5418				   FRAMEDATA_look2
    886  5418		       34		      .byte.b	52	; 23
    887  5419		       28		      .byte.b	40	; 20
    888  541a		       38		      .byte.b	56	; 17
    889  541b		       ba		      .byte.b	186	; 14
    890  541c		       7c		      .byte.b	124	; 11
    891  541d		       30		      .byte.b	48	; 8
    892  541e		       10		      .byte.b	16	; 5
    893  541f		       70		      .byte.b	112	; 2
    894  5420		       00		      .byte.b	0	; 22
    895  5421		       28		      .byte.b	40	; 19
    896  5422		       18		      .byte.b	24	; 16
    897  5423		       be		      .byte.b	190	; 13
    898  5424		       78		      .byte.b	120	; 10
    899  5425		       30		      .byte.b	48	; 7
    900  5426		       78		      .byte.b	120	; 4
    901  5427		       78		      .byte.b	120	; 1
    902  5428		       28		      .byte.b	40	; 21
    903  5429		       28		      .byte.b	40	; 18
    904  542a		       b2		      .byte.b	178	; 15
    905  542b		       fc		      .byte.b	252	; 12
    906  542c		       38		      .byte.b	56	; 9
    907  542d		       30		      .byte.b	48	; 6
    908  542e		       28		      .byte.b	40	; 3
    909  542f		       b8		      .byte.b	184	; 0
    910  5430
    911  5430				   COLOURDATA_look2
    912  5430		       06		      .byte.b	CL6	; 23
    913  5431		       05		      .byte.b	CL5	; 20
    914  5432		       05		      .byte.b	CL5	; 17
    915  5433		       03		      .byte.b	CL3	; 14
    916  5434		       04		      .byte.b	CL4	; 11
    917  5435		       03		      .byte.b	CL3	; 8
    918  5436		       02		      .byte.b	CL2	; 5
    919  5437		       02		      .byte.b	CL2	; 2
    920  5438		       00		      .byte.b	CL0	; 22
    921  5439		       05		      .byte.b	CL5	; 19
    922  543a		       05		      .byte.b	CL5	; 16
    923  543b		       04		      .byte.b	CL4	; 13
    924  543c		       04		      .byte.b	CL4	; 10
    925  543d		       02		      .byte.b	CL2	; 7
    926  543e		       02		      .byte.b	CL2	; 4
    927  543f		       01		      .byte.b	CL1	; 1
    928  5440		       05		      .byte.b	CL5	; 21
    929  5441		       05		      .byte.b	CL5	; 18
    930  5442		       02		      .byte.b	CL2	; 15
    931  5443		       04		      .byte.b	CL4	; 12
    932  5444		       04		      .byte.b	CL4	; 9
    933  5445		       02		      .byte.b	CL2	; 6
    934  5446		       02		      .byte.b	CL2	; 3
    935  5447		       01		      .byte.b	CL1	; 0
    936  5448
    937  5448				   FRAMEDATA_look3
    938  5448		       34		      .byte.b	52	; 23
    939  5449		       28		      .byte.b	40	; 20
    940  544a		       38		      .byte.b	56	; 17
    941  544b		       ba		      .byte.b	186	; 14
    942  544c		       fc		      .byte.b	252	; 11
    943  544d		       18		      .byte.b	24	; 8
    944  544e		       10		      .byte.b	16	; 5
    945  544f		       1c		      .byte.b	28	; 2
    946  5450		       00		      .byte.b	0	; 22
    947  5451		       28		      .byte.b	40	; 19
    948  5452		       18		      .byte.b	24	; 16
    949  5453		       ba		      .byte.b	186	; 13
    950  5454		       7c		      .byte.b	124	; 10
    951  5455		       18		      .byte.b	24	; 7
    952  5456		       3c		      .byte.b	60	; 4
    953  5457		       3c		      .byte.b	60	; 1
    954  5458		       28		      .byte.b	40	; 21
    955  5459		       28		      .byte.b	40	; 18
    956  545a		       b2		      .byte.b	178	; 15
    957  545b		       bc		      .byte.b	188	; 12
    958  545c		       38		      .byte.b	56	; 9
    959  545d		       18		      .byte.b	24	; 6
    960  545e		       28		      .byte.b	40	; 3
    961  545f		       3a		      .byte.b	58	; 0
    962  5460
    963  5460				   COLOURDATA_look3
    964  5460		       06		      .byte.b	CL6	; 23
    965  5461		       05		      .byte.b	CL5	; 20
    966  5462		       05		      .byte.b	CL5	; 17
    967  5463		       03		      .byte.b	CL3	; 14
    968  5464		       04		      .byte.b	CL4	; 11
    969  5465		       03		      .byte.b	CL3	; 8
    970  5466		       02		      .byte.b	CL2	; 5
    971  5467		       02		      .byte.b	CL2	; 2
    972  5468		       00		      .byte.b	CL0	; 22
    973  5469		       05		      .byte.b	CL5	; 19
    974  546a		       05		      .byte.b	CL5	; 16
    975  546b		       04		      .byte.b	CL4	; 13
    976  546c		       04		      .byte.b	CL4	; 10
    977  546d		       02		      .byte.b	CL2	; 7
    978  546e		       02		      .byte.b	CL2	; 4
    979  546f		       01		      .byte.b	CL1	; 1
    980  5470		       05		      .byte.b	CL5	; 21
    981  5471		       05		      .byte.b	CL5	; 18
    982  5472		       02		      .byte.b	CL2	; 15
    983  5473		       04		      .byte.b	CL4	; 12
    984  5474		       04		      .byte.b	CL4	; 9
    985  5475		       02		      .byte.b	CL2	; 6
    986  5476		       02		      .byte.b	CL2	; 3
    987  5477		       01		      .byte.b	CL1	; 0
    988  5478
    989  5478				   FRAMEDATA_look1
    990  5478		       28		      .byte.b	40	; 23
    991  5479		       28		      .byte.b	40	; 20
    992  547a		       38		      .byte.b	56	; 17
    993  547b		       59		      .byte.b	89	; 14
    994  547c		       7c		      .byte.b	124	; 11
    995  547d		       18		      .byte.b	24	; 8
    996  547e		       18		      .byte.b	24	; 5
    997  547f		       20		      .byte.b	32	; 2
    998  5480		       00		      .byte.b	0	; 22
    999  5481		       28		      .byte.b	40	; 19
   1000  5482		       38		      .byte.b	56	; 16
   1001  5483		       5a		      .byte.b	90	; 13
   1002  5484		       3c		      .byte.b	60	; 10
   1003  5485		       18		      .byte.b	24	; 7
   1004  5486		       30		      .byte.b	48	; 4
   1005  5487		       78		      .byte.b	120	; 1
   1006  5488		       28		      .byte.b	40	; 21
   1007  5489		       28		      .byte.b	40	; 18
   1008  548a		       49		      .byte.b	73	; 15
   1009  548b		       7e		      .byte.b	126	; 12
   1010  548c		       18		      .byte.b	24	; 9
   1011  548d		       38		      .byte.b	56	; 6
   1012  548e		       50		      .byte.b	80	; 3
   1013  548f		       b8		      .byte.b	184	; 0
   1014  5490
   1015  5490				   COLOURDATA_look1
   1016  5490		       06		      .byte.b	CL6	; 23
   1017  5491		       05		      .byte.b	CL5	; 20
   1018  5492		       05		      .byte.b	CL5	; 17
   1019  5493		       03		      .byte.b	CL3	; 14
   1020  5494		       04		      .byte.b	CL4	; 11
   1021  5495		       03		      .byte.b	CL3	; 8
   1022  5496		       02		      .byte.b	CL2	; 5
   1023  5497		       02		      .byte.b	CL2	; 2
   1024  5498		       00		      .byte.b	CL0	; 22
   1025  5499		       05		      .byte.b	CL5	; 19
   1026  549a		       05		      .byte.b	CL5	; 16
   1027  549b		       04		      .byte.b	CL4	; 13
   1028  549c		       04		      .byte.b	CL4	; 10
   1029  549d		       02		      .byte.b	CL2	; 7
   1030  549e		       02		      .byte.b	CL2	; 4
   1031  549f		       01		      .byte.b	CL1	; 1
   1032  54a0		       05		      .byte.b	CL5	; 21
   1033  54a1		       05		      .byte.b	CL5	; 18
   1034  54a2		       02		      .byte.b	CL2	; 15
   1035  54a3		       04		      .byte.b	CL4	; 12
   1036  54a4		       04		      .byte.b	CL4	; 9
   1037  54a5		       02		      .byte.b	CL2	; 6
   1038  54a6		       02		      .byte.b	CL2	; 3
   1039  54a7		       01		      .byte.b	CL1	; 0
   1040  54a8
   1041  54a8				   FRAMEDATA_handlip2
   1042  54a8		       28		      .byte.b	40	; 23
   1043  54a9		       28		      .byte.b	40	; 20
   1044  54aa		       38		      .byte.b	56	; 17
   1045  54ab		       58		      .byte.b	88	; 14
   1046  54ac		       fc		      .byte.b	252	; 11
   1047  54ad		       1a		      .byte.b	26	; 8
   1048  54ae		       18		      .byte.b	24	; 5
   1049  54af		       04		      .byte.b	4	; 2
   1050  54b0		       04		      .byte.b	4	; 22
   1051  54b1		       28		      .byte.b	40	; 19
   1052  54b2		       38		      .byte.b	56	; 16
   1053  54b3		       b8		      .byte.b	184	; 13
   1054  54b4		       7e		      .byte.b	126	; 10
   1055  54b5		       1a		      .byte.b	26	; 7
   1056  54b6		       0c		      .byte.b	12	; 4
   1057  54b7		       1e		      .byte.b	30	; 1
   1058  54b8		       28		      .byte.b	40	; 21
   1059  54b9		       28		      .byte.b	40	; 18
   1060  54ba		       28		      .byte.b	40	; 15
   1061  54bb		       b8		      .byte.b	184	; 12
   1062  54bc		       3a		      .byte.b	58	; 9
   1063  54bd		       1e		      .byte.b	30	; 6
   1064  54be		       0a		      .byte.b	10	; 3
   1065  54bf		       1d		      .byte.b	29	; 0
   1066  54c0
   1067  54c0				   COLOURDATA_handlip2
   1068  54c0		       06		      .byte.b	CL6	; 23
   1069  54c1		       05		      .byte.b	CL5	; 20
   1070  54c2		       05		      .byte.b	CL5	; 17
   1071  54c3		       03		      .byte.b	CL3	; 14
   1072  54c4		       04		      .byte.b	CL4	; 11
   1073  54c5		       03		      .byte.b	CL3	; 8
   1074  54c6		       02		      .byte.b	CL2	; 5
   1075  54c7		       02		      .byte.b	CL2	; 2
   1076  54c8		       06		      .byte.b	CL6	; 22
   1077  54c9		       05		      .byte.b	CL5	; 19
   1078  54ca		       05		      .byte.b	CL5	; 16
   1079  54cb		       04		      .byte.b	CL4	; 13
   1080  54cc		       04		      .byte.b	CL4	; 10
   1081  54cd		       02		      .byte.b	CL2	; 7
   1082  54ce		       02		      .byte.b	CL2	; 4
   1083  54cf		       01		      .byte.b	CL1	; 1
   1084  54d0		       05		      .byte.b	CL5	; 21
   1085  54d1		       05		      .byte.b	CL5	; 18
   1086  54d2		       02		      .byte.b	CL2	; 15
   1087  54d3		       04		      .byte.b	CL4	; 12
   1088  54d4		       04		      .byte.b	CL4	; 9
   1089  54d5		       02		      .byte.b	CL2	; 6
   1090  54d6		       02		      .byte.b	CL2	; 3
   1091  54d7		       01		      .byte.b	CL1	; 0
   1092  54d8
   1093  54d8				   FRAMEDATA_tapfoot
   1094  54d8		       24		      .byte.b	36	; 23
   1095  54d9		       28		      .byte.b	40	; 20
   1096  54da		       38		      .byte.b	56	; 17
   1097  54db		       ba		      .byte.b	186	; 14
   1098  54dc		       fc		      .byte.b	252	; 11
   1099  54dd		       18		      .byte.b	24	; 8
   1100  54de		       18		      .byte.b	24	; 5
   1101  54df		       04		      .byte.b	4	; 2
   1102  54e0		       10		      .byte.b	16	; 22
   1103  54e1		       28		      .byte.b	40	; 19
   1104  54e2		       18		      .byte.b	24	; 16
   1105  54e3		       ba		      .byte.b	186	; 13
   1106  54e4		       7c		      .byte.b	124	; 10
   1107  54e5		       18		      .byte.b	24	; 7
   1108  54e6		       0c		      .byte.b	12	; 4
   1109  54e7		       1e		      .byte.b	30	; 1
   1110  54e8		       28		      .byte.b	40	; 21
   1111  54e9		       28		      .byte.b	40	; 18
   1112  54ea		       b2		      .byte.b	178	; 15
   1113  54eb		       bc		      .byte.b	188	; 12
   1114  54ec		       38		      .byte.b	56	; 9
   1115  54ed		       1c		      .byte.b	28	; 6
   1116  54ee		       0a		      .byte.b	10	; 3
   1117  54ef		       1d		      .byte.b	29	; 0
   1118  54f0
   1119  54f0				   COLOURDATA_tapfoot
   1120  54f0		       06		      .byte.b	CL6	; 23
   1121  54f1		       05		      .byte.b	CL5	; 20
   1122  54f2		       05		      .byte.b	CL5	; 17
   1123  54f3		       03		      .byte.b	CL3	; 14
   1124  54f4		       04		      .byte.b	CL4	; 11
   1125  54f5		       03		      .byte.b	CL3	; 8
   1126  54f6		       02		      .byte.b	CL2	; 5
   1127  54f7		       02		      .byte.b	CL2	; 2
   1128  54f8		       06		      .byte.b	CL6	; 22
   1129  54f9		       05		      .byte.b	CL5	; 19
   1130  54fa		       05		      .byte.b	CL5	; 16
   1131  54fb		       04		      .byte.b	CL4	; 13
   1132  54fc		       04		      .byte.b	CL4	; 10
   1133  54fd		       02		      .byte.b	CL2	; 7
   1134  54fe		       02		      .byte.b	CL2	; 4
   1135  54ff		       01		      .byte.b	CL1	; 1
   1136  5500		       05		      .byte.b	CL5	; 21
   1137  5501		       05		      .byte.b	CL5	; 18
   1138  5502		       02		      .byte.b	CL2	; 15
   1139  5503		       04		      .byte.b	CL4	; 12
   1140  5504		       04		      .byte.b	CL4	; 9
   1141  5505		       02		      .byte.b	CL2	; 6
   1142  5506		       02		      .byte.b	CL2	; 3
   1143  5507		       01		      .byte.b	CL1	; 0
   1144  5508
   1145  5508				   FRAMEDATA_handlip1
   1146  5508		       2c		      .byte.b	44	; 23
   1147  5509		       28		      .byte.b	40	; 20
   1148  550a		       38		      .byte.b	56	; 17
   1149  550b		       58		      .byte.b	88	; 14
   1150  550c		       fc		      .byte.b	252	; 11
   1151  550d		       1a		      .byte.b	26	; 8
   1152  550e		       18		      .byte.b	24	; 5
   1153  550f		       04		      .byte.b	4	; 2
   1154  5510		       00		      .byte.b	0	; 22
   1155  5511		       28		      .byte.b	40	; 19
   1156  5512		       38		      .byte.b	56	; 16
   1157  5513		       b8		      .byte.b	184	; 13
   1158  5514		       7e		      .byte.b	126	; 10
   1159  5515		       1a		      .byte.b	26	; 7
   1160  5516		       0c		      .byte.b	12	; 4
   1161  5517		       1e		      .byte.b	30	; 1
   1162  5518		       28		      .byte.b	40	; 21
   1163  5519		       28		      .byte.b	40	; 18
   1164  551a		       28		      .byte.b	40	; 15
   1165  551b		       b8		      .byte.b	184	; 12
   1166  551c		       3a		      .byte.b	58	; 9
   1167  551d		       1e		      .byte.b	30	; 6
   1168  551e		       0a		      .byte.b	10	; 3
   1169  551f		       1d		      .byte.b	29	; 0
   1170  5520
   1171  5520				   COLOURDATA_handlip1
   1172  5520		       06		      .byte.b	CL6	; 23
   1173  5521		       05		      .byte.b	CL5	; 20
   1174  5522		       05		      .byte.b	CL5	; 17
   1175  5523		       03		      .byte.b	CL3	; 14
   1176  5524		       04		      .byte.b	CL4	; 11
   1177  5525		       03		      .byte.b	CL3	; 8
   1178  5526		       02		      .byte.b	CL2	; 5
   1179  5527		       02		      .byte.b	CL2	; 2
   1180  5528		       00		      .byte.b	CL0	; 22
   1181  5529		       05		      .byte.b	CL5	; 19
   1182  552a		       05		      .byte.b	CL5	; 16
   1183  552b		       04		      .byte.b	CL4	; 13
   1184  552c		       04		      .byte.b	CL4	; 10
   1185  552d		       02		      .byte.b	CL2	; 7
   1186  552e		       02		      .byte.b	CL2	; 4
   1187  552f		       01		      .byte.b	CL1	; 1
   1188  5530		       05		      .byte.b	CL5	; 21
   1189  5531		       05		      .byte.b	CL5	; 18
   1190  5532		       02		      .byte.b	CL2	; 15
   1191  5533		       04		      .byte.b	CL4	; 12
   1192  5534		       04		      .byte.b	CL4	; 9
   1193  5535		       02		      .byte.b	CL2	; 6
   1194  5536		       02		      .byte.b	CL2	; 3
   1195  5537		       01		      .byte.b	CL1	; 0
   1196  5538
   1197  5538
   1198  5538				   __FNUM     SET	0
   1199  5538					      MAC	deframe
   1200  5538				   FRAME_{1}  =	__FNUM
   1201  5538				   __FNUM     SET	__FNUM + 1
   1202  5538					      ENDM		;{name}
   1203  5538
      0  5538					      DEFRAME	CROUCH1
      1  5538		       00 00	   FRAME_CROUCH1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	WALK1
      1  5538		       00 01	   FRAME_WALK1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	WALK2
      1  5538		       00 02	   FRAME_WALK2 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	HANDLIP
      1  5538		       00 03	   FRAME_HANDLIP =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	LOOKUP
      1  5538		       00 04	   FRAME_LOOKUP =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	WALK3
      1  5538		       00 05	   FRAME_WALK3 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	PUSH_UP_1
      1  5538		       00 06	   FRAME_PUSH_UP_1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	PUSH_UP_3
      1  5538		       00 07	   FRAME_PUSH_UP_3 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	PUSH_UP_2
      1  5538		       00 08	   FRAME_PUSH_UP_2 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	PUSH3
      1  5538		       00 09	   FRAME_PUSH3 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	IDLE3
      1  5538		       00 0a	   FRAME_IDLE3 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	IDLE2
      1  5538		       00 0b	   FRAME_IDLE2 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	PUSH2
      1  5538		       00 0c	   FRAME_PUSH2 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	IDLE1
      1  5538		       00 0d	   FRAME_IDLE1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	PUSH1
      1  5538		       00 0e	   FRAME_PUSH1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	BLINK
      1  5538		       00 0f	   FRAME_BLINK =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	YELL
      1  5538		       00 10	   FRAME_YELL =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	LOOK2
      1  5538		       00 11	   FRAME_LOOK2 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	LOOK3
      1  5538		       00 12	   FRAME_LOOK3 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	LOOK1
      1  5538		       00 13	   FRAME_LOOK1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	HANDLIP2
      1  5538		       00 14	   FRAME_HANDLIP2 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	TAPFOOT
      1  5538		       00 15	   FRAME_TAPFOOT =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
      0  5538					      DEFRAME	HANDLIP1
      1  5538		       00 16	   FRAME_HANDLIP1 =	__FNUM
      2  5538				   __FNUM     SET	__FNUM + 1
   1227  5538
   1228  5538				   FRAME_PTR_LO
   1229  5538		       e8		      .byte.b	<FRAMEDATA_crouch1
   1230  5539		       18		      .byte.b	<FRAMEDATA_walk1
   1231  553a		       48		      .byte.b	<FRAMEDATA_walk2
   1232  553b		       78		      .byte.b	<FRAMEDATA_handlip
   1233  553c		       a8		      .byte.b	<FRAMEDATA_lookup
   1234  553d		       d8		      .byte.b	<FRAMEDATA_walk3
   1235  553e		       08		      .byte.b	<FRAMEDATA_push_up_1
   1236  553f		       38		      .byte.b	<FRAMEDATA_push_up_3
   1237  5540		       68		      .byte.b	<FRAMEDATA_push_up_2
   1238  5541		       98		      .byte.b	<FRAMEDATA_push3
   1239  5542		       c8		      .byte.b	<FRAMEDATA_idle3
   1240  5543		       f8		      .byte.b	<FRAMEDATA_idle2
   1241  5544		       28		      .byte.b	<FRAMEDATA_push2
   1242  5545		       58		      .byte.b	<FRAMEDATA_idle1
   1243  5546		       88		      .byte.b	<FRAMEDATA_push1
   1244  5547		       b8		      .byte.b	<FRAMEDATA_blink
   1245  5548		       e8		      .byte.b	<FRAMEDATA_yell
   1246  5549		       18		      .byte.b	<FRAMEDATA_look2
   1247  554a		       48		      .byte.b	<FRAMEDATA_look3
   1248  554b		       78		      .byte.b	<FRAMEDATA_look1
   1249  554c		       a8		      .byte.b	<FRAMEDATA_handlip2
   1250  554d		       d8		      .byte.b	<FRAMEDATA_tapfoot
   1251  554e		       08		      .byte.b	<FRAMEDATA_handlip1
   1252  554f
   1253  554f				   FRAME_PTR_HI
   1254  554f		       f0		      .byte.b	>FRAMEDATA_crouch1
   1255  5550		       f1		      .byte.b	>FRAMEDATA_walk1
   1256  5551		       f1		      .byte.b	>FRAMEDATA_walk2
   1257  5552		       f1		      .byte.b	>FRAMEDATA_handlip
   1258  5553		       f1		      .byte.b	>FRAMEDATA_lookup
   1259  5554		       f1		      .byte.b	>FRAMEDATA_walk3
   1260  5555		       f2		      .byte.b	>FRAMEDATA_push_up_1
   1261  5556		       f2		      .byte.b	>FRAMEDATA_push_up_3
   1262  5557		       f2		      .byte.b	>FRAMEDATA_push_up_2
   1263  5558		       f2		      .byte.b	>FRAMEDATA_push3
   1264  5559		       f2		      .byte.b	>FRAMEDATA_idle3
   1265  555a		       f2		      .byte.b	>FRAMEDATA_idle2
   1266  555b		       f3		      .byte.b	>FRAMEDATA_push2
   1267  555c		       f3		      .byte.b	>FRAMEDATA_idle1
   1268  555d		       f3		      .byte.b	>FRAMEDATA_push1
   1269  555e		       f3		      .byte.b	>FRAMEDATA_blink
   1270  555f		       f3		      .byte.b	>FRAMEDATA_yell
   1271  5560		       f4		      .byte.b	>FRAMEDATA_look2
   1272  5561		       f4		      .byte.b	>FRAMEDATA_look3
   1273  5562		       f4		      .byte.b	>FRAMEDATA_look1
   1274  5563		       f4		      .byte.b	>FRAMEDATA_handlip2
   1275  5564		       f4		      .byte.b	>FRAMEDATA_tapfoot
   1276  5565		       f5		      .byte.b	>FRAMEDATA_handlip1
   1277  5566
   1278  5566				   COLOUR_PTR_LO
   1279  5566		       00		      .byte.b	<COLOURDATA_crouch1
   1280  5567		       30		      .byte.b	<COLOURDATA_walk1
   1281  5568		       60		      .byte.b	<COLOURDATA_walk2
   1282  5569		       90		      .byte.b	<COLOURDATA_handlip
   1283  556a		       c0		      .byte.b	<COLOURDATA_lookup
   1284  556b		       f0		      .byte.b	<COLOURDATA_walk3
   1285  556c		       20		      .byte.b	<COLOURDATA_push_up_1
   1286  556d		       50		      .byte.b	<COLOURDATA_push_up_3
   1287  556e		       80		      .byte.b	<COLOURDATA_push_up_2
   1288  556f		       b0		      .byte.b	<COLOURDATA_push3
   1289  5570		       e0		      .byte.b	<COLOURDATA_idle3
   1290  5571		       10		      .byte.b	<COLOURDATA_idle2
   1291  5572		       40		      .byte.b	<COLOURDATA_push2
   1292  5573		       70		      .byte.b	<COLOURDATA_idle1
   1293  5574		       a0		      .byte.b	<COLOURDATA_push1
   1294  5575		       d0		      .byte.b	<COLOURDATA_blink
   1295  5576		       00		      .byte.b	<COLOURDATA_yell
   1296  5577		       30		      .byte.b	<COLOURDATA_look2
   1297  5578		       60		      .byte.b	<COLOURDATA_look3
   1298  5579		       90		      .byte.b	<COLOURDATA_look1
   1299  557a		       c0		      .byte.b	<COLOURDATA_handlip2
   1300  557b		       f0		      .byte.b	<COLOURDATA_tapfoot
   1301  557c		       20		      .byte.b	<COLOURDATA_handlip1
   1302  557d
   1303  557d				   COLOUR_PTR_HI
   1304  557d		       f1		      .byte.b	>COLOURDATA_crouch1
   1305  557e		       f1		      .byte.b	>COLOURDATA_walk1
   1306  557f		       f1		      .byte.b	>COLOURDATA_walk2
   1307  5580		       f1		      .byte.b	>COLOURDATA_handlip
   1308  5581		       f1		      .byte.b	>COLOURDATA_lookup
   1309  5582		       f1		      .byte.b	>COLOURDATA_walk3
   1310  5583		       f2		      .byte.b	>COLOURDATA_push_up_1
   1311  5584		       f2		      .byte.b	>COLOURDATA_push_up_3
   1312  5585		       f2		      .byte.b	>COLOURDATA_push_up_2
   1313  5586		       f2		      .byte.b	>COLOURDATA_push3
   1314  5587		       f2		      .byte.b	>COLOURDATA_idle3
   1315  5588		       f3		      .byte.b	>COLOURDATA_idle2
   1316  5589		       f3		      .byte.b	>COLOURDATA_push2
   1317  558a		       f3		      .byte.b	>COLOURDATA_idle1
   1318  558b		       f3		      .byte.b	>COLOURDATA_push1
   1319  558c		       f3		      .byte.b	>COLOURDATA_blink
   1320  558d		       f4		      .byte.b	>COLOURDATA_yell
   1321  558e		       f4		      .byte.b	>COLOURDATA_look2
   1322  558f		       f4		      .byte.b	>COLOURDATA_look3
   1323  5590		       f4		      .byte.b	>COLOURDATA_look1
   1324  5591		       f4		      .byte.b	>COLOURDATA_handlip2
   1325  5592		       f4		      .byte.b	>COLOURDATA_tapfoot
   1326  5593		       f5		      .byte.b	>COLOURDATA_handlip1
------- FILE BANK_PlayerFrames.asm
    220  5594
    221  5594
      0  5594					      CHECK_BANK_SIZE	"PLAYER_FRAMES"
      1  5594		       05 94	   .TEMP      =	* - BANK_START
 PLAYER_FRAMES (2K) SIZE =  $594 , FREE= $26c
      2  5594					      ECHO	"PLAYER_FRAMES", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  5594				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  5594				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  5594				  -	      ERR
      6  5594					      endif
------- FILE ./sokoboo.asm
------- FILE titleScreen.asm LEVEL 2 PASS 3
      0  5594					      include	"titleScreen.asm"
      0  5594					      NEWBANK	TITLESCREEN
      1  5fd8 ????				      SEG	TITLESCREEN
      2  5800					      ORG	ORIGIN
      3  5800					      RORG	$F000
      4  5800				   BANK_START SET	*
      5  5800				   TITLESCREEN SET	ORIGIN / 2048
      6  5800				   ORIGIN     SET	ORIGIN + 2048
      7  5800				   _CURRENT_BANK SET	TITLESCREEN
      2  5800
      3  5800				   OverscanTime2
      4  5800		       1a 1a		      .byte.b	26, 26
      5  5802		       20 20		      .byte.b	32, 32
      6  5804
      7  5804				   colvec
      8  5804		       c8 f0 a0 f1	      .word.w	colr_ntsc, colr_pal
      9  5808
      0  5808					      DEFINE_SUBROUTINE	TitleScreen
      1  5808		       00 0b	   BANK_TitleScreen =	_CURRENT_BANK
      2  5808					      SUBROUTINE
      3  5808				   TitleScreen
     11  5808
     12  5808							; Start of new frame
     13  5808
     14  5808							; Start of vertical blank processing
     15  5808
     16  5808				   TitleSequence
     17  5808
     18  5808		       a9 00		      lda	#%00000000
     19  580a		       85 4a		      sta	CTRLPF
     20  580c		       85 49		      sta	COLUBK
     21  580e
     22  580e		       a6 80		      ldx	Platform
     23  5810		       bd 04 f0 	      lda	colvec,x
     24  5813		       85 db		      sta	title_colour_table
     25  5815		       bd 05 f0 	      lda	colvec+1,x
     26  5818		       85 dc		      sta	title_colour_table+1
     27  581a
     28  581a							;		  sta rndHi
     29  581a							;		  sta rnd
     30  581a
     31  581a
     32  581a		       a9 00		      lda	#0
     33  581c		       85 e3		      sta	digit
     34  581e		       a9 10		      lda	#$10
     35  5820		       85 e4		      sta	digit+1
     36  5822		       a9 20		      lda	#$20
     37  5824		       85 e5		      sta	digit+2
     38  5826
     39  5826
     40  5826
     41  5826
      0  5826					      RESYNC
      1  5826
      2  5826		       a9 02		      lda	#%10
      3  5828		       85 41		      sta	VBLANK
      4  582a
      5  582a		       a2 08		      ldx	#8
      6  582c				   .loopResync
      0  582c					      VERTICAL_SYNC
      1  582c		       a9 0e		      lda	#%1110
      2  582e		       85 42	   .VSLP1     sta	WSYNC
      3  5830		       85 40		      sta	VSYNC
      4  5832		       4a		      lsr
      5  5833		       d0 f9		      bne	.VSLP1
      8  5835
      9  5835		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  5837		       a5 80		      lda	Platform
     11  5839		       49 02		      eor	#PAL_50
     12  583b		       d0 02		      bne	.ntsc
     13  583d		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  583f				   .ntsc
     15  583f				   .loopWait
     16  583f		       85 42		      sta	WSYNC
     17  5841		       85 42		      sta	WSYNC
     18  5843		       88		      dey
     19  5844		       d0 f9		      bne	.loopWait
     20  5846		       ca		      dex
     21  5847		       d0 e3		      bne	.loopResync
     43  5849
     44  5849				   RestartFrame0
     45  5849
     46  5849				  -	      if	0
     47  5849				  -	      ldx	#2
     48  5849				  -rollcols   clc
     49  5849				  -	      lda	digit+2
     50  5849				  -	      adc	#$10
     51  5849				  -	      sta	digit+2
     52  5849				  -	      bcc	finxc
     53  5849				  -	      dex
     54  5849				  -	      bpl	rollcols
     55  5849				  -finxc
     56  5849					      endif
     57  5849
      0  5849					      DEFINE_SUBROUTINE	RestartFrame
      1  5849		       00 0b	   BANK_RestartFrame =	_CURRENT_BANK
      2  5849					      SUBROUTINE
      3  5849				   RestartFrame
     59  5849		       a9 00		      LDA	#0
     60  584b		       a9 0e		      lda	#%1110	; VSYNC ON
     61  584d		       85 42	   .loopVSync2 sta	WSYNC
     62  584f		       85 40		      sta	VSYNC
     63  5851		       4a		      lsr
     64  5852		       d0 f9		      bne	.loopVSync2	; branch until VYSNC has been reset
     65  5854
     66  5854							;------------------------------------------------------------------
     67  5854
     68  5854		       a6 80		      ldx	Platform
     69  5856		       bc f6 fc 	      ldy	VBlankTime,x
     70  5859		       8c 96 02 	      sty	TIM64T
     71  585c
     72  585c
     73  585c				  -	      if	0
     74  585c				  -	      lda	SWCHB
     75  585c				  -	      rol
     76  585c				  -	      rol
     77  585c				  -	      rol
     78  585c				  -	      and	#%11
     79  585c				  -	      eor	#PAL
     80  585c				  -	      cmp	Platform
     81  585c				  -	      beq	platOK
     82  585c				  -	      sta	Platform
     83  585c				  -	      jmp	TitleSequence
     84  585c				  -platOK
     85  585c					      endif
     86  585c
     87  585c		       e6 c7	   k2	      inc	rnd
     88  585e		       f0 fc		      beq	k2
     89  5860
     90  5860
     91  5860		       85 42	   VerticalBlank sta	WSYNC
     92  5862		       ad 84 02 	      lda	INTIM
     93  5865		       d0 f9		      bne	VerticalBlank
     94  5867		       85 41		      sta	VBLANK
     95  5869
     96  5869							;sta COLUBK
     97  5869
     98  5869							;------------------------------------------------------------------
     99  5869
    100  5869							; Do X scanlines of color-changing (our picture)
    101  5869
    102  5869		       a0 d1		      ldy	#210-1	; this counts our scanline number
    103  586b		       a2 03	   SokoLogo   ldx	#3
    104  586d		       b1 db	   triplet    lda	(colour_table),y
    105  586f							;    eor digit-1,x
    106  586f		       85 42		      sta	WSYNC
    107  5871		       85 48		      sta	COLUPF	; 3
    108  5873
    109  5873		       b9 78 f2 	      lda	COL_0,y	; 5
    110  5876		       85 4d		      sta	PF0	; 3   @11
    111  5878		       b9 50 f3 	      lda	COL_1,y	; 5
    112  587b		       85 4e		      sta	PF1	; 3   @19
    113  587d		       b9 28 f4 	      lda	COL_2,y	; 5
    114  5880		       85 4f		      sta	PF2	; 3   @27
    115  5882
    116  5882		       b9 00 f5 	      lda	COL_3,y	; 5
    117  5885		       85 4d		      sta	PF0	; 3   @35
      0  5887					      SLEEP	2	; @37
      1  5887				   .CYCLES    SET	2
      2  5887
      3  5887				  -	      IF	.CYCLES < 2
      4  5887				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  5887				  -	      ERR
      6  5887					      ENDIF
      7  5887
      8  5887				  -	      IF	.CYCLES & 1
      9  5887				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  5887				  -	      nop	0
     11  5887				  -	      ELSE
     12  5887				  -	      bit	VSYNC
     13  5887				  -	      ENDIF
     14  5887				  -.CYCLES    SET	.CYCLES - 3
     15  5887					      ENDIF
     16  5887
     17  5887					      REPEAT	.CYCLES / 2
     18  5887		       ea		      nop
     19  5888					      REPEND
    119  5888		       b9 00 f6 	      lda	COL_4,y	; 5
    120  588b		       85 4e		      sta	PF1	; 3   @45
      0  588d					      SLEEP	3	; @45
      1  588d				   .CYCLES    SET	3
      2  588d
      3  588d				  -	      IF	.CYCLES < 2
      4  588d				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  588d				  -	      ERR
      6  588d					      ENDIF
      7  588d
      8  588d					      IF	.CYCLES & 1
      9  588d					      IFNCONST	NO_ILLEGAL_OPCODES
     10  588d		       04 00		      nop	0
     11  588f				  -	      ELSE
     12  588f				  -	      bit	VSYNC
     13  588f					      ENDIF
     14  588f				   .CYCLES    SET	.CYCLES - 3
     15  588f					      ENDIF
     16  588f
     17  588f				  -	      REPEAT	.CYCLES / 2
     18  588f				  -	      nop
     19  588f					      REPEND
    122  588f		       b9 00 f7 	      lda	COL_5,y	; 5
    123  5892		       85 4f		      sta	PF2	; 3
    124  5894
    125  5894		       88		      dey		; 2
    126  5895		       ca		      dex		; 2
    127  5896		       d0 d5		      bne	triplet	; 2(3)
    128  5898
    129  5898		       c0 ff		      cpy	#-1	; 2
    130  589a		       d0 cf		      bne	SokoLogo	; 2(3)
    131  589c
    132  589c							;lda #0
    133  589c							;sta PF0
    134  589c							;sta PF1
    135  589c							;sta PF2
    136  589c
    137  589c		       a6 80		      ldx	Platform
    138  589e		       bd 00 f0 	      lda	OverscanTime2,x
    139  58a1		       8d 96 02 	      sta	TIM64T
    140  58a4
    141  58a4				  -	      if	0
    142  58a4				  -	      sta	WSYNC
    143  58a4				  -	      sta	WSYNC
    144  58a4				  -	      sta	WSYNC
    145  58a4				  -	      sta	WSYNC
    146  58a4				  -	      sta	WSYNC
    147  58a4				  -	      SLEEP	8
    148  58a4				  -	      jsr	SokoScreen
    149  58a4				  -
    150  58a4				  -	      lda	#0
    151  58a4				  -	      sta	BoardScrollX
    152  58a4				  -	      sta	BoardScrollY
    153  58a4					      endif
    154  58a4
    155  58a4							;		ldy #63
    156  58a4							;bot2		 sta WSYNC
    157  58a4							;		dey
    158  58a4							;		bpl bot2
    159  58a4
    160  58a4							;--------------------------------------------------------------------------
    161  58a4
    162  58a4		       a9 00		      lda	#0
    163  58a6		       85 4d		      sta	PF0
    164  58a8		       85 4e		      sta	PF1
    165  58aa		       85 4f		      sta	PF2
    166  58ac
    167  58ac
      0  58ac					      NEXT_RANDOM
      1  58ac
      2  58ac		       a5 c7		      lda	rnd
      3  58ae		       4a		      lsr
      4  58af					      IFCONST	rndHi
      5  58af		       66 c6		      ror	rndHi
      6  58b1					      ENDIF
      7  58b1		       90 02		      bcc	.skipEOR
      8  58b3		       49 b4		      eor	#RND_EOR_VAL
      9  58b5				   .skipEOR
     10  58b5		       85 c7		      sta	rnd
    169  58b7
    170  58b7							; D1 VBLANK turns off beam
    171  58b7							; It needs to be turned on 37 scanlines later
    172  58b7
    173  58b7				   oscan
    174  58b7		       ad 84 02 	      lda	INTIM
    175  58ba		       d0 fb		      bne	oscan
    176  58bc
    177  58bc		       a9 42		      lda	#%01000010	; bit6 is not required
    178  58be		       85 41		      sta	VBLANK	; end of screen - enter blanking
    179  58c0
    180  58c0				  -	      if	0
    181  58c0				  -	      inc	rnd
    182  58c0				  -	      bne	rdd
    183  58c0				  -	      inc	rndHi
    184  58c0				  -rdd
    185  58c0				  -
    186  58c0				  -	      dec	digitick
    187  58c0				  -	      bpl	ret2
    188  58c0				  -	      lda	#40
    189  58c0				  -	      sta	digitick
    190  58c0				  -
    191  58c0				  -	      jsr	Random
    192  58c0				  -	      and	#3
    193  58c0				  -	      beq	ret2
    194  58c0				  -	      tax
    195  58c0				  -	      jsr	Random
    196  58c0				  -	      and	#$F0
    197  58c0				  -	      sta	digit-1,x
    198  58c0				  -	      jmp	RestartFrame0
    199  58c0				  -
    200  58c0				  -ret2
    201  58c0					      endif
    202  58c0
    203  58c0
    204  58c0		       a5 4c		      lda	INPT4
    205  58c2		       10 03		      bpl	ret
    206  58c4
    207  58c4		       4c 49 f0 	      jmp	RestartFrame
    208  58c7
    209  58c7				   ret
    210  58c7		       60		      rts
    211  58c8
    212  58c8
    213  58c8
    214  58c8					      MAC	lumtable
    215  58c8							; {4} MIN LUM 1
    216  58c8							; {5} MIN LUM 2
    217  58c8							; {6} MIN LUM 3
    218  58c8
    219  58c8				   .LUM1      SET	{4}*256
    220  58c8				   .LUM2      SET	{5}*256
    221  58c8				   .LUM3      SET	{6}*256
    222  58c8
    223  58c8				   .STEP1     =	(256*({7}-{4}))/72
    224  58c8				   .STEP2     =	(256*({8}-{5}))/72
    225  58c8				   .STEP3     =	(256*({9}-{6}))/72
    226  58c8
    227  58c8					      REPEAT	72
    228  58c8					      .byte	{1}+(.LUM1/256)
    229  58c8					      .byte	{2}+(.LUM2/256)
    230  58c8					      .byte	{3}+(.LUM3/256)
    231  58c8
    232  58c8							;    ECHO {1}+(.LUM1/256)
    233  58c8							;    ECHO {2}+(.LUM1/256)
    234  58c8							;    ECHO {3}+(.LUM1/256)
    235  58c8
    236  58c8				   .LUM1      SET	.LUM1 + .STEP1
    237  58c8				   .LUM2      SET	.LUM2 + .STEP2
    238  58c8				   .LUM3      SET	.LUM3 + .STEP3
    239  58c8					      REPEND
    240  58c8					      ENDM		;{1}{2}{3} base colours
    241  58c8
    242  58c8							;colr_pal    LUMTABLE $B0,$30,$A0,0,8,4 ;2,4,6
    243  58c8							;    OPTIONAL_PAGEBREAK "colr_ntsc", 72*3
    244  58c8
    245  58c8							;    ECHO "NTSC LUMS"
    246  58c8				   colr_ntsc
      0  58c8					      LUMTABLE	$A0,$10,$30,$4,$8,$A,$C,$2,$8
      1  58c8
      2  58c8
      3  58c8
      4  58c8
      5  58c8				   .LUM1      SET	$4*256
      6  58c8				   .LUM2      SET	$8*256
      7  58c8				   .LUM3      SET	$A*256
      8  58c8
      9  58c8		       00 1c	   .STEP1     =	(256*($C-$4))/72
     10  58c8		       ff ff ff eb .STEP2     =	(256*($2-$8))/72
     11  58c8		       ff ff ff f9 .STEP3     =	(256*($8-$A))/72
     12  58c8
     13  58c8					      REPEAT	72
     14  58c8		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58c9		       18		      .byte.b	$10+(.LUM2/256)
     16  58ca		       3a		      .byte.b	$30+(.LUM3/256)
     17  58cb
     18  58cb
     19  58cb
     20  58cb
     21  58cb
     22  58cb				   .LUM1      SET	.LUM1 + .STEP1
     23  58cb				   .LUM2      SET	.LUM2 + .STEP2
     24  58cb				   .LUM3      SET	.LUM3 + .STEP3
     13  58cb					      REPEND
     14  58cb		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58cc		       17		      .byte.b	$10+(.LUM2/256)
     16  58cd		       39		      .byte.b	$30+(.LUM3/256)
     17  58ce
     18  58ce
     19  58ce
     20  58ce
     21  58ce
     22  58ce				   .LUM1      SET	.LUM1 + .STEP1
     23  58ce				   .LUM2      SET	.LUM2 + .STEP2
     24  58ce				   .LUM3      SET	.LUM3 + .STEP3
     13  58ce					      REPEND
     14  58ce		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58cf		       17		      .byte.b	$10+(.LUM2/256)
     16  58d0		       39		      .byte.b	$30+(.LUM3/256)
     17  58d1
     18  58d1
     19  58d1
     20  58d1
     21  58d1
     22  58d1				   .LUM1      SET	.LUM1 + .STEP1
     23  58d1				   .LUM2      SET	.LUM2 + .STEP2
     24  58d1				   .LUM3      SET	.LUM3 + .STEP3
     13  58d1					      REPEND
     14  58d1		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58d2		       17		      .byte.b	$10+(.LUM2/256)
     16  58d3		       39		      .byte.b	$30+(.LUM3/256)
     17  58d4
     18  58d4
     19  58d4
     20  58d4
     21  58d4
     22  58d4				   .LUM1      SET	.LUM1 + .STEP1
     23  58d4				   .LUM2      SET	.LUM2 + .STEP2
     24  58d4				   .LUM3      SET	.LUM3 + .STEP3
     13  58d4					      REPEND
     14  58d4		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58d5		       17		      .byte.b	$10+(.LUM2/256)
     16  58d6		       39		      .byte.b	$30+(.LUM3/256)
     17  58d7
     18  58d7
     19  58d7
     20  58d7
     21  58d7
     22  58d7				   .LUM1      SET	.LUM1 + .STEP1
     23  58d7				   .LUM2      SET	.LUM2 + .STEP2
     24  58d7				   .LUM3      SET	.LUM3 + .STEP3
     13  58d7					      REPEND
     14  58d7		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58d8		       17		      .byte.b	$10+(.LUM2/256)
     16  58d9		       39		      .byte.b	$30+(.LUM3/256)
     17  58da
     18  58da
     19  58da
     20  58da
     21  58da
     22  58da				   .LUM1      SET	.LUM1 + .STEP1
     23  58da				   .LUM2      SET	.LUM2 + .STEP2
     24  58da				   .LUM3      SET	.LUM3 + .STEP3
     13  58da					      REPEND
     14  58da		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58db		       17		      .byte.b	$10+(.LUM2/256)
     16  58dc		       39		      .byte.b	$30+(.LUM3/256)
     17  58dd
     18  58dd
     19  58dd
     20  58dd
     21  58dd
     22  58dd				   .LUM1      SET	.LUM1 + .STEP1
     23  58dd				   .LUM2      SET	.LUM2 + .STEP2
     24  58dd				   .LUM3      SET	.LUM3 + .STEP3
     13  58dd					      REPEND
     14  58dd		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58de		       17		      .byte.b	$10+(.LUM2/256)
     16  58df		       39		      .byte.b	$30+(.LUM3/256)
     17  58e0
     18  58e0
     19  58e0
     20  58e0
     21  58e0
     22  58e0				   .LUM1      SET	.LUM1 + .STEP1
     23  58e0				   .LUM2      SET	.LUM2 + .STEP2
     24  58e0				   .LUM3      SET	.LUM3 + .STEP3
     13  58e0					      REPEND
     14  58e0		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58e1		       17		      .byte.b	$10+(.LUM2/256)
     16  58e2		       39		      .byte.b	$30+(.LUM3/256)
     17  58e3
     18  58e3
     19  58e3
     20  58e3
     21  58e3
     22  58e3				   .LUM1      SET	.LUM1 + .STEP1
     23  58e3				   .LUM2      SET	.LUM2 + .STEP2
     24  58e3				   .LUM3      SET	.LUM3 + .STEP3
     13  58e3					      REPEND
     14  58e3		       a4		      .byte.b	$A0+(.LUM1/256)
     15  58e4		       17		      .byte.b	$10+(.LUM2/256)
     16  58e5		       39		      .byte.b	$30+(.LUM3/256)
     17  58e6
     18  58e6
     19  58e6
     20  58e6
     21  58e6
     22  58e6				   .LUM1      SET	.LUM1 + .STEP1
     23  58e6				   .LUM2      SET	.LUM2 + .STEP2
     24  58e6				   .LUM3      SET	.LUM3 + .STEP3
     13  58e6					      REPEND
     14  58e6		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58e7		       17		      .byte.b	$10+(.LUM2/256)
     16  58e8		       39		      .byte.b	$30+(.LUM3/256)
     17  58e9
     18  58e9
     19  58e9
     20  58e9
     21  58e9
     22  58e9				   .LUM1      SET	.LUM1 + .STEP1
     23  58e9				   .LUM2      SET	.LUM2 + .STEP2
     24  58e9				   .LUM3      SET	.LUM3 + .STEP3
     13  58e9					      REPEND
     14  58e9		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58ea		       17		      .byte.b	$10+(.LUM2/256)
     16  58eb		       39		      .byte.b	$30+(.LUM3/256)
     17  58ec
     18  58ec
     19  58ec
     20  58ec
     21  58ec
     22  58ec				   .LUM1      SET	.LUM1 + .STEP1
     23  58ec				   .LUM2      SET	.LUM2 + .STEP2
     24  58ec				   .LUM3      SET	.LUM3 + .STEP3
     13  58ec					      REPEND
     14  58ec		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58ed		       17		      .byte.b	$10+(.LUM2/256)
     16  58ee		       39		      .byte.b	$30+(.LUM3/256)
     17  58ef
     18  58ef
     19  58ef
     20  58ef
     21  58ef
     22  58ef				   .LUM1      SET	.LUM1 + .STEP1
     23  58ef				   .LUM2      SET	.LUM2 + .STEP2
     24  58ef				   .LUM3      SET	.LUM3 + .STEP3
     13  58ef					      REPEND
     14  58ef		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58f0		       16		      .byte.b	$10+(.LUM2/256)
     16  58f1		       39		      .byte.b	$30+(.LUM3/256)
     17  58f2
     18  58f2
     19  58f2
     20  58f2
     21  58f2
     22  58f2				   .LUM1      SET	.LUM1 + .STEP1
     23  58f2				   .LUM2      SET	.LUM2 + .STEP2
     24  58f2				   .LUM3      SET	.LUM3 + .STEP3
     13  58f2					      REPEND
     14  58f2		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58f3		       16		      .byte.b	$10+(.LUM2/256)
     16  58f4		       39		      .byte.b	$30+(.LUM3/256)
     17  58f5
     18  58f5
     19  58f5
     20  58f5
     21  58f5
     22  58f5				   .LUM1      SET	.LUM1 + .STEP1
     23  58f5				   .LUM2      SET	.LUM2 + .STEP2
     24  58f5				   .LUM3      SET	.LUM3 + .STEP3
     13  58f5					      REPEND
     14  58f5		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58f6		       16		      .byte.b	$10+(.LUM2/256)
     16  58f7		       39		      .byte.b	$30+(.LUM3/256)
     17  58f8
     18  58f8
     19  58f8
     20  58f8
     21  58f8
     22  58f8				   .LUM1      SET	.LUM1 + .STEP1
     23  58f8				   .LUM2      SET	.LUM2 + .STEP2
     24  58f8				   .LUM3      SET	.LUM3 + .STEP3
     13  58f8					      REPEND
     14  58f8		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58f9		       16		      .byte.b	$10+(.LUM2/256)
     16  58fa		       39		      .byte.b	$30+(.LUM3/256)
     17  58fb
     18  58fb
     19  58fb
     20  58fb
     21  58fb
     22  58fb				   .LUM1      SET	.LUM1 + .STEP1
     23  58fb				   .LUM2      SET	.LUM2 + .STEP2
     24  58fb				   .LUM3      SET	.LUM3 + .STEP3
     13  58fb					      REPEND
     14  58fb		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58fc		       16		      .byte.b	$10+(.LUM2/256)
     16  58fd		       39		      .byte.b	$30+(.LUM3/256)
     17  58fe
     18  58fe
     19  58fe
     20  58fe
     21  58fe
     22  58fe				   .LUM1      SET	.LUM1 + .STEP1
     23  58fe				   .LUM2      SET	.LUM2 + .STEP2
     24  58fe				   .LUM3      SET	.LUM3 + .STEP3
     13  58fe					      REPEND
     14  58fe		       a5		      .byte.b	$A0+(.LUM1/256)
     15  58ff		       16		      .byte.b	$10+(.LUM2/256)
     16  5900		       39		      .byte.b	$30+(.LUM3/256)
     17  5901
     18  5901
     19  5901
     20  5901
     21  5901
     22  5901				   .LUM1      SET	.LUM1 + .STEP1
     23  5901				   .LUM2      SET	.LUM2 + .STEP2
     24  5901				   .LUM3      SET	.LUM3 + .STEP3
     13  5901					      REPEND
     14  5901		       a6		      .byte.b	$A0+(.LUM1/256)
     15  5902		       16		      .byte.b	$10+(.LUM2/256)
     16  5903		       39		      .byte.b	$30+(.LUM3/256)
     17  5904
     18  5904
     19  5904
     20  5904
     21  5904
     22  5904				   .LUM1      SET	.LUM1 + .STEP1
     23  5904				   .LUM2      SET	.LUM2 + .STEP2
     24  5904				   .LUM3      SET	.LUM3 + .STEP3
     13  5904					      REPEND
     14  5904		       a6		      .byte.b	$A0+(.LUM1/256)
     15  5905		       16		      .byte.b	$10+(.LUM2/256)
     16  5906		       39		      .byte.b	$30+(.LUM3/256)
     17  5907
     18  5907
     19  5907
     20  5907
     21  5907
     22  5907				   .LUM1      SET	.LUM1 + .STEP1
     23  5907				   .LUM2      SET	.LUM2 + .STEP2
     24  5907				   .LUM3      SET	.LUM3 + .STEP3
     13  5907					      REPEND
     14  5907		       a6		      .byte.b	$A0+(.LUM1/256)
     15  5908		       16		      .byte.b	$10+(.LUM2/256)
     16  5909		       39		      .byte.b	$30+(.LUM3/256)
     17  590a
     18  590a
     19  590a
     20  590a
     21  590a
     22  590a				   .LUM1      SET	.LUM1 + .STEP1
     23  590a				   .LUM2      SET	.LUM2 + .STEP2
     24  590a				   .LUM3      SET	.LUM3 + .STEP3
     13  590a					      REPEND
     14  590a		       a6		      .byte.b	$A0+(.LUM1/256)
     15  590b		       16		      .byte.b	$10+(.LUM2/256)
     16  590c		       39		      .byte.b	$30+(.LUM3/256)
     17  590d
     18  590d
     19  590d
     20  590d
     21  590d
     22  590d				   .LUM1      SET	.LUM1 + .STEP1
     23  590d				   .LUM2      SET	.LUM2 + .STEP2
     24  590d				   .LUM3      SET	.LUM3 + .STEP3
     13  590d					      REPEND
     14  590d		       a6		      .byte.b	$A0+(.LUM1/256)
     15  590e		       16		      .byte.b	$10+(.LUM2/256)
     16  590f		       39		      .byte.b	$30+(.LUM3/256)
     17  5910
     18  5910
     19  5910
     20  5910
     21  5910
     22  5910				   .LUM1      SET	.LUM1 + .STEP1
     23  5910				   .LUM2      SET	.LUM2 + .STEP2
     24  5910				   .LUM3      SET	.LUM3 + .STEP3
     13  5910					      REPEND
     14  5910		       a6		      .byte.b	$A0+(.LUM1/256)
     15  5911		       16		      .byte.b	$10+(.LUM2/256)
     16  5912		       39		      .byte.b	$30+(.LUM3/256)
     17  5913
     18  5913
     19  5913
     20  5913
     21  5913
     22  5913				   .LUM1      SET	.LUM1 + .STEP1
     23  5913				   .LUM2      SET	.LUM2 + .STEP2
     24  5913				   .LUM3      SET	.LUM3 + .STEP3
     13  5913					      REPEND
     14  5913		       a6		      .byte.b	$A0+(.LUM1/256)
     15  5914		       15		      .byte.b	$10+(.LUM2/256)
     16  5915		       39		      .byte.b	$30+(.LUM3/256)
     17  5916
     18  5916
     19  5916
     20  5916
     21  5916
     22  5916				   .LUM1      SET	.LUM1 + .STEP1
     23  5916				   .LUM2      SET	.LUM2 + .STEP2
     24  5916				   .LUM3      SET	.LUM3 + .STEP3
     13  5916					      REPEND
     14  5916		       a6		      .byte.b	$A0+(.LUM1/256)
     15  5917		       15		      .byte.b	$10+(.LUM2/256)
     16  5918		       39		      .byte.b	$30+(.LUM3/256)
     17  5919
     18  5919
     19  5919
     20  5919
     21  5919
     22  5919				   .LUM1      SET	.LUM1 + .STEP1
     23  5919				   .LUM2      SET	.LUM2 + .STEP2
     24  5919				   .LUM3      SET	.LUM3 + .STEP3
     13  5919					      REPEND
     14  5919		       a6		      .byte.b	$A0+(.LUM1/256)
     15  591a		       15		      .byte.b	$10+(.LUM2/256)
     16  591b		       39		      .byte.b	$30+(.LUM3/256)
     17  591c
     18  591c
     19  591c
     20  591c
     21  591c
     22  591c				   .LUM1      SET	.LUM1 + .STEP1
     23  591c				   .LUM2      SET	.LUM2 + .STEP2
     24  591c				   .LUM3      SET	.LUM3 + .STEP3
     13  591c					      REPEND
     14  591c		       a7		      .byte.b	$A0+(.LUM1/256)
     15  591d		       15		      .byte.b	$10+(.LUM2/256)
     16  591e		       39		      .byte.b	$30+(.LUM3/256)
     17  591f
     18  591f
     19  591f
     20  591f
     21  591f
     22  591f				   .LUM1      SET	.LUM1 + .STEP1
     23  591f				   .LUM2      SET	.LUM2 + .STEP2
     24  591f				   .LUM3      SET	.LUM3 + .STEP3
     13  591f					      REPEND
     14  591f		       a7		      .byte.b	$A0+(.LUM1/256)
     15  5920		       15		      .byte.b	$10+(.LUM2/256)
     16  5921		       39		      .byte.b	$30+(.LUM3/256)
     17  5922
     18  5922
     19  5922
     20  5922
     21  5922
     22  5922				   .LUM1      SET	.LUM1 + .STEP1
     23  5922				   .LUM2      SET	.LUM2 + .STEP2
     24  5922				   .LUM3      SET	.LUM3 + .STEP3
     13  5922					      REPEND
     14  5922		       a7		      .byte.b	$A0+(.LUM1/256)
     15  5923		       15		      .byte.b	$10+(.LUM2/256)
     16  5924		       39		      .byte.b	$30+(.LUM3/256)
     17  5925
     18  5925
     19  5925
     20  5925
     21  5925
     22  5925				   .LUM1      SET	.LUM1 + .STEP1
     23  5925				   .LUM2      SET	.LUM2 + .STEP2
     24  5925				   .LUM3      SET	.LUM3 + .STEP3
     13  5925					      REPEND
     14  5925		       a7		      .byte.b	$A0+(.LUM1/256)
     15  5926		       15		      .byte.b	$10+(.LUM2/256)
     16  5927		       39		      .byte.b	$30+(.LUM3/256)
     17  5928
     18  5928
     19  5928
     20  5928
     21  5928
     22  5928				   .LUM1      SET	.LUM1 + .STEP1
     23  5928				   .LUM2      SET	.LUM2 + .STEP2
     24  5928				   .LUM3      SET	.LUM3 + .STEP3
     13  5928					      REPEND
     14  5928		       a7		      .byte.b	$A0+(.LUM1/256)
     15  5929		       15		      .byte.b	$10+(.LUM2/256)
     16  592a		       39		      .byte.b	$30+(.LUM3/256)
     17  592b
     18  592b
     19  592b
     20  592b
     21  592b
     22  592b				   .LUM1      SET	.LUM1 + .STEP1
     23  592b				   .LUM2      SET	.LUM2 + .STEP2
     24  592b				   .LUM3      SET	.LUM3 + .STEP3
     13  592b					      REPEND
     14  592b		       a7		      .byte.b	$A0+(.LUM1/256)
     15  592c		       15		      .byte.b	$10+(.LUM2/256)
     16  592d		       39		      .byte.b	$30+(.LUM3/256)
     17  592e
     18  592e
     19  592e
     20  592e
     21  592e
     22  592e				   .LUM1      SET	.LUM1 + .STEP1
     23  592e				   .LUM2      SET	.LUM2 + .STEP2
     24  592e				   .LUM3      SET	.LUM3 + .STEP3
     13  592e					      REPEND
     14  592e		       a7		      .byte.b	$A0+(.LUM1/256)
     15  592f		       15		      .byte.b	$10+(.LUM2/256)
     16  5930		       39		      .byte.b	$30+(.LUM3/256)
     17  5931
     18  5931
     19  5931
     20  5931
     21  5931
     22  5931				   .LUM1      SET	.LUM1 + .STEP1
     23  5931				   .LUM2      SET	.LUM2 + .STEP2
     24  5931				   .LUM3      SET	.LUM3 + .STEP3
     13  5931					      REPEND
     14  5931		       a7		      .byte.b	$A0+(.LUM1/256)
     15  5932		       15		      .byte.b	$10+(.LUM2/256)
     16  5933		       39		      .byte.b	$30+(.LUM3/256)
     17  5934
     18  5934
     19  5934
     20  5934
     21  5934
     22  5934				   .LUM1      SET	.LUM1 + .STEP1
     23  5934				   .LUM2      SET	.LUM2 + .STEP2
     24  5934				   .LUM3      SET	.LUM3 + .STEP3
     13  5934					      REPEND
     14  5934		       a7		      .byte.b	$A0+(.LUM1/256)
     15  5935		       15		      .byte.b	$10+(.LUM2/256)
     16  5936		       39		      .byte.b	$30+(.LUM3/256)
     17  5937
     18  5937
     19  5937
     20  5937
     21  5937
     22  5937				   .LUM1      SET	.LUM1 + .STEP1
     23  5937				   .LUM2      SET	.LUM2 + .STEP2
     24  5937				   .LUM3      SET	.LUM3 + .STEP3
     13  5937					      REPEND
     14  5937		       a8		      .byte.b	$A0+(.LUM1/256)
     15  5938		       14		      .byte.b	$10+(.LUM2/256)
     16  5939		       38		      .byte.b	$30+(.LUM3/256)
     17  593a
     18  593a
     19  593a
     20  593a
     21  593a
     22  593a				   .LUM1      SET	.LUM1 + .STEP1
     23  593a				   .LUM2      SET	.LUM2 + .STEP2
     24  593a				   .LUM3      SET	.LUM3 + .STEP3
     13  593a					      REPEND
     14  593a		       a8		      .byte.b	$A0+(.LUM1/256)
     15  593b		       14		      .byte.b	$10+(.LUM2/256)
     16  593c		       38		      .byte.b	$30+(.LUM3/256)
     17  593d
     18  593d
     19  593d
     20  593d
     21  593d
     22  593d				   .LUM1      SET	.LUM1 + .STEP1
     23  593d				   .LUM2      SET	.LUM2 + .STEP2
     24  593d				   .LUM3      SET	.LUM3 + .STEP3
     13  593d					      REPEND
     14  593d		       a8		      .byte.b	$A0+(.LUM1/256)
     15  593e		       14		      .byte.b	$10+(.LUM2/256)
     16  593f		       38		      .byte.b	$30+(.LUM3/256)
     17  5940
     18  5940
     19  5940
     20  5940
     21  5940
     22  5940				   .LUM1      SET	.LUM1 + .STEP1
     23  5940				   .LUM2      SET	.LUM2 + .STEP2
     24  5940				   .LUM3      SET	.LUM3 + .STEP3
     13  5940					      REPEND
     14  5940		       a8		      .byte.b	$A0+(.LUM1/256)
     15  5941		       14		      .byte.b	$10+(.LUM2/256)
     16  5942		       38		      .byte.b	$30+(.LUM3/256)
     17  5943
     18  5943
     19  5943
     20  5943
     21  5943
     22  5943				   .LUM1      SET	.LUM1 + .STEP1
     23  5943				   .LUM2      SET	.LUM2 + .STEP2
     24  5943				   .LUM3      SET	.LUM3 + .STEP3
     13  5943					      REPEND
     14  5943		       a8		      .byte.b	$A0+(.LUM1/256)
     15  5944		       14		      .byte.b	$10+(.LUM2/256)
     16  5945		       38		      .byte.b	$30+(.LUM3/256)
     17  5946
     18  5946
     19  5946
     20  5946
     21  5946
     22  5946				   .LUM1      SET	.LUM1 + .STEP1
     23  5946				   .LUM2      SET	.LUM2 + .STEP2
     24  5946				   .LUM3      SET	.LUM3 + .STEP3
     13  5946					      REPEND
     14  5946		       a8		      .byte.b	$A0+(.LUM1/256)
     15  5947		       14		      .byte.b	$10+(.LUM2/256)
     16  5948		       38		      .byte.b	$30+(.LUM3/256)
     17  5949
     18  5949
     19  5949
     20  5949
     21  5949
     22  5949				   .LUM1      SET	.LUM1 + .STEP1
     23  5949				   .LUM2      SET	.LUM2 + .STEP2
     24  5949				   .LUM3      SET	.LUM3 + .STEP3
     13  5949					      REPEND
     14  5949		       a8		      .byte.b	$A0+(.LUM1/256)
     15  594a		       14		      .byte.b	$10+(.LUM2/256)
     16  594b		       38		      .byte.b	$30+(.LUM3/256)
     17  594c
     18  594c
     19  594c
     20  594c
     21  594c
     22  594c				   .LUM1      SET	.LUM1 + .STEP1
     23  594c				   .LUM2      SET	.LUM2 + .STEP2
     24  594c				   .LUM3      SET	.LUM3 + .STEP3
     13  594c					      REPEND
     14  594c		       a8		      .byte.b	$A0+(.LUM1/256)
     15  594d		       14		      .byte.b	$10+(.LUM2/256)
     16  594e		       38		      .byte.b	$30+(.LUM3/256)
     17  594f
     18  594f
     19  594f
     20  594f
     21  594f
     22  594f				   .LUM1      SET	.LUM1 + .STEP1
     23  594f				   .LUM2      SET	.LUM2 + .STEP2
     24  594f				   .LUM3      SET	.LUM3 + .STEP3
     13  594f					      REPEND
     14  594f		       a8		      .byte.b	$A0+(.LUM1/256)
     15  5950		       14		      .byte.b	$10+(.LUM2/256)
     16  5951		       38		      .byte.b	$30+(.LUM3/256)
     17  5952
     18  5952
     19  5952
     20  5952
     21  5952
     22  5952				   .LUM1      SET	.LUM1 + .STEP1
     23  5952				   .LUM2      SET	.LUM2 + .STEP2
     24  5952				   .LUM3      SET	.LUM3 + .STEP3
     13  5952					      REPEND
     14  5952		       a9		      .byte.b	$A0+(.LUM1/256)
     15  5953		       14		      .byte.b	$10+(.LUM2/256)
     16  5954		       38		      .byte.b	$30+(.LUM3/256)
     17  5955
     18  5955
     19  5955
     20  5955
     21  5955
     22  5955				   .LUM1      SET	.LUM1 + .STEP1
     23  5955				   .LUM2      SET	.LUM2 + .STEP2
     24  5955				   .LUM3      SET	.LUM3 + .STEP3
     13  5955					      REPEND
     14  5955		       a9		      .byte.b	$A0+(.LUM1/256)
     15  5956		       14		      .byte.b	$10+(.LUM2/256)
     16  5957		       38		      .byte.b	$30+(.LUM3/256)
     17  5958
     18  5958
     19  5958
     20  5958
     21  5958
     22  5958				   .LUM1      SET	.LUM1 + .STEP1
     23  5958				   .LUM2      SET	.LUM2 + .STEP2
     24  5958				   .LUM3      SET	.LUM3 + .STEP3
     13  5958					      REPEND
     14  5958		       a9		      .byte.b	$A0+(.LUM1/256)
     15  5959		       14		      .byte.b	$10+(.LUM2/256)
     16  595a		       38		      .byte.b	$30+(.LUM3/256)
     17  595b
     18  595b
     19  595b
     20  595b
     21  595b
     22  595b				   .LUM1      SET	.LUM1 + .STEP1
     23  595b				   .LUM2      SET	.LUM2 + .STEP2
     24  595b				   .LUM3      SET	.LUM3 + .STEP3
     13  595b					      REPEND
     14  595b		       a9		      .byte.b	$A0+(.LUM1/256)
     15  595c		       13		      .byte.b	$10+(.LUM2/256)
     16  595d		       38		      .byte.b	$30+(.LUM3/256)
     17  595e
     18  595e
     19  595e
     20  595e
     21  595e
     22  595e				   .LUM1      SET	.LUM1 + .STEP1
     23  595e				   .LUM2      SET	.LUM2 + .STEP2
     24  595e				   .LUM3      SET	.LUM3 + .STEP3
     13  595e					      REPEND
     14  595e		       a9		      .byte.b	$A0+(.LUM1/256)
     15  595f		       13		      .byte.b	$10+(.LUM2/256)
     16  5960		       38		      .byte.b	$30+(.LUM3/256)
     17  5961
     18  5961
     19  5961
     20  5961
     21  5961
     22  5961				   .LUM1      SET	.LUM1 + .STEP1
     23  5961				   .LUM2      SET	.LUM2 + .STEP2
     24  5961				   .LUM3      SET	.LUM3 + .STEP3
     13  5961					      REPEND
     14  5961		       a9		      .byte.b	$A0+(.LUM1/256)
     15  5962		       13		      .byte.b	$10+(.LUM2/256)
     16  5963		       38		      .byte.b	$30+(.LUM3/256)
     17  5964
     18  5964
     19  5964
     20  5964
     21  5964
     22  5964				   .LUM1      SET	.LUM1 + .STEP1
     23  5964				   .LUM2      SET	.LUM2 + .STEP2
     24  5964				   .LUM3      SET	.LUM3 + .STEP3
     13  5964					      REPEND
     14  5964		       a9		      .byte.b	$A0+(.LUM1/256)
     15  5965		       13		      .byte.b	$10+(.LUM2/256)
     16  5966		       38		      .byte.b	$30+(.LUM3/256)
     17  5967
     18  5967
     19  5967
     20  5967
     21  5967
     22  5967				   .LUM1      SET	.LUM1 + .STEP1
     23  5967				   .LUM2      SET	.LUM2 + .STEP2
     24  5967				   .LUM3      SET	.LUM3 + .STEP3
     13  5967					      REPEND
     14  5967		       a9		      .byte.b	$A0+(.LUM1/256)
     15  5968		       13		      .byte.b	$10+(.LUM2/256)
     16  5969		       38		      .byte.b	$30+(.LUM3/256)
     17  596a
     18  596a
     19  596a
     20  596a
     21  596a
     22  596a				   .LUM1      SET	.LUM1 + .STEP1
     23  596a				   .LUM2      SET	.LUM2 + .STEP2
     24  596a				   .LUM3      SET	.LUM3 + .STEP3
     13  596a					      REPEND
     14  596a		       a9		      .byte.b	$A0+(.LUM1/256)
     15  596b		       13		      .byte.b	$10+(.LUM2/256)
     16  596c		       38		      .byte.b	$30+(.LUM3/256)
     17  596d
     18  596d
     19  596d
     20  596d
     21  596d
     22  596d				   .LUM1      SET	.LUM1 + .STEP1
     23  596d				   .LUM2      SET	.LUM2 + .STEP2
     24  596d				   .LUM3      SET	.LUM3 + .STEP3
     13  596d					      REPEND
     14  596d		       aa		      .byte.b	$A0+(.LUM1/256)
     15  596e		       13		      .byte.b	$10+(.LUM2/256)
     16  596f		       38		      .byte.b	$30+(.LUM3/256)
     17  5970
     18  5970
     19  5970
     20  5970
     21  5970
     22  5970				   .LUM1      SET	.LUM1 + .STEP1
     23  5970				   .LUM2      SET	.LUM2 + .STEP2
     24  5970				   .LUM3      SET	.LUM3 + .STEP3
     13  5970					      REPEND
     14  5970		       aa		      .byte.b	$A0+(.LUM1/256)
     15  5971		       13		      .byte.b	$10+(.LUM2/256)
     16  5972		       38		      .byte.b	$30+(.LUM3/256)
     17  5973
     18  5973
     19  5973
     20  5973
     21  5973
     22  5973				   .LUM1      SET	.LUM1 + .STEP1
     23  5973				   .LUM2      SET	.LUM2 + .STEP2
     24  5973				   .LUM3      SET	.LUM3 + .STEP3
     13  5973					      REPEND
     14  5973		       aa		      .byte.b	$A0+(.LUM1/256)
     15  5974		       13		      .byte.b	$10+(.LUM2/256)
     16  5975		       38		      .byte.b	$30+(.LUM3/256)
     17  5976
     18  5976
     19  5976
     20  5976
     21  5976
     22  5976				   .LUM1      SET	.LUM1 + .STEP1
     23  5976				   .LUM2      SET	.LUM2 + .STEP2
     24  5976				   .LUM3      SET	.LUM3 + .STEP3
     13  5976					      REPEND
     14  5976		       aa		      .byte.b	$A0+(.LUM1/256)
     15  5977		       13		      .byte.b	$10+(.LUM2/256)
     16  5978		       38		      .byte.b	$30+(.LUM3/256)
     17  5979
     18  5979
     19  5979
     20  5979
     21  5979
     22  5979				   .LUM1      SET	.LUM1 + .STEP1
     23  5979				   .LUM2      SET	.LUM2 + .STEP2
     24  5979				   .LUM3      SET	.LUM3 + .STEP3
     13  5979					      REPEND
     14  5979		       aa		      .byte.b	$A0+(.LUM1/256)
     15  597a		       13		      .byte.b	$10+(.LUM2/256)
     16  597b		       38		      .byte.b	$30+(.LUM3/256)
     17  597c
     18  597c
     19  597c
     20  597c
     21  597c
     22  597c				   .LUM1      SET	.LUM1 + .STEP1
     23  597c				   .LUM2      SET	.LUM2 + .STEP2
     24  597c				   .LUM3      SET	.LUM3 + .STEP3
     13  597c					      REPEND
     14  597c		       aa		      .byte.b	$A0+(.LUM1/256)
     15  597d		       13		      .byte.b	$10+(.LUM2/256)
     16  597e		       38		      .byte.b	$30+(.LUM3/256)
     17  597f
     18  597f
     19  597f
     20  597f
     21  597f
     22  597f				   .LUM1      SET	.LUM1 + .STEP1
     23  597f				   .LUM2      SET	.LUM2 + .STEP2
     24  597f				   .LUM3      SET	.LUM3 + .STEP3
     13  597f					      REPEND
     14  597f		       aa		      .byte.b	$A0+(.LUM1/256)
     15  5980		       12		      .byte.b	$10+(.LUM2/256)
     16  5981		       38		      .byte.b	$30+(.LUM3/256)
     17  5982
     18  5982
     19  5982
     20  5982
     21  5982
     22  5982				   .LUM1      SET	.LUM1 + .STEP1
     23  5982				   .LUM2      SET	.LUM2 + .STEP2
     24  5982				   .LUM3      SET	.LUM3 + .STEP3
     13  5982					      REPEND
     14  5982		       aa		      .byte.b	$A0+(.LUM1/256)
     15  5983		       12		      .byte.b	$10+(.LUM2/256)
     16  5984		       38		      .byte.b	$30+(.LUM3/256)
     17  5985
     18  5985
     19  5985
     20  5985
     21  5985
     22  5985				   .LUM1      SET	.LUM1 + .STEP1
     23  5985				   .LUM2      SET	.LUM2 + .STEP2
     24  5985				   .LUM3      SET	.LUM3 + .STEP3
     13  5985					      REPEND
     14  5985		       aa		      .byte.b	$A0+(.LUM1/256)
     15  5986		       12		      .byte.b	$10+(.LUM2/256)
     16  5987		       38		      .byte.b	$30+(.LUM3/256)
     17  5988
     18  5988
     19  5988
     20  5988
     21  5988
     22  5988				   .LUM1      SET	.LUM1 + .STEP1
     23  5988				   .LUM2      SET	.LUM2 + .STEP2
     24  5988				   .LUM3      SET	.LUM3 + .STEP3
     13  5988					      REPEND
     14  5988		       ab		      .byte.b	$A0+(.LUM1/256)
     15  5989		       12		      .byte.b	$10+(.LUM2/256)
     16  598a		       38		      .byte.b	$30+(.LUM3/256)
     17  598b
     18  598b
     19  598b
     20  598b
     21  598b
     22  598b				   .LUM1      SET	.LUM1 + .STEP1
     23  598b				   .LUM2      SET	.LUM2 + .STEP2
     24  598b				   .LUM3      SET	.LUM3 + .STEP3
     13  598b					      REPEND
     14  598b		       ab		      .byte.b	$A0+(.LUM1/256)
     15  598c		       12		      .byte.b	$10+(.LUM2/256)
     16  598d		       38		      .byte.b	$30+(.LUM3/256)
     17  598e
     18  598e
     19  598e
     20  598e
     21  598e
     22  598e				   .LUM1      SET	.LUM1 + .STEP1
     23  598e				   .LUM2      SET	.LUM2 + .STEP2
     24  598e				   .LUM3      SET	.LUM3 + .STEP3
     13  598e					      REPEND
     14  598e		       ab		      .byte.b	$A0+(.LUM1/256)
     15  598f		       12		      .byte.b	$10+(.LUM2/256)
     16  5990		       38		      .byte.b	$30+(.LUM3/256)
     17  5991
     18  5991
     19  5991
     20  5991
     21  5991
     22  5991				   .LUM1      SET	.LUM1 + .STEP1
     23  5991				   .LUM2      SET	.LUM2 + .STEP2
     24  5991				   .LUM3      SET	.LUM3 + .STEP3
     13  5991					      REPEND
     14  5991		       ab		      .byte.b	$A0+(.LUM1/256)
     15  5992		       12		      .byte.b	$10+(.LUM2/256)
     16  5993		       38		      .byte.b	$30+(.LUM3/256)
     17  5994
     18  5994
     19  5994
     20  5994
     21  5994
     22  5994				   .LUM1      SET	.LUM1 + .STEP1
     23  5994				   .LUM2      SET	.LUM2 + .STEP2
     24  5994				   .LUM3      SET	.LUM3 + .STEP3
     13  5994					      REPEND
     14  5994		       ab		      .byte.b	$A0+(.LUM1/256)
     15  5995		       12		      .byte.b	$10+(.LUM2/256)
     16  5996		       38		      .byte.b	$30+(.LUM3/256)
     17  5997
     18  5997
     19  5997
     20  5997
     21  5997
     22  5997				   .LUM1      SET	.LUM1 + .STEP1
     23  5997				   .LUM2      SET	.LUM2 + .STEP2
     24  5997				   .LUM3      SET	.LUM3 + .STEP3
     13  5997					      REPEND
     14  5997		       ab		      .byte.b	$A0+(.LUM1/256)
     15  5998		       12		      .byte.b	$10+(.LUM2/256)
     16  5999		       38		      .byte.b	$30+(.LUM3/256)
     17  599a
     18  599a
     19  599a
     20  599a
     21  599a
     22  599a				   .LUM1      SET	.LUM1 + .STEP1
     23  599a				   .LUM2      SET	.LUM2 + .STEP2
     24  599a				   .LUM3      SET	.LUM3 + .STEP3
     13  599a					      REPEND
     14  599a		       ab		      .byte.b	$A0+(.LUM1/256)
     15  599b		       12		      .byte.b	$10+(.LUM2/256)
     16  599c		       38		      .byte.b	$30+(.LUM3/256)
     17  599d
     18  599d
     19  599d
     20  599d
     21  599d
     22  599d				   .LUM1      SET	.LUM1 + .STEP1
     23  599d				   .LUM2      SET	.LUM2 + .STEP2
     24  599d				   .LUM3      SET	.LUM3 + .STEP3
     13  599d					      REPEND
     14  599d		       ab		      .byte.b	$A0+(.LUM1/256)
     15  599e		       12		      .byte.b	$10+(.LUM2/256)
     16  599f		       38		      .byte.b	$30+(.LUM3/256)
     17  59a0
     18  59a0
     19  59a0
     20  59a0
     21  59a0
     22  59a0				   .LUM1      SET	.LUM1 + .STEP1
     23  59a0				   .LUM2      SET	.LUM2 + .STEP2
     24  59a0				   .LUM3      SET	.LUM3 + .STEP3
     25  59a0					      REPEND
    248  59a0							;colr_ntsc   LUMTABLE $70,$40,$a0,$A,$2,$E,$8,$E,$8
    249  59a0
    250  59a0							;    ECHO "PAL LUMS"
    251  59a0							;    OPTIONAL_PAGEBREAK "colr_pal", 72*3
    252  59a0							;colr_pal	  LUMTABLE $b0, $60, $20, $A,$6,$C,$8,$C,$8
      0  59a0				   colr_pal   LUMTABLE	$90, $20, $60, $6,$A,$a,$C,$6,$8
      1  59a0
      2  59a0
      3  59a0
      4  59a0
      5  59a0				   .LUM1      SET	$6*256
      6  59a0				   .LUM2      SET	$A*256
      7  59a0				   .LUM3      SET	$a*256
      8  59a0
      9  59a0		       00 15	   .STEP1     =	(256*($C-$6))/72
     10  59a0		       ff ff ff f2 .STEP2     =	(256*($6-$A))/72
     11  59a0		       ff ff ff f9 .STEP3     =	(256*($8-$a))/72
     12  59a0
     13  59a0					      REPEAT	72
     14  59a0		       96		      .byte.b	$90+(.LUM1/256)
     15  59a1		       2a		      .byte.b	$20+(.LUM2/256)
     16  59a2		       6a		      .byte.b	$60+(.LUM3/256)
     17  59a3
     18  59a3
     19  59a3
     20  59a3
     21  59a3
     22  59a3				   .LUM1      SET	.LUM1 + .STEP1
     23  59a3				   .LUM2      SET	.LUM2 + .STEP2
     24  59a3				   .LUM3      SET	.LUM3 + .STEP3
     13  59a3					      REPEND
     14  59a3		       96		      .byte.b	$90+(.LUM1/256)
     15  59a4		       29		      .byte.b	$20+(.LUM2/256)
     16  59a5		       69		      .byte.b	$60+(.LUM3/256)
     17  59a6
     18  59a6
     19  59a6
     20  59a6
     21  59a6
     22  59a6				   .LUM1      SET	.LUM1 + .STEP1
     23  59a6				   .LUM2      SET	.LUM2 + .STEP2
     24  59a6				   .LUM3      SET	.LUM3 + .STEP3
     13  59a6					      REPEND
     14  59a6		       96		      .byte.b	$90+(.LUM1/256)
     15  59a7		       29		      .byte.b	$20+(.LUM2/256)
     16  59a8		       69		      .byte.b	$60+(.LUM3/256)
     17  59a9
     18  59a9
     19  59a9
     20  59a9
     21  59a9
     22  59a9				   .LUM1      SET	.LUM1 + .STEP1
     23  59a9				   .LUM2      SET	.LUM2 + .STEP2
     24  59a9				   .LUM3      SET	.LUM3 + .STEP3
     13  59a9					      REPEND
     14  59a9		       96		      .byte.b	$90+(.LUM1/256)
     15  59aa		       29		      .byte.b	$20+(.LUM2/256)
     16  59ab		       69		      .byte.b	$60+(.LUM3/256)
     17  59ac
     18  59ac
     19  59ac
     20  59ac
     21  59ac
     22  59ac				   .LUM1      SET	.LUM1 + .STEP1
     23  59ac				   .LUM2      SET	.LUM2 + .STEP2
     24  59ac				   .LUM3      SET	.LUM3 + .STEP3
     13  59ac					      REPEND
     14  59ac		       96		      .byte.b	$90+(.LUM1/256)
     15  59ad		       29		      .byte.b	$20+(.LUM2/256)
     16  59ae		       69		      .byte.b	$60+(.LUM3/256)
     17  59af
     18  59af
     19  59af
     20  59af
     21  59af
     22  59af				   .LUM1      SET	.LUM1 + .STEP1
     23  59af				   .LUM2      SET	.LUM2 + .STEP2
     24  59af				   .LUM3      SET	.LUM3 + .STEP3
     13  59af					      REPEND
     14  59af		       96		      .byte.b	$90+(.LUM1/256)
     15  59b0		       29		      .byte.b	$20+(.LUM2/256)
     16  59b1		       69		      .byte.b	$60+(.LUM3/256)
     17  59b2
     18  59b2
     19  59b2
     20  59b2
     21  59b2
     22  59b2				   .LUM1      SET	.LUM1 + .STEP1
     23  59b2				   .LUM2      SET	.LUM2 + .STEP2
     24  59b2				   .LUM3      SET	.LUM3 + .STEP3
     13  59b2					      REPEND
     14  59b2		       96		      .byte.b	$90+(.LUM1/256)
     15  59b3		       29		      .byte.b	$20+(.LUM2/256)
     16  59b4		       69		      .byte.b	$60+(.LUM3/256)
     17  59b5
     18  59b5
     19  59b5
     20  59b5
     21  59b5
     22  59b5				   .LUM1      SET	.LUM1 + .STEP1
     23  59b5				   .LUM2      SET	.LUM2 + .STEP2
     24  59b5				   .LUM3      SET	.LUM3 + .STEP3
     13  59b5					      REPEND
     14  59b5		       96		      .byte.b	$90+(.LUM1/256)
     15  59b6		       29		      .byte.b	$20+(.LUM2/256)
     16  59b7		       69		      .byte.b	$60+(.LUM3/256)
     17  59b8
     18  59b8
     19  59b8
     20  59b8
     21  59b8
     22  59b8				   .LUM1      SET	.LUM1 + .STEP1
     23  59b8				   .LUM2      SET	.LUM2 + .STEP2
     24  59b8				   .LUM3      SET	.LUM3 + .STEP3
     13  59b8					      REPEND
     14  59b8		       96		      .byte.b	$90+(.LUM1/256)
     15  59b9		       29		      .byte.b	$20+(.LUM2/256)
     16  59ba		       69		      .byte.b	$60+(.LUM3/256)
     17  59bb
     18  59bb
     19  59bb
     20  59bb
     21  59bb
     22  59bb				   .LUM1      SET	.LUM1 + .STEP1
     23  59bb				   .LUM2      SET	.LUM2 + .STEP2
     24  59bb				   .LUM3      SET	.LUM3 + .STEP3
     13  59bb					      REPEND
     14  59bb		       96		      .byte.b	$90+(.LUM1/256)
     15  59bc		       29		      .byte.b	$20+(.LUM2/256)
     16  59bd		       69		      .byte.b	$60+(.LUM3/256)
     17  59be
     18  59be
     19  59be
     20  59be
     21  59be
     22  59be				   .LUM1      SET	.LUM1 + .STEP1
     23  59be				   .LUM2      SET	.LUM2 + .STEP2
     24  59be				   .LUM3      SET	.LUM3 + .STEP3
     13  59be					      REPEND
     14  59be		       96		      .byte.b	$90+(.LUM1/256)
     15  59bf		       29		      .byte.b	$20+(.LUM2/256)
     16  59c0		       69		      .byte.b	$60+(.LUM3/256)
     17  59c1
     18  59c1
     19  59c1
     20  59c1
     21  59c1
     22  59c1				   .LUM1      SET	.LUM1 + .STEP1
     23  59c1				   .LUM2      SET	.LUM2 + .STEP2
     24  59c1				   .LUM3      SET	.LUM3 + .STEP3
     13  59c1					      REPEND
     14  59c1		       96		      .byte.b	$90+(.LUM1/256)
     15  59c2		       29		      .byte.b	$20+(.LUM2/256)
     16  59c3		       69		      .byte.b	$60+(.LUM3/256)
     17  59c4
     18  59c4
     19  59c4
     20  59c4
     21  59c4
     22  59c4				   .LUM1      SET	.LUM1 + .STEP1
     23  59c4				   .LUM2      SET	.LUM2 + .STEP2
     24  59c4				   .LUM3      SET	.LUM3 + .STEP3
     13  59c4					      REPEND
     14  59c4		       96		      .byte.b	$90+(.LUM1/256)
     15  59c5		       29		      .byte.b	$20+(.LUM2/256)
     16  59c6		       69		      .byte.b	$60+(.LUM3/256)
     17  59c7
     18  59c7
     19  59c7
     20  59c7
     21  59c7
     22  59c7				   .LUM1      SET	.LUM1 + .STEP1
     23  59c7				   .LUM2      SET	.LUM2 + .STEP2
     24  59c7				   .LUM3      SET	.LUM3 + .STEP3
     13  59c7					      REPEND
     14  59c7		       97		      .byte.b	$90+(.LUM1/256)
     15  59c8		       29		      .byte.b	$20+(.LUM2/256)
     16  59c9		       69		      .byte.b	$60+(.LUM3/256)
     17  59ca
     18  59ca
     19  59ca
     20  59ca
     21  59ca
     22  59ca				   .LUM1      SET	.LUM1 + .STEP1
     23  59ca				   .LUM2      SET	.LUM2 + .STEP2
     24  59ca				   .LUM3      SET	.LUM3 + .STEP3
     13  59ca					      REPEND
     14  59ca		       97		      .byte.b	$90+(.LUM1/256)
     15  59cb		       29		      .byte.b	$20+(.LUM2/256)
     16  59cc		       69		      .byte.b	$60+(.LUM3/256)
     17  59cd
     18  59cd
     19  59cd
     20  59cd
     21  59cd
     22  59cd				   .LUM1      SET	.LUM1 + .STEP1
     23  59cd				   .LUM2      SET	.LUM2 + .STEP2
     24  59cd				   .LUM3      SET	.LUM3 + .STEP3
     13  59cd					      REPEND
     14  59cd		       97		      .byte.b	$90+(.LUM1/256)
     15  59ce		       29		      .byte.b	$20+(.LUM2/256)
     16  59cf		       69		      .byte.b	$60+(.LUM3/256)
     17  59d0
     18  59d0
     19  59d0
     20  59d0
     21  59d0
     22  59d0				   .LUM1      SET	.LUM1 + .STEP1
     23  59d0				   .LUM2      SET	.LUM2 + .STEP2
     24  59d0				   .LUM3      SET	.LUM3 + .STEP3
     13  59d0					      REPEND
     14  59d0		       97		      .byte.b	$90+(.LUM1/256)
     15  59d1		       29		      .byte.b	$20+(.LUM2/256)
     16  59d2		       69		      .byte.b	$60+(.LUM3/256)
     17  59d3
     18  59d3
     19  59d3
     20  59d3
     21  59d3
     22  59d3				   .LUM1      SET	.LUM1 + .STEP1
     23  59d3				   .LUM2      SET	.LUM2 + .STEP2
     24  59d3				   .LUM3      SET	.LUM3 + .STEP3
     13  59d3					      REPEND
     14  59d3		       97		      .byte.b	$90+(.LUM1/256)
     15  59d4		       29		      .byte.b	$20+(.LUM2/256)
     16  59d5		       69		      .byte.b	$60+(.LUM3/256)
     17  59d6
     18  59d6
     19  59d6
     20  59d6
     21  59d6
     22  59d6				   .LUM1      SET	.LUM1 + .STEP1
     23  59d6				   .LUM2      SET	.LUM2 + .STEP2
     24  59d6				   .LUM3      SET	.LUM3 + .STEP3
     13  59d6					      REPEND
     14  59d6		       97		      .byte.b	$90+(.LUM1/256)
     15  59d7		       29		      .byte.b	$20+(.LUM2/256)
     16  59d8		       69		      .byte.b	$60+(.LUM3/256)
     17  59d9
     18  59d9
     19  59d9
     20  59d9
     21  59d9
     22  59d9				   .LUM1      SET	.LUM1 + .STEP1
     23  59d9				   .LUM2      SET	.LUM2 + .STEP2
     24  59d9				   .LUM3      SET	.LUM3 + .STEP3
     13  59d9					      REPEND
     14  59d9		       97		      .byte.b	$90+(.LUM1/256)
     15  59da		       28		      .byte.b	$20+(.LUM2/256)
     16  59db		       69		      .byte.b	$60+(.LUM3/256)
     17  59dc
     18  59dc
     19  59dc
     20  59dc
     21  59dc
     22  59dc				   .LUM1      SET	.LUM1 + .STEP1
     23  59dc				   .LUM2      SET	.LUM2 + .STEP2
     24  59dc				   .LUM3      SET	.LUM3 + .STEP3
     13  59dc					      REPEND
     14  59dc		       97		      .byte.b	$90+(.LUM1/256)
     15  59dd		       28		      .byte.b	$20+(.LUM2/256)
     16  59de		       69		      .byte.b	$60+(.LUM3/256)
     17  59df
     18  59df
     19  59df
     20  59df
     21  59df
     22  59df				   .LUM1      SET	.LUM1 + .STEP1
     23  59df				   .LUM2      SET	.LUM2 + .STEP2
     24  59df				   .LUM3      SET	.LUM3 + .STEP3
     13  59df					      REPEND
     14  59df		       97		      .byte.b	$90+(.LUM1/256)
     15  59e0		       28		      .byte.b	$20+(.LUM2/256)
     16  59e1		       69		      .byte.b	$60+(.LUM3/256)
     17  59e2
     18  59e2
     19  59e2
     20  59e2
     21  59e2
     22  59e2				   .LUM1      SET	.LUM1 + .STEP1
     23  59e2				   .LUM2      SET	.LUM2 + .STEP2
     24  59e2				   .LUM3      SET	.LUM3 + .STEP3
     13  59e2					      REPEND
     14  59e2		       97		      .byte.b	$90+(.LUM1/256)
     15  59e3		       28		      .byte.b	$20+(.LUM2/256)
     16  59e4		       69		      .byte.b	$60+(.LUM3/256)
     17  59e5
     18  59e5
     19  59e5
     20  59e5
     21  59e5
     22  59e5				   .LUM1      SET	.LUM1 + .STEP1
     23  59e5				   .LUM2      SET	.LUM2 + .STEP2
     24  59e5				   .LUM3      SET	.LUM3 + .STEP3
     13  59e5					      REPEND
     14  59e5		       97		      .byte.b	$90+(.LUM1/256)
     15  59e6		       28		      .byte.b	$20+(.LUM2/256)
     16  59e7		       69		      .byte.b	$60+(.LUM3/256)
     17  59e8
     18  59e8
     19  59e8
     20  59e8
     21  59e8
     22  59e8				   .LUM1      SET	.LUM1 + .STEP1
     23  59e8				   .LUM2      SET	.LUM2 + .STEP2
     24  59e8				   .LUM3      SET	.LUM3 + .STEP3
     13  59e8					      REPEND
     14  59e8		       97		      .byte.b	$90+(.LUM1/256)
     15  59e9		       28		      .byte.b	$20+(.LUM2/256)
     16  59ea		       69		      .byte.b	$60+(.LUM3/256)
     17  59eb
     18  59eb
     19  59eb
     20  59eb
     21  59eb
     22  59eb				   .LUM1      SET	.LUM1 + .STEP1
     23  59eb				   .LUM2      SET	.LUM2 + .STEP2
     24  59eb				   .LUM3      SET	.LUM3 + .STEP3
     13  59eb					      REPEND
     14  59eb		       98		      .byte.b	$90+(.LUM1/256)
     15  59ec		       28		      .byte.b	$20+(.LUM2/256)
     16  59ed		       69		      .byte.b	$60+(.LUM3/256)
     17  59ee
     18  59ee
     19  59ee
     20  59ee
     21  59ee
     22  59ee				   .LUM1      SET	.LUM1 + .STEP1
     23  59ee				   .LUM2      SET	.LUM2 + .STEP2
     24  59ee				   .LUM3      SET	.LUM3 + .STEP3
     13  59ee					      REPEND
     14  59ee		       98		      .byte.b	$90+(.LUM1/256)
     15  59ef		       28		      .byte.b	$20+(.LUM2/256)
     16  59f0		       69		      .byte.b	$60+(.LUM3/256)
     17  59f1
     18  59f1
     19  59f1
     20  59f1
     21  59f1
     22  59f1				   .LUM1      SET	.LUM1 + .STEP1
     23  59f1				   .LUM2      SET	.LUM2 + .STEP2
     24  59f1				   .LUM3      SET	.LUM3 + .STEP3
     13  59f1					      REPEND
     14  59f1		       98		      .byte.b	$90+(.LUM1/256)
     15  59f2		       28		      .byte.b	$20+(.LUM2/256)
     16  59f3		       69		      .byte.b	$60+(.LUM3/256)
     17  59f4
     18  59f4
     19  59f4
     20  59f4
     21  59f4
     22  59f4				   .LUM1      SET	.LUM1 + .STEP1
     23  59f4				   .LUM2      SET	.LUM2 + .STEP2
     24  59f4				   .LUM3      SET	.LUM3 + .STEP3
     13  59f4					      REPEND
     14  59f4		       98		      .byte.b	$90+(.LUM1/256)
     15  59f5		       28		      .byte.b	$20+(.LUM2/256)
     16  59f6		       69		      .byte.b	$60+(.LUM3/256)
     17  59f7
     18  59f7
     19  59f7
     20  59f7
     21  59f7
     22  59f7				   .LUM1      SET	.LUM1 + .STEP1
     23  59f7				   .LUM2      SET	.LUM2 + .STEP2
     24  59f7				   .LUM3      SET	.LUM3 + .STEP3
     13  59f7					      REPEND
     14  59f7		       98		      .byte.b	$90+(.LUM1/256)
     15  59f8		       28		      .byte.b	$20+(.LUM2/256)
     16  59f9		       69		      .byte.b	$60+(.LUM3/256)
     17  59fa
     18  59fa
     19  59fa
     20  59fa
     21  59fa
     22  59fa				   .LUM1      SET	.LUM1 + .STEP1
     23  59fa				   .LUM2      SET	.LUM2 + .STEP2
     24  59fa				   .LUM3      SET	.LUM3 + .STEP3
     13  59fa					      REPEND
     14  59fa		       98		      .byte.b	$90+(.LUM1/256)
     15  59fb		       28		      .byte.b	$20+(.LUM2/256)
     16  59fc		       69		      .byte.b	$60+(.LUM3/256)
     17  59fd
     18  59fd
     19  59fd
     20  59fd
     21  59fd
     22  59fd				   .LUM1      SET	.LUM1 + .STEP1
     23  59fd				   .LUM2      SET	.LUM2 + .STEP2
     24  59fd				   .LUM3      SET	.LUM3 + .STEP3
     13  59fd					      REPEND
     14  59fd		       98		      .byte.b	$90+(.LUM1/256)
     15  59fe		       28		      .byte.b	$20+(.LUM2/256)
     16  59ff		       69		      .byte.b	$60+(.LUM3/256)
     17  5a00
     18  5a00
     19  5a00
     20  5a00
     21  5a00
     22  5a00				   .LUM1      SET	.LUM1 + .STEP1
     23  5a00				   .LUM2      SET	.LUM2 + .STEP2
     24  5a00				   .LUM3      SET	.LUM3 + .STEP3
     13  5a00					      REPEND
     14  5a00		       98		      .byte.b	$90+(.LUM1/256)
     15  5a01		       28		      .byte.b	$20+(.LUM2/256)
     16  5a02		       69		      .byte.b	$60+(.LUM3/256)
     17  5a03
     18  5a03
     19  5a03
     20  5a03
     21  5a03
     22  5a03				   .LUM1      SET	.LUM1 + .STEP1
     23  5a03				   .LUM2      SET	.LUM2 + .STEP2
     24  5a03				   .LUM3      SET	.LUM3 + .STEP3
     13  5a03					      REPEND
     14  5a03		       98		      .byte.b	$90+(.LUM1/256)
     15  5a04		       28		      .byte.b	$20+(.LUM2/256)
     16  5a05		       69		      .byte.b	$60+(.LUM3/256)
     17  5a06
     18  5a06
     19  5a06
     20  5a06
     21  5a06
     22  5a06				   .LUM1      SET	.LUM1 + .STEP1
     23  5a06				   .LUM2      SET	.LUM2 + .STEP2
     24  5a06				   .LUM3      SET	.LUM3 + .STEP3
     13  5a06					      REPEND
     14  5a06		       98		      .byte.b	$90+(.LUM1/256)
     15  5a07		       28		      .byte.b	$20+(.LUM2/256)
     16  5a08		       69		      .byte.b	$60+(.LUM3/256)
     17  5a09
     18  5a09
     19  5a09
     20  5a09
     21  5a09
     22  5a09				   .LUM1      SET	.LUM1 + .STEP1
     23  5a09				   .LUM2      SET	.LUM2 + .STEP2
     24  5a09				   .LUM3      SET	.LUM3 + .STEP3
     13  5a09					      REPEND
     14  5a09		       98		      .byte.b	$90+(.LUM1/256)
     15  5a0a		       28		      .byte.b	$20+(.LUM2/256)
     16  5a0b		       69		      .byte.b	$60+(.LUM3/256)
     17  5a0c
     18  5a0c
     19  5a0c
     20  5a0c
     21  5a0c
     22  5a0c				   .LUM1      SET	.LUM1 + .STEP1
     23  5a0c				   .LUM2      SET	.LUM2 + .STEP2
     24  5a0c				   .LUM3      SET	.LUM3 + .STEP3
     13  5a0c					      REPEND
     14  5a0c		       98		      .byte.b	$90+(.LUM1/256)
     15  5a0d		       28		      .byte.b	$20+(.LUM2/256)
     16  5a0e		       69		      .byte.b	$60+(.LUM3/256)
     17  5a0f
     18  5a0f
     19  5a0f
     20  5a0f
     21  5a0f
     22  5a0f				   .LUM1      SET	.LUM1 + .STEP1
     23  5a0f				   .LUM2      SET	.LUM2 + .STEP2
     24  5a0f				   .LUM3      SET	.LUM3 + .STEP3
     13  5a0f					      REPEND
     14  5a0f		       99		      .byte.b	$90+(.LUM1/256)
     15  5a10		       27		      .byte.b	$20+(.LUM2/256)
     16  5a11		       68		      .byte.b	$60+(.LUM3/256)
     17  5a12
     18  5a12
     19  5a12
     20  5a12
     21  5a12
     22  5a12				   .LUM1      SET	.LUM1 + .STEP1
     23  5a12				   .LUM2      SET	.LUM2 + .STEP2
     24  5a12				   .LUM3      SET	.LUM3 + .STEP3
     13  5a12					      REPEND
     14  5a12		       99		      .byte.b	$90+(.LUM1/256)
     15  5a13		       27		      .byte.b	$20+(.LUM2/256)
     16  5a14		       68		      .byte.b	$60+(.LUM3/256)
     17  5a15
     18  5a15
     19  5a15
     20  5a15
     21  5a15
     22  5a15				   .LUM1      SET	.LUM1 + .STEP1
     23  5a15				   .LUM2      SET	.LUM2 + .STEP2
     24  5a15				   .LUM3      SET	.LUM3 + .STEP3
     13  5a15					      REPEND
     14  5a15		       99		      .byte.b	$90+(.LUM1/256)
     15  5a16		       27		      .byte.b	$20+(.LUM2/256)
     16  5a17		       68		      .byte.b	$60+(.LUM3/256)
     17  5a18
     18  5a18
     19  5a18
     20  5a18
     21  5a18
     22  5a18				   .LUM1      SET	.LUM1 + .STEP1
     23  5a18				   .LUM2      SET	.LUM2 + .STEP2
     24  5a18				   .LUM3      SET	.LUM3 + .STEP3
     13  5a18					      REPEND
     14  5a18		       99		      .byte.b	$90+(.LUM1/256)
     15  5a19		       27		      .byte.b	$20+(.LUM2/256)
     16  5a1a		       68		      .byte.b	$60+(.LUM3/256)
     17  5a1b
     18  5a1b
     19  5a1b
     20  5a1b
     21  5a1b
     22  5a1b				   .LUM1      SET	.LUM1 + .STEP1
     23  5a1b				   .LUM2      SET	.LUM2 + .STEP2
     24  5a1b				   .LUM3      SET	.LUM3 + .STEP3
     13  5a1b					      REPEND
     14  5a1b		       99		      .byte.b	$90+(.LUM1/256)
     15  5a1c		       27		      .byte.b	$20+(.LUM2/256)
     16  5a1d		       68		      .byte.b	$60+(.LUM3/256)
     17  5a1e
     18  5a1e
     19  5a1e
     20  5a1e
     21  5a1e
     22  5a1e				   .LUM1      SET	.LUM1 + .STEP1
     23  5a1e				   .LUM2      SET	.LUM2 + .STEP2
     24  5a1e				   .LUM3      SET	.LUM3 + .STEP3
     13  5a1e					      REPEND
     14  5a1e		       99		      .byte.b	$90+(.LUM1/256)
     15  5a1f		       27		      .byte.b	$20+(.LUM2/256)
     16  5a20		       68		      .byte.b	$60+(.LUM3/256)
     17  5a21
     18  5a21
     19  5a21
     20  5a21
     21  5a21
     22  5a21				   .LUM1      SET	.LUM1 + .STEP1
     23  5a21				   .LUM2      SET	.LUM2 + .STEP2
     24  5a21				   .LUM3      SET	.LUM3 + .STEP3
     13  5a21					      REPEND
     14  5a21		       99		      .byte.b	$90+(.LUM1/256)
     15  5a22		       27		      .byte.b	$20+(.LUM2/256)
     16  5a23		       68		      .byte.b	$60+(.LUM3/256)
     17  5a24
     18  5a24
     19  5a24
     20  5a24
     21  5a24
     22  5a24				   .LUM1      SET	.LUM1 + .STEP1
     23  5a24				   .LUM2      SET	.LUM2 + .STEP2
     24  5a24				   .LUM3      SET	.LUM3 + .STEP3
     13  5a24					      REPEND
     14  5a24		       99		      .byte.b	$90+(.LUM1/256)
     15  5a25		       27		      .byte.b	$20+(.LUM2/256)
     16  5a26		       68		      .byte.b	$60+(.LUM3/256)
     17  5a27
     18  5a27
     19  5a27
     20  5a27
     21  5a27
     22  5a27				   .LUM1      SET	.LUM1 + .STEP1
     23  5a27				   .LUM2      SET	.LUM2 + .STEP2
     24  5a27				   .LUM3      SET	.LUM3 + .STEP3
     13  5a27					      REPEND
     14  5a27		       99		      .byte.b	$90+(.LUM1/256)
     15  5a28		       27		      .byte.b	$20+(.LUM2/256)
     16  5a29		       68		      .byte.b	$60+(.LUM3/256)
     17  5a2a
     18  5a2a
     19  5a2a
     20  5a2a
     21  5a2a
     22  5a2a				   .LUM1      SET	.LUM1 + .STEP1
     23  5a2a				   .LUM2      SET	.LUM2 + .STEP2
     24  5a2a				   .LUM3      SET	.LUM3 + .STEP3
     13  5a2a					      REPEND
     14  5a2a		       99		      .byte.b	$90+(.LUM1/256)
     15  5a2b		       27		      .byte.b	$20+(.LUM2/256)
     16  5a2c		       68		      .byte.b	$60+(.LUM3/256)
     17  5a2d
     18  5a2d
     19  5a2d
     20  5a2d
     21  5a2d
     22  5a2d				   .LUM1      SET	.LUM1 + .STEP1
     23  5a2d				   .LUM2      SET	.LUM2 + .STEP2
     24  5a2d				   .LUM3      SET	.LUM3 + .STEP3
     13  5a2d					      REPEND
     14  5a2d		       99		      .byte.b	$90+(.LUM1/256)
     15  5a2e		       27		      .byte.b	$20+(.LUM2/256)
     16  5a2f		       68		      .byte.b	$60+(.LUM3/256)
     17  5a30
     18  5a30
     19  5a30
     20  5a30
     21  5a30
     22  5a30				   .LUM1      SET	.LUM1 + .STEP1
     23  5a30				   .LUM2      SET	.LUM2 + .STEP2
     24  5a30				   .LUM3      SET	.LUM3 + .STEP3
     13  5a30					      REPEND
     14  5a30		       99		      .byte.b	$90+(.LUM1/256)
     15  5a31		       27		      .byte.b	$20+(.LUM2/256)
     16  5a32		       68		      .byte.b	$60+(.LUM3/256)
     17  5a33
     18  5a33
     19  5a33
     20  5a33
     21  5a33
     22  5a33				   .LUM1      SET	.LUM1 + .STEP1
     23  5a33				   .LUM2      SET	.LUM2 + .STEP2
     24  5a33				   .LUM3      SET	.LUM3 + .STEP3
     13  5a33					      REPEND
     14  5a33		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a34		       27		      .byte.b	$20+(.LUM2/256)
     16  5a35		       68		      .byte.b	$60+(.LUM3/256)
     17  5a36
     18  5a36
     19  5a36
     20  5a36
     21  5a36
     22  5a36				   .LUM1      SET	.LUM1 + .STEP1
     23  5a36				   .LUM2      SET	.LUM2 + .STEP2
     24  5a36				   .LUM3      SET	.LUM3 + .STEP3
     13  5a36					      REPEND
     14  5a36		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a37		       27		      .byte.b	$20+(.LUM2/256)
     16  5a38		       68		      .byte.b	$60+(.LUM3/256)
     17  5a39
     18  5a39
     19  5a39
     20  5a39
     21  5a39
     22  5a39				   .LUM1      SET	.LUM1 + .STEP1
     23  5a39				   .LUM2      SET	.LUM2 + .STEP2
     24  5a39				   .LUM3      SET	.LUM3 + .STEP3
     13  5a39					      REPEND
     14  5a39		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a3a		       27		      .byte.b	$20+(.LUM2/256)
     16  5a3b		       68		      .byte.b	$60+(.LUM3/256)
     17  5a3c
     18  5a3c
     19  5a3c
     20  5a3c
     21  5a3c
     22  5a3c				   .LUM1      SET	.LUM1 + .STEP1
     23  5a3c				   .LUM2      SET	.LUM2 + .STEP2
     24  5a3c				   .LUM3      SET	.LUM3 + .STEP3
     13  5a3c					      REPEND
     14  5a3c		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a3d		       27		      .byte.b	$20+(.LUM2/256)
     16  5a3e		       68		      .byte.b	$60+(.LUM3/256)
     17  5a3f
     18  5a3f
     19  5a3f
     20  5a3f
     21  5a3f
     22  5a3f				   .LUM1      SET	.LUM1 + .STEP1
     23  5a3f				   .LUM2      SET	.LUM2 + .STEP2
     24  5a3f				   .LUM3      SET	.LUM3 + .STEP3
     13  5a3f					      REPEND
     14  5a3f		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a40		       27		      .byte.b	$20+(.LUM2/256)
     16  5a41		       68		      .byte.b	$60+(.LUM3/256)
     17  5a42
     18  5a42
     19  5a42
     20  5a42
     21  5a42
     22  5a42				   .LUM1      SET	.LUM1 + .STEP1
     23  5a42				   .LUM2      SET	.LUM2 + .STEP2
     24  5a42				   .LUM3      SET	.LUM3 + .STEP3
     13  5a42					      REPEND
     14  5a42		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a43		       27		      .byte.b	$20+(.LUM2/256)
     16  5a44		       68		      .byte.b	$60+(.LUM3/256)
     17  5a45
     18  5a45
     19  5a45
     20  5a45
     21  5a45
     22  5a45				   .LUM1      SET	.LUM1 + .STEP1
     23  5a45				   .LUM2      SET	.LUM2 + .STEP2
     24  5a45				   .LUM3      SET	.LUM3 + .STEP3
     13  5a45					      REPEND
     14  5a45		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a46		       26		      .byte.b	$20+(.LUM2/256)
     16  5a47		       68		      .byte.b	$60+(.LUM3/256)
     17  5a48
     18  5a48
     19  5a48
     20  5a48
     21  5a48
     22  5a48				   .LUM1      SET	.LUM1 + .STEP1
     23  5a48				   .LUM2      SET	.LUM2 + .STEP2
     24  5a48				   .LUM3      SET	.LUM3 + .STEP3
     13  5a48					      REPEND
     14  5a48		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a49		       26		      .byte.b	$20+(.LUM2/256)
     16  5a4a		       68		      .byte.b	$60+(.LUM3/256)
     17  5a4b
     18  5a4b
     19  5a4b
     20  5a4b
     21  5a4b
     22  5a4b				   .LUM1      SET	.LUM1 + .STEP1
     23  5a4b				   .LUM2      SET	.LUM2 + .STEP2
     24  5a4b				   .LUM3      SET	.LUM3 + .STEP3
     13  5a4b					      REPEND
     14  5a4b		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a4c		       26		      .byte.b	$20+(.LUM2/256)
     16  5a4d		       68		      .byte.b	$60+(.LUM3/256)
     17  5a4e
     18  5a4e
     19  5a4e
     20  5a4e
     21  5a4e
     22  5a4e				   .LUM1      SET	.LUM1 + .STEP1
     23  5a4e				   .LUM2      SET	.LUM2 + .STEP2
     24  5a4e				   .LUM3      SET	.LUM3 + .STEP3
     13  5a4e					      REPEND
     14  5a4e		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a4f		       26		      .byte.b	$20+(.LUM2/256)
     16  5a50		       68		      .byte.b	$60+(.LUM3/256)
     17  5a51
     18  5a51
     19  5a51
     20  5a51
     21  5a51
     22  5a51				   .LUM1      SET	.LUM1 + .STEP1
     23  5a51				   .LUM2      SET	.LUM2 + .STEP2
     24  5a51				   .LUM3      SET	.LUM3 + .STEP3
     13  5a51					      REPEND
     14  5a51		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a52		       26		      .byte.b	$20+(.LUM2/256)
     16  5a53		       68		      .byte.b	$60+(.LUM3/256)
     17  5a54
     18  5a54
     19  5a54
     20  5a54
     21  5a54
     22  5a54				   .LUM1      SET	.LUM1 + .STEP1
     23  5a54				   .LUM2      SET	.LUM2 + .STEP2
     24  5a54				   .LUM3      SET	.LUM3 + .STEP3
     13  5a54					      REPEND
     14  5a54		       9a		      .byte.b	$90+(.LUM1/256)
     15  5a55		       26		      .byte.b	$20+(.LUM2/256)
     16  5a56		       68		      .byte.b	$60+(.LUM3/256)
     17  5a57
     18  5a57
     19  5a57
     20  5a57
     21  5a57
     22  5a57				   .LUM1      SET	.LUM1 + .STEP1
     23  5a57				   .LUM2      SET	.LUM2 + .STEP2
     24  5a57				   .LUM3      SET	.LUM3 + .STEP3
     13  5a57					      REPEND
     14  5a57		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a58		       26		      .byte.b	$20+(.LUM2/256)
     16  5a59		       68		      .byte.b	$60+(.LUM3/256)
     17  5a5a
     18  5a5a
     19  5a5a
     20  5a5a
     21  5a5a
     22  5a5a				   .LUM1      SET	.LUM1 + .STEP1
     23  5a5a				   .LUM2      SET	.LUM2 + .STEP2
     24  5a5a				   .LUM3      SET	.LUM3 + .STEP3
     13  5a5a					      REPEND
     14  5a5a		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a5b		       26		      .byte.b	$20+(.LUM2/256)
     16  5a5c		       68		      .byte.b	$60+(.LUM3/256)
     17  5a5d
     18  5a5d
     19  5a5d
     20  5a5d
     21  5a5d
     22  5a5d				   .LUM1      SET	.LUM1 + .STEP1
     23  5a5d				   .LUM2      SET	.LUM2 + .STEP2
     24  5a5d				   .LUM3      SET	.LUM3 + .STEP3
     13  5a5d					      REPEND
     14  5a5d		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a5e		       26		      .byte.b	$20+(.LUM2/256)
     16  5a5f		       68		      .byte.b	$60+(.LUM3/256)
     17  5a60
     18  5a60
     19  5a60
     20  5a60
     21  5a60
     22  5a60				   .LUM1      SET	.LUM1 + .STEP1
     23  5a60				   .LUM2      SET	.LUM2 + .STEP2
     24  5a60				   .LUM3      SET	.LUM3 + .STEP3
     13  5a60					      REPEND
     14  5a60		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a61		       26		      .byte.b	$20+(.LUM2/256)
     16  5a62		       68		      .byte.b	$60+(.LUM3/256)
     17  5a63
     18  5a63
     19  5a63
     20  5a63
     21  5a63
     22  5a63				   .LUM1      SET	.LUM1 + .STEP1
     23  5a63				   .LUM2      SET	.LUM2 + .STEP2
     24  5a63				   .LUM3      SET	.LUM3 + .STEP3
     13  5a63					      REPEND
     14  5a63		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a64		       26		      .byte.b	$20+(.LUM2/256)
     16  5a65		       68		      .byte.b	$60+(.LUM3/256)
     17  5a66
     18  5a66
     19  5a66
     20  5a66
     21  5a66
     22  5a66				   .LUM1      SET	.LUM1 + .STEP1
     23  5a66				   .LUM2      SET	.LUM2 + .STEP2
     24  5a66				   .LUM3      SET	.LUM3 + .STEP3
     13  5a66					      REPEND
     14  5a66		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a67		       26		      .byte.b	$20+(.LUM2/256)
     16  5a68		       68		      .byte.b	$60+(.LUM3/256)
     17  5a69
     18  5a69
     19  5a69
     20  5a69
     21  5a69
     22  5a69				   .LUM1      SET	.LUM1 + .STEP1
     23  5a69				   .LUM2      SET	.LUM2 + .STEP2
     24  5a69				   .LUM3      SET	.LUM3 + .STEP3
     13  5a69					      REPEND
     14  5a69		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a6a		       26		      .byte.b	$20+(.LUM2/256)
     16  5a6b		       68		      .byte.b	$60+(.LUM3/256)
     17  5a6c
     18  5a6c
     19  5a6c
     20  5a6c
     21  5a6c
     22  5a6c				   .LUM1      SET	.LUM1 + .STEP1
     23  5a6c				   .LUM2      SET	.LUM2 + .STEP2
     24  5a6c				   .LUM3      SET	.LUM3 + .STEP3
     13  5a6c					      REPEND
     14  5a6c		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a6d		       26		      .byte.b	$20+(.LUM2/256)
     16  5a6e		       68		      .byte.b	$60+(.LUM3/256)
     17  5a6f
     18  5a6f
     19  5a6f
     20  5a6f
     21  5a6f
     22  5a6f				   .LUM1      SET	.LUM1 + .STEP1
     23  5a6f				   .LUM2      SET	.LUM2 + .STEP2
     24  5a6f				   .LUM3      SET	.LUM3 + .STEP3
     13  5a6f					      REPEND
     14  5a6f		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a70		       26		      .byte.b	$20+(.LUM2/256)
     16  5a71		       68		      .byte.b	$60+(.LUM3/256)
     17  5a72
     18  5a72
     19  5a72
     20  5a72
     21  5a72
     22  5a72				   .LUM1      SET	.LUM1 + .STEP1
     23  5a72				   .LUM2      SET	.LUM2 + .STEP2
     24  5a72				   .LUM3      SET	.LUM3 + .STEP3
     13  5a72					      REPEND
     14  5a72		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a73		       26		      .byte.b	$20+(.LUM2/256)
     16  5a74		       68		      .byte.b	$60+(.LUM3/256)
     17  5a75
     18  5a75
     19  5a75
     20  5a75
     21  5a75
     22  5a75				   .LUM1      SET	.LUM1 + .STEP1
     23  5a75				   .LUM2      SET	.LUM2 + .STEP2
     24  5a75				   .LUM3      SET	.LUM3 + .STEP3
     13  5a75					      REPEND
     14  5a75		       9b		      .byte.b	$90+(.LUM1/256)
     15  5a76		       26		      .byte.b	$20+(.LUM2/256)
     16  5a77		       68		      .byte.b	$60+(.LUM3/256)
     17  5a78
     18  5a78
     19  5a78
     20  5a78
     21  5a78
     22  5a78				   .LUM1      SET	.LUM1 + .STEP1
     23  5a78				   .LUM2      SET	.LUM2 + .STEP2
     24  5a78				   .LUM3      SET	.LUM3 + .STEP3
     25  5a78					      REPEND
    254  5a78
------- FILE titleData.asm LEVEL 3 PASS 3
      0  5a78					      include	"titleData.asm"
      0  5a78					      OPTIONAL_PAGEBREAK	"0", 72
     10  5a78					      LIST	ON
      2  5a78				   COL_0
      3  5a78		       f0		      .byte.b	240	;R (71)
      4  5a79		       00		      .byte.b	0	;G
      5  5a7a		       00		      .byte.b	0	;B
      6  5a7b		       00		      .byte.b	0	;R (70)
      7  5a7c		       f0		      .byte.b	240	;G
      8  5a7d		       00		      .byte.b	0	;B
      9  5a7e		       00		      .byte.b	0	;R (69)
     10  5a7f		       f0		      .byte.b	240	;G
     11  5a80		       00		      .byte.b	0	;B
     12  5a81		       10		      .byte.b	16	;R (68)
     13  5a82		       f0		      .byte.b	240	;G
     14  5a83		       10		      .byte.b	16	;B
     15  5a84		       30		      .byte.b	48	;R (67)
     16  5a85		       d0		      .byte.b	208	;G
     17  5a86		       10		      .byte.b	16	;B
     18  5a87		       70		      .byte.b	112	;R (66)
     19  5a88		       90		      .byte.b	144	;G
     20  5a89		       10		      .byte.b	16	;B
     21  5a8a		       f0		      .byte.b	240	;R (65)
     22  5a8b		       10		      .byte.b	16	;G
     23  5a8c		       10		      .byte.b	16	;B
     24  5a8d		       f0		      .byte.b	240	;R (64)
     25  5a8e		       10		      .byte.b	16	;G
     26  5a8f		       10		      .byte.b	16	;B
     27  5a90		       10		      .byte.b	16	;R (63)
     28  5a91		       f0		      .byte.b	240	;G
     29  5a92		       10		      .byte.b	16	;B
     30  5a93		       10		      .byte.b	16	;R (62)
     31  5a94		       f0		      .byte.b	240	;G
     32  5a95		       10		      .byte.b	16	;B
     33  5a96		       10		      .byte.b	16	;R (61)
     34  5a97		       f0		      .byte.b	240	;G
     35  5a98		       10		      .byte.b	16	;B
     36  5a99		       10		      .byte.b	16	;R (60)
     37  5a9a		       f0		      .byte.b	240	;G
     38  5a9b		       10		      .byte.b	16	;B
     39  5a9c		       10		      .byte.b	16	;R (59)
     40  5a9d		       f0		      .byte.b	240	;G
     41  5a9e		       10		      .byte.b	16	;B
     42  5a9f		       30		      .byte.b	48	;R (58)
     43  5aa0		       d0		      .byte.b	208	;G
     44  5aa1		       10		      .byte.b	16	;B
     45  5aa2		       10		      .byte.b	16	;R (57)
     46  5aa3		       f0		      .byte.b	240	;G
     47  5aa4		       30		      .byte.b	48	;B
     48  5aa5		       50		      .byte.b	80	;R (56)
     49  5aa6		       f0		      .byte.b	240	;G
     50  5aa7		       30		      .byte.b	48	;B
     51  5aa8		       f0		      .byte.b	240	;R (55)
     52  5aa9		       90		      .byte.b	144	;G
     53  5aaa		       10		      .byte.b	16	;B
     54  5aab		       f0		      .byte.b	240	;R (54)
     55  5aac		       d0		      .byte.b	208	;G
     56  5aad		       10		      .byte.b	16	;B
     57  5aae		       d0		      .byte.b	208	;R (53)
     58  5aaf		       70		      .byte.b	112	;G
     59  5ab0		       30		      .byte.b	48	;B
     60  5ab1		       d0		      .byte.b	208	;R (52)
     61  5ab2		       30		      .byte.b	48	;G
     62  5ab3		       30		      .byte.b	48	;B
     63  5ab4		       50		      .byte.b	80	;R (51)
     64  5ab5		       b0		      .byte.b	176	;G
     65  5ab6		       b0		      .byte.b	176	;B
     66  5ab7		       70		      .byte.b	112	;R (50)
     67  5ab8		       10		      .byte.b	16	;G
     68  5ab9		       10		      .byte.b	16	;B
     69  5aba		       70		      .byte.b	112	;R (49)
     70  5abb		       90		      .byte.b	144	;G
     71  5abc		       90		      .byte.b	144	;B
     72  5abd		       10		      .byte.b	16	;R (48)
     73  5abe		       70		      .byte.b	112	;G
     74  5abf		       50		      .byte.b	80	;B
     75  5ac0		       10		      .byte.b	16	;R (47)
     76  5ac1		       f0		      .byte.b	240	;G
     77  5ac2		       90		      .byte.b	144	;B
     78  5ac3		       d0		      .byte.b	208	;R (46)
     79  5ac4		       f0		      .byte.b	240	;G
     80  5ac5		       d0		      .byte.b	208	;B
     81  5ac6		       90		      .byte.b	144	;R (45)
     82  5ac7		       f0		      .byte.b	240	;G
     83  5ac8		       90		      .byte.b	144	;B
     84  5ac9		       10		      .byte.b	16	;R (44)
     85  5aca		       f0		      .byte.b	240	;G
     86  5acb		       10		      .byte.b	16	;B
     87  5acc		       10		      .byte.b	16	;R (43)
     88  5acd		       f0		      .byte.b	240	;G
     89  5ace		       10		      .byte.b	16	;B
     90  5acf		       10		      .byte.b	16	;R (42)
     91  5ad0		       f0		      .byte.b	240	;G
     92  5ad1		       10		      .byte.b	16	;B
     93  5ad2		       10		      .byte.b	16	;R (41)
     94  5ad3		       10		      .byte.b	16	;G
     95  5ad4		       f0		      .byte.b	240	;B
     96  5ad5		       10		      .byte.b	16	;R (40)
     97  5ad6		       10		      .byte.b	16	;G
     98  5ad7		       f0		      .byte.b	240	;B
     99  5ad8		       10		      .byte.b	16	;R (39)
    100  5ad9		       10		      .byte.b	16	;G
    101  5ada		       f0		      .byte.b	240	;B
    102  5adb		       00		      .byte.b	0	;R (38)
    103  5adc		       00		      .byte.b	0	;G
    104  5add		       f0		      .byte.b	240	;B
    105  5ade		       00		      .byte.b	0	;R (37)
    106  5adf		       00		      .byte.b	0	;G
    107  5ae0		       f0		      .byte.b	240	;B
    108  5ae1		       f0		      .byte.b	240	;R (36)
    109  5ae2		       00		      .byte.b	0	;G
    110  5ae3		       f0		      .byte.b	240	;B
    111  5ae4		       20		      .byte.b	32	;R (35)
    112  5ae5		       00		      .byte.b	0	;G
    113  5ae6		       f0		      .byte.b	240	;B
    114  5ae7		       20		      .byte.b	32	;R (34)
    115  5ae8		       00		      .byte.b	0	;G
    116  5ae9		       f0		      .byte.b	240	;B
    117  5aea		       20		      .byte.b	32	;R (33)
    118  5aeb		       00		      .byte.b	0	;G
    119  5aec		       f0		      .byte.b	240	;B
    120  5aed		       20		      .byte.b	32	;R (32)
    121  5aee		       00		      .byte.b	0	;G
    122  5aef		       f0		      .byte.b	240	;B
    123  5af0		       f0		      .byte.b	240	;R (31)
    124  5af1		       00		      .byte.b	0	;G
    125  5af2		       f0		      .byte.b	240	;B
    126  5af3		       00		      .byte.b	0	;R (30)
    127  5af4		       00		      .byte.b	0	;G
    128  5af5		       f0		      .byte.b	240	;B
    129  5af6		       00		      .byte.b	0	;R (29)
    130  5af7		       00		      .byte.b	0	;G
    131  5af8		       f0		      .byte.b	240	;B
    132  5af9		       00		      .byte.b	0	;R (28)
    133  5afa		       00		      .byte.b	0	;G
    134  5afb		       f0		      .byte.b	240	;B
    135  5afc		       00		      .byte.b	0	;R (27)
    136  5afd		       00		      .byte.b	0	;G
    137  5afe		       f0		      .byte.b	240	;B
    138  5aff		       f0		      .byte.b	240	;R (26)
    139  5b00		       00		      .byte.b	0	;G
    140  5b01		       f0		      .byte.b	240	;B
    141  5b02		       20		      .byte.b	32	;R (25)
    142  5b03		       00		      .byte.b	0	;G
    143  5b04		       f0		      .byte.b	240	;B
    144  5b05		       20		      .byte.b	32	;R (24)
    145  5b06		       00		      .byte.b	0	;G
    146  5b07		       f0		      .byte.b	240	;B
    147  5b08		       20		      .byte.b	32	;R (23)
    148  5b09		       00		      .byte.b	0	;G
    149  5b0a		       f0		      .byte.b	240	;B
    150  5b0b		       20		      .byte.b	32	;R (22)
    151  5b0c		       00		      .byte.b	0	;G
    152  5b0d		       f0		      .byte.b	240	;B
    153  5b0e		       f0		      .byte.b	240	;R (21)
    154  5b0f		       00		      .byte.b	0	;G
    155  5b10		       f0		      .byte.b	240	;B
    156  5b11		       00		      .byte.b	0	;R (20)
    157  5b12		       00		      .byte.b	0	;G
    158  5b13		       f0		      .byte.b	240	;B
    159  5b14		       00		      .byte.b	0	;R (19)
    160  5b15		       00		      .byte.b	0	;G
    161  5b16		       f0		      .byte.b	240	;B
    162  5b17		       00		      .byte.b	0	;R (18)
    163  5b18		       00		      .byte.b	0	;G
    164  5b19		       f0		      .byte.b	240	;B
    165  5b1a		       00		      .byte.b	0	;R (17)
    166  5b1b		       00		      .byte.b	0	;G
    167  5b1c		       f0		      .byte.b	240	;B
    168  5b1d		       f0		      .byte.b	240	;R (16)
    169  5b1e		       00		      .byte.b	0	;G
    170  5b1f		       f0		      .byte.b	240	;B
    171  5b20		       f0		      .byte.b	240	;R (15)
    172  5b21		       00		      .byte.b	0	;G
    173  5b22		       00		      .byte.b	0	;B
    174  5b23		       00		      .byte.b	0	;R (14)
    175  5b24		       00		      .byte.b	0	;G
    176  5b25		       00		      .byte.b	0	;B
    177  5b26		       00		      .byte.b	0	;R (13)
    178  5b27		       00		      .byte.b	0	;G
    179  5b28		       00		      .byte.b	0	;B
    180  5b29		       00		      .byte.b	0	;R (12)
    181  5b2a		       00		      .byte.b	0	;G
    182  5b2b		       00		      .byte.b	0	;B
    183  5b2c		       00		      .byte.b	0	;R (11)
    184  5b2d		       00		      .byte.b	0	;G
    185  5b2e		       00		      .byte.b	0	;B
    186  5b2f		       00		      .byte.b	0	;R (10)
    187  5b30		       00		      .byte.b	0	;G
    188  5b31		       00		      .byte.b	0	;B
    189  5b32		       00		      .byte.b	0	;R (9)
    190  5b33		       00		      .byte.b	0	;G
    191  5b34		       00		      .byte.b	0	;B
    192  5b35		       00		      .byte.b	0	;R (8)
    193  5b36		       00		      .byte.b	0	;G
    194  5b37		       00		      .byte.b	0	;B
    195  5b38		       00		      .byte.b	0	;R (7)
    196  5b39		       00		      .byte.b	0	;G
    197  5b3a		       00		      .byte.b	0	;B
    198  5b3b		       00		      .byte.b	0	;R (6)
    199  5b3c		       00		      .byte.b	0	;G
    200  5b3d		       00		      .byte.b	0	;B
    201  5b3e		       00		      .byte.b	0	;R (5)
    202  5b3f		       00		      .byte.b	0	;G
    203  5b40		       00		      .byte.b	0	;B
    204  5b41		       00		      .byte.b	0	;R (4)
    205  5b42		       00		      .byte.b	0	;G
    206  5b43		       00		      .byte.b	0	;B
    207  5b44		       00		      .byte.b	0	;R (3)
    208  5b45		       00		      .byte.b	0	;G
    209  5b46		       00		      .byte.b	0	;B
    210  5b47		       00		      .byte.b	0	;R (2)
    211  5b48		       00		      .byte.b	0	;G
    212  5b49		       00		      .byte.b	0	;B
    213  5b4a		       00		      .byte.b	0	;R (1)
    214  5b4b		       00		      .byte.b	0	;G
    215  5b4c		       00		      .byte.b	0	;B
    216  5b4d		       00		      .byte.b	0	;R (0)
    217  5b4e		       00		      .byte.b	0	;G
    218  5b4f		       00		      .byte.b	0	;B
      0  5b50					      OPTIONAL_PAGEBREAK	"1", 72
     10  5b50					      LIST	ON
    220  5b50				   COL_1
    221  5b50		       e0		      .byte.b	224	;R (71)
    222  5b51		       1f		      .byte.b	31	;G
    223  5b52		       00		      .byte.b	0	;B
    224  5b53		       1f		      .byte.b	31	;R (70)
    225  5b54		       e0		      .byte.b	224	;G
    226  5b55		       00		      .byte.b	0	;B
    227  5b56		       0f		      .byte.b	15	;R (69)
    228  5b57		       f0		      .byte.b	240	;G
    229  5b58		       00		      .byte.b	0	;B
    230  5b59		       07		      .byte.b	7	;R (68)
    231  5b5a		       38		      .byte.b	56	;G
    232  5b5b		       00		      .byte.b	0	;B
    233  5b5c		       03		      .byte.b	3	;R (67)
    234  5b5d		       b4		      .byte.b	180	;G
    235  5b5e		       00		      .byte.b	0	;B
    236  5b5f		       41		      .byte.b	65	;R (66)
    237  5b60		       e6		      .byte.b	230	;G
    238  5b61		       40		      .byte.b	64	;B
    239  5b62		       f0		      .byte.b	240	;R (65)
    240  5b63		       ff		      .byte.b	255	;G
    241  5b64		       f0		      .byte.b	240	;B
    242  5b65		       f0		      .byte.b	240	;R (64)
    243  5b66		       ff		      .byte.b	255	;G
    244  5b67		       a0		      .byte.b	160	;B
    245  5b68		       ff		      .byte.b	255	;R (63)
    246  5b69		       e0		      .byte.b	224	;G
    247  5b6a		       e0		      .byte.b	224	;B
    248  5b6b		       ff		      .byte.b	255	;R (62)
    249  5b6c		       e0		      .byte.b	224	;G
    250  5b6d		       e0		      .byte.b	224	;B
    251  5b6e		       ff		      .byte.b	255	;R (61)
    252  5b6f		       e0		      .byte.b	224	;G
    253  5b70		       e0		      .byte.b	224	;B
    254  5b71		       2f		      .byte.b	47	;R (60)
    255  5b72		       30		      .byte.b	48	;G
    256  5b73		       60		      .byte.b	96	;B
    257  5b74		       e7		      .byte.b	231	;R (59)
    258  5b75		       f8		      .byte.b	248	;G
    259  5b76		       00		      .byte.b	0	;B
    260  5b77		       e3		      .byte.b	227	;R (58)
    261  5b78		       fc		      .byte.b	252	;G
    262  5b79		       00		      .byte.b	0	;B
    263  5b7a		       e1		      .byte.b	225	;R (57)
    264  5b7b		       fe		      .byte.b	254	;G
    265  5b7c		       00		      .byte.b	0	;B
    266  5b7d		       7e		      .byte.b	126	;R (56)
    267  5b7e		       e1		      .byte.b	225	;G
    268  5b7f		       00		      .byte.b	0	;B
    269  5b80		       ff		      .byte.b	255	;R (55)
    270  5b81		       e0		      .byte.b	224	;G
    271  5b82		       00		      .byte.b	0	;B
    272  5b83		       ff		      .byte.b	255	;R (54)
    273  5b84		       e0		      .byte.b	224	;G
    274  5b85		       00		      .byte.b	0	;B
    275  5b86		       ff		      .byte.b	255	;R (53)
    276  5b87		       c0		      .byte.b	192	;G
    277  5b88		       00		      .byte.b	0	;B
    278  5b89		       3f		      .byte.b	63	;R (52)
    279  5b8a		       c0		      .byte.b	192	;G
    280  5b8b		       c0		      .byte.b	192	;B
    281  5b8c		       24		      .byte.b	36	;R (51)
    282  5b8d		       c0		      .byte.b	192	;G
    283  5b8e		       c0		      .byte.b	192	;B
    284  5b8f		       2d		      .byte.b	45	;R (50)
    285  5b90		       c0		      .byte.b	192	;G
    286  5b91		       c0		      .byte.b	192	;B
    287  5b92		       3f		      .byte.b	63	;R (49)
    288  5b93		       ad		      .byte.b	173	;G
    289  5b94		       c0		      .byte.b	192	;B
    290  5b95		       3f		      .byte.b	63	;R (48)
    291  5b96		       ad		      .byte.b	173	;G
    292  5b97		       c0		      .byte.b	192	;B
    293  5b98		       3f		      .byte.b	63	;R (47)
    294  5b99		       29		      .byte.b	41	;G
    295  5b9a		       c0		      .byte.b	192	;B
    296  5b9b		       ff		      .byte.b	255	;R (46)
    297  5b9c		       e1		      .byte.b	225	;G
    298  5b9d		       c0		      .byte.b	192	;B
    299  5b9e		       ff		      .byte.b	255	;R (45)
    300  5b9f		       e1		      .byte.b	225	;G
    301  5ba0		       80		      .byte.b	128	;B
    302  5ba1		       77		      .byte.b	119	;R (44)
    303  5ba2		       e3		      .byte.b	227	;G
    304  5ba3		       08		      .byte.b	8	;B
    305  5ba4		       7b		      .byte.b	123	;R (43)
    306  5ba5		       e3		      .byte.b	227	;G
    307  5ba6		       00		      .byte.b	0	;B
    308  5ba7		       67		      .byte.b	103	;R (42)
    309  5ba8		       e7		      .byte.b	231	;G
    310  5ba9		       1c		      .byte.b	28	;B
    311  5baa		       7f		      .byte.b	127	;R (41)
    312  5bab		       7f		      .byte.b	127	;G
    313  5bac		       9c		      .byte.b	156	;B
    314  5bad		       7f		      .byte.b	127	;R (40)
    315  5bae		       7f		      .byte.b	127	;G
    316  5baf		       9c		      .byte.b	156	;B
    317  5bb0		       7f		      .byte.b	127	;R (39)
    318  5bb1		       7b		      .byte.b	123	;G
    319  5bb2		       9f		      .byte.b	159	;B
    320  5bb3		       7f		      .byte.b	127	;R (38)
    321  5bb4		       7f		      .byte.b	127	;G
    322  5bb5		       9f		      .byte.b	159	;B
    323  5bb6		       7f		      .byte.b	127	;R (37)
    324  5bb7		       7f		      .byte.b	127	;G
    325  5bb8		       bf		      .byte.b	191	;B
    326  5bb9		       ff		      .byte.b	255	;R (36)
    327  5bba		       7f		      .byte.b	127	;G
    328  5bbb		       bc		      .byte.b	188	;B
    329  5bbc		       7b		      .byte.b	123	;R (35)
    330  5bbd		       7f		      .byte.b	127	;G
    331  5bbe		       bc		      .byte.b	188	;B
    332  5bbf		       71		      .byte.b	113	;R (34)
    333  5bc0		       7f		      .byte.b	127	;G
    334  5bc1		       ae		      .byte.b	174	;B
    335  5bc2		       73		      .byte.b	115	;R (33)
    336  5bc3		       7f		      .byte.b	127	;G
    337  5bc4		       ac		      .byte.b	172	;B
    338  5bc5		       51		      .byte.b	81	;R (32)
    339  5bc6		       77		      .byte.b	119	;G
    340  5bc7		       a6		      .byte.b	166	;B
    341  5bc8		       d0		      .byte.b	208	;R (31)
    342  5bc9		       75		      .byte.b	117	;G
    343  5bca		       a5		      .byte.b	165	;B
    344  5bcb		       71		      .byte.b	113	;R (30)
    345  5bcc		       73		      .byte.b	115	;G
    346  5bcd		       82		      .byte.b	130	;B
    347  5bce		       7f		      .byte.b	127	;R (29)
    348  5bcf		       7f		      .byte.b	127	;G
    349  5bd0		       8f		      .byte.b	143	;B
    350  5bd1		       7f		      .byte.b	127	;R (28)
    351  5bd2		       7f		      .byte.b	127	;G
    352  5bd3		       8e		      .byte.b	142	;B
    353  5bd4		       7f		      .byte.b	127	;R (27)
    354  5bd5		       7f		      .byte.b	127	;G
    355  5bd6		       80		      .byte.b	128	;B
    356  5bd7		       ff		      .byte.b	255	;R (26)
    357  5bd8		       7f		      .byte.b	127	;G
    358  5bd9		       80		      .byte.b	128	;B
    359  5bda		       7f		      .byte.b	127	;R (25)
    360  5bdb		       7f		      .byte.b	127	;G
    361  5bdc		       80		      .byte.b	128	;B
    362  5bdd		       7f		      .byte.b	127	;R (24)
    363  5bde		       7f		      .byte.b	127	;G
    364  5bdf		       80		      .byte.b	128	;B
    365  5be0		       7f		      .byte.b	127	;R (23)
    366  5be1		       00		      .byte.b	0	;G
    367  5be2		       ff		      .byte.b	255	;B
    368  5be3		       7f		      .byte.b	127	;R (22)
    369  5be4		       2a		      .byte.b	42	;G
    370  5be5		       d5		      .byte.b	213	;B
    371  5be6		       ff		      .byte.b	255	;R (21)
    372  5be7		       55		      .byte.b	85	;G
    373  5be8		       aa		      .byte.b	170	;B
    374  5be9		       3f		      .byte.b	63	;R (20)
    375  5bea		       2a		      .byte.b	42	;G
    376  5beb		       d5		      .byte.b	213	;B
    377  5bec		       1f		      .byte.b	31	;R (19)
    378  5bed		       1f		      .byte.b	31	;G
    379  5bee		       e0		      .byte.b	224	;B
    380  5bef		       2f		      .byte.b	47	;R (18)
    381  5bf0		       0f		      .byte.b	15	;G
    382  5bf1		       f0		      .byte.b	240	;B
    383  5bf2		       27		      .byte.b	39	;R (17)
    384  5bf3		       07		      .byte.b	7	;G
    385  5bf4		       f8		      .byte.b	248	;B
    386  5bf5		       fb		      .byte.b	251	;R (16)
    387  5bf6		       03		      .byte.b	3	;G
    388  5bf7		       fc		      .byte.b	252	;B
    389  5bf8		       ff		      .byte.b	255	;R (15)
    390  5bf9		       01		      .byte.b	1	;G
    391  5bfa		       00		      .byte.b	0	;B
    392  5bfb		       01		      .byte.b	1	;R (14)
    393  5bfc		       01		      .byte.b	1	;G
    394  5bfd		       00		      .byte.b	0	;B
    395  5bfe		       00		      .byte.b	0	;R (13)
    396  5bff		       00		      .byte.b	0	;G
    397  5c00		       00		      .byte.b	0	;B
    398  5c01		       00		      .byte.b	0	;R (12)
    399  5c02		       00		      .byte.b	0	;G
    400  5c03		       00		      .byte.b	0	;B
    401  5c04		       00		      .byte.b	0	;R (11)
    402  5c05		       00		      .byte.b	0	;G
    403  5c06		       00		      .byte.b	0	;B
    404  5c07		       00		      .byte.b	0	;R (10)
    405  5c08		       00		      .byte.b	0	;G
    406  5c09		       00		      .byte.b	0	;B
    407  5c0a		       00		      .byte.b	0	;R (9)
    408  5c0b		       00		      .byte.b	0	;G
    409  5c0c		       00		      .byte.b	0	;B
    410  5c0d		       00		      .byte.b	0	;R (8)
    411  5c0e		       00		      .byte.b	0	;G
    412  5c0f		       00		      .byte.b	0	;B
    413  5c10		       00		      .byte.b	0	;R (7)
    414  5c11		       00		      .byte.b	0	;G
    415  5c12		       00		      .byte.b	0	;B
    416  5c13		       00		      .byte.b	0	;R (6)
    417  5c14		       00		      .byte.b	0	;G
    418  5c15		       00		      .byte.b	0	;B
    419  5c16		       00		      .byte.b	0	;R (5)
    420  5c17		       00		      .byte.b	0	;G
    421  5c18		       00		      .byte.b	0	;B
    422  5c19		       00		      .byte.b	0	;R (4)
    423  5c1a		       00		      .byte.b	0	;G
    424  5c1b		       00		      .byte.b	0	;B
    425  5c1c		       00		      .byte.b	0	;R (3)
    426  5c1d		       00		      .byte.b	0	;G
    427  5c1e		       00		      .byte.b	0	;B
    428  5c1f		       00		      .byte.b	0	;R (2)
    429  5c20		       00		      .byte.b	0	;G
    430  5c21		       00		      .byte.b	0	;B
    431  5c22		       00		      .byte.b	0	;R (1)
    432  5c23		       00		      .byte.b	0	;G
    433  5c24		       00		      .byte.b	0	;B
    434  5c25		       00		      .byte.b	0	;R (0)
    435  5c26		       00		      .byte.b	0	;G
    436  5c27		       00		      .byte.b	0	;B
      0  5c28					      OPTIONAL_PAGEBREAK	"2", 72
     10  5c28					      LIST	ON
    438  5c28				   COL_2
    439  5c28		       f8		      .byte.b	248	;R (71)
    440  5c29		       07		      .byte.b	7	;G
    441  5c2a		       00		      .byte.b	0	;B
    442  5c2b		       07		      .byte.b	7	;R (70)
    443  5c2c		       f8		      .byte.b	248	;G
    444  5c2d		       00		      .byte.b	0	;B
    445  5c2e		       0f		      .byte.b	15	;R (69)
    446  5c2f		       f0		      .byte.b	240	;G
    447  5c30		       00		      .byte.b	0	;B
    448  5c31		       1f		      .byte.b	31	;R (68)
    449  5c32		       e0		      .byte.b	224	;G
    450  5c33		       00		      .byte.b	0	;B
    451  5c34		       3f		      .byte.b	63	;R (67)
    452  5c35		       c0		      .byte.b	192	;G
    453  5c36		       00		      .byte.b	0	;B
    454  5c37		       7f		      .byte.b	127	;R (66)
    455  5c38		       80		      .byte.b	128	;G
    456  5c39		       00		      .byte.b	0	;B
    457  5c3a		       ff		      .byte.b	255	;R (65)
    458  5c3b		       00		      .byte.b	0	;G
    459  5c3c		       00		      .byte.b	0	;B
    460  5c3d		       fe		      .byte.b	254	;R (64)
    461  5c3e		       01		      .byte.b	1	;G
    462  5c3f		       00		      .byte.b	0	;B
    463  5c40		       01		      .byte.b	1	;R (63)
    464  5c41		       fe		      .byte.b	254	;G
    465  5c42		       00		      .byte.b	0	;B
    466  5c43		       03		      .byte.b	3	;R (62)
    467  5c44		       fc		      .byte.b	252	;G
    468  5c45		       00		      .byte.b	0	;B
    469  5c46		       07		      .byte.b	7	;R (61)
    470  5c47		       f8		      .byte.b	248	;G
    471  5c48		       00		      .byte.b	0	;B
    472  5c49		       0f		      .byte.b	15	;R (60)
    473  5c4a		       f0		      .byte.b	240	;G
    474  5c4b		       00		      .byte.b	0	;B
    475  5c4c		       1f		      .byte.b	31	;R (59)
    476  5c4d		       e0		      .byte.b	224	;G
    477  5c4e		       00		      .byte.b	0	;B
    478  5c4f		       3f		      .byte.b	63	;R (58)
    479  5c50		       c0		      .byte.b	192	;G
    480  5c51		       00		      .byte.b	0	;B
    481  5c52		       7f		      .byte.b	127	;R (57)
    482  5c53		       80		      .byte.b	128	;G
    483  5c54		       00		      .byte.b	0	;B
    484  5c55		       80		      .byte.b	128	;R (56)
    485  5c56		       7f		      .byte.b	127	;G
    486  5c57		       00		      .byte.b	0	;B
    487  5c58		       00		      .byte.b	0	;R (55)
    488  5c59		       ff		      .byte.b	255	;G
    489  5c5a		       00		      .byte.b	0	;B
    490  5c5b		       01		      .byte.b	1	;R (54)
    491  5c5c		       fe		      .byte.b	254	;G
    492  5c5d		       00		      .byte.b	0	;B
    493  5c5e		       03		      .byte.b	3	;R (53)
    494  5c5f		       fc		      .byte.b	252	;G
    495  5c60		       10		      .byte.b	16	;B
    496  5c61		       07		      .byte.b	7	;R (52)
    497  5c62		       b8		      .byte.b	184	;G
    498  5c63		       48		      .byte.b	72	;B
    499  5c64		       07		      .byte.b	7	;R (51)
    500  5c65		       b8		      .byte.b	184	;G
    501  5c66		       48		      .byte.b	72	;B
    502  5c67		       16		      .byte.b	22	;R (50)
    503  5c68		       68		      .byte.b	104	;G
    504  5c69		       89		      .byte.b	137	;B
    505  5c6a		       00		      .byte.b	0	;R (49)
    506  5c6b		       b8		      .byte.b	184	;G
    507  5c6c		       ff		      .byte.b	255	;B
    508  5c6d		       03		      .byte.b	3	;R (48)
    509  5c6e		       fb		      .byte.b	251	;G
    510  5c6f		       fc		      .byte.b	252	;B
    511  5c70		       03		      .byte.b	3	;R (47)
    512  5c71		       cf		      .byte.b	207	;G
    513  5c72		       fc		      .byte.b	252	;B
    514  5c73		       03		      .byte.b	3	;R (46)
    515  5c74		       c7		      .byte.b	199	;G
    516  5c75		       fc		      .byte.b	252	;B
    517  5c76		       03		      .byte.b	3	;R (45)
    518  5c77		       ef		      .byte.b	239	;G
    519  5c78		       fc		      .byte.b	252	;B
    520  5c79		       63		      .byte.b	99	;R (44)
    521  5c7a		       1b		      .byte.b	27	;G
    522  5c7b		       18		      .byte.b	24	;B
    523  5c7c		       f1		      .byte.b	241	;R (43)
    524  5c7d		       0f		      .byte.b	15	;G
    525  5c7e		       0e		      .byte.b	14	;B
    526  5c7f		       f0		      .byte.b	240	;R (42)
    527  5c80		       0a		      .byte.b	10	;G
    528  5c81		       0a		      .byte.b	10	;B
    529  5c82		       f1		      .byte.b	241	;R (41)
    530  5c83		       0f		      .byte.b	15	;G
    531  5c84		       0e		      .byte.b	14	;B
    532  5c85		       eb		      .byte.b	235	;R (40)
    533  5c86		       17		      .byte.b	23	;G
    534  5c87		       14		      .byte.b	20	;B
    535  5c88		       eb		      .byte.b	235	;R (39)
    536  5c89		       17		      .byte.b	23	;G
    537  5c8a		       14		      .byte.b	20	;B
    538  5c8b		       ff		      .byte.b	255	;R (38)
    539  5c8c		       06		      .byte.b	6	;G
    540  5c8d		       01		      .byte.b	1	;B
    541  5c8e		       ff		      .byte.b	255	;R (37)
    542  5c8f		       07		      .byte.b	7	;G
    543  5c90		       01		      .byte.b	1	;B
    544  5c91		       ff		      .byte.b	255	;R (36)
    545  5c92		       07		      .byte.b	7	;G
    546  5c93		       01		      .byte.b	1	;B
    547  5c94		       fe		      .byte.b	254	;R (35)
    548  5c95		       07		      .byte.b	7	;G
    549  5c96		       01		      .byte.b	1	;B
    550  5c97		       fe		      .byte.b	254	;R (34)
    551  5c98		       07		      .byte.b	7	;G
    552  5c99		       01		      .byte.b	1	;B
    553  5c9a		       ff		      .byte.b	255	;R (33)
    554  5c9b		       07		      .byte.b	7	;G
    555  5c9c		       00		      .byte.b	0	;B
    556  5c9d		       ff		      .byte.b	255	;R (32)
    557  5c9e		       07		      .byte.b	7	;G
    558  5c9f		       00		      .byte.b	0	;B
    559  5ca0		       ff		      .byte.b	255	;R (31)
    560  5ca1		       07		      .byte.b	7	;G
    561  5ca2		       00		      .byte.b	0	;B
    562  5ca3		       ff		      .byte.b	255	;R (30)
    563  5ca4		       07		      .byte.b	7	;G
    564  5ca5		       00		      .byte.b	0	;B
    565  5ca6		       ff		      .byte.b	255	;R (29)
    566  5ca7		       07		      .byte.b	7	;G
    567  5ca8		       00		      .byte.b	0	;B
    568  5ca9		       ff		      .byte.b	255	;R (28)
    569  5caa		       07		      .byte.b	7	;G
    570  5cab		       01		      .byte.b	1	;B
    571  5cac		       ff		      .byte.b	255	;R (27)
    572  5cad		       07		      .byte.b	7	;G
    573  5cae		       00		      .byte.b	0	;B
    574  5caf		       ff		      .byte.b	255	;R (26)
    575  5cb0		       07		      .byte.b	7	;G
    576  5cb1		       00		      .byte.b	0	;B
    577  5cb2		       ff		      .byte.b	255	;R (25)
    578  5cb3		       07		      .byte.b	7	;G
    579  5cb4		       00		      .byte.b	0	;B
    580  5cb5		       ff		      .byte.b	255	;R (24)
    581  5cb6		       07		      .byte.b	7	;G
    582  5cb7		       00		      .byte.b	0	;B
    583  5cb8		       ff		      .byte.b	255	;R (23)
    584  5cb9		       00		      .byte.b	0	;G
    585  5cba		       07		      .byte.b	7	;B
    586  5cbb		       9f		      .byte.b	159	;R (22)
    587  5cbc		       05		      .byte.b	5	;G
    588  5cbd		       02		      .byte.b	2	;B
    589  5cbe		       5f		      .byte.b	95	;R (21)
    590  5cbf		       02		      .byte.b	2	;G
    591  5cc0		       0d		      .byte.b	13	;B
    592  5cc1		       5f		      .byte.b	95	;R (20)
    593  5cc2		       21		      .byte.b	33	;G
    594  5cc3		       16		      .byte.b	22	;B
    595  5cc4		       5f		      .byte.b	95	;R (19)
    596  5cc5		       af		      .byte.b	175	;G
    597  5cc6		       00		      .byte.b	0	;B
    598  5cc7		       47		      .byte.b	71	;R (18)
    599  5cc8		       bb		      .byte.b	187	;G
    600  5cc9		       40		      .byte.b	64	;B
    601  5cca		       07		      .byte.b	7	;R (17)
    602  5ccb		       fb		      .byte.b	251	;G
    603  5ccc		       00		      .byte.b	0	;B
    604  5ccd		       93		      .byte.b	147	;R (16)
    605  5cce		       7f		      .byte.b	127	;G
    606  5ccf		       14		      .byte.b	20	;B
    607  5cd0		       fb		      .byte.b	251	;R (15)
    608  5cd1		       ff		      .byte.b	255	;G
    609  5cd2		       1e		      .byte.b	30	;B
    610  5cd3		       ff		      .byte.b	255	;R (14)
    611  5cd4		       fb		      .byte.b	251	;G
    612  5cd5		       1e		      .byte.b	30	;B
    613  5cd6		       ff		      .byte.b	255	;R (13)
    614  5cd7		       db		      .byte.b	219	;G
    615  5cd8		       3e		      .byte.b	62	;B
    616  5cd9		       7e		      .byte.b	126	;R (12)
    617  5cda		       5e		      .byte.b	94	;G
    618  5cdb		       7e		      .byte.b	126	;B
    619  5cdc		       5c		      .byte.b	92	;R (11)
    620  5cdd		       5c		      .byte.b	92	;G
    621  5cde		       5c		      .byte.b	92	;B
    622  5cdf		       0c		      .byte.b	12	;R (10)
    623  5ce0		       5c		      .byte.b	92	;G
    624  5ce1		       5c		      .byte.b	92	;B
    625  5ce2		       00		      .byte.b	0	;R (9)
    626  5ce3		       38		      .byte.b	56	;G
    627  5ce4		       38		      .byte.b	56	;B
    628  5ce5		       00		      .byte.b	0	;R (8)
    629  5ce6		       78		      .byte.b	120	;G
    630  5ce7		       18		      .byte.b	24	;B
    631  5ce8		       00		      .byte.b	0	;R (7)
    632  5ce9		       30		      .byte.b	48	;G
    633  5cea		       38		      .byte.b	56	;B
    634  5ceb		       00		      .byte.b	0	;R (6)
    635  5cec		       50		      .byte.b	80	;G
    636  5ced		       58		      .byte.b	88	;B
    637  5cee		       00		      .byte.b	0	;R (5)
    638  5cef		       20		      .byte.b	32	;G
    639  5cf0		       38		      .byte.b	56	;B
    640  5cf1		       78		      .byte.b	120	;R (4)
    641  5cf2		       78		      .byte.b	120	;G
    642  5cf3		       78		      .byte.b	120	;B
    643  5cf4		       b0		      .byte.b	176	;R (3)
    644  5cf5		       b0		      .byte.b	176	;G
    645  5cf6		       b0		      .byte.b	176	;B
    646  5cf7		       00		      .byte.b	0	;R (2)
    647  5cf8		       00		      .byte.b	0	;G
    648  5cf9		       00		      .byte.b	0	;B
    649  5cfa		       00		      .byte.b	0	;R (1)
    650  5cfb		       00		      .byte.b	0	;G
    651  5cfc		       00		      .byte.b	0	;B
    652  5cfd		       00		      .byte.b	0	;R (0)
    653  5cfe		       00		      .byte.b	0	;G
    654  5cff		       00		      .byte.b	0	;B
      0  5d00					      OPTIONAL_PAGEBREAK	"3", 72
     10  5d00					      LIST	ON
    656  5d00				   COL_3
    657  5d00		       70		      .byte.b	112	;R (71)
    658  5d01		       80		      .byte.b	128	;G
    659  5d02		       00		      .byte.b	0	;B
    660  5d03		       80		      .byte.b	128	;R (70)
    661  5d04		       70		      .byte.b	112	;G
    662  5d05		       00		      .byte.b	0	;B
    663  5d06		       00		      .byte.b	0	;R (69)
    664  5d07		       f0		      .byte.b	240	;G
    665  5d08		       00		      .byte.b	0	;B
    666  5d09		       00		      .byte.b	0	;R (68)
    667  5d0a		       f0		      .byte.b	240	;G
    668  5d0b		       00		      .byte.b	0	;B
    669  5d0c		       00		      .byte.b	0	;R (67)
    670  5d0d		       f0		      .byte.b	240	;G
    671  5d0e		       00		      .byte.b	0	;B
    672  5d0f		       00		      .byte.b	0	;R (66)
    673  5d10		       30		      .byte.b	48	;G
    674  5d11		       00		      .byte.b	0	;B
    675  5d12		       c0		      .byte.b	192	;R (65)
    676  5d13		       30		      .byte.b	48	;G
    677  5d14		       c0		      .byte.b	192	;B
    678  5d15		       d0		      .byte.b	208	;R (64)
    679  5d16		       20		      .byte.b	32	;G
    680  5d17		       c0		      .byte.b	192	;B
    681  5d18		       e0		      .byte.b	224	;R (63)
    682  5d19		       10		      .byte.b	16	;G
    683  5d1a		       c0		      .byte.b	192	;B
    684  5d1b		       c0		      .byte.b	192	;R (62)
    685  5d1c		       30		      .byte.b	48	;G
    686  5d1d		       c0		      .byte.b	192	;B
    687  5d1e		       c0		      .byte.b	192	;R (61)
    688  5d1f		       30		      .byte.b	48	;G
    689  5d20		       c0		      .byte.b	192	;B
    690  5d21		       c0		      .byte.b	192	;R (60)
    691  5d22		       30		      .byte.b	48	;G
    692  5d23		       c0		      .byte.b	192	;B
    693  5d24		       c0		      .byte.b	192	;R (59)
    694  5d25		       30		      .byte.b	48	;G
    695  5d26		       c0		      .byte.b	192	;B
    696  5d27		       c0		      .byte.b	192	;R (58)
    697  5d28		       30		      .byte.b	48	;G
    698  5d29		       c0		      .byte.b	192	;B
    699  5d2a		       c0		      .byte.b	192	;R (57)
    700  5d2b		       30		      .byte.b	48	;G
    701  5d2c		       c0		      .byte.b	192	;B
    702  5d2d		       f0		      .byte.b	240	;R (56)
    703  5d2e		       00		      .byte.b	0	;G
    704  5d2f		       c0		      .byte.b	192	;B
    705  5d30		       f0		      .byte.b	240	;R (55)
    706  5d31		       00		      .byte.b	0	;G
    707  5d32		       c0		      .byte.b	192	;B
    708  5d33		       e0		      .byte.b	224	;R (54)
    709  5d34		       10		      .byte.b	16	;G
    710  5d35		       c0		      .byte.b	192	;B
    711  5d36		       c0		      .byte.b	192	;R (53)
    712  5d37		       30		      .byte.b	48	;G
    713  5d38		       c0		      .byte.b	192	;B
    714  5d39		       c0		      .byte.b	192	;R (52)
    715  5d3a		       30		      .byte.b	48	;G
    716  5d3b		       e0		      .byte.b	224	;B
    717  5d3c		       c0		      .byte.b	192	;R (51)
    718  5d3d		       30		      .byte.b	48	;G
    719  5d3e		       e0		      .byte.b	224	;B
    720  5d3f		       c0		      .byte.b	192	;R (50)
    721  5d40		       30		      .byte.b	48	;G
    722  5d41		       d0		      .byte.b	208	;B
    723  5d42		       e0		      .byte.b	224	;R (49)
    724  5d43		       10		      .byte.b	16	;G
    725  5d44		       d0		      .byte.b	208	;B
    726  5d45		       e0		      .byte.b	224	;R (48)
    727  5d46		       10		      .byte.b	16	;G
    728  5d47		       d0		      .byte.b	208	;B
    729  5d48		       f0		      .byte.b	240	;R (47)
    730  5d49		       00		      .byte.b	0	;G
    731  5d4a		       c0		      .byte.b	192	;B
    732  5d4b		       f0		      .byte.b	240	;R (46)
    733  5d4c		       00		      .byte.b	0	;G
    734  5d4d		       c0		      .byte.b	192	;B
    735  5d4e		       e0		      .byte.b	224	;R (45)
    736  5d4f		       10		      .byte.b	16	;G
    737  5d50		       d0		      .byte.b	208	;B
    738  5d51		       c0		      .byte.b	192	;R (44)
    739  5d52		       30		      .byte.b	48	;G
    740  5d53		       d0		      .byte.b	208	;B
    741  5d54		       c0		      .byte.b	192	;R (43)
    742  5d55		       20		      .byte.b	32	;G
    743  5d56		       e0		      .byte.b	224	;B
    744  5d57		       d0		      .byte.b	208	;R (42)
    745  5d58		       20		      .byte.b	32	;G
    746  5d59		       e0		      .byte.b	224	;B
    747  5d5a		       d0		      .byte.b	208	;R (41)
    748  5d5b		       20		      .byte.b	32	;G
    749  5d5c		       e0		      .byte.b	224	;B
    750  5d5d		       f0		      .byte.b	240	;R (40)
    751  5d5e		       00		      .byte.b	0	;G
    752  5d5f		       c0		      .byte.b	192	;B
    753  5d60		       f0		      .byte.b	240	;R (39)
    754  5d61		       00		      .byte.b	0	;G
    755  5d62		       c0		      .byte.b	192	;B
    756  5d63		       f0		      .byte.b	240	;R (38)
    757  5d64		       00		      .byte.b	0	;G
    758  5d65		       c0		      .byte.b	192	;B
    759  5d66		       30		      .byte.b	48	;R (37)
    760  5d67		       00		      .byte.b	0	;G
    761  5d68		       c0		      .byte.b	192	;B
    762  5d69		       70		      .byte.b	112	;R (36)
    763  5d6a		       00		      .byte.b	0	;G
    764  5d6b		       c0		      .byte.b	192	;B
    765  5d6c		       b0		      .byte.b	176	;R (35)
    766  5d6d		       00		      .byte.b	0	;G
    767  5d6e		       c0		      .byte.b	192	;B
    768  5d6f		       f0		      .byte.b	240	;R (34)
    769  5d70		       80		      .byte.b	128	;G
    770  5d71		       40		      .byte.b	64	;B
    771  5d72		       f0		      .byte.b	240	;R (33)
    772  5d73		       80		      .byte.b	128	;G
    773  5d74		       00		      .byte.b	0	;B
    774  5d75		       70		      .byte.b	112	;R (32)
    775  5d76		       00		      .byte.b	0	;G
    776  5d77		       80		      .byte.b	128	;B
    777  5d78		       70		      .byte.b	112	;R (31)
    778  5d79		       00		      .byte.b	0	;G
    779  5d7a		       80		      .byte.b	128	;B
    780  5d7b		       70		      .byte.b	112	;R (30)
    781  5d7c		       00		      .byte.b	0	;G
    782  5d7d		       80		      .byte.b	128	;B
    783  5d7e		       70		      .byte.b	112	;R (29)
    784  5d7f		       00		      .byte.b	0	;G
    785  5d80		       80		      .byte.b	128	;B
    786  5d81		       70		      .byte.b	112	;R (28)
    787  5d82		       00		      .byte.b	0	;G
    788  5d83		       80		      .byte.b	128	;B
    789  5d84		       70		      .byte.b	112	;R (27)
    790  5d85		       00		      .byte.b	0	;G
    791  5d86		       80		      .byte.b	128	;B
    792  5d87		       f0		      .byte.b	240	;R (26)
    793  5d88		       00		      .byte.b	0	;G
    794  5d89		       80		      .byte.b	128	;B
    795  5d8a		       70		      .byte.b	112	;R (25)
    796  5d8b		       00		      .byte.b	0	;G
    797  5d8c		       80		      .byte.b	128	;B
    798  5d8d		       70		      .byte.b	112	;R (24)
    799  5d8e		       00		      .byte.b	0	;G
    800  5d8f		       80		      .byte.b	128	;B
    801  5d90		       70		      .byte.b	112	;R (23)
    802  5d91		       00		      .byte.b	0	;G
    803  5d92		       80		      .byte.b	128	;B
    804  5d93		       70		      .byte.b	112	;R (22)
    805  5d94		       00		      .byte.b	0	;G
    806  5d95		       80		      .byte.b	128	;B
    807  5d96		       e0		      .byte.b	224	;R (21)
    808  5d97		       00		      .byte.b	0	;G
    809  5d98		       80		      .byte.b	128	;B
    810  5d99		       70		      .byte.b	112	;R (20)
    811  5d9a		       00		      .byte.b	0	;G
    812  5d9b		       80		      .byte.b	128	;B
    813  5d9c		       70		      .byte.b	112	;R (19)
    814  5d9d		       00		      .byte.b	0	;G
    815  5d9e		       80		      .byte.b	128	;B
    816  5d9f		       70		      .byte.b	112	;R (18)
    817  5da0		       00		      .byte.b	0	;G
    818  5da1		       80		      .byte.b	128	;B
    819  5da2		       70		      .byte.b	112	;R (17)
    820  5da3		       00		      .byte.b	0	;G
    821  5da4		       80		      .byte.b	128	;B
    822  5da5		       f0		      .byte.b	240	;R (16)
    823  5da6		       00		      .byte.b	0	;G
    824  5da7		       90		      .byte.b	144	;B
    825  5da8		       f0		      .byte.b	240	;R (15)
    826  5da9		       00		      .byte.b	0	;G
    827  5daa		       20		      .byte.b	32	;B
    828  5dab		       70		      .byte.b	112	;R (14)
    829  5dac		       10		      .byte.b	16	;G
    830  5dad		       40		      .byte.b	64	;B
    831  5dae		       70		      .byte.b	112	;R (13)
    832  5daf		       30		      .byte.b	48	;G
    833  5db0		       00		      .byte.b	0	;B
    834  5db1		       00		      .byte.b	0	;R (12)
    835  5db2		       00		      .byte.b	0	;G
    836  5db3		       00		      .byte.b	0	;B
    837  5db4		       00		      .byte.b	0	;R (11)
    838  5db5		       00		      .byte.b	0	;G
    839  5db6		       00		      .byte.b	0	;B
    840  5db7		       00		      .byte.b	0	;R (10)
    841  5db8		       00		      .byte.b	0	;G
    842  5db9		       00		      .byte.b	0	;B
    843  5dba		       00		      .byte.b	0	;R (9)
    844  5dbb		       00		      .byte.b	0	;G
    845  5dbc		       00		      .byte.b	0	;B
    846  5dbd		       00		      .byte.b	0	;R (8)
    847  5dbe		       20		      .byte.b	32	;G
    848  5dbf		       00		      .byte.b	0	;B
    849  5dc0		       00		      .byte.b	0	;R (7)
    850  5dc1		       00		      .byte.b	0	;G
    851  5dc2		       00		      .byte.b	0	;B
    852  5dc3		       00		      .byte.b	0	;R (6)
    853  5dc4		       50		      .byte.b	80	;G
    854  5dc5		       00		      .byte.b	0	;B
    855  5dc6		       00		      .byte.b	0	;R (5)
    856  5dc7		       20		      .byte.b	32	;G
    857  5dc8		       00		      .byte.b	0	;B
    858  5dc9		       00		      .byte.b	0	;R (4)
    859  5dca		       c0		      .byte.b	192	;G
    860  5dcb		       00		      .byte.b	0	;B
    861  5dcc		       00		      .byte.b	0	;R (3)
    862  5dcd		       40		      .byte.b	64	;G
    863  5dce		       00		      .byte.b	0	;B
    864  5dcf		       00		      .byte.b	0	;R (2)
    865  5dd0		       20		      .byte.b	32	;G
    866  5dd1		       00		      .byte.b	0	;B
    867  5dd2		       00		      .byte.b	0	;R (1)
    868  5dd3		       90		      .byte.b	144	;G
    869  5dd4		       00		      .byte.b	0	;B
    870  5dd5		       00		      .byte.b	0	;R (0)
    871  5dd6		       00		      .byte.b	0	;G
    872  5dd7		       00		      .byte.b	0	;B
      0  5dd8					      OPTIONAL_PAGEBREAK	"4", 72
 PAGE BREAK INSERTED FOR  4
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f600
     10  5e00					      LIST	ON
    874  5e00				   COL_4
    875  5e00		       01		      .byte.b	1	;R (71)
    876  5e01		       fe		      .byte.b	254	;G
    877  5e02		       00		      .byte.b	0	;B
    878  5e03		       fe		      .byte.b	254	;R (70)
    879  5e04		       01		      .byte.b	1	;G
    880  5e05		       00		      .byte.b	0	;B
    881  5e06		       ff		      .byte.b	255	;R (69)
    882  5e07		       00		      .byte.b	0	;G
    883  5e08		       00		      .byte.b	0	;B
    884  5e09		       7f		      .byte.b	127	;R (68)
    885  5e0a		       80		      .byte.b	128	;G
    886  5e0b		       00		      .byte.b	0	;B
    887  5e0c		       3f		      .byte.b	63	;R (67)
    888  5e0d		       c0		      .byte.b	192	;G
    889  5e0e		       00		      .byte.b	0	;B
    890  5e0f		       00		      .byte.b	0	;R (66)
    891  5e10		       00		      .byte.b	0	;G
    892  5e11		       00		      .byte.b	0	;B
    893  5e12		       ff		      .byte.b	255	;R (65)
    894  5e13		       00		      .byte.b	0	;G
    895  5e14		       ff		      .byte.b	255	;B
    896  5e15		       9f		      .byte.b	159	;R (64)
    897  5e16		       00		      .byte.b	0	;G
    898  5e17		       9f		      .byte.b	159	;B
    899  5e18		       df		      .byte.b	223	;R (63)
    900  5e19		       00		      .byte.b	0	;G
    901  5e1a		       df		      .byte.b	223	;B
    902  5e1b		       01		      .byte.b	1	;R (62)
    903  5e1c		       00		      .byte.b	0	;G
    904  5e1d		       21		      .byte.b	33	;B
    905  5e1e		       7f		      .byte.b	127	;R (61)
    906  5e1f		       2c		      .byte.b	44	;G
    907  5e20		       2d		      .byte.b	45	;B
    908  5e21		       7f		      .byte.b	127	;R (60)
    909  5e22		       28		      .byte.b	40	;G
    910  5e23		       29		      .byte.b	41	;B
    911  5e24		       77		      .byte.b	119	;R (59)
    912  5e25		       38		      .byte.b	56	;G
    913  5e26		       31		      .byte.b	49	;B
    914  5e27		       7f		      .byte.b	127	;R (58)
    915  5e28		       38		      .byte.b	56	;G
    916  5e29		       39		      .byte.b	57	;B
    917  5e2a		       7f		      .byte.b	127	;R (57)
    918  5e2b		       18		      .byte.b	24	;G
    919  5e2c		       19		      .byte.b	25	;B
    920  5e2d		       7f		      .byte.b	127	;R (56)
    921  5e2e		       1c		      .byte.b	28	;G
    922  5e2f		       1d		      .byte.b	29	;B
    923  5e30		       6f		      .byte.b	111	;R (55)
    924  5e31		       00		      .byte.b	0	;G
    925  5e32		       0d		      .byte.b	13	;B
    926  5e33		       63		      .byte.b	99	;R (54)
    927  5e34		       1c		      .byte.b	28	;G
    928  5e35		       01		      .byte.b	1	;B
    929  5e36		       63		      .byte.b	99	;R (53)
    930  5e37		       1c		      .byte.b	28	;G
    931  5e38		       01		      .byte.b	1	;B
    932  5e39		       63		      .byte.b	99	;R (52)
    933  5e3a		       14		      .byte.b	20	;G
    934  5e3b		       09		      .byte.b	9	;B
    935  5e3c		       43		      .byte.b	67	;R (51)
    936  5e3d		       34		      .byte.b	52	;G
    937  5e3e		       09		      .byte.b	9	;B
    938  5e3f		       01		      .byte.b	1	;R (50)
    939  5e40		       7e		      .byte.b	126	;G
    940  5e41		       01		      .byte.b	1	;B
    941  5e42		       00		      .byte.b	0	;R (49)
    942  5e43		       ff		      .byte.b	255	;G
    943  5e44		       81		      .byte.b	129	;B
    944  5e45		       26		      .byte.b	38	;R (48)
    945  5e46		       d9		      .byte.b	217	;G
    946  5e47		       81		      .byte.b	129	;B
    947  5e48		       66		      .byte.b	102	;R (47)
    948  5e49		       99		      .byte.b	153	;G
    949  5e4a		       99		      .byte.b	153	;B
    950  5e4b		       47		      .byte.b	71	;R (46)
    951  5e4c		       08		      .byte.b	8	;G
    952  5e4d		       39		      .byte.b	57	;B
    953  5e4e		       47		      .byte.b	71	;R (45)
    954  5e4f		       08		      .byte.b	8	;G
    955  5e50		       19		      .byte.b	25	;B
    956  5e51		       47		      .byte.b	71	;R (44)
    957  5e52		       30		      .byte.b	48	;G
    958  5e53		       39		      .byte.b	57	;B
    959  5e54		       03		      .byte.b	3	;R (43)
    960  5e55		       50		      .byte.b	80	;G
    961  5e56		       5d		      .byte.b	93	;B
    962  5e57		       43		      .byte.b	67	;R (42)
    963  5e58		       20		      .byte.b	32	;G
    964  5e59		       3d		      .byte.b	61	;B
    965  5e5a		       7f		      .byte.b	127	;R (41)
    966  5e5b		       7c		      .byte.b	124	;G
    967  5e5c		       7d		      .byte.b	125	;B
    968  5e5d		       7f		      .byte.b	127	;R (40)
    969  5e5e		       38		      .byte.b	56	;G
    970  5e5f		       39		      .byte.b	57	;B
    971  5e60		       01		      .byte.b	1	;R (39)
    972  5e61		       00		      .byte.b	0	;G
    973  5e62		       01		      .byte.b	1	;B
    974  5e63		       ff		      .byte.b	255	;R (38)
    975  5e64		       00		      .byte.b	0	;G
    976  5e65		       ff		      .byte.b	255	;B
    977  5e66		       00		      .byte.b	0	;R (37)
    978  5e67		       00		      .byte.b	0	;G
    979  5e68		       ff		      .byte.b	255	;B
    980  5e69		       aa		      .byte.b	170	;R (36)
    981  5e6a		       00		      .byte.b	0	;G
    982  5e6b		       ff		      .byte.b	255	;B
    983  5e6c		       55		      .byte.b	85	;R (35)
    984  5e6d		       00		      .byte.b	0	;G
    985  5e6e		       ff		      .byte.b	255	;B
    986  5e6f		       ff		      .byte.b	255	;R (34)
    987  5e70		       55		      .byte.b	85	;G
    988  5e71		       aa		      .byte.b	170	;B
    989  5e72		       ff		      .byte.b	255	;R (33)
    990  5e73		       ff		      .byte.b	255	;G
    991  5e74		       00		      .byte.b	0	;B
    992  5e75		       ff		      .byte.b	255	;R (32)
    993  5e76		       ff		      .byte.b	255	;G
    994  5e77		       00		      .byte.b	0	;B
    995  5e78		       7f		      .byte.b	127	;R (31)
    996  5e79		       7f		      .byte.b	127	;G
    997  5e7a		       80		      .byte.b	128	;B
    998  5e7b		       3f		      .byte.b	63	;R (30)
    999  5e7c		       3f		      .byte.b	63	;G
   1000  5e7d		       c0		      .byte.b	192	;B
   1001  5e7e		       1f		      .byte.b	31	;R (29)
   1002  5e7f		       1f		      .byte.b	31	;G
   1003  5e80		       e0		      .byte.b	224	;B
   1004  5e81		       0f		      .byte.b	15	;R (28)
   1005  5e82		       0f		      .byte.b	15	;G
   1006  5e83		       f0		      .byte.b	240	;B
   1007  5e84		       07		      .byte.b	7	;R (27)
   1008  5e85		       07		      .byte.b	7	;G
   1009  5e86		       f8		      .byte.b	248	;B
   1010  5e87		       fb		      .byte.b	251	;R (26)
   1011  5e88		       03		      .byte.b	3	;G
   1012  5e89		       fc		      .byte.b	252	;B
   1013  5e8a		       80		      .byte.b	128	;R (25)
   1014  5e8b		       00		      .byte.b	0	;G
   1015  5e8c		       ff		      .byte.b	255	;B
   1016  5e8d		       80		      .byte.b	128	;R (24)
   1017  5e8e		       00		      .byte.b	0	;G
   1018  5e8f		       ff		      .byte.b	255	;B
   1019  5e90		       80		      .byte.b	128	;R (23)
   1020  5e91		       00		      .byte.b	0	;G
   1021  5e92		       ff		      .byte.b	255	;B
   1022  5e93		       80		      .byte.b	128	;R (22)
   1023  5e94		       00		      .byte.b	0	;G
   1024  5e95		       ff		      .byte.b	255	;B
   1025  5e96		       ff		      .byte.b	255	;R (21)
   1026  5e97		       00		      .byte.b	0	;G
   1027  5e98		       ff		      .byte.b	255	;B
   1028  5e99		       04		      .byte.b	4	;R (20)
   1029  5e9a		       00		      .byte.b	0	;G
   1030  5e9b		       ff		      .byte.b	255	;B
   1031  5e9c		       04		      .byte.b	4	;R (19)
   1032  5e9d		       00		      .byte.b	0	;G
   1033  5e9e		       ff		      .byte.b	255	;B
   1034  5e9f		       04		      .byte.b	4	;R (18)
   1035  5ea0		       00		      .byte.b	0	;G
   1036  5ea1		       ff		      .byte.b	255	;B
   1037  5ea2		       04		      .byte.b	4	;R (17)
   1038  5ea3		       00		      .byte.b	0	;G
   1039  5ea4		       ff		      .byte.b	255	;B
   1040  5ea5		       ff		      .byte.b	255	;R (16)
   1041  5ea6		       00		      .byte.b	0	;G
   1042  5ea7		       ff		      .byte.b	255	;B
   1043  5ea8		       ff		      .byte.b	255	;R (15)
   1044  5ea9		       00		      .byte.b	0	;G
   1045  5eaa		       00		      .byte.b	0	;B
   1046  5eab		       00		      .byte.b	0	;R (14)
   1047  5eac		       00		      .byte.b	0	;G
   1048  5ead		       00		      .byte.b	0	;B
   1049  5eae		       00		      .byte.b	0	;R (13)
   1050  5eaf		       00		      .byte.b	0	;G
   1051  5eb0		       00		      .byte.b	0	;B
   1052  5eb1		       00		      .byte.b	0	;R (12)
   1053  5eb2		       00		      .byte.b	0	;G
   1054  5eb3		       00		      .byte.b	0	;B
   1055  5eb4		       00		      .byte.b	0	;R (11)
   1056  5eb5		       00		      .byte.b	0	;G
   1057  5eb6		       00		      .byte.b	0	;B
   1058  5eb7		       00		      .byte.b	0	;R (10)
   1059  5eb8		       00		      .byte.b	0	;G
   1060  5eb9		       00		      .byte.b	0	;B
   1061  5eba		       00		      .byte.b	0	;R (9)
   1062  5ebb		       00		      .byte.b	0	;G
   1063  5ebc		       00		      .byte.b	0	;B
   1064  5ebd		       00		      .byte.b	0	;R (8)
   1065  5ebe		       00		      .byte.b	0	;G
   1066  5ebf		       00		      .byte.b	0	;B
   1067  5ec0		       00		      .byte.b	0	;R (7)
   1068  5ec1		       00		      .byte.b	0	;G
   1069  5ec2		       00		      .byte.b	0	;B
   1070  5ec3		       00		      .byte.b	0	;R (6)
   1071  5ec4		       00		      .byte.b	0	;G
   1072  5ec5		       00		      .byte.b	0	;B
   1073  5ec6		       00		      .byte.b	0	;R (5)
   1074  5ec7		       80		      .byte.b	128	;G
   1075  5ec8		       00		      .byte.b	0	;B
   1076  5ec9		       00		      .byte.b	0	;R (4)
   1077  5eca		       00		      .byte.b	0	;G
   1078  5ecb		       00		      .byte.b	0	;B
   1079  5ecc		       00		      .byte.b	0	;R (3)
   1080  5ecd		       00		      .byte.b	0	;G
   1081  5ece		       00		      .byte.b	0	;B
   1082  5ecf		       00		      .byte.b	0	;R (2)
   1083  5ed0		       00		      .byte.b	0	;G
   1084  5ed1		       00		      .byte.b	0	;B
   1085  5ed2		       00		      .byte.b	0	;R (1)
   1086  5ed3		       00		      .byte.b	0	;G
   1087  5ed4		       00		      .byte.b	0	;B
   1088  5ed5		       00		      .byte.b	0	;R (0)
   1089  5ed6		       00		      .byte.b	0	;G
   1090  5ed7		       00		      .byte.b	0	;B
      0  5ed8					      OPTIONAL_PAGEBREAK	"5", 72
 PAGE BREAK INSERTED FOR  5
 REQUESTED SIZE =  $48
 WASTED SPACE =  $28
 PAGEBREAK LOCATION =  $f700
     10  5f00					      LIST	ON
   1092  5f00				   COL_5
   1093  5f00		       01		      .byte.b	1	;R (71)
   1094  5f01		       00		      .byte.b	0	;G
   1095  5f02		       00		      .byte.b	0	;B
   1096  5f03		       00		      .byte.b	0	;R (70)
   1097  5f04		       01		      .byte.b	1	;G
   1098  5f05		       00		      .byte.b	0	;B
   1099  5f06		       00		      .byte.b	0	;R (69)
   1100  5f07		       01		      .byte.b	1	;G
   1101  5f08		       00		      .byte.b	0	;B
   1102  5f09		       01		      .byte.b	1	;R (68)
   1103  5f0a		       00		      .byte.b	0	;G
   1104  5f0b		       00		      .byte.b	0	;B
   1105  5f0c		       01		      .byte.b	1	;R (67)
   1106  5f0d		       00		      .byte.b	0	;G
   1107  5f0e		       00		      .byte.b	0	;B
   1108  5f0f		       00		      .byte.b	0	;R (66)
   1109  5f10		       00		      .byte.b	0	;G
   1110  5f11		       00		      .byte.b	0	;B
   1111  5f12		       01		      .byte.b	1	;R (65)
   1112  5f13		       00		      .byte.b	0	;G
   1113  5f14		       01		      .byte.b	1	;B
   1114  5f15		       01		      .byte.b	1	;R (64)
   1115  5f16		       00		      .byte.b	0	;G
   1116  5f17		       01		      .byte.b	1	;B
   1117  5f18		       01		      .byte.b	1	;R (63)
   1118  5f19		       00		      .byte.b	0	;G
   1119  5f1a		       01		      .byte.b	1	;B
   1120  5f1b		       39		      .byte.b	57	;R (62)
   1121  5f1c		       30		      .byte.b	48	;G
   1122  5f1d		       01		      .byte.b	1	;B
   1123  5f1e		       7d		      .byte.b	125	;R (61)
   1124  5f1f		       30		      .byte.b	48	;G
   1125  5f20		       41		      .byte.b	65	;B
   1126  5f21		       7d		      .byte.b	125	;R (60)
   1127  5f22		       30		      .byte.b	48	;G
   1128  5f23		       41		      .byte.b	65	;B
   1129  5f24		       45		      .byte.b	69	;R (59)
   1130  5f25		       00		      .byte.b	0	;G
   1131  5f26		       41		      .byte.b	65	;B
   1132  5f27		       45		      .byte.b	69	;R (58)
   1133  5f28		       00		      .byte.b	0	;G
   1134  5f29		       41		      .byte.b	65	;B
   1135  5f2a		       7d		      .byte.b	125	;R (57)
   1136  5f2b		       30		      .byte.b	48	;G
   1137  5f2c		       41		      .byte.b	65	;B
   1138  5f2d		       7d		      .byte.b	125	;R (56)
   1139  5f2e		       10		      .byte.b	16	;G
   1140  5f2f		       61		      .byte.b	97	;B
   1141  5f30		       39		      .byte.b	57	;R (55)
   1142  5f31		       00		      .byte.b	0	;G
   1143  5f32		       39		      .byte.b	57	;B
   1144  5f33		       01		      .byte.b	1	;R (54)
   1145  5f34		       00		      .byte.b	0	;G
   1146  5f35		       01		      .byte.b	1	;B
   1147  5f36		       39		      .byte.b	57	;R (53)
   1148  5f37		       30		      .byte.b	48	;G
   1149  5f38		       01		      .byte.b	1	;B
   1150  5f39		       7d		      .byte.b	125	;R (52)
   1151  5f3a		       30		      .byte.b	48	;G
   1152  5f3b		       41		      .byte.b	65	;B
   1153  5f3c		       7d		      .byte.b	125	;R (51)
   1154  5f3d		       30		      .byte.b	48	;G
   1155  5f3e		       41		      .byte.b	65	;B
   1156  5f3f		       45		      .byte.b	69	;R (50)
   1157  5f40		       00		      .byte.b	0	;G
   1158  5f41		       41		      .byte.b	65	;B
   1159  5f42		       45		      .byte.b	69	;R (49)
   1160  5f43		       00		      .byte.b	0	;G
   1161  5f44		       41		      .byte.b	65	;B
   1162  5f45		       7d		      .byte.b	125	;R (48)
   1163  5f46		       30		      .byte.b	48	;G
   1164  5f47		       41		      .byte.b	65	;B
   1165  5f48		       7d		      .byte.b	125	;R (47)
   1166  5f49		       10		      .byte.b	16	;G
   1167  5f4a		       61		      .byte.b	97	;B
   1168  5f4b		       39		      .byte.b	57	;R (46)
   1169  5f4c		       00		      .byte.b	0	;G
   1170  5f4d		       39		      .byte.b	57	;B
   1171  5f4e		       01		      .byte.b	1	;R (45)
   1172  5f4f		       00		      .byte.b	0	;G
   1173  5f50		       01		      .byte.b	1	;B
   1174  5f51		       29		      .byte.b	41	;R (44)
   1175  5f52		       20		      .byte.b	32	;G
   1176  5f53		       01		      .byte.b	1	;B
   1177  5f54		       7d		      .byte.b	125	;R (43)
   1178  5f55		       30		      .byte.b	48	;G
   1179  5f56		       41		      .byte.b	65	;B
   1180  5f57		       7d		      .byte.b	125	;R (42)
   1181  5f58		       30		      .byte.b	48	;G
   1182  5f59		       41		      .byte.b	65	;B
   1183  5f5a		       55		      .byte.b	85	;R (41)
   1184  5f5b		       10		      .byte.b	16	;G
   1185  5f5c		       41		      .byte.b	65	;B
   1186  5f5d		       55		      .byte.b	85	;R (40)
   1187  5f5e		       10		      .byte.b	16	;G
   1188  5f5f		       41		      .byte.b	65	;B
   1189  5f60		       7d		      .byte.b	125	;R (39)
   1190  5f61		       30		      .byte.b	48	;G
   1191  5f62		       41		      .byte.b	65	;B
   1192  5f63		       7d		      .byte.b	125	;R (38)
   1193  5f64		       10		      .byte.b	16	;G
   1194  5f65		       61		      .byte.b	97	;B
   1195  5f66		       7c		      .byte.b	124	;R (37)
   1196  5f67		       00		      .byte.b	0	;G
   1197  5f68		       7d		      .byte.b	125	;B
   1198  5f69		       01		      .byte.b	1	;R (36)
   1199  5f6a		       00		      .byte.b	0	;G
   1200  5f6b		       01		      .byte.b	1	;B
   1201  5f6c		       38		      .byte.b	56	;R (35)
   1202  5f6d		       30		      .byte.b	48	;G
   1203  5f6e		       01		      .byte.b	1	;B
   1204  5f6f		       7d		      .byte.b	125	;R (34)
   1205  5f70		       30		      .byte.b	48	;G
   1206  5f71		       41		      .byte.b	65	;B
   1207  5f72		       7d		      .byte.b	125	;R (33)
   1208  5f73		       31		      .byte.b	49	;G
   1209  5f74		       40		      .byte.b	64	;B
   1210  5f75		       45		      .byte.b	69	;R (32)
   1211  5f76		       01		      .byte.b	1	;G
   1212  5f77		       40		      .byte.b	64	;B
   1213  5f78		       45		      .byte.b	69	;R (31)
   1214  5f79		       01		      .byte.b	1	;G
   1215  5f7a		       40		      .byte.b	64	;B
   1216  5f7b		       7d		      .byte.b	125	;R (30)
   1217  5f7c		       31		      .byte.b	49	;G
   1218  5f7d		       40		      .byte.b	64	;B
   1219  5f7e		       7d		      .byte.b	125	;R (29)
   1220  5f7f		       11		      .byte.b	17	;G
   1221  5f80		       60		      .byte.b	96	;B
   1222  5f81		       39		      .byte.b	57	;R (28)
   1223  5f82		       01		      .byte.b	1	;G
   1224  5f83		       38		      .byte.b	56	;B
   1225  5f84		       01		      .byte.b	1	;R (27)
   1226  5f85		       01		      .byte.b	1	;G
   1227  5f86		       00		      .byte.b	0	;B
   1228  5f87		       45		      .byte.b	69	;R (26)
   1229  5f88		       01		      .byte.b	1	;G
   1230  5f89		       40		      .byte.b	64	;B
   1231  5f8a		       6c		      .byte.b	108	;R (25)
   1232  5f8b		       20		      .byte.b	32	;G
   1233  5f8c		       41		      .byte.b	65	;B
   1234  5f8d		       7c		      .byte.b	124	;R (24)
   1235  5f8e		       30		      .byte.b	48	;G
   1236  5f8f		       41		      .byte.b	65	;B
   1237  5f90		       38		      .byte.b	56	;R (23)
   1238  5f91		       30		      .byte.b	48	;G
   1239  5f92		       01		      .byte.b	1	;B
   1240  5f93		       7c		      .byte.b	124	;R (22)
   1241  5f94		       30		      .byte.b	48	;G
   1242  5f95		       41		      .byte.b	65	;B
   1243  5f96		       7d		      .byte.b	125	;R (21)
   1244  5f97		       10		      .byte.b	16	;G
   1245  5f98		       61		      .byte.b	97	;B
   1246  5f99		       7c		      .byte.b	124	;R (20)
   1247  5f9a		       00		      .byte.b	0	;G
   1248  5f9b		       7d		      .byte.b	125	;B
   1249  5f9c		       00		      .byte.b	0	;R (19)
   1250  5f9d		       00		      .byte.b	0	;G
   1251  5f9e		       01		      .byte.b	1	;B
   1252  5f9f		       38		      .byte.b	56	;R (18)
   1253  5fa0		       30		      .byte.b	48	;G
   1254  5fa1		       01		      .byte.b	1	;B
   1255  5fa2		       7c		      .byte.b	124	;R (17)
   1256  5fa3		       30		      .byte.b	48	;G
   1257  5fa4		       41		      .byte.b	65	;B
   1258  5fa5		       7d		      .byte.b	125	;R (16)
   1259  5fa6		       30		      .byte.b	48	;G
   1260  5fa7		       41		      .byte.b	65	;B
   1261  5fa8		       45		      .byte.b	69	;R (15)
   1262  5fa9		       00		      .byte.b	0	;G
   1263  5faa		       40		      .byte.b	64	;B
   1264  5fab		       44		      .byte.b	68	;R (14)
   1265  5fac		       00		      .byte.b	0	;G
   1266  5fad		       40		      .byte.b	64	;B
   1267  5fae		       7c		      .byte.b	124	;R (13)
   1268  5faf		       30		      .byte.b	48	;G
   1269  5fb0		       40		      .byte.b	64	;B
   1270  5fb1		       7c		      .byte.b	124	;R (12)
   1271  5fb2		       10		      .byte.b	16	;G
   1272  5fb3		       60		      .byte.b	96	;B
   1273  5fb4		       38		      .byte.b	56	;R (11)
   1274  5fb5		       00		      .byte.b	0	;G
   1275  5fb6		       38		      .byte.b	56	;B
   1276  5fb7		       00		      .byte.b	0	;R (10)
   1277  5fb8		       00		      .byte.b	0	;G
   1278  5fb9		       00		      .byte.b	0	;B
   1279  5fba		       08		      .byte.b	8	;R (9)
   1280  5fbb		       00		      .byte.b	0	;G
   1281  5fbc		       00		      .byte.b	0	;B
   1282  5fbd		       5c		      .byte.b	92	;R (8)
   1283  5fbe		       10		      .byte.b	16	;G
   1284  5fbf		       40		      .byte.b	64	;B
   1285  5fc0		       5c		      .byte.b	92	;R (7)
   1286  5fc1		       10		      .byte.b	16	;G
   1287  5fc2		       40		      .byte.b	64	;B
   1288  5fc3		       54		      .byte.b	84	;R (6)
   1289  5fc4		       10		      .byte.b	16	;G
   1290  5fc5		       40		      .byte.b	64	;B
   1291  5fc6		       54		      .byte.b	84	;R (5)
   1292  5fc7		       10		      .byte.b	16	;G
   1293  5fc8		       40		      .byte.b	64	;B
   1294  5fc9		       74		      .byte.b	116	;R (4)
   1295  5fca		       00		      .byte.b	0	;G
   1296  5fcb		       70		      .byte.b	112	;B
   1297  5fcc		       74		      .byte.b	116	;R (3)
   1298  5fcd		       00		      .byte.b	0	;G
   1299  5fce		       74		      .byte.b	116	;B
   1300  5fcf		       20		      .byte.b	32	;R (2)
   1301  5fd0		       00		      .byte.b	0	;G
   1302  5fd1		       20		      .byte.b	32	;B
   1303  5fd2		       00		      .byte.b	0	;R (1)
   1304  5fd3		       00		      .byte.b	0	;G
   1305  5fd4		       00		      .byte.b	0	;B
   1306  5fd5		       00		      .byte.b	0	;R (0)
   1307  5fd6		       00		      .byte.b	0	;G
   1308  5fd7		       00		      .byte.b	0	;B
------- FILE titleScreen.asm
    256  5fd8							;    include "pizza.asm"
    257  5fd8
      0  5fd8					      CHECK_BANK_SIZE	"TITLESCREEN"
      1  5fd8		       07 d8	   .TEMP      =	* - BANK_START
 TITLESCREEN (2K) SIZE =  $7d8 , FREE= $28
      2  5fd8					      ECHO	"TITLESCREEN", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  5fd8				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  5fd8				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  5fd8				  -	      ERR
      6  5fd8					      endif
------- FILE ./sokoboo.asm
------- FILE levelScreen.asm LEVEL 2 PASS 3
      0  5fd8					      include	"levelScreen.asm"
      0  5fd8					      NEWBANK	LEVELSCREEN
      1  67e0 ????				      SEG	LEVELSCREEN
      2  6000					      ORG	ORIGIN
      3  6000					      RORG	$F000
      4  6000				   BANK_START SET	*
      5  6000				   LEVELSCREEN SET	ORIGIN / 2048
      6  6000				   ORIGIN     SET	ORIGIN + 2048
      7  6000				   _CURRENT_BANK SET	LEVELSCREEN
      2  6000
      3  6000		       00 12	   TOPHAT     =	18
      4  6000		       00 20	   BIGDIG_SIZE =	32
      5  6000
      6  6000
      0  6000					      DEFINE_SUBROUTINE	SelectionScreenInit
      1  6000		       00 0c	   BANK_SelectionScreenInit =	_CURRENT_BANK
      2  6000					      SUBROUTINE
      3  6000				   SelectionScreenInit
      8  6000
      9  6000		       a9 00		      lda	#%0
     10  6002		       85 44		      sta	NUSIZ0
     11  6004		       85 45		      sta	NUSIZ1
     12  6006		       85 65		      sta	VDELP0
     13  6008		       85 66		      sta	VDELP1
     14  600a		       85 4b		      sta	REFP0
     15  600c		       85 4c		      sta	REFP1
     16  600e							;		  sta COLUBK
     17  600e		       85 59		      sta	AUDV0
     18  6010		       85 5a		      sta	AUDV1	; turn off music while levels init
     19  6012
     20  6012		       a9 14		      lda	#20
     21  6014		       85 e6		      sta	digitick
     22  6016
     23  6016		       a9 f0		      lda	#%11110000
     24  6018		       85 60		      sta	HMP0
     25  601a
     26  601a		       a9 d0		      lda	#%11010000
     27  601c		       85 61		      sta	HMP1
     28  601e
     29  601e
     30  601e		       a9 04		      lda	#%100
     31  6020		       85 4a		      sta	CTRLPF
     32  6022
     33  6022		       a6 80		      ldx	Platform
     34  6024							;		  lda PlatformAdjustColour,x
      0  6024					      NEXT_RANDOM
      1  6024
      2  6024		       a5 c7		      lda	rnd
      3  6026		       4a		      lsr
      4  6027					      IFCONST	rndHi
      5  6027		       66 c6		      ror	rndHi
      6  6029					      ENDIF
      7  6029		       90 02		      bcc	.skipEOR
      8  602b		       49 b4		      eor	#RND_EOR_VAL
      9  602d				   .skipEOR
     10  602d		       85 c7		      sta	rnd
     36  602f		       29 f0		      and	#$F0
     37  6031		       85 f2		      sta	adjustColour
     38  6033							;		  lda PlatformWallColour,x
      0  6033					      NEXT_RANDOM
      1  6033
      2  6033		       a5 c7		      lda	rnd
      3  6035		       4a		      lsr
      4  6036					      IFCONST	rndHi
      5  6036		       66 c6		      ror	rndHi
      6  6038					      ENDIF
      7  6038		       90 02		      bcc	.skipEOR
      8  603a		       49 b4		      eor	#RND_EOR_VAL
      9  603c				   .skipEOR
     10  603c		       85 c7		      sta	rnd
     40  603e		       29 f0		      and	#$F0
     41  6040		       d0 00		      bne	n00
     42  6042		       09 02	   n00	      ora	#2
     43  6044		       85 f1		      sta	wallColour
     44  6046
     45  6046		       85 46		      sta	COLUP0
     46  6048		       85 47		      sta	COLUP1
     47  604a
     48  604a		       60		      rts
     49  604b
     50  604b				   PlatformWallColour
     51  604b		       f0 f0 22 22	      .byte.b	$F0, $F0, $22, $22
     52  604f				   PlatformAdjustColour
     53  604f		       00 00 c0 c0	      .byte.b	0,0, $c0, $c0
     54  6053
      0  6053					      DEFINE_SUBROUTINE	LevelScreen
      1  6053		       00 0c	   BANK_LevelScreen =	_CURRENT_BANK
      2  6053					      SUBROUTINE
      3  6053				   LevelScreen
     56  6053
     57  6053		       85 ed		      sta	selector
     58  6055
     59  6055							;    lda #%10
     60  6055							;    sta VBLANK
     61  6055
     62  6055
     63  6055		       20 00 f0 	      jsr	SelectionScreenInit
     64  6058
     65  6058		       a9 ff		      lda	#-1
     66  605a		       85 ea		      sta	endwait
     67  605c
     68  605c		       a9 ff		      lda	#-1
     69  605e		       85 e7		      sta	targetDigit
     70  6060		       85 e8		      sta	targetDigit+1
     71  6062		       85 e9		      sta	targetDigit+2
     72  6064
     73  6064		       a9 00		      lda	#0
     74  6066		       85 e3		      sta	digit
     75  6068		       85 e4		      sta	digit+1
     76  606a		       85 e5		      sta	digit+2
     77  606c		       85 ee		      sta	walkSpeed
     78  606e
     79  606e							; convert to 3 digits decimal
     80  606e		       20 10 f3 	      jsr	dd3
     81  6071
     82  6071		       20 36 f3 	      jsr	fixWalkFrame
     83  6074
      0  6074					      RESYNC		; uses overlay
      1  6074
      2  6074		       a9 02		      lda	#%10
      3  6076		       85 41		      sta	VBLANK
      4  6078
      5  6078		       a2 08		      ldx	#8
      6  607a				   .loopResync
      0  607a					      VERTICAL_SYNC
      1  607a		       a9 0e		      lda	#%1110
      2  607c		       85 42	   .VSLP1     sta	WSYNC
      3  607e		       85 40		      sta	VSYNC
      4  6080		       4a		      lsr
      5  6081		       d0 f9		      bne	.VSLP1
      8  6083
      9  6083		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  6085		       a5 80		      lda	Platform
     11  6087		       49 02		      eor	#PAL_50
     12  6089		       d0 02		      bne	.ntsc
     13  608b		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  608d				   .ntsc
     15  608d				   .loopWait
     16  608d		       85 42		      sta	WSYNC
     17  608f		       85 42		      sta	WSYNC
     18  6091		       88		      dey
     19  6092		       d0 f9		      bne	.loopWait
     20  6094		       ca		      dex
     21  6095		       d0 e3		      bne	.loopResync
     85  6097
     86  6097		       a5 ed		      lda	selector
     87  6099		       f0 0c		      beq	RestartFrameX
     88  609b
     89  609b		       a5 e7		      lda	targetDigit
     90  609d		       85 e3		      sta	digit
     91  609f		       a5 e9		      lda	targetDigit+2
     92  60a1		       85 e5		      sta	digit+2
     93  60a3		       a5 e8		      lda	targetDigit+1
     94  60a5		       85 e4		      sta	digit+1
     95  60a7
     96  60a7
     97  60a7				   RestartFrameX
     98  60a7		       a9 0e		      lda	#%1110	; VSYNC ON
     99  60a9		       85 42	   .loopVSync3 sta	WSYNC
    100  60ab		       85 40		      sta	VSYNC
    101  60ad		       4a		      lsr
    102  60ae		       d0 f9		      bne	.loopVSync3	; branch until VYSNC has been reset
    103  60b0
    104  60b0		       a6 80		      ldx	Platform
    105  60b2		       bd b3 f3 	      lda	VBlankTime2x,x
    106  60b5		       8d 96 02 	      sta	TIM64T
    107  60b8
    108  60b8		       a9 02		      lda	#2
    109  60ba		       85 41		      sta	VBLANK
    110  60bc		       a2 25		      ldx	#37
    111  60be		       85 42	   toplines   sta	WSYNC
    112  60c0		       ca		      dex
    113  60c1		       d0 fb		      bne	toplines
    114  60c3		       86 41		      stx	VBLANK
    115  60c5
    116  60c5		       a9 00		      lda	#0
    117  60c7		       85 49		      sta	COLUBK
    118  60c9
    119  60c9		       ad 84 02    topsync    lda	INTIM
    120  60cc		       d0 fb		      bne	topsync
    121  60ce
    122  60ce							;		  ldx Platform
    123  60ce							;		  ldy VBlankTime2x,x
    124  60ce							;		  sty TIM64T
    125  60ce
    126  60ce		       a5 e5		      lda	digit+2	; hundreds
    127  60d0		       0a		      asl
    128  60d1		       aa		      tax
    129  60d2		       bd e7 f3 	      lda	DIGITHUND,x
    130  60d5		       85 eb		      sta	digitHundreds
    131  60d7		       bd e8 f3 	      lda	DIGITHUND+1,x
    132  60da		       85 ec		      sta	digitHundreds+1
    133  60dc
    134  60dc		       a5 e4		      lda	digit+1	; tens
    135  60de		       0a		      asl
    136  60df		       aa		      tax
    137  60e0		       bd bf f3 	      lda	LDIGIT,x
    138  60e3		       85 dd		      sta	digit1
    139  60e5		       bd c0 f3 	      lda	LDIGIT+1,x
    140  60e8		       85 de		      sta	digit1+1
    141  60ea
    142  60ea		       a5 e3		      lda	digit	; units
    143  60ec		       0a		      asl
    144  60ed		       aa		      tax
    145  60ee		       bd d3 f3 	      lda	RDIGIT,x
    146  60f1		       85 df		      sta	digit2
    147  60f3		       bd d4 f3 	      lda	RDIGIT+1,x
    148  60f6		       85 e0		      sta	digit2+1
    149  60f8
    150  60f8
    151  60f8
    152  60f8							;------------------------------------------------------------------
    153  60f8
    154  60f8
    155  60f8							;VerticalBlankX;
    156  60f8							;		  lda INTIM
    157  60f8							;		  bne VerticalBlankX
    158  60f8
    159  60f8
    160  60f8		       a9 00		      lda	#0
    161  60fa		       85 4d		      sta	PF0
    162  60fc		       85 4e		      sta	PF1
    163  60fe		       85 4f		      sta	PF2
    164  6100		       85 49		      sta	COLUBK
    165  6102
    166  6102							; position the sprites for the box walls
    167  6102
    168  6102		       85 42		      sta	WSYNC
    169  6104
      0  6104					      SLEEP	17
      1  6104				   .CYCLES    SET	17
      2  6104
      3  6104				  -	      IF	.CYCLES < 2
      4  6104				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6104				  -	      ERR
      6  6104					      ENDIF
      7  6104
      8  6104					      IF	.CYCLES & 1
      9  6104					      IFNCONST	NO_ILLEGAL_OPCODES
     10  6104		       04 00		      nop	0
     11  6106				  -	      ELSE
     12  6106				  -	      bit	VSYNC
     13  6106					      ENDIF
     14  6106				   .CYCLES    SET	.CYCLES - 3
     15  6106					      ENDIF
     16  6106
     17  6106					      REPEAT	.CYCLES / 2
     18  6106		       ea		      nop
     17  6106					      REPEND
     18  6107		       ea		      nop
     17  6107					      REPEND
     18  6108		       ea		      nop
     17  6108					      REPEND
     18  6109		       ea		      nop
     17  6109					      REPEND
     18  610a		       ea		      nop
     17  610a					      REPEND
     18  610b		       ea		      nop
     17  610b					      REPEND
     18  610c		       ea		      nop
     19  610d					      REPEND
    171  610d		       85 50		      sta	RESP0
    172  610f
      0  610f					      SLEEP	37
      1  610f				   .CYCLES    SET	37
      2  610f
      3  610f				  -	      IF	.CYCLES < 2
      4  610f				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  610f				  -	      ERR
      6  610f					      ENDIF
      7  610f
      8  610f					      IF	.CYCLES & 1
      9  610f					      IFNCONST	NO_ILLEGAL_OPCODES
     10  610f		       04 00		      nop	0
     11  6111				  -	      ELSE
     12  6111				  -	      bit	VSYNC
     13  6111					      ENDIF
     14  6111				   .CYCLES    SET	.CYCLES - 3
     15  6111					      ENDIF
     16  6111
     17  6111					      REPEAT	.CYCLES / 2
     18  6111		       ea		      nop
     17  6111					      REPEND
     18  6112		       ea		      nop
     17  6112					      REPEND
     18  6113		       ea		      nop
     17  6113					      REPEND
     18  6114		       ea		      nop
     17  6114					      REPEND
     18  6115		       ea		      nop
     17  6115					      REPEND
     18  6116		       ea		      nop
     17  6116					      REPEND
     18  6117		       ea		      nop
     17  6117					      REPEND
     18  6118		       ea		      nop
     17  6118					      REPEND
     18  6119		       ea		      nop
     17  6119					      REPEND
     18  611a		       ea		      nop
     17  611a					      REPEND
     18  611b		       ea		      nop
     17  611b					      REPEND
     18  611c		       ea		      nop
     17  611c					      REPEND
     18  611d		       ea		      nop
     17  611d					      REPEND
     18  611e		       ea		      nop
     17  611e					      REPEND
     18  611f		       ea		      nop
     17  611f					      REPEND
     18  6120		       ea		      nop
     17  6120					      REPEND
     18  6121		       ea		      nop
     19  6122					      REPEND
    174  6122		       85 51		      sta	RESP1
    175  6124
    176  6124		       85 42		      sta	WSYNC
    177  6126		       85 6a		      sta	HMOVE
    178  6128
    179  6128
    180  6128							;===================================================================================================
    181  6128
    182  6128							; now a top for the 'box'
    183  6128
    184  6128		       a9 00		      lda	#0
    185  612a		       85 4d		      sta	PF0
    186  612c		       85 4e		      sta	PF1
    187  612e		       85 4f		      sta	PF2
    188  6130
    189  6130		       a0 11		      ldy	#TOPHAT-1
    190  6132		       85 42	   boxtop     sta	WSYNC	;@0
    191  6134
    192  6134		       98		      tya
    193  6135		       0a		      asl
    194  6136		       29 06		      and	#%110
    195  6138		       05 f1		      ora	wallColour
    196  613a		       85 48		      sta	COLUPF
    197  613c		       b9 f1 f3 	      lda	lid0,y	;#%11100000
    198  613f		       85 4d		      sta	PF0
    199  6141		       b9 03 f4 	      lda	lid1,y	;#255
    200  6144							;nop
    201  6144		       85 4e		      sta	PF1
    202  6146		       b9 03 f4 	      lda	lid2,y	;#255
    203  6149							;nop
    204  6149		       85 4f		      sta	PF2	; 3 = 8 @ 19
    205  614b
    206  614b							; RHS
    207  614b		       b9 15 f4 	      lda	lid3,y	;#255
    208  614e							;nop
    209  614e		       85 4d		      sta	PF0	; 3 = 8 @ 27 OK	D7D6D5D4 <--- mirrored
    210  6150
      0  6150					      SLEEP	8
      1  6150				   .CYCLES    SET	8
      2  6150
      3  6150				  -	      IF	.CYCLES < 2
      4  6150				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6150				  -	      ERR
      6  6150					      ENDIF
      7  6150
      8  6150				  -	      IF	.CYCLES & 1
      9  6150				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  6150				  -	      nop	0
     11  6150				  -	      ELSE
     12  6150				  -	      bit	VSYNC
     13  6150				  -	      ENDIF
     14  6150				  -.CYCLES    SET	.CYCLES - 3
     15  6150					      ENDIF
     16  6150
     17  6150					      REPEAT	.CYCLES / 2
     18  6150		       ea		      nop
     17  6150					      REPEND
     18  6151		       ea		      nop
     17  6151					      REPEND
     18  6152		       ea		      nop
     17  6152					      REPEND
     18  6153		       ea		      nop
     19  6154					      REPEND
    212  6154		       b9 15 f4 	      lda	lid4,y	;#255
    213  6157		       85 4e		      sta	PF1	; 3 @40		 NOT MIRRORED, D7D6D5D4 -->
    214  6159
    215  6159		       a9 00		      lda	#%00000000
    216  615b							;		  nop
    217  615b		       85 4f		      sta	PF2	; 3 = 8 @48
    218  615d
    219  615d		       a9 00		      lda	#0
    220  615f		       85 49		      sta	COLUBK
    221  6161
    222  6161
    223  6161		       88		      dey		; 2
    224  6162		       10 ce		      bpl	boxtop
    225  6164
    226  6164
    227  6164		       a9 00		      lda	#0
    228  6166		       85 4d		      sta	PF0
    229  6168		       85 4e		      sta	PF1
    230  616a		       85 4f		      sta	PF2
    231  616c							;		  sta GRP0
    232  616c							;		  sta GRP1
    233  616c
    234  616c		       a9 fc		      lda	#%11111100
    235  616e		       85 5b		      sta	GRP0
    236  6170		       a9 3f		      lda	#%00111111
    237  6172		       85 5c		      sta	GRP1
    238  6174
    239  6174
    240  6174		       85 42		      sta	WSYNC
    241  6176							;		  sta WSYNC
    242  6176							;		  sta WSYNC
    243  6176							;		  sta WSYNC
    244  6176							;		  sta WSYNC
    245  6176
    246  6176							;===================================================================================================
    247  6176
    248  6176		       a6 80		      ldx	Platform
    249  6178		       bd bb f3 	      lda	colvecX,x
    250  617b		       aa		      tax
    251  617c
    252  617c							;------------------------------------------------------------------
    253  617c
    254  617c							; Do X scanlines of color-changing (our picture)
    255  617c
    256  617c
    257  617c		       a9 2a		      lda	#$2A	; 2
    258  617e		       85 48		      sta	COLUPF	; 3 = 5 @8
    259  6180
    260  6180		       a0 1f		      ldy	#BIGDIG_SIZE-1	; #lines in characters-1
    261  6182
    262  6182		       a2 00		      ldx	#0	; used as a generic "0" during the kernel
    263  6184		       85 42		      sta	WSYNC
    264  6186
    265  6186
    266  6186		       00 04	   DUPES      =	4
    267  6186				   LevelNumberDigits
    268  6186
    269  6186				   .LOOP      SET	0
    270  6186					      REPEAT	DUPES
    271  6186
    272  6186		       86 4d		      stx	PF0	; 3
    273  6188
    274  6188					      IF	.LOOP < DUPES-1
    275  6188		       a9 04		      lda	#4	;!!!
    276  618a		       ea		      nop
    277  618b							;lda Level,y		  ; 4
    278  618b		       65 f2		      adc	adjustColour	; 3
    279  618d		       85 48		      sta	COLUPF	; 3 = 10 @13
    280  618f				  -	      ELSE
    281  618f				  -	      lda	#0	;wallColour	      ; 3
    282  618f				  -	      sta	COLUPF	; 3 = 7
    283  618f				  -	      SLEEP	5	; 4 = 10 @13
    284  618f				  -
    285  618f					      ENDIF
    286  618f		       b1 eb		      lda	(digitHundreds),y	; 5
    287  6191		       85 4e		      sta	PF1	; 3 = 8 @21
    288  6193
    289  6193		       b1 dd		      lda	(digit1),y	; 5
    290  6195		       85 4f		      sta	PF2	; 3 = 8 @29
    291  6197
    292  6197							; RHS
    293  6197
    294  6197		       b1 df		      lda	(digit2),y	; 5
    295  6199		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    296  619b
    297  619b		       0a		      asl		; 2
    298  619c		       0a		      asl		; 2
    299  619d		       0a		      asl		; 2
    300  619e		       0a		      asl		; 2
    301  619f		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    302  61a1
    303  61a1		       b1 e1		      lda	(digitstar),y	; 5
    304  61a3		       85 4f		      sta	PF2	; 3 = 8 @56
    305  61a5
    306  61a5		       b1 ef		      lda	(manc),y	; 5
    307  61a7		       85 48		      sta	COLUPF	; 3 = 8 @64
    308  61a9
    309  61a9		       00 0c	   SPARE      =	12
    310  61a9
    311  61a9					      IF	.LOOP < DUPES-1
      0  61a9					      SLEEP	SPARE
      1  61a9				   .CYCLES    SET	SPARE
      2  61a9
      3  61a9				  -	      IF	.CYCLES < 2
      4  61a9				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  61a9				  -	      ERR
      6  61a9					      ENDIF
      7  61a9
      8  61a9				  -	      IF	.CYCLES & 1
      9  61a9				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  61a9				  -	      nop	0
     11  61a9				  -	      ELSE
     12  61a9				  -	      bit	VSYNC
     13  61a9				  -	      ENDIF
     14  61a9				  -.CYCLES    SET	.CYCLES - 3
     15  61a9					      ENDIF
     16  61a9
     17  61a9					      REPEAT	.CYCLES / 2
     18  61a9		       ea		      nop
     17  61a9					      REPEND
     18  61aa		       ea		      nop
     17  61aa					      REPEND
     18  61ab		       ea		      nop
     17  61ab					      REPEND
     18  61ac		       ea		      nop
     17  61ac					      REPEND
     18  61ad		       ea		      nop
     17  61ad					      REPEND
     18  61ae		       ea		      nop
     19  61af					      REPEND
    313  61af					      ENDIF
    314  61af
    315  61af				  -	      IF	.LOOP = DUPES-1
    316  61af				  -	      SLEEP	SPARE-7
    317  61af					      ENDIF
    318  61af
    319  61af
    320  61af				   .LOOP      SET	.LOOP + 1
    270  61af					      REPEND
    271  61af
    272  61af		       86 4d		      stx	PF0	; 3
    273  61b1
    274  61b1					      IF	.LOOP < DUPES-1
    275  61b1		       a9 04		      lda	#4	;!!!
    276  61b3		       ea		      nop
    277  61b4							;lda Level,y		  ; 4
    278  61b4		       65 f2		      adc	adjustColour	; 3
    279  61b6		       85 48		      sta	COLUPF	; 3 = 10 @13
    280  61b8				  -	      ELSE
    281  61b8				  -	      lda	#0	;wallColour	      ; 3
    282  61b8				  -	      sta	COLUPF	; 3 = 7
    283  61b8				  -	      SLEEP	5	; 4 = 10 @13
    284  61b8				  -
    285  61b8					      ENDIF
    286  61b8		       b1 eb		      lda	(digitHundreds),y	; 5
    287  61ba		       85 4e		      sta	PF1	; 3 = 8 @21
    288  61bc
    289  61bc		       b1 dd		      lda	(digit1),y	; 5
    290  61be		       85 4f		      sta	PF2	; 3 = 8 @29
    291  61c0
    292  61c0							; RHS
    293  61c0
    294  61c0		       b1 df		      lda	(digit2),y	; 5
    295  61c2		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    296  61c4
    297  61c4		       0a		      asl		; 2
    298  61c5		       0a		      asl		; 2
    299  61c6		       0a		      asl		; 2
    300  61c7		       0a		      asl		; 2
    301  61c8		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    302  61ca
    303  61ca		       b1 e1		      lda	(digitstar),y	; 5
    304  61cc		       85 4f		      sta	PF2	; 3 = 8 @56
    305  61ce
    306  61ce		       b1 ef		      lda	(manc),y	; 5
    307  61d0		       85 48		      sta	COLUPF	; 3 = 8 @64
    308  61d2
    309  61d2		       00 0c	   SPARE      =	12
    310  61d2
    311  61d2					      IF	.LOOP < DUPES-1
      0  61d2					      SLEEP	SPARE
      1  61d2				   .CYCLES    SET	SPARE
      2  61d2
      3  61d2				  -	      IF	.CYCLES < 2
      4  61d2				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  61d2				  -	      ERR
      6  61d2					      ENDIF
      7  61d2
      8  61d2				  -	      IF	.CYCLES & 1
      9  61d2				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  61d2				  -	      nop	0
     11  61d2				  -	      ELSE
     12  61d2				  -	      bit	VSYNC
     13  61d2				  -	      ENDIF
     14  61d2				  -.CYCLES    SET	.CYCLES - 3
     15  61d2					      ENDIF
     16  61d2
     17  61d2					      REPEAT	.CYCLES / 2
     18  61d2		       ea		      nop
     17  61d2					      REPEND
     18  61d3		       ea		      nop
     17  61d3					      REPEND
     18  61d4		       ea		      nop
     17  61d4					      REPEND
     18  61d5		       ea		      nop
     17  61d5					      REPEND
     18  61d6		       ea		      nop
     17  61d6					      REPEND
     18  61d7		       ea		      nop
     19  61d8					      REPEND
    313  61d8					      ENDIF
    314  61d8
    315  61d8				  -	      IF	.LOOP = DUPES-1
    316  61d8				  -	      SLEEP	SPARE-7
    317  61d8					      ENDIF
    318  61d8
    319  61d8
    320  61d8				   .LOOP      SET	.LOOP + 1
    270  61d8					      REPEND
    271  61d8
    272  61d8		       86 4d		      stx	PF0	; 3
    273  61da
    274  61da					      IF	.LOOP < DUPES-1
    275  61da		       a9 04		      lda	#4	;!!!
    276  61dc		       ea		      nop
    277  61dd							;lda Level,y		  ; 4
    278  61dd		       65 f2		      adc	adjustColour	; 3
    279  61df		       85 48		      sta	COLUPF	; 3 = 10 @13
    280  61e1				  -	      ELSE
    281  61e1				  -	      lda	#0	;wallColour	      ; 3
    282  61e1				  -	      sta	COLUPF	; 3 = 7
    283  61e1				  -	      SLEEP	5	; 4 = 10 @13
    284  61e1				  -
    285  61e1					      ENDIF
    286  61e1		       b1 eb		      lda	(digitHundreds),y	; 5
    287  61e3		       85 4e		      sta	PF1	; 3 = 8 @21
    288  61e5
    289  61e5		       b1 dd		      lda	(digit1),y	; 5
    290  61e7		       85 4f		      sta	PF2	; 3 = 8 @29
    291  61e9
    292  61e9							; RHS
    293  61e9
    294  61e9		       b1 df		      lda	(digit2),y	; 5
    295  61eb		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    296  61ed
    297  61ed		       0a		      asl		; 2
    298  61ee		       0a		      asl		; 2
    299  61ef		       0a		      asl		; 2
    300  61f0		       0a		      asl		; 2
    301  61f1		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    302  61f3
    303  61f3		       b1 e1		      lda	(digitstar),y	; 5
    304  61f5		       85 4f		      sta	PF2	; 3 = 8 @56
    305  61f7
    306  61f7		       b1 ef		      lda	(manc),y	; 5
    307  61f9		       85 48		      sta	COLUPF	; 3 = 8 @64
    308  61fb
    309  61fb		       00 0c	   SPARE      =	12
    310  61fb
    311  61fb					      IF	.LOOP < DUPES-1
      0  61fb					      SLEEP	SPARE
      1  61fb				   .CYCLES    SET	SPARE
      2  61fb
      3  61fb				  -	      IF	.CYCLES < 2
      4  61fb				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  61fb				  -	      ERR
      6  61fb					      ENDIF
      7  61fb
      8  61fb				  -	      IF	.CYCLES & 1
      9  61fb				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  61fb				  -	      nop	0
     11  61fb				  -	      ELSE
     12  61fb				  -	      bit	VSYNC
     13  61fb				  -	      ENDIF
     14  61fb				  -.CYCLES    SET	.CYCLES - 3
     15  61fb					      ENDIF
     16  61fb
     17  61fb					      REPEAT	.CYCLES / 2
     18  61fb		       ea		      nop
     17  61fb					      REPEND
     18  61fc		       ea		      nop
     17  61fc					      REPEND
     18  61fd		       ea		      nop
     17  61fd					      REPEND
     18  61fe		       ea		      nop
     17  61fe					      REPEND
     18  61ff		       ea		      nop
     17  61ff					      REPEND
     18  6200		       ea		      nop
     19  6201					      REPEND
    313  6201					      ENDIF
    314  6201
    315  6201				  -	      IF	.LOOP = DUPES-1
    316  6201				  -	      SLEEP	SPARE-7
    317  6201					      ENDIF
    318  6201
    319  6201
    320  6201				   .LOOP      SET	.LOOP + 1
    270  6201					      REPEND
    271  6201
    272  6201		       86 4d		      stx	PF0	; 3
    273  6203
    274  6203				  -	      IF	.LOOP < DUPES-1
    275  6203				  -	      lda	#4	;!!!
    276  6203				  -	      nop
    277  6203				  -			;lda Level,y		  ; 4
    278  6203				  -	      adc	adjustColour	; 3
    279  6203				  -	      sta	COLUPF	; 3 = 10 @13
    280  6203					      ELSE
    281  6203		       a9 00		      lda	#0	;wallColour	      ; 3
    282  6205		       85 48		      sta	COLUPF	; 3 = 7
      0  6207					      SLEEP	5	; 4 = 10 @13
      1  6207				   .CYCLES    SET	5
      2  6207
      3  6207				  -	      IF	.CYCLES < 2
      4  6207				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6207				  -	      ERR
      6  6207					      ENDIF
      7  6207
      8  6207					      IF	.CYCLES & 1
      9  6207					      IFNCONST	NO_ILLEGAL_OPCODES
     10  6207		       04 00		      nop	0
     11  6209				  -	      ELSE
     12  6209				  -	      bit	VSYNC
     13  6209					      ENDIF
     14  6209				   .CYCLES    SET	.CYCLES - 3
     15  6209					      ENDIF
     16  6209
     17  6209					      REPEAT	.CYCLES / 2
     18  6209		       ea		      nop
     19  620a					      REPEND
    284  620a
    285  620a					      ENDIF
    286  620a		       b1 eb		      lda	(digitHundreds),y	; 5
    287  620c		       85 4e		      sta	PF1	; 3 = 8 @21
    288  620e
    289  620e		       b1 dd		      lda	(digit1),y	; 5
    290  6210		       85 4f		      sta	PF2	; 3 = 8 @29
    291  6212
    292  6212							; RHS
    293  6212
    294  6212		       b1 df		      lda	(digit2),y	; 5
    295  6214		       85 4d		      sta	PF0	; 3 = 8 @ 37	     D7D6D5D4 <--- mirrored
    296  6216
    297  6216		       0a		      asl		; 2
    298  6217		       0a		      asl		; 2
    299  6218		       0a		      asl		; 2
    300  6219		       0a		      asl		; 2
    301  621a		       85 4e		      sta	PF1	; 3 = 11 @48	     NOT MIRRORED, D7D6D5D4 -->
    302  621c
    303  621c		       b1 e1		      lda	(digitstar),y	; 5
    304  621e		       85 4f		      sta	PF2	; 3 = 8 @56
    305  6220
    306  6220		       b1 ef		      lda	(manc),y	; 5
    307  6222		       85 48		      sta	COLUPF	; 3 = 8 @64
    308  6224
    309  6224		       00 0c	   SPARE      =	12
    310  6224
    311  6224				  -	      IF	.LOOP < DUPES-1
    312  6224				  -	      SLEEP	SPARE
    313  6224					      ENDIF
    314  6224
    315  6224					      IF	.LOOP = DUPES-1
      0  6224					      SLEEP	SPARE-7
      1  6224				   .CYCLES    SET	SPARE-7
      2  6224
      3  6224				  -	      IF	.CYCLES < 2
      4  6224				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6224				  -	      ERR
      6  6224					      ENDIF
      7  6224
      8  6224					      IF	.CYCLES & 1
      9  6224					      IFNCONST	NO_ILLEGAL_OPCODES
     10  6224		       04 00		      nop	0
     11  6226				  -	      ELSE
     12  6226				  -	      bit	VSYNC
     13  6226					      ENDIF
     14  6226				   .CYCLES    SET	.CYCLES - 3
     15  6226					      ENDIF
     16  6226
     17  6226					      REPEAT	.CYCLES / 2
     18  6226		       ea		      nop
     19  6227					      REPEND
    317  6227					      ENDIF
    318  6227
    319  6227
    320  6227				   .LOOP      SET	.LOOP + 1
    321  6227					      REPEND
    322  6227		       88		      dey		; 2
    323  6228		       30 03		      bmi	ess	; 2/3
    324  622a		       4c 86 f1 	      jmp	LevelNumberDigits	; 3 = 7 mostly @ 71
    325  622d
    326  622d
    327  622d				   ess
    328  622d
    329  622d							;		  sta WSYNC
    330  622d
    331  622d
    332  622d							; now a bottom for the 'box'
    333  622d
    334  622d		       a9 00		      lda	#0
    335  622f		       85 4d		      sta	PF0
    336  6231		       85 4e		      sta	PF1
    337  6233		       85 4f		      sta	PF2
    338  6235
    339  6235		       a5 f1		      lda	wallColour
    340  6237		       85 48		      sta	COLUPF
    341  6239
    342  6239		       a0 08		      ldy	#8
    343  623b		       85 42	   boxbottom  sta	WSYNC	;@0
    344  623d		       b9 27 f4 	      lda	lidb0,y	;#%11100000
    345  6240		       29 c0		      and	#%11000000
    346  6242		       85 4d		      sta	PF0
    347  6244		       b9 27 f4 	      lda	lidb1,y	;#255
    348  6247		       85 4e		      sta	PF1
    349  6249		       b9 27 f4 	      lda	lidb2,y	;#255
    350  624c		       85 4f		      sta	PF2	; 3 = 8 @ 19
    351  624e
    352  624e							; RHS
    353  624e		       b9 27 f4 	      lda	lidb3,y
    354  6251		       85 4d		      sta	PF0	; 3 = 8 @ 27 OK	D7D6D5D4 <--- mirrored
    355  6253
      0  6253					      SLEEP	8
      1  6253				   .CYCLES    SET	8
      2  6253
      3  6253				  -	      IF	.CYCLES < 2
      4  6253				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6253				  -	      ERR
      6  6253					      ENDIF
      7  6253
      8  6253				  -	      IF	.CYCLES & 1
      9  6253				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  6253				  -	      nop	0
     11  6253				  -	      ELSE
     12  6253				  -	      bit	VSYNC
     13  6253				  -	      ENDIF
     14  6253				  -.CYCLES    SET	.CYCLES - 3
     15  6253					      ENDIF
     16  6253
     17  6253					      REPEAT	.CYCLES / 2
     18  6253		       ea		      nop
     17  6253					      REPEND
     18  6254		       ea		      nop
     17  6254					      REPEND
     18  6255		       ea		      nop
     17  6255					      REPEND
     18  6256		       ea		      nop
     19  6257					      REPEND
    357  6257		       b9 27 f4 	      lda	lidb4,y
    358  625a		       85 4e		      sta	PF1	; 3 @40		 NOT MIRRORED, D7D6D5D4 -->
    359  625c
    360  625c		       a9 00		      lda	#%00000000
    361  625e							;		  nop
    362  625e		       85 4f		      sta	PF2	; 3 = 8 @48
    363  6260
    364  6260		       a9 06		      lda	#6
    365  6262		       85 49		      sta	COLUBK
    366  6264
    367  6264
    368  6264		       88		      dey		; 2
    369  6265		       10 d4		      bpl	boxbottom
    370  6267
    371  6267
    372  6267		       a9 00		      lda	#0
    373  6269		       85 4d		      sta	PF0
    374  626b		       85 4e		      sta	PF1
    375  626d		       85 4f		      sta	PF2
    376  626f		       85 5b		      sta	GRP0
    377  6271		       85 5c		      sta	GRP1
    378  6273
    379  6273		       a4 80		      ldy	Platform
    380  6275		       b9 b7 f3 	      lda	OverscanTime2X,y
    381  6278		       8d 96 02 	      sta	TIM64T
    382  627b
    383  627b		       85 42		      sta	WSYNC
    384  627d
    385  627d							;--------------------------------------------------------------------------
    386  627d
    387  627d		       c6 e6		      dec	digitick
    388  627f		       10 65		      bpl	donedig
    389  6281		       a9 07		      lda	#7
    390  6283		       85 e6		      sta	digitick
    391  6285
    392  6285		       a2 02		      ldx	#2
    393  6287		       b5 e3	   scanner    lda	digit,x
    394  6289		       d5 e7		      cmp	targetDigit,x
    395  628b		       f0 0e		      beq	scanOK
    396  628d
    397  628d		       f8		      sed
    398  628e		       69 01		      adc	#1
    399  6290		       29 0f		      and	#$F
    400  6292		       95 e3		      sta	digit,x
    401  6294		       d8		      cld
    402  6295
    403  6295		       a9 64		      lda	#100
    404  6297		       85 ea		      sta	endwait
    405  6299		       d0 4b		      bne	donedig
    406  629b
    407  629b		       ca	   scanOK     dex
    408  629c		       10 e9		      bpl	scanner
    409  629e
    410  629e		       a5 ed		      lda	selector
    411  62a0		       f0 44		      beq	donedig	; don't allow joystick selection
    412  62a2
    413  62a2		       a9 ff		      lda	#-1
    414  62a4		       85 e7		      sta	targetDigit
    415  62a6		       85 e8		      sta	targetDigit+1
    416  62a8		       85 e9		      sta	targetDigit+2
    417  62aa
    418  62aa		       ad 80 02 	      lda	SWCHA
    419  62ad		       4a		      lsr
    420  62ae		       4a		      lsr
    421  62af		       4a		      lsr
    422  62b0		       4a		      lsr
    423  62b1		       aa		      tax
    424  62b2
    425  62b2		       bd a3 f3 	      lda	xJoyMoveX,x
    426  62b5		       f0 23		      beq	noadjustLevelNum
    427  62b7
    428  62b7							; level is changing, so animate the man too
    429  62b7
    430  62b7		       20 36 f3 	      jsr	fixWalkFrame
    431  62ba
    432  62ba
    433  62ba
    434  62ba		       bd a3 f3 	      lda	xJoyMoveX,x
    435  62bd		       30 0e		      bmi	downx
    436  62bf
    437  62bf		       e6 b1		      inc	levelX
    438  62c1							;		  bne lxok
    439  62c1							;		  inc levelX+1
    440  62c1							;lxok
    441  62c1
    442  62c1							;		  lda levelX+1
    443  62c1							;		  cmp #>MAX_LEVEL
    444  62c1							;		  bcc lxok2
    445  62c1		       a5 b1		      lda	levelX
    446  62c3		       c9 64		      cmp	#<MAX_LEVEL
    447  62c5		       90 13		      bcc	lxok2
    448  62c7
    449  62c7		       a9 00		      lda	#0
    450  62c9		       85 b1		      sta	levelX
    451  62cb							;		  sta levelX+1
    452  62cb		       f0 0d		      beq	lxok2
    453  62cd
    454  62cd		       38	   downx      sec
    455  62ce		       a5 b1		      lda	levelX
    456  62d0		       e9 01		      sbc	#1
    457  62d2		       85 b1		      sta	levelX
    458  62d4							;		  lda levelX+1
    459  62d4							;		  sbc #0
    460  62d4							;		  sta levelX+1
    461  62d4		       b0 04		      bcs	lxok2
    462  62d6
    463  62d6		       a9 63		      lda	#<(MAX_LEVEL-1)
    464  62d8		       85 b1		      sta	levelX
    465  62da							;		  lda #>(MAX_LEVEL-1)
    466  62da							;		  sta levelX+1
    467  62da
    468  62da				   lxok2
    469  62da				   noadjustLevelNum
    470  62da
    471  62da		       20 10 f3 	      jsr	dd3
    472  62dd
    473  62dd		       a2 02		      ldx	#2
    474  62df		       b5 e7	   zapper     lda	targetDigit,x
    475  62e1		       95 e3		      sta	digit,x
    476  62e3		       ca		      dex
    477  62e4		       10 f9		      bpl	zapper
    478  62e6
    479  62e6				   donedig
    480  62e6
      0  62e6					      NEXT_RANDOM
      1  62e6
      2  62e6		       a5 c7		      lda	rnd
      3  62e8		       4a		      lsr
      4  62e9					      IFCONST	rndHi
      5  62e9		       66 c6		      ror	rndHi
      6  62eb					      ENDIF
      7  62eb		       90 02		      bcc	.skipEOR
      8  62ed		       49 b4		      eor	#RND_EOR_VAL
      9  62ef				   .skipEOR
     10  62ef		       85 c7		      sta	rnd
    482  62f1
    483  62f1		       ad 84 02    oscanX     lda	INTIM
    484  62f4		       d0 fb		      bne	oscanX
    485  62f6
    486  62f6		       85 49		      sta	COLUBK
    487  62f8		       a9 42		      lda	#%01000010	; bit6 is not required
    488  62fa		       85 41		      sta	VBLANK	; end of screen - enter blanking
    489  62fc
    490  62fc		       a9 00		      lda	#0
    491  62fe		       85 40		      sta	VSYNC
    492  6300
    493  6300
    494  6300		       a5 ed		      lda	selector
    495  6302		       d0 04		      bne	waitbutton
    496  6304		       c6 ea		      dec	endwait
    497  6306		       f0 07		      beq	retX
    498  6308
    499  6308		       a5 4c	   waitbutton lda	INPT4
    500  630a		       10 03		      bpl	retX
    501  630c
    502  630c		       4c a7 f0 	      jmp	RestartFrameX
    503  630f
    504  630f		       60	   retX       rts
    505  6310
    506  6310
    507  6310
    508  6310				   dd3
    509  6310		       a2 00		      ldx	#0	;levelX+1
    510  6312		       18		      clc
    511  6313		       a5 b1		      lda	levelX
    512  6315		       69 01		      adc	#1
    513  6317		       90 01		      bcc	not100s
    514  6319		       e8		      inx
    515  631a
    516  631a		       38	   not100s    sec
    517  631b		       e9 64	   m100       sbc	#100
    518  631d		       e6 e9		      inc	targetDigit+2
    519  631f		       b0 fa		      bcs	m100
    520  6321		       ca		      dex
    521  6322		       10 f6		      bpl	not100s
    522  6324		       e8		      inx
    523  6325		       69 64		      adc	#100
    524  6327		       38	   csets      sec
    525  6328		       e9 0a	   m10	      sbc	#10
    526  632a		       e6 e8		      inc	targetDigit+1
    527  632c		       b0 fa		      bcs	m10
    528  632e		       ca		      dex
    529  632f		       10 f6		      bpl	csets
    530  6331		       69 0a		      adc	#10
    531  6333		       85 e7		      sta	targetDigit
    532  6335
    533  6335
    534  6335							; leading zero removal
    535  6335							;lda targetDigit+2
    536  6335							;bne hunds
    537  6335							;lda #10
    538  6335							;sta targetDigit+2
    539  6335							;sta digit+2		  ; hide hundreds if 0
    540  6335				   hunds
    541  6335
    542  6335		       60		      rts
    543  6336
    544  6336
      0  6336					      DEFINE_SUBROUTINE	fixWalkFrame
      1  6336		       00 0c	   BANK_fixWalkFrame =	_CURRENT_BANK
      2  6336					      SUBROUTINE
      3  6336				   fixWalkFrame
    546  6336
    547  6336
    548  6336		       a5 ed		      lda	selector
    549  6338		       f0 10		      beq	walk0
    550  633a
    551  633a		       18		      clc
    552  633b		       a5 ee		      lda	walkSpeed
    553  633d		       69 04		      adc	#4
    554  633f		       85 ee		      sta	walkSpeed
    555  6341
    556  6341		       4a		      lsr
    557  6342		       4a		      lsr
    558  6343		       29 03		      and	#%11
    559  6345		       a8		      tay
    560  6346		       b9 60 f3 	      lda	walkOrder,y
    561  6349		       0a		      asl
    562  634a		       a8	   walk0      tay
    563  634b		       b9 64 f3 	      lda	walkFrame,y
    564  634e		       85 e1		      sta	digitstar
    565  6350		       b9 65 f3 	      lda	walkFrame+1,y
    566  6353		       85 e2		      sta	digitstar+1
    567  6355
    568  6355
    569  6355		       b9 6c f3 	      lda	walkColour,y
    570  6358		       85 ef		      sta	manc
    571  635a		       b9 6d f3 	      lda	walkColour+1,y
    572  635d		       85 f0		      sta	manc+1
    573  635f		       60		      rts
    574  6360
    575  6360
    576  6360
    577  6360				  -	      if	0
    578  6360				  -	      OPTIONAL_PAGEBREAK	"colbk @levelScreen.asm", BIGDIG_SIZE
    579  6360				  -
    580  6360				  -colbk		; hardwired for 32 - will need manual changing
    581  6360				  -
    582  6360				  -.CRK       SET	256*$B2
    583  6360				  -.CGK       SET	256*$B2
    584  6360				  -.CBK       SET	256*$B2
    585  6360				  -
    586  6360				  -	      REPEAT	10
    587  6360				  -	      .byte	.CRK/256
    588  6360				  -	      .byte	.CBK/256
    589  6360				  -	      .byte	.CGK/256
    590  6360				  -
    591  6360				  -.CRK       SET	.CRK + 280	;135
    592  6360				  -.CGK       SET	.CGK + 280	;135
    593  6360				  -.CBK       SET	.CBK + 280	;135
    594  6360				  -	      REPEND
    595  6360				  -	      .byte	.CRK/256
    596  6360				  -	      .byte	.CBK/256
    597  6360				  -
    598  6360				  -	      CHECKPAGEX	colbk, "WARNING: colbk crosses page @levelScreen.asm"
    599  6360					      endif
    600  6360
    601  6360
    602  6360
    603  6360		       01 02 03 02 walkOrder  .byte.b	1,2,3,2
    604  6364				   walkFrame
    605  6364		       60 f7		      .word.w	LEFT_star0
    606  6366		       80 f7		      .word.w	LEFT_star1
    607  6368		       a0 f7		      .word.w	LEFT_star2
    608  636a		       c0 f7		      .word.w	LEFT_star3
    609  636c
    610  636c				   walkColour
    611  636c		       8b f3		      .word.w	mancolourPAL2
    612  636e		       74 f3		      .word.w	mancolourPAL
    613  6370		       8b f3		      .word.w	mancolourPAL2
    614  6372		       74 f3		      .word.w	mancolourPAL
    615  6374
    616  6374
    617  6374				   mancolourPAL
    618  6374							; NTSC_TO_PAL $10, 4
      0  6374					      NTSC_TO_PAL	$10, 4
      1  6374				  -	      IF	$10 = 0
      2  6374				  -	      .byte	$10+4
      3  6374					      ENDIF
      4  6374					      IF	$10 = $10
      5  6374		       24		      .byte.b	$20+4
      6  6375					      ENDIF
      7  6375				  -	      IF	$10 = $20
      8  6375				  -	      .byte	$40+4
      9  6375					      ENDIF
     10  6375				  -	      IF	$10 = $30
     11  6375				  -	      .byte	$40+4
     12  6375					      ENDIF
     13  6375				  -	      IF	$10 = $40
     14  6375				  -	      .byte	$60+4
     15  6375					      ENDIF
     16  6375				  -	      IF	$10 = $50
     17  6375				  -	      .byte	$80+4
     18  6375					      ENDIF
     19  6375				  -	      IF	$10 = $60
     20  6375				  -	      .byte	$C0+4
     21  6375					      ENDIF
     22  6375				  -	      IF	$10 = $70
     23  6375				  -	      .byte	$D0+4
     24  6375					      ENDIF
     25  6375				  -	      IF	$10 = $80
     26  6375				  -	      .byte	$B0+4
     27  6375					      ENDIF
     28  6375				  -	      IF	$10 = $90
     29  6375				  -	      .byte	$90+4
     30  6375					      ENDIF
     31  6375				  -	      IF	$10 = $A0
     32  6375				  -	      .byte	$70+4
     33  6375					      ENDIF
     34  6375				  -	      IF	$10 = $B0
     35  6375				  -	      .byte	$50+4
     36  6375					      ENDIF
     37  6375				  -	      IF	$10 = $C0
     38  6375				  -	      .byte	$30+4
     39  6375					      ENDIF
     40  6375				  -	      IF	$10 = $D0
     41  6375				  -	      .byte	$30+4
     42  6375					      ENDIF
     43  6375				  -	      IF	$10 = $E0
     44  6375				  -	      .byte	$20+4
     45  6375					      ENDIF
     46  6375				  -	      IF	$10 = $F0
     47  6375				  -	      .byte	$40+4
     48  6375					      ENDIF
      0  6375					      NTSC_TO_PAL	$10, 4
      1  6375				  -	      IF	$10 = 0
      2  6375				  -	      .byte	$10+4
      3  6375					      ENDIF
      4  6375					      IF	$10 = $10
      5  6375		       24		      .byte.b	$20+4
      6  6376					      ENDIF
      7  6376				  -	      IF	$10 = $20
      8  6376				  -	      .byte	$40+4
      9  6376					      ENDIF
     10  6376				  -	      IF	$10 = $30
     11  6376				  -	      .byte	$40+4
     12  6376					      ENDIF
     13  6376				  -	      IF	$10 = $40
     14  6376				  -	      .byte	$60+4
     15  6376					      ENDIF
     16  6376				  -	      IF	$10 = $50
     17  6376				  -	      .byte	$80+4
     18  6376					      ENDIF
     19  6376				  -	      IF	$10 = $60
     20  6376				  -	      .byte	$C0+4
     21  6376					      ENDIF
     22  6376				  -	      IF	$10 = $70
     23  6376				  -	      .byte	$D0+4
     24  6376					      ENDIF
     25  6376				  -	      IF	$10 = $80
     26  6376				  -	      .byte	$B0+4
     27  6376					      ENDIF
     28  6376				  -	      IF	$10 = $90
     29  6376				  -	      .byte	$90+4
     30  6376					      ENDIF
     31  6376				  -	      IF	$10 = $A0
     32  6376				  -	      .byte	$70+4
     33  6376					      ENDIF
     34  6376				  -	      IF	$10 = $B0
     35  6376				  -	      .byte	$50+4
     36  6376					      ENDIF
     37  6376				  -	      IF	$10 = $C0
     38  6376				  -	      .byte	$30+4
     39  6376					      ENDIF
     40  6376				  -	      IF	$10 = $D0
     41  6376				  -	      .byte	$30+4
     42  6376					      ENDIF
     43  6376				  -	      IF	$10 = $E0
     44  6376				  -	      .byte	$20+4
     45  6376					      ENDIF
     46  6376				  -	      IF	$10 = $F0
     47  6376				  -	      .byte	$40+4
     48  6376					      ENDIF
      0  6376					      NTSC_TO_PAL	$90, 4
      1  6376				  -	      IF	$90 = 0
      2  6376				  -	      .byte	$90+4
      3  6376					      ENDIF
      4  6376				  -	      IF	$90 = $10
      5  6376				  -	      .byte	$20+4
      6  6376					      ENDIF
      7  6376				  -	      IF	$90 = $20
      8  6376				  -	      .byte	$40+4
      9  6376					      ENDIF
     10  6376				  -	      IF	$90 = $30
     11  6376				  -	      .byte	$40+4
     12  6376					      ENDIF
     13  6376				  -	      IF	$90 = $40
     14  6376				  -	      .byte	$60+4
     15  6376					      ENDIF
     16  6376				  -	      IF	$90 = $50
     17  6376				  -	      .byte	$80+4
     18  6376					      ENDIF
     19  6376				  -	      IF	$90 = $60
     20  6376				  -	      .byte	$C0+4
     21  6376					      ENDIF
     22  6376				  -	      IF	$90 = $70
     23  6376				  -	      .byte	$D0+4
     24  6376					      ENDIF
     25  6376				  -	      IF	$90 = $80
     26  6376				  -	      .byte	$B0+4
     27  6376					      ENDIF
     28  6376					      IF	$90 = $90
     29  6376		       94		      .byte.b	$90+4
     30  6377					      ENDIF
     31  6377				  -	      IF	$90 = $A0
     32  6377				  -	      .byte	$70+4
     33  6377					      ENDIF
     34  6377				  -	      IF	$90 = $B0
     35  6377				  -	      .byte	$50+4
     36  6377					      ENDIF
     37  6377				  -	      IF	$90 = $C0
     38  6377				  -	      .byte	$30+4
     39  6377					      ENDIF
     40  6377				  -	      IF	$90 = $D0
     41  6377				  -	      .byte	$30+4
     42  6377					      ENDIF
     43  6377				  -	      IF	$90 = $E0
     44  6377				  -	      .byte	$20+4
     45  6377					      ENDIF
     46  6377				  -	      IF	$90 = $F0
     47  6377				  -	      .byte	$40+4
     48  6377					      ENDIF
      0  6377					      NTSC_TO_PAL	$90, 4
      1  6377				  -	      IF	$90 = 0
      2  6377				  -	      .byte	$90+4
      3  6377					      ENDIF
      4  6377				  -	      IF	$90 = $10
      5  6377				  -	      .byte	$20+4
      6  6377					      ENDIF
      7  6377				  -	      IF	$90 = $20
      8  6377				  -	      .byte	$40+4
      9  6377					      ENDIF
     10  6377				  -	      IF	$90 = $30
     11  6377				  -	      .byte	$40+4
     12  6377					      ENDIF
     13  6377				  -	      IF	$90 = $40
     14  6377				  -	      .byte	$60+4
     15  6377					      ENDIF
     16  6377				  -	      IF	$90 = $50
     17  6377				  -	      .byte	$80+4
     18  6377					      ENDIF
     19  6377				  -	      IF	$90 = $60
     20  6377				  -	      .byte	$C0+4
     21  6377					      ENDIF
     22  6377				  -	      IF	$90 = $70
     23  6377				  -	      .byte	$D0+4
     24  6377					      ENDIF
     25  6377				  -	      IF	$90 = $80
     26  6377				  -	      .byte	$B0+4
     27  6377					      ENDIF
     28  6377					      IF	$90 = $90
     29  6377		       94		      .byte.b	$90+4
     30  6378					      ENDIF
     31  6378				  -	      IF	$90 = $A0
     32  6378				  -	      .byte	$70+4
     33  6378					      ENDIF
     34  6378				  -	      IF	$90 = $B0
     35  6378				  -	      .byte	$50+4
     36  6378					      ENDIF
     37  6378				  -	      IF	$90 = $C0
     38  6378				  -	      .byte	$30+4
     39  6378					      ENDIF
     40  6378				  -	      IF	$90 = $D0
     41  6378				  -	      .byte	$30+4
     42  6378					      ENDIF
     43  6378				  -	      IF	$90 = $E0
     44  6378				  -	      .byte	$20+4
     45  6378					      ENDIF
     46  6378				  -	      IF	$90 = $F0
     47  6378				  -	      .byte	$40+4
     48  6378					      ENDIF
      0  6378					      NTSC_TO_PAL	$90, 4
      1  6378				  -	      IF	$90 = 0
      2  6378				  -	      .byte	$90+4
      3  6378					      ENDIF
      4  6378				  -	      IF	$90 = $10
      5  6378				  -	      .byte	$20+4
      6  6378					      ENDIF
      7  6378				  -	      IF	$90 = $20
      8  6378				  -	      .byte	$40+4
      9  6378					      ENDIF
     10  6378				  -	      IF	$90 = $30
     11  6378				  -	      .byte	$40+4
     12  6378					      ENDIF
     13  6378				  -	      IF	$90 = $40
     14  6378				  -	      .byte	$60+4
     15  6378					      ENDIF
     16  6378				  -	      IF	$90 = $50
     17  6378				  -	      .byte	$80+4
     18  6378					      ENDIF
     19  6378				  -	      IF	$90 = $60
     20  6378				  -	      .byte	$C0+4
     21  6378					      ENDIF
     22  6378				  -	      IF	$90 = $70
     23  6378				  -	      .byte	$D0+4
     24  6378					      ENDIF
     25  6378				  -	      IF	$90 = $80
     26  6378				  -	      .byte	$B0+4
     27  6378					      ENDIF
     28  6378					      IF	$90 = $90
     29  6378		       94		      .byte.b	$90+4
     30  6379					      ENDIF
     31  6379				  -	      IF	$90 = $A0
     32  6379				  -	      .byte	$70+4
     33  6379					      ENDIF
     34  6379				  -	      IF	$90 = $B0
     35  6379				  -	      .byte	$50+4
     36  6379					      ENDIF
     37  6379				  -	      IF	$90 = $C0
     38  6379				  -	      .byte	$30+4
     39  6379					      ENDIF
     40  6379				  -	      IF	$90 = $D0
     41  6379				  -	      .byte	$30+4
     42  6379					      ENDIF
     43  6379				  -	      IF	$90 = $E0
     44  6379				  -	      .byte	$20+4
     45  6379					      ENDIF
     46  6379				  -	      IF	$90 = $F0
     47  6379				  -	      .byte	$40+4
     48  6379					      ENDIF
      0  6379					      NTSC_TO_PAL	$90, 4
      1  6379				  -	      IF	$90 = 0
      2  6379				  -	      .byte	$90+4
      3  6379					      ENDIF
      4  6379				  -	      IF	$90 = $10
      5  6379				  -	      .byte	$20+4
      6  6379					      ENDIF
      7  6379				  -	      IF	$90 = $20
      8  6379				  -	      .byte	$40+4
      9  6379					      ENDIF
     10  6379				  -	      IF	$90 = $30
     11  6379				  -	      .byte	$40+4
     12  6379					      ENDIF
     13  6379				  -	      IF	$90 = $40
     14  6379				  -	      .byte	$60+4
     15  6379					      ENDIF
     16  6379				  -	      IF	$90 = $50
     17  6379				  -	      .byte	$80+4
     18  6379					      ENDIF
     19  6379				  -	      IF	$90 = $60
     20  6379				  -	      .byte	$C0+4
     21  6379					      ENDIF
     22  6379				  -	      IF	$90 = $70
     23  6379				  -	      .byte	$D0+4
     24  6379					      ENDIF
     25  6379				  -	      IF	$90 = $80
     26  6379				  -	      .byte	$B0+4
     27  6379					      ENDIF
     28  6379					      IF	$90 = $90
     29  6379		       94		      .byte.b	$90+4
     30  637a					      ENDIF
     31  637a				  -	      IF	$90 = $A0
     32  637a				  -	      .byte	$70+4
     33  637a					      ENDIF
     34  637a				  -	      IF	$90 = $B0
     35  637a				  -	      .byte	$50+4
     36  637a					      ENDIF
     37  637a				  -	      IF	$90 = $C0
     38  637a				  -	      .byte	$30+4
     39  637a					      ENDIF
     40  637a				  -	      IF	$90 = $D0
     41  637a				  -	      .byte	$30+4
     42  637a					      ENDIF
     43  637a				  -	      IF	$90 = $E0
     44  637a				  -	      .byte	$20+4
     45  637a					      ENDIF
     46  637a				  -	      IF	$90 = $F0
     47  637a				  -	      .byte	$40+4
     48  637a					      ENDIF
      0  637a					      NTSC_TO_PAL	$90, 4
      1  637a				  -	      IF	$90 = 0
      2  637a				  -	      .byte	$90+4
      3  637a					      ENDIF
      4  637a				  -	      IF	$90 = $10
      5  637a				  -	      .byte	$20+4
      6  637a					      ENDIF
      7  637a				  -	      IF	$90 = $20
      8  637a				  -	      .byte	$40+4
      9  637a					      ENDIF
     10  637a				  -	      IF	$90 = $30
     11  637a				  -	      .byte	$40+4
     12  637a					      ENDIF
     13  637a				  -	      IF	$90 = $40
     14  637a				  -	      .byte	$60+4
     15  637a					      ENDIF
     16  637a				  -	      IF	$90 = $50
     17  637a				  -	      .byte	$80+4
     18  637a					      ENDIF
     19  637a				  -	      IF	$90 = $60
     20  637a				  -	      .byte	$C0+4
     21  637a					      ENDIF
     22  637a				  -	      IF	$90 = $70
     23  637a				  -	      .byte	$D0+4
     24  637a					      ENDIF
     25  637a				  -	      IF	$90 = $80
     26  637a				  -	      .byte	$B0+4
     27  637a					      ENDIF
     28  637a					      IF	$90 = $90
     29  637a		       94		      .byte.b	$90+4
     30  637b					      ENDIF
     31  637b				  -	      IF	$90 = $A0
     32  637b				  -	      .byte	$70+4
     33  637b					      ENDIF
     34  637b				  -	      IF	$90 = $B0
     35  637b				  -	      .byte	$50+4
     36  637b					      ENDIF
     37  637b				  -	      IF	$90 = $C0
     38  637b				  -	      .byte	$30+4
     39  637b					      ENDIF
     40  637b				  -	      IF	$90 = $D0
     41  637b				  -	      .byte	$30+4
     42  637b					      ENDIF
     43  637b				  -	      IF	$90 = $E0
     44  637b				  -	      .byte	$20+4
     45  637b					      ENDIF
     46  637b				  -	      IF	$90 = $F0
     47  637b				  -	      .byte	$40+4
     48  637b					      ENDIF
      0  637b					      NTSC_TO_PAL	$30, 4
      1  637b				  -	      IF	$30 = 0
      2  637b				  -	      .byte	$30+4
      3  637b					      ENDIF
      4  637b				  -	      IF	$30 = $10
      5  637b				  -	      .byte	$20+4
      6  637b					      ENDIF
      7  637b				  -	      IF	$30 = $20
      8  637b				  -	      .byte	$40+4
      9  637b					      ENDIF
     10  637b					      IF	$30 = $30
     11  637b		       44		      .byte.b	$40+4
     12  637c					      ENDIF
     13  637c				  -	      IF	$30 = $40
     14  637c				  -	      .byte	$60+4
     15  637c					      ENDIF
     16  637c				  -	      IF	$30 = $50
     17  637c				  -	      .byte	$80+4
     18  637c					      ENDIF
     19  637c				  -	      IF	$30 = $60
     20  637c				  -	      .byte	$C0+4
     21  637c					      ENDIF
     22  637c				  -	      IF	$30 = $70
     23  637c				  -	      .byte	$D0+4
     24  637c					      ENDIF
     25  637c				  -	      IF	$30 = $80
     26  637c				  -	      .byte	$B0+4
     27  637c					      ENDIF
     28  637c				  -	      IF	$30 = $90
     29  637c				  -	      .byte	$90+4
     30  637c					      ENDIF
     31  637c				  -	      IF	$30 = $A0
     32  637c				  -	      .byte	$70+4
     33  637c					      ENDIF
     34  637c				  -	      IF	$30 = $B0
     35  637c				  -	      .byte	$50+4
     36  637c					      ENDIF
     37  637c				  -	      IF	$30 = $C0
     38  637c				  -	      .byte	$30+4
     39  637c					      ENDIF
     40  637c				  -	      IF	$30 = $D0
     41  637c				  -	      .byte	$30+4
     42  637c					      ENDIF
     43  637c				  -	      IF	$30 = $E0
     44  637c				  -	      .byte	$20+4
     45  637c					      ENDIF
     46  637c				  -	      IF	$30 = $F0
     47  637c				  -	      .byte	$40+4
     48  637c					      ENDIF
      0  637c					      NTSC_TO_PAL	$0, 12
      1  637c					      IF	$0 = 0
      2  637c		       0c		      .byte.b	$0+12
      3  637d					      ENDIF
      4  637d				  -	      IF	$0 = $10
      5  637d				  -	      .byte	$20+12
      6  637d					      ENDIF
      7  637d				  -	      IF	$0 = $20
      8  637d				  -	      .byte	$40+12
      9  637d					      ENDIF
     10  637d				  -	      IF	$0 = $30
     11  637d				  -	      .byte	$40+12
     12  637d					      ENDIF
     13  637d				  -	      IF	$0 = $40
     14  637d				  -	      .byte	$60+12
     15  637d					      ENDIF
     16  637d				  -	      IF	$0 = $50
     17  637d				  -	      .byte	$80+12
     18  637d					      ENDIF
     19  637d				  -	      IF	$0 = $60
     20  637d				  -	      .byte	$C0+12
     21  637d					      ENDIF
     22  637d				  -	      IF	$0 = $70
     23  637d				  -	      .byte	$D0+12
     24  637d					      ENDIF
     25  637d				  -	      IF	$0 = $80
     26  637d				  -	      .byte	$B0+12
     27  637d					      ENDIF
     28  637d				  -	      IF	$0 = $90
     29  637d				  -	      .byte	$90+12
     30  637d					      ENDIF
     31  637d				  -	      IF	$0 = $A0
     32  637d				  -	      .byte	$70+12
     33  637d					      ENDIF
     34  637d				  -	      IF	$0 = $B0
     35  637d				  -	      .byte	$50+12
     36  637d					      ENDIF
     37  637d				  -	      IF	$0 = $C0
     38  637d				  -	      .byte	$30+12
     39  637d					      ENDIF
     40  637d				  -	      IF	$0 = $D0
     41  637d				  -	      .byte	$30+12
     42  637d					      ENDIF
     43  637d				  -	      IF	$0 = $E0
     44  637d				  -	      .byte	$20+12
     45  637d					      ENDIF
     46  637d				  -	      IF	$0 = $F0
     47  637d				  -	      .byte	$40+12
     48  637d					      ENDIF
      0  637d					      NTSC_TO_PAL	$90, 6
      1  637d				  -	      IF	$90 = 0
      2  637d				  -	      .byte	$90+6
      3  637d					      ENDIF
      4  637d				  -	      IF	$90 = $10
      5  637d				  -	      .byte	$20+6
      6  637d					      ENDIF
      7  637d				  -	      IF	$90 = $20
      8  637d				  -	      .byte	$40+6
      9  637d					      ENDIF
     10  637d				  -	      IF	$90 = $30
     11  637d				  -	      .byte	$40+6
     12  637d					      ENDIF
     13  637d				  -	      IF	$90 = $40
     14  637d				  -	      .byte	$60+6
     15  637d					      ENDIF
     16  637d				  -	      IF	$90 = $50
     17  637d				  -	      .byte	$80+6
     18  637d					      ENDIF
     19  637d				  -	      IF	$90 = $60
     20  637d				  -	      .byte	$C0+6
     21  637d					      ENDIF
     22  637d				  -	      IF	$90 = $70
     23  637d				  -	      .byte	$D0+6
     24  637d					      ENDIF
     25  637d				  -	      IF	$90 = $80
     26  637d				  -	      .byte	$B0+6
     27  637d					      ENDIF
     28  637d					      IF	$90 = $90
     29  637d		       96		      .byte.b	$90+6
     30  637e					      ENDIF
     31  637e				  -	      IF	$90 = $A0
     32  637e				  -	      .byte	$70+6
     33  637e					      ENDIF
     34  637e				  -	      IF	$90 = $B0
     35  637e				  -	      .byte	$50+6
     36  637e					      ENDIF
     37  637e				  -	      IF	$90 = $C0
     38  637e				  -	      .byte	$30+6
     39  637e					      ENDIF
     40  637e				  -	      IF	$90 = $D0
     41  637e				  -	      .byte	$30+6
     42  637e					      ENDIF
     43  637e				  -	      IF	$90 = $E0
     44  637e				  -	      .byte	$20+6
     45  637e					      ENDIF
     46  637e				  -	      IF	$90 = $F0
     47  637e				  -	      .byte	$40+6
     48  637e					      ENDIF
      0  637e					      NTSC_TO_PAL	$90, 6
      1  637e				  -	      IF	$90 = 0
      2  637e				  -	      .byte	$90+6
      3  637e					      ENDIF
      4  637e				  -	      IF	$90 = $10
      5  637e				  -	      .byte	$20+6
      6  637e					      ENDIF
      7  637e				  -	      IF	$90 = $20
      8  637e				  -	      .byte	$40+6
      9  637e					      ENDIF
     10  637e				  -	      IF	$90 = $30
     11  637e				  -	      .byte	$40+6
     12  637e					      ENDIF
     13  637e				  -	      IF	$90 = $40
     14  637e				  -	      .byte	$60+6
     15  637e					      ENDIF
     16  637e				  -	      IF	$90 = $50
     17  637e				  -	      .byte	$80+6
     18  637e					      ENDIF
     19  637e				  -	      IF	$90 = $60
     20  637e				  -	      .byte	$C0+6
     21  637e					      ENDIF
     22  637e				  -	      IF	$90 = $70
     23  637e				  -	      .byte	$D0+6
     24  637e					      ENDIF
     25  637e				  -	      IF	$90 = $80
     26  637e				  -	      .byte	$B0+6
     27  637e					      ENDIF
     28  637e					      IF	$90 = $90
     29  637e		       96		      .byte.b	$90+6
     30  637f					      ENDIF
     31  637f				  -	      IF	$90 = $A0
     32  637f				  -	      .byte	$70+6
     33  637f					      ENDIF
     34  637f				  -	      IF	$90 = $B0
     35  637f				  -	      .byte	$50+6
     36  637f					      ENDIF
     37  637f				  -	      IF	$90 = $C0
     38  637f				  -	      .byte	$30+6
     39  637f					      ENDIF
     40  637f				  -	      IF	$90 = $D0
     41  637f				  -	      .byte	$30+6
     42  637f					      ENDIF
     43  637f				  -	      IF	$90 = $E0
     44  637f				  -	      .byte	$20+6
     45  637f					      ENDIF
     46  637f				  -	      IF	$90 = $F0
     47  637f				  -	      .byte	$40+6
     48  637f					      ENDIF
      0  637f					      NTSC_TO_PAL	$90, 6
      1  637f				  -	      IF	$90 = 0
      2  637f				  -	      .byte	$90+6
      3  637f					      ENDIF
      4  637f				  -	      IF	$90 = $10
      5  637f				  -	      .byte	$20+6
      6  637f					      ENDIF
      7  637f				  -	      IF	$90 = $20
      8  637f				  -	      .byte	$40+6
      9  637f					      ENDIF
     10  637f				  -	      IF	$90 = $30
     11  637f				  -	      .byte	$40+6
     12  637f					      ENDIF
     13  637f				  -	      IF	$90 = $40
     14  637f				  -	      .byte	$60+6
     15  637f					      ENDIF
     16  637f				  -	      IF	$90 = $50
     17  637f				  -	      .byte	$80+6
     18  637f					      ENDIF
     19  637f				  -	      IF	$90 = $60
     20  637f				  -	      .byte	$C0+6
     21  637f					      ENDIF
     22  637f				  -	      IF	$90 = $70
     23  637f				  -	      .byte	$D0+6
     24  637f					      ENDIF
     25  637f				  -	      IF	$90 = $80
     26  637f				  -	      .byte	$B0+6
     27  637f					      ENDIF
     28  637f					      IF	$90 = $90
     29  637f		       96		      .byte.b	$90+6
     30  6380					      ENDIF
     31  6380				  -	      IF	$90 = $A0
     32  6380				  -	      .byte	$70+6
     33  6380					      ENDIF
     34  6380				  -	      IF	$90 = $B0
     35  6380				  -	      .byte	$50+6
     36  6380					      ENDIF
     37  6380				  -	      IF	$90 = $C0
     38  6380				  -	      .byte	$30+6
     39  6380					      ENDIF
     40  6380				  -	      IF	$90 = $D0
     41  6380				  -	      .byte	$30+6
     42  6380					      ENDIF
     43  6380				  -	      IF	$90 = $E0
     44  6380				  -	      .byte	$20+6
     45  6380					      ENDIF
     46  6380				  -	      IF	$90 = $F0
     47  6380				  -	      .byte	$40+6
     48  6380					      ENDIF
      0  6380					      NTSC_TO_PAL	$90, 6
      1  6380				  -	      IF	$90 = 0
      2  6380				  -	      .byte	$90+6
      3  6380					      ENDIF
      4  6380				  -	      IF	$90 = $10
      5  6380				  -	      .byte	$20+6
      6  6380					      ENDIF
      7  6380				  -	      IF	$90 = $20
      8  6380				  -	      .byte	$40+6
      9  6380					      ENDIF
     10  6380				  -	      IF	$90 = $30
     11  6380				  -	      .byte	$40+6
     12  6380					      ENDIF
     13  6380				  -	      IF	$90 = $40
     14  6380				  -	      .byte	$60+6
     15  6380					      ENDIF
     16  6380				  -	      IF	$90 = $50
     17  6380				  -	      .byte	$80+6
     18  6380					      ENDIF
     19  6380				  -	      IF	$90 = $60
     20  6380				  -	      .byte	$C0+6
     21  6380					      ENDIF
     22  6380				  -	      IF	$90 = $70
     23  6380				  -	      .byte	$D0+6
     24  6380					      ENDIF
     25  6380				  -	      IF	$90 = $80
     26  6380				  -	      .byte	$B0+6
     27  6380					      ENDIF
     28  6380					      IF	$90 = $90
     29  6380		       96		      .byte.b	$90+6
     30  6381					      ENDIF
     31  6381				  -	      IF	$90 = $A0
     32  6381				  -	      .byte	$70+6
     33  6381					      ENDIF
     34  6381				  -	      IF	$90 = $B0
     35  6381				  -	      .byte	$50+6
     36  6381					      ENDIF
     37  6381				  -	      IF	$90 = $C0
     38  6381				  -	      .byte	$30+6
     39  6381					      ENDIF
     40  6381				  -	      IF	$90 = $D0
     41  6381				  -	      .byte	$30+6
     42  6381					      ENDIF
     43  6381				  -	      IF	$90 = $E0
     44  6381				  -	      .byte	$20+6
     45  6381					      ENDIF
     46  6381				  -	      IF	$90 = $F0
     47  6381				  -	      .byte	$40+6
     48  6381					      ENDIF
      0  6381					      NTSC_TO_PAL	$90, 6
      1  6381				  -	      IF	$90 = 0
      2  6381				  -	      .byte	$90+6
      3  6381					      ENDIF
      4  6381				  -	      IF	$90 = $10
      5  6381				  -	      .byte	$20+6
      6  6381					      ENDIF
      7  6381				  -	      IF	$90 = $20
      8  6381				  -	      .byte	$40+6
      9  6381					      ENDIF
     10  6381				  -	      IF	$90 = $30
     11  6381				  -	      .byte	$40+6
     12  6381					      ENDIF
     13  6381				  -	      IF	$90 = $40
     14  6381				  -	      .byte	$60+6
     15  6381					      ENDIF
     16  6381				  -	      IF	$90 = $50
     17  6381				  -	      .byte	$80+6
     18  6381					      ENDIF
     19  6381				  -	      IF	$90 = $60
     20  6381				  -	      .byte	$C0+6
     21  6381					      ENDIF
     22  6381				  -	      IF	$90 = $70
     23  6381				  -	      .byte	$D0+6
     24  6381					      ENDIF
     25  6381				  -	      IF	$90 = $80
     26  6381				  -	      .byte	$B0+6
     27  6381					      ENDIF
     28  6381					      IF	$90 = $90
     29  6381		       96		      .byte.b	$90+6
     30  6382					      ENDIF
     31  6382				  -	      IF	$90 = $A0
     32  6382				  -	      .byte	$70+6
     33  6382					      ENDIF
     34  6382				  -	      IF	$90 = $B0
     35  6382				  -	      .byte	$50+6
     36  6382					      ENDIF
     37  6382				  -	      IF	$90 = $C0
     38  6382				  -	      .byte	$30+6
     39  6382					      ENDIF
     40  6382				  -	      IF	$90 = $D0
     41  6382				  -	      .byte	$30+6
     42  6382					      ENDIF
     43  6382				  -	      IF	$90 = $E0
     44  6382				  -	      .byte	$20+6
     45  6382					      ENDIF
     46  6382				  -	      IF	$90 = $F0
     47  6382				  -	      .byte	$40+6
     48  6382					      ENDIF
      0  6382					      NTSC_TO_PAL	$0, 12
      1  6382					      IF	$0 = 0
      2  6382		       0c		      .byte.b	$0+12
      3  6383					      ENDIF
      4  6383				  -	      IF	$0 = $10
      5  6383				  -	      .byte	$20+12
      6  6383					      ENDIF
      7  6383				  -	      IF	$0 = $20
      8  6383				  -	      .byte	$40+12
      9  6383					      ENDIF
     10  6383				  -	      IF	$0 = $30
     11  6383				  -	      .byte	$40+12
     12  6383					      ENDIF
     13  6383				  -	      IF	$0 = $40
     14  6383				  -	      .byte	$60+12
     15  6383					      ENDIF
     16  6383				  -	      IF	$0 = $50
     17  6383				  -	      .byte	$80+12
     18  6383					      ENDIF
     19  6383				  -	      IF	$0 = $60
     20  6383				  -	      .byte	$C0+12
     21  6383					      ENDIF
     22  6383				  -	      IF	$0 = $70
     23  6383				  -	      .byte	$D0+12
     24  6383					      ENDIF
     25  6383				  -	      IF	$0 = $80
     26  6383				  -	      .byte	$B0+12
     27  6383					      ENDIF
     28  6383				  -	      IF	$0 = $90
     29  6383				  -	      .byte	$90+12
     30  6383					      ENDIF
     31  6383				  -	      IF	$0 = $A0
     32  6383				  -	      .byte	$70+12
     33  6383					      ENDIF
     34  6383				  -	      IF	$0 = $B0
     35  6383				  -	      .byte	$50+12
     36  6383					      ENDIF
     37  6383				  -	      IF	$0 = $C0
     38  6383				  -	      .byte	$30+12
     39  6383					      ENDIF
     40  6383				  -	      IF	$0 = $D0
     41  6383				  -	      .byte	$30+12
     42  6383					      ENDIF
     43  6383				  -	      IF	$0 = $E0
     44  6383				  -	      .byte	$20+12
     45  6383					      ENDIF
     46  6383				  -	      IF	$0 = $F0
     47  6383				  -	      .byte	$40+12
     48  6383					      ENDIF
      0  6383					      NTSC_TO_PAL	$30, 8
      1  6383				  -	      IF	$30 = 0
      2  6383				  -	      .byte	$30+8
      3  6383					      ENDIF
      4  6383				  -	      IF	$30 = $10
      5  6383				  -	      .byte	$20+8
      6  6383					      ENDIF
      7  6383				  -	      IF	$30 = $20
      8  6383				  -	      .byte	$40+8
      9  6383					      ENDIF
     10  6383					      IF	$30 = $30
     11  6383		       48		      .byte.b	$40+8
     12  6384					      ENDIF
     13  6384				  -	      IF	$30 = $40
     14  6384				  -	      .byte	$60+8
     15  6384					      ENDIF
     16  6384				  -	      IF	$30 = $50
     17  6384				  -	      .byte	$80+8
     18  6384					      ENDIF
     19  6384				  -	      IF	$30 = $60
     20  6384				  -	      .byte	$C0+8
     21  6384					      ENDIF
     22  6384				  -	      IF	$30 = $70
     23  6384				  -	      .byte	$D0+8
     24  6384					      ENDIF
     25  6384				  -	      IF	$30 = $80
     26  6384				  -	      .byte	$B0+8
     27  6384					      ENDIF
     28  6384				  -	      IF	$30 = $90
     29  6384				  -	      .byte	$90+8
     30  6384					      ENDIF
     31  6384				  -	      IF	$30 = $A0
     32  6384				  -	      .byte	$70+8
     33  6384					      ENDIF
     34  6384				  -	      IF	$30 = $B0
     35  6384				  -	      .byte	$50+8
     36  6384					      ENDIF
     37  6384				  -	      IF	$30 = $C0
     38  6384				  -	      .byte	$30+8
     39  6384					      ENDIF
     40  6384				  -	      IF	$30 = $D0
     41  6384				  -	      .byte	$30+8
     42  6384					      ENDIF
     43  6384				  -	      IF	$30 = $E0
     44  6384				  -	      .byte	$20+8
     45  6384					      ENDIF
     46  6384				  -	      IF	$30 = $F0
     47  6384				  -	      .byte	$40+8
     48  6384					      ENDIF
      0  6384					      NTSC_TO_PAL	$30, 8
      1  6384				  -	      IF	$30 = 0
      2  6384				  -	      .byte	$30+8
      3  6384					      ENDIF
      4  6384				  -	      IF	$30 = $10
      5  6384				  -	      .byte	$20+8
      6  6384					      ENDIF
      7  6384				  -	      IF	$30 = $20
      8  6384				  -	      .byte	$40+8
      9  6384					      ENDIF
     10  6384					      IF	$30 = $30
     11  6384		       48		      .byte.b	$40+8
     12  6385					      ENDIF
     13  6385				  -	      IF	$30 = $40
     14  6385				  -	      .byte	$60+8
     15  6385					      ENDIF
     16  6385				  -	      IF	$30 = $50
     17  6385				  -	      .byte	$80+8
     18  6385					      ENDIF
     19  6385				  -	      IF	$30 = $60
     20  6385				  -	      .byte	$C0+8
     21  6385					      ENDIF
     22  6385				  -	      IF	$30 = $70
     23  6385				  -	      .byte	$D0+8
     24  6385					      ENDIF
     25  6385				  -	      IF	$30 = $80
     26  6385				  -	      .byte	$B0+8
     27  6385					      ENDIF
     28  6385				  -	      IF	$30 = $90
     29  6385				  -	      .byte	$90+8
     30  6385					      ENDIF
     31  6385				  -	      IF	$30 = $A0
     32  6385				  -	      .byte	$70+8
     33  6385					      ENDIF
     34  6385				  -	      IF	$30 = $B0
     35  6385				  -	      .byte	$50+8
     36  6385					      ENDIF
     37  6385				  -	      IF	$30 = $C0
     38  6385				  -	      .byte	$30+8
     39  6385					      ENDIF
     40  6385				  -	      IF	$30 = $D0
     41  6385				  -	      .byte	$30+8
     42  6385					      ENDIF
     43  6385				  -	      IF	$30 = $E0
     44  6385				  -	      .byte	$20+8
     45  6385					      ENDIF
     46  6385				  -	      IF	$30 = $F0
     47  6385				  -	      .byte	$40+8
     48  6385					      ENDIF
      0  6385					      NTSC_TO_PAL	$30, 8
      1  6385				  -	      IF	$30 = 0
      2  6385				  -	      .byte	$30+8
      3  6385					      ENDIF
      4  6385				  -	      IF	$30 = $10
      5  6385				  -	      .byte	$20+8
      6  6385					      ENDIF
      7  6385				  -	      IF	$30 = $20
      8  6385				  -	      .byte	$40+8
      9  6385					      ENDIF
     10  6385					      IF	$30 = $30
     11  6385		       48		      .byte.b	$40+8
     12  6386					      ENDIF
     13  6386				  -	      IF	$30 = $40
     14  6386				  -	      .byte	$60+8
     15  6386					      ENDIF
     16  6386				  -	      IF	$30 = $50
     17  6386				  -	      .byte	$80+8
     18  6386					      ENDIF
     19  6386				  -	      IF	$30 = $60
     20  6386				  -	      .byte	$C0+8
     21  6386					      ENDIF
     22  6386				  -	      IF	$30 = $70
     23  6386				  -	      .byte	$D0+8
     24  6386					      ENDIF
     25  6386				  -	      IF	$30 = $80
     26  6386				  -	      .byte	$B0+8
     27  6386					      ENDIF
     28  6386				  -	      IF	$30 = $90
     29  6386				  -	      .byte	$90+8
     30  6386					      ENDIF
     31  6386				  -	      IF	$30 = $A0
     32  6386				  -	      .byte	$70+8
     33  6386					      ENDIF
     34  6386				  -	      IF	$30 = $B0
     35  6386				  -	      .byte	$50+8
     36  6386					      ENDIF
     37  6386				  -	      IF	$30 = $C0
     38  6386				  -	      .byte	$30+8
     39  6386					      ENDIF
     40  6386				  -	      IF	$30 = $D0
     41  6386				  -	      .byte	$30+8
     42  6386					      ENDIF
     43  6386				  -	      IF	$30 = $E0
     44  6386				  -	      .byte	$20+8
     45  6386					      ENDIF
     46  6386				  -	      IF	$30 = $F0
     47  6386				  -	      .byte	$40+8
     48  6386					      ENDIF
      0  6386					      NTSC_TO_PAL	$30, 8
      1  6386				  -	      IF	$30 = 0
      2  6386				  -	      .byte	$30+8
      3  6386					      ENDIF
      4  6386				  -	      IF	$30 = $10
      5  6386				  -	      .byte	$20+8
      6  6386					      ENDIF
      7  6386				  -	      IF	$30 = $20
      8  6386				  -	      .byte	$40+8
      9  6386					      ENDIF
     10  6386					      IF	$30 = $30
     11  6386		       48		      .byte.b	$40+8
     12  6387					      ENDIF
     13  6387				  -	      IF	$30 = $40
     14  6387				  -	      .byte	$60+8
     15  6387					      ENDIF
     16  6387				  -	      IF	$30 = $50
     17  6387				  -	      .byte	$80+8
     18  6387					      ENDIF
     19  6387				  -	      IF	$30 = $60
     20  6387				  -	      .byte	$C0+8
     21  6387					      ENDIF
     22  6387				  -	      IF	$30 = $70
     23  6387				  -	      .byte	$D0+8
     24  6387					      ENDIF
     25  6387				  -	      IF	$30 = $80
     26  6387				  -	      .byte	$B0+8
     27  6387					      ENDIF
     28  6387				  -	      IF	$30 = $90
     29  6387				  -	      .byte	$90+8
     30  6387					      ENDIF
     31  6387				  -	      IF	$30 = $A0
     32  6387				  -	      .byte	$70+8
     33  6387					      ENDIF
     34  6387				  -	      IF	$30 = $B0
     35  6387				  -	      .byte	$50+8
     36  6387					      ENDIF
     37  6387				  -	      IF	$30 = $C0
     38  6387				  -	      .byte	$30+8
     39  6387					      ENDIF
     40  6387				  -	      IF	$30 = $D0
     41  6387				  -	      .byte	$30+8
     42  6387					      ENDIF
     43  6387				  -	      IF	$30 = $E0
     44  6387				  -	      .byte	$20+8
     45  6387					      ENDIF
     46  6387				  -	      IF	$30 = $F0
     47  6387				  -	      .byte	$40+8
     48  6387					      ENDIF
      0  6387					      NTSC_TO_PAL	$30, 8
      1  6387				  -	      IF	$30 = 0
      2  6387				  -	      .byte	$30+8
      3  6387					      ENDIF
      4  6387				  -	      IF	$30 = $10
      5  6387				  -	      .byte	$20+8
      6  6387					      ENDIF
      7  6387				  -	      IF	$30 = $20
      8  6387				  -	      .byte	$40+8
      9  6387					      ENDIF
     10  6387					      IF	$30 = $30
     11  6387		       48		      .byte.b	$40+8
     12  6388					      ENDIF
     13  6388				  -	      IF	$30 = $40
     14  6388				  -	      .byte	$60+8
     15  6388					      ENDIF
     16  6388				  -	      IF	$30 = $50
     17  6388				  -	      .byte	$80+8
     18  6388					      ENDIF
     19  6388				  -	      IF	$30 = $60
     20  6388				  -	      .byte	$C0+8
     21  6388					      ENDIF
     22  6388				  -	      IF	$30 = $70
     23  6388				  -	      .byte	$D0+8
     24  6388					      ENDIF
     25  6388				  -	      IF	$30 = $80
     26  6388				  -	      .byte	$B0+8
     27  6388					      ENDIF
     28  6388				  -	      IF	$30 = $90
     29  6388				  -	      .byte	$90+8
     30  6388					      ENDIF
     31  6388				  -	      IF	$30 = $A0
     32  6388				  -	      .byte	$70+8
     33  6388					      ENDIF
     34  6388				  -	      IF	$30 = $B0
     35  6388				  -	      .byte	$50+8
     36  6388					      ENDIF
     37  6388				  -	      IF	$30 = $C0
     38  6388				  -	      .byte	$30+8
     39  6388					      ENDIF
     40  6388				  -	      IF	$30 = $D0
     41  6388				  -	      .byte	$30+8
     42  6388					      ENDIF
     43  6388				  -	      IF	$30 = $E0
     44  6388				  -	      .byte	$20+8
     45  6388					      ENDIF
     46  6388				  -	      IF	$30 = $F0
     47  6388				  -	      .byte	$40+8
     48  6388					      ENDIF
      0  6388					      NTSC_TO_PAL	$30, 8
      1  6388				  -	      IF	$30 = 0
      2  6388				  -	      .byte	$30+8
      3  6388					      ENDIF
      4  6388				  -	      IF	$30 = $10
      5  6388				  -	      .byte	$20+8
      6  6388					      ENDIF
      7  6388				  -	      IF	$30 = $20
      8  6388				  -	      .byte	$40+8
      9  6388					      ENDIF
     10  6388					      IF	$30 = $30
     11  6388		       48		      .byte.b	$40+8
     12  6389					      ENDIF
     13  6389				  -	      IF	$30 = $40
     14  6389				  -	      .byte	$60+8
     15  6389					      ENDIF
     16  6389				  -	      IF	$30 = $50
     17  6389				  -	      .byte	$80+8
     18  6389					      ENDIF
     19  6389				  -	      IF	$30 = $60
     20  6389				  -	      .byte	$C0+8
     21  6389					      ENDIF
     22  6389				  -	      IF	$30 = $70
     23  6389				  -	      .byte	$D0+8
     24  6389					      ENDIF
     25  6389				  -	      IF	$30 = $80
     26  6389				  -	      .byte	$B0+8
     27  6389					      ENDIF
     28  6389				  -	      IF	$30 = $90
     29  6389				  -	      .byte	$90+8
     30  6389					      ENDIF
     31  6389				  -	      IF	$30 = $A0
     32  6389				  -	      .byte	$70+8
     33  6389					      ENDIF
     34  6389				  -	      IF	$30 = $B0
     35  6389				  -	      .byte	$50+8
     36  6389					      ENDIF
     37  6389				  -	      IF	$30 = $C0
     38  6389				  -	      .byte	$30+8
     39  6389					      ENDIF
     40  6389				  -	      IF	$30 = $D0
     41  6389				  -	      .byte	$30+8
     42  6389					      ENDIF
     43  6389				  -	      IF	$30 = $E0
     44  6389				  -	      .byte	$20+8
     45  6389					      ENDIF
     46  6389				  -	      IF	$30 = $F0
     47  6389				  -	      .byte	$40+8
     48  6389					      ENDIF
      0  6389					      NTSC_TO_PAL	$10, $C
      1  6389				  -	      IF	$10 = 0
      2  6389				  -	      .byte	$10+$C
      3  6389					      ENDIF
      4  6389					      IF	$10 = $10
      5  6389		       2c		      .byte.b	$20+$C
      6  638a					      ENDIF
      7  638a				  -	      IF	$10 = $20
      8  638a				  -	      .byte	$40+$C
      9  638a					      ENDIF
     10  638a				  -	      IF	$10 = $30
     11  638a				  -	      .byte	$40+$C
     12  638a					      ENDIF
     13  638a				  -	      IF	$10 = $40
     14  638a				  -	      .byte	$60+$C
     15  638a					      ENDIF
     16  638a				  -	      IF	$10 = $50
     17  638a				  -	      .byte	$80+$C
     18  638a					      ENDIF
     19  638a				  -	      IF	$10 = $60
     20  638a				  -	      .byte	$C0+$C
     21  638a					      ENDIF
     22  638a				  -	      IF	$10 = $70
     23  638a				  -	      .byte	$D0+$C
     24  638a					      ENDIF
     25  638a				  -	      IF	$10 = $80
     26  638a				  -	      .byte	$B0+$C
     27  638a					      ENDIF
     28  638a				  -	      IF	$10 = $90
     29  638a				  -	      .byte	$90+$C
     30  638a					      ENDIF
     31  638a				  -	      IF	$10 = $A0
     32  638a				  -	      .byte	$70+$C
     33  638a					      ENDIF
     34  638a				  -	      IF	$10 = $B0
     35  638a				  -	      .byte	$50+$C
     36  638a					      ENDIF
     37  638a				  -	      IF	$10 = $C0
     38  638a				  -	      .byte	$30+$C
     39  638a					      ENDIF
     40  638a				  -	      IF	$10 = $D0
     41  638a				  -	      .byte	$30+$C
     42  638a					      ENDIF
     43  638a				  -	      IF	$10 = $E0
     44  638a				  -	      .byte	$20+$C
     45  638a					      ENDIF
     46  638a				  -	      IF	$10 = $F0
     47  638a				  -	      .byte	$40+$C
     48  638a					      ENDIF
      0  638a					      NTSC_TO_PAL	$10, $C
      1  638a				  -	      IF	$10 = 0
      2  638a				  -	      .byte	$10+$C
      3  638a					      ENDIF
      4  638a					      IF	$10 = $10
      5  638a		       2c		      .byte.b	$20+$C
      6  638b					      ENDIF
      7  638b				  -	      IF	$10 = $20
      8  638b				  -	      .byte	$40+$C
      9  638b					      ENDIF
     10  638b				  -	      IF	$10 = $30
     11  638b				  -	      .byte	$40+$C
     12  638b					      ENDIF
     13  638b				  -	      IF	$10 = $40
     14  638b				  -	      .byte	$60+$C
     15  638b					      ENDIF
     16  638b				  -	      IF	$10 = $50
     17  638b				  -	      .byte	$80+$C
     18  638b					      ENDIF
     19  638b				  -	      IF	$10 = $60
     20  638b				  -	      .byte	$C0+$C
     21  638b					      ENDIF
     22  638b				  -	      IF	$10 = $70
     23  638b				  -	      .byte	$D0+$C
     24  638b					      ENDIF
     25  638b				  -	      IF	$10 = $80
     26  638b				  -	      .byte	$B0+$C
     27  638b					      ENDIF
     28  638b				  -	      IF	$10 = $90
     29  638b				  -	      .byte	$90+$C
     30  638b					      ENDIF
     31  638b				  -	      IF	$10 = $A0
     32  638b				  -	      .byte	$70+$C
     33  638b					      ENDIF
     34  638b				  -	      IF	$10 = $B0
     35  638b				  -	      .byte	$50+$C
     36  638b					      ENDIF
     37  638b				  -	      IF	$10 = $C0
     38  638b				  -	      .byte	$30+$C
     39  638b					      ENDIF
     40  638b				  -	      IF	$10 = $D0
     41  638b				  -	      .byte	$30+$C
     42  638b					      ENDIF
     43  638b				  -	      IF	$10 = $E0
     44  638b				  -	      .byte	$20+$C
     45  638b					      ENDIF
     46  638b				  -	      IF	$10 = $F0
     47  638b				  -	      .byte	$40+$C
     48  638b					      ENDIF
    642  638b
    643  638b				   mancolourPAL2
      0  638b					      NTSC_TO_PAL	$10, 4
      1  638b				  -	      IF	$10 = 0
      2  638b				  -	      .byte	$10+4
      3  638b					      ENDIF
      4  638b					      IF	$10 = $10
      5  638b		       24		      .byte.b	$20+4
      6  638c					      ENDIF
      7  638c				  -	      IF	$10 = $20
      8  638c				  -	      .byte	$40+4
      9  638c					      ENDIF
     10  638c				  -	      IF	$10 = $30
     11  638c				  -	      .byte	$40+4
     12  638c					      ENDIF
     13  638c				  -	      IF	$10 = $40
     14  638c				  -	      .byte	$60+4
     15  638c					      ENDIF
     16  638c				  -	      IF	$10 = $50
     17  638c				  -	      .byte	$80+4
     18  638c					      ENDIF
     19  638c				  -	      IF	$10 = $60
     20  638c				  -	      .byte	$C0+4
     21  638c					      ENDIF
     22  638c				  -	      IF	$10 = $70
     23  638c				  -	      .byte	$D0+4
     24  638c					      ENDIF
     25  638c				  -	      IF	$10 = $80
     26  638c				  -	      .byte	$B0+4
     27  638c					      ENDIF
     28  638c				  -	      IF	$10 = $90
     29  638c				  -	      .byte	$90+4
     30  638c					      ENDIF
     31  638c				  -	      IF	$10 = $A0
     32  638c				  -	      .byte	$70+4
     33  638c					      ENDIF
     34  638c				  -	      IF	$10 = $B0
     35  638c				  -	      .byte	$50+4
     36  638c					      ENDIF
     37  638c				  -	      IF	$10 = $C0
     38  638c				  -	      .byte	$30+4
     39  638c					      ENDIF
     40  638c				  -	      IF	$10 = $D0
     41  638c				  -	      .byte	$30+4
     42  638c					      ENDIF
     43  638c				  -	      IF	$10 = $E0
     44  638c				  -	      .byte	$20+4
     45  638c					      ENDIF
     46  638c				  -	      IF	$10 = $F0
     47  638c				  -	      .byte	$40+4
     48  638c					      ENDIF
      0  638c					      NTSC_TO_PAL	$10, 4
      1  638c				  -	      IF	$10 = 0
      2  638c				  -	      .byte	$10+4
      3  638c					      ENDIF
      4  638c					      IF	$10 = $10
      5  638c		       24		      .byte.b	$20+4
      6  638d					      ENDIF
      7  638d				  -	      IF	$10 = $20
      8  638d				  -	      .byte	$40+4
      9  638d					      ENDIF
     10  638d				  -	      IF	$10 = $30
     11  638d				  -	      .byte	$40+4
     12  638d					      ENDIF
     13  638d				  -	      IF	$10 = $40
     14  638d				  -	      .byte	$60+4
     15  638d					      ENDIF
     16  638d				  -	      IF	$10 = $50
     17  638d				  -	      .byte	$80+4
     18  638d					      ENDIF
     19  638d				  -	      IF	$10 = $60
     20  638d				  -	      .byte	$C0+4
     21  638d					      ENDIF
     22  638d				  -	      IF	$10 = $70
     23  638d				  -	      .byte	$D0+4
     24  638d					      ENDIF
     25  638d				  -	      IF	$10 = $80
     26  638d				  -	      .byte	$B0+4
     27  638d					      ENDIF
     28  638d				  -	      IF	$10 = $90
     29  638d				  -	      .byte	$90+4
     30  638d					      ENDIF
     31  638d				  -	      IF	$10 = $A0
     32  638d				  -	      .byte	$70+4
     33  638d					      ENDIF
     34  638d				  -	      IF	$10 = $B0
     35  638d				  -	      .byte	$50+4
     36  638d					      ENDIF
     37  638d				  -	      IF	$10 = $C0
     38  638d				  -	      .byte	$30+4
     39  638d					      ENDIF
     40  638d				  -	      IF	$10 = $D0
     41  638d				  -	      .byte	$30+4
     42  638d					      ENDIF
     43  638d				  -	      IF	$10 = $E0
     44  638d				  -	      .byte	$20+4
     45  638d					      ENDIF
     46  638d				  -	      IF	$10 = $F0
     47  638d				  -	      .byte	$40+4
     48  638d					      ENDIF
      0  638d					      NTSC_TO_PAL	$90, 4
      1  638d				  -	      IF	$90 = 0
      2  638d				  -	      .byte	$90+4
      3  638d					      ENDIF
      4  638d				  -	      IF	$90 = $10
      5  638d				  -	      .byte	$20+4
      6  638d					      ENDIF
      7  638d				  -	      IF	$90 = $20
      8  638d				  -	      .byte	$40+4
      9  638d					      ENDIF
     10  638d				  -	      IF	$90 = $30
     11  638d				  -	      .byte	$40+4
     12  638d					      ENDIF
     13  638d				  -	      IF	$90 = $40
     14  638d				  -	      .byte	$60+4
     15  638d					      ENDIF
     16  638d				  -	      IF	$90 = $50
     17  638d				  -	      .byte	$80+4
     18  638d					      ENDIF
     19  638d				  -	      IF	$90 = $60
     20  638d				  -	      .byte	$C0+4
     21  638d					      ENDIF
     22  638d				  -	      IF	$90 = $70
     23  638d				  -	      .byte	$D0+4
     24  638d					      ENDIF
     25  638d				  -	      IF	$90 = $80
     26  638d				  -	      .byte	$B0+4
     27  638d					      ENDIF
     28  638d					      IF	$90 = $90
     29  638d		       94		      .byte.b	$90+4
     30  638e					      ENDIF
     31  638e				  -	      IF	$90 = $A0
     32  638e				  -	      .byte	$70+4
     33  638e					      ENDIF
     34  638e				  -	      IF	$90 = $B0
     35  638e				  -	      .byte	$50+4
     36  638e					      ENDIF
     37  638e				  -	      IF	$90 = $C0
     38  638e				  -	      .byte	$30+4
     39  638e					      ENDIF
     40  638e				  -	      IF	$90 = $D0
     41  638e				  -	      .byte	$30+4
     42  638e					      ENDIF
     43  638e				  -	      IF	$90 = $E0
     44  638e				  -	      .byte	$20+4
     45  638e					      ENDIF
     46  638e				  -	      IF	$90 = $F0
     47  638e				  -	      .byte	$40+4
     48  638e					      ENDIF
      0  638e					      NTSC_TO_PAL	$90, 4
      1  638e				  -	      IF	$90 = 0
      2  638e				  -	      .byte	$90+4
      3  638e					      ENDIF
      4  638e				  -	      IF	$90 = $10
      5  638e				  -	      .byte	$20+4
      6  638e					      ENDIF
      7  638e				  -	      IF	$90 = $20
      8  638e				  -	      .byte	$40+4
      9  638e					      ENDIF
     10  638e				  -	      IF	$90 = $30
     11  638e				  -	      .byte	$40+4
     12  638e					      ENDIF
     13  638e				  -	      IF	$90 = $40
     14  638e				  -	      .byte	$60+4
     15  638e					      ENDIF
     16  638e				  -	      IF	$90 = $50
     17  638e				  -	      .byte	$80+4
     18  638e					      ENDIF
     19  638e				  -	      IF	$90 = $60
     20  638e				  -	      .byte	$C0+4
     21  638e					      ENDIF
     22  638e				  -	      IF	$90 = $70
     23  638e				  -	      .byte	$D0+4
     24  638e					      ENDIF
     25  638e				  -	      IF	$90 = $80
     26  638e				  -	      .byte	$B0+4
     27  638e					      ENDIF
     28  638e					      IF	$90 = $90
     29  638e		       94		      .byte.b	$90+4
     30  638f					      ENDIF
     31  638f				  -	      IF	$90 = $A0
     32  638f				  -	      .byte	$70+4
     33  638f					      ENDIF
     34  638f				  -	      IF	$90 = $B0
     35  638f				  -	      .byte	$50+4
     36  638f					      ENDIF
     37  638f				  -	      IF	$90 = $C0
     38  638f				  -	      .byte	$30+4
     39  638f					      ENDIF
     40  638f				  -	      IF	$90 = $D0
     41  638f				  -	      .byte	$30+4
     42  638f					      ENDIF
     43  638f				  -	      IF	$90 = $E0
     44  638f				  -	      .byte	$20+4
     45  638f					      ENDIF
     46  638f				  -	      IF	$90 = $F0
     47  638f				  -	      .byte	$40+4
     48  638f					      ENDIF
      0  638f					      NTSC_TO_PAL	$90, 4
      1  638f				  -	      IF	$90 = 0
      2  638f				  -	      .byte	$90+4
      3  638f					      ENDIF
      4  638f				  -	      IF	$90 = $10
      5  638f				  -	      .byte	$20+4
      6  638f					      ENDIF
      7  638f				  -	      IF	$90 = $20
      8  638f				  -	      .byte	$40+4
      9  638f					      ENDIF
     10  638f				  -	      IF	$90 = $30
     11  638f				  -	      .byte	$40+4
     12  638f					      ENDIF
     13  638f				  -	      IF	$90 = $40
     14  638f				  -	      .byte	$60+4
     15  638f					      ENDIF
     16  638f				  -	      IF	$90 = $50
     17  638f				  -	      .byte	$80+4
     18  638f					      ENDIF
     19  638f				  -	      IF	$90 = $60
     20  638f				  -	      .byte	$C0+4
     21  638f					      ENDIF
     22  638f				  -	      IF	$90 = $70
     23  638f				  -	      .byte	$D0+4
     24  638f					      ENDIF
     25  638f				  -	      IF	$90 = $80
     26  638f				  -	      .byte	$B0+4
     27  638f					      ENDIF
     28  638f					      IF	$90 = $90
     29  638f		       94		      .byte.b	$90+4
     30  6390					      ENDIF
     31  6390				  -	      IF	$90 = $A0
     32  6390				  -	      .byte	$70+4
     33  6390					      ENDIF
     34  6390				  -	      IF	$90 = $B0
     35  6390				  -	      .byte	$50+4
     36  6390					      ENDIF
     37  6390				  -	      IF	$90 = $C0
     38  6390				  -	      .byte	$30+4
     39  6390					      ENDIF
     40  6390				  -	      IF	$90 = $D0
     41  6390				  -	      .byte	$30+4
     42  6390					      ENDIF
     43  6390				  -	      IF	$90 = $E0
     44  6390				  -	      .byte	$20+4
     45  6390					      ENDIF
     46  6390				  -	      IF	$90 = $F0
     47  6390				  -	      .byte	$40+4
     48  6390					      ENDIF
      0  6390					      NTSC_TO_PAL	$90, 4
      1  6390				  -	      IF	$90 = 0
      2  6390				  -	      .byte	$90+4
      3  6390					      ENDIF
      4  6390				  -	      IF	$90 = $10
      5  6390				  -	      .byte	$20+4
      6  6390					      ENDIF
      7  6390				  -	      IF	$90 = $20
      8  6390				  -	      .byte	$40+4
      9  6390					      ENDIF
     10  6390				  -	      IF	$90 = $30
     11  6390				  -	      .byte	$40+4
     12  6390					      ENDIF
     13  6390				  -	      IF	$90 = $40
     14  6390				  -	      .byte	$60+4
     15  6390					      ENDIF
     16  6390				  -	      IF	$90 = $50
     17  6390				  -	      .byte	$80+4
     18  6390					      ENDIF
     19  6390				  -	      IF	$90 = $60
     20  6390				  -	      .byte	$C0+4
     21  6390					      ENDIF
     22  6390				  -	      IF	$90 = $70
     23  6390				  -	      .byte	$D0+4
     24  6390					      ENDIF
     25  6390				  -	      IF	$90 = $80
     26  6390				  -	      .byte	$B0+4
     27  6390					      ENDIF
     28  6390					      IF	$90 = $90
     29  6390		       94		      .byte.b	$90+4
     30  6391					      ENDIF
     31  6391				  -	      IF	$90 = $A0
     32  6391				  -	      .byte	$70+4
     33  6391					      ENDIF
     34  6391				  -	      IF	$90 = $B0
     35  6391				  -	      .byte	$50+4
     36  6391					      ENDIF
     37  6391				  -	      IF	$90 = $C0
     38  6391				  -	      .byte	$30+4
     39  6391					      ENDIF
     40  6391				  -	      IF	$90 = $D0
     41  6391				  -	      .byte	$30+4
     42  6391					      ENDIF
     43  6391				  -	      IF	$90 = $E0
     44  6391				  -	      .byte	$20+4
     45  6391					      ENDIF
     46  6391				  -	      IF	$90 = $F0
     47  6391				  -	      .byte	$40+4
     48  6391					      ENDIF
      0  6391					      NTSC_TO_PAL	$90, 4
      1  6391				  -	      IF	$90 = 0
      2  6391				  -	      .byte	$90+4
      3  6391					      ENDIF
      4  6391				  -	      IF	$90 = $10
      5  6391				  -	      .byte	$20+4
      6  6391					      ENDIF
      7  6391				  -	      IF	$90 = $20
      8  6391				  -	      .byte	$40+4
      9  6391					      ENDIF
     10  6391				  -	      IF	$90 = $30
     11  6391				  -	      .byte	$40+4
     12  6391					      ENDIF
     13  6391				  -	      IF	$90 = $40
     14  6391				  -	      .byte	$60+4
     15  6391					      ENDIF
     16  6391				  -	      IF	$90 = $50
     17  6391				  -	      .byte	$80+4
     18  6391					      ENDIF
     19  6391				  -	      IF	$90 = $60
     20  6391				  -	      .byte	$C0+4
     21  6391					      ENDIF
     22  6391				  -	      IF	$90 = $70
     23  6391				  -	      .byte	$D0+4
     24  6391					      ENDIF
     25  6391				  -	      IF	$90 = $80
     26  6391				  -	      .byte	$B0+4
     27  6391					      ENDIF
     28  6391					      IF	$90 = $90
     29  6391		       94		      .byte.b	$90+4
     30  6392					      ENDIF
     31  6392				  -	      IF	$90 = $A0
     32  6392				  -	      .byte	$70+4
     33  6392					      ENDIF
     34  6392				  -	      IF	$90 = $B0
     35  6392				  -	      .byte	$50+4
     36  6392					      ENDIF
     37  6392				  -	      IF	$90 = $C0
     38  6392				  -	      .byte	$30+4
     39  6392					      ENDIF
     40  6392				  -	      IF	$90 = $D0
     41  6392				  -	      .byte	$30+4
     42  6392					      ENDIF
     43  6392				  -	      IF	$90 = $E0
     44  6392				  -	      .byte	$20+4
     45  6392					      ENDIF
     46  6392				  -	      IF	$90 = $F0
     47  6392				  -	      .byte	$40+4
     48  6392					      ENDIF
      0  6392					      NTSC_TO_PAL	$90, 4
      1  6392				  -	      IF	$90 = 0
      2  6392				  -	      .byte	$90+4
      3  6392					      ENDIF
      4  6392				  -	      IF	$90 = $10
      5  6392				  -	      .byte	$20+4
      6  6392					      ENDIF
      7  6392				  -	      IF	$90 = $20
      8  6392				  -	      .byte	$40+4
      9  6392					      ENDIF
     10  6392				  -	      IF	$90 = $30
     11  6392				  -	      .byte	$40+4
     12  6392					      ENDIF
     13  6392				  -	      IF	$90 = $40
     14  6392				  -	      .byte	$60+4
     15  6392					      ENDIF
     16  6392				  -	      IF	$90 = $50
     17  6392				  -	      .byte	$80+4
     18  6392					      ENDIF
     19  6392				  -	      IF	$90 = $60
     20  6392				  -	      .byte	$C0+4
     21  6392					      ENDIF
     22  6392				  -	      IF	$90 = $70
     23  6392				  -	      .byte	$D0+4
     24  6392					      ENDIF
     25  6392				  -	      IF	$90 = $80
     26  6392				  -	      .byte	$B0+4
     27  6392					      ENDIF
     28  6392					      IF	$90 = $90
     29  6392		       94		      .byte.b	$90+4
     30  6393					      ENDIF
     31  6393				  -	      IF	$90 = $A0
     32  6393				  -	      .byte	$70+4
     33  6393					      ENDIF
     34  6393				  -	      IF	$90 = $B0
     35  6393				  -	      .byte	$50+4
     36  6393					      ENDIF
     37  6393				  -	      IF	$90 = $C0
     38  6393				  -	      .byte	$30+4
     39  6393					      ENDIF
     40  6393				  -	      IF	$90 = $D0
     41  6393				  -	      .byte	$30+4
     42  6393					      ENDIF
     43  6393				  -	      IF	$90 = $E0
     44  6393				  -	      .byte	$20+4
     45  6393					      ENDIF
     46  6393				  -	      IF	$90 = $F0
     47  6393				  -	      .byte	$40+4
     48  6393					      ENDIF
      0  6393					      NTSC_TO_PAL	$30, 4
      1  6393				  -	      IF	$30 = 0
      2  6393				  -	      .byte	$30+4
      3  6393					      ENDIF
      4  6393				  -	      IF	$30 = $10
      5  6393				  -	      .byte	$20+4
      6  6393					      ENDIF
      7  6393				  -	      IF	$30 = $20
      8  6393				  -	      .byte	$40+4
      9  6393					      ENDIF
     10  6393					      IF	$30 = $30
     11  6393		       44		      .byte.b	$40+4
     12  6394					      ENDIF
     13  6394				  -	      IF	$30 = $40
     14  6394				  -	      .byte	$60+4
     15  6394					      ENDIF
     16  6394				  -	      IF	$30 = $50
     17  6394				  -	      .byte	$80+4
     18  6394					      ENDIF
     19  6394				  -	      IF	$30 = $60
     20  6394				  -	      .byte	$C0+4
     21  6394					      ENDIF
     22  6394				  -	      IF	$30 = $70
     23  6394				  -	      .byte	$D0+4
     24  6394					      ENDIF
     25  6394				  -	      IF	$30 = $80
     26  6394				  -	      .byte	$B0+4
     27  6394					      ENDIF
     28  6394				  -	      IF	$30 = $90
     29  6394				  -	      .byte	$90+4
     30  6394					      ENDIF
     31  6394				  -	      IF	$30 = $A0
     32  6394				  -	      .byte	$70+4
     33  6394					      ENDIF
     34  6394				  -	      IF	$30 = $B0
     35  6394				  -	      .byte	$50+4
     36  6394					      ENDIF
     37  6394				  -	      IF	$30 = $C0
     38  6394				  -	      .byte	$30+4
     39  6394					      ENDIF
     40  6394				  -	      IF	$30 = $D0
     41  6394				  -	      .byte	$30+4
     42  6394					      ENDIF
     43  6394				  -	      IF	$30 = $E0
     44  6394				  -	      .byte	$20+4
     45  6394					      ENDIF
     46  6394				  -	      IF	$30 = $F0
     47  6394				  -	      .byte	$40+4
     48  6394					      ENDIF
      0  6394					      NTSC_TO_PAL	$0,12
      1  6394					      IF	$0 = 0
      2  6394		       0c		      .byte.b	$0+12
      3  6395					      ENDIF
      4  6395				  -	      IF	$0 = $10
      5  6395				  -	      .byte	$20+12
      6  6395					      ENDIF
      7  6395				  -	      IF	$0 = $20
      8  6395				  -	      .byte	$40+12
      9  6395					      ENDIF
     10  6395				  -	      IF	$0 = $30
     11  6395				  -	      .byte	$40+12
     12  6395					      ENDIF
     13  6395				  -	      IF	$0 = $40
     14  6395				  -	      .byte	$60+12
     15  6395					      ENDIF
     16  6395				  -	      IF	$0 = $50
     17  6395				  -	      .byte	$80+12
     18  6395					      ENDIF
     19  6395				  -	      IF	$0 = $60
     20  6395				  -	      .byte	$C0+12
     21  6395					      ENDIF
     22  6395				  -	      IF	$0 = $70
     23  6395				  -	      .byte	$D0+12
     24  6395					      ENDIF
     25  6395				  -	      IF	$0 = $80
     26  6395				  -	      .byte	$B0+12
     27  6395					      ENDIF
     28  6395				  -	      IF	$0 = $90
     29  6395				  -	      .byte	$90+12
     30  6395					      ENDIF
     31  6395				  -	      IF	$0 = $A0
     32  6395				  -	      .byte	$70+12
     33  6395					      ENDIF
     34  6395				  -	      IF	$0 = $B0
     35  6395				  -	      .byte	$50+12
     36  6395					      ENDIF
     37  6395				  -	      IF	$0 = $C0
     38  6395				  -	      .byte	$30+12
     39  6395					      ENDIF
     40  6395				  -	      IF	$0 = $D0
     41  6395				  -	      .byte	$30+12
     42  6395					      ENDIF
     43  6395				  -	      IF	$0 = $E0
     44  6395				  -	      .byte	$20+12
     45  6395					      ENDIF
     46  6395				  -	      IF	$0 = $F0
     47  6395				  -	      .byte	$40+12
     48  6395					      ENDIF
      0  6395					      NTSC_TO_PAL	$90, 6
      1  6395				  -	      IF	$90 = 0
      2  6395				  -	      .byte	$90+6
      3  6395					      ENDIF
      4  6395				  -	      IF	$90 = $10
      5  6395				  -	      .byte	$20+6
      6  6395					      ENDIF
      7  6395				  -	      IF	$90 = $20
      8  6395				  -	      .byte	$40+6
      9  6395					      ENDIF
     10  6395				  -	      IF	$90 = $30
     11  6395				  -	      .byte	$40+6
     12  6395					      ENDIF
     13  6395				  -	      IF	$90 = $40
     14  6395				  -	      .byte	$60+6
     15  6395					      ENDIF
     16  6395				  -	      IF	$90 = $50
     17  6395				  -	      .byte	$80+6
     18  6395					      ENDIF
     19  6395				  -	      IF	$90 = $60
     20  6395				  -	      .byte	$C0+6
     21  6395					      ENDIF
     22  6395				  -	      IF	$90 = $70
     23  6395				  -	      .byte	$D0+6
     24  6395					      ENDIF
     25  6395				  -	      IF	$90 = $80
     26  6395				  -	      .byte	$B0+6
     27  6395					      ENDIF
     28  6395					      IF	$90 = $90
     29  6395		       96		      .byte.b	$90+6
     30  6396					      ENDIF
     31  6396				  -	      IF	$90 = $A0
     32  6396				  -	      .byte	$70+6
     33  6396					      ENDIF
     34  6396				  -	      IF	$90 = $B0
     35  6396				  -	      .byte	$50+6
     36  6396					      ENDIF
     37  6396				  -	      IF	$90 = $C0
     38  6396				  -	      .byte	$30+6
     39  6396					      ENDIF
     40  6396				  -	      IF	$90 = $D0
     41  6396				  -	      .byte	$30+6
     42  6396					      ENDIF
     43  6396				  -	      IF	$90 = $E0
     44  6396				  -	      .byte	$20+6
     45  6396					      ENDIF
     46  6396				  -	      IF	$90 = $F0
     47  6396				  -	      .byte	$40+6
     48  6396					      ENDIF
      0  6396					      NTSC_TO_PAL	$90, 6
      1  6396				  -	      IF	$90 = 0
      2  6396				  -	      .byte	$90+6
      3  6396					      ENDIF
      4  6396				  -	      IF	$90 = $10
      5  6396				  -	      .byte	$20+6
      6  6396					      ENDIF
      7  6396				  -	      IF	$90 = $20
      8  6396				  -	      .byte	$40+6
      9  6396					      ENDIF
     10  6396				  -	      IF	$90 = $30
     11  6396				  -	      .byte	$40+6
     12  6396					      ENDIF
     13  6396				  -	      IF	$90 = $40
     14  6396				  -	      .byte	$60+6
     15  6396					      ENDIF
     16  6396				  -	      IF	$90 = $50
     17  6396				  -	      .byte	$80+6
     18  6396					      ENDIF
     19  6396				  -	      IF	$90 = $60
     20  6396				  -	      .byte	$C0+6
     21  6396					      ENDIF
     22  6396				  -	      IF	$90 = $70
     23  6396				  -	      .byte	$D0+6
     24  6396					      ENDIF
     25  6396				  -	      IF	$90 = $80
     26  6396				  -	      .byte	$B0+6
     27  6396					      ENDIF
     28  6396					      IF	$90 = $90
     29  6396		       96		      .byte.b	$90+6
     30  6397					      ENDIF
     31  6397				  -	      IF	$90 = $A0
     32  6397				  -	      .byte	$70+6
     33  6397					      ENDIF
     34  6397				  -	      IF	$90 = $B0
     35  6397				  -	      .byte	$50+6
     36  6397					      ENDIF
     37  6397				  -	      IF	$90 = $C0
     38  6397				  -	      .byte	$30+6
     39  6397					      ENDIF
     40  6397				  -	      IF	$90 = $D0
     41  6397				  -	      .byte	$30+6
     42  6397					      ENDIF
     43  6397				  -	      IF	$90 = $E0
     44  6397				  -	      .byte	$20+6
     45  6397					      ENDIF
     46  6397				  -	      IF	$90 = $F0
     47  6397				  -	      .byte	$40+6
     48  6397					      ENDIF
      0  6397					      NTSC_TO_PAL	$90, 6
      1  6397				  -	      IF	$90 = 0
      2  6397				  -	      .byte	$90+6
      3  6397					      ENDIF
      4  6397				  -	      IF	$90 = $10
      5  6397				  -	      .byte	$20+6
      6  6397					      ENDIF
      7  6397				  -	      IF	$90 = $20
      8  6397				  -	      .byte	$40+6
      9  6397					      ENDIF
     10  6397				  -	      IF	$90 = $30
     11  6397				  -	      .byte	$40+6
     12  6397					      ENDIF
     13  6397				  -	      IF	$90 = $40
     14  6397				  -	      .byte	$60+6
     15  6397					      ENDIF
     16  6397				  -	      IF	$90 = $50
     17  6397				  -	      .byte	$80+6
     18  6397					      ENDIF
     19  6397				  -	      IF	$90 = $60
     20  6397				  -	      .byte	$C0+6
     21  6397					      ENDIF
     22  6397				  -	      IF	$90 = $70
     23  6397				  -	      .byte	$D0+6
     24  6397					      ENDIF
     25  6397				  -	      IF	$90 = $80
     26  6397				  -	      .byte	$B0+6
     27  6397					      ENDIF
     28  6397					      IF	$90 = $90
     29  6397		       96		      .byte.b	$90+6
     30  6398					      ENDIF
     31  6398				  -	      IF	$90 = $A0
     32  6398				  -	      .byte	$70+6
     33  6398					      ENDIF
     34  6398				  -	      IF	$90 = $B0
     35  6398				  -	      .byte	$50+6
     36  6398					      ENDIF
     37  6398				  -	      IF	$90 = $C0
     38  6398				  -	      .byte	$30+6
     39  6398					      ENDIF
     40  6398				  -	      IF	$90 = $D0
     41  6398				  -	      .byte	$30+6
     42  6398					      ENDIF
     43  6398				  -	      IF	$90 = $E0
     44  6398				  -	      .byte	$20+6
     45  6398					      ENDIF
     46  6398				  -	      IF	$90 = $F0
     47  6398				  -	      .byte	$40+6
     48  6398					      ENDIF
      0  6398					      NTSC_TO_PAL	$90, 6
      1  6398				  -	      IF	$90 = 0
      2  6398				  -	      .byte	$90+6
      3  6398					      ENDIF
      4  6398				  -	      IF	$90 = $10
      5  6398				  -	      .byte	$20+6
      6  6398					      ENDIF
      7  6398				  -	      IF	$90 = $20
      8  6398				  -	      .byte	$40+6
      9  6398					      ENDIF
     10  6398				  -	      IF	$90 = $30
     11  6398				  -	      .byte	$40+6
     12  6398					      ENDIF
     13  6398				  -	      IF	$90 = $40
     14  6398				  -	      .byte	$60+6
     15  6398					      ENDIF
     16  6398				  -	      IF	$90 = $50
     17  6398				  -	      .byte	$80+6
     18  6398					      ENDIF
     19  6398				  -	      IF	$90 = $60
     20  6398				  -	      .byte	$C0+6
     21  6398					      ENDIF
     22  6398				  -	      IF	$90 = $70
     23  6398				  -	      .byte	$D0+6
     24  6398					      ENDIF
     25  6398				  -	      IF	$90 = $80
     26  6398				  -	      .byte	$B0+6
     27  6398					      ENDIF
     28  6398					      IF	$90 = $90
     29  6398		       96		      .byte.b	$90+6
     30  6399					      ENDIF
     31  6399				  -	      IF	$90 = $A0
     32  6399				  -	      .byte	$70+6
     33  6399					      ENDIF
     34  6399				  -	      IF	$90 = $B0
     35  6399				  -	      .byte	$50+6
     36  6399					      ENDIF
     37  6399				  -	      IF	$90 = $C0
     38  6399				  -	      .byte	$30+6
     39  6399					      ENDIF
     40  6399				  -	      IF	$90 = $D0
     41  6399				  -	      .byte	$30+6
     42  6399					      ENDIF
     43  6399				  -	      IF	$90 = $E0
     44  6399				  -	      .byte	$20+6
     45  6399					      ENDIF
     46  6399				  -	      IF	$90 = $F0
     47  6399				  -	      .byte	$40+6
     48  6399					      ENDIF
      0  6399					      NTSC_TO_PAL	$90, 6
      1  6399				  -	      IF	$90 = 0
      2  6399				  -	      .byte	$90+6
      3  6399					      ENDIF
      4  6399				  -	      IF	$90 = $10
      5  6399				  -	      .byte	$20+6
      6  6399					      ENDIF
      7  6399				  -	      IF	$90 = $20
      8  6399				  -	      .byte	$40+6
      9  6399					      ENDIF
     10  6399				  -	      IF	$90 = $30
     11  6399				  -	      .byte	$40+6
     12  6399					      ENDIF
     13  6399				  -	      IF	$90 = $40
     14  6399				  -	      .byte	$60+6
     15  6399					      ENDIF
     16  6399				  -	      IF	$90 = $50
     17  6399				  -	      .byte	$80+6
     18  6399					      ENDIF
     19  6399				  -	      IF	$90 = $60
     20  6399				  -	      .byte	$C0+6
     21  6399					      ENDIF
     22  6399				  -	      IF	$90 = $70
     23  6399				  -	      .byte	$D0+6
     24  6399					      ENDIF
     25  6399				  -	      IF	$90 = $80
     26  6399				  -	      .byte	$B0+6
     27  6399					      ENDIF
     28  6399					      IF	$90 = $90
     29  6399		       96		      .byte.b	$90+6
     30  639a					      ENDIF
     31  639a				  -	      IF	$90 = $A0
     32  639a				  -	      .byte	$70+6
     33  639a					      ENDIF
     34  639a				  -	      IF	$90 = $B0
     35  639a				  -	      .byte	$50+6
     36  639a					      ENDIF
     37  639a				  -	      IF	$90 = $C0
     38  639a				  -	      .byte	$30+6
     39  639a					      ENDIF
     40  639a				  -	      IF	$90 = $D0
     41  639a				  -	      .byte	$30+6
     42  639a					      ENDIF
     43  639a				  -	      IF	$90 = $E0
     44  639a				  -	      .byte	$20+6
     45  639a					      ENDIF
     46  639a				  -	      IF	$90 = $F0
     47  639a				  -	      .byte	$40+6
     48  639a					      ENDIF
      0  639a					      NTSC_TO_PAL	$0, 12
      1  639a					      IF	$0 = 0
      2  639a		       0c		      .byte.b	$0+12
      3  639b					      ENDIF
      4  639b				  -	      IF	$0 = $10
      5  639b				  -	      .byte	$20+12
      6  639b					      ENDIF
      7  639b				  -	      IF	$0 = $20
      8  639b				  -	      .byte	$40+12
      9  639b					      ENDIF
     10  639b				  -	      IF	$0 = $30
     11  639b				  -	      .byte	$40+12
     12  639b					      ENDIF
     13  639b				  -	      IF	$0 = $40
     14  639b				  -	      .byte	$60+12
     15  639b					      ENDIF
     16  639b				  -	      IF	$0 = $50
     17  639b				  -	      .byte	$80+12
     18  639b					      ENDIF
     19  639b				  -	      IF	$0 = $60
     20  639b				  -	      .byte	$C0+12
     21  639b					      ENDIF
     22  639b				  -	      IF	$0 = $70
     23  639b				  -	      .byte	$D0+12
     24  639b					      ENDIF
     25  639b				  -	      IF	$0 = $80
     26  639b				  -	      .byte	$B0+12
     27  639b					      ENDIF
     28  639b				  -	      IF	$0 = $90
     29  639b				  -	      .byte	$90+12
     30  639b					      ENDIF
     31  639b				  -	      IF	$0 = $A0
     32  639b				  -	      .byte	$70+12
     33  639b					      ENDIF
     34  639b				  -	      IF	$0 = $B0
     35  639b				  -	      .byte	$50+12
     36  639b					      ENDIF
     37  639b				  -	      IF	$0 = $C0
     38  639b				  -	      .byte	$30+12
     39  639b					      ENDIF
     40  639b				  -	      IF	$0 = $D0
     41  639b				  -	      .byte	$30+12
     42  639b					      ENDIF
     43  639b				  -	      IF	$0 = $E0
     44  639b				  -	      .byte	$20+12
     45  639b					      ENDIF
     46  639b				  -	      IF	$0 = $F0
     47  639b				  -	      .byte	$40+12
     48  639b					      ENDIF
      0  639b					      NTSC_TO_PAL	$30, 8
      1  639b				  -	      IF	$30 = 0
      2  639b				  -	      .byte	$30+8
      3  639b					      ENDIF
      4  639b				  -	      IF	$30 = $10
      5  639b				  -	      .byte	$20+8
      6  639b					      ENDIF
      7  639b				  -	      IF	$30 = $20
      8  639b				  -	      .byte	$40+8
      9  639b					      ENDIF
     10  639b					      IF	$30 = $30
     11  639b		       48		      .byte.b	$40+8
     12  639c					      ENDIF
     13  639c				  -	      IF	$30 = $40
     14  639c				  -	      .byte	$60+8
     15  639c					      ENDIF
     16  639c				  -	      IF	$30 = $50
     17  639c				  -	      .byte	$80+8
     18  639c					      ENDIF
     19  639c				  -	      IF	$30 = $60
     20  639c				  -	      .byte	$C0+8
     21  639c					      ENDIF
     22  639c				  -	      IF	$30 = $70
     23  639c				  -	      .byte	$D0+8
     24  639c					      ENDIF
     25  639c				  -	      IF	$30 = $80
     26  639c				  -	      .byte	$B0+8
     27  639c					      ENDIF
     28  639c				  -	      IF	$30 = $90
     29  639c				  -	      .byte	$90+8
     30  639c					      ENDIF
     31  639c				  -	      IF	$30 = $A0
     32  639c				  -	      .byte	$70+8
     33  639c					      ENDIF
     34  639c				  -	      IF	$30 = $B0
     35  639c				  -	      .byte	$50+8
     36  639c					      ENDIF
     37  639c				  -	      IF	$30 = $C0
     38  639c				  -	      .byte	$30+8
     39  639c					      ENDIF
     40  639c				  -	      IF	$30 = $D0
     41  639c				  -	      .byte	$30+8
     42  639c					      ENDIF
     43  639c				  -	      IF	$30 = $E0
     44  639c				  -	      .byte	$20+8
     45  639c					      ENDIF
     46  639c				  -	      IF	$30 = $F0
     47  639c				  -	      .byte	$40+8
     48  639c					      ENDIF
      0  639c					      NTSC_TO_PAL	$30, 8
      1  639c				  -	      IF	$30 = 0
      2  639c				  -	      .byte	$30+8
      3  639c					      ENDIF
      4  639c				  -	      IF	$30 = $10
      5  639c				  -	      .byte	$20+8
      6  639c					      ENDIF
      7  639c				  -	      IF	$30 = $20
      8  639c				  -	      .byte	$40+8
      9  639c					      ENDIF
     10  639c					      IF	$30 = $30
     11  639c		       48		      .byte.b	$40+8
     12  639d					      ENDIF
     13  639d				  -	      IF	$30 = $40
     14  639d				  -	      .byte	$60+8
     15  639d					      ENDIF
     16  639d				  -	      IF	$30 = $50
     17  639d				  -	      .byte	$80+8
     18  639d					      ENDIF
     19  639d				  -	      IF	$30 = $60
     20  639d				  -	      .byte	$C0+8
     21  639d					      ENDIF
     22  639d				  -	      IF	$30 = $70
     23  639d				  -	      .byte	$D0+8
     24  639d					      ENDIF
     25  639d				  -	      IF	$30 = $80
     26  639d				  -	      .byte	$B0+8
     27  639d					      ENDIF
     28  639d				  -	      IF	$30 = $90
     29  639d				  -	      .byte	$90+8
     30  639d					      ENDIF
     31  639d				  -	      IF	$30 = $A0
     32  639d				  -	      .byte	$70+8
     33  639d					      ENDIF
     34  639d				  -	      IF	$30 = $B0
     35  639d				  -	      .byte	$50+8
     36  639d					      ENDIF
     37  639d				  -	      IF	$30 = $C0
     38  639d				  -	      .byte	$30+8
     39  639d					      ENDIF
     40  639d				  -	      IF	$30 = $D0
     41  639d				  -	      .byte	$30+8
     42  639d					      ENDIF
     43  639d				  -	      IF	$30 = $E0
     44  639d				  -	      .byte	$20+8
     45  639d					      ENDIF
     46  639d				  -	      IF	$30 = $F0
     47  639d				  -	      .byte	$40+8
     48  639d					      ENDIF
      0  639d					      NTSC_TO_PAL	$30, 8
      1  639d				  -	      IF	$30 = 0
      2  639d				  -	      .byte	$30+8
      3  639d					      ENDIF
      4  639d				  -	      IF	$30 = $10
      5  639d				  -	      .byte	$20+8
      6  639d					      ENDIF
      7  639d				  -	      IF	$30 = $20
      8  639d				  -	      .byte	$40+8
      9  639d					      ENDIF
     10  639d					      IF	$30 = $30
     11  639d		       48		      .byte.b	$40+8
     12  639e					      ENDIF
     13  639e				  -	      IF	$30 = $40
     14  639e				  -	      .byte	$60+8
     15  639e					      ENDIF
     16  639e				  -	      IF	$30 = $50
     17  639e				  -	      .byte	$80+8
     18  639e					      ENDIF
     19  639e				  -	      IF	$30 = $60
     20  639e				  -	      .byte	$C0+8
     21  639e					      ENDIF
     22  639e				  -	      IF	$30 = $70
     23  639e				  -	      .byte	$D0+8
     24  639e					      ENDIF
     25  639e				  -	      IF	$30 = $80
     26  639e				  -	      .byte	$B0+8
     27  639e					      ENDIF
     28  639e				  -	      IF	$30 = $90
     29  639e				  -	      .byte	$90+8
     30  639e					      ENDIF
     31  639e				  -	      IF	$30 = $A0
     32  639e				  -	      .byte	$70+8
     33  639e					      ENDIF
     34  639e				  -	      IF	$30 = $B0
     35  639e				  -	      .byte	$50+8
     36  639e					      ENDIF
     37  639e				  -	      IF	$30 = $C0
     38  639e				  -	      .byte	$30+8
     39  639e					      ENDIF
     40  639e				  -	      IF	$30 = $D0
     41  639e				  -	      .byte	$30+8
     42  639e					      ENDIF
     43  639e				  -	      IF	$30 = $E0
     44  639e				  -	      .byte	$20+8
     45  639e					      ENDIF
     46  639e				  -	      IF	$30 = $F0
     47  639e				  -	      .byte	$40+8
     48  639e					      ENDIF
      0  639e					      NTSC_TO_PAL	$30, 8
      1  639e				  -	      IF	$30 = 0
      2  639e				  -	      .byte	$30+8
      3  639e					      ENDIF
      4  639e				  -	      IF	$30 = $10
      5  639e				  -	      .byte	$20+8
      6  639e					      ENDIF
      7  639e				  -	      IF	$30 = $20
      8  639e				  -	      .byte	$40+8
      9  639e					      ENDIF
     10  639e					      IF	$30 = $30
     11  639e		       48		      .byte.b	$40+8
     12  639f					      ENDIF
     13  639f				  -	      IF	$30 = $40
     14  639f				  -	      .byte	$60+8
     15  639f					      ENDIF
     16  639f				  -	      IF	$30 = $50
     17  639f				  -	      .byte	$80+8
     18  639f					      ENDIF
     19  639f				  -	      IF	$30 = $60
     20  639f				  -	      .byte	$C0+8
     21  639f					      ENDIF
     22  639f				  -	      IF	$30 = $70
     23  639f				  -	      .byte	$D0+8
     24  639f					      ENDIF
     25  639f				  -	      IF	$30 = $80
     26  639f				  -	      .byte	$B0+8
     27  639f					      ENDIF
     28  639f				  -	      IF	$30 = $90
     29  639f				  -	      .byte	$90+8
     30  639f					      ENDIF
     31  639f				  -	      IF	$30 = $A0
     32  639f				  -	      .byte	$70+8
     33  639f					      ENDIF
     34  639f				  -	      IF	$30 = $B0
     35  639f				  -	      .byte	$50+8
     36  639f					      ENDIF
     37  639f				  -	      IF	$30 = $C0
     38  639f				  -	      .byte	$30+8
     39  639f					      ENDIF
     40  639f				  -	      IF	$30 = $D0
     41  639f				  -	      .byte	$30+8
     42  639f					      ENDIF
     43  639f				  -	      IF	$30 = $E0
     44  639f				  -	      .byte	$20+8
     45  639f					      ENDIF
     46  639f				  -	      IF	$30 = $F0
     47  639f				  -	      .byte	$40+8
     48  639f					      ENDIF
      0  639f					      NTSC_TO_PAL	$30, 8
      1  639f				  -	      IF	$30 = 0
      2  639f				  -	      .byte	$30+8
      3  639f					      ENDIF
      4  639f				  -	      IF	$30 = $10
      5  639f				  -	      .byte	$20+8
      6  639f					      ENDIF
      7  639f				  -	      IF	$30 = $20
      8  639f				  -	      .byte	$40+8
      9  639f					      ENDIF
     10  639f					      IF	$30 = $30
     11  639f		       48		      .byte.b	$40+8
     12  63a0					      ENDIF
     13  63a0				  -	      IF	$30 = $40
     14  63a0				  -	      .byte	$60+8
     15  63a0					      ENDIF
     16  63a0				  -	      IF	$30 = $50
     17  63a0				  -	      .byte	$80+8
     18  63a0					      ENDIF
     19  63a0				  -	      IF	$30 = $60
     20  63a0				  -	      .byte	$C0+8
     21  63a0					      ENDIF
     22  63a0				  -	      IF	$30 = $70
     23  63a0				  -	      .byte	$D0+8
     24  63a0					      ENDIF
     25  63a0				  -	      IF	$30 = $80
     26  63a0				  -	      .byte	$B0+8
     27  63a0					      ENDIF
     28  63a0				  -	      IF	$30 = $90
     29  63a0				  -	      .byte	$90+8
     30  63a0					      ENDIF
     31  63a0				  -	      IF	$30 = $A0
     32  63a0				  -	      .byte	$70+8
     33  63a0					      ENDIF
     34  63a0				  -	      IF	$30 = $B0
     35  63a0				  -	      .byte	$50+8
     36  63a0					      ENDIF
     37  63a0				  -	      IF	$30 = $C0
     38  63a0				  -	      .byte	$30+8
     39  63a0					      ENDIF
     40  63a0				  -	      IF	$30 = $D0
     41  63a0				  -	      .byte	$30+8
     42  63a0					      ENDIF
     43  63a0				  -	      IF	$30 = $E0
     44  63a0				  -	      .byte	$20+8
     45  63a0					      ENDIF
     46  63a0				  -	      IF	$30 = $F0
     47  63a0				  -	      .byte	$40+8
     48  63a0					      ENDIF
      0  63a0					      NTSC_TO_PAL	$30, 8
      1  63a0				  -	      IF	$30 = 0
      2  63a0				  -	      .byte	$30+8
      3  63a0					      ENDIF
      4  63a0				  -	      IF	$30 = $10
      5  63a0				  -	      .byte	$20+8
      6  63a0					      ENDIF
      7  63a0				  -	      IF	$30 = $20
      8  63a0				  -	      .byte	$40+8
      9  63a0					      ENDIF
     10  63a0					      IF	$30 = $30
     11  63a0		       48		      .byte.b	$40+8
     12  63a1					      ENDIF
     13  63a1				  -	      IF	$30 = $40
     14  63a1				  -	      .byte	$60+8
     15  63a1					      ENDIF
     16  63a1				  -	      IF	$30 = $50
     17  63a1				  -	      .byte	$80+8
     18  63a1					      ENDIF
     19  63a1				  -	      IF	$30 = $60
     20  63a1				  -	      .byte	$C0+8
     21  63a1					      ENDIF
     22  63a1				  -	      IF	$30 = $70
     23  63a1				  -	      .byte	$D0+8
     24  63a1					      ENDIF
     25  63a1				  -	      IF	$30 = $80
     26  63a1				  -	      .byte	$B0+8
     27  63a1					      ENDIF
     28  63a1				  -	      IF	$30 = $90
     29  63a1				  -	      .byte	$90+8
     30  63a1					      ENDIF
     31  63a1				  -	      IF	$30 = $A0
     32  63a1				  -	      .byte	$70+8
     33  63a1					      ENDIF
     34  63a1				  -	      IF	$30 = $B0
     35  63a1				  -	      .byte	$50+8
     36  63a1					      ENDIF
     37  63a1				  -	      IF	$30 = $C0
     38  63a1				  -	      .byte	$30+8
     39  63a1					      ENDIF
     40  63a1				  -	      IF	$30 = $D0
     41  63a1				  -	      .byte	$30+8
     42  63a1					      ENDIF
     43  63a1				  -	      IF	$30 = $E0
     44  63a1				  -	      .byte	$20+8
     45  63a1					      ENDIF
     46  63a1				  -	      IF	$30 = $F0
     47  63a1				  -	      .byte	$40+8
     48  63a1					      ENDIF
      0  63a1					      NTSC_TO_PAL	$10, $C
      1  63a1				  -	      IF	$10 = 0
      2  63a1				  -	      .byte	$10+$C
      3  63a1					      ENDIF
      4  63a1					      IF	$10 = $10
      5  63a1		       2c		      .byte.b	$20+$C
      6  63a2					      ENDIF
      7  63a2				  -	      IF	$10 = $20
      8  63a2				  -	      .byte	$40+$C
      9  63a2					      ENDIF
     10  63a2				  -	      IF	$10 = $30
     11  63a2				  -	      .byte	$40+$C
     12  63a2					      ENDIF
     13  63a2				  -	      IF	$10 = $40
     14  63a2				  -	      .byte	$60+$C
     15  63a2					      ENDIF
     16  63a2				  -	      IF	$10 = $50
     17  63a2				  -	      .byte	$80+$C
     18  63a2					      ENDIF
     19  63a2				  -	      IF	$10 = $60
     20  63a2				  -	      .byte	$C0+$C
     21  63a2					      ENDIF
     22  63a2				  -	      IF	$10 = $70
     23  63a2				  -	      .byte	$D0+$C
     24  63a2					      ENDIF
     25  63a2				  -	      IF	$10 = $80
     26  63a2				  -	      .byte	$B0+$C
     27  63a2					      ENDIF
     28  63a2				  -	      IF	$10 = $90
     29  63a2				  -	      .byte	$90+$C
     30  63a2					      ENDIF
     31  63a2				  -	      IF	$10 = $A0
     32  63a2				  -	      .byte	$70+$C
     33  63a2					      ENDIF
     34  63a2				  -	      IF	$10 = $B0
     35  63a2				  -	      .byte	$50+$C
     36  63a2					      ENDIF
     37  63a2				  -	      IF	$10 = $C0
     38  63a2				  -	      .byte	$30+$C
     39  63a2					      ENDIF
     40  63a2				  -	      IF	$10 = $D0
     41  63a2				  -	      .byte	$30+$C
     42  63a2					      ENDIF
     43  63a2				  -	      IF	$10 = $E0
     44  63a2				  -	      .byte	$20+$C
     45  63a2					      ENDIF
     46  63a2				  -	      IF	$10 = $F0
     47  63a2				  -	      .byte	$40+$C
     48  63a2					      ENDIF
      0  63a2					      NTSC_TO_PAL	$10, $C
      1  63a2				  -	      IF	$10 = 0
      2  63a2				  -	      .byte	$10+$C
      3  63a2					      ENDIF
      4  63a2					      IF	$10 = $10
      5  63a2		       2c		      .byte.b	$20+$C
      6  63a3					      ENDIF
      7  63a3				  -	      IF	$10 = $20
      8  63a3				  -	      .byte	$40+$C
      9  63a3					      ENDIF
     10  63a3				  -	      IF	$10 = $30
     11  63a3				  -	      .byte	$40+$C
     12  63a3					      ENDIF
     13  63a3				  -	      IF	$10 = $40
     14  63a3				  -	      .byte	$60+$C
     15  63a3					      ENDIF
     16  63a3				  -	      IF	$10 = $50
     17  63a3				  -	      .byte	$80+$C
     18  63a3					      ENDIF
     19  63a3				  -	      IF	$10 = $60
     20  63a3				  -	      .byte	$C0+$C
     21  63a3					      ENDIF
     22  63a3				  -	      IF	$10 = $70
     23  63a3				  -	      .byte	$D0+$C
     24  63a3					      ENDIF
     25  63a3				  -	      IF	$10 = $80
     26  63a3				  -	      .byte	$B0+$C
     27  63a3					      ENDIF
     28  63a3				  -	      IF	$10 = $90
     29  63a3				  -	      .byte	$90+$C
     30  63a3					      ENDIF
     31  63a3				  -	      IF	$10 = $A0
     32  63a3				  -	      .byte	$70+$C
     33  63a3					      ENDIF
     34  63a3				  -	      IF	$10 = $B0
     35  63a3				  -	      .byte	$50+$C
     36  63a3					      ENDIF
     37  63a3				  -	      IF	$10 = $C0
     38  63a3				  -	      .byte	$30+$C
     39  63a3					      ENDIF
     40  63a3				  -	      IF	$10 = $D0
     41  63a3				  -	      .byte	$30+$C
     42  63a3					      ENDIF
     43  63a3				  -	      IF	$10 = $E0
     44  63a3				  -	      .byte	$20+$C
     45  63a3					      ENDIF
     46  63a3				  -	      IF	$10 = $F0
     47  63a3				  -	      .byte	$40+$C
     48  63a3					      ENDIF
    668  63a3
    669  63a3
    670  63a3		       00 00 00 00*xJoyMoveX  .byte.b	0,0,0,0,0,1, 1,1,0,-1,-1,-1,0,-1,1,0
    671  63b3
    672  63b3				   VBlankTime2x
    673  63b3		       46 46		      .byte.b	70,70
    674  63b5		       62 62		      .byte.b	98,98
    675  63b7				   OverscanTime2X
    676  63b7		       3f 3f		      .byte.b	63, 63
    677  63b9		       4d 4d		      .byte.b	77, 77
    678  63bb
    679  63bb		       00 20	   COLOUR_LINES =	32
    680  63bb				   colvecX
    681  63bb		       00 00 20 20	      .byte.b	0, 0, COLOUR_LINES, COLOUR_LINES
    682  63bf
    683  63bf
    684  63bf							;blankDig ds COLOUR_LINES,0
    685  63bf
    686  63bf							;topcolour
    687  63bf
    688  63bf							;    .byte 0
    689  63bf
    690  63bf							;    REPEAT TOPHAT/2
    691  63bf							;    .byte $F2
    692  63bf							;    .byte $F0
    693  63bf							;    REPEND
    694  63bf
    695  63bf							;quest
    696  63bf							;    REPEAT 9
    697  63bf							;	  .byte $60,$60,$0
    698  63bf							;    REPEND
    699  63bf
    700  63bf				   LDIGIT
    701  63bf							;.word blankDig
    702  63bf		       30 f4		      .word.w	LEFT_0
    703  63c1		       90 f4		      .word.w	LEFT_1
    704  63c3		       00 f5		      .word.w	LEFT_2
    705  63c5		       60 f5		      .word.w	LEFT_3
    706  63c7		       c0 f5		      .word.w	LEFT_4
    707  63c9		       20 f6		      .word.w	LEFT_5
    708  63cb		       60 f6		      .word.w	LEFT_6
    709  63cd		       a0 f6		      .word.w	LEFT_7
    710  63cf		       e0 f6		      .word.w	LEFT_8
    711  63d1		       20 f7		      .word.w	LEFT_9
    712  63d3
    713  63d3				   RDIGIT
    714  63d3							;.word blankDig
    715  63d3		       50 f4		      .word.w	RIGHT_0
    716  63d5		       b0 f4		      .word.w	RIGHT_1
    717  63d7		       20 f5		      .word.w	RIGHT_2
    718  63d9		       80 f5		      .word.w	RIGHT_3
    719  63db		       e0 f5		      .word.w	RIGHT_4
    720  63dd		       40 f6		      .word.w	RIGHT_5
    721  63df		       80 f6		      .word.w	RIGHT_6
    722  63e1		       c0 f6		      .word.w	RIGHT_7
    723  63e3		       00 f7		      .word.w	RIGHT_8
    724  63e5		       40 f7		      .word.w	RIGHT_9
    725  63e7
    726  63e7				   DIGITHUND
    727  63e7							;.word blankDig
    728  63e7		       70 f4		      .word.w	HUNDPF1_0
    729  63e9		       d0 f4		      .word.w	HUNDPF1_1
    730  63eb		       40 f5		      .word.w	HUNDPF1_2
    731  63ed		       a0 f5		      .word.w	HUNDPF1_3
    732  63ef		       00 f6		      .word.w	HUNDPF1_4
    733  63f1							;	  .word HUNDPF1_5
    734  63f1							;	  .word HUNDPF1_6
    735  63f1							;	  .word HUNDPF1_7
    736  63f1							;	  .word HUNDPF1_8
    737  63f1							;	  .word HUNDPF1_9
    738  63f1							;	  .word blankDig
    739  63f1
    740  63f1
    741  63f1				   lid0
    742  63f1		       e0		      .byte.b	%11100000
    743  63f2		       e0		      .byte.b	%11100000
    744  63f3		       e0		      .byte.b	%11100000
    745  63f4		       e0		      .byte.b	%11100000
    746  63f5		       e0		      .byte.b	%11100000
    747  63f6		       e0		      .byte.b	%11100000
    748  63f7		       60		      .byte.b	%01100000
    749  63f8		       60		      .byte.b	%01100000
    750  63f9		       60		      .byte.b	%01100000
    751  63fa		       60		      .byte.b	%01100000
    752  63fb		       60		      .byte.b	%01100000
    753  63fc		       60		      .byte.b	%01100000
    754  63fd		       60		      .byte.b	%01100000
    755  63fe		       e0		      .byte.b	%11100000
    756  63ff		       e0		      .byte.b	%11100000
    757  6400		       e0		      .byte.b	%11100000
    758  6401		       e0		      .byte.b	%11100000
    759  6402		       e0		      .byte.b	%11100000
    760  6403
    761  6403				   lid1
    762  6403				   lid2
    763  6403		       ff		      .byte.b	%11111111
    764  6404		       ff		      .byte.b	%11111111
    765  6405		       ff		      .byte.b	%11111111
    766  6406		       ff		      .byte.b	%11111111
    767  6407		       ff		      .byte.b	%11111111
    768  6408		       ff		      .byte.b	%11111111
    769  6409		       ff		      .byte.b	%11111111
    770  640a		       ff		      .byte.b	%11111111
    771  640b		       ff		      .byte.b	%11111111
    772  640c		       f7		      .byte.b	%11110111
    773  640d		       f7		      .byte.b	%11110111
    774  640e		       f7		      .byte.b	%11110111
    775  640f		       f7		      .byte.b	%11110111
    776  6410		       ff		      .byte.b	%11111111
    777  6411		       ff		      .byte.b	%11111111
    778  6412		       ff		      .byte.b	%11111111
    779  6413		       ff		      .byte.b	%11111111
    780  6414		       c3		      .byte.b	%11000011
    781  6415
    782  6415				   lid3
    783  6415				   lid4
    784  6415		       ff		      .byte.b	%11111111
    785  6416		       ff		      .byte.b	%11111111
    786  6417		       ff		      .byte.b	%11111111
    787  6418		       ff		      .byte.b	%11111111
    788  6419		       ff		      .byte.b	%11111111
    789  641a		       ff		      .byte.b	%11111111
    790  641b		       ff		      .byte.b	%11111111
    791  641c		       ff		      .byte.b	%11111111
    792  641d		       ff		      .byte.b	%11111111
    793  641e		       f7		      .byte.b	%11110111
    794  641f		       f7		      .byte.b	%11110111
    795  6420		       f7		      .byte.b	%11110111
    796  6421		       f7		      .byte.b	%11110111
    797  6422		       ff		      .byte.b	%11111111
    798  6423		       ff		      .byte.b	%11111111
    799  6424		       ff		      .byte.b	%11111111
    800  6425		       ff		      .byte.b	%11111111
    801  6426		       c3		      .byte.b	%11000011
    802  6427
    803  6427				  -	      if	0
    804  6427				  -	      .byte	%11111111
    805  6427				  -	      .byte	%11111111
    806  6427				  -	      .byte	%11111111
    807  6427				  -	      .byte	%11111111
    808  6427				  -	      .byte	%11111111
    809  6427				  -	      .byte	%11111111
    810  6427				  -	      .byte	%11111011
    811  6427				  -	      .byte	%11111011
    812  6427				  -	      .byte	%11111011
    813  6427				  -	      .byte	%11111011
    814  6427				  -	      .byte	%11111011
    815  6427				  -	      .byte	%11111011
    816  6427				  -	      .byte	%11111011
    817  6427				  -	      .byte	%11111111
    818  6427				  -	      .byte	%11111111
    819  6427				  -	      .byte	%11111111
    820  6427				  -	      .byte	%11111111
    821  6427				  -	      .byte	%11000011
    822  6427					      endif
    823  6427
    824  6427				   lidb0
    825  6427				   lidb1
    826  6427				   lidb2
    827  6427				   lidb3
    828  6427				   lidb4
    829  6427
    830  6427		       aa		      .byte.b	%10101010
    831  6428		       ff		      .byte.b	%11111111
    832  6429		       ff		      .byte.b	%11111111
    833  642a		       ff		      .byte.b	%11111111
    834  642b		       ff		      .byte.b	%11111111
    835  642c		       ff		      .byte.b	%11111111
    836  642d		       ff		      .byte.b	%11111111
    837  642e		       ff		      .byte.b	%11111111
    838  642f		       ff		      .byte.b	%11111111
    839  6430
    840  6430							;    .byte |..XXX...|
    841  6430
------- FILE bigDigits.asm LEVEL 3 PASS 3
      0  6430					      include	"bigDigits.asm"
      0  6430					      OPTIONAL_PAGEBREAK	"LEFT_0", 32
     10  6430					      LIST	ON
      2  6430				   LEFT_0
      3  6430		       00		      .byte.b	0
      4  6431		       00		      .byte.b	0
      5  6432		       00		      .byte.b	0
      6  6433		       38		      .byte.b	56
      7  6434		       7c		      .byte.b	124
      8  6435		       7c		      .byte.b	124
      9  6436		       7c		      .byte.b	124
     10  6437		       ee		      .byte.b	238
     11  6438		       c6		      .byte.b	198
     12  6439		       c6		      .byte.b	198
     13  643a		       c6		      .byte.b	198
     14  643b		       c6		      .byte.b	198
     15  643c		       c6		      .byte.b	198
     16  643d		       c6		      .byte.b	198
     17  643e		       c6		      .byte.b	198
     18  643f		       c6		      .byte.b	198
     19  6440		       c6		      .byte.b	198
     20  6441		       c6		      .byte.b	198
     21  6442		       c6		      .byte.b	198
     22  6443		       c6		      .byte.b	198
     23  6444		       c6		      .byte.b	198
     24  6445		       c6		      .byte.b	198
     25  6446		       c6		      .byte.b	198
     26  6447		       c6		      .byte.b	198
     27  6448		       c6		      .byte.b	198
     28  6449		       ee		      .byte.b	238
     29  644a		       7c		      .byte.b	124
     30  644b		       7c		      .byte.b	124
     31  644c		       7c		      .byte.b	124
     32  644d		       38		      .byte.b	56
     33  644e		       00		      .byte.b	0
     34  644f		       00		      .byte.b	0
      0  6450					      OPTIONAL_PAGEBREAK	"RIGHT_0", 32
     10  6450					      LIST	ON
     36  6450				   RIGHT_0
     37  6450		       00		      .byte.b	0
     38  6451		       00		      .byte.b	0
     39  6452		       00		      .byte.b	0
     40  6453		       8c		      .byte.b	140
     41  6454		       ce		      .byte.b	206
     42  6455		       ce		      .byte.b	206
     43  6456		       ce		      .byte.b	206
     44  6457		       e7		      .byte.b	231
     45  6458		       63		      .byte.b	99
     46  6459		       63		      .byte.b	99
     47  645a		       63		      .byte.b	99
     48  645b		       63		      .byte.b	99
     49  645c		       63		      .byte.b	99
     50  645d		       63		      .byte.b	99
     51  645e		       63		      .byte.b	99
     52  645f		       63		      .byte.b	99
     53  6460		       63		      .byte.b	99
     54  6461		       63		      .byte.b	99
     55  6462		       63		      .byte.b	99
     56  6463		       63		      .byte.b	99
     57  6464		       63		      .byte.b	99
     58  6465		       63		      .byte.b	99
     59  6466		       63		      .byte.b	99
     60  6467		       63		      .byte.b	99
     61  6468		       63		      .byte.b	99
     62  6469		       e7		      .byte.b	231
     63  646a		       ce		      .byte.b	206
     64  646b		       ce		      .byte.b	206
     65  646c		       ce		      .byte.b	206
     66  646d		       8c		      .byte.b	140
     67  646e		       00		      .byte.b	0
     68  646f		       00		      .byte.b	0
      0  6470					      OPTIONAL_PAGEBREAK	"HUNDPF1_0", 32
     10  6470					      LIST	ON
     70  6470				   HUNDPF1_0
     71  6470		       00		      .byte.b	0
     72  6471		       00		      .byte.b	0
     73  6472		       00		      .byte.b	0
     74  6473		       1c		      .byte.b	28
     75  6474		       3e		      .byte.b	62
     76  6475		       3e		      .byte.b	62
     77  6476		       3e		      .byte.b	62
     78  6477		       77		      .byte.b	119
     79  6478		       63		      .byte.b	99
     80  6479		       63		      .byte.b	99
     81  647a		       63		      .byte.b	99
     82  647b		       63		      .byte.b	99
     83  647c		       63		      .byte.b	99
     84  647d		       63		      .byte.b	99
     85  647e		       63		      .byte.b	99
     86  647f		       63		      .byte.b	99
     87  6480		       63		      .byte.b	99
     88  6481		       63		      .byte.b	99
     89  6482		       63		      .byte.b	99
     90  6483		       63		      .byte.b	99
     91  6484		       63		      .byte.b	99
     92  6485		       63		      .byte.b	99
     93  6486		       63		      .byte.b	99
     94  6487		       63		      .byte.b	99
     95  6488		       63		      .byte.b	99
     96  6489		       77		      .byte.b	119
     97  648a		       3e		      .byte.b	62
     98  648b		       3e		      .byte.b	62
     99  648c		       3e		      .byte.b	62
    100  648d		       1c		      .byte.b	28
    101  648e		       00		      .byte.b	0
    102  648f		       00		      .byte.b	0
      0  6490					      OPTIONAL_PAGEBREAK	"LEFT_1", 32
     10  6490					      LIST	ON
    104  6490				   LEFT_1
    105  6490		       00		      .byte.b	0
    106  6491		       00		      .byte.b	0
    107  6492		       00		      .byte.b	0
    108  6493		       30		      .byte.b	48
    109  6494		       30		      .byte.b	48
    110  6495		       30		      .byte.b	48
    111  6496		       30		      .byte.b	48
    112  6497		       30		      .byte.b	48
    113  6498		       30		      .byte.b	48
    114  6499		       30		      .byte.b	48
    115  649a		       30		      .byte.b	48
    116  649b		       30		      .byte.b	48
    117  649c		       30		      .byte.b	48
    118  649d		       30		      .byte.b	48
    119  649e		       30		      .byte.b	48
    120  649f		       30		      .byte.b	48
    121  64a0		       30		      .byte.b	48
    122  64a1		       30		      .byte.b	48
    123  64a2		       30		      .byte.b	48
    124  64a3		       30		      .byte.b	48
    125  64a4		       30		      .byte.b	48
    126  64a5		       30		      .byte.b	48
    127  64a6		       30		      .byte.b	48
    128  64a7		       38		      .byte.b	56
    129  64a8		       38		      .byte.b	56
    130  64a9		       38		      .byte.b	56
    131  64aa		       38		      .byte.b	56
    132  64ab		       38		      .byte.b	56
    133  64ac		       30		      .byte.b	48
    134  64ad		       30		      .byte.b	48
    135  64ae		       00		      .byte.b	0
    136  64af		       00		      .byte.b	0
      0  64b0					      OPTIONAL_PAGEBREAK	"RIGHT_1", 32
     10  64b0					      LIST	ON
    138  64b0				   RIGHT_1
    139  64b0		       00		      .byte.b	0
    140  64b1		       00		      .byte.b	0
    141  64b2		       00		      .byte.b	0
    142  64b3		       0c		      .byte.b	12
    143  64b4		       0c		      .byte.b	12
    144  64b5		       0c		      .byte.b	12
    145  64b6		       0c		      .byte.b	12
    146  64b7		       0c		      .byte.b	12
    147  64b8		       0c		      .byte.b	12
    148  64b9		       0c		      .byte.b	12
    149  64ba		       0c		      .byte.b	12
    150  64bb		       0c		      .byte.b	12
    151  64bc		       0c		      .byte.b	12
    152  64bd		       0c		      .byte.b	12
    153  64be		       0c		      .byte.b	12
    154  64bf		       0c		      .byte.b	12
    155  64c0		       0c		      .byte.b	12
    156  64c1		       0c		      .byte.b	12
    157  64c2		       0c		      .byte.b	12
    158  64c3		       0c		      .byte.b	12
    159  64c4		       0c		      .byte.b	12
    160  64c5		       0c		      .byte.b	12
    161  64c6		       0c		      .byte.b	12
    162  64c7		       8c		      .byte.b	140
    163  64c8		       8c		      .byte.b	140
    164  64c9		       8c		      .byte.b	140
    165  64ca		       8c		      .byte.b	140
    166  64cb		       8c		      .byte.b	140
    167  64cc		       0c		      .byte.b	12
    168  64cd		       0c		      .byte.b	12
    169  64ce		       00		      .byte.b	0
    170  64cf		       00		      .byte.b	0
      0  64d0					      OPTIONAL_PAGEBREAK	"HUNDPF1_1", 32
     10  64d0					      LIST	ON
    172  64d0				   HUNDPF1_1
    173  64d0		       00		      .byte.b	0
    174  64d1		       00		      .byte.b	0
    175  64d2		       00		      .byte.b	0
    176  64d3		       0c		      .byte.b	12
    177  64d4		       0c		      .byte.b	12
    178  64d5		       0c		      .byte.b	12
    179  64d6		       0c		      .byte.b	12
    180  64d7		       0c		      .byte.b	12
    181  64d8		       0c		      .byte.b	12
    182  64d9		       0c		      .byte.b	12
    183  64da		       0c		      .byte.b	12
    184  64db		       0c		      .byte.b	12
    185  64dc		       0c		      .byte.b	12
    186  64dd		       0c		      .byte.b	12
    187  64de		       0c		      .byte.b	12
    188  64df		       0c		      .byte.b	12
    189  64e0		       0c		      .byte.b	12
    190  64e1		       0c		      .byte.b	12
    191  64e2		       0c		      .byte.b	12
    192  64e3		       0c		      .byte.b	12
    193  64e4		       0c		      .byte.b	12
    194  64e5		       0c		      .byte.b	12
    195  64e6		       0c		      .byte.b	12
    196  64e7		       1c		      .byte.b	28
    197  64e8		       1c		      .byte.b	28
    198  64e9		       1c		      .byte.b	28
    199  64ea		       1c		      .byte.b	28
    200  64eb		       1c		      .byte.b	28
    201  64ec		       0c		      .byte.b	12
    202  64ed		       0c		      .byte.b	12
    203  64ee		       00		      .byte.b	0
    204  64ef		       00		      .byte.b	0
      0  64f0					      OPTIONAL_PAGEBREAK	"LEFT_2", 32
 PAGE BREAK INSERTED FOR  LEFT_2
 REQUESTED SIZE =  $20
 WASTED SPACE =  $10
 PAGEBREAK LOCATION =  $f500
     10  6500					      LIST	ON
    206  6500				   LEFT_2
    207  6500		       00		      .byte.b	0
    208  6501		       00		      .byte.b	0
    209  6502		       00		      .byte.b	0
    210  6503		       fe		      .byte.b	254
    211  6504		       fe		      .byte.b	254
    212  6505		       fe		      .byte.b	254
    213  6506		       fe		      .byte.b	254
    214  6507		       c6		      .byte.b	198
    215  6508		       06		      .byte.b	6
    216  6509		       06		      .byte.b	6
    217  650a		       06		      .byte.b	6
    218  650b		       0e		      .byte.b	14
    219  650c		       0e		      .byte.b	14
    220  650d		       1c		      .byte.b	28
    221  650e		       3c		      .byte.b	60
    222  650f		       78		      .byte.b	120
    223  6510		       70		      .byte.b	112
    224  6511		       e0		      .byte.b	224
    225  6512		       e0		      .byte.b	224
    226  6513		       c0		      .byte.b	192
    227  6514		       c0		      .byte.b	192
    228  6515		       c0		      .byte.b	192
    229  6516		       c6		      .byte.b	198
    230  6517		       c6		      .byte.b	198
    231  6518		       c6		      .byte.b	198
    232  6519		       ee		      .byte.b	238
    233  651a		       fe		      .byte.b	254
    234  651b		       7c		      .byte.b	124
    235  651c		       7c		      .byte.b	124
    236  651d		       38		      .byte.b	56
    237  651e		       00		      .byte.b	0
    238  651f		       00		      .byte.b	0
      0  6520					      OPTIONAL_PAGEBREAK	"RIGHT_2", 32
     10  6520					      LIST	ON
    240  6520				   RIGHT_2
    241  6520		       00		      .byte.b	0
    242  6521		       00		      .byte.b	0
    243  6522		       00		      .byte.b	0
    244  6523		       ef		      .byte.b	239
    245  6524		       ef		      .byte.b	239
    246  6525		       ef		      .byte.b	239
    247  6526		       ef		      .byte.b	239
    248  6527		       63		      .byte.b	99
    249  6528		       60		      .byte.b	96
    250  6529		       60		      .byte.b	96
    251  652a		       60		      .byte.b	96
    252  652b		       e0		      .byte.b	224
    253  652c		       e0		      .byte.b	224
    254  652d		       c8		      .byte.b	200
    255  652e		       cc		      .byte.b	204
    256  652f		       8e		      .byte.b	142
    257  6530		       0e		      .byte.b	14
    258  6531		       07		      .byte.b	7
    259  6532		       07		      .byte.b	7
    260  6533		       03		      .byte.b	3
    261  6534		       03		      .byte.b	3
    262  6535		       03		      .byte.b	3
    263  6536		       63		      .byte.b	99
    264  6537		       63		      .byte.b	99
    265  6538		       63		      .byte.b	99
    266  6539		       e7		      .byte.b	231
    267  653a		       ef		      .byte.b	239
    268  653b		       ce		      .byte.b	206
    269  653c		       ce		      .byte.b	206
    270  653d		       8c		      .byte.b	140
    271  653e		       00		      .byte.b	0
    272  653f		       00		      .byte.b	0
      0  6540					      OPTIONAL_PAGEBREAK	"HUNDPF1_2", 32
     10  6540					      LIST	ON
    274  6540				   HUNDPF1_2
    275  6540		       00		      .byte.b	0
    276  6541		       00		      .byte.b	0
    277  6542		       00		      .byte.b	0
    278  6543		       7f		      .byte.b	127
    279  6544		       7f		      .byte.b	127
    280  6545		       7f		      .byte.b	127
    281  6546		       7f		      .byte.b	127
    282  6547		       63		      .byte.b	99
    283  6548		       60		      .byte.b	96
    284  6549		       60		      .byte.b	96
    285  654a		       60		      .byte.b	96
    286  654b		       70		      .byte.b	112
    287  654c		       70		      .byte.b	112
    288  654d		       38		      .byte.b	56
    289  654e		       3c		      .byte.b	60
    290  654f		       1e		      .byte.b	30
    291  6550		       0e		      .byte.b	14
    292  6551		       07		      .byte.b	7
    293  6552		       07		      .byte.b	7
    294  6553		       03		      .byte.b	3
    295  6554		       03		      .byte.b	3
    296  6555		       03		      .byte.b	3
    297  6556		       63		      .byte.b	99
    298  6557		       63		      .byte.b	99
    299  6558		       63		      .byte.b	99
    300  6559		       77		      .byte.b	119
    301  655a		       7f		      .byte.b	127
    302  655b		       3e		      .byte.b	62
    303  655c		       3e		      .byte.b	62
    304  655d		       1c		      .byte.b	28
    305  655e		       00		      .byte.b	0
    306  655f		       00		      .byte.b	0
      0  6560					      OPTIONAL_PAGEBREAK	"LEFT_3", 32
     10  6560					      LIST	ON
    308  6560				   LEFT_3
    309  6560		       00		      .byte.b	0
    310  6561		       00		      .byte.b	0
    311  6562		       00		      .byte.b	0
    312  6563		       38		      .byte.b	56
    313  6564		       7c		      .byte.b	124
    314  6565		       7c		      .byte.b	124
    315  6566		       fe		      .byte.b	254
    316  6567		       ee		      .byte.b	238
    317  6568		       c6		      .byte.b	198
    318  6569		       c6		      .byte.b	198
    319  656a		       c6		      .byte.b	198
    320  656b		       c0		      .byte.b	192
    321  656c		       c0		      .byte.b	192
    322  656d		       c0		      .byte.b	192
    323  656e		       e0		      .byte.b	224
    324  656f		       f8		      .byte.b	248
    325  6570		       78		      .byte.b	120
    326  6571		       78		      .byte.b	120
    327  6572		       f8		      .byte.b	248
    328  6573		       e0		      .byte.b	224
    329  6574		       c0		      .byte.b	192
    330  6575		       c0		      .byte.b	192
    331  6576		       c6		      .byte.b	198
    332  6577		       c6		      .byte.b	198
    333  6578		       c6		      .byte.b	198
    334  6579		       ee		      .byte.b	238
    335  657a		       fe		      .byte.b	254
    336  657b		       7c		      .byte.b	124
    337  657c		       7c		      .byte.b	124
    338  657d		       38		      .byte.b	56
    339  657e		       00		      .byte.b	0
    340  657f		       00		      .byte.b	0
      0  6580					      OPTIONAL_PAGEBREAK	"RIGHT_3", 32
     10  6580					      LIST	ON
    342  6580				   RIGHT_3
    343  6580		       00		      .byte.b	0
    344  6581		       00		      .byte.b	0
    345  6582		       00		      .byte.b	0
    346  6583		       8c		      .byte.b	140
    347  6584		       ce		      .byte.b	206
    348  6585		       ce		      .byte.b	206
    349  6586		       ef		      .byte.b	239
    350  6587		       e7		      .byte.b	231
    351  6588		       63		      .byte.b	99
    352  6589		       63		      .byte.b	99
    353  658a		       63		      .byte.b	99
    354  658b		       03		      .byte.b	3
    355  658c		       03		      .byte.b	3
    356  658d		       03		      .byte.b	3
    357  658e		       07		      .byte.b	7
    358  658f		       8f		      .byte.b	143
    359  6590		       8e		      .byte.b	142
    360  6591		       8e		      .byte.b	142
    361  6592		       8f		      .byte.b	143
    362  6593		       07		      .byte.b	7
    363  6594		       03		      .byte.b	3
    364  6595		       03		      .byte.b	3
    365  6596		       63		      .byte.b	99
    366  6597		       63		      .byte.b	99
    367  6598		       63		      .byte.b	99
    368  6599		       e7		      .byte.b	231
    369  659a		       ef		      .byte.b	239
    370  659b		       ce		      .byte.b	206
    371  659c		       ce		      .byte.b	206
    372  659d		       8c		      .byte.b	140
    373  659e		       00		      .byte.b	0
    374  659f		       00		      .byte.b	0
      0  65a0					      OPTIONAL_PAGEBREAK	"HUNDPF1_3", 32
     10  65a0					      LIST	ON
    376  65a0				   HUNDPF1_3
    377  65a0		       00		      .byte.b	0
    378  65a1		       00		      .byte.b	0
    379  65a2		       00		      .byte.b	0
    380  65a3		       1c		      .byte.b	28
    381  65a4		       3e		      .byte.b	62
    382  65a5		       3e		      .byte.b	62
    383  65a6		       7f		      .byte.b	127
    384  65a7		       77		      .byte.b	119
    385  65a8		       63		      .byte.b	99
    386  65a9		       63		      .byte.b	99
    387  65aa		       63		      .byte.b	99
    388  65ab		       03		      .byte.b	3
    389  65ac		       03		      .byte.b	3
    390  65ad		       03		      .byte.b	3
    391  65ae		       07		      .byte.b	7
    392  65af		       1f		      .byte.b	31
    393  65b0		       1e		      .byte.b	30
    394  65b1		       1e		      .byte.b	30
    395  65b2		       1f		      .byte.b	31
    396  65b3		       07		      .byte.b	7
    397  65b4		       03		      .byte.b	3
    398  65b5		       03		      .byte.b	3
    399  65b6		       63		      .byte.b	99
    400  65b7		       63		      .byte.b	99
    401  65b8		       63		      .byte.b	99
    402  65b9		       77		      .byte.b	119
    403  65ba		       7f		      .byte.b	127
    404  65bb		       3e		      .byte.b	62
    405  65bc		       3e		      .byte.b	62
    406  65bd		       1c		      .byte.b	28
    407  65be		       00		      .byte.b	0
    408  65bf		       00		      .byte.b	0
      0  65c0					      OPTIONAL_PAGEBREAK	"LEFT_4", 32
     10  65c0					      LIST	ON
    410  65c0				   LEFT_4
    411  65c0		       00		      .byte.b	0
    412  65c1		       00		      .byte.b	0
    413  65c2		       00		      .byte.b	0
    414  65c3		       60		      .byte.b	96
    415  65c4		       60		      .byte.b	96
    416  65c5		       60		      .byte.b	96
    417  65c6		       60		      .byte.b	96
    418  65c7		       60		      .byte.b	96
    419  65c8		       fe		      .byte.b	254
    420  65c9		       fe		      .byte.b	254
    421  65ca		       fe		      .byte.b	254
    422  65cb		       fe		      .byte.b	254
    423  65cc		       66		      .byte.b	102
    424  65cd		       66		      .byte.b	102
    425  65ce		       66		      .byte.b	102
    426  65cf		       66		      .byte.b	102
    427  65d0		       6c		      .byte.b	108
    428  65d1		       6c		      .byte.b	108
    429  65d2		       6c		      .byte.b	108
    430  65d3		       6c		      .byte.b	108
    431  65d4		       78		      .byte.b	120
    432  65d5		       78		      .byte.b	120
    433  65d6		       78		      .byte.b	120
    434  65d7		       78		      .byte.b	120
    435  65d8		       70		      .byte.b	112
    436  65d9		       70		      .byte.b	112
    437  65da		       70		      .byte.b	112
    438  65db		       70		      .byte.b	112
    439  65dc		       60		      .byte.b	96
    440  65dd		       60		      .byte.b	96
    441  65de		       00		      .byte.b	0
    442  65df		       00		      .byte.b	0
      0  65e0					      OPTIONAL_PAGEBREAK	"RIGHT_4", 32
     10  65e0					      LIST	ON
    444  65e0				   RIGHT_4
    445  65e0		       00		      .byte.b	0
    446  65e1		       00		      .byte.b	0
    447  65e2		       00		      .byte.b	0
    448  65e3		       06		      .byte.b	6
    449  65e4		       06		      .byte.b	6
    450  65e5		       06		      .byte.b	6
    451  65e6		       06		      .byte.b	6
    452  65e7		       06		      .byte.b	6
    453  65e8		       ef		      .byte.b	239
    454  65e9		       ef		      .byte.b	239
    455  65ea		       ef		      .byte.b	239
    456  65eb		       ef		      .byte.b	239
    457  65ec		       66		      .byte.b	102
    458  65ed		       66		      .byte.b	102
    459  65ee		       66		      .byte.b	102
    460  65ef		       66		      .byte.b	102
    461  65f0		       c6		      .byte.b	198
    462  65f1		       c6		      .byte.b	198
    463  65f2		       c6		      .byte.b	198
    464  65f3		       c6		      .byte.b	198
    465  65f4		       8e		      .byte.b	142
    466  65f5		       8e		      .byte.b	142
    467  65f6		       8e		      .byte.b	142
    468  65f7		       8e		      .byte.b	142
    469  65f8		       0e		      .byte.b	14
    470  65f9		       0e		      .byte.b	14
    471  65fa		       0e		      .byte.b	14
    472  65fb		       0e		      .byte.b	14
    473  65fc		       06		      .byte.b	6
    474  65fd		       06		      .byte.b	6
    475  65fe		       00		      .byte.b	0
    476  65ff		       00		      .byte.b	0
      0  6600					      OPTIONAL_PAGEBREAK	"HUNDPF1_4", 32
     10  6600					      LIST	ON
    478  6600				   HUNDPF1_4
    479  6600		       00		      .byte.b	0
    480  6601		       00		      .byte.b	0
    481  6602		       00		      .byte.b	0
    482  6603		       06		      .byte.b	6
    483  6604		       06		      .byte.b	6
    484  6605		       06		      .byte.b	6
    485  6606		       06		      .byte.b	6
    486  6607		       06		      .byte.b	6
    487  6608		       7f		      .byte.b	127
    488  6609		       7f		      .byte.b	127
    489  660a		       7f		      .byte.b	127
    490  660b		       7f		      .byte.b	127
    491  660c		       66		      .byte.b	102
    492  660d		       66		      .byte.b	102
    493  660e		       66		      .byte.b	102
    494  660f		       66		      .byte.b	102
    495  6610		       36		      .byte.b	54
    496  6611		       36		      .byte.b	54
    497  6612		       36		      .byte.b	54
    498  6613		       36		      .byte.b	54
    499  6614		       1e		      .byte.b	30
    500  6615		       1e		      .byte.b	30
    501  6616		       1e		      .byte.b	30
    502  6617		       1e		      .byte.b	30
    503  6618		       0e		      .byte.b	14
    504  6619		       0e		      .byte.b	14
    505  661a		       0e		      .byte.b	14
    506  661b		       0e		      .byte.b	14
    507  661c		       06		      .byte.b	6
    508  661d		       06		      .byte.b	6
    509  661e		       00		      .byte.b	0
    510  661f		       00		      .byte.b	0
      0  6620					      OPTIONAL_PAGEBREAK	"LEFT_5", 32
     10  6620					      LIST	ON
    512  6620				   LEFT_5
    513  6620		       00		      .byte.b	0
    514  6621		       00		      .byte.b	0
    515  6622		       00		      .byte.b	0
    516  6623		       38		      .byte.b	56
    517  6624		       7c		      .byte.b	124
    518  6625		       7c		      .byte.b	124
    519  6626		       fe		      .byte.b	254
    520  6627		       ee		      .byte.b	238
    521  6628		       c6		      .byte.b	198
    522  6629		       c6		      .byte.b	198
    523  662a		       c6		      .byte.b	198
    524  662b		       c0		      .byte.b	192
    525  662c		       c0		      .byte.b	192
    526  662d		       c0		      .byte.b	192
    527  662e		       c0		      .byte.b	192
    528  662f		       c0		      .byte.b	192
    529  6630		       c0		      .byte.b	192
    530  6631		       e6		      .byte.b	230
    531  6632		       fe		      .byte.b	254
    532  6633		       7e		      .byte.b	126
    533  6634		       7e		      .byte.b	126
    534  6635		       36		      .byte.b	54
    535  6636		       06		      .byte.b	6
    536  6637		       06		      .byte.b	6
    537  6638		       06		      .byte.b	6
    538  6639		       c6		      .byte.b	198
    539  663a		       fe		      .byte.b	254
    540  663b		       fe		      .byte.b	254
    541  663c		       fe		      .byte.b	254
    542  663d		       fe		      .byte.b	254
    543  663e		       00		      .byte.b	0
    544  663f		       00		      .byte.b	0
      0  6640					      OPTIONAL_PAGEBREAK	"RIGHT_5", 32
     10  6640					      LIST	ON
    546  6640				   RIGHT_5
    547  6640		       00		      .byte.b	0
    548  6641		       00		      .byte.b	0
    549  6642		       00		      .byte.b	0
    550  6643		       8c		      .byte.b	140
    551  6644		       ce		      .byte.b	206
    552  6645		       ce		      .byte.b	206
    553  6646		       ef		      .byte.b	239
    554  6647		       e7		      .byte.b	231
    555  6648		       63		      .byte.b	99
    556  6649		       63		      .byte.b	99
    557  664a		       63		      .byte.b	99
    558  664b		       03		      .byte.b	3
    559  664c		       03		      .byte.b	3
    560  664d		       03		      .byte.b	3
    561  664e		       03		      .byte.b	3
    562  664f		       03		      .byte.b	3
    563  6650		       03		      .byte.b	3
    564  6651		       67		      .byte.b	103
    565  6652		       ef		      .byte.b	239
    566  6653		       ee		      .byte.b	238
    567  6654		       ee		      .byte.b	238
    568  6655		       6c		      .byte.b	108
    569  6656		       60		      .byte.b	96
    570  6657		       60		      .byte.b	96
    571  6658		       60		      .byte.b	96
    572  6659		       63		      .byte.b	99
    573  665a		       ef		      .byte.b	239
    574  665b		       ef		      .byte.b	239
    575  665c		       ef		      .byte.b	239
    576  665d		       ef		      .byte.b	239
    577  665e		       00		      .byte.b	0
    578  665f		       00		      .byte.b	0
      0  6660					      OPTIONAL_PAGEBREAK	"HUNDPF1_5", 32
     10  6660					      LIST	ON
    580  6660				   HUNDPF1_5
      0  6660					      OPTIONAL_PAGEBREAK	"LEFT_6", 32
     10  6660					      LIST	ON
    582  6660				   LEFT_6
    583  6660		       00		      .byte.b	0
    584  6661		       00		      .byte.b	0
    585  6662		       00		      .byte.b	0
    586  6663		       38		      .byte.b	56
    587  6664		       7c		      .byte.b	124
    588  6665		       7c		      .byte.b	124
    589  6666		       fe		      .byte.b	254
    590  6667		       ee		      .byte.b	238
    591  6668		       c6		      .byte.b	198
    592  6669		       c6		      .byte.b	198
    593  666a		       c6		      .byte.b	198
    594  666b		       c6		      .byte.b	198
    595  666c		       c6		      .byte.b	198
    596  666d		       c6		      .byte.b	198
    597  666e		       ee		      .byte.b	238
    598  666f		       fe		      .byte.b	254
    599  6670		       7e		      .byte.b	126
    600  6671		       7e		      .byte.b	126
    601  6672		       36		      .byte.b	54
    602  6673		       06		      .byte.b	6
    603  6674		       06		      .byte.b	6
    604  6675		       0e		      .byte.b	14
    605  6676		       0c		      .byte.b	12
    606  6677		       0c		      .byte.b	12
    607  6678		       1c		      .byte.b	28
    608  6679		       1c		      .byte.b	28
    609  667a		       78		      .byte.b	120
    610  667b		       78		      .byte.b	120
    611  667c		       70		      .byte.b	112
    612  667d		       60		      .byte.b	96
    613  667e		       00		      .byte.b	0
    614  667f		       00		      .byte.b	0
      0  6680					      OPTIONAL_PAGEBREAK	"RIGHT_6", 32
     10  6680					      LIST	ON
    616  6680				   RIGHT_6
    617  6680		       00		      .byte.b	0
    618  6681		       00		      .byte.b	0
    619  6682		       00		      .byte.b	0
    620  6683		       8c		      .byte.b	140
    621  6684		       ce		      .byte.b	206
    622  6685		       ce		      .byte.b	206
    623  6686		       ef		      .byte.b	239
    624  6687		       e7		      .byte.b	231
    625  6688		       63		      .byte.b	99
    626  6689		       63		      .byte.b	99
    627  668a		       63		      .byte.b	99
    628  668b		       63		      .byte.b	99
    629  668c		       63		      .byte.b	99
    630  668d		       63		      .byte.b	99
    631  668e		       e7		      .byte.b	231
    632  668f		       ef		      .byte.b	239
    633  6690		       ee		      .byte.b	238
    634  6691		       ee		      .byte.b	238
    635  6692		       6c		      .byte.b	108
    636  6693		       60		      .byte.b	96
    637  6694		       60		      .byte.b	96
    638  6695		       e0		      .byte.b	224
    639  6696		       c0		      .byte.b	192
    640  6697		       c0		      .byte.b	192
    641  6698		       c8		      .byte.b	200
    642  6699		       c8		      .byte.b	200
    643  669a		       8e		      .byte.b	142
    644  669b		       8e		      .byte.b	142
    645  669c		       0e		      .byte.b	14
    646  669d		       06		      .byte.b	6
    647  669e		       00		      .byte.b	0
    648  669f		       00		      .byte.b	0
      0  66a0					      OPTIONAL_PAGEBREAK	"HUNDPF1_6", 32
     10  66a0					      LIST	ON
    650  66a0				   HUNDPF1_6
      0  66a0					      OPTIONAL_PAGEBREAK	"LEFT_7", 32
     10  66a0					      LIST	ON
    652  66a0				   LEFT_7
    653  66a0		       00		      .byte.b	0
    654  66a1		       00		      .byte.b	0
    655  66a2		       00		      .byte.b	0
    656  66a3		       18		      .byte.b	24
    657  66a4		       18		      .byte.b	24
    658  66a5		       18		      .byte.b	24
    659  66a6		       18		      .byte.b	24
    660  66a7		       18		      .byte.b	24
    661  66a8		       18		      .byte.b	24
    662  66a9		       18		      .byte.b	24
    663  66aa		       18		      .byte.b	24
    664  66ab		       18		      .byte.b	24
    665  66ac		       18		      .byte.b	24
    666  66ad		       18		      .byte.b	24
    667  66ae		       30		      .byte.b	48
    668  66af		       30		      .byte.b	48
    669  66b0		       30		      .byte.b	48
    670  66b1		       30		      .byte.b	48
    671  66b2		       60		      .byte.b	96
    672  66b3		       60		      .byte.b	96
    673  66b4		       60		      .byte.b	96
    674  66b5		       60		      .byte.b	96
    675  66b6		       c0		      .byte.b	192
    676  66b7		       c0		      .byte.b	192
    677  66b8		       c0		      .byte.b	192
    678  66b9		       c6		      .byte.b	198
    679  66ba		       fe		      .byte.b	254
    680  66bb		       fe		      .byte.b	254
    681  66bc		       fe		      .byte.b	254
    682  66bd		       fe		      .byte.b	254
    683  66be		       00		      .byte.b	0
    684  66bf		       00		      .byte.b	0
      0  66c0					      OPTIONAL_PAGEBREAK	"RIGHT_7", 32
     10  66c0					      LIST	ON
    686  66c0				   RIGHT_7
    687  66c0		       00		      .byte.b	0
    688  66c1		       00		      .byte.b	0
    689  66c2		       00		      .byte.b	0
    690  66c3		       88		      .byte.b	136
    691  66c4		       88		      .byte.b	136
    692  66c5		       88		      .byte.b	136
    693  66c6		       88		      .byte.b	136
    694  66c7		       88		      .byte.b	136
    695  66c8		       88		      .byte.b	136
    696  66c9		       88		      .byte.b	136
    697  66ca		       88		      .byte.b	136
    698  66cb		       88		      .byte.b	136
    699  66cc		       88		      .byte.b	136
    700  66cd		       88		      .byte.b	136
    701  66ce		       0c		      .byte.b	12
    702  66cf		       0c		      .byte.b	12
    703  66d0		       0c		      .byte.b	12
    704  66d1		       0c		      .byte.b	12
    705  66d2		       06		      .byte.b	6
    706  66d3		       06		      .byte.b	6
    707  66d4		       06		      .byte.b	6
    708  66d5		       06		      .byte.b	6
    709  66d6		       03		      .byte.b	3
    710  66d7		       03		      .byte.b	3
    711  66d8		       03		      .byte.b	3
    712  66d9		       63		      .byte.b	99
    713  66da		       ef		      .byte.b	239
    714  66db		       ef		      .byte.b	239
    715  66dc		       ef		      .byte.b	239
    716  66dd		       ef		      .byte.b	239
    717  66de		       00		      .byte.b	0
    718  66df		       00		      .byte.b	0
      0  66e0					      OPTIONAL_PAGEBREAK	"HUNDPF1_7", 32
     10  66e0					      LIST	ON
    720  66e0				   HUNDPF1_7
      0  66e0					      OPTIONAL_PAGEBREAK	"LEFT_8", 32
     10  66e0					      LIST	ON
    722  66e0				   LEFT_8
    723  66e0		       00		      .byte.b	0
    724  66e1		       00		      .byte.b	0
    725  66e2		       00		      .byte.b	0
    726  66e3		       38		      .byte.b	56
    727  66e4		       7c		      .byte.b	124
    728  66e5		       7c		      .byte.b	124
    729  66e6		       fe		      .byte.b	254
    730  66e7		       ee		      .byte.b	238
    731  66e8		       c6		      .byte.b	198
    732  66e9		       c6		      .byte.b	198
    733  66ea		       c6		      .byte.b	198
    734  66eb		       c6		      .byte.b	198
    735  66ec		       c6		      .byte.b	198
    736  66ed		       c6		      .byte.b	198
    737  66ee		       ee		      .byte.b	238
    738  66ef		       fc		      .byte.b	252
    739  66f0		       7c		      .byte.b	124
    740  66f1		       7e		      .byte.b	126
    741  66f2		       ee		      .byte.b	238
    742  66f3		       c6		      .byte.b	198
    743  66f4		       c6		      .byte.b	198
    744  66f5		       c6		      .byte.b	198
    745  66f6		       c6		      .byte.b	198
    746  66f7		       c6		      .byte.b	198
    747  66f8		       c6		      .byte.b	198
    748  66f9		       ee		      .byte.b	238
    749  66fa		       fe		      .byte.b	254
    750  66fb		       7c		      .byte.b	124
    751  66fc		       7c		      .byte.b	124
    752  66fd		       38		      .byte.b	56
    753  66fe		       00		      .byte.b	0
    754  66ff		       00		      .byte.b	0
      0  6700					      OPTIONAL_PAGEBREAK	"RIGHT_8", 32
     10  6700					      LIST	ON
    756  6700				   RIGHT_8
    757  6700		       00		      .byte.b	0
    758  6701		       00		      .byte.b	0
    759  6702		       00		      .byte.b	0
    760  6703		       8c		      .byte.b	140
    761  6704		       ce		      .byte.b	206
    762  6705		       ce		      .byte.b	206
    763  6706		       ef		      .byte.b	239
    764  6707		       e7		      .byte.b	231
    765  6708		       63		      .byte.b	99
    766  6709		       63		      .byte.b	99
    767  670a		       63		      .byte.b	99
    768  670b		       63		      .byte.b	99
    769  670c		       63		      .byte.b	99
    770  670d		       63		      .byte.b	99
    771  670e		       e7		      .byte.b	231
    772  670f		       cf		      .byte.b	207
    773  6710		       ce		      .byte.b	206
    774  6711		       ee		      .byte.b	238
    775  6712		       e7		      .byte.b	231
    776  6713		       63		      .byte.b	99
    777  6714		       63		      .byte.b	99
    778  6715		       63		      .byte.b	99
    779  6716		       63		      .byte.b	99
    780  6717		       63		      .byte.b	99
    781  6718		       63		      .byte.b	99
    782  6719		       e7		      .byte.b	231
    783  671a		       ef		      .byte.b	239
    784  671b		       ce		      .byte.b	206
    785  671c		       ce		      .byte.b	206
    786  671d		       8c		      .byte.b	140
    787  671e		       00		      .byte.b	0
    788  671f		       00		      .byte.b	0
      0  6720					      OPTIONAL_PAGEBREAK	"HUNDPF1_8", 32
     10  6720					      LIST	ON
    790  6720				   HUNDPF1_8
      0  6720					      OPTIONAL_PAGEBREAK	"LEFT_9", 32
     10  6720					      LIST	ON
    792  6720				   LEFT_9
    793  6720		       00		      .byte.b	0
    794  6721		       00		      .byte.b	0
    795  6722		       00		      .byte.b	0
    796  6723		       0c		      .byte.b	12
    797  6724		       1c		      .byte.b	28
    798  6725		       3c		      .byte.b	60
    799  6726		       3c		      .byte.b	60
    800  6727		       70		      .byte.b	112
    801  6728		       70		      .byte.b	112
    802  6729		       60		      .byte.b	96
    803  672a		       e0		      .byte.b	224
    804  672b		       e0		      .byte.b	224
    805  672c		       c0		      .byte.b	192
    806  672d		       c0		      .byte.b	192
    807  672e		       d8		      .byte.b	216
    808  672f		       fc		      .byte.b	252
    809  6730		       fc		      .byte.b	252
    810  6731		       fe		      .byte.b	254
    811  6732		       ee		      .byte.b	238
    812  6733		       c6		      .byte.b	198
    813  6734		       c6		      .byte.b	198
    814  6735		       c6		      .byte.b	198
    815  6736		       c6		      .byte.b	198
    816  6737		       c6		      .byte.b	198
    817  6738		       c6		      .byte.b	198
    818  6739		       ee		      .byte.b	238
    819  673a		       fe		      .byte.b	254
    820  673b		       7c		      .byte.b	124
    821  673c		       7c		      .byte.b	124
    822  673d		       38		      .byte.b	56
    823  673e		       00		      .byte.b	0
    824  673f		       00		      .byte.b	0
      0  6740					      OPTIONAL_PAGEBREAK	"RIGHT_9", 32
     10  6740					      LIST	ON
    826  6740				   RIGHT_9
    827  6740		       00		      .byte.b	0
    828  6741		       00		      .byte.b	0
    829  6742		       00		      .byte.b	0
    830  6743		       c0		      .byte.b	192
    831  6744		       c8		      .byte.b	200
    832  6745		       cc		      .byte.b	204
    833  6746		       cc		      .byte.b	204
    834  6747		       0e		      .byte.b	14
    835  6748		       0e		      .byte.b	14
    836  6749		       06		      .byte.b	6
    837  674a		       07		      .byte.b	7
    838  674b		       07		      .byte.b	7
    839  674c		       03		      .byte.b	3
    840  674d		       03		      .byte.b	3
    841  674e		       8b		      .byte.b	139
    842  674f		       cf		      .byte.b	207
    843  6750		       cf		      .byte.b	207
    844  6751		       ef		      .byte.b	239
    845  6752		       e7		      .byte.b	231
    846  6753		       63		      .byte.b	99
    847  6754		       63		      .byte.b	99
    848  6755		       63		      .byte.b	99
    849  6756		       63		      .byte.b	99
    850  6757		       63		      .byte.b	99
    851  6758		       63		      .byte.b	99
    852  6759		       e7		      .byte.b	231
    853  675a		       ef		      .byte.b	239
    854  675b		       ce		      .byte.b	206
    855  675c		       ce		      .byte.b	206
    856  675d		       8c		      .byte.b	140
    857  675e		       00		      .byte.b	0
    858  675f		       00		      .byte.b	0
      0  6760					      OPTIONAL_PAGEBREAK	"HUNDPF1_9", 32
     10  6760					      LIST	ON
    860  6760				   HUNDPF1_9
      0  6760					      OPTIONAL_PAGEBREAK	"LEFT_star0", 32
     10  6760					      LIST	ON
    862  6760				   LEFT_star0
    863  6760		       2c		      .byte.b	44
    864  6761		       00		      .byte.b	0
    865  6762		       28		      .byte.b	40
    866  6763		       28		      .byte.b	40
    867  6764		       28		      .byte.b	40
    868  6765		       28		      .byte.b	40
    869  6766		       38		      .byte.b	56
    870  6767		       38		      .byte.b	56
    871  6768		       28		      .byte.b	40
    872  6769		       38		      .byte.b	56
    873  676a		       38		      .byte.b	56
    874  676b		       38		      .byte.b	56
    875  676c		       38		      .byte.b	56
    876  676d		       fe		      .byte.b	254
    877  676e		       fe		      .byte.b	254
    878  676f		       b2		      .byte.b	178
    879  6770		       ba		      .byte.b	186
    880  6771		       b2		      .byte.b	178
    881  6772		       30		      .byte.b	48
    882  6773		       18		      .byte.b	24
    883  6774		       14		      .byte.b	20
    884  6775		       08		      .byte.b	8
    885  6776		       3c		      .byte.b	60
    886  6777		       3a		      .byte.b	58
    887  6778		       00		      .byte.b	0
    888  6779		       00		      .byte.b	0
    889  677a		       00		      .byte.b	0
    890  677b		       00		      .byte.b	0
    891  677c		       00		      .byte.b	0
    892  677d		       00		      .byte.b	0
    893  677e		       00		      .byte.b	0
    894  677f		       00		      .byte.b	0
      0  6780					      OPTIONAL_PAGEBREAK	"LEFT_star1", 32
     10  6780					      LIST	ON
    896  6780				   LEFT_star1
    897  6780		       46		      .byte.b	70
    898  6781		       80		      .byte.b	128
    899  6782		       64		      .byte.b	100
    900  6783		       62		      .byte.b	98
    901  6784		       1e		      .byte.b	30
    902  6785		       3c		      .byte.b	60
    903  6786		       28		      .byte.b	40
    904  6787		       30		      .byte.b	48
    905  6788		       38		      .byte.b	56
    906  6789		       38		      .byte.b	56
    907  678a		       38		      .byte.b	56
    908  678b		       3c		      .byte.b	60
    909  678c		       3e		      .byte.b	62
    910  678d		       3f		      .byte.b	63
    911  678e		       19		      .byte.b	25
    912  678f		       19		      .byte.b	25
    913  6790		       1d		      .byte.b	29
    914  6791		       18		      .byte.b	24
    915  6792		       0c		      .byte.b	12
    916  6793		       0a		      .byte.b	10
    917  6794		       04		      .byte.b	4
    918  6795		       1e		      .byte.b	30
    919  6796		       1d		      .byte.b	29
    920  6797		       00		      .byte.b	0
    921  6798		       00		      .byte.b	0
    922  6799		       00		      .byte.b	0
    923  679a		       00		      .byte.b	0
    924  679b		       00		      .byte.b	0
    925  679c		       00		      .byte.b	0
    926  679d		       00		      .byte.b	0
    927  679e		       00		      .byte.b	0
    928  679f		       00		      .byte.b	0
      0  67a0					      OPTIONAL_PAGEBREAK	"LEFT_star2", 32
     10  67a0					      LIST	ON
    930  67a0				   LEFT_star2
    931  67a0		       26		      .byte.b	38
    932  67a1		       40		      .byte.b	64
    933  67a2		       34		      .byte.b	52
    934  67a3		       14		      .byte.b	20
    935  67a4		       14		      .byte.b	20
    936  67a5		       3c		      .byte.b	60
    937  67a6		       3c		      .byte.b	60
    938  67a7		       28		      .byte.b	40
    939  67a8		       30		      .byte.b	48
    940  67a9		       38		      .byte.b	56
    941  67aa		       38		      .byte.b	56
    942  67ab		       38		      .byte.b	56
    943  67ac		       3c		      .byte.b	60
    944  67ad		       3e		      .byte.b	62
    945  67ae		       3f		      .byte.b	63
    946  67af		       19		      .byte.b	25
    947  67b0		       19		      .byte.b	25
    948  67b1		       1d		      .byte.b	29
    949  67b2		       18		      .byte.b	24
    950  67b3		       0c		      .byte.b	12
    951  67b4		       0a		      .byte.b	10
    952  67b5		       04		      .byte.b	4
    953  67b6		       1e		      .byte.b	30
    954  67b7		       1d		      .byte.b	29
    955  67b8		       00		      .byte.b	0
    956  67b9		       00		      .byte.b	0
    957  67ba		       00		      .byte.b	0
    958  67bb		       00		      .byte.b	0
    959  67bc		       00		      .byte.b	0
    960  67bd		       00		      .byte.b	0
    961  67be		       00		      .byte.b	0
    962  67bf		       00		      .byte.b	0
      0  67c0					      OPTIONAL_PAGEBREAK	"LEFT_star3", 32
     10  67c0					      LIST	ON
    964  67c0				   LEFT_star3
    965  67c0		       46		      .byte.b	70
    966  67c1		       80		      .byte.b	128
    967  67c2		       64		      .byte.b	100
    968  67c3		       72		      .byte.b	114
    969  67c4		       3e		      .byte.b	62
    970  67c5		       3c		      .byte.b	60
    971  67c6		       18		      .byte.b	24
    972  67c7		       30		      .byte.b	48
    973  67c8		       38		      .byte.b	56
    974  67c9		       38		      .byte.b	56
    975  67ca		       38		      .byte.b	56
    976  67cb		       3c		      .byte.b	60
    977  67cc		       3e		      .byte.b	62
    978  67cd		       3f		      .byte.b	63
    979  67ce		       19		      .byte.b	25
    980  67cf		       19		      .byte.b	25
    981  67d0		       1d		      .byte.b	29
    982  67d1		       18		      .byte.b	24
    983  67d2		       0c		      .byte.b	12
    984  67d3		       0a		      .byte.b	10
    985  67d4		       04		      .byte.b	4
    986  67d5		       1e		      .byte.b	30
    987  67d6		       1d		      .byte.b	29
    988  67d7		       00		      .byte.b	0
    989  67d8		       00		      .byte.b	0
    990  67d9		       00		      .byte.b	0
    991  67da		       00		      .byte.b	0
    992  67db		       00		      .byte.b	0
    993  67dc		       00		      .byte.b	0
    994  67dd		       00		      .byte.b	0
    995  67de		       00		      .byte.b	0
    996  67df		       00		      .byte.b	0
------- FILE levelScreen.asm
    843  67e0
      0  67e0					      CHECK_BANK_SIZE	"LEVELSCREEN"
      1  67e0		       07 e0	   .TEMP      =	* - BANK_START
 LEVELSCREEN (2K) SIZE =  $7e0 , FREE= $20
      2  67e0					      ECHO	"LEVELSCREEN", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  67e0				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  67e0				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  67e0				  -	      ERR
      6  67e0					      endif
------- FILE ./sokoboo.asm
------- FILE coder.asm LEVEL 2 PASS 3
      0  67e0					      include	"coder.asm"
      0  67e0					      NEWBANK	CODER
      1  6fbd ????				      SEG	CODER
      2  6800					      ORG	ORIGIN
      3  6800					      RORG	$F000
      4  6800				   BANK_START SET	*
      5  6800				   CODER      SET	ORIGIN / 2048
      6  6800				   ORIGIN     SET	ORIGIN + 2048
      7  6800				   _CURRENT_BANK SET	CODER
      2  6800
      3  6800
      0  6800					      DEFINE_SUBROUTINE	xdigitBlock
      1  6800		       00 0d	   BANK_xdigitBlock =	_CURRENT_BANK
      2  6800					      SUBROUTINE
      3  6800				   xdigitBlock
      5  6800
      6  6800		       a0 1a		      ldy	#26	; #lines in characters-1
      7  6802
      8  6802		       a2 00		      ldx	#0	; used as a generic "0" during the kernel
      9  6804		       85 42		      sta	WSYNC
     10  6806
      0  6806					      SLEEP	72
      1  6806				   .CYCLES    SET	72
      2  6806
      3  6806				  -	      IF	.CYCLES < 2
      4  6806				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6806				  -	      ERR
      6  6806					      ENDIF
      7  6806
      8  6806				  -	      IF	.CYCLES & 1
      9  6806				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  6806				  -	      nop	0
     11  6806				  -	      ELSE
     12  6806				  -	      bit	VSYNC
     13  6806				  -	      ENDIF
     14  6806				  -.CYCLES    SET	.CYCLES - 3
     15  6806					      ENDIF
     16  6806
     17  6806					      REPEAT	.CYCLES / 2
     18  6806		       ea		      nop
     17  6806					      REPEND
     18  6807		       ea		      nop
     17  6807					      REPEND
     18  6808		       ea		      nop
     17  6808					      REPEND
     18  6809		       ea		      nop
     17  6809					      REPEND
     18  680a		       ea		      nop
     17  680a					      REPEND
     18  680b		       ea		      nop
     17  680b					      REPEND
     18  680c		       ea		      nop
     17  680c					      REPEND
     18  680d		       ea		      nop
     17  680d					      REPEND
     18  680e		       ea		      nop
     17  680e					      REPEND
     18  680f		       ea		      nop
     17  680f					      REPEND
     18  6810		       ea		      nop
     17  6810					      REPEND
     18  6811		       ea		      nop
     17  6811					      REPEND
     18  6812		       ea		      nop
     17  6812					      REPEND
     18  6813		       ea		      nop
     17  6813					      REPEND
     18  6814		       ea		      nop
     17  6814					      REPEND
     18  6815		       ea		      nop
     17  6815					      REPEND
     18  6816		       ea		      nop
     17  6816					      REPEND
     18  6817		       ea		      nop
     17  6817					      REPEND
     18  6818		       ea		      nop
     17  6818					      REPEND
     18  6819		       ea		      nop
     17  6819					      REPEND
     18  681a		       ea		      nop
     17  681a					      REPEND
     18  681b		       ea		      nop
     17  681b					      REPEND
     18  681c		       ea		      nop
     17  681c					      REPEND
     18  681d		       ea		      nop
     17  681d					      REPEND
     18  681e		       ea		      nop
     17  681e					      REPEND
     18  681f		       ea		      nop
     17  681f					      REPEND
     18  6820		       ea		      nop
     17  6820					      REPEND
     18  6821		       ea		      nop
     17  6821					      REPEND
     18  6822		       ea		      nop
     17  6822					      REPEND
     18  6823		       ea		      nop
     17  6823					      REPEND
     18  6824		       ea		      nop
     17  6824					      REPEND
     18  6825		       ea		      nop
     17  6825					      REPEND
     18  6826		       ea		      nop
     17  6826					      REPEND
     18  6827		       ea		      nop
     17  6827					      REPEND
     18  6828		       ea		      nop
     17  6828					      REPEND
     18  6829		       ea		      nop
     19  682a					      REPEND
     12  682a
     13  682a				   .LOOPCC    SET	0
     14  682a				   blockLine
     15  682a
     16  682a					      REPEAT	2
     17  682a
     18  682a		       86 4d		      stx	PF0	; 3
     19  682c
     20  682c		       b1 e7		      lda	(bigdigit0),y	; 5
     21  682e		       85 4e		      sta	PF1	; 3 = 8 @11
     22  6830
     23  6830		       b1 e9		      lda	(bigdigit1),y	; 5
     24  6832		       85 4f		      sta	PF2	; 3 = 8 @19
     25  6834
     26  6834
     27  6834							; RHS
     28  6834
     29  6834
     30  6834		       b1 eb		      lda	(bigdigit2),y	; 5
     31  6836		       85 4d		      sta	PF0	; 3 = 8 @27	   D7D6D5D4 <--- mirrored
     32  6838
     33  6838		       0a		      asl		; 2
     34  6839		       0a		      asl		; 2
     35  683a		       0a		      asl		; 2
     36  683b		       0a		      asl		; 2 = 8 @35
     37  683c
     38  683c		       85 ef		      sta	codeTemp	; 3
     39  683e		       b1 ed		      lda	(bigdigit3),y	; 5
     40  6840		       29 0f		      and	#$f	; 2
     41  6842		       05 ef		      ora	codeTemp	; 3
     42  6844		       85 4e		      sta	PF1	; 3 = 16 @ 51	      NOT MIRRORED, D7D6D5D4 -->
     43  6846
     44  6846		       b1 ed		      lda	(bigdigit3),y	; 5
     45  6848		       4a		      lsr		; 2
     46  6849		       4a		      lsr		; 2
     47  684a		       4a		      lsr		; 2
     48  684b		       4a		      lsr		; 2
     49  684c		       85 4f		      sta	PF2	; 3 = 16 @67
     50  684e
      0  684e					      SLEEP	2
      1  684e				   .CYCLES    SET	2
      2  684e
      3  684e				  -	      IF	.CYCLES < 2
      4  684e				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  684e				  -	      ERR
      6  684e					      ENDIF
      7  684e
      8  684e				  -	      IF	.CYCLES & 1
      9  684e				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  684e				  -	      nop	0
     11  684e				  -	      ELSE
     12  684e				  -	      bit	VSYNC
     13  684e				  -	      ENDIF
     14  684e				  -.CYCLES    SET	.CYCLES - 3
     15  684e					      ENDIF
     16  684e
     17  684e					      REPEAT	.CYCLES / 2
     18  684e		       ea		      nop
     19  684f					      REPEND
      0  684f					      SLEEP	2	; @71
      1  684f				   .CYCLES    SET	2
      2  684f
      3  684f				  -	      IF	.CYCLES < 2
      4  684f				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  684f				  -	      ERR
      6  684f					      ENDIF
      7  684f
      8  684f				  -	      IF	.CYCLES & 1
      9  684f				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  684f				  -	      nop	0
     11  684f				  -	      ELSE
     12  684f				  -	      bit	VSYNC
     13  684f				  -	      ENDIF
     14  684f				  -.CYCLES    SET	.CYCLES - 3
     15  684f					      ENDIF
     16  684f
     17  684f					      REPEAT	.CYCLES / 2
     18  684f		       ea		      nop
     19  6850					      REPEND
     53  6850
     54  6850
     55  6850					      IF	.LOOPCC = 0
      0  6850					      SLEEP	5
      1  6850				   .CYCLES    SET	5
      2  6850
      3  6850				  -	      IF	.CYCLES < 2
      4  6850				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6850				  -	      ERR
      6  6850					      ENDIF
      7  6850
      8  6850					      IF	.CYCLES & 1
      9  6850					      IFNCONST	NO_ILLEGAL_OPCODES
     10  6850		       04 00		      nop	0
     11  6852				  -	      ELSE
     12  6852				  -	      bit	VSYNC
     13  6852					      ENDIF
     14  6852				   .CYCLES    SET	.CYCLES - 3
     15  6852					      ENDIF
     16  6852
     17  6852					      REPEAT	.CYCLES / 2
     18  6852		       ea		      nop
     19  6853					      REPEND
     57  6853					      ENDIF
     58  6853				   .LOOPCC    SET	.LOOPCC + 1
     59  6853
     60  6853
     16  6853					      REPEND
     17  6853
     18  6853		       86 4d		      stx	PF0	; 3
     19  6855
     20  6855		       b1 e7		      lda	(bigdigit0),y	; 5
     21  6857		       85 4e		      sta	PF1	; 3 = 8 @11
     22  6859
     23  6859		       b1 e9		      lda	(bigdigit1),y	; 5
     24  685b		       85 4f		      sta	PF2	; 3 = 8 @19
     25  685d
     26  685d
     27  685d							; RHS
     28  685d
     29  685d
     30  685d		       b1 eb		      lda	(bigdigit2),y	; 5
     31  685f		       85 4d		      sta	PF0	; 3 = 8 @27	   D7D6D5D4 <--- mirrored
     32  6861
     33  6861		       0a		      asl		; 2
     34  6862		       0a		      asl		; 2
     35  6863		       0a		      asl		; 2
     36  6864		       0a		      asl		; 2 = 8 @35
     37  6865
     38  6865		       85 ef		      sta	codeTemp	; 3
     39  6867		       b1 ed		      lda	(bigdigit3),y	; 5
     40  6869		       29 0f		      and	#$f	; 2
     41  686b		       05 ef		      ora	codeTemp	; 3
     42  686d		       85 4e		      sta	PF1	; 3 = 16 @ 51	      NOT MIRRORED, D7D6D5D4 -->
     43  686f
     44  686f		       b1 ed		      lda	(bigdigit3),y	; 5
     45  6871		       4a		      lsr		; 2
     46  6872		       4a		      lsr		; 2
     47  6873		       4a		      lsr		; 2
     48  6874		       4a		      lsr		; 2
     49  6875		       85 4f		      sta	PF2	; 3 = 16 @67
     50  6877
      0  6877					      SLEEP	2
      1  6877				   .CYCLES    SET	2
      2  6877
      3  6877				  -	      IF	.CYCLES < 2
      4  6877				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6877				  -	      ERR
      6  6877					      ENDIF
      7  6877
      8  6877				  -	      IF	.CYCLES & 1
      9  6877				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  6877				  -	      nop	0
     11  6877				  -	      ELSE
     12  6877				  -	      bit	VSYNC
     13  6877				  -	      ENDIF
     14  6877				  -.CYCLES    SET	.CYCLES - 3
     15  6877					      ENDIF
     16  6877
     17  6877					      REPEAT	.CYCLES / 2
     18  6877		       ea		      nop
     19  6878					      REPEND
      0  6878					      SLEEP	2	; @71
      1  6878				   .CYCLES    SET	2
      2  6878
      3  6878				  -	      IF	.CYCLES < 2
      4  6878				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  6878				  -	      ERR
      6  6878					      ENDIF
      7  6878
      8  6878				  -	      IF	.CYCLES & 1
      9  6878				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  6878				  -	      nop	0
     11  6878				  -	      ELSE
     12  6878				  -	      bit	VSYNC
     13  6878				  -	      ENDIF
     14  6878				  -.CYCLES    SET	.CYCLES - 3
     15  6878					      ENDIF
     16  6878
     17  6878					      REPEAT	.CYCLES / 2
     18  6878		       ea		      nop
     19  6879					      REPEND
     53  6879
     54  6879
     55  6879				  -	      IF	.LOOPCC = 0
     56  6879				  -	      SLEEP	5
     57  6879					      ENDIF
     58  6879				   .LOOPCC    SET	.LOOPCC + 1
     59  6879
     60  6879
     61  6879					      REPEND
     62  6879
     63  6879		       88		      dey		; 2
     64  687a		       10 ae		      bpl	blockLine	; 3/2
     65  687c
      0  687c					      CHECKPAGEX	blockLine, "blockLine crosses page"
      9  687c					      LIST	ON
     67  687c
     68  687c
     69  687c
     70  687c		       a9 00		      lda	#0
     71  687e		       85 4d		      sta	PF0
     72  6880		       85 4e		      sta	PF1
     73  6882		       85 4f		      sta	PF2
     74  6884
     75  6884		       85 42		      sta	WSYNC
     76  6886		       85 42		      sta	WSYNC
     77  6888		       85 42		      sta	WSYNC
     78  688a		       85 42		      sta	WSYNC
     79  688c		       85 42		      sta	WSYNC
     80  688e
     81  688e		       60		      rts
     82  688f
     83  688f
     84  688f
      0  688f					      DEFINE_SUBROUTINE	setCodeDigits
      1  688f		       00 0d	   BANK_setCodeDigits =	_CURRENT_BANK
      2  688f					      SUBROUTINE
      3  688f				   setCodeDigits
     86  688f
     87  688f		       b9 db 00 	      lda	codeDigit,y
     88  6892		       4a		      lsr
     89  6893		       90 08		      bcc	correct0
     90  6895
     91  6895		       a5 f0		      lda	codeDelay
     92  6897		       4a		      lsr
     93  6898		       4a		      lsr
     94  6899		       4a		      lsr
     95  689a		       4c a0 f0 	      jmp	correct0a
     96  689d
     97  689d		       b9 db 00    correct0   lda	codeDigit,y
     98  68a0		       29 fe	   correct0a  and	#%11111110
     99  68a2		       aa		      tax
    100  68a3		       bd 86 f2 	      lda	CODE_DIGIT0,x
    101  68a6		       85 e7		      sta	bigdigit0
    102  68a8		       bd 87 f2 	      lda	CODE_DIGIT0+1,x
    103  68ab		       85 e8		      sta	bigdigit0+1
    104  68ad
    105  68ad		       b9 dc 00 	      lda	codeDigit+1,y
    106  68b0		       4a		      lsr
    107  68b1		       90 08		      bcc	correct1
    108  68b3
    109  68b3		       a5 f0		      lda	codeDelay
    110  68b5		       4a		      lsr
    111  68b6		       4a		      lsr
    112  68b7		       4a		      lsr
    113  68b8		       4c be f0 	      jmp	correct1a
    114  68bb
    115  68bb		       b9 dc 00    correct1   lda	codeDigit+1,y
    116  68be		       29 fe	   correct1a  and	#%11111110
    117  68c0		       aa		      tax
    118  68c1		       bd 9a f2 	      lda	CODE_DIGIT1,x
    119  68c4		       85 e9		      sta	bigdigit1
    120  68c6		       bd 9b f2 	      lda	CODE_DIGIT1+1,x
    121  68c9		       85 ea		      sta	bigdigit1+1
    122  68cb
    123  68cb		       b9 dd 00 	      lda	codeDigit+2,y
    124  68ce		       4a		      lsr
    125  68cf		       90 08		      bcc	correct2
    126  68d1
    127  68d1		       a5 f0		      lda	codeDelay
    128  68d3		       4a		      lsr
    129  68d4		       4a		      lsr
    130  68d5		       4a		      lsr
    131  68d6		       4c dc f0 	      jmp	correct2a
    132  68d9
    133  68d9		       b9 dd 00    correct2   lda	codeDigit+2,y
    134  68dc		       29 fe	   correct2a  and	#%11111110
    135  68de		       aa		      tax
    136  68df		       bd ae f2 	      lda	CODE_DIGIT2,x
    137  68e2		       85 eb		      sta	bigdigit2
    138  68e4		       bd af f2 	      lda	CODE_DIGIT2+1,x
    139  68e7		       85 ec		      sta	bigdigit2+1
    140  68e9
    141  68e9		       b9 de 00 	      lda	codeDigit+3,y
    142  68ec		       4a		      lsr
    143  68ed		       90 08		      bcc	correct3
    144  68ef
    145  68ef		       a5 f0		      lda	codeDelay
    146  68f1		       4a		      lsr
    147  68f2		       4a		      lsr
    148  68f3		       4a		      lsr
    149  68f4		       4c fa f0 	      jmp	correct3a
    150  68f7
    151  68f7		       b9 de 00    correct3   lda	codeDigit+3,y
    152  68fa		       29 fe	   correct3a  and	#%11111110
    153  68fc		       aa		      tax
    154  68fd		       bd c2 f2 	      lda	CODE_DIGIT3,x
    155  6900		       85 ed		      sta	bigdigit3
    156  6902		       bd c3 f2 	      lda	CODE_DIGIT3+1,x
    157  6905		       85 ee		      sta	bigdigit3+1
    158  6907
    159  6907		       60		      rts
    160  6908
    161  6908
      0  6908					      DEFINE_SUBROUTINE	xSelectionScreenInit
      1  6908		       00 0d	   BANK_xSelectionScreenInit =	_CURRENT_BANK
      2  6908					      SUBROUTINE
      3  6908				   xSelectionScreenInit
    163  6908
    164  6908		       a9 00		      lda	#%0
    165  690a							;		  sta NUSIZ1
    166  690a		       85 65		      sta	VDELP0
    167  690c		       85 66		      sta	VDELP1
    168  690e		       85 4b		      sta	REFP0
    169  6910		       85 4c		      sta	REFP1
    170  6912							;		  sta COLUBK
    171  6912		       85 59		      sta	AUDV0
    172  6914		       85 5a		      sta	AUDV1	; turn off music while levels init
    173  6916
    174  6916
    175  6916		       a9 f0		      lda	#%11110000
    176  6918		       85 60		      sta	HMP0
    177  691a
    178  691a		       a9 d0		      lda	#%11010000
    179  691c		       85 61		      sta	HMP1
    180  691e		       a9 07		      lda	#%111
    181  6920		       85 44		      sta	NUSIZ0
    182  6922		       85 45		      sta	NUSIZ1
    183  6924
    184  6924		       a9 00		      lda	#%0
    185  6926		       85 4a		      sta	CTRLPF
    186  6928		       85 f0		      sta	codeDelay
    187  692a		       a9 05		      lda	#5	;1
    188  692c		       85 f1		      sta	codeDelay+1
    189  692e
    190  692e		       a2 0b		      ldx	#11
    191  6930		       b5 db	   xferdigits lda	codeDigit,x	; == __decimal,x
    192  6932		       0a		      asl
    193  6933		       09 01		      ora	#1	; NOT locked
    194  6935		       95 db		      sta	codeDigit,x
    195  6937		       ca		      dex
    196  6938		       10 f6		      bpl	xferdigits
    197  693a
    198  693a							;		  ldx #11
    199  693a							;randomdig	  jsr Random
    200  693a							;		  and #15
    201  693a							;		  cmp #10
    202  693a							;		  bcs randomdig
    203  693a							;		  asl
    204  693a							;		  ora #1		  ; NOT locked!
    205  693a							;		  sta codeDigit,x
    206  693a							;		  dex
    207  693a							;		  bpl randomdig
    208  693a
    209  693a		       60		      rts
    210  693b
    211  693b							;xPlatformxwallColour
    212  693b							;    .byte $F0, $F0, $22, $22
    213  693b							;xPlatformxadjustColour
    214  693b							;    .byte 0,0, $c0, $c0
    215  693b
    216  693b
    217  693b
    218  693b
      0  693b					      DEFINE_SUBROUTINE	xLevelScreen
      1  693b		       00 0d	   BANK_xLevelScreen =	_CURRENT_BANK
      2  693b					      SUBROUTINE
      3  693b				   xLevelScreen
    220  693b
    221  693b		       a5 c1		      lda	NextLevelTrigger
    222  693d		       29 20		      and	#32
    223  693f		       f0 01		      beq	allGood
    224  6941		       60		      rts
    225  6942				   allGood
    226  6942
    227  6942
    228  6942		       20 08 f1 	      jsr	xSelectionScreenInit
    229  6945
    230  6945		       20 52 fd 	      jsr	Random
    231  6948		       29 f0		      and	#%11110000
    232  694a		       85 ef		      sta	codeTemp
    233  694c		       09 02		      ora	#2
    234  694e		       85 49		      sta	COLUBK
    235  6950		       85 46		      sta	COLUP0
    236  6952		       85 47		      sta	COLUP1
    237  6954
    238  6954		       20 52 fd    sameFix    jsr	Random
    239  6957		       29 f0		      and	#%11110000
    240  6959		       c5 ef		      cmp	codeTemp
    241  695b		       f0 f7		      beq	sameFix
    242  695d		       09 08		      ora	#8
    243  695f		       85 48		      sta	COLUPF
    244  6961
    245  6961
    246  6961
      0  6961					      RESYNC		; uses overlay
      1  6961
      2  6961		       a9 02		      lda	#%10
      3  6963		       85 41		      sta	VBLANK
      4  6965
      5  6965		       a2 08		      ldx	#8
      6  6967				   .loopResync
      0  6967					      VERTICAL_SYNC
      1  6967		       a9 0e		      lda	#%1110
      2  6969		       85 42	   .VSLP1     sta	WSYNC
      3  696b		       85 40		      sta	VSYNC
      4  696d		       4a		      lsr
      5  696e		       d0 f9		      bne	.VSLP1
      8  6970
      9  6970		       a0 88		      ldy	#SCANLINES_NTSC/2 - 2
     10  6972		       a5 80		      lda	Platform
     11  6974		       49 02		      eor	#PAL_50
     12  6976		       d0 02		      bne	.ntsc
     13  6978		       a0 9a		      ldy	#SCANLINES_PAL/2 - 2
     14  697a				   .ntsc
     15  697a				   .loopWait
     16  697a		       85 42		      sta	WSYNC
     17  697c		       85 42		      sta	WSYNC
     18  697e		       88		      dey
     19  697f		       d0 f9		      bne	.loopWait
     20  6981		       ca		      dex
     21  6982		       d0 e3		      bne	.loopResync
    248  6984
    249  6984				   xRestartFrameX
    250  6984
    251  6984		       a9 0e		      lda	#%1110	; VSYNC ON
    252  6986		       85 42	   .xloopVSync3 sta	WSYNC
    253  6988		       85 40		      sta	VSYNC
    254  698a		       4a		      lsr
    255  698b		       d0 f9		      bne	.xloopVSync3	; branch until VYSNC has been reset
    256  698d
    257  698d		       a6 80		      ldx	Platform
    258  698f		       bd 7a f2 	      lda	xVBlankTime2x,x
    259  6992		       8d 96 02 	      sta	TIM64T
    260  6995
    261  6995		       a9 02		      lda	#2
    262  6997		       85 41		      sta	VBLANK
    263  6999		       a2 25		      ldx	#37
    264  699b		       85 42	   xtoplines  sta	WSYNC
    265  699d		       ca		      dex
    266  699e		       d0 fb		      bne	xtoplines
    267  69a0		       86 41		      stx	VBLANK
    268  69a2
    269  69a2		       a0 00		      ldy	#0
    270  69a4		       20 8f f0 	      jsr	setCodeDigits
    271  69a7
    272  69a7							;------------------------------------------------------------------
    273  69a7
    274  69a7
    275  69a7				   VerticalBlankX		;
    276  69a7		       ad 84 02 	      lda	INTIM
    277  69aa		       d0 fb		      bne	VerticalBlankX
    278  69ac
    279  69ac
    280  69ac		       a9 00		      lda	#0
    281  69ae		       85 4d		      sta	PF0
    282  69b0		       85 4e		      sta	PF1
    283  69b2		       85 4f		      sta	PF2
    284  69b4
    285  69b4							; position the sprites for the box walls
    286  69b4
    287  69b4		       85 42		      sta	WSYNC
    288  69b6
      0  69b6					      SLEEP	10	;21
      1  69b6				   .CYCLES    SET	10
      2  69b6
      3  69b6				  -	      IF	.CYCLES < 2
      4  69b6				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  69b6				  -	      ERR
      6  69b6					      ENDIF
      7  69b6
      8  69b6				  -	      IF	.CYCLES & 1
      9  69b6				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  69b6				  -	      nop	0
     11  69b6				  -	      ELSE
     12  69b6				  -	      bit	VSYNC
     13  69b6				  -	      ENDIF
     14  69b6				  -.CYCLES    SET	.CYCLES - 3
     15  69b6					      ENDIF
     16  69b6
     17  69b6					      REPEAT	.CYCLES / 2
     18  69b6		       ea		      nop
     17  69b6					      REPEND
     18  69b7		       ea		      nop
     17  69b7					      REPEND
     18  69b8		       ea		      nop
     17  69b8					      REPEND
     18  69b9		       ea		      nop
     17  69b9					      REPEND
     18  69ba		       ea		      nop
     19  69bb					      REPEND
    290  69bb		       85 50		      sta	RESP0
      0  69bd					      SLEEP	54
      1  69bd				   .CYCLES    SET	54
      2  69bd
      3  69bd				  -	      IF	.CYCLES < 2
      4  69bd				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  69bd				  -	      ERR
      6  69bd					      ENDIF
      7  69bd
      8  69bd				  -	      IF	.CYCLES & 1
      9  69bd				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  69bd				  -	      nop	0
     11  69bd				  -	      ELSE
     12  69bd				  -	      bit	VSYNC
     13  69bd				  -	      ENDIF
     14  69bd				  -.CYCLES    SET	.CYCLES - 3
     15  69bd					      ENDIF
     16  69bd
     17  69bd					      REPEAT	.CYCLES / 2
     18  69bd		       ea		      nop
     17  69bd					      REPEND
     18  69be		       ea		      nop
     17  69be					      REPEND
     18  69bf		       ea		      nop
     17  69bf					      REPEND
     18  69c0		       ea		      nop
     17  69c0					      REPEND
     18  69c1		       ea		      nop
     17  69c1					      REPEND
     18  69c2		       ea		      nop
     17  69c2					      REPEND
     18  69c3		       ea		      nop
     17  69c3					      REPEND
     18  69c4		       ea		      nop
     17  69c4					      REPEND
     18  69c5		       ea		      nop
     17  69c5					      REPEND
     18  69c6		       ea		      nop
     17  69c6					      REPEND
     18  69c7		       ea		      nop
     17  69c7					      REPEND
     18  69c8		       ea		      nop
     17  69c8					      REPEND
     18  69c9		       ea		      nop
     17  69c9					      REPEND
     18  69ca		       ea		      nop
     17  69ca					      REPEND
     18  69cb		       ea		      nop
     17  69cb					      REPEND
     18  69cc		       ea		      nop
     17  69cc					      REPEND
     18  69cd		       ea		      nop
     17  69cd					      REPEND
     18  69ce		       ea		      nop
     17  69ce					      REPEND
     18  69cf		       ea		      nop
     17  69cf					      REPEND
     18  69d0		       ea		      nop
     17  69d0					      REPEND
     18  69d1		       ea		      nop
     17  69d1					      REPEND
     18  69d2		       ea		      nop
     17  69d2					      REPEND
     18  69d3		       ea		      nop
     17  69d3					      REPEND
     18  69d4		       ea		      nop
     17  69d4					      REPEND
     18  69d5		       ea		      nop
     17  69d5					      REPEND
     18  69d6		       ea		      nop
     17  69d6					      REPEND
     18  69d7		       ea		      nop
     19  69d8					      REPEND
    292  69d8		       85 51		      sta	RESP1
    293  69da
    294  69da		       85 42		      sta	WSYNC
    295  69dc
      0  69dc					      SLEEP	66
      1  69dc				   .CYCLES    SET	66
      2  69dc
      3  69dc				  -	      IF	.CYCLES < 2
      4  69dc				  -	      ECHO	"MACRO ERROR: 'SLEEP': Duration must be > 1"
      5  69dc				  -	      ERR
      6  69dc					      ENDIF
      7  69dc
      8  69dc				  -	      IF	.CYCLES & 1
      9  69dc				  -	      IFNCONST	NO_ILLEGAL_OPCODES
     10  69dc				  -	      nop	0
     11  69dc				  -	      ELSE
     12  69dc				  -	      bit	VSYNC
     13  69dc				  -	      ENDIF
     14  69dc				  -.CYCLES    SET	.CYCLES - 3
     15  69dc					      ENDIF
     16  69dc
     17  69dc					      REPEAT	.CYCLES / 2
     18  69dc		       ea		      nop
     17  69dc					      REPEND
     18  69dd		       ea		      nop
     17  69dd					      REPEND
     18  69de		       ea		      nop
     17  69de					      REPEND
     18  69df		       ea		      nop
     17  69df					      REPEND
     18  69e0		       ea		      nop
     17  69e0					      REPEND
     18  69e1		       ea		      nop
     17  69e1					      REPEND
     18  69e2		       ea		      nop
     17  69e2					      REPEND
     18  69e3		       ea		      nop
     17  69e3					      REPEND
     18  69e4		       ea		      nop
     17  69e4					      REPEND
     18  69e5		       ea		      nop
     17  69e5					      REPEND
     18  69e6		       ea		      nop
     17  69e6					      REPEND
     18  69e7		       ea		      nop
     17  69e7					      REPEND
     18  69e8		       ea		      nop
     17  69e8					      REPEND
     18  69e9		       ea		      nop
     17  69e9					      REPEND
     18  69ea		       ea		      nop
     17  69ea					      REPEND
     18  69eb		       ea		      nop
     17  69eb					      REPEND
     18  69ec		       ea		      nop
     17  69ec					      REPEND
     18  69ed		       ea		      nop
     17  69ed					      REPEND
     18  69ee		       ea		      nop
     17  69ee					      REPEND
     18  69ef		       ea		      nop
     17  69ef					      REPEND
     18  69f0		       ea		      nop
     17  69f0					      REPEND
     18  69f1		       ea		      nop
     17  69f1					      REPEND
     18  69f2		       ea		      nop
     17  69f2					      REPEND
     18  69f3		       ea		      nop
     17  69f3					      REPEND
     18  69f4		       ea		      nop
     17  69f4					      REPEND
     18  69f5		       ea		      nop
     17  69f5					      REPEND
     18  69f6		       ea		      nop
     17  69f6					      REPEND
     18  69f7		       ea		      nop
     17  69f7					      REPEND
     18  69f8		       ea		      nop
     17  69f8					      REPEND
     18  69f9		       ea		      nop
     17  69f9					      REPEND
     18  69fa		       ea		      nop
     17  69fa					      REPEND
     18  69fb		       ea		      nop
     17  69fb					      REPEND
     18  69fc		       ea		      nop
     19  69fd					      REPEND
    297  69fd		       85 6a		      sta	HMOVE
    298  69ff
    299  69ff		       a9 00		      lda	#0
    300  6a01		       85 4d		      sta	PF0
    301  6a03		       85 4e		      sta	PF1
    302  6a05		       85 4f		      sta	PF2
    303  6a07		       85 5c		      sta	GRP1
    304  6a09
    305  6a09		       a9 f0		      lda	#%11110000
    306  6a0b		       85 5b		      sta	GRP0
    307  6a0d
    308  6a0d							;		  sta WSYNC
    309  6a0d
    310  6a0d							;------------------------------------------------------------------
    311  6a0d
    312  6a0d							; Do X scanlines of color-changing (our picture)
    313  6a0d
    314  6a0d		       a2 00		      ldx	#0	; used as a generic "0" during the kernel
    315  6a0f		       85 42		      sta	WSYNC
    316  6a11		       20 00 f0 	      jsr	xdigitBlock
    317  6a14
    318  6a14		       a0 04		      ldy	#4
    319  6a16		       20 8f f0 	      jsr	setCodeDigits
    320  6a19		       20 00 f0 	      jsr	xdigitBlock
    321  6a1c
    322  6a1c		       a0 08		      ldy	#8
    323  6a1e		       20 8f f0 	      jsr	setCodeDigits
    324  6a21		       20 00 f0 	      jsr	xdigitBlock
    325  6a24
    326  6a24		       a4 80		      ldy	Platform
    327  6a26		       b9 7e f2 	      lda	xOverscanTime2X,y
    328  6a29		       8d 96 02 	      sta	TIM64T
    329  6a2c
    330  6a2c		       85 42		      sta	WSYNC
    331  6a2e
    332  6a2e
    333  6a2e
    334  6a2e
    335  6a2e		       a5 f0		      lda	codeDelay
    336  6a30		       18		      clc
    337  6a31		       69 10		      adc	#16
    338  6a33		       c9 a0		      cmp	#$A0
    339  6a35		       90 08		      bcc	cDOK
    340  6a37
    341  6a37		       a5 f1		      lda	codeDelay+1
    342  6a39		       f0 04		      beq	cDOK
    343  6a3b		       c6 f1		      dec	codeDelay+1
    344  6a3d		       a9 00		      lda	#0
    345  6a3f		       85 f0	   cDOK       sta	codeDelay
    346  6a41
    347  6a41		       4a		      lsr
    348  6a42		       4a		      lsr
    349  6a43		       4a		      lsr
    350  6a44		       4a		      lsr
    351  6a45		       85 ef		      sta	codeTemp	; digit currently shown
    352  6a47
    353  6a47		       a5 f1		      lda	codeDelay+1
    354  6a49		       d0 1a		      bne	onepass
    355  6a4b
    356  6a4b		       a2 00		      ldx	#0
    357  6a4d		       b5 db	   lockDigits lda	codeDigit,x
    358  6a4f		       4a		      lsr
    359  6a50		       90 0e		      bcc	nochange2
    360  6a52
    361  6a52		       c5 ef		      cmp	codeTemp
    362  6a54		       d0 0f		      bne	onepass
    363  6a56
    364  6a56		       0a		      asl
    365  6a57		       95 db		      sta	codeDigit,x
    366  6a59
    367  6a59		       a9 03		      lda	#3
    368  6a5b		       85 f1		      sta	codeDelay+1
    369  6a5d		       4c 65 f2 	      jmp	onepass
    370  6a60
    371  6a60		       e8	   nochange2  inx
    372  6a61		       e0 0c		      cpx	#12
    373  6a63		       90 e8		      bcc	lockDigits
    374  6a65
    375  6a65							; none found so it's staic
    376  6a65
    377  6a65				   onepass
    378  6a65
    379  6a65
    380  6a65							;--------------------------------------------------------------------------
    381  6a65
    382  6a65		       ad 84 02    xoscanX    lda	INTIM
    383  6a68		       d0 fb		      bne	xoscanX
    384  6a6a
    385  6a6a							;sta COLUBK
    386  6a6a		       a9 42		      lda	#%01000010	; bit6 is not required
    387  6a6c		       85 41		      sta	VBLANK	; end of screen - enter blanking
    388  6a6e
    389  6a6e		       a9 00		      lda	#0
    390  6a70		       85 40		      sta	VSYNC
    391  6a72
    392  6a72		       a5 4c	   xwaitbutton lda	INPT4
    393  6a74		       10 03		      bpl	xretX
    394  6a76
    395  6a76		       4c 84 f1 	      jmp	xRestartFrameX
    396  6a79
    397  6a79		       60	   xretX      rts
    398  6a7a
    399  6a7a
    400  6a7a				   xVBlankTime2x
    401  6a7a		       38 38		      .byte.b	56,56
    402  6a7c		       4e 4e		      .byte.b	78,78
    403  6a7e				   xOverscanTime2X
    404  6a7e		       2a 2a		      .byte.b	42, 42
    405  6a80		       40 40		      .byte.b	64, 64
    406  6a82
    407  6a82		       00 20	   xCOLOUR_LINES =	32
    408  6a82				   xcolvecX
    409  6a82		       00 00 20 20	      .byte.b	0, 0, xCOLOUR_LINES, xCOLOUR_LINES
    410  6a86
    411  6a86
    412  6a86				   CODE_DIGIT0
    413  6a86		       d6 f2		      .word.w	CODE_DIGIT0_0
    414  6a88		       51 f3		      .word.w	CODE_DIGIT0_1
    415  6a8a		       bd f3		      .word.w	CODE_DIGIT0_2
    416  6a8c		       36 f4		      .word.w	CODE_DIGIT0_3
    417  6a8e		       a2 f4		      .word.w	CODE_DIGIT0_4
    418  6a90		       1b f5		      .word.w	CODE_DIGIT0_5
    419  6a92		       87 f5		      .word.w	CODE_DIGIT0_6
    420  6a94		       00 f6		      .word.w	CODE_DIGIT0_7
    421  6a96		       6c f6		      .word.w	CODE_DIGIT0_8
    422  6a98		       d8 f6		      .word.w	CODE_DIGIT0_9
    423  6a9a
    424  6a9a				   CODE_DIGIT1
    425  6a9a		       00 f3		      .word.w	CODE_DIGIT1_0
    426  6a9c		       6c f3		      .word.w	CODE_DIGIT1_1
    427  6a9e		       d8 f3		      .word.w	CODE_DIGIT1_2
    428  6aa0		       51 f4		      .word.w	CODE_DIGIT1_3
    429  6aa2		       bd f4		      .word.w	CODE_DIGIT1_4
    430  6aa4		       36 f5		      .word.w	CODE_DIGIT1_5
    431  6aa6		       a2 f5		      .word.w	CODE_DIGIT1_6
    432  6aa8		       1b f6		      .word.w	CODE_DIGIT1_7
    433  6aaa		       87 f6		      .word.w	CODE_DIGIT1_8
    434  6aac		       00 f7		      .word.w	CODE_DIGIT1_9
    435  6aae
    436  6aae				   CODE_DIGIT2
    437  6aae		       1b f3		      .word.w	CODE_DIGIT2_0
    438  6ab0		       87 f3		      .word.w	CODE_DIGIT2_1
    439  6ab2		       00 f4		      .word.w	CODE_DIGIT2_2
    440  6ab4		       6c f4		      .word.w	CODE_DIGIT2_3
    441  6ab6		       d8 f4		      .word.w	CODE_DIGIT2_4
    442  6ab8		       51 f5		      .word.w	CODE_DIGIT2_5
    443  6aba		       bd f5		      .word.w	CODE_DIGIT2_6
    444  6abc		       36 f6		      .word.w	CODE_DIGIT2_7
    445  6abe		       a2 f6		      .word.w	CODE_DIGIT2_8
    446  6ac0		       1b f7		      .word.w	CODE_DIGIT2_9
    447  6ac2
    448  6ac2
    449  6ac2				   CODE_DIGIT3
    450  6ac2		       36 f3		      .word.w	CODE_DIGIT3_0
    451  6ac4		       a2 f3		      .word.w	CODE_DIGIT3_1
    452  6ac6		       1b f4		      .word.w	CODE_DIGIT3_2
    453  6ac8		       87 f4		      .word.w	CODE_DIGIT3_3
    454  6aca		       00 f5		      .word.w	CODE_DIGIT3_4
    455  6acc		       6c f5		      .word.w	CODE_DIGIT3_5
    456  6ace		       d8 f5		      .word.w	CODE_DIGIT3_6
    457  6ad0		       51 f6		      .word.w	CODE_DIGIT3_7
    458  6ad2		       bd f6		      .word.w	CODE_DIGIT3_8
    459  6ad4		       36 f7		      .word.w	CODE_DIGIT3_9
    460  6ad6
------- FILE bigDigits3.asm LEVEL 3 PASS 3
      0  6ad6					      include	"bigDigits3.asm"
      0  6ad6					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_0", 27
     10  6ad6					      LIST	ON
      2  6ad6				   CODE_DIGIT0_0
      3  6ad6		       1c		      .byte.b	28
      4  6ad7		       3e		      .byte.b	62
      5  6ad8		       3e		      .byte.b	62
      6  6ad9		       3e		      .byte.b	62
      7  6ada		       77		      .byte.b	119
      8  6adb		       63		      .byte.b	99
      9  6adc		       63		      .byte.b	99
     10  6add		       63		      .byte.b	99
     11  6ade		       63		      .byte.b	99
     12  6adf		       63		      .byte.b	99
     13  6ae0		       63		      .byte.b	99
     14  6ae1		       63		      .byte.b	99
     15  6ae2		       63		      .byte.b	99
     16  6ae3		       63		      .byte.b	99
     17  6ae4		       63		      .byte.b	99
     18  6ae5		       63		      .byte.b	99
     19  6ae6		       63		      .byte.b	99
     20  6ae7		       63		      .byte.b	99
     21  6ae8		       63		      .byte.b	99
     22  6ae9		       63		      .byte.b	99
     23  6aea		       63		      .byte.b	99
     24  6aeb		       63		      .byte.b	99
     25  6aec		       77		      .byte.b	119
     26  6aed		       3e		      .byte.b	62
     27  6aee		       3e		      .byte.b	62
     28  6aef		       3e		      .byte.b	62
     29  6af0		       1c		      .byte.b	28
      0  6af1					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_0", 27
 PAGE BREAK INSERTED FOR  CODE_DIGIT1_0
 REQUESTED SIZE =  $1b
 WASTED SPACE =  $f
 PAGEBREAK LOCATION =  $f300
     10  6b00					      LIST	ON
     31  6b00				   CODE_DIGIT1_0
     32  6b00		       38		      .byte.b	56
     33  6b01		       7c		      .byte.b	124
     34  6b02		       7c		      .byte.b	124
     35  6b03		       7c		      .byte.b	124
     36  6b04		       ee		      .byte.b	238
     37  6b05		       c6		      .byte.b	198
     38  6b06		       c6		      .byte.b	198
     39  6b07		       c6		      .byte.b	198
     40  6b08		       c6		      .byte.b	198
     41  6b09		       c6		      .byte.b	198
     42  6b0a		       c6		      .byte.b	198
     43  6b0b		       c6		      .byte.b	198
     44  6b0c		       c6		      .byte.b	198
     45  6b0d		       c6		      .byte.b	198
     46  6b0e		       c6		      .byte.b	198
     47  6b0f		       c6		      .byte.b	198
     48  6b10		       c6		      .byte.b	198
     49  6b11		       c6		      .byte.b	198
     50  6b12		       c6		      .byte.b	198
     51  6b13		       c6		      .byte.b	198
     52  6b14		       c6		      .byte.b	198
     53  6b15		       c6		      .byte.b	198
     54  6b16		       ee		      .byte.b	238
     55  6b17		       7c		      .byte.b	124
     56  6b18		       7c		      .byte.b	124
     57  6b19		       7c		      .byte.b	124
     58  6b1a		       38		      .byte.b	56
      0  6b1b					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_0", 27
     10  6b1b					      LIST	ON
     60  6b1b				   CODE_DIGIT2_0
     61  6b1b		       8c		      .byte.b	140
     62  6b1c		       ce		      .byte.b	206
     63  6b1d		       ce		      .byte.b	206
     64  6b1e		       ce		      .byte.b	206
     65  6b1f		       e7		      .byte.b	231
     66  6b20		       63		      .byte.b	99
     67  6b21		       63		      .byte.b	99
     68  6b22		       63		      .byte.b	99
     69  6b23		       63		      .byte.b	99
     70  6b24		       63		      .byte.b	99
     71  6b25		       63		      .byte.b	99
     72  6b26		       63		      .byte.b	99
     73  6b27		       63		      .byte.b	99
     74  6b28		       63		      .byte.b	99
     75  6b29		       63		      .byte.b	99
     76  6b2a		       63		      .byte.b	99
     77  6b2b		       63		      .byte.b	99
     78  6b2c		       63		      .byte.b	99
     79  6b2d		       63		      .byte.b	99
     80  6b2e		       63		      .byte.b	99
     81  6b2f		       63		      .byte.b	99
     82  6b30		       63		      .byte.b	99
     83  6b31		       e7		      .byte.b	231
     84  6b32		       ce		      .byte.b	206
     85  6b33		       ce		      .byte.b	206
     86  6b34		       ce		      .byte.b	206
     87  6b35		       8c		      .byte.b	140
      0  6b36					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_0", 27
     10  6b36					      LIST	ON
     89  6b36				   CODE_DIGIT3_0
     90  6b36		       31		      .byte.b	49
     91  6b37		       73		      .byte.b	115
     92  6b38		       73		      .byte.b	115
     93  6b39		       73		      .byte.b	115
     94  6b3a		       e7		      .byte.b	231
     95  6b3b		       c6		      .byte.b	198
     96  6b3c		       c6		      .byte.b	198
     97  6b3d		       c6		      .byte.b	198
     98  6b3e		       c6		      .byte.b	198
     99  6b3f		       c6		      .byte.b	198
    100  6b40		       c6		      .byte.b	198
    101  6b41		       c6		      .byte.b	198
    102  6b42		       c6		      .byte.b	198
    103  6b43		       c6		      .byte.b	198
    104  6b44		       c6		      .byte.b	198
    105  6b45		       c6		      .byte.b	198
    106  6b46		       c6		      .byte.b	198
    107  6b47		       c6		      .byte.b	198
    108  6b48		       c6		      .byte.b	198
    109  6b49		       c6		      .byte.b	198
    110  6b4a		       c6		      .byte.b	198
    111  6b4b		       c6		      .byte.b	198
    112  6b4c		       e7		      .byte.b	231
    113  6b4d		       73		      .byte.b	115
    114  6b4e		       73		      .byte.b	115
    115  6b4f		       73		      .byte.b	115
    116  6b50		       31		      .byte.b	49
      0  6b51					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_1", 27
     10  6b51					      LIST	ON
    118  6b51				   CODE_DIGIT0_1
    119  6b51		       0c		      .byte.b	12
    120  6b52		       0c		      .byte.b	12
    121  6b53		       0c		      .byte.b	12
    122  6b54		       0c		      .byte.b	12
    123  6b55		       0c		      .byte.b	12
    124  6b56		       0c		      .byte.b	12
    125  6b57		       0c		      .byte.b	12
    126  6b58		       0c		      .byte.b	12
    127  6b59		       0c		      .byte.b	12
    128  6b5a		       0c		      .byte.b	12
    129  6b5b		       0c		      .byte.b	12
    130  6b5c		       0c		      .byte.b	12
    131  6b5d		       0c		      .byte.b	12
    132  6b5e		       0c		      .byte.b	12
    133  6b5f		       0c		      .byte.b	12
    134  6b60		       0c		      .byte.b	12
    135  6b61		       0c		      .byte.b	12
    136  6b62		       0c		      .byte.b	12
    137  6b63		       0c		      .byte.b	12
    138  6b64		       0c		      .byte.b	12
    139  6b65		       1c		      .byte.b	28
    140  6b66		       1c		      .byte.b	28
    141  6b67		       1c		      .byte.b	28
    142  6b68		       1c		      .byte.b	28
    143  6b69		       1c		      .byte.b	28
    144  6b6a		       0c		      .byte.b	12
    145  6b6b		       0c		      .byte.b	12
      0  6b6c					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_1", 27
     10  6b6c					      LIST	ON
    147  6b6c				   CODE_DIGIT1_1
    148  6b6c		       30		      .byte.b	48
    149  6b6d		       30		      .byte.b	48
    150  6b6e		       30		      .byte.b	48
    151  6b6f		       30		      .byte.b	48
    152  6b70		       30		      .byte.b	48
    153  6b71		       30		      .byte.b	48
    154  6b72		       30		      .byte.b	48
    155  6b73		       30		      .byte.b	48
    156  6b74		       30		      .byte.b	48
    157  6b75		       30		      .byte.b	48
    158  6b76		       30		      .byte.b	48
    159  6b77		       30		      .byte.b	48
    160  6b78		       30		      .byte.b	48
    161  6b79		       30		      .byte.b	48
    162  6b7a		       30		      .byte.b	48
    163  6b7b		       30		      .byte.b	48
    164  6b7c		       30		      .byte.b	48
    165  6b7d		       30		      .byte.b	48
    166  6b7e		       30		      .byte.b	48
    167  6b7f		       30		      .byte.b	48
    168  6b80		       38		      .byte.b	56
    169  6b81		       38		      .byte.b	56
    170  6b82		       38		      .byte.b	56
    171  6b83		       38		      .byte.b	56
    172  6b84		       38		      .byte.b	56
    173  6b85		       30		      .byte.b	48
    174  6b86		       30		      .byte.b	48
      0  6b87					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_1", 27
     10  6b87					      LIST	ON
    176  6b87				   CODE_DIGIT2_1
    177  6b87		       0c		      .byte.b	12
    178  6b88		       0c		      .byte.b	12
    179  6b89		       0c		      .byte.b	12
    180  6b8a		       0c		      .byte.b	12
    181  6b8b		       0c		      .byte.b	12
    182  6b8c		       0c		      .byte.b	12
    183  6b8d		       0c		      .byte.b	12
    184  6b8e		       0c		      .byte.b	12
    185  6b8f		       0c		      .byte.b	12
    186  6b90		       0c		      .byte.b	12
    187  6b91		       0c		      .byte.b	12
    188  6b92		       0c		      .byte.b	12
    189  6b93		       0c		      .byte.b	12
    190  6b94		       0c		      .byte.b	12
    191  6b95		       0c		      .byte.b	12
    192  6b96		       0c		      .byte.b	12
    193  6b97		       0c		      .byte.b	12
    194  6b98		       0c		      .byte.b	12
    195  6b99		       0c		      .byte.b	12
    196  6b9a		       0c		      .byte.b	12
    197  6b9b		       8c		      .byte.b	140
    198  6b9c		       8c		      .byte.b	140
    199  6b9d		       8c		      .byte.b	140
    200  6b9e		       8c		      .byte.b	140
    201  6b9f		       8c		      .byte.b	140
    202  6ba0		       0c		      .byte.b	12
    203  6ba1		       0c		      .byte.b	12
      0  6ba2					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_1", 27
     10  6ba2					      LIST	ON
    205  6ba2				   CODE_DIGIT3_1
    206  6ba2		       30		      .byte.b	48
    207  6ba3		       30		      .byte.b	48
    208  6ba4		       30		      .byte.b	48
    209  6ba5		       30		      .byte.b	48
    210  6ba6		       30		      .byte.b	48
    211  6ba7		       30		      .byte.b	48
    212  6ba8		       30		      .byte.b	48
    213  6ba9		       30		      .byte.b	48
    214  6baa		       30		      .byte.b	48
    215  6bab		       30		      .byte.b	48
    216  6bac		       30		      .byte.b	48
    217  6bad		       30		      .byte.b	48
    218  6bae		       30		      .byte.b	48
    219  6baf		       30		      .byte.b	48
    220  6bb0		       30		      .byte.b	48
    221  6bb1		       30		      .byte.b	48
    222  6bb2		       30		      .byte.b	48
    223  6bb3		       30		      .byte.b	48
    224  6bb4		       30		      .byte.b	48
    225  6bb5		       30		      .byte.b	48
    226  6bb6		       31		      .byte.b	49
    227  6bb7		       31		      .byte.b	49
    228  6bb8		       31		      .byte.b	49
    229  6bb9		       31		      .byte.b	49
    230  6bba		       31		      .byte.b	49
    231  6bbb		       30		      .byte.b	48
    232  6bbc		       30		      .byte.b	48
      0  6bbd					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_2", 27
     10  6bbd					      LIST	ON
    234  6bbd				   CODE_DIGIT0_2
    235  6bbd		       7f		      .byte.b	127
    236  6bbe		       7f		      .byte.b	127
    237  6bbf		       7f		      .byte.b	127
    238  6bc0		       7f		      .byte.b	127
    239  6bc1		       63		      .byte.b	99
    240  6bc2		       60		      .byte.b	96
    241  6bc3		       60		      .byte.b	96
    242  6bc4		       60		      .byte.b	96
    243  6bc5		       70		      .byte.b	112
    244  6bc6		       70		      .byte.b	112
    245  6bc7		       38		      .byte.b	56
    246  6bc8		       3c		      .byte.b	60
    247  6bc9		       1e		      .byte.b	30
    248  6bca		       0e		      .byte.b	14
    249  6bcb		       07		      .byte.b	7
    250  6bcc		       07		      .byte.b	7
    251  6bcd		       03		      .byte.b	3
    252  6bce		       03		      .byte.b	3
    253  6bcf		       03		      .byte.b	3
    254  6bd0		       63		      .byte.b	99
    255  6bd1		       63		      .byte.b	99
    256  6bd2		       63		      .byte.b	99
    257  6bd3		       77		      .byte.b	119
    258  6bd4		       7f		      .byte.b	127
    259  6bd5		       3e		      .byte.b	62
    260  6bd6		       3e		      .byte.b	62
    261  6bd7		       1c		      .byte.b	28
      0  6bd8					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_2", 27
     10  6bd8					      LIST	ON
    263  6bd8				   CODE_DIGIT1_2
    264  6bd8		       fe		      .byte.b	254
    265  6bd9		       fe		      .byte.b	254
    266  6bda		       fe		      .byte.b	254
    267  6bdb		       fe		      .byte.b	254
    268  6bdc		       c6		      .byte.b	198
    269  6bdd		       06		      .byte.b	6
    270  6bde		       06		      .byte.b	6
    271  6bdf		       06		      .byte.b	6
    272  6be0		       0e		      .byte.b	14
    273  6be1		       0e		      .byte.b	14
    274  6be2		       1c		      .byte.b	28
    275  6be3		       3c		      .byte.b	60
    276  6be4		       78		      .byte.b	120
    277  6be5		       70		      .byte.b	112
    278  6be6		       e0		      .byte.b	224
    279  6be7		       e0		      .byte.b	224
    280  6be8		       c0		      .byte.b	192
    281  6be9		       c0		      .byte.b	192
    282  6bea		       c0		      .byte.b	192
    283  6beb		       c6		      .byte.b	198
    284  6bec		       c6		      .byte.b	198
    285  6bed		       c6		      .byte.b	198
    286  6bee		       ee		      .byte.b	238
    287  6bef		       fe		      .byte.b	254
    288  6bf0		       7c		      .byte.b	124
    289  6bf1		       7c		      .byte.b	124
    290  6bf2		       38		      .byte.b	56
      0  6bf3					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_2", 27
 PAGE BREAK INSERTED FOR  CODE_DIGIT2_2
 REQUESTED SIZE =  $1b
 WASTED SPACE =  $d
 PAGEBREAK LOCATION =  $f400
     10  6c00					      LIST	ON
    292  6c00				   CODE_DIGIT2_2
    293  6c00		       ef		      .byte.b	239
    294  6c01		       ef		      .byte.b	239
    295  6c02		       ef		      .byte.b	239
    296  6c03		       ef		      .byte.b	239
    297  6c04		       63		      .byte.b	99
    298  6c05		       60		      .byte.b	96
    299  6c06		       60		      .byte.b	96
    300  6c07		       60		      .byte.b	96
    301  6c08		       e0		      .byte.b	224
    302  6c09		       e0		      .byte.b	224
    303  6c0a		       c8		      .byte.b	200
    304  6c0b		       cc		      .byte.b	204
    305  6c0c		       8e		      .byte.b	142
    306  6c0d		       0e		      .byte.b	14
    307  6c0e		       07		      .byte.b	7
    308  6c0f		       07		      .byte.b	7
    309  6c10		       03		      .byte.b	3
    310  6c11		       03		      .byte.b	3
    311  6c12		       03		      .byte.b	3
    312  6c13		       63		      .byte.b	99
    313  6c14		       63		      .byte.b	99
    314  6c15		       63		      .byte.b	99
    315  6c16		       e7		      .byte.b	231
    316  6c17		       ef		      .byte.b	239
    317  6c18		       ce		      .byte.b	206
    318  6c19		       ce		      .byte.b	206
    319  6c1a		       8c		      .byte.b	140
      0  6c1b					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_2", 27
     10  6c1b					      LIST	ON
    321  6c1b				   CODE_DIGIT3_2
    322  6c1b		       f7		      .byte.b	247
    323  6c1c		       f7		      .byte.b	247
    324  6c1d		       f7		      .byte.b	247
    325  6c1e		       f7		      .byte.b	247
    326  6c1f		       c6		      .byte.b	198
    327  6c20		       06		      .byte.b	6
    328  6c21		       06		      .byte.b	6
    329  6c22		       06		      .byte.b	6
    330  6c23		       07		      .byte.b	7
    331  6c24		       07		      .byte.b	7
    332  6c25		       13		      .byte.b	19
    333  6c26		       33		      .byte.b	51
    334  6c27		       71		      .byte.b	113
    335  6c28		       70		      .byte.b	112
    336  6c29		       e0		      .byte.b	224
    337  6c2a		       e0		      .byte.b	224
    338  6c2b		       c0		      .byte.b	192
    339  6c2c		       c0		      .byte.b	192
    340  6c2d		       c0		      .byte.b	192
    341  6c2e		       c6		      .byte.b	198
    342  6c2f		       c6		      .byte.b	198
    343  6c30		       c6		      .byte.b	198
    344  6c31		       e7		      .byte.b	231
    345  6c32		       f7		      .byte.b	247
    346  6c33		       73		      .byte.b	115
    347  6c34		       73		      .byte.b	115
    348  6c35		       31		      .byte.b	49
      0  6c36					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_3", 27
     10  6c36					      LIST	ON
    350  6c36				   CODE_DIGIT0_3
    351  6c36		       1c		      .byte.b	28
    352  6c37		       3e		      .byte.b	62
    353  6c38		       3e		      .byte.b	62
    354  6c39		       7f		      .byte.b	127
    355  6c3a		       77		      .byte.b	119
    356  6c3b		       63		      .byte.b	99
    357  6c3c		       63		      .byte.b	99
    358  6c3d		       63		      .byte.b	99
    359  6c3e		       03		      .byte.b	3
    360  6c3f		       03		      .byte.b	3
    361  6c40		       03		      .byte.b	3
    362  6c41		       07		      .byte.b	7
    363  6c42		       1f		      .byte.b	31
    364  6c43		       1e		      .byte.b	30
    365  6c44		       1e		      .byte.b	30
    366  6c45		       1f		      .byte.b	31
    367  6c46		       07		      .byte.b	7
    368  6c47		       03		      .byte.b	3
    369  6c48		       03		      .byte.b	3
    370  6c49		       63		      .byte.b	99
    371  6c4a		       63		      .byte.b	99
    372  6c4b		       63		      .byte.b	99
    373  6c4c		       77		      .byte.b	119
    374  6c4d		       7f		      .byte.b	127
    375  6c4e		       3e		      .byte.b	62
    376  6c4f		       3e		      .byte.b	62
    377  6c50		       1c		      .byte.b	28
      0  6c51					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_3", 27
     10  6c51					      LIST	ON
    379  6c51				   CODE_DIGIT1_3
    380  6c51		       38		      .byte.b	56
    381  6c52		       7c		      .byte.b	124
    382  6c53		       7c		      .byte.b	124
    383  6c54		       fe		      .byte.b	254
    384  6c55		       ee		      .byte.b	238
    385  6c56		       c6		      .byte.b	198
    386  6c57		       c6		      .byte.b	198
    387  6c58		       c6		      .byte.b	198
    388  6c59		       c0		      .byte.b	192
    389  6c5a		       c0		      .byte.b	192
    390  6c5b		       c0		      .byte.b	192
    391  6c5c		       e0		      .byte.b	224
    392  6c5d		       f8		      .byte.b	248
    393  6c5e		       78		      .byte.b	120
    394  6c5f		       78		      .byte.b	120
    395  6c60		       f8		      .byte.b	248
    396  6c61		       e0		      .byte.b	224
    397  6c62		       c0		      .byte.b	192
    398  6c63		       c0		      .byte.b	192
    399  6c64		       c6		      .byte.b	198
    400  6c65		       c6		      .byte.b	198
    401  6c66		       c6		      .byte.b	198
    402  6c67		       ee		      .byte.b	238
    403  6c68		       fe		      .byte.b	254
    404  6c69		       7c		      .byte.b	124
    405  6c6a		       7c		      .byte.b	124
    406  6c6b		       38		      .byte.b	56
      0  6c6c					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_3", 27
     10  6c6c					      LIST	ON
    408  6c6c				   CODE_DIGIT2_3
    409  6c6c		       8c		      .byte.b	140
    410  6c6d		       ce		      .byte.b	206
    411  6c6e		       ce		      .byte.b	206
    412  6c6f		       ef		      .byte.b	239
    413  6c70		       e7		      .byte.b	231
    414  6c71		       63		      .byte.b	99
    415  6c72		       63		      .byte.b	99
    416  6c73		       63		      .byte.b	99
    417  6c74		       03		      .byte.b	3
    418  6c75		       03		      .byte.b	3
    419  6c76		       03		      .byte.b	3
    420  6c77		       07		      .byte.b	7
    421  6c78		       8f		      .byte.b	143
    422  6c79		       8e		      .byte.b	142
    423  6c7a		       8e		      .byte.b	142
    424  6c7b		       8f		      .byte.b	143
    425  6c7c		       07		      .byte.b	7
    426  6c7d		       03		      .byte.b	3
    427  6c7e		       03		      .byte.b	3
    428  6c7f		       63		      .byte.b	99
    429  6c80		       63		      .byte.b	99
    430  6c81		       63		      .byte.b	99
    431  6c82		       e7		      .byte.b	231
    432  6c83		       ef		      .byte.b	239
    433  6c84		       ce		      .byte.b	206
    434  6c85		       ce		      .byte.b	206
    435  6c86		       8c		      .byte.b	140
      0  6c87					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_3", 27
     10  6c87					      LIST	ON
    437  6c87				   CODE_DIGIT3_3
    438  6c87		       31		      .byte.b	49
    439  6c88		       73		      .byte.b	115
    440  6c89		       73		      .byte.b	115
    441  6c8a		       f7		      .byte.b	247
    442  6c8b		       e7		      .byte.b	231
    443  6c8c		       c6		      .byte.b	198
    444  6c8d		       c6		      .byte.b	198
    445  6c8e		       c6		      .byte.b	198
    446  6c8f		       c0		      .byte.b	192
    447  6c90		       c0		      .byte.b	192
    448  6c91		       c0		      .byte.b	192
    449  6c92		       e0		      .byte.b	224
    450  6c93		       f1		      .byte.b	241
    451  6c94		       71		      .byte.b	113
    452  6c95		       71		      .byte.b	113
    453  6c96		       f1		      .byte.b	241
    454  6c97		       e0		      .byte.b	224
    455  6c98		       c0		      .byte.b	192
    456  6c99		       c0		      .byte.b	192
    457  6c9a		       c6		      .byte.b	198
    458  6c9b		       c6		      .byte.b	198
    459  6c9c		       c6		      .byte.b	198
    460  6c9d		       e7		      .byte.b	231
    461  6c9e		       f7		      .byte.b	247
    462  6c9f		       73		      .byte.b	115
    463  6ca0		       73		      .byte.b	115
    464  6ca1		       31		      .byte.b	49
      0  6ca2					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_4", 27
     10  6ca2					      LIST	ON
    466  6ca2				   CODE_DIGIT0_4
    467  6ca2		       06		      .byte.b	6
    468  6ca3		       06		      .byte.b	6
    469  6ca4		       06		      .byte.b	6
    470  6ca5		       06		      .byte.b	6
    471  6ca6		       06		      .byte.b	6
    472  6ca7		       7f		      .byte.b	127
    473  6ca8		       7f		      .byte.b	127
    474  6ca9		       7f		      .byte.b	127
    475  6caa		       7f		      .byte.b	127
    476  6cab		       66		      .byte.b	102
    477  6cac		       66		      .byte.b	102
    478  6cad		       66		      .byte.b	102
    479  6cae		       66		      .byte.b	102
    480  6caf		       36		      .byte.b	54
    481  6cb0		       36		      .byte.b	54
    482  6cb1		       36		      .byte.b	54
    483  6cb2		       36		      .byte.b	54
    484  6cb3		       1e		      .byte.b	30
    485  6cb4		       1e		      .byte.b	30
    486  6cb5		       1e		      .byte.b	30
    487  6cb6		       1e		      .byte.b	30
    488  6cb7		       0e		      .byte.b	14
    489  6cb8		       0e		      .byte.b	14
    490  6cb9		       0e		      .byte.b	14
    491  6cba		       0e		      .byte.b	14
    492  6cbb		       06		      .byte.b	6
    493  6cbc		       06		      .byte.b	6
      0  6cbd					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_4", 27
     10  6cbd					      LIST	ON
    495  6cbd				   CODE_DIGIT1_4
    496  6cbd		       60		      .byte.b	96
    497  6cbe		       60		      .byte.b	96
    498  6cbf		       60		      .byte.b	96
    499  6cc0		       60		      .byte.b	96
    500  6cc1		       60		      .byte.b	96
    501  6cc2		       fe		      .byte.b	254
    502  6cc3		       fe		      .byte.b	254
    503  6cc4		       fe		      .byte.b	254
    504  6cc5		       fe		      .byte.b	254
    505  6cc6		       66		      .byte.b	102
    506  6cc7		       66		      .byte.b	102
    507  6cc8		       66		      .byte.b	102
    508  6cc9		       66		      .byte.b	102
    509  6cca		       6c		      .byte.b	108
    510  6ccb		       6c		      .byte.b	108
    511  6ccc		       6c		      .byte.b	108
    512  6ccd		       6c		      .byte.b	108
    513  6cce		       78		      .byte.b	120
    514  6ccf		       78		      .byte.b	120
    515  6cd0		       78		      .byte.b	120
    516  6cd1		       78		      .byte.b	120
    517  6cd2		       70		      .byte.b	112
    518  6cd3		       70		      .byte.b	112
    519  6cd4		       70		      .byte.b	112
    520  6cd5		       70		      .byte.b	112
    521  6cd6		       60		      .byte.b	96
    522  6cd7		       60		      .byte.b	96
      0  6cd8					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_4", 27
     10  6cd8					      LIST	ON
    524  6cd8				   CODE_DIGIT2_4
    525  6cd8		       06		      .byte.b	6
    526  6cd9		       06		      .byte.b	6
    527  6cda		       06		      .byte.b	6
    528  6cdb		       06		      .byte.b	6
    529  6cdc		       06		      .byte.b	6
    530  6cdd		       ef		      .byte.b	239
    531  6cde		       ef		      .byte.b	239
    532  6cdf		       ef		      .byte.b	239
    533  6ce0		       ef		      .byte.b	239
    534  6ce1		       66		      .byte.b	102
    535  6ce2		       66		      .byte.b	102
    536  6ce3		       66		      .byte.b	102
    537  6ce4		       66		      .byte.b	102
    538  6ce5		       c6		      .byte.b	198
    539  6ce6		       c6		      .byte.b	198
    540  6ce7		       c6		      .byte.b	198
    541  6ce8		       c6		      .byte.b	198
    542  6ce9		       8e		      .byte.b	142
    543  6cea		       8e		      .byte.b	142
    544  6ceb		       8e		      .byte.b	142
    545  6cec		       8e		      .byte.b	142
    546  6ced		       0e		      .byte.b	14
    547  6cee		       0e		      .byte.b	14
    548  6cef		       0e		      .byte.b	14
    549  6cf0		       0e		      .byte.b	14
    550  6cf1		       06		      .byte.b	6
    551  6cf2		       06		      .byte.b	6
      0  6cf3					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_4", 27
 PAGE BREAK INSERTED FOR  CODE_DIGIT3_4
 REQUESTED SIZE =  $1b
 WASTED SPACE =  $d
 PAGEBREAK LOCATION =  $f500
     10  6d00					      LIST	ON
    553  6d00				   CODE_DIGIT3_4
    554  6d00		       60		      .byte.b	96
    555  6d01		       60		      .byte.b	96
    556  6d02		       60		      .byte.b	96
    557  6d03		       60		      .byte.b	96
    558  6d04		       60		      .byte.b	96
    559  6d05		       f7		      .byte.b	247
    560  6d06		       f7		      .byte.b	247
    561  6d07		       f7		      .byte.b	247
    562  6d08		       f7		      .byte.b	247
    563  6d09		       66		      .byte.b	102
    564  6d0a		       66		      .byte.b	102
    565  6d0b		       66		      .byte.b	102
    566  6d0c		       66		      .byte.b	102
    567  6d0d		       63		      .byte.b	99
    568  6d0e		       63		      .byte.b	99
    569  6d0f		       63		      .byte.b	99
    570  6d10		       63		      .byte.b	99
    571  6d11		       71		      .byte.b	113
    572  6d12		       71		      .byte.b	113
    573  6d13		       71		      .byte.b	113
    574  6d14		       71		      .byte.b	113
    575  6d15		       70		      .byte.b	112
    576  6d16		       70		      .byte.b	112
    577  6d17		       70		      .byte.b	112
    578  6d18		       70		      .byte.b	112
    579  6d19		       60		      .byte.b	96
    580  6d1a		       60		      .byte.b	96
      0  6d1b					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_5", 27
     10  6d1b					      LIST	ON
    582  6d1b				   CODE_DIGIT0_5
    583  6d1b		       1c		      .byte.b	28
    584  6d1c		       3e		      .byte.b	62
    585  6d1d		       3e		      .byte.b	62
    586  6d1e		       7f		      .byte.b	127
    587  6d1f		       77		      .byte.b	119
    588  6d20		       63		      .byte.b	99
    589  6d21		       63		      .byte.b	99
    590  6d22		       63		      .byte.b	99
    591  6d23		       03		      .byte.b	3
    592  6d24		       03		      .byte.b	3
    593  6d25		       03		      .byte.b	3
    594  6d26		       03		      .byte.b	3
    595  6d27		       03		      .byte.b	3
    596  6d28		       03		      .byte.b	3
    597  6d29		       67		      .byte.b	103
    598  6d2a		       7f		      .byte.b	127
    599  6d2b		       7e		      .byte.b	126
    600  6d2c		       7e		      .byte.b	126
    601  6d2d		       6c		      .byte.b	108
    602  6d2e		       60		      .byte.b	96
    603  6d2f		       60		      .byte.b	96
    604  6d30		       60		      .byte.b	96
    605  6d31		       63		      .byte.b	99
    606  6d32		       7f		      .byte.b	127
    607  6d33		       7f		      .byte.b	127
    608  6d34		       7f		      .byte.b	127
    609  6d35		       7f		      .byte.b	127
      0  6d36					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_5", 27
     10  6d36					      LIST	ON
    611  6d36				   CODE_DIGIT1_5
    612  6d36		       38		      .byte.b	56
    613  6d37		       7c		      .byte.b	124
    614  6d38		       7c		      .byte.b	124
    615  6d39		       fe		      .byte.b	254
    616  6d3a		       ee		      .byte.b	238
    617  6d3b		       c6		      .byte.b	198
    618  6d3c		       c6		      .byte.b	198
    619  6d3d		       c6		      .byte.b	198
    620  6d3e		       c0		      .byte.b	192
    621  6d3f		       c0		      .byte.b	192
    622  6d40		       c0		      .byte.b	192
    623  6d41		       c0		      .byte.b	192
    624  6d42		       c0		      .byte.b	192
    625  6d43		       c0		      .byte.b	192
    626  6d44		       e6		      .byte.b	230
    627  6d45		       fe		      .byte.b	254
    628  6d46		       7e		      .byte.b	126
    629  6d47		       7e		      .byte.b	126
    630  6d48		       36		      .byte.b	54
    631  6d49		       06		      .byte.b	6
    632  6d4a		       06		      .byte.b	6
    633  6d4b		       06		      .byte.b	6
    634  6d4c		       c6		      .byte.b	198
    635  6d4d		       fe		      .byte.b	254
    636  6d4e		       fe		      .byte.b	254
    637  6d4f		       fe		      .byte.b	254
    638  6d50		       fe		      .byte.b	254
      0  6d51					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_5", 27
     10  6d51					      LIST	ON
    640  6d51				   CODE_DIGIT2_5
    641  6d51		       8c		      .byte.b	140
    642  6d52		       ce		      .byte.b	206
    643  6d53		       ce		      .byte.b	206
    644  6d54		       ef		      .byte.b	239
    645  6d55		       e7		      .byte.b	231
    646  6d56		       63		      .byte.b	99
    647  6d57		       63		      .byte.b	99
    648  6d58		       63		      .byte.b	99
    649  6d59		       03		      .byte.b	3
    650  6d5a		       03		      .byte.b	3
    651  6d5b		       03		      .byte.b	3
    652  6d5c		       03		      .byte.b	3
    653  6d5d		       03		      .byte.b	3
    654  6d5e		       03		      .byte.b	3
    655  6d5f		       67		      .byte.b	103
    656  6d60		       ef		      .byte.b	239
    657  6d61		       ee		      .byte.b	238
    658  6d62		       ee		      .byte.b	238
    659  6d63		       6c		      .byte.b	108
    660  6d64		       60		      .byte.b	96
    661  6d65		       60		      .byte.b	96
    662  6d66		       60		      .byte.b	96
    663  6d67		       63		      .byte.b	99
    664  6d68		       ef		      .byte.b	239
    665  6d69		       ef		      .byte.b	239
    666  6d6a		       ef		      .byte.b	239
    667  6d6b		       ef		      .byte.b	239
      0  6d6c					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_5", 27
     10  6d6c					      LIST	ON
    669  6d6c				   CODE_DIGIT3_5
    670  6d6c		       31		      .byte.b	49
    671  6d6d		       73		      .byte.b	115
    672  6d6e		       73		      .byte.b	115
    673  6d6f		       f7		      .byte.b	247
    674  6d70		       e7		      .byte.b	231
    675  6d71		       c6		      .byte.b	198
    676  6d72		       c6		      .byte.b	198
    677  6d73		       c6		      .byte.b	198
    678  6d74		       c0		      .byte.b	192
    679  6d75		       c0		      .byte.b	192
    680  6d76		       c0		      .byte.b	192
    681  6d77		       c0		      .byte.b	192
    682  6d78		       c0		      .byte.b	192
    683  6d79		       c0		      .byte.b	192
    684  6d7a		       e6		      .byte.b	230
    685  6d7b		       f7		      .byte.b	247
    686  6d7c		       77		      .byte.b	119
    687  6d7d		       77		      .byte.b	119
    688  6d7e		       36		      .byte.b	54
    689  6d7f		       06		      .byte.b	6
    690  6d80		       06		      .byte.b	6
    691  6d81		       06		      .byte.b	6
    692  6d82		       c6		      .byte.b	198
    693  6d83		       f7		      .byte.b	247
    694  6d84		       f7		      .byte.b	247
    695  6d85		       f7		      .byte.b	247
    696  6d86		       f7		      .byte.b	247
      0  6d87					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_6", 27
     10  6d87					      LIST	ON
    698  6d87				   CODE_DIGIT0_6
    699  6d87		       1c		      .byte.b	28
    700  6d88		       3e		      .byte.b	62
    701  6d89		       3e		      .byte.b	62
    702  6d8a		       7f		      .byte.b	127
    703  6d8b		       77		      .byte.b	119
    704  6d8c		       63		      .byte.b	99
    705  6d8d		       63		      .byte.b	99
    706  6d8e		       63		      .byte.b	99
    707  6d8f		       63		      .byte.b	99
    708  6d90		       63		      .byte.b	99
    709  6d91		       63		      .byte.b	99
    710  6d92		       77		      .byte.b	119
    711  6d93		       7f		      .byte.b	127
    712  6d94		       7e		      .byte.b	126
    713  6d95		       7e		      .byte.b	126
    714  6d96		       6c		      .byte.b	108
    715  6d97		       60		      .byte.b	96
    716  6d98		       60		      .byte.b	96
    717  6d99		       70		      .byte.b	112
    718  6d9a		       30		      .byte.b	48
    719  6d9b		       30		      .byte.b	48
    720  6d9c		       38		      .byte.b	56
    721  6d9d		       38		      .byte.b	56
    722  6d9e		       1e		      .byte.b	30
    723  6d9f		       1e		      .byte.b	30
    724  6da0		       0e		      .byte.b	14
    725  6da1		       06		      .byte.b	6
      0  6da2					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_6", 27
     10  6da2					      LIST	ON
    727  6da2				   CODE_DIGIT1_6
    728  6da2		       38		      .byte.b	56
    729  6da3		       7c		      .byte.b	124
    730  6da4		       7c		      .byte.b	124
    731  6da5		       fe		      .byte.b	254
    732  6da6		       ee		      .byte.b	238
    733  6da7		       c6		      .byte.b	198
    734  6da8		       c6		      .byte.b	198
    735  6da9		       c6		      .byte.b	198
    736  6daa		       c6		      .byte.b	198
    737  6dab		       c6		      .byte.b	198
    738  6dac		       c6		      .byte.b	198
    739  6dad		       ee		      .byte.b	238
    740  6dae		       fe		      .byte.b	254
    741  6daf		       7e		      .byte.b	126
    742  6db0		       7e		      .byte.b	126
    743  6db1		       36		      .byte.b	54
    744  6db2		       06		      .byte.b	6
    745  6db3		       06		      .byte.b	6
    746  6db4		       0e		      .byte.b	14
    747  6db5		       0c		      .byte.b	12
    748  6db6		       0c		      .byte.b	12
    749  6db7		       1c		      .byte.b	28
    750  6db8		       1c		      .byte.b	28
    751  6db9		       78		      .byte.b	120
    752  6dba		       78		      .byte.b	120
    753  6dbb		       70		      .byte.b	112
    754  6dbc		       60		      .byte.b	96
      0  6dbd					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_6", 27
     10  6dbd					      LIST	ON
    756  6dbd				   CODE_DIGIT2_6
    757  6dbd		       8c		      .byte.b	140
    758  6dbe		       ce		      .byte.b	206
    759  6dbf		       ce		      .byte.b	206
    760  6dc0		       ef		      .byte.b	239
    761  6dc1		       e7		      .byte.b	231
    762  6dc2		       63		      .byte.b	99
    763  6dc3		       63		      .byte.b	99
    764  6dc4		       63		      .byte.b	99
    765  6dc5		       63		      .byte.b	99
    766  6dc6		       63		      .byte.b	99
    767  6dc7		       63		      .byte.b	99
    768  6dc8		       e7		      .byte.b	231
    769  6dc9		       ef		      .byte.b	239
    770  6dca		       ee		      .byte.b	238
    771  6dcb		       ee		      .byte.b	238
    772  6dcc		       6c		      .byte.b	108
    773  6dcd		       60		      .byte.b	96
    774  6dce		       60		      .byte.b	96
    775  6dcf		       e0		      .byte.b	224
    776  6dd0		       c0		      .byte.b	192
    777  6dd1		       c0		      .byte.b	192
    778  6dd2		       c8		      .byte.b	200
    779  6dd3		       c8		      .byte.b	200
    780  6dd4		       8e		      .byte.b	142
    781  6dd5		       8e		      .byte.b	142
    782  6dd6		       0e		      .byte.b	14
    783  6dd7		       06		      .byte.b	6
      0  6dd8					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_6", 27
     10  6dd8					      LIST	ON
    785  6dd8				   CODE_DIGIT3_6
    786  6dd8		       31		      .byte.b	49
    787  6dd9		       73		      .byte.b	115
    788  6dda		       73		      .byte.b	115
    789  6ddb		       f7		      .byte.b	247
    790  6ddc		       e7		      .byte.b	231
    791  6ddd		       c6		      .byte.b	198
    792  6dde		       c6		      .byte.b	198
    793  6ddf		       c6		      .byte.b	198
    794  6de0		       c6		      .byte.b	198
    795  6de1		       c6		      .byte.b	198
    796  6de2		       c6		      .byte.b	198
    797  6de3		       e7		      .byte.b	231
    798  6de4		       f7		      .byte.b	247
    799  6de5		       77		      .byte.b	119
    800  6de6		       77		      .byte.b	119
    801  6de7		       36		      .byte.b	54
    802  6de8		       06		      .byte.b	6
    803  6de9		       06		      .byte.b	6
    804  6dea		       07		      .byte.b	7
    805  6deb		       03		      .byte.b	3
    806  6dec		       03		      .byte.b	3
    807  6ded		       13		      .byte.b	19
    808  6dee		       13		      .byte.b	19
    809  6def		       71		      .byte.b	113
    810  6df0		       71		      .byte.b	113
    811  6df1		       70		      .byte.b	112
    812  6df2		       60		      .byte.b	96
      0  6df3					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_7", 27
 PAGE BREAK INSERTED FOR  CODE_DIGIT0_7
 REQUESTED SIZE =  $1b
 WASTED SPACE =  $d
 PAGEBREAK LOCATION =  $f600
     10  6e00					      LIST	ON
    814  6e00				   CODE_DIGIT0_7
    815  6e00		       18		      .byte.b	24
    816  6e01		       18		      .byte.b	24
    817  6e02		       18		      .byte.b	24
    818  6e03		       18		      .byte.b	24
    819  6e04		       18		      .byte.b	24
    820  6e05		       18		      .byte.b	24
    821  6e06		       18		      .byte.b	24
    822  6e07		       18		      .byte.b	24
    823  6e08		       18		      .byte.b	24
    824  6e09		       18		      .byte.b	24
    825  6e0a		       18		      .byte.b	24
    826  6e0b		       0c		      .byte.b	12
    827  6e0c		       0c		      .byte.b	12
    828  6e0d		       0c		      .byte.b	12
    829  6e0e		       0c		      .byte.b	12
    830  6e0f		       06		      .byte.b	6
    831  6e10		       06		      .byte.b	6
    832  6e11		       06		      .byte.b	6
    833  6e12		       06		      .byte.b	6
    834  6e13		       03		      .byte.b	3
    835  6e14		       03		      .byte.b	3
    836  6e15		       03		      .byte.b	3
    837  6e16		       63		      .byte.b	99
    838  6e17		       7f		      .byte.b	127
    839  6e18		       7f		      .byte.b	127
    840  6e19		       7f		      .byte.b	127
    841  6e1a		       7f		      .byte.b	127
      0  6e1b					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_7", 27
     10  6e1b					      LIST	ON
    843  6e1b				   CODE_DIGIT1_7
    844  6e1b		       18		      .byte.b	24
    845  6e1c		       18		      .byte.b	24
    846  6e1d		       18		      .byte.b	24
    847  6e1e		       18		      .byte.b	24
    848  6e1f		       18		      .byte.b	24
    849  6e20		       18		      .byte.b	24
    850  6e21		       18		      .byte.b	24
    851  6e22		       18		      .byte.b	24
    852  6e23		       18		      .byte.b	24
    853  6e24		       18		      .byte.b	24
    854  6e25		       18		      .byte.b	24
    855  6e26		       30		      .byte.b	48
    856  6e27		       30		      .byte.b	48
    857  6e28		       30		      .byte.b	48
    858  6e29		       30		      .byte.b	48
    859  6e2a		       60		      .byte.b	96
    860  6e2b		       60		      .byte.b	96
    861  6e2c		       60		      .byte.b	96
    862  6e2d		       60		      .byte.b	96
    863  6e2e		       c0		      .byte.b	192
    864  6e2f		       c0		      .byte.b	192
    865  6e30		       c0		      .byte.b	192
    866  6e31		       c6		      .byte.b	198
    867  6e32		       fe		      .byte.b	254
    868  6e33		       fe		      .byte.b	254
    869  6e34		       fe		      .byte.b	254
    870  6e35		       fe		      .byte.b	254
      0  6e36					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_7", 27
     10  6e36					      LIST	ON
    872  6e36				   CODE_DIGIT2_7
    873  6e36		       88		      .byte.b	136
    874  6e37		       88		      .byte.b	136
    875  6e38		       88		      .byte.b	136
    876  6e39		       88		      .byte.b	136
    877  6e3a		       88		      .byte.b	136
    878  6e3b		       88		      .byte.b	136
    879  6e3c		       88		      .byte.b	136
    880  6e3d		       88		      .byte.b	136
    881  6e3e		       88		      .byte.b	136
    882  6e3f		       88		      .byte.b	136
    883  6e40		       88		      .byte.b	136
    884  6e41		       0c		      .byte.b	12
    885  6e42		       0c		      .byte.b	12
    886  6e43		       0c		      .byte.b	12
    887  6e44		       0c		      .byte.b	12
    888  6e45		       06		      .byte.b	6
    889  6e46		       06		      .byte.b	6
    890  6e47		       06		      .byte.b	6
    891  6e48		       06		      .byte.b	6
    892  6e49		       03		      .byte.b	3
    893  6e4a		       03		      .byte.b	3
    894  6e4b		       03		      .byte.b	3
    895  6e4c		       63		      .byte.b	99
    896  6e4d		       ef		      .byte.b	239
    897  6e4e		       ef		      .byte.b	239
    898  6e4f		       ef		      .byte.b	239
    899  6e50		       ef		      .byte.b	239
      0  6e51					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_7", 27
     10  6e51					      LIST	ON
    901  6e51				   CODE_DIGIT3_7
    902  6e51		       11		      .byte.b	17
    903  6e52		       11		      .byte.b	17
    904  6e53		       11		      .byte.b	17
    905  6e54		       11		      .byte.b	17
    906  6e55		       11		      .byte.b	17
    907  6e56		       11		      .byte.b	17
    908  6e57		       11		      .byte.b	17
    909  6e58		       11		      .byte.b	17
    910  6e59		       11		      .byte.b	17
    911  6e5a		       11		      .byte.b	17
    912  6e5b		       11		      .byte.b	17
    913  6e5c		       30		      .byte.b	48
    914  6e5d		       30		      .byte.b	48
    915  6e5e		       30		      .byte.b	48
    916  6e5f		       30		      .byte.b	48
    917  6e60		       60		      .byte.b	96
    918  6e61		       60		      .byte.b	96
    919  6e62		       60		      .byte.b	96
    920  6e63		       60		      .byte.b	96
    921  6e64		       c0		      .byte.b	192
    922  6e65		       c0		      .byte.b	192
    923  6e66		       c0		      .byte.b	192
    924  6e67		       c6		      .byte.b	198
    925  6e68		       f7		      .byte.b	247
    926  6e69		       f7		      .byte.b	247
    927  6e6a		       f7		      .byte.b	247
    928  6e6b		       f7		      .byte.b	247
      0  6e6c					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_8", 27
     10  6e6c					      LIST	ON
    930  6e6c				   CODE_DIGIT0_8
    931  6e6c		       1c		      .byte.b	28
    932  6e6d		       3e		      .byte.b	62
    933  6e6e		       3e		      .byte.b	62
    934  6e6f		       7f		      .byte.b	127
    935  6e70		       77		      .byte.b	119
    936  6e71		       63		      .byte.b	99
    937  6e72		       63		      .byte.b	99
    938  6e73		       63		      .byte.b	99
    939  6e74		       63		      .byte.b	99
    940  6e75		       63		      .byte.b	99
    941  6e76		       63		      .byte.b	99
    942  6e77		       77		      .byte.b	119
    943  6e78		       3f		      .byte.b	63
    944  6e79		       3e		      .byte.b	62
    945  6e7a		       7e		      .byte.b	126
    946  6e7b		       77		      .byte.b	119
    947  6e7c		       63		      .byte.b	99
    948  6e7d		       63		      .byte.b	99
    949  6e7e		       63		      .byte.b	99
    950  6e7f		       63		      .byte.b	99
    951  6e80		       63		      .byte.b	99
    952  6e81		       63		      .byte.b	99
    953  6e82		       77		      .byte.b	119
    954  6e83		       7f		      .byte.b	127
    955  6e84		       3e		      .byte.b	62
    956  6e85		       3e		      .byte.b	62
    957  6e86		       1c		      .byte.b	28
      0  6e87					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_8", 27
     10  6e87					      LIST	ON
    959  6e87				   CODE_DIGIT1_8
    960  6e87		       38		      .byte.b	56
    961  6e88		       7c		      .byte.b	124
    962  6e89		       7c		      .byte.b	124
    963  6e8a		       fe		      .byte.b	254
    964  6e8b		       ee		      .byte.b	238
    965  6e8c		       c6		      .byte.b	198
    966  6e8d		       c6		      .byte.b	198
    967  6e8e		       c6		      .byte.b	198
    968  6e8f		       c6		      .byte.b	198
    969  6e90		       c6		      .byte.b	198
    970  6e91		       c6		      .byte.b	198
    971  6e92		       ee		      .byte.b	238
    972  6e93		       fc		      .byte.b	252
    973  6e94		       7c		      .byte.b	124
    974  6e95		       7e		      .byte.b	126
    975  6e96		       ee		      .byte.b	238
    976  6e97		       c6		      .byte.b	198
    977  6e98		       c6		      .byte.b	198
    978  6e99		       c6		      .byte.b	198
    979  6e9a		       c6		      .byte.b	198
    980  6e9b		       c6		      .byte.b	198
    981  6e9c		       c6		      .byte.b	198
    982  6e9d		       ee		      .byte.b	238
    983  6e9e		       fe		      .byte.b	254
    984  6e9f		       7c		      .byte.b	124
    985  6ea0		       7c		      .byte.b	124
    986  6ea1		       38		      .byte.b	56
      0  6ea2					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_8", 27
     10  6ea2					      LIST	ON
    988  6ea2				   CODE_DIGIT2_8
    989  6ea2		       8c		      .byte.b	140
    990  6ea3		       ce		      .byte.b	206
    991  6ea4		       ce		      .byte.b	206
    992  6ea5		       ef		      .byte.b	239
    993  6ea6		       e7		      .byte.b	231
    994  6ea7		       63		      .byte.b	99
    995  6ea8		       63		      .byte.b	99
    996  6ea9		       63		      .byte.b	99
    997  6eaa		       63		      .byte.b	99
    998  6eab		       63		      .byte.b	99
    999  6eac		       63		      .byte.b	99
   1000  6ead		       e7		      .byte.b	231
   1001  6eae		       cf		      .byte.b	207
   1002  6eaf		       ce		      .byte.b	206
   1003  6eb0		       ee		      .byte.b	238
   1004  6eb1		       e7		      .byte.b	231
   1005  6eb2		       63		      .byte.b	99
   1006  6eb3		       63		      .byte.b	99
   1007  6eb4		       63		      .byte.b	99
   1008  6eb5		       63		      .byte.b	99
   1009  6eb6		       63		      .byte.b	99
   1010  6eb7		       63		      .byte.b	99
   1011  6eb8		       e7		      .byte.b	231
   1012  6eb9		       ef		      .byte.b	239
   1013  6eba		       ce		      .byte.b	206
   1014  6ebb		       ce		      .byte.b	206
   1015  6ebc		       8c		      .byte.b	140
      0  6ebd					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_8", 27
     10  6ebd					      LIST	ON
   1017  6ebd				   CODE_DIGIT3_8
   1018  6ebd		       31		      .byte.b	49
   1019  6ebe		       73		      .byte.b	115
   1020  6ebf		       73		      .byte.b	115
   1021  6ec0		       f7		      .byte.b	247
   1022  6ec1		       e7		      .byte.b	231
   1023  6ec2		       c6		      .byte.b	198
   1024  6ec3		       c6		      .byte.b	198
   1025  6ec4		       c6		      .byte.b	198
   1026  6ec5		       c6		      .byte.b	198
   1027  6ec6		       c6		      .byte.b	198
   1028  6ec7		       c6		      .byte.b	198
   1029  6ec8		       e7		      .byte.b	231
   1030  6ec9		       f3		      .byte.b	243
   1031  6eca		       73		      .byte.b	115
   1032  6ecb		       77		      .byte.b	119
   1033  6ecc		       e7		      .byte.b	231
   1034  6ecd		       c6		      .byte.b	198
   1035  6ece		       c6		      .byte.b	198
   1036  6ecf		       c6		      .byte.b	198
   1037  6ed0		       c6		      .byte.b	198
   1038  6ed1		       c6		      .byte.b	198
   1039  6ed2		       c6		      .byte.b	198
   1040  6ed3		       e7		      .byte.b	231
   1041  6ed4		       f7		      .byte.b	247
   1042  6ed5		       73		      .byte.b	115
   1043  6ed6		       73		      .byte.b	115
   1044  6ed7		       31		      .byte.b	49
      0  6ed8					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_9", 27
     10  6ed8					      LIST	ON
   1046  6ed8				   CODE_DIGIT0_9
   1047  6ed8		       30		      .byte.b	48
   1048  6ed9		       38		      .byte.b	56
   1049  6eda		       3c		      .byte.b	60
   1050  6edb		       3c		      .byte.b	60
   1051  6edc		       0e		      .byte.b	14
   1052  6edd		       0e		      .byte.b	14
   1053  6ede		       06		      .byte.b	6
   1054  6edf		       07		      .byte.b	7
   1055  6ee0		       07		      .byte.b	7
   1056  6ee1		       03		      .byte.b	3
   1057  6ee2		       03		      .byte.b	3
   1058  6ee3		       1b		      .byte.b	27
   1059  6ee4		       3f		      .byte.b	63
   1060  6ee5		       3f		      .byte.b	63
   1061  6ee6		       7f		      .byte.b	127
   1062  6ee7		       77		      .byte.b	119
   1063  6ee8		       63		      .byte.b	99
   1064  6ee9		       63		      .byte.b	99
   1065  6eea		       63		      .byte.b	99
   1066  6eeb		       63		      .byte.b	99
   1067  6eec		       63		      .byte.b	99
   1068  6eed		       63		      .byte.b	99
   1069  6eee		       77		      .byte.b	119
   1070  6eef		       7f		      .byte.b	127
   1071  6ef0		       3e		      .byte.b	62
   1072  6ef1		       3e		      .byte.b	62
   1073  6ef2		       1c		      .byte.b	28
      0  6ef3					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_9", 27
 PAGE BREAK INSERTED FOR  CODE_DIGIT1_9
 REQUESTED SIZE =  $1b
 WASTED SPACE =  $d
 PAGEBREAK LOCATION =  $f700
     10  6f00					      LIST	ON
   1075  6f00				   CODE_DIGIT1_9
   1076  6f00		       0c		      .byte.b	12
   1077  6f01		       1c		      .byte.b	28
   1078  6f02		       3c		      .byte.b	60
   1079  6f03		       3c		      .byte.b	60
   1080  6f04		       70		      .byte.b	112
   1081  6f05		       70		      .byte.b	112
   1082  6f06		       60		      .byte.b	96
   1083  6f07		       e0		      .byte.b	224
   1084  6f08		       e0		      .byte.b	224
   1085  6f09		       c0		      .byte.b	192
   1086  6f0a		       c0		      .byte.b	192
   1087  6f0b		       d8		      .byte.b	216
   1088  6f0c		       fc		      .byte.b	252
   1089  6f0d		       fc		      .byte.b	252
   1090  6f0e		       fe		      .byte.b	254
   1091  6f0f		       ee		      .byte.b	238
   1092  6f10		       c6		      .byte.b	198
   1093  6f11		       c6		      .byte.b	198
   1094  6f12		       c6		      .byte.b	198
   1095  6f13		       c6		      .byte.b	198
   1096  6f14		       c6		      .byte.b	198
   1097  6f15		       c6		      .byte.b	198
   1098  6f16		       ee		      .byte.b	238
   1099  6f17		       fe		      .byte.b	254
   1100  6f18		       7c		      .byte.b	124
   1101  6f19		       7c		      .byte.b	124
   1102  6f1a		       38		      .byte.b	56
      0  6f1b					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_9", 27
     10  6f1b					      LIST	ON
   1104  6f1b				   CODE_DIGIT2_9
   1105  6f1b		       c0		      .byte.b	192
   1106  6f1c		       c8		      .byte.b	200
   1107  6f1d		       cc		      .byte.b	204
   1108  6f1e		       cc		      .byte.b	204
   1109  6f1f		       0e		      .byte.b	14
   1110  6f20		       0e		      .byte.b	14
   1111  6f21		       06		      .byte.b	6
   1112  6f22		       07		      .byte.b	7
   1113  6f23		       07		      .byte.b	7
   1114  6f24		       03		      .byte.b	3
   1115  6f25		       03		      .byte.b	3
   1116  6f26		       8b		      .byte.b	139
   1117  6f27		       cf		      .byte.b	207
   1118  6f28		       cf		      .byte.b	207
   1119  6f29		       ef		      .byte.b	239
   1120  6f2a		       e7		      .byte.b	231
   1121  6f2b		       63		      .byte.b	99
   1122  6f2c		       63		      .byte.b	99
   1123  6f2d		       63		      .byte.b	99
   1124  6f2e		       63		      .byte.b	99
   1125  6f2f		       63		      .byte.b	99
   1126  6f30		       63		      .byte.b	99
   1127  6f31		       e7		      .byte.b	231
   1128  6f32		       ef		      .byte.b	239
   1129  6f33		       ce		      .byte.b	206
   1130  6f34		       ce		      .byte.b	206
   1131  6f35		       8c		      .byte.b	140
      0  6f36					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_9", 27
     10  6f36					      LIST	ON
   1133  6f36				   CODE_DIGIT3_9
   1134  6f36		       03		      .byte.b	3
   1135  6f37		       13		      .byte.b	19
   1136  6f38		       33		      .byte.b	51
   1137  6f39		       33		      .byte.b	51
   1138  6f3a		       70		      .byte.b	112
   1139  6f3b		       70		      .byte.b	112
   1140  6f3c		       60		      .byte.b	96
   1141  6f3d		       e0		      .byte.b	224
   1142  6f3e		       e0		      .byte.b	224
   1143  6f3f		       c0		      .byte.b	192
   1144  6f40		       c0		      .byte.b	192
   1145  6f41		       d1		      .byte.b	209
   1146  6f42		       f3		      .byte.b	243
   1147  6f43		       f3		      .byte.b	243
   1148  6f44		       f7		      .byte.b	247
   1149  6f45		       e7		      .byte.b	231
   1150  6f46		       c6		      .byte.b	198
   1151  6f47		       c6		      .byte.b	198
   1152  6f48		       c6		      .byte.b	198
   1153  6f49		       c6		      .byte.b	198
   1154  6f4a		       c6		      .byte.b	198
   1155  6f4b		       c6		      .byte.b	198
   1156  6f4c		       e7		      .byte.b	231
   1157  6f4d		       f7		      .byte.b	247
   1158  6f4e		       73		      .byte.b	115
   1159  6f4f		       73		      .byte.b	115
   1160  6f50		       31		      .byte.b	49
      0  6f51					      OPTIONAL_PAGEBREAK	"CODE_DIGIT0_Q", 27
     10  6f51					      LIST	ON
   1162  6f51				   CODE_DIGIT0_Q
   1163  6f51		       18		      .byte.b	24
   1164  6f52		       18		      .byte.b	24
   1165  6f53		       18		      .byte.b	24
   1166  6f54		       18		      .byte.b	24
   1167  6f55		       00		      .byte.b	0
   1168  6f56		       00		      .byte.b	0
   1169  6f57		       18		      .byte.b	24
   1170  6f58		       18		      .byte.b	24
   1171  6f59		       18		      .byte.b	24
   1172  6f5a		       18		      .byte.b	24
   1173  6f5b		       1c		      .byte.b	28
   1174  6f5c		       0c		      .byte.b	12
   1175  6f5d		       0c		      .byte.b	12
   1176  6f5e		       0e		      .byte.b	14
   1177  6f5f		       06		      .byte.b	6
   1178  6f60		       07		      .byte.b	7
   1179  6f61		       03		      .byte.b	3
   1180  6f62		       03		      .byte.b	3
   1181  6f63		       03		      .byte.b	3
   1182  6f64		       03		      .byte.b	3
   1183  6f65		       63		      .byte.b	99
   1184  6f66		       63		      .byte.b	99
   1185  6f67		       77		      .byte.b	119
   1186  6f68		       3e		      .byte.b	62
   1187  6f69		       3e		      .byte.b	62
   1188  6f6a		       3e		      .byte.b	62
   1189  6f6b		       1c		      .byte.b	28
      0  6f6c					      OPTIONAL_PAGEBREAK	"CODE_DIGIT1_Q", 27
     10  6f6c					      LIST	ON
   1191  6f6c				   CODE_DIGIT1_Q
   1192  6f6c		       18		      .byte.b	24
   1193  6f6d		       18		      .byte.b	24
   1194  6f6e		       18		      .byte.b	24
   1195  6f6f		       18		      .byte.b	24
   1196  6f70		       00		      .byte.b	0
   1197  6f71		       00		      .byte.b	0
   1198  6f72		       18		      .byte.b	24
   1199  6f73		       18		      .byte.b	24
   1200  6f74		       18		      .byte.b	24
   1201  6f75		       18		      .byte.b	24
   1202  6f76		       38		      .byte.b	56
   1203  6f77		       30		      .byte.b	48
   1204  6f78		       30		      .byte.b	48
   1205  6f79		       70		      .byte.b	112
   1206  6f7a		       60		      .byte.b	96
   1207  6f7b		       e0		      .byte.b	224
   1208  6f7c		       c0		      .byte.b	192
   1209  6f7d		       c0		      .byte.b	192
   1210  6f7e		       c0		      .byte.b	192
   1211  6f7f		       c0		      .byte.b	192
   1212  6f80		       c6		      .byte.b	198
   1213  6f81		       c6		      .byte.b	198
   1214  6f82		       ee		      .byte.b	238
   1215  6f83		       7c		      .byte.b	124
   1216  6f84		       7c		      .byte.b	124
   1217  6f85		       7c		      .byte.b	124
   1218  6f86		       38		      .byte.b	56
      0  6f87					      OPTIONAL_PAGEBREAK	"CODE_DIGIT2_Q", 27
     10  6f87					      LIST	ON
   1220  6f87				   CODE_DIGIT2_Q
   1221  6f87		       88		      .byte.b	136
   1222  6f88		       88		      .byte.b	136
   1223  6f89		       88		      .byte.b	136
   1224  6f8a		       88		      .byte.b	136
   1225  6f8b		       00		      .byte.b	0
   1226  6f8c		       00		      .byte.b	0
   1227  6f8d		       88		      .byte.b	136
   1228  6f8e		       88		      .byte.b	136
   1229  6f8f		       88		      .byte.b	136
   1230  6f90		       88		      .byte.b	136
   1231  6f91		       8c		      .byte.b	140
   1232  6f92		       0c		      .byte.b	12
   1233  6f93		       0c		      .byte.b	12
   1234  6f94		       0e		      .byte.b	14
   1235  6f95		       06		      .byte.b	6
   1236  6f96		       07		      .byte.b	7
   1237  6f97		       03		      .byte.b	3
   1238  6f98		       03		      .byte.b	3
   1239  6f99		       03		      .byte.b	3
   1240  6f9a		       03		      .byte.b	3
   1241  6f9b		       63		      .byte.b	99
   1242  6f9c		       63		      .byte.b	99
   1243  6f9d		       e7		      .byte.b	231
   1244  6f9e		       ce		      .byte.b	206
   1245  6f9f		       ce		      .byte.b	206
   1246  6fa0		       ce		      .byte.b	206
   1247  6fa1		       8c		      .byte.b	140
      0  6fa2					      OPTIONAL_PAGEBREAK	"CODE_DIGIT3_Q", 27
     10  6fa2					      LIST	ON
   1249  6fa2				   CODE_DIGIT3_Q
   1250  6fa2		       11		      .byte.b	17
   1251  6fa3		       11		      .byte.b	17
   1252  6fa4		       11		      .byte.b	17
   1253  6fa5		       11		      .byte.b	17
   1254  6fa6		       00		      .byte.b	0
   1255  6fa7		       00		      .byte.b	0
   1256  6fa8		       11		      .byte.b	17
   1257  6fa9		       11		      .byte.b	17
   1258  6faa		       11		      .byte.b	17
   1259  6fab		       11		      .byte.b	17
   1260  6fac		       31		      .byte.b	49
   1261  6fad		       30		      .byte.b	48
   1262  6fae		       30		      .byte.b	48
   1263  6faf		       70		      .byte.b	112
   1264  6fb0		       60		      .byte.b	96
   1265  6fb1		       e0		      .byte.b	224
   1266  6fb2		       c0		      .byte.b	192
   1267  6fb3		       c0		      .byte.b	192
   1268  6fb4		       c0		      .byte.b	192
   1269  6fb5		       c0		      .byte.b	192
   1270  6fb6		       c6		      .byte.b	198
   1271  6fb7		       c6		      .byte.b	198
   1272  6fb8		       e7		      .byte.b	231
   1273  6fb9		       73		      .byte.b	115
   1274  6fba		       73		      .byte.b	115
   1275  6fbb		       73		      .byte.b	115
   1276  6fbc		       31		      .byte.b	49
------- FILE coder.asm
    462  6fbd
    463  6fbd
      0  6fbd					      CHECK_BANK_SIZE	"CODER"
      1  6fbd		       07 bd	   .TEMP      =	* - BANK_START
 CODER (2K) SIZE =  $7bd , FREE= $43
      2  6fbd					      ECHO	"CODER", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  6fbd				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  6fbd				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  6fbd				  -	      ERR
      6  6fbd					      endif
------- FILE ./sokoboo.asm
------- FILE BANK_INITBANK.asm LEVEL 2 PASS 3
      0  6fbd					      include	"BANK_INITBANK.asm"	; MUST be after banks that include levels -- otherwise MAX_LEVELBANK is not calculated properly
      1  6fbd							;    Sokoboo - a Sokoban implementation
      2  6fbd							;    using a generic tile-based display engine for the Atari 2600
      3  6fbd							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  6fbd							;
      5  6fbd							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  6fbd							;
      7  6fbd							;    Code related to the generic tile-based display engine was developed by
      8  6fbd							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  6fbd							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  6fbd							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  6fbd							;
     12  6fbd							;    Code related to music and sound effects uses the TIATracker music player
     13  6fbd							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  6fbd							;    directory for Apache licensing details.
     15  6fbd							;
     16  6fbd							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  6fbd							;    See the copyright notices in the License directory for a list of level
     18  6fbd							;    contributors.
     19  6fbd							;
     20  6fbd							;    Except where otherwise indicated, this software is released under the
     21  6fbd							;    following licensing arrangement...
     22  6fbd							;
     23  6fbd							;    This program is free software: you can redistribute it and/or modify
     24  6fbd							;    it under the terms of the GNU General Public License as published by
     25  6fbd							;    the Free Software Foundation, either version 3 of the License, or
     26  6fbd							;    (at your option) any later version.
     27  6fbd							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  6fbd
     29  6fbd							;    This program is distributed in the hope that it will be useful,
     30  6fbd							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  6fbd							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  6fbd							;    GNU General Public License for more details.
     33  6fbd
      0  6fbd					      NEWBANK	INITBANK
      1  761c ????				      SEG	INITBANK
      2  7000					      ORG	ORIGIN
      3  7000					      RORG	$F000
      4  7000				   BANK_START SET	*
      5  7000				   INITBANK   SET	ORIGIN / 2048
      6  7000				   ORIGIN     SET	ORIGIN + 2048
      7  7000				   _CURRENT_BANK SET	INITBANK
     35  7000
     36  7000		       00		      .byte.b	0	; to avoid extra cycle when accessing via BoardLineStartLO-1,y
     37  7001
      0  7001					      DEFINE_SUBROUTINE	BoardLineStartLO
      1  7001		       00 0e	   BANK_BoardLineStartLO =	_CURRENT_BANK
      2  7001					      SUBROUTINE
      3  7001				   BoardLineStartLO
     39  7001
     40  7001							; Gives the start address (LO) of each board line
     41  7001					      if	1
     42  7001				   .BOARD_LOCATION SET	Board
     43  7001					      REPEAT	SIZE_BOARD_Y
     44  7001				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7001				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7001					      ENDIF
     47  7001		       00		      .byte.b	<.BOARD_LOCATION
     48  7001				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7001					      REPEND
     44  7002				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7002				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7002					      ENDIF
     47  7002		       20		      .byte.b	<.BOARD_LOCATION
     48  7002				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7002					      REPEND
     44  7003				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7003				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7003					      ENDIF
     47  7003		       40		      .byte.b	<.BOARD_LOCATION
     48  7003				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7003					      REPEND
     44  7004				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7004				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7004					      ENDIF
     47  7004		       60		      .byte.b	<.BOARD_LOCATION
     48  7004				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7004					      REPEND
     44  7005				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7005				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7005					      ENDIF
     47  7005		       80		      .byte.b	<.BOARD_LOCATION
     48  7005				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7005					      REPEND
     44  7006				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7006				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7006					      ENDIF
     47  7006		       a0		      .byte.b	<.BOARD_LOCATION
     48  7006				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7006					      REPEND
     44  7007				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7007				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7007					      ENDIF
     47  7007		       c0		      .byte.b	<.BOARD_LOCATION
     48  7007				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7007					      REPEND
     44  7008				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7008				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7008					      ENDIF
     47  7008		       e0		      .byte.b	<.BOARD_LOCATION
     48  7008				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7008					      REPEND
     44  7009				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7009				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7009					      ENDIF
     47  7009		       00		      .byte.b	<.BOARD_LOCATION
     48  7009				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7009					      REPEND
     44  700a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  700a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  700a					      ENDIF
     47  700a		       20		      .byte.b	<.BOARD_LOCATION
     48  700a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  700a					      REPEND
     44  700b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  700b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  700b					      ENDIF
     47  700b		       40		      .byte.b	<.BOARD_LOCATION
     48  700b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  700b					      REPEND
     44  700c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  700c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  700c					      ENDIF
     47  700c		       60		      .byte.b	<.BOARD_LOCATION
     48  700c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  700c					      REPEND
     44  700d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  700d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  700d					      ENDIF
     47  700d		       80		      .byte.b	<.BOARD_LOCATION
     48  700d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  700d					      REPEND
     44  700e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  700e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  700e					      ENDIF
     47  700e		       a0		      .byte.b	<.BOARD_LOCATION
     48  700e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  700e					      REPEND
     44  700f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  700f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  700f					      ENDIF
     47  700f		       c0		      .byte.b	<.BOARD_LOCATION
     48  700f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  700f					      REPEND
     44  7010				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7010				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7010					      ENDIF
     47  7010		       e0		      .byte.b	<.BOARD_LOCATION
     48  7010				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7010					      REPEND
     44  7011				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7011				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7011					      ENDIF
     47  7011		       00		      .byte.b	<.BOARD_LOCATION
     48  7011				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7011					      REPEND
     44  7012				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7012				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7012					      ENDIF
     47  7012		       20		      .byte.b	<.BOARD_LOCATION
     48  7012				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7012					      REPEND
     44  7013				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7013				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7013					      ENDIF
     47  7013		       40		      .byte.b	<.BOARD_LOCATION
     48  7013				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7013					      REPEND
     44  7014				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7014				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7014					      ENDIF
     47  7014		       60		      .byte.b	<.BOARD_LOCATION
     48  7014				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7014					      REPEND
     44  7015				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7015				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7015					      ENDIF
     47  7015		       80		      .byte.b	<.BOARD_LOCATION
     48  7015				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7015					      REPEND
     44  7016				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7016				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7016					      ENDIF
     47  7016		       a0		      .byte.b	<.BOARD_LOCATION
     48  7016				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7016					      REPEND
     44  7017				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7017				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7017					      ENDIF
     47  7017		       c0		      .byte.b	<.BOARD_LOCATION
     48  7017				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7017					      REPEND
     44  7018				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7018				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7018					      ENDIF
     47  7018		       e0		      .byte.b	<.BOARD_LOCATION
     48  7018				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7018					      REPEND
     44  7019				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7019				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7019					      ENDIF
     47  7019		       00		      .byte.b	<.BOARD_LOCATION
     48  7019				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  7019					      REPEND
     44  701a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  701a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  701a					      ENDIF
     47  701a		       20		      .byte.b	<.BOARD_LOCATION
     48  701a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  701a					      REPEND
     44  701b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  701b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  701b					      ENDIF
     47  701b		       40		      .byte.b	<.BOARD_LOCATION
     48  701b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  701b					      REPEND
     44  701c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  701c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  701c					      ENDIF
     47  701c		       60		      .byte.b	<.BOARD_LOCATION
     48  701c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  701c					      REPEND
     44  701d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  701d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  701d					      ENDIF
     47  701d		       80		      .byte.b	<.BOARD_LOCATION
     48  701d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  701d					      REPEND
     44  701e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  701e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  701e					      ENDIF
     47  701e		       a0		      .byte.b	<.BOARD_LOCATION
     48  701e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  701e					      REPEND
     44  701f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  701f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  701f					      ENDIF
     47  701f		       c0		      .byte.b	<.BOARD_LOCATION
     48  701f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     43  701f					      REPEND
     44  7020				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     45  7020				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     46  7020					      ENDIF
     47  7020		       e0		      .byte.b	<.BOARD_LOCATION
     48  7020				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     49  7021					      REPEND
      0  7021					      CHECKPAGEX	BoardLineStartLO, "BoardLineStartLO in BANK_INITBANK.asm"
      9  7021					      LIST	ON
     51  7021
     52  7021		       04 00	   SIZE_BOARD =	.BOARD_LOCATION-Board	; verify calculated value
     53  7021					      endif
     54  7021
     55  7021							;------------------------------------------------------------------------------
     56  7021
     57  7021				   BoardLineStartHiR
     58  7021
     59  7021							; Gives the start address (HI) of each board line
     60  7021							; Note this caters for the memory wrapping when we go from bank to bank, as
     61  7021							; the board overlays multiple banks!
     62  7021
     63  7021				   .BOARD_LOCATION SET	Board
     64  7021					      REPEAT	SIZE_BOARD_Y
     65  7021				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7021				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7021					      ENDIF
     68  7021		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7021				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7021					      REPEND
     65  7022				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7022				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7022					      ENDIF
     68  7022		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7022				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7022					      REPEND
     65  7023				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7023				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7023					      ENDIF
     68  7023		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7023				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7023					      REPEND
     65  7024				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7024				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7024					      ENDIF
     68  7024		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7024				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7024					      REPEND
     65  7025				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7025				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7025					      ENDIF
     68  7025		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7025				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7025					      REPEND
     65  7026				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7026				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7026					      ENDIF
     68  7026		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7026				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7026					      REPEND
     65  7027				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7027				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7027					      ENDIF
     68  7027		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7027				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7027					      REPEND
     65  7028				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7028				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7028					      ENDIF
     68  7028		       10		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7028				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7028					      REPEND
     65  7029				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7029				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7029					      ENDIF
     68  7029		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7029				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7029					      REPEND
     65  702a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  702a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  702a					      ENDIF
     68  702a		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  702a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  702a					      REPEND
     65  702b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  702b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  702b					      ENDIF
     68  702b		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  702b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  702b					      REPEND
     65  702c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  702c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  702c					      ENDIF
     68  702c		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  702c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  702c					      REPEND
     65  702d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  702d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  702d					      ENDIF
     68  702d		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  702d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  702d					      REPEND
     65  702e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  702e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  702e					      ENDIF
     68  702e		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  702e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  702e					      REPEND
     65  702f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  702f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  702f					      ENDIF
     68  702f		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  702f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  702f					      REPEND
     65  7030				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7030				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7030					      ENDIF
     68  7030		       11		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7030				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7030					      REPEND
     65  7031				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7031				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7031					      ENDIF
     68  7031		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7031				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7031					      REPEND
     65  7032				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7032				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7032					      ENDIF
     68  7032		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7032				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7032					      REPEND
     65  7033				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7033				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7033					      ENDIF
     68  7033		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7033				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7033					      REPEND
     65  7034				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7034				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7034					      ENDIF
     68  7034		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7034				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7034					      REPEND
     65  7035				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7035				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7035					      ENDIF
     68  7035		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7035				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7035					      REPEND
     65  7036				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7036				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7036					      ENDIF
     68  7036		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7036				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7036					      REPEND
     65  7037				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7037				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7037					      ENDIF
     68  7037		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7037				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7037					      REPEND
     65  7038				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7038				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7038					      ENDIF
     68  7038		       12		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7038				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7038					      REPEND
     65  7039				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7039				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7039					      ENDIF
     68  7039		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7039				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  7039					      REPEND
     65  703a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  703a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  703a					      ENDIF
     68  703a		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  703a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  703a					      REPEND
     65  703b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  703b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  703b					      ENDIF
     68  703b		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  703b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  703b					      REPEND
     65  703c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  703c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  703c					      ENDIF
     68  703c		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  703c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  703c					      REPEND
     65  703d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  703d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  703d					      ENDIF
     68  703d		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  703d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  703d					      REPEND
     65  703e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  703e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  703e					      ENDIF
     68  703e		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  703e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  703e					      REPEND
     65  703f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  703f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  703f					      ENDIF
     68  703f		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  703f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     64  703f					      REPEND
     65  7040				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     66  7040				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     67  7040					      ENDIF
     68  7040		       13		      .byte.b	>( .BOARD_LOCATION & $13FF )	; cater for mirroring of memory images
     69  7040				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     70  7041					      REPEND
      0  7041					      CHECKPAGEX	BoardLineStartHiR, "BoardLineStartHiR in BANK_INITBANK"
      9  7041					      LIST	ON
     72  7041							;------------------------------------------------------------------------------
     73  7041
     74  7041				   BoardLineStartHiW
     75  7041
     76  7041							; Gives the start address (HI) of each board line
     77  7041							; Note this caters for the memory wrapping when we go from bank to bank, as
     78  7041							; the board overlays multiple banks!
     79  7041
     80  7041				   .BOARD_LOCATION SET	Board
     81  7041					      REPEAT	SIZE_BOARD_Y
     82  7041				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7041				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7041					      ENDIF
     85  7041		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7041				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7041					      REPEND
     82  7042				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7042				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7042					      ENDIF
     85  7042		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7042				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7042					      REPEND
     82  7043				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7043				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7043					      ENDIF
     85  7043		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7043				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7043					      REPEND
     82  7044				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7044				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7044					      ENDIF
     85  7044		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7044				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7044					      REPEND
     82  7045				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7045				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7045					      ENDIF
     85  7045		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7045				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7045					      REPEND
     82  7046				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7046				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7046					      ENDIF
     85  7046		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7046				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7046					      REPEND
     82  7047				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7047				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7047					      ENDIF
     85  7047		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7047				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7047					      REPEND
     82  7048				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7048				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7048					      ENDIF
     85  7048		       14		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7048				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7048					      REPEND
     82  7049				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7049				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7049					      ENDIF
     85  7049		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7049				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7049					      REPEND
     82  704a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  704a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  704a					      ENDIF
     85  704a		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  704a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  704a					      REPEND
     82  704b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  704b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  704b					      ENDIF
     85  704b		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  704b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  704b					      REPEND
     82  704c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  704c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  704c					      ENDIF
     85  704c		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  704c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  704c					      REPEND
     82  704d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  704d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  704d					      ENDIF
     85  704d		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  704d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  704d					      REPEND
     82  704e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  704e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  704e					      ENDIF
     85  704e		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  704e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  704e					      REPEND
     82  704f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  704f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  704f					      ENDIF
     85  704f		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  704f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  704f					      REPEND
     82  7050				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7050				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7050					      ENDIF
     85  7050		       15		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7050				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7050					      REPEND
     82  7051				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7051				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7051					      ENDIF
     85  7051		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7051				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7051					      REPEND
     82  7052				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7052				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7052					      ENDIF
     85  7052		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7052				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7052					      REPEND
     82  7053				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7053				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7053					      ENDIF
     85  7053		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7053				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7053					      REPEND
     82  7054				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7054				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7054					      ENDIF
     85  7054		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7054				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7054					      REPEND
     82  7055				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7055				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7055					      ENDIF
     85  7055		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7055				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7055					      REPEND
     82  7056				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7056				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7056					      ENDIF
     85  7056		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7056				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7056					      REPEND
     82  7057				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7057				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7057					      ENDIF
     85  7057		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7057				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7057					      REPEND
     82  7058				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7058				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7058					      ENDIF
     85  7058		       16		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7058				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7058					      REPEND
     82  7059				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7059				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7059					      ENDIF
     85  7059		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7059				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  7059					      REPEND
     82  705a				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  705a				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  705a					      ENDIF
     85  705a		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  705a				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  705a					      REPEND
     82  705b				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  705b				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  705b					      ENDIF
     85  705b		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  705b				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  705b					      REPEND
     82  705c				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  705c				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  705c					      ENDIF
     85  705c		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  705c				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  705c					      REPEND
     82  705d				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  705d				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  705d					      ENDIF
     85  705d		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  705d				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  705d					      REPEND
     82  705e				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  705e				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  705e					      ENDIF
     85  705e		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  705e				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  705e					      REPEND
     82  705f				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  705f				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  705f					      ENDIF
     85  705f		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  705f				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     81  705f					      REPEND
     82  7060				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     83  7060				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
     84  7060					      ENDIF
     85  7060		       17		      .byte.b	>( ( .BOARD_LOCATION & $13FF ) + RAM_WRITE )	; cater for mirroring of memory images
     86  7060				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X
     87  7061					      REPEND
      0  7061					      CHECKPAGEX	BoardLineStartHiW, "BoardLineStartHiW in BANK_INITBANK"
      9  7061					      LIST	ON
     89  7061
     90  7061							;------------------------------------------------------------------------------
     91  7061							;    IF MULTI_BANK_BOARD = YES
     92  7061							;BoardBank
     93  7061							;    ENDIF
     94  7061							; Gives the RAM bank of the start of the board row for a given row.
     95  7061
     96  7061				   .BOARD_LOCATION SET	Board - RAM_3E
     97  7061					      REPEAT	SIZE_BOARD_Y
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
     97  7061					      REPEND
     98  7061				  -	      IF	>.BOARD_LOCATION != >(.BOARD_LOCATION + SIZE_BOARD_X-1)
     99  7061				  -.BOARD_LOCATION SET	.BOARD_LOCATION - <.BOARD_LOCATION + 256
    100  7061					      ENDIF
    101  7061							;    IF MULTI_BANK_BOARD = YES
    102  7061							;		  .byte BANK_BOARD + (.BOARD_LOCATION / RAM_SIZE)	     ; actual bank #
    103  7061							;    ENDIF
    104  7061				   .BOARD_LOCATION SET	.BOARD_LOCATION + SIZE_BOARD_X	; note, we CANNOT cross a page boundary within a row
    105  7061					      REPEND
    106  7061							;    IF MULTI_BANK_BOARD = YES
    107  7061							;    CHECKPAGEX BoardBank, "BoardBank in BANK_INITBANK.asm"
    108  7061							;    ENDIF
    109  7061
    110  7061
    111  7061							;------------------------------------------------------------------------------
    112  7061
    113  7061				   CopyROMShadowToRAM_F000
    114  7061		       a9 f0		      lda	#>$F000
    115  7063
      0  7063					      DEFINE_SUBROUTINE	CopyROMShadowToRAM	; in INITBANK
      1  7063		       00 0e	   BANK_CopyROMShadowToRAM =	_CURRENT_BANK
      2  7063					      SUBROUTINE
      3  7063				   CopyROMShadowToRAM
    117  7063
    118  7063							; Function copies a RAM prototype ROM bank into the destination RAM bank.  Typically
    119  7063							; the variable definitions are in the ROM shadow because this allows auto-initialisation
    120  7063							; of the variable contents from ROM declarations, but still allows access to them as
    121  7063							; variables when the correct RAM bank is switched in.	Code is also, of course, copied
    122  7063							; into the RAM destination so that code is callable whenever the ROM *or* RAM bank is
    123  7063							; switched in.  Further, if multiple copies are made to multiple RAM banks, then the
    124  7063							; code co-lives in all banks and may run even as bankswitching occurs between those
    125  7063							; banks -- by the very code itself.
    126  7063
    127  7063							; Note: Relies on ROM_Bank having being set via CALL mechanism to call this function
    128  7063		       85 bb		      sta	Board_AddressR+1
    129  7065		       86 dc		      stx	O_ROM_Source_Bank	; source bank
    130  7067		       84 bf		      sty	RAM_Bank	; destination bank
    131  7069
    132  7069		       a0 00		      ldy	#0
    133  706b		       84 ba		      sty	Board_AddressR
    134  706d		       84 bc		      sty	Board_AddressW
    135  706f		       a9 14		      lda	#>($1000+RAM_WRITE)
    136  7071		       85 bd		      sta	Board_AddressW+1
    137  7073
    138  7073							; Iterate 4 pages (1K) for complete bank copy
    139  7073
    140  7073		       a9 04		      lda	#4
    141  7075		       85 db		      sta	O_CopyCount
    142  7077
    143  7077		       84 dd	   CopyPage   sty	O_Index
    144  7079		       a5 dc		      lda	O_ROM_Source_Bank
    145  707b		       20 0f f8 	      jsr	GetROMByte	; get byte from ROM shadow bank
    146  707e							;tax
    147  707e		       a4 dd		      ldy	O_Index
    148  7080		       a6 bf		      ldx	RAM_Bank
    149  7082		       20 1d f8 	      jsr	PutBoardCharacter	;6+21(A)	 write byte to RAM bank
    150  7085
    151  7085		       a4 dd		      ldy	O_Index
    152  7087		       c8		      iny
    153  7088		       d0 ed		      bne	CopyPage
    154  708a
    155  708a		       e6 bb		      inc	Board_AddressR+1
    156  708c		       e6 bd		      inc	Board_AddressW+1
    157  708e
    158  708e		       c6 db		      dec	O_CopyCount
    159  7090		       d0 e5		      bne	CopyPage
    160  7092
    161  7092		       a4 bf		      ldy	RAM_Bank	; TODO: remove!?
    162  7094		       60		      rts
    163  7095
    164  7095
    165  7095							;------------------------------------------------------------------------------
      0  7095					      DEFINE_SUBROUTINE	SetPlatformColours	; in INITBANK
      1  7095		       00 0e	   BANK_SetPlatformColours =	_CURRENT_BANK
      2  7095					      SUBROUTINE
      3  7095				   SetPlatformColours
    167  7095
    168  7095							; Now modify the hardwired colours so that we're correctly switched for NTSC/PAL
    169  7095							; The platform (0=NTSC, 1=PAL) is set from the right difficulty switch
    170  7095							; Note: This relies on DrawTheScreen starting on page boundary so that the (),y
    171  7095							; addressing will not violate the page-crossing restriction of 3E.
    172  7095
    173  7095							;		  sty RAM_Bank			  ; we assume we called CopyROMShadowToRAM before
    174  7095
    175  7095		       a9 00		      lda	#<DrawTheScreen	; = 0
    176  7097		       85 bc		      sta	Board_AddressW
    177  7099		       a9 f4		      lda	#>( DrawTheScreen + RAM_WRITE )
    178  709b		       85 bd		      sta	Board_AddressW+1
    179  709d
    180  709d							; first, set the x index (with last one being a RTS ($60))
    181  709d
    182  709d		       a6 bf		      ldx	RAM_Bank
    183  709f		       e0 07		      cpx	#SCREEN_LINES-1	; might become variable when vertical scrolling
    184  70a1		       d0 07		      bne	.skipPatch
    185  70a3		       a9 60		      lda	#$60	; rts
    186  70a5		       a0 41		      ldy	#<SELFMOD_X
    187  70a7		       20 1d f8 	      jsr	PutBoardCharacter	;6+21(A)	 set index/rts
    188  70aa				   .skipPatch
    189  70aa
    190  70aa
    191  70aa							; randomise the rainbow band starting point. Technically we only need
    192  70aa							; to do this on the FIRST bank
    193  70aa
    194  70aa		       a9 f8		      lda	#<(BandOffset+RAM_WRITE)
    195  70ac		       85 bc		      sta	Board_AddressW
    196  70ae		       a9 f7		      lda	#>(BandOffset+RAM_WRITE)
    197  70b0		       85 bd		      sta	Board_AddressW+1
    198  70b2		       20 52 fd 	      jsr	Random
    199  70b5		       29 1f		      and	#31
    200  70b7		       a0 00		      ldy	#0	; offset from address
    201  70b9		       20 1d f8 	      jsr	PutBoardCharacter
    202  70bc
    203  70bc
    204  70bc
    205  70bc		       a4 bf		      ldy	RAM_Bank
    206  70be		       60		      rts
    207  70bf
    208  70bf				   SelfModColOfsTbl
    209  70bf		       53 86 1d 	      .byte.b	<(SELFMOD_BLUE+1), <(SELFMOD_GREEN+1), <(SELFMOD_RED+1)
    210  70c2
    211  70c2
    212  70c2
    213  70c2				   DrawLineStartLO
    214  70c2
    215  70c2							; Gives the start address of each line in the draw flags buffer
    216  70c2
    217  70c2				   .DRAW_LOCATION SET	DrawFlag
    218  70c2					      REPEAT	SCREEN_LINES
    219  70c2		       50		      .byte.b	<.DRAW_LOCATION
    220  70c2				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c2					      REPEND
    219  70c3		       5a		      .byte.b	<.DRAW_LOCATION
    220  70c3				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c3					      REPEND
    219  70c4		       64		      .byte.b	<.DRAW_LOCATION
    220  70c4				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c4					      REPEND
    219  70c5		       6e		      .byte.b	<.DRAW_LOCATION
    220  70c5				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c5					      REPEND
    219  70c6		       78		      .byte.b	<.DRAW_LOCATION
    220  70c6				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c6					      REPEND
    219  70c7		       82		      .byte.b	<.DRAW_LOCATION
    220  70c7				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c7					      REPEND
    219  70c8		       8c		      .byte.b	<.DRAW_LOCATION
    220  70c8				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    218  70c8					      REPEND
    219  70c9		       96		      .byte.b	<.DRAW_LOCATION
    220  70c9				   .DRAW_LOCATION SET	.DRAW_LOCATION + SCREEN_WIDTH
    221  70ca					      REPEND
    222  70ca
    223  70ca
    224  70ca							;------------------------------------------------------------------------------
    225  70ca
      0  70ca					      DEFINE_SUBROUTINE	GetBoardAddressRW	; in INITBANK
      1  70ca		       00 0e	   BANK_GetBoardAddressRW =	_CURRENT_BANK
      2  70ca					      SUBROUTINE
      3  70ca				   GetBoardAddressRW
    227  70ca							; Must share same bank as BoardLineStart tables
    228  70ca
    229  70ca		       b9 01 f0 	      lda	BoardLineStartLO,y	; 4
    230  70cd		       85 ba		      sta	Board_AddressR	; 3
    231  70cf		       85 bc		      sta	Board_AddressW	; 3
    232  70d1		       b9 21 f0 	      lda	BoardLineStartHiR,y	; 4
    233  70d4		       85 bb		      sta	Board_AddressR+1	; 3	     READ address
    234  70d6		       09 04		      ora	#>RAM_WRITE	; 2
    235  70d8		       85 bd		      sta	Board_AddressW+1	; 3	     WRITE address
    236  70da							;    IF MULTI_BANK_BOARD = YES
    237  70da							;		  ldx BoardBank,y		  ; 4 = 26    switch this on return
    238  70da							;    ELSE
    239  70da		       a2 0d		      ldx	#BANK_BOARD	; 2
    240  70dc							;    ENDIF
    241  70dc		       60		      rts		; 6 = 32[-2]
    242  70dd
    243  70dd							;------------------------------------------------------------------------------
    244  70dd
      0  70dd					      DEFINE_SUBROUTINE	GetBoardAddressR	;=24[-2](A)
      1  70dd		       00 0e	   BANK_GetBoardAddressR =	_CURRENT_BANK
      2  70dd					      SUBROUTINE
      3  70dd				   GetBoardAddressR
    246  70dd
    247  70dd		       b9 01 f0 	      lda	BoardLineStartLO,y	; 4
    248  70e0		       85 ba		      sta	Board_AddressR	; 3
    249  70e2		       b9 21 f0 	      lda	BoardLineStartHiR,y	; 4
    250  70e5		       85 bb		      sta	Board_AddressR+1	; 3	 READ address
    251  70e7							;    IF MULTI_BANK_BOARD = YES
    252  70e7							;		  lda BoardBank,y		  ; 4	  switch this on return
    253  70e7							;    ELSE
    254  70e7		       a9 0d		      lda	#BANK_BOARD	; 2
    255  70e9							;    ENDIF
    256  70e9		       60		      rts		; 6[-2]
    257  70ea
    258  70ea							;------------------------------------------------------------------------------
    259  70ea
      0  70ea					      DEFINE_SUBROUTINE	GetBoardAddressW	;=24[-2](A)
      1  70ea		       00 0e	   BANK_GetBoardAddressW =	_CURRENT_BANK
      2  70ea					      SUBROUTINE
      3  70ea				   GetBoardAddressW
    261  70ea
    262  70ea							; Must share same bank as BoardLineStart tables
    263  70ea
    264  70ea		       b9 01 f0 	      lda	BoardLineStartLO,y	;4
    265  70ed		       85 bc		      sta	Board_AddressW	;3
    266  70ef		       b9 41 f0 	      lda	BoardLineStartHiW,y	;4
    267  70f2		       85 bd		      sta	Board_AddressW+1	;3 WRITE address
    268  70f4							;    IF MULTI_BANK_BOARD = YES
    269  70f4							;		  ldx BoardBank,y		  ;4 switch this on return
    270  70f4							;    ELSE
    271  70f4		       a2 0d		      ldx	#BANK_BOARD	;2
    272  70f6							;    ENDIF
    273  70f6		       60	   QRet       rts		;6
    274  70f7
    275  70f7							;-------------------------------------------------------------------------------
    276  70f7
    277  70f7
    278  70f7							;------------------------------------------------------------------------------
    279  70f7
    280  70f7		       e6 a4	   cannotPush inc	ManPushCounter
    281  70f9		       60		      rts
    282  70fa
    283  70fa
    284  70fa				   AnimationPusher
    285  70fa		       00		      .byte.b	0
    286  70fb		       0c		      .byte.b	ANIMATION_PUSHUP_ID	;1 UP
    287  70fc		       08		      .byte.b	ANIMATION_PUSH_ID	;2 DOWN
    288  70fd		       00		      .byte.b	0
    289  70fe		       08		      .byte.b	ANIMATION_PUSH_ID	;4 LEFT
    290  70ff		       00		      .byte.b	0
    291  7100		       00		      .byte.b	0
    292  7101		       00		      .byte.b	0
    293  7102		       0c		      .byte.b	ANIMATION_PUSHUP_ID	;8 RIGHT
    294  7103		       00		      .byte.b	0
    295  7104		       00		      .byte.b	0
    296  7105		       00		      .byte.b	0
    297  7106		       00		      .byte.b	0
    298  7107		       00		      .byte.b	0
    299  7108		       00		      .byte.b	0
    300  7109		       00		      .byte.b	0
    301  710a
    302  710a		       a9 f0		      lda	#>Animation_PUSHUP
    303  710c
    304  710c				   AnimationPusherAddyLO
    305  710c		       00		      .byte.b	0
    306  710d		       ce		      .byte.b	<Animation_PUSH	;1 UP		   ; or PUSHUP or PUSHUP2
    307  710e		       e6		      .byte.b	<Animation_PUSHDOWN	;2 DOWN
    308  710f		       00		      .byte.b	0
    309  7110		       ce		      .byte.b	<Animation_PUSH	;4 LEFT
    310  7111		       00		      .byte.b	0
    311  7112		       00		      .byte.b	0
    312  7113		       00		      .byte.b	0
    313  7114		       ce		      .byte.b	<Animation_PUSH	;8 RIGHT
    314  7115		       00		      .byte.b	0
    315  7116		       00		      .byte.b	0
    316  7117		       00		      .byte.b	0
    317  7118		       00		      .byte.b	0
    318  7119		       00		      .byte.b	0
    319  711a		       00		      .byte.b	0
    320  711b		       00		      .byte.b	0
    321  711c
    322  711c				   AnimationPusherAddyHI
    323  711c		       00		      .byte.b	0
    324  711d		       f0		      .byte.b	>Animation_PUSHUP	;1 UP
    325  711e		       f0		      .byte.b	>Animation_PUSH	;2 DOWN
    326  711f		       00		      .byte.b	0
    327  7120		       f0		      .byte.b	>Animation_PUSH	;4 LEFT
    328  7121		       00		      .byte.b	0
    329  7122		       00		      .byte.b	0
    330  7123		       00		      .byte.b	0
    331  7124		       f0		      .byte.b	>Animation_PUSH	;8 RIGHT
    332  7125		       00		      .byte.b	0
    333  7126		       00		      .byte.b	0
    334  7127		       00		      .byte.b	0
    335  7128		       00		      .byte.b	0
    336  7129		       00		      .byte.b	0
    337  712a		       00		      .byte.b	0
    338  712b		       00		      .byte.b	0
    339  712c
    340  712c
    341  712c
      0  712c					      DEFINE_SUBROUTINE	PushBox
      1  712c		       00 0e	   BANK_PushBox =	_CURRENT_BANK
      2  712c					      SUBROUTINE
      3  712c				   PushBox
    343  712c
    344  712c							; X = restoration character for square we are moving TO
    345  712c							; so, if X = CHARACTER_TARGET AND we move, THEN we are pushing a box off a target
    346  712c							; A = this bank!
    347  712c
    348  712c		       85 be		      sta	ROM_Bank
    349  712e
    350  712e		       a5 93		      lda	PreviousJoystick
    351  7130		       49 ff		      eor	#$FF
    352  7132		       4a		      lsr
    353  7133		       4a		      lsr
    354  7134		       4a		      lsr
    355  7135		       4a		      lsr
    356  7136		       a8		      tay
    357  7137		       b9 fa f0 	      lda	AnimationPusher,y
    358  713a		       f0 14		      beq	alreadyAnimPush	; well, hopefully
    359  713c		       c5 a6		      cmp	ManAnimationID
    360  713e		       f0 10		      beq	alreadyAnimPush
    361  7140
    362  7140		       85 a6		      sta	ManAnimationID
    363  7142
    364  7142							;		 D7	   right	  P0  D4
    365  7142							;		 D6	   left      P0  D3
    366  7142							;		 D5	   down      P0  D2
    367  7142							;		 D4	   up	     P0  D1
    368  7142
    369  7142
    370  7142		       b9 0c f1 	      lda	AnimationPusherAddyLO,y
    371  7145		       85 9a		      sta	animation
    372  7147		       b9 1c f1 	      lda	AnimationPusherAddyHI,y
    373  714a		       85 9b		      sta	animation+1
    374  714c		       a9 00		      lda	#0
    375  714e		       85 9c		      sta	animation_delay
    376  7150
    377  7150							;LOAD_ANIMATION PUSHUP
    378  7150
    379  7150							;lda #0
    380  7150							;sta idleCount
    381  7150
    382  7150				   alreadyAnimPush
    383  7150
    384  7150
    385  7150		       a5 a4		      lda	ManPushCounter
    386  7152		       c9 06		      cmp	#PUSH_LIMIT
    387  7154		       90 a1		      bcc	cannotPush
    388  7156
    389  7156		       86 dd		      stx	restorationCharacter	; players new location's restore
    390  7158
    391  7158							; Determine if the box is pushable
    392  7158							; we use the joystick to calculate the subsequent square
    393  7158
    394  7158		       a5 93		      lda	PreviousJoystick
    395  715a		       4a		      lsr
    396  715b		       4a		      lsr
    397  715c		       4a		      lsr
    398  715d		       4a		      lsr
    399  715e		       a8		      tay
    400  715f
    401  715f		       b9 31 f3 	      lda	JoyMoveX,y
    402  7162		       f0 05		      beq	x0
    403  7164		       b9 41 f3 	      lda	JoyMoveY,y
    404  7167		       d0 8e		      bne	cannotPush	; avoid diagonal pushes!
    405  7169
    406  7169		       98	   x0	      tya
    407  716a		       48		      pha
    408  716b
    409  716b		       18		      clc
    410  716c		       a5 8a		      lda	POS_Y_NEW
    411  716e		       79 41 f3 	      adc	JoyMoveY,y
    412  7171		       85 88		      sta	POS_Y	; the box's pushed-to square
    413  7173		       a8		      tay
    414  7174		       20 ca f0 	      jsr	GetBoardAddressRW
    415  7177
    416  7177		       68		      pla
    417  7178		       a8		      tay
    418  7179
    419  7179		       18		      clc
    420  717a		       a5 89		      lda	POS_X_NEW
    421  717c		       79 31 f3 	      adc	JoyMoveX,y
    422  717f		       85 87		      sta	POS_X	; the box's pushed-to square
    423  7181		       48		      pha
    424  7182		       a8		      tay
    425  7183
    426  7183							;    IF MULTI_BANK_BOARD = YES
    427  7183							;		  lda RAM_Bank
    428  7183							;    ELSE
    429  7183		       a9 0d		      lda	#BANK_BOARD	; 2
    430  7185							;    ENDIF
    431  7185		       20 14 f8 	      jsr	GetBoardCharacter	;6+20(A)
    432  7188		       68		      pla
    433  7189		       a8		      tay
    434  718a
    435  718a		       a9 02		      lda	#CHARACTER_BOX
    436  718c		       e0 00		      cpx	#CHARACTER_BLANK
    437  718e		       f0 0e		      beq	canPushTarget
    438  7190
    439  7190		       e0 03		      cpx	#CHARACTER_TARGET
    440  7192		       f0 05		      beq	decreaseTargets
    441  7194		       e0 04		      cpx	#CHARACTER_TARGET2
    442  7196		       f0 01		      beq	decreaseTargets
    443  7198		       60		      rts
    444  7199
    445  7199							; Box is now on a target - so decrease the remaining targets
    446  7199
    447  7199		       20 48 fd    decreaseTargets jsr	DeRegisterTarget
    448  719c		       a9 0a		      lda	#CHARACTER_BOX_ON_TARGET
    449  719e		       48	   canPushTarget pha
    450  719f
    451  719f							; If the box *WAS* on a target (restoration character = CHARACTER_TARGET)
    452  719f							; then we increase targets (as there is one more to get)
    453  719f
    454  719f		       a5 dd		      lda	restorationCharacter
    455  71a1		       c9 03		      cmp	#CHARACTER_TARGET
    456  71a3		       d0 03		      bne	notOnTargetAlready
    457  71a5
    458  71a5							; increase the required targets as box is leaving one
    459  71a5
    460  71a5		       20 3e fd 	      jsr	RegisterTarget
    461  71a8
    462  71a8				   notOnTargetAlready
    463  71a8
    464  71a8							; record the box takeback params for the player move to use
    465  71a8
    466  71a8		       86 91		      stx	TB_CHAR
    467  71aa		       a5 87		      lda	POS_X
    468  71ac		       85 8f		      sta	TB_PUSHX
    469  71ae		       a5 88		      lda	POS_Y
    470  71b0		       85 90		      sta	TB_PUSHY
    471  71b2
    472  71b2		       68		      pla		; new char to go on board in box's new position
    473  71b3
    474  71b3
    475  71b3							;  IF MULTI_BANK_BOARD = YES
    476  71b3							;		ldx RAM_Bank			  ; <-- this will never work calling from INITBANK!!!
    477  71b3							;  ELSE
    478  71b3		       a2 0d		      ldx	#BANK_BOARD	; 2
    479  71b5							;  ENDIF
    480  71b5		       20 1d f8 	      jsr	PutBoardCharacter	;6+21(A)
    481  71b8
    482  71b8		       a5 8c		      lda	POS_VAR	; player's restoration character
    483  71ba		       48		      pha
    484  71bb
    485  71bb							; Before the player moves to the new position, take away the box and replace with the
    486  71bb							; character the box was sitting on (BLANK or TARGET). Then the player moves in "next"
    487  71bb
    488  71bb		       a5 8a		      lda	POS_Y_NEW
    489  71bd		       85 88		      sta	POS_Y
    490  71bf		       a5 89		      lda	POS_X_NEW
    491  71c1		       85 87		      sta	POS_X
    492  71c3		       a5 dd		      lda	restorationCharacter
    493  71c5		       85 8c		      sta	POS_VAR
    494  71c7		       20 e3 f8 	      jsr	PutCharacterAtXY	; put back BOX's restoration character
    495  71ca
    496  71ca		       68		      pla
    497  71cb		       85 8c		      sta	POS_VAR
    498  71cd
    499  71cd							;START_SOUND SOUND_BOX
    500  71cd
    501  71cd							; Note: MovePlayer expects new position to be POS_X_NEW, POS_Y_NEW
    502  71cd							; AND the current man's square to be ManX, ManY
    503  71cd
    504  71cd		       4c 37 f9 	      jmp	MovePlayer	; now there's a gap, player should move in
    505  71d0
    506  71d0
    507  71d0							;------------------------------------------------------------------------------
    508  71d0
    509  71d0							; IF the creature runs out of time to do stuff, then rts HOWEVER the creature must eventually do something
    510  71d0							;  as it will be continually called in available time-slices until it does. This can lockup the system.
    511  71d0
    512  71d0							; if the creature is done, and is alive next cycle, then jump ReInsertObject
    513  71d0
    514  71d0							; if the creature dies then jump NextObject
    515  71d0
    516  71d0
    517  71d0
    518  71d0							;RDirY 	  .byte -1    ;,0,1,0
    519  71d0							;RDirX 	  .byte 0,1   ;,0,-1
    520  71d0							;DirPushModX	   .byte 0,-1,1,0
    521  71d0							;DirPushModY	   .byte -1,0,0,1
    522  71d0							;Directional	  .byte 1,2,3,0,1,2, 0,0, 11,8,9,10,11,8
    523  71d0
    524  71d0
    525  71d0							;------------------------------------------------------------------------------
    526  71d0
    527  71d0							; the auto-calculation of these was causing DASM to get confused and abort assembling.
    528  71d0							; I don't particularly know why; probably because of the level variable-size array and the values
    529  71d0							; changing from pass to pass. I've put in the hardwired values and it seems to be OK now.
    530  71d0
    531  71d0		       00 00	   MANMODE_STARTUP =	0
    532  71d0		       00 01	   MANMODE_NORMAL =	1
    533  71d0		       00 02	   MANMODE_DEAD =	2
    534  71d0		       00 03	   MANMODE_WAITING =	3
    535  71d0		       00 04	   MANMODE_WAITING2 =	4
    536  71d0		       00 05	   MANMODE_WAITING_NT =	5
    537  71d0		       00 06	   MANMODE_WAITING_NT2 =	6
    538  71d0		       00 07	   MANMODE_NEXTLEVEL =	7
    539  71d0		       00 08	   MANMODE_NEXTLEVEL2 =	8
    540  71d0		       00 09	   MANMODE_SWITCH =	9
    541  71d0		       00 0a	   MANMODE_TURNAROUND =	10
    542  71d0		       00 0b	   MANMODE_TURNAROUND2 =	11
    543  71d0		       00 0c	   MANMODE_SWITCH2 =	12
    544  71d0		       00 0d	   MANMODE_NEXTLEVEL3 =	13
    545  71d0
    546  71d0
    547  71d0
    548  71d0
      0  71d0					      DEFINE_SUBROUTINE	ManProcess
      1  71d0		       00 0e	   BANK_ManProcess =	_CURRENT_BANK
      2  71d0					      SUBROUTINE
      3  71d0				   ManProcess
    550  71d0
    551  71d0							; ManMode tells the player what it is currently doing.  State machine.
    552  71d0
    553  71d0							; Check the switches....
    554  71d0							; RESET to restart this level
    555  71d0							; SELECT to start next level
    556  71d0
    557  71d0		       ad 82 02 	      lda	SWCHB
    558  71d3		       29 03		      and	#3
    559  71d5		       aa		      tax
    560  71d6		       bd f9 f1 	      lda	newMode,x
    561  71d9		       30 02		      bmi	skipModeChange
    562  71db		       85 a1		      sta	ManMode
    563  71dd				   skipModeChange
    564  71dd
    565  71dd		       20 00 f8 	      jsr	DrawTimeFromROM	; Z-flag == 0!
    566  71e0
    567  71e0		       38		      sec
    568  71e1		       a5 b3		      lda	Throttle	;3
    569  71e3		       e9 a0		      sbc	#MAX_THROTTLE	;2
    570  71e5		       90 11		      bcc	DoNothing2	;2/3		 plenty of time left!
    571  71e7		       85 b3		      sta	Throttle	;3 = 10	 save fractional 'left over' bit
    572  71e9
    573  71e9
    574  71e9		       a4 a1		      ldy	ManMode
    575  71eb		       b9 fd f1 	      lda	ManActionLO,y
    576  71ee		       85 db		      sta	actionVector
    577  71f0		       b9 0b f2 	      lda	ManActionHI,y
    578  71f3		       85 dc		      sta	actionVector+1
    579  71f5		       6c db 00 	      jmp	(actionVector)
    580  71f8
    581  71f8				   DoNothing2
    582  71f8		       60		      rts
    583  71f9
    584  71f9		       ff 0c 04 ff newMode    .byte.b	-1, MANMODE_SWITCH2, MANMODE_WAITING2, -1
    585  71fd
    586  71fd				   ManActionLO
    587  71fd		       40		      .byte.b	<manStartup	; 0		 no timer
    588  71fe		       6e		      .byte.b	<normalMan	; 1		 timer
    589  71ff		       00		      .byte.b	<0	; 2		 timer
    590  7200		       69		      .byte.b	<waitingMan	; 3		 timer
    591  7201		       69		      .byte.b	<waitingManPress	; 4		 timer
    592  7202		       69		      .byte.b	<waitingMan	; 5		 no timer
    593  7203		       69		      .byte.b	<waitingManPress	; 6		 no timer
    594  7204		       fa		      .byte.b	<nextLevelMan	; 7		 no timer
    595  7205		       08		      .byte.b	<nextLevelMan2	; 8		 no timer
    596  7206		       24		      .byte.b	<switchLevels	; 9		 no timer
    597  7207		       19		      .byte.b	<TurnAround	; 10
    598  7208		       32		      .byte.b	<TurnAround2	; 10
    599  7209		       01		      .byte.b	<switchLevels2
    600  720a		       1c		      .byte.b	<nextLevelMan3
    601  720b
    602  720b				   ManActionHI
    603  720b		       f2		      .byte.b	>manStartup	; no timer
    604  720c		       f2		      .byte.b	>normalMan	; timer
    605  720d		       00		      .byte.b	>0	; timer
    606  720e		       f2		      .byte.b	>waitingMan	; timer
    607  720f		       f2		      .byte.b	>waitingManPress	; timer
    608  7210		       f2		      .byte.b	>waitingMan	; no timer
    609  7211		       f2		      .byte.b	>waitingManPress	; no timer
    610  7212		       fc		      .byte.b	>nextLevelMan	; no timer
    611  7213		       fd		      .byte.b	>nextLevelMan2	; no timer
    612  7214		       fd		      .byte.b	>switchLevels	;9  no timer
    613  7215		       f2		      .byte.b	>TurnAround	; 10
    614  7216		       f2		      .byte.b	>TurnAround2	; 10
    615  7217		       fd		      .byte.b	>switchLevels2
    616  7218		       fd		      .byte.b	>nextLevelMan3
    617  7219
    618  7219
      0  7219					      DEFINE_SUBROUTINE	TurnAround
      1  7219		       00 0e	   BANK_TurnAround =	_CURRENT_BANK
      2  7219					      SUBROUTINE
      3  7219				   TurnAround
    620  7219
      0  7219					      LOAD_ANIMATION	TURNAROUND
      1  7219		       a9 ba		      lda	#<Animation_TURNAROUND
      2  721b		       85 9a		      sta	animation
      3  721d		       a9 f0		      lda	#>Animation_TURNAROUND
      4  721f		       85 9b		      sta	animation+1
      5  7221		       a9 00		      lda	#0
      6  7223		       85 9c		      sta	animation_delay
      7  7225		       a9 14		      lda	#ANIMATION_TURNAROUND_ID
      8  7227		       85 a6		      sta	ManAnimationID
    622  7229
    623  7229		       a5 a2		      lda	ManLastDirection
    624  722b		       85 a3		      sta	ManTurnStart
    625  722d
    626  722d		       a9 0b		      lda	#MANMODE_TURNAROUND2
    627  722f		       85 a1		      sta	ManMode
    628  7231		       60		      rts
    629  7232
      0  7232					      DEFINE_SUBROUTINE	TurnAround2
      1  7232		       00 0e	   BANK_TurnAround2 =	_CURRENT_BANK
      2  7232					      SUBROUTINE
      3  7232				   TurnAround2
    631  7232
    632  7232		       a5 a3		      lda	ManTurnStart
    633  7234		       c5 a2		      cmp	ManLastDirection
    634  7236		       f0 07		      beq	notTurnedYet
    635  7238
    636  7238		       a9 01		      lda	#MANMODE_NORMAL
    637  723a		       85 a1		      sta	ManMode
    638  723c		       4c 6e f2 	      jmp	normalMan
    639  723f
    640  723f
    641  723f		       60	   notTurnedYet rts
    642  7240
    643  7240
    644  7240							;------------------------------------------------------------------------------
      0  7240					      DEFINE_SUBROUTINE	manStartup
      1  7240		       00 0e	   BANK_manStartup =	_CURRENT_BANK
      2  7240					      SUBROUTINE
      3  7240				   manStartup
    646  7240
    647  7240					      IF	WAIT_FOR_INITIAL_DRAW
    648  7240							; Delay turning on the visible screen until the background has completed drawing.
    649  7240							; This is simple - is there anything still in the draw stack?
    650  7240		       a5 81		      lda	DrawStackPointer
    651  7242		       10 04		      bpl	midDraw
    652  7244		       a9 00		      lda	#0
    653  7246		       85 ae		      sta	blankState
    654  7248				   midDraw
    655  7248					      ENDIF
    656  7248
    657  7248		       a5 9d		      lda	ManX
    658  724a		       85 89		      sta	POS_X_NEW
    659  724c		       a5 9e		      lda	ManY
    660  724e		       85 8a		      sta	POS_Y_NEW
    661  7250
    662  7250		       a9 01		      lda	#MANMODE_NORMAL
    663  7252		       85 a1		      sta	ManMode
    664  7254
    665  7254		       a9 00		      lda	#0
    666  7256		       85 a8		      sta	idleCount
    667  7258
      0  7258					      LOAD_ANIMATION	IDLE
      1  7258		       a9 4a		      lda	#<Animation_IDLE
      2  725a		       85 9a		      sta	animation
      3  725c		       a9 f0		      lda	#>Animation_IDLE
      4  725e		       85 9b		      sta	animation+1
      5  7260		       a9 00		      lda	#0
      6  7262		       85 9c		      sta	animation_delay
      7  7264		       a9 02		      lda	#ANIMATION_IDLE_ID
      8  7266		       85 a6		      sta	ManAnimationID
    669  7268
    670  7268				   RTS_CF
    671  7268		       60		      rts
    672  7269
    673  7269							;------------------------------------------------------------------------------
    674  7269
    675  7269				   waitingMan
    676  7269				   waitingManPress
    677  7269
    678  7269							;		  lda #50
    679  7269							;		  sta ColourTimer
    680  7269
    681  7269							; RESET gets here
    682  7269
    683  7269							;lda NextLevelTrigger
    684  7269							;ora #BIT_NEXTLIFE
    685  7269
    686  7269		       a9 20		      lda	#32
    687  726b		       85 c1		      sta	NextLevelTrigger
    688  726d		       60		      rts
    689  726e
    690  726e
    691  726e							;------------------------------------------------------------------------------
    692  726e							; Normal man state
    693  726e
      0  726e					      DEFINE_SUBROUTINE	normalMan
      1  726e		       00 0e	   BANK_normalMan =	_CURRENT_BANK
      2  726e					      SUBROUTINE
      3  726e				   normalMan
    695  726e
    696  726e							; Calling code uses 'POS_X_NEW' and 'POS_Y_NEW' as new player position, so these must be set
    697  726e							; before exiting via (for example) look-around option :)
    698  726e
    699  726e		       a5 9d		      lda	ManX
    700  7270		       85 89		      sta	POS_X_NEW
    701  7272		       a5 9e		      lda	ManY
    702  7274		       85 8a		      sta	POS_Y_NEW
    703  7276
    704  7276							;------------------------------------------------------------------------------
    705  7276							; Take-back is a press/release of the button, with the press being limited in duratino
    706  7276							; to allow the action to be "cancelled". Meanwhile, a button press + direction triggers
    707  7276							; "look-around mode"
    708  7276
    709  7276		       a5 cb		      lda	FadeComplete
    710  7278		       d0 3d		      bne	noLook
    711  727a		       a5 4c		      lda	INPT4
    712  727c		       30 39		      bmi	noLook	; button?
    713  727e
    714  727e							; button pressed, so in looking-around mode
    715  727e
    716  727e		       a5 a5		      lda	LookingAround
    717  7280		       30 04		      bmi	LookAround
    718  7282		       a2 ff		      ldx	#$FF
    719  7284		       86 a5		      stx	LookingAround
    720  7286				   LookAround
    721  7286
    722  7286							; Use the joystick as a window-scroller to change the viewport
    723  7286
    724  7286		       ad 80 02 	      lda	SWCHA	;BufferedJoystick
    725  7289		       4a		      lsr
    726  728a		       4a		      lsr
    727  728b		       4a		      lsr
    728  728c		       4a		      lsr
    729  728d		       a8		      tay
    730  728e
    731  728e							;lda #-1
    732  728e							;sta BufferedJoystick
    733  728e
    734  728e		       b9 31 f3 	      lda	JoyMoveX,y
    735  7291		       19 41 f3 	      ora	JoyMoveY,y
    736  7294		       f0 20		      beq	AbandonY
    737  7296
    738  7296		       a9 fe		      lda	#$FE
    739  7298		       85 a5		      sta	LookingAround
    740  729a		       a9 a1		      lda	#MAX_THROTTLE+1
    741  729c		       85 b3		      sta	Throttle	; IMMEDIATE reaction to any joystick!
    742  729e
    743  729e		       b9 31 f3 	      lda	JoyMoveX,y
    744  72a1							;asl
    745  72a1		       18		      clc
    746  72a2		       65 97		      adc	BoardScrollX
    747  72a4		       c5 94		      cmp	BoardEdge_Right
    748  72a6		       b0 02		      bcs	AbandonX
    749  72a8		       85 97		      sta	BoardScrollX
    750  72aa
    751  72aa				   AbandonX
    752  72aa							;lda JoyMoveX,y
    753  72aa							;bne AbandonY			  ; don't allow diagonals!
    754  72aa
    755  72aa		       b9 41 f3 	      lda	JoyMoveY,y
    756  72ad							;asl
    757  72ad		       18		      clc
    758  72ae		       65 96		      adc	BoardScrollY
    759  72b0		       c5 95		      cmp	BoardEdge_Bottom
    760  72b2		       b0 02		      bcs	AbandonY
    761  72b4		       85 96		      sta	BoardScrollY
    762  72b6
    763  72b6		       60	   AbandonY   rts
    764  72b7
    765  72b7		       a2 00	   noLook     ldx	#0
    766  72b9		       a5 a5		      lda	LookingAround
    767  72bb		       c9 ff		      cmp	#$FF
    768  72bd		       86 a5		      stx	LookingAround
    769  72bf		       d0 03		      bne	bProcComp	; $FE means there was a lookaround, so skip
    770  72c1
    771  72c1							; button was presssed and now released and we didn't actually look around
    772  72c1							; so we do a take-back
    773  72c1
    774  72c1		       4c 17 fa 	      jmp	takebackRestoreEarlierPosition	;.. and rts
    775  72c4							;rts
    776  72c4
    777  72c4				   bProcComp
    778  72c4							;------------------------------------------------------------------------------
    779  72c4
    780  72c4		       a9 02		      lda	#ANIMATION_IDLE_ID
    781  72c6		       c5 a6		      cmp	ManAnimationID
    782  72c8		       f0 20		      beq	alreadyIdling
    783  72ca
    784  72ca		       a5 a4		      lda	ManPushCounter
    785  72cc		       d0 1c		      bne	alreadyIdling
    786  72ce
    787  72ce		       e6 a8		      inc	idleCount
    788  72d0		       a4 a8		      ldy	idleCount
    789  72d2		       c0 02		      cpy	#2
    790  72d4		       90 14		      bcc	alreadyIdling
    791  72d6
      0  72d6					      LOAD_ANIMATION	IDLE
      1  72d6		       a9 4a		      lda	#<Animation_IDLE
      2  72d8		       85 9a		      sta	animation
      3  72da		       a9 f0		      lda	#>Animation_IDLE
      4  72dc		       85 9b		      sta	animation+1
      5  72de		       a9 00		      lda	#0
      6  72e0		       85 9c		      sta	animation_delay
      7  72e2		       a9 02		      lda	#ANIMATION_IDLE_ID
      8  72e4		       85 a6		      sta	ManAnimationID
    793  72e6
    794  72e6		       a9 00		      lda	#0
    795  72e8		       85 a8		      sta	idleCount
    796  72ea				   alreadyIdling
    797  72ea
    798  72ea		       a5 a2		      lda	ManLastDirection
    799  72ec		       29 07		      and	#DIRECTION_BITS
    800  72ee		       a8		      tay
    801  72ef
    802  72ef		       a5 92		      lda	BufferedJoystick	; joystick
    803  72f1		       85 93		      sta	PreviousJoystick
    804  72f3							;and BufferedJoystick+1
    805  72f3
    806  72f3		       a2 00		      ldx	#0
    807  72f5		       0a	   .loopDirs  asl
    808  72f6		       90 06		      bcc	.dirFound
    809  72f8		       88		      dey
    810  72f9		       e8		      inx
    811  72fa		       e0 04		      cpx	#4
    812  72fc		       d0 f7		      bne	.loopDirs
    813  72fe
    814  72fe							; no direction!
    815  72fe
    816  72fe							;inc BGColour
    817  72fe
    818  72fe
    819  72fe							;lda #MAX_THROTTLE+1
    820  72fe							;sta Throttle		     ; IMMEDIATE reaction to any joystick!
    821  72fe
    822  72fe				   .dirFound
    823  72fe
    824  72fe		       a9 ff		      lda	#-1
    825  7300		       85 92		      sta	BufferedJoystick
    826  7302
    827  7302		       bd 58 f3 	      lda	anim_direction,x
    828  7305		       30 0d		      bmi	dontChange
    829  7307		       45 a2		      eor	ManLastDirection
    830  7309		       29 08		      and	#%1000
    831  730b		       f0 07		      beq	dontChange
    832  730d
    833  730d							; at this point we want to activate the stand/turn animation before continuing
    834  730d
    835  730d		       a9 0a		      lda	#MANMODE_TURNAROUND
    836  730f		       85 a1		      sta	ManMode
    837  7311		       4c 19 f2 	      jmp	TurnAround
    838  7314
    839  7314
    840  7314
    841  7314
    842  7314							;bne noMovement ;kipMove
    843  7314				   dontChange
    844  7314
    845  7314
    846  7314
    847  7314		       18		      clc
    848  7315		       a5 89		      lda	POS_X_NEW
    849  7317		       7d 53 f3 	      adc	JoyDirX,x
    850  731a		       85 89		      sta	POS_X_NEW
    851  731c
    852  731c		       18		      clc
    853  731d		       a5 8a		      lda	POS_Y_NEW
    854  731f		       7d 51 f3 	      adc	JoyDirY,x
    855  7322		       85 8a		      sta	POS_Y_NEW
    856  7324
    857  7324
    858  7324		       98	   skipMove   tya
    859  7325		       f0 09		      beq	noMovement	; animation OK
    860  7327
    861  7327		       8a		      txa
    862  7328		       45 a2		      eor	ManLastDirection
    863  732a		       29 07		      and	#DIRECTION_BITS
    864  732c		       45 a2		      eor	ManLastDirection
    865  732e		       85 a2		      sta	ManLastDirection
    866  7330
    867  7330				   noMovement
    868  7330
    869  7330
    870  7330		       60	   DFS_rts    rts
    871  7331
    872  7331
    873  7331							;			RLDU RLD  RL U RL   R DU R D  R  U R	 LDU  LD   L U	L     DU   D	 U
    874  7331							;			0000 0001 0010 0011 0100 0101 0110 0111 1000 1001 1010 1011 1100 1101 1110 1111
    875  7331		       00 00 00 00*JoyMoveX   .byte.b	0, 0, 0, 0, 0, 1, 1, 1, 0, -1, -1, -1, 0, 0, 0, 0
    876  7341		       00 00 00 00*JoyMoveY   .byte.b	0, 0, 0, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0
    877  7351
    878  7351				   JoyDirY
    879  7351		       00 00		      .byte.b	0,0	;,1,-1,0
    880  7353				   JoyDirX
    881  7353		       01 ff 00 00*	      .byte.b	1,-1,0,0,0
    882  7358
    883  7358							;Data Bit  Direction Player
    884  7358							;		 D7	   right	  P0  D4
    885  7358							;		 D6	   left      P0  D3
    886  7358							;		 D5	   down      P0  D2
    887  7358							;		 D4	   up	     P0  D1
    888  7358							;     A "0" in a data bit indicates the joystick has been moved
    889  7358							;     to close that switch.  All "1's" in a player's nibble
    890  7358							;     indicates that joystick is not moving.
    891  7358
    892  7358							;0  0000 x
    893  7358							;1  0001 x
    894  7358							;2  0010 x
    895  7358							;3  0011 x
    896  7358							;4  0100 x
    897  7358							;5  0101 right down
    898  7358							;6  0110 right up
    899  7358							;7  0111 right
    900  7358							;8  1000 x
    901  7358							;9  1001 left down
    902  7358							;10  1010 left up
    903  7358							;11  1011 left
    904  7358							;12  1100 x
    905  7358							;13  1101 down
    906  7358							;14  1110 up
    907  7358							;15  1111 none
    908  7358
    909  7358		       00 08 80 80*anim_direction .byte.b	0,%1000,128,128,128
    910  735d
    911  735d							;------------------------------------------------------------------------------
    912  735d
    913  735d
      0  735d					      DEFINE_SUBROUTINE	DrawFullScreen	; @31✅
      1  735d		       00 0e	   BANK_DrawFullScreen =	_CURRENT_BANK
      2  735d					      SUBROUTINE
      3  735d				   DrawFullScreen
    915  735d
    916  735d		       ad 84 02 	      lda	INTIM	; 4
    917  7360		       c9 29		      cmp	#SEGTIME_BDF	; 2
    918  7362		       90 cc		      bcc	DFS_rts	; 2/3 ==> [31]+(9)+6rts = 46✅ on abort
    919  7364
    920  7364		       a9 f4		      lda	#>( DrawFlag + RAM_WRITE )	; 2
    921  7366		       85 dc		      sta	BDF_DrawFlagAddress+1	; 3
    922  7368		       85 de		      sta	BDF_DrawFlagAddress2+1	; 3 = 8✅
    923  736a
    924  736a		       ba		      tsx		; 2
    925  736b		       86 e5		      stx	DHS_Stack	; 3
    926  736d
    927  736d		       e6 86		      inc	ScreenDrawPhase	; 5
    928  736f
    929  736f		       18		      clc		; 2	     required clear for DrawScreenRowPreparation
    930  7370		       a2 08		      ldx	#SCREEN_LINES	; 2
    931  7372		       8a		      txa		; 2 = 24✅
    932  7373
    933  7373							; fall through
    934  7373
    935  7373							;------------------------------------------------------------------------------
    936  7373
    937  7373							; @311✅ (from loop)
    938  7373							; @24✅ (fall through)
    939  7373
    940  7373							; 8 lines x 311 + (24)
    941  7373							; = 2512
    942  7373							; = 39 :)
    943  7373
      0  7373					      DEFINE_SUBROUTINE	DrawScreenRowPreparation
      1  7373		       00 0e	   BANK_DrawScreenRowPreparation =	_CURRENT_BANK
      2  7373					      SUBROUTINE
      3  7373				   DrawScreenRowPreparation
    945  7373
    946  7373							;clc
    947  7373		       ca		      dex		; 2
    948  7374		       86 e4		      stx	DHS_Line	; 3
    949  7376		       65 96		      adc	BoardScrollY	; 3	     the Y offset of screen into board
    950  7378		       a8		      tay		; 2 = 10✅
    951  7379
    952  7379							;clc
    953  7379		       b9 00 f0 	      lda	BoardLineStartLO-1,y	; 4	     Y is one too big!
    954  737c		       65 97		      adc	BoardScrollX	; 3	     the X offset of screen into board
    955  737e		       85 df		      sta	BDF_BoardAddress	; 3
    956  7380		       69 05		      adc	#SCREEN_WIDTH/2	; 2
    957  7382		       85 e1		      sta	BDF_BoardAddress2	; 3 = 15✅
    958  7384
    959  7384		       b9 20 f0 	      lda	BoardLineStartHiR-1,y	; 4	     a board line *WILL NOT CROSS* page boundary
    960  7387		       85 e0		      sta	BDF_BoardAddress+1	; 3
    961  7389		       85 e2		      sta	BDF_BoardAddress2+1	; 3 = 10 @35✅
    962  738b
    963  738b		       bd c2 f0 	      lda	DrawLineStartLO,x	; 4
    964  738e		       85 db		      sta	BDF_DrawFlagAddress	; 3
    965  7390		       69 05		      adc	#SCREEN_WIDTH/2	; 2
    966  7392		       85 dd		      sta	BDF_DrawFlagAddress2	; 3 = 12✅
    967  7394
    968  7394							;    IF MULTI_BANK_BOARD = YES
    969  7394							;		  lda BoardBank-1,y		  ; 4
    970  7394							;		  sta BDF_BoardBank		  ; 3
    971  7394							;    ENDIF
    972  7394		       a0 04		      ldy	#SCREEN_WIDTH/2-1	; 2
    973  7396		       4c 8b fb 	      jmp	CopyRow2	; 3 = 12 @59✅
    974  7399
    975  7399							;------------------------------------------------------------------------------
    976  7399
      0  7399					      DEFINE_SUBROUTINE	EndOfLevel
      1  7399		       00 0e	   BANK_EndOfLevel =	_CURRENT_BANK
      2  7399					      SUBROUTINE
      3  7399				   EndOfLevel
    978  7399
    979  7399		       a9 0a		      lda	#10
    980  739b		       85 a9		      sta	DelayEndOfLevel
    981  739d
    982  739d		       a6 80		      ldx	Platform
    983  739f		       bd bd f3 	      lda	FlashColour,x	;+4,x
    984  73a2		       85 b0		      sta	BGColour	;ColourFlash		      ; green
    985  73a4		       a9 08		      lda	#8
    986  73a6		       85 c0		      sta	ColourTimer
    987  73a8
    988  73a8
      0  73a8					      LOAD_ANIMATION	WIN
      1  73a8		       a9 24		      lda	#<Animation_WIN
      2  73aa		       85 9a		      sta	animation
      3  73ac		       a9 f0		      lda	#>Animation_WIN
      4  73ae		       85 9b		      sta	animation+1
      5  73b0		       a9 00		      lda	#0
      6  73b2		       85 9c		      sta	animation_delay
      7  73b4		       a9 04		      lda	#ANIMATION_WIN_ID
      8  73b6		       85 a6		      sta	ManAnimationID
    990  73b8
    991  73b8		       a9 08		      lda	#MANMODE_NEXTLEVEL2
    992  73ba		       85 a1		      sta	ManMode
    993  73bc		       60		      rts
    994  73bd
    995  73bd
    996  73bd		       c4 c4 54 54 FlashColour .byte.b	$C4, $C4, $54, $54
    997  73c1
    998  73c1
      0  73c1					      DEFINE_SUBROUTINE	IMC
      1  73c1		       00 0e	   BANK_IMC   =	_CURRENT_BANK
      2  73c1					      SUBROUTINE
      3  73c1				   IMC
   1000  73c1
   1001  73c1		       18		      clc
   1002  73c2		       a5 b7		      lda	takebackIndex
   1003  73c4		       69 01		      adc	#1
   1004  73c6		       29 3f		      and	#TAKEBACK_MASK
   1005  73c8		       85 b7		      sta	takebackIndex
   1006  73ca		       c5 b8		      cmp	takebackBaseIndex
   1007  73cc		       d0 06		      bne	baseOK
   1008  73ce		       69 00		      adc	#0
   1009  73d0		       29 3f		      and	#TAKEBACK_MASK
   1010  73d2		       85 b8		      sta	takebackBaseIndex
   1011  73d4				   baseOK
   1012  73d4
   1013  73d4		       f8		      sed
   1014  73d5		       18		      clc
   1015  73d6		       a5 b5		      lda	BCD_moveCounter
   1016  73d8		       69 01		      adc	#1
   1017  73da		       85 b5		      sta	BCD_moveCounter
   1018  73dc		       a5 b6		      lda	BCD_moveCounter+1
   1019  73de		       69 00		      adc	#0
   1020  73e0		       85 b6		      sta	BCD_moveCounter+1
   1021  73e2		       d8		      cld
   1022  73e3
   1023  73e3		       60		      rts
   1024  73e4
   1025  73e4							;------------------------------------------------------------------------------
   1026  73e4
      0  73e4					      DEFINE_SUBROUTINE	VectorProcess	;=19 + 13, = 31✅ minimum
      1  73e4		       00 0e	   BANK_VectorProcess =	_CURRENT_BANK
      2  73e4					      SUBROUTINE
      3  73e4				   VectorProcess
   1028  73e4
   1029  73e4		       bd f2 f3 	      lda	OSPointerHI,x	; 4
   1030  73e7		       85 dc		      sta	POS_Vector+1	; 3
   1031  73e9		       bd f1 f3 	      lda	OSPointerLO,x	; 4
   1032  73ec		       85 db		      sta	POS_Vector	; 3
   1033  73ee
   1034  73ee		       6c db 00 	      jmp	(POS_Vector)	; 5 = 19	  vector to processor for particular object type
   1035  73f1
   1036  73f1							; earliest abort from process = +13
   1037  73f1
   1038  73f1							;		 NOTE: Bank is either INITBANK or FIXED.
   1039  73f1							;------------------------------------------------------------------------------
   1040  73f1
   1041  73f1
   1042  73f1				   OBJTYPE    SET	0
   1043  73f1					      MAC	define
   1044  73f1				   TYPE_{1}   =	OBJTYPE
   1045  73f1				   OBJTYPE    .SET	OBJTYPE + 1
   1046  73f1					      ENDM
   1047  73f1
   1048  73f1							; If adding/removing types, the following must also be updated...
   1049  73f1							;   InitialFace[...]		     in UnpackLevel.asm
   1050  73f1							;   BaseTypeCharacter[...]	     in BANK_FIXED.asm
   1051  73f1							;   BaseTypeCharacterFalling[...]   in BANK_FIXED.asm
   1052  73f1							;   OSPointerLO[...]		     in BANK_INITBANK.asm
   1053  73f1							;   OSPointerHI[...]		     in BANK_INITBANK.asm
   1054  73f1							;   CharReplacement[...]	     in BANK_ROM_SHADOW_DRAWBUFFERS.asm
   1055  73f1							;   Sortable[...]		     in BANK_FIXED.asm
   1056  73f1
   1057  73f1
      0  73f1					      DEFINE	MAN
      1  73f1		       00 00	   TYPE_MAN   =	OBJTYPE
      2  73f1				   OBJTYPE    .SET	OBJTYPE + 1
   1059  73f1							;DEFINE CIRCLE
   1060  73f1							;DEFINE CIRCLE_HELPER
   1061  73f1							;DEFINE CIRCLE_DRAWER
   1062  73f1
      0  73f1					      DEFINE	MAXIMUM
      1  73f1		       00 01	   TYPE_MAXIMUM =	OBJTYPE
      2  73f1				   OBJTYPE    .SET	OBJTYPE + 1
   1064  73f1
   1065  73f1
      0  73f1					      DEFINE_SUBROUTINE	OSPointerLO
      1  73f1		       00 0e	   BANK_OSPointerLO =	_CURRENT_BANK
      2  73f1					      SUBROUTINE
      3  73f1				   OSPointerLO
   1067  73f1		       a9		      .byte.b	<PROCESS_MAN
   1068  73f2							;.byte <PROCESS_CIRCLE
   1069  73f2							;.byte <PROCESS_CIRCLE_HELPER
   1070  73f2
   1071  73f2				  -	      IF	* - OSPointerLO < TYPE_MAXIMUM-4
   1072  73f2				  -	      ECHO	"ERROR: Missing entry in OSPointerLO table!"
   1073  73f2				  -	      ERR
   1074  73f2					      ENDIF
   1075  73f2
   1076  73f2
      0  73f2					      DEFINE_SUBROUTINE	OSPointerHI
      1  73f2		       00 0e	   BANK_OSPointerHI =	_CURRENT_BANK
      2  73f2					      SUBROUTINE
      3  73f2				   OSPointerHI
   1078  73f2		       f8		      .byte.b	>PROCESS_MAN
   1079  73f3							;.byte >PROCESS_CIRCLE
   1080  73f3							;.byte >PROCESS_CIRCLE_HELPER
   1081  73f3
   1082  73f3				  -	      IF	* - OSPointerHI < TYPE_MAXIMUM-4
   1083  73f3				  -	      ECHO	"ERROR: Missing entry in OSPointerHI table!"
   1084  73f3				  -	      ERR
   1085  73f3					      ENDIF
   1086  73f3
   1087  73f3							;------------------------------------------------------------------------------
   1088  73f3
      0  73f3					      DEFINE_SUBROUTINE	MoveVecLO	; [character type]
      1  73f3		       00 0e	   BANK_MoveVecLO =	_CURRENT_BANK
      2  73f3					      SUBROUTINE
      3  73f3				   MoveVecLO
   1090  73f3
   1091  73f3		       92		      .byte.b	<MOVE_BLANK
   1092  73f4		       92		      .byte.b	<MOVE_SOIL
   1093  73f5		       05		      .byte.b	<MOVE_BOX
   1094  73f6		       92		      .byte.b	<MOVE_TARGET
   1095  73f7		       92		      .byte.b	<MOVE_TARGET
   1096  73f8		       f0		      .byte.b	<MOVE_GENERIC	;man occupied
   1097  73f9		       f0		      .byte.b	<MOVE_GENERIC	;steel
   1098  73fa		       f0		      .byte.b	<MOVE_GENERIC	;rivet
   1099  73fb		       f0		      .byte.b	<MOVE_GENERIC	;wall
   1100  73fc		       f0		      .byte.b	<MOVE_GENERIC	;stripe
   1101  73fd		       0e		      .byte.b	<MOVE_BOX_ON_TARGET	;box on target
   1102  73fe							;	  .byte <MOVE_BOX_ON_TARGET ;box on target
   1103  73fe		       f0		      .byte.b	<MOVE_GENERIC	;nogo
   1104  73ff		       92		      .byte.b	<MOVE_TARGET	;1
   1105  7400		       92		      .byte.b	<MOVE_TARGET	;3
   1106  7401		       92		      .byte.b	<MOVE_TARGET	;5
   1107  7402		       92		      .byte.b	<MOVE_TARGET	;7
   1108  7403
   1109  7403				  -	      if	DIGITS
   1110  7403				  -	      REPEAT	10	; DIGITS 0-9
   1111  7403				  -	      .byte	<MOVE_BLANK
   1112  7403				  -	      REPEND
   1113  7403					      endif
   1114  7403
   1115  7403				  -	      IF	* - MoveVecLO != CHARACTER_MAXIMUM
   1116  7403				  -	      ECHO	"ERROR: Incorrect number of entries in MoveVecLO table!"
   1117  7403				  -	      ERR
   1118  7403					      ENDIF
   1119  7403
   1120  7403
      0  7403					      DEFINE_SUBROUTINE	MoveVecHI	;[character type]
      1  7403		       00 0e	   BANK_MoveVecHI =	_CURRENT_BANK
      2  7403					      SUBROUTINE
      3  7403				   MoveVecHI
   1122  7403
   1123  7403		       f9		      .byte.b	>MOVE_BLANK
   1124  7404		       f9		      .byte.b	>MOVE_SOIL
   1125  7405		       fa		      .byte.b	>MOVE_BOX
   1126  7406		       f9		      .byte.b	>MOVE_TARGET
   1127  7407		       f9		      .byte.b	>MOVE_TARGET
   1128  7408		       f9		      .byte.b	>MOVE_GENERIC	;man occupied
   1129  7409		       f9		      .byte.b	>MOVE_GENERIC	;steel
   1130  740a		       f9		      .byte.b	>MOVE_GENERIC	;rivet
   1131  740b		       f9		      .byte.b	>MOVE_GENERIC	;wall
   1132  740c		       f9		      .byte.b	>MOVE_GENERIC	;stripe
   1133  740d		       fa		      .byte.b	>MOVE_BOX_ON_TARGET	;box on target
   1134  740e							;	  .byte >MOVE_BOX_ON_TARGET ;box on target
   1135  740e		       f9		      .byte.b	>MOVE_GENERIC	;nogo
   1136  740f		       f9		      .byte.b	>MOVE_TARGET	;1
   1137  7410		       f9		      .byte.b	>MOVE_TARGET	;3
   1138  7411		       f9		      .byte.b	>MOVE_TARGET	;5
   1139  7412		       f9		      .byte.b	>MOVE_TARGET	; 7
   1140  7413
   1141  7413				  -	      if	DIGITS
   1142  7413				  -	      REPEAT	10	; DIGITS 0-9
   1143  7413				  -	      .byte	>MOVE_BLANK
   1144  7413				  -	      REPEND
   1145  7413					      endif
   1146  7413
   1147  7413				  -	      IF	* - MoveVecHI != CHARACTER_MAXIMUM
   1148  7413				  -	      ECHO	"ERROR: Incorrect number of entries in MoveVecHI table!"
   1149  7413				  -	      ERR
   1150  7413					      ENDIF
   1151  7413
   1152  7413							;------------------------------------------------------------------------------
   1153  7413
      0  7413					      DEFINE_SUBROUTINE	SoundFX
      1  7413		       00 0e	   BANK_SoundFX =	_CURRENT_BANK
      2  7413					      SUBROUTINE
      3  7413				   SoundFX
------- FILE sound/intro1_player.asm LEVEL 3 PASS 3
      0  7413					      include	"sound/intro1_player.asm"
      1  7413							; TIATracker music player
      2  7413							; Copyright 2016 Andre "Kylearan" Wichmann
      3  7413							; Website: https://bitbucket.org/kylearan/tiatracker
      4  7413							; Email: andre.wichmann@gmx.de
      5  7413							;
      6  7413							; Licensed under the Apache License, Version 2.0 (the "License");
      7  7413							; you may not use this file except in compliance with the License.
      8  7413							; You may obtain a copy of the License at
      9  7413							;
     10  7413							;   http://www.apache.org/licenses/LICENSE-2.0
     11  7413							;
     12  7413							; Unless required by applicable law or agreed to in writing, software
     13  7413							; distributed under the License is distributed on an "AS IS" BASIS,
     14  7413							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15  7413							; See the License for the specific language governing permissions and
     16  7413							; limitations under the License.
     17  7413
     18  7413							; Song author:
     19  7413							; Song name:
     20  7413
     21  7413							; @com.wudsn.ide.asm.hardware=ATARI2600
     22  7413
     23  7413							; =====================================================================
     24  7413							; TIATracker Player
     25  7413							; =====================================================================
     26  7413				   tt_PlayerStart
     27  7413
     28  7413							; PLANNED PLAYER VARIANTS:
     29  7413							; - RAM, speed, player ROM: c0/c1 patterns have same length
     30  7413							; - RAM: Pack 2 values (out of cur_pat_index, cur_note_index, envelope_index)
     31  7413							;	 into one and use lsr/asl to unpack them, allowing only ranges of
     32  7413							;	 16/16 or 32/8 for them, depending on number of patterns, max
     33  7413							;	 pattern size and max ADSR size
     34  7413							; - ROM: Check if tt_SequenceTable can hold ptrs directly without indexing
     35  7413							;	 tt_PatternPtrLo/Hi. Can be smaller if not many patterns get repeated
     36  7413							;	 (saves table and decode routine)
     37  7413							; - Speed: Inline tt_CalcInsIndex
     38  7413							; - Speed: Store ptr to current note in RAM instead of reconstructing it?
     39  7413							;	 Might also save the need for cur_note_index
     40  7413
     41  7413
     42  7413							; ---------------------------------------------------------------------
     43  7413							; Helper macro: Retrieves current note. May advance pattern if needed.
     44  7413							; Becomes a subroutine if TT_USE_OVERLAY is used.
     45  7413							; ---------------------------------------------------------------------
     46  7413					      MAC	tt_fetch_current_note
     47  7413							; construct ptr to pattern
     48  7413				   .constructPatPtr
     49  7413					      ldy	tt_cur_pat_index_c0,x	; get current pattern (index into tt_SequenceTable)
     50  7413					      lda	tt_SequenceTable,y
     51  7413					      IF	TT_USE_GOTO = 1
     52  7413					      bpl	.noPatternGoto
     53  7413					      and	#%01111111	; mask out goto bit to get pattern number
     54  7413					      sta	tt_cur_pat_index_c0,x	; store goto'ed pattern index
     55  7413					      bpl	.constructPatPtr	; unconditional
     56  7413				   .noPatternGoto
     57  7413					      ENDIF
     58  7413					      tay
     59  7413					      lda	tt_PatternPtrLo,y
     60  7413					      sta	tt_ptr
     61  7413					      lda	tt_PatternPtrHi,y
     62  7413					      sta	tt_ptr+1
     63  7413							; get new note
     64  7413					      IF	TT_USE_OVERLAY = 0
     65  7413					      ldy	tt_cur_note_index_c0,x
     66  7413					      ELSE
     67  7413							; If the V flag is set and if the new note is an instrument,
     68  7413							; it means it got pre-fetched by an overlay percussion, it has
     69  7413							; to remain in sustain.
     70  7413					      clv
     71  7413							; check if note had been pre-fetched by overlay perc already
     72  7413					      lda	tt_cur_note_index_c0,x
     73  7413					      bpl	.notPrefetched
     74  7413							; If so, remove flag
     75  7413					      and	#%01111111
     76  7413					      sta	tt_cur_note_index_c0,x
     77  7413							; Set V flag for later
     78  7413					      bit	tt_Bit6Set
     79  7413				   .notPrefetched
     80  7413					      tay
     81  7413					      ENDIF
     82  7413					      lda	(tt_ptr),y
     83  7413							; pre-process new note
     84  7413							; 7..5: instrument (1..7), 4..0 (0..31): frequency
     85  7413							; 0/0: End of pattern
     86  7413					      bne	.noEndOfPattern
     87  7413							; End of pattern: Advance to next pattern
     88  7413					      sta	tt_cur_note_index_c0,x	; a is 0
     89  7413					      inc	tt_cur_pat_index_c0,x
     90  7413					      bne	.constructPatPtr	; unconditional
     91  7413				   .noEndOfPattern
     92  7413					      ENDM
     93  7413
     94  7413
     95  7413							; ---------------------------------------------------------------------
     96  7413							; Music player entry. Call once per frame.
     97  7413							; ---------------------------------------------------------------------
     98  7413				   tt_Player  SUBROUTINE
     99  7413							; ==================== Sequencer ====================
    100  7413							; Decrease speed timer
    101  7413		       c6 d0		      dec	tt_timer
    102  7415		       10 6e		      bpl	.noNewNote
    103  7417
    104  7417							; Timer ran out: Do sequencer
    105  7417							; Advance to next note
    106  7417		       a2 01		      ldx	#1	; 2 channels
    107  7419				   .advanceLoop
    108  7419					      IF	TT_USE_OVERLAY = 1
    109  7419		       20 2f f4 	      jsr	tt_FetchNote
    110  741c				  -	      ELSE
    111  741c				  -	      TT_FETCH_CURRENT_NOTE
    112  741c					      ENDIF
    113  741c							; Parse new note from pattern
    114  741c		       c9 10		      cmp	#TT_INS_PAUSE
    115  741e					      IF	TT_USE_SLIDE = 0
    116  741e		       90 55		      bcc	.finishedNewNote
    117  7420		       d0 3d		      bne	.newNote
    118  7422				  -	      ELSE
    119  7422				  -	      beq	.pause
    120  7422				  -	      bcs	.newNote
    121  7422				  -
    122  7422				  -			; --- slide/hold ---
    123  7422				  -			; Adjust frequency and hold note in sustain.
    124  7422				  -			; composer/tracker has to make sure that no unwanted
    125  7422				  -			; under/overflow happens.
    126  7422				  -			; Note: f = f + (8-(16-x)) = x + f - 8
    127  7422				  -	      adc	tt_cur_ins_c0,x	; carry is clear after cmp
    128  7422				  -	      sec
    129  7422				  -	      sbc	#8
    130  7422				  -	      sta	tt_cur_ins_c0,x
    131  7422				  -	      bcs	.finishedNewNote	; unconditional, since legally no underflow can happen (ins>0 or HOLD for ins=0)
    132  7422					      ENDIF
    133  7422
    134  7422							; --- pause ---
    135  7422				   .pause
    136  7422							; Get release index for current instrument. Since a pause can
    137  7422							; only follow an instrument, we don't need to handle percussion
    138  7422							; or commands.
    139  7422		       b5 d7		      lda	tt_cur_ins_c0,x
    140  7424		       20 bd f4 	      jsr	tt_CalcInsIndex
    141  7427		       b9 ff f4 	      lda	tt_InsReleaseIndexes-1,y	; -1 b/c instruments start at #1
    142  742a							; Put it into release. Skip junk byte so index no longer indicates
    143  742a							; sustain phase.
    144  742a		       18		      clc
    145  742b		       69 01		      adc	#1
    146  742d		       90 44		      bcc	.storeADIndex	; unconditional
    147  742f
    148  742f							; ---------------------------------------------------------------------
    149  742f							; Helper subroutine to minimize ROM footprint. Will be inlined if
    150  742f							; TT_USE_OVERLAY is not used.
    151  742f							; Interleaved here so player can be inlined.
    152  742f							; ---------------------------------------------------------------------
    153  742f					      IF	TT_USE_OVERLAY = 1
    154  742f				   tt_FetchNote
      0  742f					      TT_FETCH_CURRENT_NOTE
      1  742f
      2  742f				   .constructPatPtr
      3  742f		       b4 d1		      ldy	tt_cur_pat_index_c0,x
      4  7431		       b9 12 f6 	      lda	tt_SequenceTable,y
      5  7434					      IF	TT_USE_GOTO = 1
      6  7434		       10 06		      bpl	.noPatternGoto
      7  7436		       29 7f		      and	#%01111111
      8  7438		       95 d1		      sta	tt_cur_pat_index_c0,x
      9  743a		       10 f3		      bpl	.constructPatPtr
     10  743c				   .noPatternGoto
     11  743c					      ENDIF
     12  743c		       a8		      tay
     13  743d		       b9 08 f6 	      lda	tt_PatternPtrLo,y
     14  7440		       85 d9		      sta	tt_ptr
     15  7442		       b9 0d f6 	      lda	tt_PatternPtrHi,y
     16  7445		       85 da		      sta	tt_ptr+1
     17  7447
     18  7447				  -	      IF	TT_USE_OVERLAY = 0
     19  7447				  -	      ldy	tt_cur_note_index_c0,x
     20  7447					      ELSE
     21  7447
     22  7447
     23  7447
     24  7447		       b8		      clv
     25  7448
     26  7448		       b5 d3		      lda	tt_cur_note_index_c0,x
     27  744a		       10 07		      bpl	.notPrefetched
     28  744c
     29  744c		       29 7f		      and	#%01111111
     30  744e		       95 d3		      sta	tt_cur_note_index_c0,x
     31  7450
     32  7450		       2c c3 f4 	      bit	tt_Bit6Set
     33  7453				   .notPrefetched
     34  7453		       a8		      tay
     35  7454					      ENDIF
     36  7454		       b1 d9		      lda	(tt_ptr),y
     37  7456
     38  7456
     39  7456
     40  7456		       d0 06		      bne	.noEndOfPattern
     41  7458
     42  7458		       95 d3		      sta	tt_cur_note_index_c0,x
     43  745a		       f6 d1		      inc	tt_cur_pat_index_c0,x
     44  745c		       d0 d1		      bne	.constructPatPtr
     45  745e				   .noEndOfPattern
    156  745e		       60		      rts
    157  745f					      ENDIF
    158  745f
    159  745f
    160  745f							; --- start instrument or percussion ---
    161  745f				   .newNote
    162  745f		       95 d7		      sta	tt_cur_ins_c0,x	; set new instrument
    163  7461							; Instrument or percussion?
    164  7461		       c9 20		      cmp	#TT_FREQ_MASK+1
    165  7463		       b0 06		      bcs	.startInstrument
    166  7465
    167  7465							; --- start percussion ---
    168  7465							; Get index of envelope
    169  7465		       a8		      tay
    170  7466							; -TT_FIRST_PERC because percussion start with TT_FIRST_PERC
    171  7466		       b9 23 f5 	      lda	tt_PercIndexes-TT_FIRST_PERC,y
    172  7469		       d0 08		      bne	.storeADIndex	; unconditional, since index values are >0
    173  746b
    174  746b							; --- start instrument ---
    175  746b				   .startInstrument
    176  746b					      IF	TT_USE_OVERLAY = 1
    177  746b							; If V flag is set, this note had been pre-fetched. That means
    178  746b							; it should remain in sustain.
    179  746b		       70 08		      bvs	.finishedNewNote
    180  746d					      ENDIF
    181  746d							; Put note into attack/decay
    182  746d		       20 bd f4 	      jsr	tt_CalcInsIndex
    183  7470		       b9 f5 f4 	      lda	tt_InsADIndexes-1,y	; -1 because instruments start at #1
    184  7473				   .storeADIndex
    185  7473		       95 d5		      sta	tt_envelope_index_c0,x
    186  7475
    187  7475							; --- Finished parsing new note ---
    188  7475				   .finishedNewNote
    189  7475							; increase note index into pattern
    190  7475		       f6 d3		      inc	tt_cur_note_index_c0,x
    191  7477							; loop over channels
    192  7477				   .sequencerNextChannel
    193  7477		       ca		      dex
    194  7478		       10 9f		      bpl	.advanceLoop
    195  747a
    196  747a							; Reset timer value
    197  747a				  -	      IF	TT_GLOBAL_SPEED = 0
    198  747a				  -			; Get timer value for current pattern in channel 0
    199  747a				  -	      ldx	tt_cur_pat_index_c0	; get current pattern (index into tt_SequenceTable)
    200  747a				  -	      ldy	tt_SequenceTable,x	; Current pattern index now in y
    201  747a				  -	      IF	TT_USE_FUNKTEMPO = 0
    202  747a				  -	      lda	tt_PatternSpeeds,y
    203  747a				  -	      sta	tt_timer
    204  747a				  -	      ELSE
    205  747a				  -			; Test for odd/even frame
    206  747a				  -	      lda	tt_cur_note_index_c0
    207  747a				  -	      lsr
    208  747a				  -	      lda	tt_PatternSpeeds,y	; does not affect carry flag
    209  747a				  -	      bcc	.evenFrame
    210  747a				  -	      and	#$0f	; does not affect carry flag
    211  747a				  -	      bcs	.storeFunkTempo
    212  747a				  -.evenFrame
    213  747a				  -	      lsr
    214  747a				  -	      lsr
    215  747a				  -	      lsr
    216  747a				  -	      lsr
    217  747a				  -.storeFunkTempo
    218  747a				  -	      sta	tt_timer
    219  747a				  -	      ENDIF		; TT_USE_FUNKTEMPO = 0
    220  747a				  -
    221  747a					      ELSE
    222  747a							; Global tempo
    223  747a		       a2 04		      ldx	#TT_SPEED-1
    224  747c					      IF	TT_USE_FUNKTEMPO = 1
    225  747c		       a5 d3		      lda	tt_cur_note_index_c0
    226  747e		       4a		      lsr
    227  747f		       90 02		      bcc	.noOddFrame
    228  7481		       a2 03		      ldx	#TT_ODD_SPEED-1
    229  7483				   .noOddFrame
    230  7483					      ENDIF		; TT_USE_FUNKTEMPO = 1
    231  7483		       86 d0		      stx	tt_timer
    232  7485					      ENDIF		; TT_GLOBAL_SPEED = 0
    233  7485
    234  7485							; No new note to process
    235  7485				   .noNewNote
    236  7485
    237  7485							; ==================== Update registers ====================
    238  7485		       a2 01		      ldx	#1	; 2 channels
    239  7487				   .updateLoop
    240  7487							; Percussion or melodic instrument?
    241  7487		       b5 d7		      lda	tt_cur_ins_c0,x
    242  7489				  -	      IF	TT_STARTS_WITH_NOTES = 0
    243  7489				  -			; This branch can be removed if track starts with a note in each channel
    244  7489				  -	      beq	.afterAudioUpdate
    245  7489					      ENDIF
    246  7489		       c9 20		      cmp	#TT_FREQ_MASK+1
    247  748b		       b0 37		      bcs	.instrument	; Melodic instrument
    248  748d
    249  748d							; --- Percussion: Get envelope index ---
    250  748d		       b4 d5		      ldy	tt_envelope_index_c0,x
    251  748f							; Set AUDC and AUDV value from envelope
    252  748f		       b9 4c f5 	      lda	tt_PercCtrlVolTable-1,y	; -1 because values are stored +1
    253  7492		       f0 02		      beq	.endOfPercussion	; 0 means end of percussion data
    254  7494		       f6 d5		      inc	tt_envelope_index_c0,x	; if end not reached: advance index
    255  7496				   .endOfPercussion
    256  7496		       95 59		      sta	AUDV0,x
    257  7498		       4a		      lsr
    258  7499		       4a		      lsr
    259  749a		       4a		      lsr
    260  749b		       4a		      lsr
    261  749c		       95 55		      sta	AUDC0,x
    262  749e							; Set AUDF
    263  749e		       b9 36 f5 	      lda	tt_PercFreqTable-1,y	; -1 because values are stored +1
    264  74a1							; Bit 7 (overlay) might be set, but is unused in AUDF
    265  74a1		       95 57		      sta	AUDF0,x
    266  74a3					      IF	TT_USE_OVERLAY = 1
    267  74a3		       10 48		      bpl	.afterAudioUpdate
    268  74a5							; Overlay percussion: Fetch next note out of order
    269  74a5		       20 2f f4 	      jsr	tt_FetchNote
    270  74a8							; Only do something if it's a melodic instrument
    271  74a8		       c9 20		      cmp	#TT_FREQ_MASK+1
    272  74aa		       90 41		      bcc	.afterAudioUpdate
    273  74ac							; Instrument: Put into sustain
    274  74ac		       95 d7		      sta	tt_cur_ins_c0,x	; set new instrument
    275  74ae		       20 bd f4 	      jsr	tt_CalcInsIndex
    276  74b1		       b9 fa f4 	      lda	tt_InsSustainIndexes-1,y	; -1 because instruments start at #1
    277  74b4		       95 d5		      sta	tt_envelope_index_c0,x
    278  74b6							; Set prefetch flag. asl-sec-ror is smaller than lda-ora #128-sta
    279  74b6		       16 d3		      asl	tt_cur_note_index_c0,x
    280  74b8		       38		      sec
    281  74b9		       76 d3		      ror	tt_cur_note_index_c0,x
    282  74bb		       30 30		      bmi	.afterAudioUpdate	; unconditional
    283  74bd				  -	      ELSE
    284  74bd				  -	      jmp	.afterAudioUpdate
    285  74bd					      ENDIF
    286  74bd
    287  74bd
    288  74bd							; ---------------------------------------------------------------------
    289  74bd							; Helper subroutine to minimize ROM footprint.
    290  74bd							; Interleaved here so player routine can be inlined.
    291  74bd							; ---------------------------------------------------------------------
    292  74bd				   tt_CalcInsIndex
    293  74bd							; move upper 3 bits to lower 3
    294  74bd		       4a		      lsr
    295  74be		       4a		      lsr
    296  74bf		       4a		      lsr
    297  74c0		       4a		      lsr
    298  74c1		       4a		      lsr
    299  74c2		       a8		      tay
    300  74c3				   tt_Bit6Set		; This opcode has bit #6 set, for use with bit instruction
    301  74c3		       60		      rts
    302  74c4
    303  74c4
    304  74c4				   .instrument
    305  74c4							; --- Melodic instrument ---
    306  74c4							; Compute index into ADSR indexes and master Ctrl tables
    307  74c4		       20 bd f4 	      jsr	tt_CalcInsIndex
    308  74c7							; Set AUDC with master value for this instrument, while we are at it
    309  74c7		       b9 f0 f4 	      lda	tt_InsCtrlTable-1,y	; -1 because instruments start with #1
    310  74ca		       95 55		      sta	AUDC0,x
    311  74cc							; advance ADSR counter and compare to end of Sustain
    312  74cc		       b5 d5		      lda	tt_envelope_index_c0,x
    313  74ce		       d9 ff f4 	      cmp	tt_InsReleaseIndexes-1,y	; -1 because instruments start with #1
    314  74d1		       d0 03		      bne	.noEndOfSustain
    315  74d3							; End of sustain: Go back to start of sustain
    316  74d3		       b9 fa f4 	      lda	tt_InsSustainIndexes-1,y	; -1 because instruments start with #1
    317  74d6				   .noEndOfSustain
    318  74d6		       a8		      tay
    319  74d7							; Set volume from envelope
    320  74d7		       b9 05 f5 	      lda	tt_InsFreqVolTable,y
    321  74da		       f0 01		      beq	.endOfEnvelope	; 0 means end of release has been reached:
    322  74dc		       c8		      iny		; advance index otherwise
    323  74dd				   .endOfEnvelope
    324  74dd		       94 d5		      sty	tt_envelope_index_c0,x
    325  74df		       95 59		      sta	AUDV0,x
    326  74e1							; Now adjust frequency with ADSR value from envelope
    327  74e1		       4a		      lsr
    328  74e2		       4a		      lsr
    329  74e3		       4a		      lsr
    330  74e4		       4a		      lsr
    331  74e5		       18		      clc
    332  74e6		       75 d7		      adc	tt_cur_ins_c0,x
    333  74e8		       38		      sec
    334  74e9		       e9 08		      sbc	#8
    335  74eb		       95 57		      sta	AUDF0,x
    336  74ed
    337  74ed				   .afterAudioUpdate
    338  74ed							; loop over channels
    339  74ed		       ca		      dex
    340  74ee		       10 97		      bpl	.updateLoop
    341  74f0
 Music player size:  $dd
    342  74f0					      echo	"Music player size: ", *-tt_PlayerStart
------- FILE BANK_INITBANK.asm
   1156  74f0		       60		      rts
   1157  74f1
------- FILE sound/intro1_trackdata.asm LEVEL 3 PASS 3
      0  74f1					      include	"sound/intro1_trackdata.asm"
      1  74f1							; TIATracker music player
      2  74f1							; Copyright 2016 Andre "Kylearan" Wichmann
      3  74f1							; Website: https://bitbucket.org/kylearan/tiatracker
      4  74f1							; Email: andre.wichmann@gmx.de
      5  74f1							;
      6  74f1							; Licensed under the Apache License, Version 2.0 (the "License");
      7  74f1							; you may not use this file except in compliance with the License.
      8  74f1							; You may obtain a copy of the License at
      9  74f1							;
     10  74f1							;   http://www.apache.org/licenses/LICENSE-2.0
     11  74f1							;
     12  74f1							; Unless required by applicable law or agreed to in writing, software
     13  74f1							; distributed under the License is distributed on an "AS IS" BASIS,
     14  74f1							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15  74f1							; See the License for the specific language governing permissions and
     16  74f1							; limitations under the License.
     17  74f1
     18  74f1							; Song author: 
     19  74f1							; Song name: 
     20  74f1
     21  74f1							; @com.wudsn.ide.asm.hardware=ATARI2600
     22  74f1
     23  74f1							; =====================================================================
     24  74f1							; TIATracker melodic and percussion instruments, patterns and sequencer
     25  74f1							; data.
     26  74f1							; =====================================================================
     27  74f1				   tt_TrackDataStart
     28  74f1
     29  74f1							; =====================================================================
     30  74f1							; Melodic instrument definitions (up to 7). tt_envelope_index_c0/1 hold
     31  74f1							; the index values into these tables for the current instruments played
     32  74f1							; in channel 0 and 1.
     33  74f1							; 
     34  74f1							; Each instrument is defined by:
     35  74f1							; - tt_InsCtrlTable: the AUDC value
     36  74f1							; - tt_InsADIndexes: the index of the start of the ADSR envelope as
     37  74f1							;	 defined in tt_InsFreqVolTable
     38  74f1							; - tt_InsSustainIndexes: the index of the start of the Sustain phase
     39  74f1							;	 of the envelope
     40  74f1							; - tt_InsReleaseIndexes: the index of the start of the Release phase
     41  74f1							; - tt_InsFreqVolTable: The AUDF frequency and AUDV volume values of
     42  74f1							;	 the envelope
     43  74f1							; =====================================================================
     44  74f1
     45  74f1							; Instrument master CTRL values
     46  74f1				   tt_InsCtrlTable
     47  74f1		       07 04 0c 04*	      dc.b	$07, $04, $0c, $04, $0c
     48  74f6
     49  74f6
     50  74f6							; Instrument Attack/Decay start indexes into ADSR tables.
     51  74f6				   tt_InsADIndexes
     52  74f6		       00 0e 0e 1e*	      dc.b	$00, $0e, $0e, $1e, $1e
     53  74fb
     54  74fb
     55  74fb							; Instrument Sustain start indexes into ADSR tables
     56  74fb				   tt_InsSustainIndexes
     57  74fb		       08 19 19 2b*	      dc.b	$08, $19, $19, $2b, $2b
     58  7500
     59  7500
     60  7500							; Instrument Release start indexes into ADSR tables
     61  7500							; Caution: Values are stored with an implicit -1 modifier! To get the
     62  7500							; real index, add 1.
     63  7500				   tt_InsReleaseIndexes
     64  7500		       09 1b 1b 2c*	      dc.b	$09, $1b, $1b, $2c, $2c
     65  7505
     66  7505
     67  7505							; AUDVx and AUDFx ADSR envelope values.
     68  7505							; Each byte encodes the frequency and volume:
     69  7505							; - Bits 7..4: Freqency modifier for the current note ([-8..7]),
     70  7505							;	 8 means no change. Bit 7 is the sign bit.
     71  7505							; - Bits 3..0: Volume
     72  7505							; Between sustain and release is one byte that is not used and
     73  7505							; can be any value.
     74  7505							; The end of the release phase is encoded by a 0.
     75  7505				   tt_InsFreqVolTable
     76  7505							; 0: Pizzicato bassb
     77  7505		       8a 8a 89 88*	      dc.b	$8a, $8a, $89, $88, $86, $85, $85, $84
     78  750d		       83 00 83 83*	      dc.b	$83, $00, $83, $83, $83, $00
     79  7513							; 1+2: Square2
     80  7513		       8c 8c 8b 89*	      dc.b	$8c, $8c, $8b, $89, $87, $85, $84, $83
     81  751b		       82 82 81 81*	      dc.b	$82, $82, $81, $81, $81, $00, $81, $00
     82  7523							; 3+4: Square
     83  7523		       85 85 85 85*	      dc.b	$85, $85, $85, $85, $84, $83, $83, $82
     84  752b		       82 82 81 81*	      dc.b	$82, $82, $81, $81, $81, $81, $00, $80
     85  7533		       00		      dc.b	$00
     86  7534
     87  7534
     88  7534
     89  7534							; =====================================================================
     90  7534							; Percussion instrument definitions (up to 15)
     91  7534							;
     92  7534							; Each percussion instrument is defined by:
     93  7534							; - tt_PercIndexes: The index of the first percussion frame as defined
     94  7534							;	 in tt_PercFreqTable and tt_PercCtrlVolTable
     95  7534							; - tt_PercFreqTable: The AUDF frequency value
     96  7534							; - tt_PercCtrlVolTable: The AUDV volume and AUDC values
     97  7534							; =====================================================================
     98  7534
     99  7534							; Indexes into percussion definitions signifying the first frame for
    100  7534							; each percussion in tt_PercFreqTable.
    101  7534							; Caution: Values are stored with an implicit +1 modifier! To get the
    102  7534							; real index, subtract 1.
    103  7534				   tt_PercIndexes
    104  7534		       01 0a 0c 	      dc.b	$01, $0a, $0c
    105  7537
    106  7537
    107  7537							; The AUDF frequency values for the percussion instruments.
    108  7537							; If the second to last value is negative (>=128), it means it's an
    109  7537							; "overlay" percussion, i.e. the player fetches the next instrument note
    110  7537							; immediately and starts it in the sustain phase next frame. (Needs
    111  7537							; TT_USE_OVERLAY)
    112  7537				   tt_PercFreqTable
    113  7537							; 0: Kick
    114  7537		       00 01 02 03*	      dc.b	$00, $01, $02, $03, $04, $05, $06, $87
    115  753f		       00		      dc.b	$00
    116  7540							; 1: HH
    117  7540		       80 00		      dc.b	$80, $00
    118  7542							; 2: Snare
    119  7542		       01 03 06 0e*	      dc.b	$01, $03, $06, $0e, $13, $11, $15, $14
    120  754a		       17 1b 00 	      dc.b	$17, $1b, $00
    121  754d
    122  754d
    123  754d							; The AUDCx and AUDVx volume values for the percussion instruments.
    124  754d							; - Bits 7..4: AUDC value
    125  754d							; - Bits 3..0: AUDV value
    126  754d							; 0 means end of percussion data.
    127  754d				   tt_PercCtrlVolTable
    128  754d							; 0: Kick
    129  754d		       ee ed ed eb*	      dc.b	$ee, $ed, $ed, $eb, $e9, $e8, $e8, $e6
    130  7555		       00		      dc.b	$00
    131  7556							; 1: HH
    132  7556		       87 00		      dc.b	$87, $00
    133  7558							; 2: Snare
    134  7558		       8b 8a 8a 8a*	      dc.b	$8b, $8a, $8a, $8a, $8a, $8a, $89, $88
    135  7560		       87 86 00 	      dc.b	$87, $86, $00
    136  7563
    137  7563
    138  7563
    139  7563							; =====================================================================
    140  7563							; Track definition
    141  7563							; The track is defined by:
    142  7563							; - tt_PatternX (X=0, 1, ...): Pattern definitions
    143  7563							; - tt_PatternPtrLo/Hi: Pointers to the tt_PatternX tables, serving
    144  7563							;	 as index values
    145  7563							; - tt_SequenceTable: The order in which the patterns should be played,
    146  7563							;	 i.e. indexes into tt_PatternPtrLo/Hi. Contains the sequences
    147  7563							;	 for all channels and sub-tracks. The variables
    148  7563							;	 tt_cur_pat_index_c0/1 hold an index into tt_SequenceTable for
    149  7563							;	 each channel.
    150  7563							;
    151  7563							; So tt_SequenceTable holds indexes into tt_PatternPtrLo/Hi, which
    152  7563							; in turn point to pattern definitions (tt_PatternX) in which the notes
    153  7563							; to play are specified.
    154  7563							; =====================================================================
    155  7563
    156  7563							; ---------------------------------------------------------------------
    157  7563							; Pattern definitions, one table per pattern. tt_cur_note_index_c0/1
    158  7563							; hold the index values into these tables for the current pattern
    159  7563							; played in channel 0 and 1.
    160  7563							;
    161  7563							; A pattern is a sequence of notes (one byte per note) ending with a 0.
    162  7563							; A note can be either:
    163  7563							; - Pause: Put melodic instrument into release. Must only follow a
    164  7563							;	 melodic instrument.
    165  7563							; - Hold: Continue to play last note (or silence). Default "empty" note.
    166  7563							; - Slide (needs TT_USE_SLIDE): Adjust frequency of last melodic note
    167  7563							;	 by -7..+7 and keep playing it
    168  7563							; - Play new note with melodic instrument
    169  7563							; - Play new note with percussion instrument
    170  7563							; - End of pattern
    171  7563							;
    172  7563							; A note is defined by:
    173  7563							; - Bits 7..5: 1-7 means play melodic instrument 1-7 with a new note
    174  7563							;	 and frequency in bits 4..0. If bits 7..5 are 0, bits 4..0 are
    175  7563							;	 defined as:
    176  7563							;	 - 0: End of pattern
    177  7563							;	 - [1..15]: Slide -7..+7 (needs TT_USE_SLIDE)
    178  7563							;	 - 8: Hold
    179  7563							;	 - 16: Pause
    180  7563							;	 - [17..31]: Play percussion instrument 1..15
    181  7563							;
    182  7563							; The tracker must ensure that a pause only follows a melodic
    183  7563							; instrument or a hold/slide.
    184  7563							; ---------------------------------------------------------------------
    185  7563		       00 1f	   TT_FREQ_MASK =	%00011111
    186  7563		       00 08	   TT_INS_HOLD =	8
    187  7563		       00 10	   TT_INS_PAUSE =	16
    188  7563		       00 11	   TT_FIRST_PERC =	17
    189  7563
    190  7563							; Intro left
    191  7563				   tt_pattern0
    192  7563		       11 08 3e 08*	      dc.b	$11, $08, $3e, $08, $12, $3e, $3e, $08
    193  756b		       13 08 3e 08*	      dc.b	$13, $08, $3e, $08, $12, $3e, $3e, $08
    194  7573		       11 08 3e 08*	      dc.b	$11, $08, $3e, $08, $12, $3e, $12, $3e
    195  757b		       13 08 3e 08*	      dc.b	$13, $08, $3e, $08, $12, $3e, $13, $08
    196  7583		       00		      dc.b	$00
    197  7584
    198  7584							; Intro2 L
    199  7584				   tt_pattern1
    200  7584		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $34, $08
    201  758c		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $34, $08
    202  7594		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $12, $34
    203  759c		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $13, $08
    204  75a4		       00		      dc.b	$00
    205  75a5
    206  75a5							; Intro2-fill L
    207  75a5				   tt_pattern2
    208  75a5		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $34, $08
    209  75ad		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $34, $08
    210  75b5		       11 08 34 08*	      dc.b	$11, $08, $34, $08, $12, $34, $12, $34
    211  75bd		       13 08 34 08*	      dc.b	$13, $08, $34, $08, $12, $34, $13, $08
    212  75c5		       00		      dc.b	$00
    213  75c6
    214  75c6							; Intro right
    215  75c6				   tt_pattern3
    216  75c6		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $6e, $08, $73, $08
    217  75ce		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $73, $08, $73, $08
    218  75d6		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $6e, $08, $b3, $08
    219  75de		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $b3, $08, $73, $08
    220  75e6		       00		      dc.b	$00
    221  75e7
    222  75e7							; Intro2 R
    223  75e7				   tt_pattern4
    224  75e7		       71 08 73 08*	      dc.b	$71, $08, $73, $08, $74, $08, $71, $08
    225  75ef		       6f 08 73 08*	      dc.b	$6f, $08, $73, $08, $b3, $08, $73, $08
    226  75f7		       b3 08 73 08*	      dc.b	$b3, $08, $73, $08, $b3, $08, $73, $08
    227  75ff		       71 08 73 08*	      dc.b	$71, $08, $73, $08, $74, $08, $71, $08
    228  7607		       00		      dc.b	$00
    229  7608
    230  7608
    231  7608
    232  7608
    233  7608							; Individual pattern speeds (needs TT_GLOBAL_SPEED = 0).
    234  7608							; Each byte encodes the speed of one pattern in the order
    235  7608							; of the tt_PatternPtr tables below.
    236  7608							; If TT_USE_FUNKTEMPO is 1, then the low nibble encodes
    237  7608							; the even speed and the high nibble the odd speed.
    238  7608				  -	      IF	TT_GLOBAL_SPEED = 0
    239  7608				  -tt_PatternSpeeds
    240  7608				  -%%PATTERNSPEEDS%%
    241  7608					      ENDIF
    242  7608
    243  7608
    244  7608							; ---------------------------------------------------------------------
    245  7608							; Pattern pointers look-up table.
    246  7608							; ---------------------------------------------------------------------
    247  7608				   tt_PatternPtrLo
    248  7608		       63 84 a5 c6	      dc.b	<tt_pattern0, <tt_pattern1, <tt_pattern2, <tt_pattern3
    249  760c		       e7		      dc.b	<tt_pattern4
    250  760d				   tt_PatternPtrHi
    251  760d		       f5 f5 f5 f5	      dc.b	>tt_pattern0, >tt_pattern1, >tt_pattern2, >tt_pattern3
    252  7611		       f5		      dc.b	>tt_pattern4
    253  7612
    254  7612
    255  7612							; ---------------------------------------------------------------------
    256  7612							; Pattern sequence table. Each byte is an index into the
    257  7612							; tt_PatternPtrLo/Hi tables where the pointers to the pattern
    258  7612							; definitions can be found. When a pattern has been played completely,
    259  7612							; the next byte from this table is used to get the address of the next
    260  7612							; pattern to play. tt_cur_pat_index_c0/1 hold the current index values
    261  7612							; into this table for channels 0 and 1.
    262  7612							; If TT_USE_GOTO is used, a value >=128 denotes a goto to the pattern
    263  7612							; number encoded in bits 6..0 (i.e. value AND %01111111).
    264  7612							; ---------------------------------------------------------------------
    265  7612				   tt_SequenceTable
    266  7612							; ---------- Channel 0 ----------
    267  7612		       00 00 01 02*	      dc.b	$00, $00, $01, $02, $80
    268  7617
    269  7617
    270  7617							; ---------- Channel 1 ----------
    271  7617		       03 04 03 04*	      dc.b	$03, $04, $03, $04, $85
    272  761c
    273  761c
 Track size:  $12b
    274  761c					      echo	"Track size: ", *-tt_TrackDataStart
------- FILE BANK_INITBANK.asm
   1159  761c
   1160  761c							;------------------------------------------------------------------------------
   1161  761c
   1162  761c
   1163  761c
   1164  761c
      0  761c					      CHECK_BANK_SIZE	"INITBANK"
      1  761c		       06 1c	   .TEMP      =	* - BANK_START
 INITBANK (2K) SIZE =  $61c , FREE= $1e4
      2  761c					      ECHO	"INITBANK", "(2K) SIZE = ", .TEMP, ", FREE=", ROM_BANK_SIZE - .TEMP
      3  761c				  -	      if	( .TEMP ) > ROM_BANK_SIZE
      4  761c				  -	      ECHO	"BANK OVERFLOW @ ", * - ORIGIN
      5  761c				  -	      ERR
      6  761c					      endif
------- FILE ./sokoboo.asm
    863  761c
    864  761c							; MUST BE LAST...
------- FILE BANK_FIXED.asm LEVEL 2 PASS 3
      0  761c					      include	"BANK_FIXED.asm"
      1  761c							;    Sokoboo - a Sokoban implementation
      2  761c							;    using a generic tile-based display engine for the Atari 2600
      3  761c							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  761c							;
      5  761c							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  761c							;
      7  761c							;    Code related to the generic tile-based display engine was developed by
      8  761c							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  761c							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  761c							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  761c							;
     12  761c							;    Code related to music and sound effects uses the TIATracker music player
     13  761c							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  761c							;    directory for Apache licensing details.
     15  761c							;
     16  761c							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  761c							;    See the copyright notices in the License directory for a list of level
     18  761c							;    contributors.
     19  761c							;
     20  761c							;    Except where otherwise indicated, this software is released under the
     21  761c							;    following licensing arrangement...
     22  761c							;
     23  761c							;    This program is free software: you can redistribute it and/or modify
     24  761c							;    it under the terms of the GNU General Public License as published by
     25  761c							;    the Free Software Foundation, either version 3 of the License, or
     26  761c							;    (at your option) any later version.
     27  761c							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  761c
     29  761c							;    This program is distributed in the hope that it will be useful,
     30  761c							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  761c							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  761c							;    GNU General Public License for more details.
     33  761c
     34  761c							;------------------------------------------------------------------------------
     35  761c							;###############################  FIXED BANK  #################################
     36  761c							;------------------------------------------------------------------------------
     37  761c
     38  761c
     39  761c				   ORIGIN     SET	FIXED_BANK
     40  761c
      0  761c					      NEWBANK	THE_FIXED_BANK
      1  7ff0 ????				      SEG	THE_FIXED_BANK
      2  7800					      ORG	ORIGIN
      3  7800					      RORG	$F000
      4  7800				   BANK_START SET	*
      5  7800				   THE_FIXED_BANK SET	ORIGIN / 2048
      6  7800				   ORIGIN     SET	ORIGIN + 2048
      7  7800				   _CURRENT_BANK SET	THE_FIXED_BANK
     42  7800					      RORG	$f800
     43  7800
     44  7800							;------------------------------------------------------------------------------
     45  7800
      0  7800					      DEFINE_SUBROUTINE	DrawTimeFromROM
      1  7800		       00 0f	   BANK_DrawTimeFromROM =	_CURRENT_BANK
      2  7800					      SUBROUTINE
      3  7800				   DrawTimeFromROM
     47  7800
     48  7800		       a9 09		      lda	#BANK_SCORING
     49  7802		       85 3e		      sta	SET_BANK_RAM
     50  7804		       20 a3 f2 	      jsr	DrawTime
     51  7807		       20 97 f2 	      jsr	DrawBCD_targetsRequired
     52  780a		       a5 be		      lda	ROM_Bank
     53  780c		       85 3f		      sta	SET_BANK
     54  780e		       60		      rts
     55  780f
     56  780f							;------------------------------------------------------------------------------
     57  780f
      0  780f					      DEFINE_SUBROUTINE	GetROMByte	;=23(A)
      1  780f		       00 0f	   BANK_GetROMByte =	_CURRENT_BANK
      2  780f					      SUBROUTINE
      3  780f				   GetROMByte
     59  780f
     60  780f							; a = ROM bank to retrieve
     61  780f							; y = page index
     62  780f							; ROM_Bank = bank to return to
     63  780f							; (Board_AddressR) = page
     64  780f							; out a = byte from (Board_AddressR)
     65  780f
     66  780f		       85 3f		      sta	SET_BANK	;3
     67  7811		       4c 16 f8 	      jmp	GetBoardCharacter2	;3+17(A)	 unconditional
     68  7814
     69  7814							;------------------------------------------------------------------------------
     70  7814
      0  7814					      DEFINE_SUBROUTINE	GetBoardCharacter	;=20(A)
      1  7814		       00 0f	   BANK_GetBoardCharacter =	_CURRENT_BANK
      2  7814					      SUBROUTINE
      3  7814				   GetBoardCharacter
     72  7814
     73  7814							; call from ROM bank
     74  7814							; switches back to ROM_Bank on exit
     75  7814
     76  7814							; pass A = bank containing character
     77  7814							; Y = x character position
     78  7814							; (Board_AddressR) points to character position
     79  7814							; returns character from board
     80  7814
     81  7814
     82  7814		       85 3e		      sta	SET_BANK_RAM	;3   switch to bank to read
     83  7816
     84  7816				   GetBoardCharacter2		;=17(A)
     85  7816
     86  7816		       b3 ba		      lax	(Board_AddressR),y	;5
     87  7818		       a4 be		      ldy	ROM_Bank	;3
     88  781a		       84 3f		      sty	SET_BANK	;3   switch back caller's bank
     89  781c		       60		      rts		;6   and go back
     90  781d
     91  781d							;---------------------------------------------------------------------------
     92  781d
      0  781d					      DEFINE_SUBROUTINE	PutBoardCharacter	;=21(A)
      1  781d		       00 0f	   BANK_PutBoardCharacter =	_CURRENT_BANK
      2  781d					      SUBROUTINE
      3  781d				   PutBoardCharacter
     94  781d
     95  781d		       86 3e		      stx	SET_BANK_RAM	; 3
     96  781f
     97  781f				   PutBoardCharacterSB		; =18
     98  781f		       91 bc		      sta	(Board_AddressW),y	; 6
     99  7821		       a5 be		      lda	ROM_Bank	; 3
    100  7823		       85 3f		      sta	SET_BANK	; 3
    101  7825		       60		      rts		; 6 = 21
    102  7826
    103  7826							;---------------------------------------------------------------------------
    104  7826
      0  7826					      DEFINE_SUBROUTINE	GetBoardCharacter__CALL_FROM_RAM__	;=61[-2](A)
      1  7826		       00 0f	   BANK_GetBoardCharacter__CALL_FROM_RAM__ =	_CURRENT_BANK
      2  7826					      SUBROUTINE
      3  7826				   GetBoardCharacter__CALL_FROM_RAM__
    106  7826
    107  7826		       a4 88		      ldy	POS_Y	;3
    108  7828
    109  7828		       a9 0e		      lda	#BANK_GetBoardAddressR	;
    110  782a		       85 3f		      sta	SET_BANK	;
    111  782c		       20 dd f0 	      jsr	GetBoardAddressR	;11+24[-2](A)
    112  782f
    113  782f
    114  782f							;DEFINE_SUBROUTINE PartialGetBoardCharacter ;=23
    115  782f
    116  782f		       85 3e		      sta	SET_BANK_RAM	;3
    117  7831		       a4 87		      ldy	POS_X	;3
    118  7833		       b3 ba		      lax	(Board_AddressR),y	;5
    119  7835		       a4 bf		      ldy	RAM_Bank	;3
    120  7837		       84 3e		      sty	SET_BANK_RAM	;3		 return to RAM caller
    121  7839		       60		      rts		;6		 and go back
    122  783a
    123  783a							;---------------------------------------------------------------------------
    124  783a
      0  783a					      DEFINE_SUBROUTINE	PutBoardCharacterFromRAM	;=71[-2]
      1  783a		       00 0f	   BANK_PutBoardCharacterFromRAM =	_CURRENT_BANK
      2  783a					      SUBROUTINE
      3  783a				   PutBoardCharacterFromRAM
    126  783a
    127  783a							; POS_Y  = row
    128  783a							; POS_Type = character to write
    129  783a							; POS_X     = column
    130  783a							; RAM_Bank = caller's bank
    131  783a
    132  783a		       a4 88		      ldy	POS_Y	;3
    133  783c
    134  783c		       a9 0e		      lda	#BANK_GetBoardAddressW	;
    135  783e		       85 3f		      sta	SET_BANK	;
    136  7840		       20 ea f0 	      jsr	GetBoardAddressW	;11+24[-2](A)
    137  7843
    138  7843		       86 3e		      stx	SET_BANK_RAM	;3
    139  7845
    140  7845		       a4 87		      ldy	POS_X	;3
    141  7847		       a5 8b		      lda	POS_Type	;3
    142  7849		       91 bc		      sta	(Board_AddressW),y	;6
    143  784b		       a4 bf		      ldy	RAM_Bank	;3
    144  784d		       84 3e		      sty	SET_BANK_RAM	;3 return to RAM caller
    145  784f		       60		      rts		;6
    146  7850
    147  7850
      0  7850					      DEFINE_SUBROUTINE	PutBoardCharacterFromROM
      1  7850		       00 0f	   BANK_PutBoardCharacterFromROM =	_CURRENT_BANK
      2  7850					      SUBROUTINE
      3  7850				   PutBoardCharacterFromROM
    149  7850		       48		      pha
    150  7851		       20 3a f8 	      jsr	PutBoardCharacterFromRAM
    151  7854		       68		      pla
    152  7855		       85 3f		      sta	SET_BANK
    153  7857		       60		      rts
    154  7858
    155  7858							;---------------------------------------------------------------------------
    156  7858
      0  7858					      DEFINE_SUBROUTINE	ProcessObjStack	; @31✅ called from Vector
      1  7858		       00 0f	   BANK_ProcessObjStack =	_CURRENT_BANK
      2  7858					      SUBROUTINE
      3  7858				   ProcessObjStack
    158  7858							; 15 minimum segtime abort
    159  7858
    160  7858		       ad 84 02 	      lda	INTIM	; 4
    161  785b		       c9 03		      cmp	#MINIMUM_SEGTIME	; 2
    162  785d		       90 31		      bcc	EarlyAbort	; 2(3)= 8
    163  785f							; => [31]+9+6rts = 46✅ on abort
    164  785f							; @0✅
    165  785f
    166  785f		       a5 82		      lda	ObjStackNum	; 3
    167  7861		       49 01		      eor	#1	; 2
    168  7863		       aa		      tax		; 2 = 7✅
    169  7864
    170  7864		       a5 c2		      lda	ObjIterator	; 3
    171  7866		       d5 83		      cmp	ObjStackPtr,x	; 5
    172  7868		       b0 24		      bcs	nextPhase	; 2/3 = 10/11[+11] ==> @22✅ on exit
    173  786a
    174  786a							; @17✅
    175  786a							; Process an object...
    176  786a							; Actual object code (the handlers) starts 82 cycles after previous segtime check!
    177  786a
    178  786a		       bc 35 f9 	      ldy	BankObjStack,x	; 4
    179  786d		       84 3e		      sty	SET_BANK_RAM	; 3 = 7
    180  786f
    181  786f		       aa		      tax		; 2
    182  7870		       bc 80 11 	      ldy	SortedObjPtr,x	; 4 = 6	      indirect object pointer list (sorted)
    183  7873
    184  7873		       b9 00 10 	      lda	ObjStackX,y	; 4
    185  7876		       85 87		      sta	POS_X	; 3
    186  7878		       b9 80 10 	      lda	ObjStackY,y	; 4
    187  787b		       85 88		      sta	POS_Y	; 3
    188  787d		       b9 00 11 	      lda	ObjStackVar,y	; 4
    189  7880		       85 8c		      sta	POS_VAR	; 3
    190  7882		       be 00 12 	      ldx	ObjStackType,y	; 4
    191  7885		       86 8b		      stx	POS_Type	; 3 = 28
    192  7887
    193  7887		       a9 0e		      lda	#BANK_VectorProcess	; 2
    194  7889		       85 3f		      sta	SET_BANK	; 3
    195  788b		       4c e4 f3 	      jmp	VectorProcess	; 3 = 8
    196  788e
    197  788e							; => [17]+7+6+28+8 = @64 entry to VectorProcess
    198  788e							; + 31 minimum timeout return
    199  788e							; = 95✅
    200  788e
    201  788e							;---------------------------------------------------------------------------
    202  788e							; Now process the blank stack.  This stack holds all the recently blanked squares
    203  788e							; and determines (and moves) BOXs or TARGETs into these squares.  The space vacated
    204  788e							; by these objects are added again to the blank stack.
    205  788e
    206  788e				   nextPhase		; +11✅ for exit from here
    207  788e
    208  788e		       e6 86		      inc	ScreenDrawPhase	;5		 obj/blank finished -- let the draw stuff proceed
    209  7890		       60	   EarlyAbort rts		;6
    210  7891
    211  7891							;---------------------------------------------------------------------------
    212  7891
      0  7891					      DEFINE_SUBROUTINE	SwitchObjects	; = 31 ✅
      1  7891		       00 0f	   BANK_SwitchObjects =	_CURRENT_BANK
      2  7891					      SUBROUTINE
      3  7891				   SwitchObjects
    214  7891
    215  7891							; The game loop has come to an end. The only possible "still happening" thing is the sort, which runs
    216  7891							; in parallel with other processes (objects, draw stack, etc). We may or may not want to wait for the
    217  7891							; sort to complete.  This code does all the checks needed to switch to the next game frame.
    218  7891
    219  7891		       ad 84 02 	      lda	INTIM	; 4
    220  7894		       c9 03		      cmp	#SEGTIME_SWITCHOBJECTS	; 2
    221  7896		       90 f8		      bcc	EarlyAbort	; 2(3) => [31]+(9)+6rts = 46✅ on abort
    222  7898
    223  7898							; If we're undertime, then abort. The sort will continue to run, and that's great. Only when
    224  7898							; we're at the throttle cutoff do we switch game-frames.
    225  7898
    226  7898
    227  7898
    228  7898							;		  ;sec
    229  7898							;		  lda Throttle			  ;3
    230  7898							;		  sbc #MAX_THROTTLE		  ;2
    231  7898							;	      ;    bcc EarlyAbort		   ;2/3 	   plenty of time left!
    232  7898							;		  sta Throttle			  ;3 = 10	  save fractional 'left over' bit
    233  7898
    234  7898
    235  7898							; Now that we have completed processing the object stack, we switch
    236  7898							; the stack bank pointers for the next time around.
    237  7898
    238  7898		       a5 82		      lda	ObjStackNum	;3
    239  789a		       49 01		      eor	#1	;2
    240  789c		       aa		      tax		;2
    241  789d		       86 82		      stx	ObjStackNum	;3 = 10	 swap stacks @here
    242  789f
    243  789f							; Initialise the iterator and stack pointer for next time around.
    244  789f							; Previously the stack pointer auto-initialised by popping the stack. Now we have an iterator it's
    245  789f							; necessary to initialise both.
    246  789f
    247  789f		       a0 00		      ldy	#0	;2
    248  78a1		       84 c2		      sty	ObjIterator	;3
    249  78a3		       94 83		      sty	ObjStackPtr,x	;4
    250  78a5
    251  78a5		       84 86		      sty	ScreenDrawPhase	;3
    252  78a7		       60		      rts		;6
    253  78a8
    254  78a8							;---------------------------------------------------------------------------
    255  78a8
    256  78a8		       60	   EarlyAbort4 rts
    257  78a9
      0  78a9					      DEFINE_SUBROUTINE	PROCESS_MAN
      1  78a9		       00 0f	   BANK_PROCESS_MAN =	_CURRENT_BANK
      2  78a9					      SUBROUTINE
      3  78a9				   PROCESS_MAN
    259  78a9
    260  78a9		       ad 84 02 	      lda	INTIM	; 3
    261  78ac		       c9 16		      cmp	#SEGTIME_MAN	; 2
    262  78ae		       90 f8		      bcc	EarlyAbort4	; 2/3 = 7 + 6rts = 13✅ on abort
    263  78b0
    264  78b0		       a9 0e		      lda	#BANK_ManProcess
    265  78b2		       85 be		      sta	ROM_Bank
    266  78b4		       85 3f		      sta	SET_BANK
    267  78b6		       20 d0 f1 	      jsr	ManProcess
    268  78b9
    269  78b9
    270  78b9		       a9 ff		      lda	#-1
    271  78bb		       85 91		      sta	TB_CHAR	; pre-set box takeback to NONE
    272  78bd							;sta BufferedJoystick
    273  78bd
    274  78bd		       20 37 f9 	      jsr	MovePlayer
    275  78c0
    276  78c0		       a5 a1	   DoNothing  lda	ManMode
    277  78c2		       c9 07		      cmp	#MANMODE_NEXTLEVEL	; kludge
    278  78c4		       b0 08		      bcs	notComplete
    279  78c6		       a5 b4		      lda	BCD_targetsRequired
    280  78c8		       d0 04		      bne	notComplete
    281  78ca		       a9 07		      lda	#MANMODE_NEXTLEVEL
    282  78cc		       85 a1		      sta	ManMode
    283  78ce				   notComplete
    284  78ce
    285  78ce		       a9 00		      lda	#BANK_TrackPlayer	;
    286  78d0		       85 3f		      sta	SET_BANK	;
    287  78d2		       20 77 f4 	      jsr	TrackPlayer	;11+145
    288  78d5
    289  78d5		       a9 00		      lda	#TYPE_MAN	; 2
    290  78d7		       85 8b		      sta	POS_Type	; 3
    291  78d9
    292  78d9		       20 07 f9 	      jsr	InsertObjectStack	; 6+76(B)	    re-insert man (POS X/Y DOESN'T MATTER)
    293  78dc
    294  78dc		       a9 ff		      lda	#$FF
    295  78de		       85 92		      sta	BufferedJoystick
    296  78e0
    297  78e0		       4c fc f8    gnobj      jmp	NextObject
    298  78e3
    299  78e3							;---------------------------------------------------------------------------
    300  78e3
      0  78e3					      DEFINE_SUBROUTINE	PutCharacterAtXY
      1  78e3		       00 0f	   BANK_PutCharacterAtXY =	_CURRENT_BANK
      2  78e3					      SUBROUTINE
      3  78e3				   PutCharacterAtXY
    302  78e3
    303  78e3							; POS_X	 character location
    304  78e3							; POS_Y
    305  78e3							; POS_VAR	 character to put on board
    306  78e3							; ROM_Bank	 ROM bank to return to
    307  78e3
    308  78e3		       a4 88		      ldy	POS_Y
    309  78e5
    310  78e5		       a9 0e		      lda	#BANK_GetBoardAddressW
    311  78e7		       85 3f		      sta	SET_BANK
    312  78e9		       20 ea f0 	      jsr	GetBoardAddressW
    313  78ec		       86 3e		      stx	SET_BANK_RAM
    314  78ee
    315  78ee		       a4 87		      ldy	POS_X
    316  78f0		       a5 8c		      lda	POS_VAR
    317  78f2		       91 bc		      sta	(Board_AddressW),y
    318  78f4
    319  78f4		       a5 be		      lda	ROM_Bank
    320  78f6		       85 3f		      sta	SET_BANK
    321  78f8		       60		      rts
    322  78f9
    323  78f9							;---------------------------------------------------------------------------
    324  78f9
    325  78f9							; IF the creature runs out of time to do stuff, then rts HOWEVER the creature must eventually do something
    326  78f9							;  as it will be continually called in available time-slices until it does. This can lockup the system.
    327  78f9
    328  78f9							; if the creature is done, and is alive next cycle, then jump ReInsertObject
    329  78f9
    330  78f9							; if the creature dies then jump NextObject
    331  78f9
    332  78f9
    333  78f9		       20 07 f9    ReInsertObject jsr	InsertObjectStack	; 6+76(B)  = 98 (if jumping here)	  place on stack so it keeps moving
    334  78fc
    335  78fc		       e6 c2	   NextObject inc	ObjIterator	; 5
    336  78fe							;		  dec ObjStackPtr,x		  ; 6
    337  78fe		       60		      rts		;jmp ProcessObjStack		  ; 3 = 16	 ; DON'T chain, instead return
    338  78ff							; let the segtime stuff do its job!
    339  78ff
    340  78ff							;---------------------------------------------------------------------------
    341  78ff
      0  78ff					      DEFINE_SUBROUTINE	InsertObjectStackFromRAM	;=94(B)
      1  78ff		       00 0f	   BANK_InsertObjectStackFromRAM =	_CURRENT_BANK
      2  78ff					      SUBROUTINE
      3  78ff				   InsertObjectStackFromRAM
    343  78ff
    344  78ff		       20 07 f9 	      jsr	InsertObjectStack	;6+76(B)
    345  7902		       a5 bf		      lda	RAM_Bank	;3
    346  7904		       85 3e		      sta	SET_BANK_RAM	;3
    347  7906
    348  7906		       60	   NotEnoughTime rts		;6
    349  7907
    350  7907							;---------------------------------------------------------------------------
    351  7907
      0  7907					      DEFINE_SUBROUTINE	InsertObjectStack	;=81(B)
      1  7907		       00 0f	   BANK_InsertObjectStack =	_CURRENT_BANK
      2  7907					      SUBROUTINE
      3  7907				   InsertObjectStack
    353  7907							; POS_X     x position
    354  7907							; POS_Y     y position
    355  7907							; POS_VAR   direction or other variable
    356  7907							; POS_Type  type of object
    357  7907
    358  7907		       a6 82		      ldx	ObjStackNum	; 3
    359  7909		       bc 35 f9 	      ldy	BankObjStack,x	; 4
    360  790c		       84 3e		      sty	SET_BANK_RAM	; 3
    361  790e		       b4 83		      ldy	ObjStackPtr,x	; 4 = 14
    362  7910
    363  7910
    364  7910		       a5 88		      lda	POS_Y	; 3
    365  7912		       99 80 14 	      sta	ObjStackY+RAM_WRITE,y	; 5
    366  7915		       a5 87		      lda	POS_X	; 3
    367  7917		       99 00 14 	      sta	ObjStackX+RAM_WRITE,y	; 5
    368  791a		       a5 8c		      lda	POS_VAR	; 3
    369  791c		       99 00 15 	      sta	ObjStackVar+RAM_WRITE,y	; 5
    370  791f		       a5 8b		      lda	POS_Type	; 3
    371  7921		       99 00 16 	      sta	ObjStackType+RAM_WRITE,y	; 5 = 32
    372  7924
    373  7924							; Nice addition limits overflow of the stack, BUT always reserves a spot for the man.
    374  7924							; Objects are unceremoniously dumped when there's not enough space.  This is just trying to cater
    375  7924							; for a no-win situation. Try and preserve the player at the cost of correct gameplay. Avoid crashing.
    376  7924
    377  7924
    378  7924				  -	      IF	TYPE_MAN != 0
    379  7924				  -	      cmp	#TYPE_MAN	; 2
    380  7924					      ENDIF
    381  7924		       f0 04		      beq	alwaysAllowMan	; 2/3
    382  7926
    383  7926		       c0 7e		      cpy	#OBJ_STACK_SIZE-2	; 2	     reserve 1 last-gasp slot for man only
    384  7928		       b0 06		      bcs	insertDone	; 2/3= 6    no room -- drop object
    385  792a				   alwaysAllowMan
    386  792a
    387  792a		       98		      tya		; 2
    388  792b		       99 80 15 	      sta	SortedObjPtr+RAM_WRITE,y	; 5	     indirection pointer for later sorting
    389  792e
    390  792e		       f6 83		      inc	ObjStackPtr,x	; 7	     overflow is assumed not to happen!
    391  7930
    392  7930		       a4 be	   insertDone ldy	ROM_Bank	; 3
    393  7932		       84 3f		      sty	SET_BANK	; 3
    394  7934
    395  7934				   ManIsDead2
    396  7934
    397  7934
    398  7934
    399  7934		       60		      rts		; 6 = 29
    400  7935
    401  7935							;---------------------------------------------------------------------------
    402  7935
    403  7935		       0b 0c	   BankObjStack .byte.b	BANK_OBJSTACK, BANK_OBJSTACK2
    404  7937
    405  7937							;---------------------------------------------------------------------------
    406  7937
      0  7937					      DEFINE_SUBROUTINE	MovePlayer
      1  7937		       00 0f	   BANK_MovePlayer =	_CURRENT_BANK
      2  7937					      SUBROUTINE
      3  7937				   MovePlayer
    408  7937
    409  7937		       a4 8a		      ldy	POS_Y_NEW
    410  7939
    411  7939		       a9 0e		      lda	#BANK_GetBoardAddressRW	;2
    412  793b		       85 3f		      sta	SET_BANK	;3
    413  793d		       20 ca f0 	      jsr	GetBoardAddressRW	;6+32[-2]
    414  7940							;    IF MULTI_BANK_BOARD = YES
    415  7940							;		  stx RAM_Bank
    416  7940							;    ENDIF
    417  7940		       86 3e		      stx	SET_BANK_RAM	; 3
    418  7942
    419  7942		       a4 89		      ldy	POS_X_NEW
    420  7944		       b3 ba		      lax	(Board_AddressR),y
    421  7946
    422  7946		       a9 0e		      lda	#BANK_MoveVecLO
    423  7948		       85 3f		      sta	SET_BANK
    424  794a
    425  794a		       bd f3 f3 	      lda	MoveVecLO,x
    426  794d		       85 db		      sta	MAN_Move
    427  794f		       bd 03 f4 	      lda	MoveVecHI,x
    428  7952		       85 dc		      sta	MAN_Move+1
    429  7954
    430  7954							;    IF MULTI_BANK_BOARD = YES
    431  7954							;		  lda RAM_Bank
    432  7954							;    ELSE
    433  7954		       a9 0d		      lda	#BANK_BOARD
    434  7956							;    ENDIF
    435  7956		       85 3e		      sta	SET_BANK_RAM
    436  7958		       6c db 00 	      jmp	(MAN_Move)
    437  795b
    438  795b							;---------------------------------------------------------------------------
    439  795b
      0  795b					      DEFINE_SUBROUTINE	RecordTakeBackPosition
      1  795b		       00 0f	   BANK_RecordTakeBackPosition =	_CURRENT_BANK
      2  795b					      SUBROUTINE
      3  795b				   RecordTakeBackPosition
    441  795b
    442  795b							; Pass...
    443  795b							; TB_X 	 the man's position before he moved
    444  795b							; TB_Y
    445  795b							; TB_CHAR	 if -1 then there is no box push involved, else..
    446  795b							;		 holds the character that was under the box in its new position
    447  795b							; TB_PUSHX	 Position of pushed box AFTER it is pushed
    448  795b							; TB_PUSHY
    449  795b
    450  795b							; On making a move,
    451  795b							; man's position before move --> TB_X,TB_Y
    452  795b							; TB_CHAR = -1
    453  795b							; IF a box was pushed,
    454  795b							;   TB_CHAR = character under the box's new position (i.e., restoration char)
    455  795b							;   box's new position --> TB_PUSHX, TB_PUSHY
    456  795b							; ENDIF
    457  795b							; BCD_moveCounter++
    458  795b
    459  795b		       a5 b9		      lda	TakebackInhibit
    460  795d		       d0 2e		      bne	noLog
    461  795f
    462  795f		       a9 0e		      lda	#BANK_TAKEBACK
    463  7961		       85 3e		      sta	SET_BANK_RAM
    464  7963
    465  7963		       a6 b7		      ldx	takebackIndex
    466  7965
    467  7965		       a5 8d		      lda	TB_X
    468  7967		       9d 00 14 	      sta	RAM_WRITE+TakeBackPreviousX,x
    469  796a		       a5 8e		      lda	TB_Y
    470  796c		       9d 40 14 	      sta	RAM_WRITE+TakeBackPreviousY,x
    471  796f		       a5 91		      lda	TB_CHAR
    472  7971		       9d 00 15 	      sta	RAM_WRITE+TakeBackPushChar,x
    473  7974
    474  7974							; if TB_CHAR is -1 that means there is no box component, and the following values are random
    475  7974
    476  7974		       a5 8f		      lda	TB_PUSHX
    477  7976		       9d 80 14 	      sta	RAM_WRITE+TakeBackPushX,x
    478  7979		       a5 90		      lda	TB_PUSHY
    479  797b		       9d c0 14 	      sta	RAM_WRITE+TakeBackPushY,x
    480  797e
    481  797e		       a5 be		      lda	ROM_Bank
    482  7980		       85 3f		      sta	SET_BANK
    483  7982
    484  7982							; fall through
    485  7982
      0  7982					      DEFINE_SUBROUTINE	IncrementMoveCount
      1  7982		       00 0f	   BANK_IncrementMoveCount =	_CURRENT_BANK
      2  7982					      SUBROUTINE
      3  7982				   IncrementMoveCount
    487  7982		       a9 0e		      lda	#BANK_IMC
    488  7984		       85 3f		      sta	SET_BANK
    489  7986		       20 c1 f3 	      jsr	IMC
    490  7989		       a5 be		      lda	ROM_Bank
    491  798b		       85 3f		      sta	SET_BANK
    492  798d
    493  798d		       a9 00	   noLog      lda	#0
    494  798f		       85 b9		      sta	TakebackInhibit
    495  7991		       60		      rts
    496  7992
    497  7992							;---------------------------------------------------------------------------
    498  7992
      0  7992					      DEFINE_SUBROUTINE	MOVE_BLANK
      1  7992		       00 0f	   BANK_MOVE_BLANK =	_CURRENT_BANK
      2  7992					      SUBROUTINE
      3  7992				   MOVE_BLANK
      0  7992					      DEFINE_SUBROUTINE	MOVE_SOIL
      1  7992		       00 0f	   BANK_MOVE_SOIL =	_CURRENT_BANK
      2  7992					      SUBROUTINE
      3  7992				   MOVE_SOIL
      0  7992					      DEFINE_SUBROUTINE	MOVE_TARGET
      1  7992		       00 0f	   BANK_MOVE_TARGET =	_CURRENT_BANK
      2  7992					      SUBROUTINE
      3  7992				   MOVE_TARGET
    502  7992
    503  7992		       8a		      txa		; character man will be standing on
    504  7993		       48		      pha
    505  7994
    506  7994		       a9 ff		      lda	#$FF
    507  7996		       85 92		      sta	BufferedJoystick
    508  7998
    509  7998
    510  7998		       a5 a6		      lda	ManAnimationID
    511  799a		       c9 08		      cmp	#ANIMATION_PUSH_ID
    512  799c		       d0 0c		      bne	immediate
    513  799e
    514  799e		       e6 a8		      inc	idleCount
    515  79a0		       a5 a8		      lda	idleCount
    516  79a2		       c9 0a		      cmp	#10
    517  79a4		       90 22		      bcc	walkingOK
    518  79a6		       a9 00		      lda	#0
    519  79a8		       85 a8		      sta	idleCount
    520  79aa
    521  79aa				   immediate
    522  79aa		       a5 a6		      lda	ManAnimationID
    523  79ac		       c9 00		      cmp	#ANIMATION_WALK_ID
    524  79ae		       f0 18		      beq	walkingOK
    525  79b0		       c9 12		      cmp	#ANIMATION_WALK2_ID
    526  79b2		       f0 14		      beq	walkingOK
    527  79b4		       a9 00		      lda	#ANIMATION_WALK_ID
    528  79b6		       85 a6		      sta	ManAnimationID
      0  79b8					      LOAD_ANIMATION	WALK
      1  79b8		       a9 18		      lda	#<Animation_WALK
      2  79ba		       85 9a		      sta	animation
      3  79bc		       a9 f0		      lda	#>Animation_WALK
      4  79be		       85 9b		      sta	animation+1
      5  79c0		       a9 00		      lda	#0
      6  79c2		       85 9c		      sta	animation_delay
      7  79c4		       a9 00		      lda	#ANIMATION_WALK_ID
      8  79c6		       85 a6		      sta	ManAnimationID
    530  79c8				   walkingOK
    531  79c8
    532  79c8		       a5 9d		      lda	ManX
    533  79ca		       85 87		      sta	POS_X
    534  79cc		       85 8d		      sta	TB_X
    535  79ce		       a5 9e		      lda	ManY
    536  79d0		       85 88		      sta	POS_Y
    537  79d2		       85 8e		      sta	TB_Y
    538  79d4		       20 e3 f8 	      jsr	PutCharacterAtXY	; RESTORE (previous XY) under-man character
    539  79d7
    540  79d7		       a5 89		      lda	POS_X_NEW
    541  79d9		       85 9d		      sta	ManX
    542  79db		       85 87		      sta	POS_X
    543  79dd		       a5 8a		      lda	POS_Y_NEW
    544  79df		       85 9e		      sta	ManY
    545  79e1		       85 88		      sta	POS_Y
    546  79e3		       a9 05		      lda	#CHARACTER_MANOCCUPIED
    547  79e5		       85 8c		      sta	POS_VAR
    548  79e7		       20 e3 f8 	      jsr	PutCharacterAtXY
    549  79ea
    550  79ea							; TB_X 	 the man's position before he moved
    551  79ea							; TB_Y
    552  79ea							; TB_CHAR	 if -1 then there is no box push involved, else..
    553  79ea							;		 holds the character that was under the box in its new position
    554  79ea							;		 this can be inferred by the box character (ONTARGET)
    555  79ea							; TB_PUSHX	 Position of pushed box AFTER it is pushed
    556  79ea							; TB_PUSHY
    557  79ea
    558  79ea		       20 5b f9 	      jsr	RecordTakeBackPosition
    559  79ed
    560  79ed		       68		      pla
    561  79ee		       85 8c		      sta	POS_VAR	; save 'restore' character
    562  79f0
    563  79f0		       a9 00	   MOVE_GENERIC lda	#0	; 2
    564  79f2		       85 a4		      sta	ManPushCounter	; 3
    565  79f4		       60		      rts		; 6 = 11
    566  79f5
    567  79f5							;---------------------------------------------------------------------------
    568  79f5							; takeback buffer empty - flash red
    569  79f5
    570  79f5		       a6 80	   noMovesToTake ldx	Platform
    571  79f7		       bd 01 fa 	      lda	redColour,x
    572  79fa		       85 b0		      sta	BGColour
    573  79fc		       a9 08		      lda	#8
    574  79fe		       85 c0		      sta	ColourTimer
    575  7a00		       60		      rts
    576  7a01
    577  7a01		       32 32 62 62 redColour  .byte.b	$32, $32, $62, $62
    578  7a05
    579  7a05							;---------------------------------------------------------------------------
    580  7a05
      0  7a05					      DEFINE_SUBROUTINE	MOVE_BOX
      1  7a05		       00 0f	   BANK_MOVE_BOX =	_CURRENT_BANK
      2  7a05					      SUBROUTINE
      3  7a05				   MOVE_BOX
    582  7a05
    583  7a05		       a2 00		      ldx	#CHARACTER_BLANK	; restoration character
    584  7a07		       a9 0e		      lda	#BANK_PushBox
    585  7a09		       85 3f		      sta	SET_BANK
    586  7a0b		       4c 2c f1 	      jmp	PushBox
    587  7a0e
      0  7a0e					      DEFINE_SUBROUTINE	MOVE_BOX_ON_TARGET
      1  7a0e		       00 0f	   BANK_MOVE_BOX_ON_TARGET =	_CURRENT_BANK
      2  7a0e					      SUBROUTINE
      3  7a0e				   MOVE_BOX_ON_TARGET
    589  7a0e
    590  7a0e		       a2 03		      ldx	#CHARACTER_TARGET	; restoration character
    591  7a10		       a9 0e		      lda	#BANK_PushBox
    592  7a12		       85 3f		      sta	SET_BANK
    593  7a14		       4c 2c f1 	      jmp	PushBox
    594  7a17
    595  7a17							;---------------------------------------------------------------------------
    596  7a17
      0  7a17					      DEFINE_SUBROUTINE	takebackRestoreEarlierPosition
      1  7a17		       00 0f	   BANK_takebackRestoreEarlierPosition =	_CURRENT_BANK
      2  7a17					      SUBROUTINE
      3  7a17				   takebackRestoreEarlierPosition
    598  7a17
    599  7a17
    600  7a17							; on reverting a move
    601  7a17							; IF BCD_moveCounter > 0
    602  7a17							;   BCD_moveCounter--
    603  7a17							;   IF TakeBackPushChar != -1
    604  7a17							;	 //restore the character under box (and remove box)
    605  7a17							;	 board[TakeBackPreviousX,TakeBackPreviousY] = TakeBackPushChar
    606  7a17							;   ENDIF
    607  7a17							; // We will "fix" any box going back on the board through the man's restoration char
    608  7a17							; board[ManX,ManY] = POS_VAR
    609  7a17							; POS_VAR = board[TakeBackX,TakeBackY]
    610  7a17							; board[TakeBackX,TakeBackY] = MANOCCUPIED
    611  7a17							; ManX,ManY = TakeBackX, TakeBackY
    612  7a17
    613  7a17		       a6 b7		      ldx	takebackIndex
    614  7a19		       e4 b8		      cpx	takebackBaseIndex
    615  7a1b		       f0 d8		      beq	noMovesToTake
    616  7a1d
    617  7a1d		       e6 b9		      inc	TakebackInhibit	; non-zero
    618  7a1f
    619  7a1f		       ca		      dex
    620  7a20		       8a		      txa
    621  7a21		       29 3f		      and	#TAKEBACK_MASK
    622  7a23		       85 b7		      sta	takebackIndex
    623  7a25		       aa		      tax
    624  7a26
    625  7a26		       f8		      sed
    626  7a27		       38		      sec
    627  7a28		       a5 b5		      lda	BCD_moveCounter
    628  7a2a		       e9 01		      sbc	#1
    629  7a2c		       85 b5		      sta	BCD_moveCounter
    630  7a2e		       a5 b6		      lda	BCD_moveCounter+1
    631  7a30		       e9 00		      sbc	#0
    632  7a32		       85 b6		      sta	BCD_moveCounter+1
    633  7a34		       d8		      cld
    634  7a35
    635  7a35				  -	      if	0
    636  7a35				  -	      lda	Platform
    637  7a35				  -	      clc
    638  7a35				  -	      adc	#8
    639  7a35				  -	      sta	BGColour	;ColourFlash		      ; yellow flash
    640  7a35				  -	      lda	#3
    641  7a35				  -	      sta	ColourTimer
    642  7a35					      endif
    643  7a35
    644  7a35		       a9 0e		      lda	#BANK_TAKEBACK
    645  7a37		       85 3e		      sta	SET_BANK_RAM
    646  7a39
    647  7a39							; TB_X 	 the man's position before he moved
    648  7a39							; TB_Y
    649  7a39							; TB_CHAR	 if -1 then there is no box push involved, else..
    650  7a39							;		 holds the character that was under the box in its new position
    651  7a39							; TB_PUSHX	 Position of pushed box AFTER it is pushed
    652  7a39							; TB_PUSHY
    653  7a39
    654  7a39							;	 //restore the character under box (and remove box)
    655  7a39							;	 board[TakeBackPreviousX,TakeBackPreviousY] = TakeBackPushChar
    656  7a39
    657  7a39		       a5 8c		      lda	POS_VAR
    658  7a3b		       48		      pha
    659  7a3c
    660  7a3c		       a6 b7		      ldx	takebackIndex
    661  7a3e		       bd 00 11 	      lda	TakeBackPushChar,x
    662  7a41		       30 29		      bmi	noPushInvolved	; -1 = no box
    663  7a43
    664  7a43		       85 8c		      sta	POS_VAR
    665  7a45		       c9 03		      cmp	#CHARACTER_TARGET
    666  7a47		       f0 04		      beq	isaTarget
    667  7a49		       c9 04		      cmp	#CHARACTER_TARGET2
    668  7a4b		       d0 03		      bne	notTarget1
    669  7a4d		       20 3e fd    isaTarget  jsr	RegisterTarget
    670  7a50				   notTarget1
    671  7a50
    672  7a50
    673  7a50		       bd 80 10 	      lda	TakeBackPushX,x
    674  7a53		       85 87		      sta	POS_X
    675  7a55		       bd c0 10 	      lda	TakeBackPushY,x
    676  7a58		       85 88		      sta	POS_Y
    677  7a5a
    678  7a5a		       20 e3 f8 	      jsr	PutCharacterAtXY	; fixup BOX!
    679  7a5d
    680  7a5d		       68		      pla
    681  7a5e		       f0 07		      beq	blnkre
    682  7a60		       20 48 fd 	      jsr	DeRegisterTarget
    683  7a63		       a9 0a		      lda	#CHARACTER_BOX_ON_TARGET
    684  7a65		       d0 02		      bne	skls
    685  7a67		       a9 02	   blnkre     lda	#CHARACTER_BOX
    686  7a69		       85 8c	   skls       sta	POS_VAR
    687  7a6b
    688  7a6b		       48		      pha
    689  7a6c
    690  7a6c		       68	   noPushInvolved pla		; man's replacement char
    691  7a6d		       85 8c		      sta	POS_VAR
    692  7a6f
    693  7a6f							; // We will "fix" any box going back on the board through the man's restoration char
    694  7a6f							; board[ManX,ManY] = POS_VAR
    695  7a6f							; POS_VAR = board[TakeBackX,TakeBackY]
    696  7a6f							; board[TakeBackX,TakeBackY] = MANOCCUPIED
    697  7a6f							; ManX,ManY = TakeBackX, TakeBackY
    698  7a6f
    699  7a6f		       a5 9d		      lda	ManX
    700  7a71		       85 87		      sta	POS_X
    701  7a73		       a5 9e		      lda	ManY
    702  7a75		       85 88		      sta	POS_Y
    703  7a77		       20 e3 f8 	      jsr	PutCharacterAtXY	; put what man was on... back
    704  7a7a
    705  7a7a
    706  7a7a		       a9 0e		      lda	#BANK_TAKEBACK
    707  7a7c		       85 3e		      sta	SET_BANK_RAM
    708  7a7e
    709  7a7e		       a6 b7		      ldx	takebackIndex
    710  7a80		       bd 00 10 	      lda	TakeBackPreviousX,x
    711  7a83		       85 89		      sta	POS_X_NEW
    712  7a85		       85 9d		      sta	ManX
    713  7a87		       bd 40 10 	      lda	TakeBackPreviousY,x
    714  7a8a		       85 8a		      sta	POS_Y_NEW
    715  7a8c		       85 9e		      sta	ManY
    716  7a8e
    717  7a8e							; Grab the character from the board at man's location and use as "restore character" for man
    718  7a8e							; POS_VAR = board[takebackx,takebacky]
    719  7a8e
    720  7a8e		       a9 0e		      lda	#BANK_GetBoardAddressR
    721  7a90		       85 3f		      sta	SET_BANK
    722  7a92		       a4 8a		      ldy	POS_Y_NEW
    723  7a94		       20 dd f0 	      jsr	GetBoardAddressR
    724  7a97		       85 3e		      sta	SET_BANK_RAM
    725  7a99
    726  7a99		       a4 89		      ldy	POS_X_NEW
    727  7a9b		       b1 ba		      lda	(Board_AddressR),y
    728  7a9d							;pha
    729  7a9d							;lda #CHARACTER_MANOCCUPIED
    730  7a9d							;sta POS_VAR
    731  7a9d							;jsr PutCharacterAtXY		 ????
    732  7a9d							;pla
    733  7a9d		       85 8c		      sta	POS_VAR
    734  7a9f
    735  7a9f		       a5 be		      lda	ROM_Bank
    736  7aa1		       85 3f		      sta	SET_BANK
    737  7aa3
    738  7aa3		       60	   timeExit   rts
    739  7aa4
    740  7aa4							;---------------------------------------------------------------------------
    741  7aa4
      0  7aa4					      DEFINE_SUBROUTINE	StealCharDraw	; in FIXED_BANK
      1  7aa4		       00 0f	   BANK_StealCharDraw =	_CURRENT_BANK
      2  7aa4					      SUBROUTINE
      3  7aa4				   StealCharDraw
    743  7aa4
    744  7aa4		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
    745  7aa6		       85 3e		      sta	SET_BANK_RAM	; 3
    746  7aa8		       a4 81		      ldy	DrawStackPointer	; 3	     MUST have been set by BuildDrawStack!
    747  7aaa		       10 35		      bpl	EnterStealCharDraw	; 2(3) = 10(11)
    748  7aac
    749  7aac				   ExitStealCharDraw
    750  7aac
    751  7aac							; fall through...
    752  7aac
    753  7aac							;---------------------------------------------------------------------------
    754  7aac
      0  7aac					      DEFINE_SUBROUTINE	TimeSlice
      1  7aac		       00 0f	   BANK_TimeSlice =	_CURRENT_BANK
      2  7aac					      SUBROUTINE
      3  7aac				   TimeSlice
    756  7aac
    757  7aac							; FIRST check the time is sufficient for the smallest of the timeslices. Not much point
    758  7aac							; going ahead if there's insufficient time. This allows the previous character drawing to
    759  7aac							; be much smaller in time, as they don't have to include the timeslice code overhead.
    760  7aac
    761  7aac		       ad 84 02 	      lda	INTIM	; 4
    762  7aaf		       c9 03		      cmp	#SEGTIME_MINIMUM_TIMESLICE	; 2
    763  7ab1		       90 f0		      bcc	timeExit	; 2(3)
    764  7ab3							; @0✅
    765  7ab3
    766  7ab3							; Uses the phase variable to vector to the correct processing code for the given timeslice
    767  7ab3							; Code may be in any bank. Avoid the fixed bank at all costs!	Once a section is complete
    768  7ab3							; it should increment ScreenDrawPhase.
    769  7ab3
    770  7ab3							; Switched-in bank(s) are undefined after this function is called!
    771  7ab3
    772  7ab3		       a9 00		      lda	#BANK_TS_PhaseVectorLO	; 2
    773  7ab5		       85 3f		      sta	SET_BANK	; 3 = 5
    774  7ab7
    775  7ab7		       a6 86		      ldx	ScreenDrawPhase	; 3		 current phase of drawing
    776  7ab9		       bd b2 f4 	      lda	TS_PhaseVectorLO,x	; 4
    777  7abc		       85 db		      sta	TS_Vector	; 3
    778  7abe		       bd b7 f4 	      lda	TS_PhaseVectorHI,x	; 4
    779  7ac1		       85 dc		      sta	TS_Vector+1	; 3 = 17
    780  7ac3
    781  7ac3		       bd bc f4 	      lda	TS_PhaseBank,x	; 4
    782  7ac6		       85 3f		      sta	SET_BANK	; 3 = 7	 switch bank
    783  7ac8
    784  7ac8		       6c db 00 	      jmp	(TS_Vector)	; 5 = 31✅	  vector to timeslice handler
    785  7acb
    786  7acb							;---------------------------------------------------------------------------
    787  7acb
    788  7acb
    789  7acb				   DrawAnother		;344✅SCD_QUICK
    790  7acb							;676✅SCD_SLOW
    791  7acb
    792  7acb
    793  7acb							; add 44✅ cycles for the following in the case where there is something to draw
    794  7acb							; but no time to do it. As this is executed after EVERY type of draw, then this
    795  7acb							; is the base "extra" cost to add to each draw
    796  7acb
    797  7acb		       00 35	   CYCLES_DRAWANOTHER =	53	;✅
    798  7acb
    799  7acb		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2	     A = SCREEN_LINES
    800  7acd		       85 3e		      sta	SET_BANK_RAM	; 3 =	5
    801  7acf
    802  7acf		       a4 81		      ldy	DrawStackPointer	; 3 =	3    MUST have been set by BuildDrawStack!
    803  7ad1
    804  7ad1		       be 00 f0 	      ldx	DrawStack,y	; 4	     in actuality a character index
    805  7ad4		       bd a0 f0 	      lda	ScreenBuffer,x	; 4	     new character to draw
    806  7ad7		       29 7f		      and	#~128	; 2
    807  7ad9		       9d a0 f4 	      sta	ScreenBuffer+RAM_WRITE,x	; 4 = 14    clear hint bit
    808  7adc
    809  7adc		       88		      dey		; 2
    810  7add		       84 81		      sty	DrawStackPointer	; 3	     one less to draw
    811  7adf		       30 cb		      bmi	ExitStealCharDraw	; 2(3)=7    NOTE1: (3)+(15exit) -->45✅ <CYCLES_DRAWANOTHER)
    812  7ae1							; => 29
    813  7ae1
    814  7ae1				   EnterStealCharDraw		; @11✅ from initial StealCharDraw call
    815  7ae1							; RAM bank MUST be at BANK_DRAW_BUFFERS
    816  7ae1
    817  7ae1		       ad 84 02 	      lda	INTIM	; 4
    818  7ae4		       c9 04		      cmp	#SEGTIME_SCD_MIN	; 2
    819  7ae6		       90 c4		      bcc	ExitStealCharDraw	; 2(3) = 8    ((9)+(15exit) IF EXITING HERE, from DrawAnother... 53✅)
    820  7ae8							;		else exit from StealCharDraw ... 26✅
    821  7ae8							; @0✅
    822  7ae8
    823  7ae8		       be 00 f0 	      ldx	DrawStack,y	; 4	     in actuality a character index
    824  7aeb		       bc a0 f0 	      ldy	ScreenBuffer,x	; 4 =	8✅  new character to draw
    825  7aee
    826  7aee		       bd 00 f2 	      lda	ROW_BankChar,x	; 4	     A = 0..SCREEN_LINES-1
    827  7af1		       85 3e		      sta	SET_BANK_RAM	; 3
    828  7af3		       4c 29 f1 	      jmp	StealPart3	; 3 = 10✅  --> 18✅ cycles after check for SEGTIME_SCD_MIN
    829  7af6
    830  7af6							;---------------------------------------------------------------------------
    831  7af6
    832  7af6
      0  7af6					      DEFINE_SUBROUTINE	writePlayerFrame
      1  7af6		       00 0f	   BANK_writePlayerFrame =	_CURRENT_BANK
      2  7af6					      SUBROUTINE
      3  7af6				   writePlayerFrame
    834  7af6
    835  7af6		       a5 80		      lda	Platform
    836  7af8		       29 02		      and	#%10
    837  7afa		       0a		      asl
    838  7afb		       0a		      asl
    839  7afc		       65 c4		      adc	ethnic
    840  7afe		       85 e0		      sta	ethnicity
    841  7b00
    842  7b00
    843  7b00							; todo - compare with last + frame and skip if same
    844  7b00
    845  7b00		       a9 0a		      lda	#PLAYER_FRAMES
    846  7b02		       85 3f		      sta	SET_BANK
    847  7b04
    848  7b04		       a5 9c		      lda	animation_delay
    849  7b06		       f0 0f		      beq	getDelay	; FIRST usage
    850  7b08		       c6 9c		      dec	animation_delay
    851  7b0a		       d0 11		      bne	nextAnimation2	; just get shape
    852  7b0c
    853  7b0c		       18	   nextAptr   clc
    854  7b0d		       a5 9a		      lda	animation
    855  7b0f		       69 02		      adc	#2
    856  7b11		       85 9a		      sta	animation
    857  7b13		       90 02		      bcc	ahiok
    858  7b15		       e6 9b		      inc	animation+1
    859  7b17				   ahiok
    860  7b17		       a0 01	   getDelay   ldy	#1
    861  7b19		       b1 9a		      lda	(animation),y
    862  7b1b		       85 9c		      sta	animation_delay
    863  7b1d		       a0 00	   nextAnimation2 ldy	#0
    864  7b1f		       b1 9a		      lda	(animation),y
    865  7b21		       c9 ff		      cmp	#JUMP
    866  7b23		       f0 0d		      beq	aJump
    867  7b25		       c9 fe		      cmp	#FLIP
    868  7b27		       d0 18		      bne	notFlip
    869  7b29
    870  7b29		       a5 a2		      lda	ManLastDirection
    871  7b2b		       49 08		      eor	#%1000
    872  7b2d		       85 a2		      sta	ManLastDirection
    873  7b2f		       4c 0c fb 	      jmp	nextAptr
    874  7b32
    875  7b32							; it's a jump
    876  7b32		       a4 9c	   aJump      ldy	animation_delay	; actually animation ID :)
    877  7b34		       b9 00 f0 	      lda	ANIM_TABLE,y
    878  7b37		       85 9a		      sta	animation
    879  7b39		       b9 01 f0 	      lda	ANIM_TABLE+1,y
    880  7b3c		       85 9b		      sta	animation+1
    881  7b3e		       4c 17 fb 	      jmp	getDelay
    882  7b41
    883  7b41		       a8	   notFlip    tay
    884  7b42
    885  7b42		       a5 a0		      lda	ManDrawY
    886  7b44		       30 44		      bmi	SkipFrameCopy
    887  7b46		       85 df		      sta	bank	; character line (and hence bank) of player position
    888  7b48		       85 3e		      sta	SET_BANK_RAM
    889  7b4a
    890  7b4a							; Now we have the frame #, we can see if that frame has already been drawn into
    891  7b4a							; the frame buffer of the relevant bank. If it has, then we don't need to repeat
    892  7b4a							; and can save the enormous cost of frame copying...
    893  7b4a
    894  7b4a		       cc f9 f3 	      cpy	ExistingFrame	; optimize - don't draw if same frame
    895  7b4d		       f0 3b		      beq	SkipFrameCopy
    896  7b4f		       8c f9 f7 	      sty	ExistingFrame + RAM_WRITE
    897  7b52
    898  7b52		       a9 0a		      lda	#PLAYER_FRAMES
    899  7b54		       85 3f		      sta	SET_BANK
    900  7b56		       b9 38 f5 	      lda	FRAME_PTR_LO,y
    901  7b59		       85 db		      sta	frame_ptr
    902  7b5b		       b9 4f f5 	      lda	FRAME_PTR_HI,y
    903  7b5e		       85 dc		      sta	frame_ptr+1
    904  7b60
    905  7b60		       b9 66 f5 	      lda	COLOUR_PTR_LO,y
    906  7b63		       85 dd		      sta	colour_ptr
    907  7b65		       b9 7d f5 	      lda	COLOUR_PTR_HI,y
    908  7b68		       85 de		      sta	colour_ptr+1
    909  7b6a
    910  7b6a
    911  7b6a
    912  7b6a		       a0 17		      ldy	#LINES_PER_CHAR-1
    913  7b6c		       18		      clc
    914  7b6d				   CopySpriteToBank		; 408
    915  7b6d
    916  7b6d							; The colours for the sprites are copied to the row bank's colour data. The frames contain
    917  7b6d							; colour *indexes*. These indexes are modified by the *base* which indicates both the
    918  7b6d							; system NTSC/PAL along with the "visual identity" (i.e., colour/race). That is used to
    919  7b6d							; lookup a colour conversion which FINALLY gives us the correct colour to use for the line.
    920  7b6d
    921  7b6d							; ethnicity * 16 + PALNTSC * 8
    922  7b6d
    923  7b6d		       a9 0a		      lda	#PLAYER_FRAMES
    924  7b6f		       85 3f		      sta	SET_BANK
    925  7b71
    926  7b71		       b1 dd		      lda	(colour_ptr),y
    927  7b73		       65 e0		      adc	ethnicity	; colour base
    928  7b75		       aa		      tax
    929  7b76		       b1 db		      lda	(frame_ptr),y
    930  7b78		       48		      pha
    931  7b79		       a5 df		      lda	bank
    932  7b7b		       85 3e		      sta	SET_BANK_RAM
    933  7b7d		       bd d5 f2 	      lda	EthnicityColourPalette,x
    934  7b80		       99 65 f7 	      sta	PLAYER0_COLOUR+RAM_WRITE,y
    935  7b83		       68		      pla
    936  7b84		       99 4d f7 	      sta	PLAYER0_SHAPE+RAM_WRITE,y
    937  7b87		       88		      dey
    938  7b88		       10 e3		      bpl	CopySpriteToBank
    939  7b8a
    940  7b8a				   skipOffscreen
    941  7b8a		       60	   SkipFrameCopy rts
    942  7b8b
    943  7b8b							;---------------------------------------------------------------------------
    944  7b8b
    945  7b8b							;    DEFINE_SUBROUTINE DrawFullScreenMain ;=2484[-89]
    946  7b8b
    947  7b8b							; Check the screen for all those characters that need to be redrawn
    948  7b8b							; Just copies the mxn grid from the board to a DrawFlags array.  If the entry in
    949  7b8b							; the drawflags array is different to the ScreenBuffer array entry, then the
    950  7b8b							; screenbuffer will need redrawing.
    951  7b8b
    952  7b8b							; @59✅
    953  7b8b
    954  7b8b				   CopyRow2
    955  7b8b
    956  7b8b							;    IF MULTI_BANK_BOARD = YES
    957  7b8b							;		  lda BDF_BoardBank		  ; 3
    958  7b8b							;    ELSE
    959  7b8b		       a9 0d		      lda	#BANK_BOARD	; 2	 saves 5*8 = 40 cyles
    960  7b8d							;    ENDIF
    961  7b8d		       85 3e		      sta	SET_BANK_RAM	; 3
    962  7b8f		       b3 df		      lax	(BDF_BoardAddress),y	; 5
    963  7b91		       9a		      txs		; 2
    964  7b92		       b3 e1		      lax	(BDF_BoardAddress2),y	; 5 = 17✅
    965  7b94
    966  7b94		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
    967  7b96		       85 3e		      sta	SET_BANK_RAM	; 3
    968  7b98		       bd dc f1 	      lda	CharReplacement,x	; 4
    969  7b9b		       91 dd		      sta	(BDF_DrawFlagAddress2),y	; 6
    970  7b9d		       ba		      tsx		; 2
    971  7b9e		       bd dc f1 	      lda	CharReplacement,x	; 4
    972  7ba1		       91 db		      sta	(BDF_DrawFlagAddress),y	; 6 = 27 @44✅
    973  7ba3
    974  7ba3		       88		      dey		; 2
    975  7ba4		       10 e5		      bpl	CopyRow2	; 2/3 @48 (-1)
    976  7ba6
      0  7ba6					      CHECKPAGEX	CopyRow2, "CopyRow2 in BANK_FIXED"
      9  7ba6					      LIST	ON
    978  7ba6
    979  7ba6							; cost = 5 (rows) x 48 - 1 = 239
    980  7ba6							; @ (59) + 239 = @298✅
    981  7ba6
    982  7ba6		       a7 e4		      lax	DHS_Line	; 3
    983  7ba8		       f0 07		      beq	.exitCopy	; 2/3= 5/6
    984  7baa
    985  7baa		       a0 0e		      ldy	#BANK_DrawScreenRowPreparation	; 2
    986  7bac		       84 3f		      sty	SET_BANK	; 3
    987  7bae		       4c 73 f3 	      jmp	DrawScreenRowPreparation	; 3 = 8
    988  7bb1							; @298+8+5 = @311✅
    989  7bb1
    990  7bb1
    991  7bb1							; total: (244[-5]+5)*8 + 60[-7]*7 + 1 + 11 = 2424[-89]
    992  7bb1
    993  7bb1
      0  7bb1					      CHECKPAGEX	CopyRow2, "CopyRow2 in BANK_FIXED.asm"
      9  7bb1					      LIST	ON
    995  7bb1
    996  7bb1		       a6 e5	   .exitCopy  ldx	DHS_Stack	; 3
    997  7bb3		       9a		      txs		; 2
    998  7bb4
    999  7bb4							; fall through
   1000  7bb4
      0  7bb4					      DEFINE_SUBROUTINE	BuildDrawStack	; @31✅
      1  7bb4		       00 0f	   BANK_BuildDrawStack =	_CURRENT_BANK
      2  7bb4					      SUBROUTINE
      3  7bb4				   BuildDrawStack
   1002  7bb4
   1003  7bb4		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
   1004  7bb6		       85 3e		      sta	SET_BANK_RAM	; 3
   1005  7bb8		       4c f1 f0 	      jmp	DrawStackUpdate	; 3
   1006  7bbb
   1007  7bbb							; => @39 at DrawStackUpdate
   1008  7bbb
   1009  7bbb							;---------------------------------------------------------------------------
   1010  7bbb
      0  7bbb					      DEFINE_SUBROUTINE	DrawAIntoStack	; @31✅
      1  7bbb		       00 0f	   BANK_DrawAIntoStack =	_CURRENT_BANK
      2  7bbb					      SUBROUTINE
      3  7bbb				   DrawAIntoStack
   1012  7bbb
   1013  7bbb		       a9 08		      lda	#BANK_DRAW_BUFFERS	; 2
   1014  7bbd		       85 3e		      sta	SET_BANK_RAM	; 3
   1015  7bbf		       4c 29 f1 	      jmp	DrawIntoStack	; 3
   1016  7bc2
   1017  7bc2							; ==>39✅ @DrawIntoStack
   1018  7bc2
   1019  7bc2							;---------------------------------------------------------------------------
   1020  7bc2
   1021  7bc2
      0  7bc2					      DEFINE_SUBROUTINE	Reset
      1  7bc2		       00 0f	   BANK_Reset =	_CURRENT_BANK
      2  7bc2					      SUBROUTINE
      3  7bc2				   Reset
   1023  7bc2
      0  7bc2					      CLEAN_START
      1  7bc2		       78		      sei
      2  7bc3		       d8		      cld
      3  7bc4
      4  7bc4		       a2 00		      ldx	#0
      5  7bc6		       8a		      txa
      6  7bc7		       a8		      tay
      7  7bc8		       ca	   .CLEAR_STACK dex
      8  7bc9		       9a		      txs
      9  7bca		       48		      pha
     10  7bcb		       d0 fb		      bne	.CLEAR_STACK
     11  7bcd
   1025  7bcd
   1026  7bcd							;lda #2
   1027  7bcd							;sta VSYNC
   1028  7bcd							;lda #%01000010		  ; bit6 is not required
   1029  7bcd							;sta VBLANK			  ; end of screen - enter blanking
   1030  7bcd
   1031  7bcd							; Scoring bank is copied once (not per game, not per level...)
   1032  7bcd							; otherwise non-SaveKey high score gets zapped
   1033  7bcd
   1034  7bcd		       a2 03		      ldx	#ROM_SHADOW_OF_BANK_SCORING
   1035  7bcf		       a0 09		      ldy	#BANK_SCORING
   1036  7bd1		       20 35 fd 	      jsr	CopyROM2RAM_F000
   1037  7bd4
   1038  7bd4				   Restart		; go here on RESET + SELECT
   1039  7bd4
   1040  7bd4							; breakpoint was not hit/detected!!!
   1041  7bd4
      0  7bd4					      DEFINE_SUBROUTINE	Title
      1  7bd4		       00 0f	   BANK_Title =	_CURRENT_BANK
      2  7bd4					      SUBROUTINE
      3  7bd4				   Title
   1043  7bd4		       a2 ff		      ldx	#$ff	; adjust stack pointer after RESET + SELECT
   1044  7bd6		       9a		      txs
   1045  7bd7
   1046  7bd7							; temporary vars from title screen are used to init level
   1047  7bd7		       a9 00		      lda	#BANK_Cart_Init	; 2
   1048  7bd9		       85 3f		      sta	SET_BANK	; 3
   1049  7bdb		       20 92 f3 	      jsr	Cart_Init	; 6+x
   1050  7bde
   1051  7bde
   1052  7bde							;---------------------------------------------------------------------------
   1053  7bde
   1054  7bde
   1055  7bde		       f0 00	   SEGMENT_DECODE_LEVEL_SHADOW =	$F000	; if not = $F000, this will cause an assertion failure
   1056  7bde
   1057  7bde		       a2 00		      ldx	#BANK_DECODE_LEVEL_SHADOW
   1058  7be0		       a0 0a		      ldy	#BANK_DECODE_LEVEL
   1059  7be2		       20 35 fd 	      jsr	CopyROM2RAM_F000
   1060  7be5
   1061  7be5
   1062  7be5							;---------------------------------------------------------------------------
   1063  7be5							; Once-only game initialisation goes here...
   1064  7be5							; now we have two players so things get a bit tricky
   1065  7be5
   1066  7be5		       a9 09		      lda	#BANK_SCORING
   1067  7be7		       85 3e		      sta	SET_BANK_RAM
   1068  7be9		       20 63 f3 	      jsr	GameInitialise
   1069  7bec
   1070  7bec
   1071  7bec							;---------------------------------------------------------------------------
   1072  7bec
------- FILE sound/intro1_init.asm LEVEL 3 PASS 3
      0  7bec					      include	"sound/intro1_init.asm"
      1  7bec							; TIATracker music player
      2  7bec							; Copyright 2016 Andre "Kylearan" Wichmann
      3  7bec							; Website: https://bitbucket.org/kylearan/tiatracker
      4  7bec							; Email: andre.wichmann@gmx.de
      5  7bec							;
      6  7bec							; Licensed under the Apache License, Version 2.0 (the "License");
      7  7bec							; you may not use this file except in compliance with the License.
      8  7bec							; You may obtain a copy of the License at
      9  7bec							;
     10  7bec							;   http://www.apache.org/licenses/LICENSE-2.0
     11  7bec							;
     12  7bec							; Unless required by applicable law or agreed to in writing, software
     13  7bec							; distributed under the License is distributed on an "AS IS" BASIS,
     14  7bec							; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     15  7bec							; See the License for the specific language governing permissions and
     16  7bec							; limitations under the License.
     17  7bec
     18  7bec							; Song author: 
     19  7bec							; Song name: 
     20  7bec
     21  7bec							; @com.wudsn.ide.asm.hardware=ATARI2600
     22  7bec
     23  7bec							; =====================================================================
     24  7bec							; Initialize music.
     25  7bec							; Set tt_cur_pat_index_c0/1 to the indexes of the first patterns from
     26  7bec							; tt_SequenceTable for each channel.
     27  7bec							; Set tt_timer and tt_cur_note_index_c0/1 to 0.
     28  7bec							; All other variables can start with any value.
     29  7bec							; =====================================================================
     30  7bec		       a9 00		      lda	#0
     31  7bee		       85 d1		      sta	tt_cur_pat_index_c0
     32  7bf0		       a9 05		      lda	#5
     33  7bf2		       85 d2		      sta	tt_cur_pat_index_c1
     34  7bf4							; the rest should be 0 already from startup code. If not,
     35  7bf4							; set the following variables to 0 manually:
     36  7bf4							; - tt_timer
     37  7bf4							; - tt_cur_pat_index_c0
     38  7bf4							; - tt_cur_pat_index_c1
     39  7bf4							; - tt_cur_note_index_c0
     40  7bf4							; - tt_cur_note_index_c1
     41  7bf4
------- FILE BANK_FIXED.asm
   1074  7bf4
      0  7bf4					      SET_PLATFORM
      1  7bf4
      2  7bf4
      3  7bf4
      4  7bf4
      5  7bf4		       ad 82 02 	      lda	SWCHB
      6  7bf7		       2a		      rol
      7  7bf8		       2a		      rol
      8  7bf9		       2a		      rol
      9  7bfa		       29 03		      and	#%11
     10  7bfc		       49 02		      eor	#PAL
     11  7bfe		       85 80		      sta	Platform
   1076  7c00
   1077  7c00		       a9 0b		      lda	#BANK_TitleScreen
   1078  7c02		       85 3f		      sta	SET_BANK
   1079  7c04		       20 08 f0 	      jsr	TitleSequence
   1080  7c07
   1081  7c07		       4c 27 fc 	      jmp	FirstLevel
   1082  7c0a
   1083  7c0a				   RestartLevelNextPlayer
   1084  7c0a
   1085  7c0a		       a9 00		      lda	#BANK_SwapPlayersGeneric
   1086  7c0c		       85 3f		      sta	SET_BANK
   1087  7c0e		       20 d7 f3 	      jsr	SwapPlayersGeneric
   1088  7c11
   1089  7c11
   1090  7c11		       a2 0c		      ldx	#BANK_LevelScreen
   1091  7c13		       86 3f		      stx	SET_BANK
   1092  7c15
   1093  7c15		       a9 01		      lda	#1
   1094  7c17		       d0 14		      bne	selectLeveler
   1095  7c19
      0  7c19					      DEFINE_SUBROUTINE	NextLevelLevel
      1  7c19		       00 0f	   BANK_NextLevelLevel =	_CURRENT_BANK
      2  7c19					      SUBROUTINE
      3  7c19				   NextLevelLevel
   1097  7c19
   1098  7c19		       a2 00		      ldx	#BANK_GenerateHighScoreCode
   1099  7c1b		       86 3f		      stx	SET_BANK
   1100  7c1d		       20 cf f5 	      jsr	GenerateHighScoreCode
   1101  7c20
   1102  7c20		       a2 0d		      ldx	#BANK_xLevelScreen
   1103  7c22		       86 3f		      stx	SET_BANK
   1104  7c24		       20 3b f1 	      jsr	xLevelScreen
   1105  7c27
   1106  7c27				   FirstLevel
   1107  7c27		       a2 0c		      ldx	#BANK_LevelScreen
   1108  7c29		       86 3f		      stx	SET_BANK
   1109  7c2b
   1110  7c2b		       a9 00		      lda	#0
   1111  7c2d		       20 53 f0    selectLeveler jsr	LevelScreen
   1112  7c30
   1113  7c30							; Initialise all in-game variables; those that must be re-initialised at the start of each level,
   1114  7c30							; including those for general systems function. But NOT those which do not need re-initialising between
   1115  7c30							; levels.
   1116  7c30		       a9 00		      lda	#BANK_LevelInit	; 2
   1117  7c32		       85 3f		      sta	SET_BANK	; 3
   1118  7c34		       20 1f f4 	      jsr	LevelInit	; 6+x
   1119  7c37
   1120  7c37
   1121  7c37							; Setup the various digit and display pointers
   1122  7c37							; Grab current player's score/level from backup
   1123  7c37
   1124  7c37		       a9 09		      lda	#BANK_SCORING
   1125  7c39		       85 3e		      sta	SET_BANK_RAM
   1126  7c3b		       20 83 f2 	      jsr	GeneralScoringSetups
   1127  7c3e
   1128  7c3e							; copy the screen draw ROM shadow to RAM
   1129  7c3e
   1130  7c3e		       a0 07		      ldy	#SCREEN_LINES-1
   1131  7c40		       a2 01	   CopyScreenBanks ldx	#ROM_SHADOW_OF_RAMBANK_CODE
   1132  7c42		       20 35 fd 	      jsr	CopyROM2RAM_F000	; copy draw ROMShadow to RAM
   1133  7c45		       20 95 f0 	      jsr	SetPlatformColours	; set NTSC or PAL RGB values for draw + index
   1134  7c48		       88		      dey
   1135  7c49		       10 f5		      bpl	CopyScreenBanks
   1136  7c4b
   1137  7c4b		       a2 02		      ldx	#ROM_SHADOW_OF_BANK_DRAW_BUFFERS
   1138  7c4d		       a0 08		      ldy	#BANK_DRAW_BUFFERS
   1139  7c4f		       20 61 f0 	      jsr	CopyROMShadowToRAM_F000
   1140  7c52
   1141  7c52
   1142  7c52		       a9 04		      lda	#BANK_LevelInfoLO
   1143  7c54		       85 3f		      sta	SET_BANK
   1144  7c56		       20 64 f2 	      jsr	GetLevelAddress
   1145  7c59
   1146  7c59		       a9 0a		      lda	#BANK_DECODE_LEVEL
   1147  7c5b		       85 3e		      sta	SET_BANK_RAM
   1148  7c5d		       20 ba f0 	      jsr	UnpackLevel
   1149  7c60
   1150  7c60		       a9 20		      lda	#SIZE_BOARD_X
   1151  7c62		       85 94		      sta	BoardLimit_Width
   1152  7c64		       a9 20		      lda	#SIZE_BOARD_Y
   1153  7c66		       85 95		      sta	BoardLimit_Height
   1154  7c68
   1155  7c68							; Setup player animation and scroll limits.
   1156  7c68							; Mangle the board colours based on level
   1157  7c68
   1158  7c68		       a9 00		      lda	#BANK_CreateCreatures	; 2
   1159  7c6a		       85 3f		      sta	SET_BANK	; 3
   1160  7c6c		       20 e0 f3 	      jsr	CreateCreatures	; 6+x
   1161  7c6f
   1162  7c6f							;---------------------------------------------------------------------------
   1163  7c6f
   1164  7c6f					      IF	WAIT_FOR_INITIAL_DRAW
   1165  7c6f		       a9 02		      lda	#%10
   1166  7c71		       85 ae		      sta	blankState
   1167  7c73					      ENDIF
   1168  7c73
   1169  7c73		       a9 00		      lda	#BANK_Resync	; 2
   1170  7c75		       85 3f		      sta	SET_BANK	; 3
   1171  7c77		       20 53 f4 	      jsr	Resync	; 6+x
   1172  7c7a
   1173  7c7a				   NewFrameStart
   1174  7c7a
   1175  7c7a		       24 c1		      bit	NextLevelTrigger
   1176  7c7c		       70 8c		      bvs	RestartLevelNextPlayer	; loss of life (=SELECT)
   1177  7c7e		       10 99		      bpl	NextLevelLevel	; game-triggered next level (=RESET/COMPLETED)
   1178  7c80
   1179  7c80							; Note: VSYNC must NOT be on when starting a new level! Else you get annoying TV signals.
   1180  7c80
   1181  7c80		       a9 0e		      lda	#%1110	; VSYNC ON
   1182  7c82		       85 42	   .loopVSync sta	WSYNC
   1183  7c84		       85 40		      sta	VSYNC
   1184  7c86		       4a		      lsr
   1185  7c87		       d0 f9		      bne	.loopVSync	; branch until VYSNC has been reset
   1186  7c89
   1187  7c89							; moved *after* the loop since this allows to *increase* timer values by 1!
   1188  7c89
   1189  7c89		       a6 80		      ldx	Platform
   1190  7c8b		       bc f6 fc 	      ldy	VBlankTime,x
   1191  7c8e		       8c 96 02 	      sty	TIM64T
   1192  7c91
   1193  7c91		       a9 0e		      lda	#BANK_SoundFX
   1194  7c93		       85 3f		      sta	SET_BANK
   1195  7c95		       20 13 f4 	      jsr	SoundFX
   1196  7c98
   1197  7c98		       20 a4 fa 	      jsr	StealCharDraw	; 6 NOTE THIS IS THE *ONLY* AREA BIG ENOUGH FOR > 30 INTIM NEEDS
   1198  7c9b
   1199  7c9b							;---------------------------------------------------------------------------
   1200  7c9b
   1201  7c9b		       a9 09		      lda	#BANK_SCORING	; 2
   1202  7c9d		       85 3e		      sta	SET_BANK_RAM	; 3
   1203  7c9f		       20 e8 f1 	      jsr	DrawDigits	; 6 = 11
   1204  7ca2
   1205  7ca2							;---------------------------------------------------------------------------
   1206  7ca2							; A 42-cycle timing window in the screen draw code.  Perform any general
   1207  7ca2							; per-frame code here, provided it takes exactly 42 cycles to execute.
   1208  7ca2							; TJ: Well, not exactly 42 cycles, but it works! :)
   1209  7ca2
   1210  7ca2		       a9 00		      lda	#BANK_SCREENMARKII1	; 2
   1211  7ca4		       85 3f		      sta	SET_BANK	; testing
   1212  7ca6		       85 3e		      sta	SET_BANK_RAM	; 3
   1213  7ca8		       20 00 f0 	      jsr	DrawTheScreen	; 6	 @57 from RAM, no less!!
   1214  7cab							;	 @66
   1215  7cab		       a9 00		      lda	#BANK_PostScreenCleanup	; 2
   1216  7cad		       85 3f		      sta	SET_BANK	; 3
   1217  7caf		       20 c9 f4 	      jsr	PostScreenCleanup	; 6+x
   1218  7cb2
   1219  7cb2		       a9 01		      lda	#BANK_SelfModDrawPlayers	; 2
   1220  7cb4		       85 3f		      sta	SET_BANK	; 3
   1221  7cb6		       20 84 f2 	      jsr	SelfModDrawPlayers	; 6+x
   1222  7cb9
   1223  7cb9				   SkipSc
   1224  7cb9
   1225  7cb9
   1226  7cb9		       a5 cc		      lda	FadeOutComplete
   1227  7cbb		       30 0e		      bmi	FadeInPossible
   1228  7cbd		       c6 cd		      dec	fadeslow
   1229  7cbf		       10 20		      bpl	FadeNotRequired
   1230  7cc1		       a9 02		      lda	#2
   1231  7cc3		       85 cd		      sta	fadeslow
   1232  7cc5		       20 5e fd 	      jsr	FadeOut
   1233  7cc8		       4c e1 fc 	      jmp	FadeNotRequired
   1234  7ccb				   FadeInPossible
   1235  7ccb
   1236  7ccb		       a9 00		      lda	#0
   1237  7ccd		       85 3e		      sta	SET_BANK_RAM
   1238  7ccf		       20 bd f3 	      jsr	FixColours
   1239  7cd2
   1240  7cd2		       a5 cb		      lda	FadeComplete
   1241  7cd4		       f0 0b		      beq	FadeNotRequired
   1242  7cd6
   1243  7cd6		       c6 cd		      dec	fadeslow
   1244  7cd8		       10 07		      bpl	FadeNotRequired
   1245  7cda		       a9 03		      lda	#3
   1246  7cdc		       85 cd		      sta	fadeslow
   1247  7cde		       20 8a fd 	      jsr	FadeIn
   1248  7ce1				   FadeNotRequired
   1249  7ce1
   1250  7ce1		       20 f6 fa 	      jsr	writePlayerFrame
   1251  7ce4
   1252  7ce4		       a9 09		      lda	#BANK_SCORING
   1253  7ce6		       85 3e		      sta	SET_BANK_RAM
   1254  7ce8		       20 a3 f3 	      jsr	NotchTime
   1255  7ceb
   1256  7ceb		       20 a4 fa 	      jsr	StealCharDraw	; 6
   1257  7cee
   1258  7cee		       ad 84 02    OverscanBD lda	INTIM	;4
   1259  7cf1		       d0 fb		      bne	OverscanBD	;2/3
   1260  7cf3
   1261  7cf3		       4c 7a fc 	      jmp	NewFrameStart
   1262  7cf6				   VBlankTime
   1263  7cf6		       30 30		      .byte.b	VBLANK_TIM_NTSC, VBLANK_TIM_NTSC
   1264  7cf8		       55 55		      .byte.b	VBLANK_TIM_PAL, VBLANK_TIM_PAL
   1265  7cfa
   1266  7cfa							;---------------------------------------------------------------------------
   1267  7cfa
      0  7cfa					      DEFINE_SUBROUTINE	nextLevelMan
      1  7cfa		       00 0f	   BANK_nextLevelMan =	_CURRENT_BANK
      2  7cfa					      SUBROUTINE
      3  7cfa				   nextLevelMan
   1269  7cfa
   1270  7cfa		       a9 0e		      lda	#BANK_EndOfLevel
   1271  7cfc		       85 3f		      sta	SET_BANK
   1272  7cfe		       4c 99 f3 	      jmp	EndOfLevel
   1273  7d01
   1274  7d01
      0  7d01					      DEFINE_SUBROUTINE	switchLevels2
      1  7d01		       00 0f	   BANK_switchLevels2 =	_CURRENT_BANK
      2  7d01					      SUBROUTINE
      3  7d01				   switchLevels2
   1276  7d01
   1277  7d01							; SELECT used, so we want to get back to selection
   1278  7d01
   1279  7d01		       a5 c1		      lda	NextLevelTrigger
   1280  7d03		       09 40		      ora	#$40	; #<(~BIT_NEXTLEVEL)
   1281  7d05		       85 c1		      sta	NextLevelTrigger
   1282  7d07		       60		      rts
   1283  7d08
      0  7d08					      DEFINE_SUBROUTINE	nextLevelMan2
      1  7d08		       00 0f	   BANK_nextLevelMan2 =	_CURRENT_BANK
      2  7d08					      SUBROUTINE
      3  7d08				   nextLevelMan2
   1285  7d08
   1286  7d08		       c6 a9		      dec	DelayEndOfLevel
   1287  7d0a		       d0 3b		      bne	genericRTS
   1288  7d0c
   1289  7d0c		       a9 00		      lda	#0
   1290  7d0e		       85 cc		      sta	FadeOutComplete	; start fading OUT
   1291  7d10		       a9 00		      lda	#0
   1292  7d12		       85 cb		      sta	FadeComplete	; stop fade IN
   1293  7d14
   1294  7d14		       a9 05		      lda	#5
   1295  7d16		       85 a9		      sta	DelayEndOfLevel
   1296  7d18
   1297  7d18		       a9 0d		      lda	#MANMODE_NEXTLEVEL3
   1298  7d1a		       85 a1		      sta	ManMode
   1299  7d1c							;		  jmp nextLevelMan3
   1300  7d1c							;		  rts
   1301  7d1c
   1302  7d1c
      0  7d1c					      DEFINE_SUBROUTINE	nextLevelMan3
      1  7d1c		       00 0f	   BANK_nextLevelMan3 =	_CURRENT_BANK
      2  7d1c					      SUBROUTINE
      3  7d1c				   nextLevelMan3
   1304  7d1c
   1305  7d1c		       c6 a9		      dec	DelayEndOfLevel
   1306  7d1e		       d0 27		      bne	genericRTS
   1307  7d20
   1308  7d20		       a9 09		      lda	#MANMODE_SWITCH
   1309  7d22		       85 a1		      sta	ManMode
   1310  7d24
      0  7d24					      DEFINE_SUBROUTINE	switchLevels
      1  7d24		       00 0f	   BANK_switchLevels =	_CURRENT_BANK
      2  7d24					      SUBROUTINE
      3  7d24				   switchLevels
   1312  7d24
   1313  7d24							; Now do the actual switching
   1314  7d24
   1315  7d24							;		 lda NextLevelTrigger
   1316  7d24							;		 and #<(~BIT_NEXTLEVEL)
   1317  7d24		       a9 00		      lda	#$00
   1318  7d26		       85 c1		      sta	NextLevelTrigger
   1319  7d28
   1320  7d28							; Next level is due. Point to the next level, but if we're at the end of playable levels,
   1321  7d28							; then increment the level number. This is completely circular, so we eventually wrap
   1322  7d28							; the level back to 0 and start afresh.
   1323  7d28
   1324  7d28		       e6 b1		      inc	levelX
   1325  7d2a							;		  bne noHiLev
   1326  7d2a							;		  inc levelX+1
   1327  7d2a							;noHiLev
   1328  7d2a							;		  lda levelX+1
   1329  7d2a							;		  cmp #>MAX_LEVEL_NUMBER
   1330  7d2a							;		  bcc .level_ok
   1331  7d2a
   1332  7d2a		       a5 b1		      lda	levelX
   1333  7d2c		       c9 8a		      cmp	#<MAX_LEVEL_NUMBER
   1334  7d2e		       90 04		      bcc	.level_ok
   1335  7d30
   1336  7d30		       a9 00		      lda	#0
   1337  7d32		       85 b1		      sta	levelX
   1338  7d34							;		  sta levelX+1
   1339  7d34				   .level_ok
   1340  7d34		       60		      rts
   1341  7d35
   1342  7d35							;---------------------------------------------------------------------------
   1343  7d35
   1344  7d35
      0  7d35					      DEFINE_SUBROUTINE	CopyROM2RAM_F000
      1  7d35		       00 0f	   BANK_CopyROM2RAM_F000 =	_CURRENT_BANK
      2  7d35					      SUBROUTINE
      3  7d35				   CopyROM2RAM_F000
   1346  7d35
   1347  7d35		       a9 0e		      lda	#BANK_CopyROMShadowToRAM
   1348  7d37		       85 3f		      sta	SET_BANK
   1349  7d39		       85 be		      sta	ROM_Bank
   1350  7d3b		       4c 61 f0 	      jmp	CopyROMShadowToRAM_F000
   1351  7d3e
   1352  7d3e
   1353  7d3e							;---------------------------------------------------------------------------
   1354  7d3e
      0  7d3e					      DEFINE_SUBROUTINE	RegisterTarget
      1  7d3e		       00 0f	   BANK_RegisterTarget =	_CURRENT_BANK
      2  7d3e					      SUBROUTINE
      3  7d3e				   RegisterTarget
   1356  7d3e
   1357  7d3e		       f8		      sed
   1358  7d3f		       18		      clc
   1359  7d40		       a5 b4		      lda	BCD_targetsRequired
   1360  7d42		       69 01		      adc	#1
   1361  7d44		       85 b4		      sta	BCD_targetsRequired
   1362  7d46		       d8		      cld
   1363  7d47		       60	   genericRTS rts
   1364  7d48
      0  7d48					      DEFINE_SUBROUTINE	DeRegisterTarget
      1  7d48		       00 0f	   BANK_DeRegisterTarget =	_CURRENT_BANK
      2  7d48					      SUBROUTINE
      3  7d48				   DeRegisterTarget
   1366  7d48
   1367  7d48		       f8		      sed
   1368  7d49		       38		      sec
   1369  7d4a		       a5 b4		      lda	BCD_targetsRequired
   1370  7d4c		       e9 01		      sbc	#1
   1371  7d4e		       85 b4		      sta	BCD_targetsRequired
   1372  7d50		       d8		      cld
   1373  7d51		       60		      rts
   1374  7d52
   1375  7d52
      0  7d52					      DEFINE_SUBROUTINE	Random
      1  7d52		       00 0f	   BANK_Random =	_CURRENT_BANK
      2  7d52					      SUBROUTINE
      3  7d52				   Random
      0  7d52					      NEXT_RANDOM
      1  7d52
      2  7d52		       a5 c7		      lda	rnd
      3  7d54		       4a		      lsr
      4  7d55					      IFCONST	rndHi
      5  7d55		       66 c6		      ror	rndHi
      6  7d57					      ENDIF
      7  7d57		       90 02		      bcc	.skipEOR
      8  7d59		       49 b4		      eor	#RND_EOR_VAL
      9  7d5b				   .skipEOR
     10  7d5b		       85 c7		      sta	rnd
   1378  7d5d		       60		      rts
   1379  7d5e
   1380  7d5e
      0  7d5e					      DEFINE_SUBROUTINE	FadeOut
      1  7d5e		       00 0f	   BANK_FadeOut =	_CURRENT_BANK
      2  7d5e					      SUBROUTINE
      3  7d5e				   FadeOut
   1382  7d5e
   1383  7d5e		       a0 07		      ldy	#SCREEN_LINES-1
   1384  7d60		       84 3e	   ZeroColours sty	SET_BANK_RAM
   1385  7d62
   1386  7d62		       af 1d f0 	      lax	Colour_A_Actual
   1387  7d65		       29 0f		      and	#$F
   1388  7d67		       f0 02		      beq	AisZero
   1389  7d69		       ca		      dex
   1390  7d6a		       8a		      txa
   1391  7d6b		       8d 1d f4    AisZero    sta	Colour_A_Actual+RAM_WRITE
   1392  7d6e
   1393  7d6e		       af 86 f0 	      lax	Colour_B_Actual
   1394  7d71		       29 0f		      and	#$F
   1395  7d73		       f0 02		      beq	BisZero
   1396  7d75		       ca		      dex
   1397  7d76		       8a		      txa
   1398  7d77		       8d 86 f4    BisZero    sta	Colour_B_Actual+RAM_WRITE
   1399  7d7a
   1400  7d7a		       af 53 f0 	      lax	Colour_C_Actual
   1401  7d7d		       29 0f		      and	#$F
   1402  7d7f		       f0 02		      beq	CisZero
   1403  7d81		       ca		      dex
   1404  7d82		       8a		      txa
   1405  7d83		       8d 53 f4    CisZero    sta	Colour_C_Actual+RAM_WRITE
   1406  7d86
   1407  7d86		       88		      dey
   1408  7d87		       10 d7		      bpl	ZeroColours
   1409  7d89		       60		      rts
   1410  7d8a
   1411  7d8a
   1412  7d8a
   1413  7d8a
      0  7d8a					      DEFINE_SUBROUTINE	FadeIn
      1  7d8a		       00 0f	   BANK_FadeIn =	_CURRENT_BANK
      2  7d8a					      SUBROUTINE
      3  7d8a				   FadeIn
   1415  7d8a
   1416  7d8a		       a9 00		      lda	#0
   1417  7d8c		       85 cb		      sta	FadeComplete
   1418  7d8e
   1419  7d8e		       a0 07		      ldy	#SCREEN_LINES-1
   1420  7d90		       84 3e	   CopyAcols  sty	SET_BANK_RAM
   1421  7d92
   1422  7d92		       af 1d f0 	      lax	Colour_A_Actual
   1423  7d95		       d0 0a		      bne	notFirstA
   1424  7d97		       ad fb f3 	      lda	Colour_A
   1425  7d9a		       29 f0		      and	#$F0
   1426  7d9c		       aa		      tax
   1427  7d9d		       e8		      inx
   1428  7d9e		       4c a7 fd 	      jmp	FirstA
   1429  7da1		       ec fb f3    notFirstA  cpx	Colour_A
   1430  7da4		       f0 06		      beq	AOK
   1431  7da6		       e8		      inx
   1432  7da7		       8e 1d f4    FirstA     stx	Colour_A_Actual+RAM_WRITE
   1433  7daa		       e6 cb		      inc	FadeComplete	; NOT complete
   1434  7dac				   AOK
   1435  7dac		       af 86 f0 	      lax	Colour_B_Actual
   1436  7daf		       d0 0a		      bne	notFirstB
   1437  7db1		       ad fc f3 	      lda	Colour_B
   1438  7db4		       29 f0		      and	#$F0
   1439  7db6		       aa		      tax
   1440  7db7		       e8		      inx
   1441  7db8		       4c c1 fd 	      jmp	FirstB
   1442  7dbb		       ec fc f3    notFirstB  cpx	Colour_B
   1443  7dbe		       f0 06		      beq	BOK
   1444  7dc0		       e8		      inx
   1445  7dc1		       8e 86 f4    FirstB     stx	Colour_B_Actual+RAM_WRITE
   1446  7dc4		       e6 cb		      inc	FadeComplete	; NOT complete
   1447  7dc6				   BOK
   1448  7dc6		       af 53 f0 	      lax	Colour_C_Actual
   1449  7dc9		       d0 0a		      bne	notFirstC
   1450  7dcb		       ad fd f3 	      lda	Colour_C
   1451  7dce		       29 f0		      and	#$F0
   1452  7dd0		       aa		      tax
   1453  7dd1		       e8		      inx
   1454  7dd2		       4c db fd 	      jmp	FirstC
   1455  7dd5		       ec fd f3    notFirstC  cpx	Colour_C
   1456  7dd8		       f0 06		      beq	COK
   1457  7dda		       e8		      inx
   1458  7ddb		       8e 53 f4    FirstC     stx	Colour_C_Actual+RAM_WRITE
   1459  7dde		       e6 cb		      inc	FadeComplete	; NOT complete
   1460  7de0				   COK
   1461  7de0
   1462  7de0		       88		      dey
   1463  7de1		       10 ad		      bpl	CopyAcols
   1464  7de3		       60		      rts
   1465  7de4
------- FILE charset/CHARACTERSHAPE_STEEL.asm LEVEL 3 PASS 3
      0  7de4					      include	"charset/CHARACTERSHAPE_STEEL.asm"
      0  7de4					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_STEEL", LINES_PER_CHAR
     10  7de4					      LIST	ON
      2  7de4				   CHARACTERSHAPE_STEEL
      3  7de4		       00 88 00 88*	      .byte.b	0,136,0,136,0,34,0,34
      4  7dec		       ff 77 77 ff*	      .byte.b	255,119,119,255,255,221,221,255
      5  7df4		       ff 77 77 ff*	      .byte.b	255,119,119,255,255,221,221,255
      0  7dfc					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_STEEL_MIRRORED", LINES_PER_CHAR
 PAGE BREAK INSERTED FOR  CHARACTERSHAPE_STEEL_MIRRORED
 REQUESTED SIZE =  $18
 WASTED SPACE =  $4
 PAGEBREAK LOCATION =  $fe00
     10  7e00					      LIST	ON
      7  7e00				   CHARACTERSHAPE_STEEL_MIRRORED
      8  7e00		       00 11 00 11*	      .byte.b	0,17,0,17,0,68,0,68
      9  7e08		       ff ee ee ff*	      .byte.b	255,238,238,255,255,187,187,255
     10  7e10		       ff ee ee ff*	      .byte.b	255,238,238,255,255,187,187,255
------- FILE BANK_FIXED.asm
   1467  7e18
   1468  7e18
      0  7e18					      DEFINE_SUBROUTINE	CopyColoursToScreenLines
      1  7e18		       00 0f	   BANK_CopyColoursToScreenLines =	_CURRENT_BANK
      2  7e18					      SUBROUTINE
      3  7e18				   CopyColoursToScreenLines
   1470  7e18
   1471  7e18		       a2 07		      ldx	#SCREEN_LINES-1
   1472  7e1a		       86 3e	   setPlat    stx	SET_BANK_RAM
   1473  7e1c		       20 74 f2 	      jsr	DoColours
   1474  7e1f		       ca		      dex
   1475  7e20		       10 f8		      bpl	setPlat
   1476  7e22
   1477  7e22		       a5 be		      lda	ROM_Bank
   1478  7e24		       85 3f		      sta	SET_BANK
   1479  7e26		       60		      rts
   1480  7e27
   1481  7e27							;---------------------------------------------------------------------------
   1482  7e27
   1483  7e27							;include "charset/CHARACTERSHAPE_TARGET.asm"
------- FILE charset/CHARACTERSHAPE_TARGET1.asm LEVEL 3 PASS 3
      0  7e27					      include	"charset/CHARACTERSHAPE_TARGET1.asm"
      0  7e27					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET1", LINES_PER_CHAR
     10  7e27					      LIST	ON
      2  7e27				   CHARACTERSHAPE_TARGET1
      3  7e27		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      4  7e2f		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      5  7e37		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      0  7e3f					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET1_MIRRORED", LINES_PER_CHAR
     10  7e3f					      LIST	ON
      7  7e3f				   CHARACTERSHAPE_TARGET1_MIRRORED
      8  7e3f		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      9  7e47		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
     10  7e4f		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET3.asm LEVEL 3 PASS 3
      0  7e57					      include	"charset/CHARACTERSHAPE_TARGET3.asm"
      0  7e57					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET3", LINES_PER_CHAR
     10  7e57					      LIST	ON
      2  7e57				   CHARACTERSHAPE_TARGET3
      3  7e57		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      4  7e5f		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      5  7e67		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      0  7e6f					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET3_MIRRORED", LINES_PER_CHAR
     10  7e6f					      LIST	ON
      7  7e6f				   CHARACTERSHAPE_TARGET3_MIRRORED
      8  7e6f		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      9  7e77		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
     10  7e7f		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET5.asm LEVEL 3 PASS 3
      0  7e87					      include	"charset/CHARACTERSHAPE_TARGET5.asm"
      0  7e87					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET5", LINES_PER_CHAR
     10  7e87					      LIST	ON
      2  7e87				   CHARACTERSHAPE_TARGET5
      3  7e87		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      4  7e8f		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      5  7e97		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      0  7e9f					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET5_MIRRORED", LINES_PER_CHAR
     10  7e9f					      LIST	ON
      7  7e9f				   CHARACTERSHAPE_TARGET5_MIRRORED
      8  7e9f		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
      9  7ea7		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
     10  7eaf		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_TARGET7.asm LEVEL 3 PASS 3
      0  7eb7					      include	"charset/CHARACTERSHAPE_TARGET7.asm"
      0  7eb7					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET7", LINES_PER_CHAR
     10  7eb7					      LIST	ON
      2  7eb7				   CHARACTERSHAPE_TARGET7
      3  7eb7		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      4  7ebf		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      5  7ec7		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      0  7ecf					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_TARGET7_MIRRORED", LINES_PER_CHAR
     10  7ecf					      LIST	ON
      7  7ecf				   CHARACTERSHAPE_TARGET7_MIRRORED
      8  7ecf		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
      9  7ed7		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
     10  7edf		       00 00 66 66*	      .byte.b	0,0,102,102,102,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_RIVET.asm LEVEL 3 PASS 3
      0  7ee7					      include	"charset/CHARACTERSHAPE_RIVET.asm"
      0  7ee7					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_RIVET", LINES_PER_CHAR
     10  7ee7					      LIST	ON
      2  7ee7				   CHARACTERSHAPE_RIVET
      3  7ee7		       00 00 00 00*	      .byte.b	0,0,0,0,51,85,136,102
      4  7eef		       00 66 ff ee*	      .byte.b	0,102,255,238,221,187,102,102
      5  7ef7		       66 77 ff ff*	      .byte.b	102,119,255,255,221,187,102,102
      0  7eff					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_RIVET_MIRRORED", LINES_PER_CHAR
 PAGE BREAK INSERTED FOR  CHARACTERSHAPE_RIVET_MIRRORED
 REQUESTED SIZE =  $18
 WASTED SPACE =  $1
 PAGEBREAK LOCATION =  $ff00
     10  7f00					      LIST	ON
      7  7f00				   CHARACTERSHAPE_RIVET_MIRRORED
      8  7f00		       00 00 00 00*	      .byte.b	0,0,0,0,204,170,17,102
      9  7f08		       00 66 ff 77*	      .byte.b	0,102,255,119,187,221,102,102
     10  7f10		       66 ee ff ff*	      .byte.b	102,238,255,255,187,221,102,102
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_STRIPE.asm LEVEL 3 PASS 3
      0  7f18					      include	"charset/CHARACTERSHAPE_STRIPE.asm"
      0  7f18					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_STRIPE", LINES_PER_CHAR
     10  7f18					      LIST	ON
      2  7f18				   CHARACTERSHAPE_STRIPE
      3  7f18		       44 cc 88 99*	      .byte.b	68,204,136,153,17,51,34,102
      4  7f20		       77 ff ee ff*	      .byte.b	119,255,238,255,221,255,187,255
      5  7f28		       44 cc 88 99*	      .byte.b	68,204,136,153,17,51,34,102
      0  7f30					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_STRIPE_MIRRORED", LINES_PER_CHAR
     10  7f30					      LIST	ON
      7  7f30				   CHARACTERSHAPE_STRIPE_MIRRORED
      8  7f30		       22 33 11 99*	      .byte.b	34,51,17,153,136,204,68,102
      9  7f38		       ee ff 77 ff*	      .byte.b	238,255,119,255,187,255,221,255
     10  7f40		       22 33 11 99*	      .byte.b	34,51,17,153,136,204,68,102
------- FILE BANK_FIXED.asm
   1490  7f48							;include "charset/CHARACTERSHAPE_SOIL.asm"
------- FILE characterset/character_SOIL.asm LEVEL 3 PASS 3
      0  7f48					      include	"characterset/character_SOIL.asm"
      1  7f48							;    Sokoboo - a Sokoban implementation
      2  7f48							;    using a generic tile-based display engine for the Atari 2600
      3  7f48							;    Sokoban (倉庫番)™ is © Falcon Co., Ltd.
      4  7f48							;
      5  7f48							;    Code related to this Sokoban™ implementation was developed by Andrew Davie.
      6  7f48							;
      7  7f48							;    Code related to the generic tile-based display engine was developed by
      8  7f48							;    Andrew Davie and Thomas Jentzsch during 2003-2011 and is
      9  7f48							;    Copyright(C)2003-2019 Thomas Jentzsch and Andrew Davie - contacts details:
     10  7f48							;    Andrew Davie (andrew@taswegian.com), Thomas Jentzsch (tjentzsch@yahoo.de).
     11  7f48							;
     12  7f48							;    Code related to music and sound effects uses the TIATracker music player
     13  7f48							;    Copyright 2016 Andre "Kylearan" Wichmann - see source code in the "sound"
     14  7f48							;    directory for Apache licensing details.
     15  7f48							;
     16  7f48							;    Some level data incorporated in this program were created by Lee J Haywood.
     17  7f48							;    See the copyright notices in the License directory for a list of level
     18  7f48							;    contributors.
     19  7f48							;
     20  7f48							;    Except where otherwise indicated, this software is released under the
     21  7f48							;    following licensing arrangement...
     22  7f48							;
     23  7f48							;    This program is free software: you can redistribute it and/or modify
     24  7f48							;    it under the terms of the GNU General Public License as published by
     25  7f48							;    the Free Software Foundation, either version 3 of the License, or
     26  7f48							;    (at your option) any later version.
     27  7f48							;    see https://www.gnu.org/licenses/gpl-3.0.en.html
     28  7f48
     29  7f48							;    This program is distributed in the hope that it will be useful,
     30  7f48							;    but WITHOUT ANY WARRANTY; without even the implied warranty of
     31  7f48							;    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     32  7f48							;    GNU General Public License for more details.
     33  7f48
      0  7f48					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_SOIL", LINES_PER_CHAR
     10  7f48					      LIST	ON
     35  7f48				   CHARACTERSHAPE_SOIL
     36  7f48				   CHARACTERSHAPE_SOIL_MIRRORED
     37  7f48		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
     38  7f50		       ff ff ff ff*	      .byte.b	%11111111,%11111111,%11111111,%11111111,%11111111,%11111111,%11111111,%11111111
     39  7f58		       00 00 00 00*	      .byte.b	0,0,0,0,0,0,0,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_BOX.asm LEVEL 3 PASS 3
      0  7f60					      include	"charset/CHARACTERSHAPE_BOX.asm"
      0  7f60					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX", LINES_PER_CHAR
     10  7f60					      LIST	ON
      2  7f60				   CHARACTERSHAPE_BOX
      3  7f60		       ff ff 99 99*	      .byte.b	255,255,153,153,153,153,0,0
      4  7f68		       ff ff 99 99*	      .byte.b	255,255,153,153,153,153,0,0
      5  7f70		       00 00 00 00*	      .byte.b	0,0,0,0,0,255,255,0
      0  7f78					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX_MIRRORED", LINES_PER_CHAR
     10  7f78					      LIST	ON
      7  7f78				   CHARACTERSHAPE_BOX_MIRRORED
      8  7f78		       ff ff 99 99*	      .byte.b	255,255,153,153,153,153,0,0
      9  7f80		       ff ff 99 99*	      .byte.b	255,255,153,153,153,153,0,0
     10  7f88		       00 00 00 00*	      .byte.b	0,0,0,0,0,255,255,0
------- FILE BANK_FIXED.asm
------- FILE charset/CHARACTERSHAPE_BOX_ON_TARGET.asm LEVEL 3 PASS 3
      0  7f90					      include	"charset/CHARACTERSHAPE_BOX_ON_TARGET.asm"
      0  7f90					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX_ON_TARGET", LINES_PER_CHAR
     10  7f90					      LIST	ON
      2  7f90				   CHARACTERSHAPE_BOX_ON_TARGET
      3  7f90		       ff ff 99 99*	      .byte.b	255,255,153,153,153,153,0,0
      4  7f98		       ff ff ff ff*	      .byte.b	255,255,255,255,255,153,0,0
      5  7fa0		       00 00 66 66*	      .byte.b	0,0,102,102,102,255,255,0
      0  7fa8					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED", LINES_PER_CHAR
     10  7fa8					      LIST	ON
      7  7fa8				   CHARACTERSHAPE_BOX_ON_TARGET_MIRRORED
      8  7fa8		       ff ff 99 99*	      .byte.b	255,255,153,153,153,153,0,0
      9  7fb0		       ff ff ff ff*	      .byte.b	255,255,255,255,255,153,0,0
     10  7fb8		       00 00 66 66*	      .byte.b	0,0,102,102,102,255,255,0
------- FILE BANK_FIXED.asm
   1494  7fc0							;include "charset/CHARACTERSHAPE_BOX_ON_TARGET2.asm"
------- FILE charset/CHARACTERSHAPE_WALL.asm LEVEL 3 PASS 3
      0  7fc0					      include	"charset/CHARACTERSHAPE_WALL.asm"
      0  7fc0					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_WALL", LINES_PER_CHAR
     10  7fc0					      LIST	ON
      2  7fc0				   CHARACTERSHAPE_WALL
      3  7fc0		       77 77 77 00*	      .byte.b	119,119,119,0,221,221,221,0
      4  7fc8		       77 77 77 00*	      .byte.b	119,119,119,0,221,221,221,0
      5  7fd0		       ff ff ff ff*	      .byte.b	255,255,255,255,255,255,255,255
      0  7fd8					      OPTIONAL_PAGEBREAK	"CHARACTERSHAPE_WALL_MIRRORED", LINES_PER_CHAR
     10  7fd8					      LIST	ON
      7  7fd8				   CHARACTERSHAPE_WALL_MIRRORED
      8  7fd8		       ee ee ee 00*	      .byte.b	238,238,238,0,187,187,187,0
      9  7fe0		       ee ee ee 00*	      .byte.b	238,238,238,0,187,187,187,0
     10  7fe8		       ff ff ff ff*	      .byte.b	255,255,255,255,255,255,255,255
------- FILE BANK_FIXED.asm
   1496  7ff0
   1497  7ff0				  -	      if	DIGITS
   1498  7ff0				  -	      include	"characterset/character_9.asm"
   1499  7ff0				  -	      include	"characterset/character_8.asm"
   1500  7ff0				  -	      include	"characterset/character_7.asm"
   1501  7ff0				  -	      include	"characterset/character_6.asm"
   1502  7ff0				  -	      include	"characterset/character_5.asm"
   1503  7ff0				  -	      include	"characterset/character_4.asm"
   1504  7ff0				  -	      include	"characterset/character_3.asm"
   1505  7ff0				  -	      include	"characterset/character_2.asm"
   1506  7ff0				  -	      include	"characterset/character_1.asm"
   1507  7ff0				  -	      include	"characterset/character_0.asm"
   1508  7ff0					      endif
   1509  7ff0
   1510  7ff0
   1511  7ff0
   1512  7ff0
   1513  7ff0
 FREE BYTES IN FIXED BANK =  $0
   1514  7ff0					      ECHO	"FREE BYTES IN FIXED BANK = ", $FFF0 - *
   1515  7ff0
   1516  7ff0							;---------------------------------------------------------------------------
   1517  7ff0							; The reset vectors
   1518  7ff0							; these must live in the fixed bank (last 2K of any ROM image in TigerVision)
   1519  7ff0
   1520  7ff4 ????				      SEG	PlusCart
   1521  7ff0					      ORG	FIXED_BANK + $7F0
   1522  7ff0					      RORG	$7FF0
   1523  7ff0		       7f f0	   PLUSCART_IO =	*
   1524  7ff0		       00 aa	   PLUS0      =	%10101010
   1525  7ff0		       00 19	   PLUS1      =	%00011001
   1526  7ff0		       00 af	   PLUS2      =	%10101111
   1527  7ff0		       00 36	   PLUS3      =	%00110110
   1528  7ff0		       aa 19 af 36	      .byte.b	PLUS0,PLUS1,PLUS2,PLUS3
   1529  7ff4
   1530  8000 ????				      SEG	InterruptVectors
   1531  7ffc					      ORG	FIXED_BANK + $7FC
   1532  7ffc					      RORG	$7ffC
   1533  7ffc
   1534  7ffc							;		 .word Reset	       ; NMI	    (not used)
   1535  7ffc		       c2 fb		      .word.w	Reset	; RESET
   1536  7ffe		       c2 fb		      .word.w	Reset	; IRQ	      (not used)
   1537  8000
   1538  8000							;---------------------------------------------------------------------------
------- FILE ./sokoboo.asm
    866  8000
    867  8000							;END
